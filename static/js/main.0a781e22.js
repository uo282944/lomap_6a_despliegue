/*! For license information please see main.0a781e22.js.LICENSE.txt */
!function(){var e={6477:function(e,t,n){"use strict";n.r(t),n.d(t,{CordovaIFrameNavigator:function(){return s.CordovaIFrameNavigator},CordovaPopupNavigator:function(){return s.CordovaPopupNavigator},InMemoryWebStorage:function(){return s.InMemoryWebStorage},Log:function(){return s.Log},OidcClient:function(){return s.OidcClient},SessionMonitor:function(){return s.SessionMonitor},User:function(){return s.User},UserManager:function(){return s.UserManager},Version:function(){return s.Version},WebStorageStateStore:function(){return s.WebStorageStateStore},clearOidcPersistentStorage:function(){return ee},getBearerToken:function(){return G},getDpopToken:function(){return K},refresh:function(){return Y},registerClient:function(){return B},removeOidcQueryParam:function(){return $}});var r,i=n(1413),a=n(4165),o=n(5861),s=n(6944),u=n(136),l=n(9388),c=n(8737),d=n(5671),f=n(3144),h=(n(7465),n(4255)),p=n(2167),v={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},m=new Uint8Array(16);function g(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(m)}for(var y=[],_=0;_<256;++_)y.push((_+256).toString(16).slice(1));function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase()}var w=function(e,t,n){if(v.randomUUID&&!t&&!e)return v.randomUUID();var r=(e=e||{}).random||(e.rng||g)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return b(r)},x=["ES256","RS256"],k=["openid","offline_access","webid"].join(" ");function S(e,t){return E.apply(this,arguments)}function E(){return(E=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.fetch)(t);case 2:if(200===(r=e.sent).status){e.next=5;break}throw new Error("Could not fetch JWKS for [".concat(n,"] at [").concat(t,"]: ").concat(r.status," ").concat(r.statusText));case 5:return e.prev=5,e.next=8,r.json();case 8:i=e.sent.keys[0],e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Error("Malformed JWKS for [".concat(n,"] at [").concat(t,"]: ").concat(e.t0.message));case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function A(e,t,n,r){return T.apply(this,arguments)}function T(){return(T=(0,o.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n,r);case 2:return o=e.sent,e.prev=3,e.t0=p.jwtVerify,e.t1=t,e.next=8,(0,p.importJWK)(o);case 8:return e.t2=e.sent,e.t3={issuer:r,audience:i},e.next=12,(0,e.t0)(e.t1,e.t2,e.t3);case 12:u=e.sent,l=u.payload,s=l,e.next=20;break;case 17:throw e.prev=17,e.t4=e.catch(3),new Error("Token verification failed: ".concat(e.t4.stack));case 20:if("string"!==typeof s.webid){e.next=22;break}return e.abrupt("return",s.webid);case 22:if("string"===typeof s.sub){e.next=24;break}throw new Error("The token ".concat(JSON.stringify(s)," is invalid: it has no 'webid' claim and no 'sub' claim."));case 24:return e.prev=24,new URL(s.sub),e.abrupt("return",s.sub);case 29:throw e.prev=29,e.t5=e.catch(24),new Error("The token has no 'webid' claim, and its 'sub' claim of [".concat(s.sub,"] is invalid as a URL - error [").concat(e.t5,"]."));case 32:case"end":return e.stop()}}),e,null,[[3,17],[24,29]])})))).apply(this,arguments)}function C(e,t){var n;return null!==(n=t.find((function(t){return e.includes(t)})))&&void 0!==n?n:null}Error,Error;var P=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,d.Z)(this,n),(r=t.call(this,"Invalid response from OIDC provider: missing fields ".concat(e))).missingFields=e,r}return(0,f.Z)(n)}((0,c.Z)(Error)),I=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,r,i){var a;return(0,d.Z)(this,n),(a=t.call(this,e)).error=r,a.errorDescription=i,a}return(0,f.Z)(n)}((0,c.Z)(Error));function R(e){var t=new URL(e);return new URL(t.pathname,t.origin).toString()}function L(e,t,n){return M.apply(this,arguments)}function M(){return(M=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new p.SignJWT({htu:R(t),htm:n.toUpperCase(),jti:w()}).setProtectedHeader({alg:x[0],jwk:r.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(r.privateKey,{}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return F.apply(this,arguments)}function F(){return(F=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.generateKeyPair)(x[0]);case 2:return t=e.sent,n=t.privateKey,r=t.publicKey,e.t0=n,e.next=8,(0,p.exportJWK)(r);case 8:return e.t1=e.sent,(i={privateKey:e.t0,publicKey:e.t1}).publicKey.alg=x[0],e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D="getResponse";(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D);case 1:case"end":return e.stop()}}),e)})))})(),function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D);case 1:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}();function N(e,t){var n,r,i,a;if("invalid_redirect_uri"===e.error)throw new Error("Dynamic client registration failed: the provided redirect uri [".concat(null===(n=t.redirectUrl)||void 0===n?void 0:n.toString(),"] is invalid - ").concat(null!==(r=e.error_description)&&void 0!==r?r:""));if("invalid_client_metadata"===e.error)throw new Error("Dynamic client registration failed: the provided client metadata ".concat(JSON.stringify(t)," is invalid - ").concat(null!==(i=e.error_description)&&void 0!==i?i:""));throw new Error("Dynamic client registration failed: ".concat(e.error," - ").concat(null!==(a=e.error_description)&&void 0!==a?a:""))}function j(e,t){if(void 0===e.client_id)throw new Error("Dynamic client registration failed: no client_id has been found on ".concat(JSON.stringify(e)));if(t.redirectUrl&&(void 0===e.redirect_uris||e.redirect_uris[0]!==t.redirectUrl.toString()))throw new Error("Dynamic client registration failed: the returned redirect URIs ".concat(JSON.stringify(e.redirect_uris)," don't match the provided ").concat(JSON.stringify([t.redirectUrl.toString()])))}function B(e,t){return U.apply(this,arguments)}function U(){return(U=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.registrationEndpoint){e.next=2;break}throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");case 2:if(Array.isArray(n.idTokenSigningAlgValuesSupported)){e.next=4;break}throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");case 4:return i=C(n.idTokenSigningAlgValuesSupported,x),o={client_name:t.clientName,application_type:"web",redirect_uris:[null===(r=t.redirectUrl)||void 0===r?void 0:r.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:i,grant_types:["authorization_code","refresh_token"]},s={"Content-Type":"application/json"},e.next=9,fetch(n.registrationEndpoint.toString(),{method:"POST",headers:s,body:JSON.stringify(o)});case 9:if(!(u=e.sent).ok){e.next=16;break}return e.next=13,u.json();case 13:return j(l=e.sent,t),e.abrupt("return",{clientId:l.client_id,clientSecret:l.client_secret,idTokenSignedResponseAlg:l.id_token_signed_response_alg,clientType:"dynamic"});case 16:if(400!==u.status){e.next=23;break}return e.t0=N,e.next=20,u.json();case 20:e.t1=e.sent,e.t2=t,(0,e.t0)(e.t1,e.t2);case 23:return e.t3=Error,e.t4="Dynamic client registration failed: the server returned ".concat(u.status," ").concat(u.statusText," - "),e.next=27,u.text();case 27:throw e.t5=e.sent,e.t6=e.t4.concat.call(e.t4,e.t5),new e.t3(e.t6);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return void 0!==e.error_description&&"string"===typeof e.error_description}function V(e,t){if(t.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(t.grantType)))throw new Error("The issuer [".concat(e.issuer,"] does not support the [").concat(t.grantType,"] grant"));if(!e.tokenEndpoint)throw new Error("This issuer [".concat(e.issuer,"] does not have a token endpoint"))}function Z(e,t){if(void 0!==(n=e).error&&"string"===typeof n.error)throw new I("Token endpoint returned error [".concat(e.error,"]").concat(z(e)?": ".concat(e.error_description):"").concat(function(e){return void 0!==e.error_uri&&"string"===typeof e.error_uri}(e)?" (see ".concat(e.error_uri,")"):""),e.error,z(e)?e.error_description:void 0);var n;if(!function(e){return void 0!==e.access_token&&"string"===typeof e.access_token}(e))throw new P(["access_token"]);if(!function(e){return void 0!==e.id_token&&"string"===typeof e.id_token}(e))throw new P(["id_token"]);if(!function(e){return void 0!==e.token_type&&"string"===typeof e.token_type}(e))throw new P(["token_type"]);if(!function(e){return void 0===e.expires_in||"number"===typeof e.expires_in}(e))throw new P(["expires_in"]);if(!t&&"bearer"!==e.token_type.toLowerCase())throw new Error("Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [".concat(e.token_type,"]."));return e}function H(e,t,n,r){return W.apply(this,arguments)}function W(){return(W=(0,o.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s,u,l,c,d,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(t,r),o={"content-type":"application/x-www-form-urlencoded"},!i){e.next=9;break}return e.next=5,O();case 5:return s=e.sent,e.next=8,L(t.tokenEndpoint,"POST",s);case 8:o.DPoP=e.sent;case 9:return n.clientSecret&&(o.Authorization="Basic ".concat(btoa("".concat(n.clientId,":").concat(n.clientSecret)))),u={grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:n.clientId},l={method:"POST",headers:o,body:new URLSearchParams(u).toString()},e.next=14,fetch(t.tokenEndpoint,l);case 14:return e.next=16,e.sent;case 16:return c=e.sent,e.next=19,c.json();case 19:return d=e.sent,f=Z(d,i),e.next=23,A(f.id_token,t.jwksUri,t.issuer,n.clientId);case 23:return h=e.sent,e.abrupt("return",{accessToken:f.access_token,idToken:f.id_token,refreshToken:(a=f,void 0!==a.refresh_token&&"string"===typeof a.refresh_token?f.refresh_token:void 0),webId:h,dpopKey:s,expiresIn:f.expires_in});case 25:case"end":return e.stop()}var a}),e)})))).apply(this,arguments)}function G(e){return q.apply(this,arguments)}function q(){return(q=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new s.OidcClient({response_mode:"query",loadUserInfo:!1}),e.next=4,r.processSigninResponse(t);case 4:if(n=e.sent,void 0!==r.settings.metadata){e.next=7;break}throw new Error("Cannot retrieve issuer metadata from client information in storage.");case 7:if(void 0!==r.settings.metadata.jwks_uri){e.next=9;break}throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");case 9:if(void 0!==r.settings.metadata.issuer){e.next=11;break}throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");case 11:if(void 0!==r.settings.client_id){e.next=13;break}throw new Error("Missing some client information in storage: 'client_id' is undefined");case 13:return e.next=15,A(n.id_token,r.settings.metadata.jwks_uri,r.settings.metadata.issuer,r.settings.client_id);case 15:return i=e.sent,e.abrupt("return",{accessToken:n.access_token,idToken:n.id_token,webId:i,refreshToken:n.refresh_token});case 19:throw e.prev=19,e.t0=e.catch(0),new Error("Problem handling Auth Code Grant (Flow) redirect - URL [".concat(t,"]: ").concat(e.t0));case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function K(e,t,n){return J.apply(this,arguments)}function J(){return(J=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,n,r,!0));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(e){try{return new URL(e),!0}catch(t){return!1}};function Y(e,t,n,r){return Q.apply(this,arguments)}function Q(){return(Q=(0,o.Z)((0,a.Z)().mark((function e(t,n,r,o){var s,u,l,c,d,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r.clientId){e.next=2;break}throw new Error("No client ID available when trying to refresh the access token.");case 2:if(s={grant_type:"refresh_token",refresh_token:t,scope:k},u={},void 0===o){e.next=9;break}return e.next=7,L(n.tokenEndpoint,"POST",o);case 7:e.t0=e.sent,u={DPoP:e.t0};case 9:return l={},void 0!==r.clientSecret?l={Authorization:"Basic ".concat(btoa("".concat(r.clientId,":").concat(r.clientSecret)))}:X(r.clientId)&&(s.client_id=r.clientId),e.next=13,fetch(n.tokenEndpoint,{method:"POST",body:new URLSearchParams(s).toString(),headers:(0,i.Z)((0,i.Z)((0,i.Z)({},u),l),{},{"Content-Type":"application/x-www-form-urlencoded"})});case 13:return c=e.sent,e.prev=14,e.next=17,c.json();case 17:d=e.sent,e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(14),new Error("The token endpoint of issuer ".concat(n.issuer," returned a malformed response."));case 23:return f=Z(d,void 0!==o),e.next=26,A(f.id_token,n.jwksUri,n.issuer,r.clientId);case 26:return h=e.sent,e.abrupt("return",{accessToken:f.access_token,idToken:f.id_token,refreshToken:"string"===typeof f.refresh_token?f.refresh_token:void 0,webId:h,dpopKey:o,expiresIn:f.expires_in});case 28:case"end":return e.stop()}}),e,null,[[14,20]])})))).apply(this,arguments)}function $(e){var t=new URL(e);return t.searchParams.delete("code"),t.searchParams.delete("state"),t.hash="",t.toString()}function ee(){return te.apply(this,arguments)}function te(){return te=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new s.OidcClient({response_mode:"query"}),e.next=3,t.clearStaleState(new s.WebStorageStateStore({}));case 3:for(n=window.localStorage,r=[],i=0;i<=n.length;i+=1)(o=n.key(i))&&(o.match(/^oidc\..+$/)||o.match(/^solidClientAuthenticationUser:.+$/))&&r.push(o);r.forEach((function(e){return n.removeItem(e)}));case 7:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}},6944:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={debug:function(){},info:function(){},warn:function(){},error:function(){}},a=void 0,o=void 0;(t.Log=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.reset=function(){o=3,a=i},e.debug=function(){if(o>=4){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.debug.apply(a,Array.from(t))}},e.info=function(){if(o>=3){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.info.apply(a,Array.from(t))}},e.warn=function(){if(o>=2){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.warn.apply(a,Array.from(t))}},e.error=function(){if(o>=1){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.error.apply(a,Array.from(t))}},r(e,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return o},set:function(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");o=e}},{key:"logger",get:function(){return a},set:function(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw new Error("Invalid logger");a=e}}]),e}()).reset()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return setInterval(e,t)})),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return clearInterval(e)}))},a=!1,o=null;t.Global=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e._testing=function(){a=!0},e.setXMLHttpRequest=function(e){o=e},r(e,null,[{key:"location",get:function(){if(!a)return location}},{key:"localStorage",get:function(){if(!a&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!a&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!a&&"undefined"!=typeof window)return o||XMLHttpRequest}},{key:"timer",get:function(){if(!a)return i}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataService=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=n(7),o=".well-known/openid-configuration";t.MetadataService=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.JsonService;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=t,this._jsonService=new n(["application/jwk-set+json"])}return e.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},e.prototype.getMetadata=function(){var e=this;return this._settings.metadata?(i.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(i.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then((function(t){i.Log.debug("MetadataService.getMetadata: json received");var n=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},n,t),e._settings.metadata}))):(i.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},e.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},e.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},e.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},e.prototype.getTokenEndpoint=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},e.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},e.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},e.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},e.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},e.prototype._getMetadataProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then((function(n){if(i.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===n[e]){if(!0===t)return void i.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw i.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),new Error("Metadata does not contain property "+e)}return n[e]}))},e.prototype.getSigningKeys=function(){var e=this;return this._settings.signingKeys?(i.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then((function(t){return i.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then((function(t){if(i.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw i.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys}))}))},r(e,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(o)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=o))),this._metadataUrl}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlUtility=void 0;var r=n(0),i=n(1);t.UrlUtility=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.addQueryParam=function(e,t,n){return e.indexOf("?")<0&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(t),(e+="=")+encodeURIComponent(n)},e.parseUrlFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Global;"string"!=typeof e&&(e=n.location.href);var a=e.lastIndexOf(t);a>=0&&(e=e.substr(a+1)),"?"===t&&(a=e.indexOf("#"))>=0&&(e=e.substr(0,a));for(var o,s={},u=/([^&=]+)=([^&]*)/g,l=0;o=u.exec(e);)if(s[decodeURIComponent(o[1])]=decodeURIComponent(o[2].replace(/\+/g," ")),l++>50)return r.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var c in s)return s;return{}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoseUtil=void 0;var r=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(n(33));t.JoseUtil=(0,i.default)({jws:r.jws,KeyUtil:r.KeyUtil,X509:r.X509,crypto:r.crypto,hextob64u:r.hextob64u,b64tohex:r.b64tohex,AllowedSigningAlgs:r.AllowedSigningAlgs})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClientSettings=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=n(23),s=n(6),u=n(24),l=n(2),c=".well-known/openid-configuration";t.OidcClientSettings=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.authority,i=t.metadataUrl,a=t.metadata,c=t.signingKeys,d=t.metadataSeed,f=t.client_id,h=t.client_secret,p=t.response_type,v=void 0===p?"id_token":p,m=t.scope,g=void 0===m?"openid":m,y=t.redirect_uri,_=t.post_logout_redirect_uri,b=t.client_authentication,w=void 0===b?"client_secret_post":b,x=t.prompt,k=t.display,S=t.max_age,E=t.ui_locales,A=t.acr_values,T=t.resource,C=t.response_mode,P=t.filterProtocolClaims,I=void 0===P||P,R=t.loadUserInfo,L=void 0===R||R,M=t.staleStateAge,O=void 0===M?900:M,F=t.clockSkew,D=void 0===F?300:F,N=t.clockService,j=void 0===N?new o.ClockService:N,B=t.userInfoJwtIssuer,U=void 0===B?"OP":B,z=t.mergeClaims,V=void 0!==z&&z,Z=t.stateStore,H=void 0===Z?new s.WebStorageStateStore:Z,W=t.ResponseValidatorCtor,G=void 0===W?u.ResponseValidator:W,q=t.MetadataServiceCtor,K=void 0===q?l.MetadataService:q,J=t.extraQueryParams,X=void 0===J?{}:J,Y=t.extraTokenParams,Q=void 0===Y?{}:Y;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._authority=n,this._metadataUrl=i,this._metadata=a,this._metadataSeed=d,this._signingKeys=c,this._client_id=f,this._client_secret=h,this._response_type=v,this._scope=g,this._redirect_uri=y,this._post_logout_redirect_uri=_,this._client_authentication=w,this._prompt=x,this._display=k,this._max_age=S,this._ui_locales=E,this._acr_values=A,this._resource=T,this._response_mode=C,this._filterProtocolClaims=!!I,this._loadUserInfo=!!L,this._staleStateAge=O,this._clockSkew=D,this._clockService=j,this._userInfoJwtIssuer=U,this._mergeClaims=!!V,this._stateStore=H,this._validator=new G(this),this._metadataService=new K(this),this._extraQueryParams="object"===(void 0===X?"undefined":r(X))?X:{},this._extraTokenParams="object"===(void 0===Q?"undefined":r(Q))?Q:{}}return e.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},i(e,[{key:"client_id",get:function(){return this._client_id},set:function(e){if(this._client_id)throw a.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(e){if(this._authority)throw a.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(c)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=c)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(e){this._metadataSeed=e}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(e){"object"===(void 0===e?"undefined":r(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(e){"object"===(void 0===e?"undefined":r(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebStorageStateStore=void 0;var r=n(0),i=n(1);t.WebStorageStateStore=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prefix,r=void 0===n?"oidc.":n,a=t.store,o=void 0===a?i.Global.localStorage:a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._store=o,this._prefix=r}return e.prototype.set=function(e,t){return r.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()},e.prototype.get=function(e){r.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e;var t=this._store.getItem(e);return Promise.resolve(t)},e.prototype.remove=function(e){r.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)},e.prototype.getAllKeys=function(){r.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],t=0;t<this._store.length;t++){var n=this._store.key(t);0===n.indexOf(this._prefix)&&e.push(n.substr(this._prefix.length))}return Promise.resolve(e)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonService=void 0;var r=n(0),i=n(1);t.JsonService=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Global.XMLHttpRequest,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),t&&Array.isArray(t)?this._contentTypes=t.slice():this._contentTypes=[],this._contentTypes.push("application/json"),r&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=n,this._jwtHandler=r}return e.prototype.getJson=function(e,t){var n=this;if(!e)throw r.Log.error("JsonService.getJson: No url passed"),new Error("url");return r.Log.debug("JsonService.getJson, url: ",e),new Promise((function(i,a){var o=new n._XMLHttpRequest;o.open("GET",e);var s=n._contentTypes,u=n._jwtHandler;o.onload=function(){if(r.Log.debug("JsonService.getJson: HTTP response received, status",o.status),200===o.status){var t=o.getResponseHeader("Content-Type");if(t){var n=s.find((function(e){if(t.startsWith(e))return!0}));if("application/jwt"==n)return void u(o).then(i,a);if(n)try{return void i(JSON.parse(o.responseText))}catch(i){return r.Log.error("JsonService.getJson: Error parsing JSON response",i.message),void a(i)}}a(Error("Invalid response Content-Type: "+t+", from URL: "+e))}else a(Error(o.statusText+" ("+o.status+")"))},o.onerror=function(){r.Log.error("JsonService.getJson: network error"),a(Error("Network Error"))},t&&(r.Log.debug("JsonService.getJson: token passed, setting Authorization header"),o.setRequestHeader("Authorization","Bearer "+t)),o.send()}))},e.prototype.postForm=function(e,t,n){var i=this;if(!e)throw r.Log.error("JsonService.postForm: No url passed"),new Error("url");return r.Log.debug("JsonService.postForm, url: ",e),new Promise((function(a,o){var s=new i._XMLHttpRequest;s.open("POST",e);var u=i._contentTypes;s.onload=function(){if(r.Log.debug("JsonService.postForm: HTTP response received, status",s.status),200!==s.status){if(400===s.status&&(n=s.getResponseHeader("Content-Type"))&&u.find((function(e){if(n.startsWith(e))return!0})))try{var t=JSON.parse(s.responseText);if(t&&t.error)return r.Log.error("JsonService.postForm: Error from server: ",t.error),void o(new Error(t.error))}catch(a){return r.Log.error("JsonService.postForm: Error parsing JSON response",a.message),void o(a)}o(Error(s.statusText+" ("+s.status+")"))}else{var n;if((n=s.getResponseHeader("Content-Type"))&&u.find((function(e){if(n.startsWith(e))return!0})))try{return void a(JSON.parse(s.responseText))}catch(a){return r.Log.error("JsonService.postForm: Error parsing JSON response",a.message),void o(a)}o(Error("Invalid response Content-Type: "+n+", from URL: "+e))}},s.onerror=function(){r.Log.error("JsonService.postForm: network error"),o(Error("Network Error"))};var l="";for(var c in t){var d=t[c];d&&(l.length>0&&(l+="&"),l+=encodeURIComponent(c),l+="=",l+=encodeURIComponent(d))}s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==n&&s.setRequestHeader("Authorization","Basic "+btoa(n)),s.send(l)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninRequest=void 0;var r=n(0),i=n(3),a=n(13);t.SigninRequest=function(){function e(t){var n=t.url,o=t.client_id,s=t.redirect_uri,u=t.response_type,l=t.scope,c=t.authority,d=t.data,f=t.prompt,h=t.display,p=t.max_age,v=t.ui_locales,m=t.id_token_hint,g=t.login_hint,y=t.acr_values,_=t.resource,b=t.response_mode,w=t.request,x=t.request_uri,k=t.extraQueryParams,S=t.request_type,E=t.client_secret,A=t.extraTokenParams,T=t.skipUserInfo;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw r.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!o)throw r.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!s)throw r.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!u)throw r.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!l)throw r.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!c)throw r.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var C=e.isOidc(u),P=e.isCode(u);b||(b=e.isCode(u)?"query":null),this.state=new a.SigninState({nonce:C,data:d,client_id:o,authority:c,redirect_uri:s,code_verifier:P,request_type:S,response_mode:b,client_secret:E,scope:l,extraTokenParams:A,skipUserInfo:T}),n=i.UrlUtility.addQueryParam(n,"client_id",o),n=i.UrlUtility.addQueryParam(n,"redirect_uri",s),n=i.UrlUtility.addQueryParam(n,"response_type",u),n=i.UrlUtility.addQueryParam(n,"scope",l),n=i.UrlUtility.addQueryParam(n,"state",this.state.id),C&&(n=i.UrlUtility.addQueryParam(n,"nonce",this.state.nonce)),P&&(n=i.UrlUtility.addQueryParam(n,"code_challenge",this.state.code_challenge),n=i.UrlUtility.addQueryParam(n,"code_challenge_method","S256"));var I={prompt:f,display:h,max_age:p,ui_locales:v,id_token_hint:m,login_hint:g,acr_values:y,resource:_,request:w,request_uri:x,response_mode:b};for(var R in I)I[R]&&(n=i.UrlUtility.addQueryParam(n,R,I[R]));for(var L in k)n=i.UrlUtility.addQueryParam(n,L,k[L]);this.url=n}return e.isOidc=function(e){return!!e.split(/\s+/g).filter((function(e){return"id_token"===e}))[0]},e.isOAuth=function(e){return!!e.split(/\s+/g).filter((function(e){return"token"===e}))[0]},e.isCode=function(e){return!!e.split(/\s+/g).filter((function(e){return"code"===e}))[0]},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(n(14));t.State=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=t.data,i=t.created,o=t.request_type;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._id=n||(0,a.default)(),this._data=r,this._created="number"==typeof i&&i>0?i:parseInt(Date.now()/1e3),this._request_type=o}return e.prototype.toStorageString=function(){return i.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},e.fromStorageString=function(t){return i.Log.debug("State.fromStorageString"),new e(JSON.parse(t))},e.clearStaleState=function(t,n){var r=Date.now()/1e3-n;return t.getAllKeys().then((function(n){i.Log.debug("State.clearStaleState: got keys",n);for(var a=[],o=function(o){var s=n[o];u=t.get(s).then((function(n){var a=!1;if(n)try{var o=e.fromStorageString(n);i.Log.debug("State.clearStaleState: got item from key: ",s,o.created),o.created<=r&&(a=!0)}catch(e){i.Log.error("State.clearStaleState: Error parsing state for key",s,e.message),a=!0}else i.Log.debug("State.clearStaleState: no item in storage for key: ",s),a=!0;if(a)return i.Log.debug("State.clearStaleState: removed item for key: ",s),t.remove(s)})),a.push(u)},s=0;s<n.length;s++){var u;o(s)}return i.Log.debug("State.clearStaleState: waiting on promise count:",a.length),Promise.all(a)}))},r(e,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClient=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=n(5),o=n(12),s=n(8),u=n(34),l=n(35),c=n(36),d=n(13),f=n(9);t.OidcClient=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),t instanceof a.OidcClientSettings?this._settings=t:this._settings=new a.OidcClientSettings(t)}return e.prototype.createSigninRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.response_type,r=t.scope,a=t.redirect_uri,o=t.data,u=t.state,l=t.prompt,c=t.display,d=t.max_age,f=t.ui_locales,h=t.id_token_hint,p=t.login_hint,v=t.acr_values,m=t.resource,g=t.request,y=t.request_uri,_=t.response_mode,b=t.extraQueryParams,w=t.extraTokenParams,x=t.request_type,k=t.skipUserInfo,S=arguments[1];i.Log.debug("OidcClient.createSigninRequest");var E=this._settings.client_id;n=n||this._settings.response_type,r=r||this._settings.scope,a=a||this._settings.redirect_uri,l=l||this._settings.prompt,c=c||this._settings.display,d=d||this._settings.max_age,f=f||this._settings.ui_locales,v=v||this._settings.acr_values,m=m||this._settings.resource,_=_||this._settings.response_mode,b=b||this._settings.extraQueryParams,w=w||this._settings.extraTokenParams;var A=this._settings.authority;return s.SigninRequest.isCode(n)&&"code"!==n?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then((function(t){i.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var T=new s.SigninRequest({url:t,client_id:E,redirect_uri:a,response_type:n,scope:r,data:o||u,authority:A,prompt:l,display:c,max_age:d,ui_locales:f,id_token_hint:h,login_hint:p,acr_values:v,resource:m,request:g,request_uri:y,extraQueryParams:b,extraTokenParams:w,request_type:x,response_mode:_,client_secret:e._settings.client_secret,skipUserInfo:k}),C=T.state;return(S=S||e._stateStore).set(C.id,C.toStorageString()).then((function(){return T}))}))},e.prototype.readSigninResponseState=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSigninResponseState");var r="query"===this._settings.response_mode||!this._settings.response_mode&&s.SigninRequest.isCode(this._settings.response_type)?"?":"#",a=new u.SigninResponse(e,r);return a.state?(t=t||this._stateStore,(n?t.remove.bind(t):t.get.bind(t))(a.state).then((function(e){if(!e)throw i.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:d.SigninState.fromStorageString(e),response:a}}))):(i.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},e.prototype.processSigninResponse=function(e,t){var n=this;return i.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,t,!0).then((function(e){var t=e.state,r=e.response;return i.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),n._validator.validateSigninResponse(t,r)}))},e.prototype.createSignoutRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id_token_hint,r=t.data,a=t.state,o=t.post_logout_redirect_uri,s=t.extraQueryParams,u=t.request_type,c=arguments[1];return i.Log.debug("OidcClient.createSignoutRequest"),o=o||this._settings.post_logout_redirect_uri,s=s||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then((function(t){if(!t)throw i.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");i.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var d=new l.SignoutRequest({url:t,id_token_hint:n,post_logout_redirect_uri:o,data:r||a,extraQueryParams:s,request_type:u}),f=d.state;return f&&(i.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(c=c||e._stateStore).set(f.id,f.toStorageString())),d}))},e.prototype.readSignoutResponseState=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSignoutResponseState");var r=new c.SignoutResponse(e);if(!r.state)return i.Log.debug("OidcClient.readSignoutResponseState: No state in response"),r.error?(i.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",r.error),Promise.reject(new o.ErrorResponse(r))):Promise.resolve({state:void 0,response:r});var a=r.state;return t=t||this._stateStore,(n?t.remove.bind(t):t.get.bind(t))(a).then((function(e){if(!e)throw i.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:f.State.fromStorageString(e),response:r}}))},e.prototype.processSignoutResponse=function(e,t){var n=this;return i.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,t,!0).then((function(e){var t=e.state,r=e.response;return t?(i.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),n._validator.validateSignoutResponse(t,r)):(i.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),r)}))},e.prototype.clearStaleState=function(e){return i.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,f.State.clearStaleState(e,this.settings.staleStateAge)},r(e,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenClient=void 0;var r=n(7),i=n(2),a=n(0);t.TokenClient=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.JsonService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw a.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new n,this._metadataService=new o(this._settings)}return e.prototype.exchangeCode=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"authorization_code",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret,t.redirect_uri=t.redirect_uri||this._settings.redirect_uri;var n=void 0,r=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.code?t.redirect_uri?t.code_verifier?t.client_id?t.client_secret||"client_secret_basic"!=r?("client_secret_basic"==r&&(n=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(r){return a.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(r,t,n).then((function(e){return a.Log.debug("TokenClient.exchangeCode: response received"),e}))}))):(a.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(a.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(a.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(a.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(a.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},e.prototype.exchangeRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"refresh_token",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret;var n=void 0,r=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.refresh_token?t.client_id?("client_secret_basic"==r&&(n=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(r){return a.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(r,t,n).then((function(e){return a.Log.debug("TokenClient.exchangeRefreshToken: response received"),e}))}))):(a.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(a.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorResponse=void 0;var r=n(0);t.ErrorResponse=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.error,a=n.error_description,o=n.error_uri,s=n.state,u=n.session_state;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!i)throw r.Log.error("No error passed to ErrorResponse"),new Error("error");var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a||i));return l.name="ErrorResponse",l.error=i,l.error_description=a,l.error_uri=o,l.state=s,l.session_state=u,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninState=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=n(9),o=n(4),s=function(e){return e&&e.__esModule?e:{default:e}}(n(14));t.SigninState=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.nonce,i=n.authority,a=n.client_id,u=n.redirect_uri,l=n.code_verifier,c=n.response_mode,d=n.client_secret,f=n.scope,h=n.extraTokenParams,p=n.skipUserInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,arguments[0]));if(!0===r?v._nonce=(0,s.default)():r&&(v._nonce=r),!0===l?v._code_verifier=(0,s.default)()+(0,s.default)()+(0,s.default)():l&&(v._code_verifier=l),v.code_verifier){var m=o.JoseUtil.hashString(v.code_verifier,"SHA256");v._code_challenge=o.JoseUtil.hexToBase64Url(m)}return v._redirect_uri=u,v._authority=i,v._client_id=a,v._response_mode=c,v._client_secret=d,v._scope=f,v._extraTokenParams=h,v._skipUserInfo=p,v}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toStorageString=function(){return i.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},t.fromStorageString=function(e){return i.Log.debug("SigninState.fromStorageString"),new t(JSON.parse(e))},r(t,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),t}(a.State)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return("undefined"!=r&&null!==r&&void 0!==r.getRandomValues?i:a)().replace(/-/g,"")};var r="undefined"!=typeof window?window.crypto||window.msCrypto:null;function i(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^r.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}function a(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^16*Math.random()>>e/4).toString(16)}))}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.User=function(){function e(t){var n=t.id_token,r=t.session_state,i=t.access_token,a=t.refresh_token,o=t.token_type,s=t.scope,u=t.profile,l=t.expires_at,c=t.state;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id_token=n,this.session_state=r,this.access_token=i,this.refresh_token=a,this.token_type=o,this.scope=s,this.profile=u,this.expires_at=l,this.state=c}return e.prototype.toStorageString=function(){return i.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},e.fromStorageString=function(t){return i.Log.debug("User.fromStorageString"),new e(JSON.parse(t))},r(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenEvents=void 0;var r=n(0),i=n(46);t.AccessTokenEvents=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.accessTokenExpiringNotificationTime,r=void 0===n?60:n,a=t.accessTokenExpiringTimer,o=void 0===a?new i.Timer("Access token expiring"):a,s=t.accessTokenExpiredTimer,u=void 0===s?new i.Timer("Access token expired"):s;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._accessTokenExpiringNotificationTime=r,this._accessTokenExpiring=o,this._accessTokenExpired=u}return e.prototype.load=function(e){if(e.access_token&&void 0!==e.expires_in){var t=e.expires_in;if(r.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",t),t>0){var n=t-this._accessTokenExpiringNotificationTime;n<=0&&(n=1),r.Log.debug("AccessTokenEvents.load: registering expiring timer in:",n),this._accessTokenExpiring.init(n)}else r.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var i=t+1;r.Log.debug("AccessTokenEvents.load: registering expired timer in:",i),this._accessTokenExpired.init(i)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.unload=function(){r.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.addAccessTokenExpiring=function(e){this._accessTokenExpiring.addHandler(e)},e.prototype.removeAccessTokenExpiring=function(e){this._accessTokenExpiring.removeHandler(e)},e.prototype.addAccessTokenExpired=function(e){this._accessTokenExpired.addHandler(e)},e.prototype.removeAccessTokenExpired=function(e){this._accessTokenExpired.removeHandler(e)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var r=n(0);t.Event=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._callbacks=[]}return e.prototype.addHandler=function(e){this._callbacks.push(e)},e.prototype.removeHandler=function(e){var t=this._callbacks.findIndex((function(t){return t===e}));t>=0&&this._callbacks.splice(t,1)},e.prototype.raise=function(){r.Log.debug("Event: Raising event: "+this._name);for(var e=0;e<this._callbacks.length;e++){var t;(t=this._callbacks)[e].apply(t,arguments)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMonitor=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=n(19),o=n(1);t.SessionMonitor=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.CheckSessionIFrame,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.Global.timer;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=t,this._CheckSessionIFrameCtor=r,this._timer=s,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then((function(e){e?n._start(e):n._settings.monitorAnonymousSession&&n._userManager.querySessionStatus().then((function(e){var t={session_state:e.session_state};e.sub&&e.sid&&(t.profile={sub:e.sub,sid:e.sid}),n._start(t)})).catch((function(e){i.Log.error("SessionMonitor ctor: error from querySessionStatus:",e.message)}))})).catch((function(e){i.Log.error("SessionMonitor ctor: error from getUser:",e.message)})))}return e.prototype._start=function(e){var t=this,n=e.session_state;n&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,i.Log.debug("SessionMonitor._start: session_state:",n,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,i.Log.debug("SessionMonitor._start: session_state:",n,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(n):this._metadataService.getCheckSessionIframe().then((function(e){if(e){i.Log.debug("SessionMonitor._start: Initializing check session iframe");var r=t._client_id,a=t._checkSessionInterval,o=t._stopCheckSessionOnError;t._checkSessionIFrame=new t._CheckSessionIFrameCtor(t._callback.bind(t),r,e,a,o),t._checkSessionIFrame.load().then((function(){t._checkSessionIFrame.start(n)}))}else i.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")})).catch((function(e){i.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",e.message)})))},e.prototype._stop=function(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(i.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var t=this._timer.setInterval((function(){e._timer.clearInterval(t),e._userManager.querySessionStatus().then((function(t){var n={session_state:t.session_state};t.sub&&t.sid&&(n.profile={sub:t.sub,sid:t.sid}),e._start(n)})).catch((function(e){i.Log.error("SessionMonitor: error from querySessionStatus:",e.message)}))}),1e3)},e.prototype._callback=function(){var e=this;this._userManager.querySessionStatus().then((function(t){var n=!0;t?t.sub===e._sub?(n=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):i.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):i.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),n&&(e._sub?(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))})).catch((function(t){e._sub&&(i.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())}))},r(e,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSessionIFrame=void 0;var r=n(0);t.CheckSessionIFrame=function(){function e(t,n,r,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._callback=t,this._client_id=n,this._url=r,this._interval=i||2e3,this._stopOnError=a;var o=r.indexOf("/",r.indexOf("//")+2);this._frame_origin=r.substr(0,o),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=r}return e.prototype.load=function(){var e=this;return new Promise((function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)}))},e.prototype._message=function(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(r.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(r.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):r.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},e.prototype.start=function(e){var t=this;if(this._session_state!==e){r.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var n=function(){t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)};n(),this._timer=window.setInterval(n,this._interval)}},e.prototype.stop=function(){this._session_state=null,this._timer&&(r.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRevocationClient=void 0;var r=n(0),i=n(2),a=n(1);t.TokenRevocationClient=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Global.XMLHttpRequest,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw r.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=t,this._XMLHttpRequestCtor=n,this._metadataService=new o(this._settings)}return e.prototype.revoke=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw r.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if("access_token"!==i&&"refresh_token"!=i)throw r.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then((function(a){if(a){r.Log.debug("TokenRevocationClient.revoke: Revoking "+i);var o=n._settings.client_id,s=n._settings.client_secret;return n._revoke(a,o,s,e,i)}if(t)throw r.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")}))},e.prototype._revoke=function(e,t,n,i,a){var o=this;return new Promise((function(s,u){var l=new o._XMLHttpRequestCtor;l.open("POST",e),l.onload=function(){r.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",l.status),200===l.status?s():u(Error(l.statusText+" ("+l.status+")"))},l.onerror=function(){r.Log.debug("TokenRevocationClient.revoke: Network Error."),u("Network Error")};var c="client_id="+encodeURIComponent(t);n&&(c+="&client_secret="+encodeURIComponent(n)),c+="&token_type_hint="+encodeURIComponent(a),c+="&token="+encodeURIComponent(i),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(c)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.CordovaPopupWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t})),this.features=t.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=t.popupWindowTarget||"_blank",this.redirect_uri=t.startUrl,i.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return e.prototype._isInAppBrowserInstalled=function(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some((function(t){return e.hasOwnProperty(t)}))},e.prototype.navigate=function(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var t=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(t))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(i.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},e.prototype._loadStartCallback=function(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},e.prototype._exitCallback=function(e){this._error(e)},e.prototype._success=function(e){this._cleanup(),i.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._popup&&(i.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},r(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(10),a=n(5),o=n(6),s=n(37),u=n(38),l=n(16),c=n(2),d=n(48),f=n(49),h=n(19),p=n(20),v=n(18),m=n(1),g=n(15),y=n(50);t.default={Version:y.Version,Log:r.Log,OidcClient:i.OidcClient,OidcClientSettings:a.OidcClientSettings,WebStorageStateStore:o.WebStorageStateStore,InMemoryWebStorage:s.InMemoryWebStorage,UserManager:u.UserManager,AccessTokenEvents:l.AccessTokenEvents,MetadataService:c.MetadataService,CordovaPopupNavigator:d.CordovaPopupNavigator,CordovaIFrameNavigator:f.CordovaIFrameNavigator,CheckSessionIFrame:h.CheckSessionIFrame,TokenRevocationClient:p.TokenRevocationClient,SessionMonitor:v.SessionMonitor,Global:m.Global,User:g.User},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClockService=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseValidator=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),a=n(2),o=n(25),s=n(11),u=n(12),l=n(4),c=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];t.ResponseValidator=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.MetadataService,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UserInfoService,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.JoseUtil,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.TokenClient;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=t,this._metadataService=new n(this._settings),this._userInfoService=new r(this._settings),this._joseUtil=u,this._tokenClient=new c(this._settings)}return e.prototype.validateSigninResponse=function(e,t){var n=this;return i.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: state processed"),n._validateTokens(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),n._processClaims(e,t).then((function(e){return i.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),e}))}))}))},e.prototype.validateSignoutResponse=function(e,t){return e.id!==t.state?(i.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(i.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",t.error),Promise.reject(new u.ErrorResponse(t))):Promise.resolve(t))},e.prototype._processSigninParams=function(e,t){if(e.id!==t.state)return i.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!e.client_id)return i.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!e.authority)return i.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return i.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return i.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return i.Log.debug("ResponseValidator._processSigninParams: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator._processSigninParams: Response was error",t.error),Promise.reject(new u.ErrorResponse(t))):e.nonce&&!t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!e.nonce&&t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):e.code_verifier&&!t.code?(i.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!e.code_verifier&&t.code?(i.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(t.scope||(t.scope=e.scope),Promise.resolve(t))},e.prototype._processClaims=function(e,t){var n=this;if(t.isOpenIdConnect){if(i.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),t.profile=this._filterProtocolClaims(t.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&t.access_token)return i.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(t.access_token).then((function(e){return i.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),e.sub!==t.profile.sub?(i.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(t.profile=n._mergeClaims(t.profile,e),i.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",t.profile),t)}));i.Log.debug("ResponseValidator._processClaims: not loading user info")}else i.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(t)},e.prototype._mergeClaims=function(e,t){var n=Object.assign({},e);for(var i in t){var a=t[i];Array.isArray(a)||(a=[a]);for(var o=0;o<a.length;o++){var s=a[o];n[i]?Array.isArray(n[i])?n[i].indexOf(s)<0&&n[i].push(s):n[i]!==s&&("object"===(void 0===s?"undefined":r(s))&&this._settings.mergeClaims?n[i]=this._mergeClaims(n[i],s):n[i]=[n[i],s]):n[i]=s}}return n},e.prototype._filterProtocolClaims=function(e){i.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var t=Object.assign({},e);return this._settings._filterProtocolClaims?(c.forEach((function(e){delete t[e]})),i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",t)):i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),t},e.prototype._validateTokens=function(e,t){return t.code?(i.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,t)):t.id_token?t.access_token?(i.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(t))},e.prototype._processCode=function(e,t){var n=this,a={client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===r(e.extraTokenParams)&&Object.assign(a,e.extraTokenParams),this._tokenClient.exchangeCode(a).then((function(r){for(var a in r)t[a]=r[a];return t.id_token?(i.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),n._validateIdTokenAttributes(e,t)):(i.Log.debug("ResponseValidator._processCode: token response successful, returning response"),t)}))},e.prototype._validateIdTokenAttributes=function(e,t){var n=this;return this._metadataService.getIssuer().then((function(r){var a=e.client_id,o=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",o),n._settings.getEpochTime().then((function(s){return n._joseUtil.validateJwtAttributes(t.id_token,r,a,o,s).then((function(n){return e.nonce&&e.nonce!==n.nonce?(i.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):n.sub?(t.profile=n,t):(i.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))}))},e.prototype._validateIdTokenAndAccessToken=function(e,t){var n=this;return this._validateIdToken(e,t).then((function(e){return n._validateAccessToken(e)}))},e.prototype._getSigningKeyForJwt=function(e){var t=this;return this._metadataService.getSigningKeys().then((function(n){var r=e.header.kid;if(!n)return i.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));i.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var a=void 0;if(r)a=n.filter((function(e){return e.kid===r}))[0];else{if((n=t._filterByAlg(n,e.header.alg)).length>1)return i.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));a=n[0]}return Promise.resolve(a)}))},e.prototype._getSigningKeyForJwtWithSingleRetry=function(e){var t=this;return this._getSigningKeyForJwt(e).then((function(n){return n?Promise.resolve(n):(t._metadataService.resetSigningKeys(),t._getSigningKeyForJwt(e))}))},e.prototype._validateIdToken=function(e,t){var n=this;if(!e.nonce)return i.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var r=this._joseUtil.parseJwt(t.id_token);return r&&r.header&&r.payload?e.nonce!==r.payload.nonce?(i.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then((function(a){return i.Log.debug("ResponseValidator._validateIdToken: Received issuer"),n._getSigningKeyForJwtWithSingleRetry(r).then((function(o){if(!o)return i.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var s=e.client_id,u=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",u),n._joseUtil.validateJwt(t.id_token,o,a,s,u).then((function(){return i.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),r.payload.sub?(t.profile=r.payload,t):(i.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))})):(i.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",r),Promise.reject(new Error("Failed to parse id_token")))},e.prototype._filterByAlg=function(e,t){var n=null;if(t.startsWith("RS"))n="RSA";else if(t.startsWith("PS"))n="PS";else{if(!t.startsWith("ES"))return i.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",t),[];n="EC"}return i.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",n),e=e.filter((function(e){return e.kty===n})),i.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",n,e.length),e},e.prototype._validateAccessToken=function(e){if(!e.profile)return i.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!e.profile.at_hash)return i.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!e.id_token)return i.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var t=this._joseUtil.parseJwt(e.id_token);if(!t||!t.header)return i.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",t),Promise.reject(new Error("Failed to parse id_token"));var n=t.header.alg;if(!n||5!==n.length)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n),Promise.reject(new Error("Unsupported alg: "+n));var r=n.substr(2,3);if(!r)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,r),Promise.reject(new Error("Unsupported alg: "+n));if(256!==(r=parseInt(r))&&384!==r&&512!==r)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,r),Promise.reject(new Error("Unsupported alg: "+n));var a="sha"+r,o=this._joseUtil.hashString(e.access_token,a);if(!o)return i.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",a),Promise.reject(new Error("Failed to validate at_hash"));var s=o.substr(0,o.length/2),u=this._joseUtil.hexToBase64Url(s);return u!==e.profile.at_hash?(i.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",u,e.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(i.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoService=void 0;var r=n(7),i=n(2),a=n(0),o=n(4);t.UserInfoService=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.JsonService,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.JoseUtil;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw a.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new n(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new s(this._settings),this._joseUtil=u}return e.prototype.getClaims=function(e){var t=this;return e?this._metadataService.getUserInfoEndpoint().then((function(n){return a.Log.debug("UserInfoService.getClaims: received userinfo url",n),t._jsonService.getJson(n,e).then((function(e){return a.Log.debug("UserInfoService.getClaims: claims received",e),e}))})):(a.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},e.prototype._getClaimsFromJwt=function e(t){var n=this;try{var r=this._joseUtil.parseJwt(t.responseText);if(!r||!r.header||!r.payload)return a.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",r),Promise.reject(new Error("Failed to parse id_token"));var i=r.header.kid,o=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":o=this._metadataService.getIssuer();break;case"ANY":o=Promise.resolve(r.payload.iss);break;default:o=Promise.resolve(this._settings.userInfoJwtIssuer)}return o.then((function(e){return a.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+e),n._metadataService.getSigningKeys().then((function(o){if(!o)return a.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));a.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var s=void 0;if(i)s=o.filter((function(e){return e.kid===i}))[0];else{if((o=n._filterByAlg(o,r.header.alg)).length>1)return a.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));s=o[0]}if(!s)return a.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var u=n._settings.client_id,l=n._settings.clockSkew;return a.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",l),n._joseUtil.validateJwt(t.responseText,s,e,u,l,void 0,!0).then((function(){return a.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),r.payload}))}))}))}catch(e){return a.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",e.message),void reject(e)}},e.prototype._filterByAlg=function(e,t){var n=null;if(t.startsWith("RS"))n="RSA";else if(t.startsWith("PS"))n="PS";else{if(!t.startsWith("ES"))return a.Log.debug("UserInfoService._filterByAlg: alg not supported: ",t),[];n="EC"}return a.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",n),e=e.filter((function(e){return e.kty===n})),a.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",n,e.length),e},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedSigningAlgs=t.b64tohex=t.hextob64u=t.crypto=t.X509=t.KeyUtil=t.jws=void 0;var r=n(27);t.jws=r.jws,t.KeyUtil=r.KEYUTIL,t.X509=r.X509,t.crypto=r.crypto,t.hextob64u=r.hextob64u,t.b64tohex=r.b64tohex,t.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,r,i,a,o,s,u,l,c,d,f,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p={userAgent:!1},v={},m=m||(n=Math,i=(r={}).lib={},a=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=i.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a++){var o=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=o<<24-(r+a)%4*8}else for(a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=n.ceil(t/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(4294967296*n.random()|0);return new o.init(t,e)}}),s=r.enc={},u=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},c=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,i=t.sigBytes,a=this.blockSize,s=i/(4*a),u=(s=e?n.ceil(s):n.max((0|s)-this._minBufferSize,0))*a,l=n.min(4*u,i);if(u){for(var c=0;c<u;c+=a)this._doProcessBlock(r,c);var d=r.splice(0,u);t.sigBytes-=l}return new o.init(d,l)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),i.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),f=r.algo={},r);!function(e){var t,n=(t=m).lib,r=n.Base,i=n.WordArray;(t=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),function(){var e=m,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(a>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],a=0,o=0;o<n;o++)if(o%4){var s=r.indexOf(e.charAt(o-1))<<o%4*2,u=r.indexOf(e.charAt(o))>>>6-o%4*2;i[a>>>2]|=(s|u)<<24-a%4*8,a++}return t.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){for(var t=m,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,a=[],o=[],s=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var c;e:{c=u;for(var d=e.sqrt(c),f=2;f<=d;f++)if(!(c%f)){c=!1;break e}c=!0}c&&(8>l&&(a[l]=s(e.pow(u,.5))),o[l]=s(e.pow(u,1/3)),l++),u++}var h=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],d=n[7],f=0;64>f;f++){if(16>f)h[f]=0|e[t+f];else{var p=h[f-15],v=h[f-2];h[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+h[f-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+h[f-16]}p=d+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&c)+o[f]+h[f],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&a^i&a),d=c,c=l,l=u,u=s+p|0,s=a,a=i,i=r,r=p+v|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+l|0,n[6]=n[6]+c|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),function(){function e(){return r.create.apply(r,arguments)}for(var t=m,n=t.lib.Hasher,r=(a=t.x64).Word,i=a.WordArray,a=t.algo,o=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],s=[],u=0;80>u;u++)s[u]=e();a=a.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=(d=this._hash.words)[0],r=d[1],i=d[2],a=d[3],u=d[4],l=d[5],c=d[6],d=d[7],f=n.high,h=n.low,p=r.high,v=r.low,m=i.high,g=i.low,y=a.high,_=a.low,b=u.high,w=u.low,x=l.high,k=l.low,S=c.high,E=c.low,A=d.high,T=d.low,C=f,P=h,I=p,R=v,L=m,M=g,O=y,F=_,D=b,N=w,j=x,B=k,U=S,z=E,V=A,Z=T,H=0;80>H;H++){var W=s[H];if(16>H)var G=W.high=0|e[t+2*H],q=W.low=0|e[t+2*H+1];else{G=((q=(G=s[H-15]).high)>>>1|(K=G.low)<<31)^(q>>>8|K<<24)^q>>>7;var K=(K>>>1|q<<31)^(K>>>8|q<<24)^(K>>>7|q<<25),J=((q=(J=s[H-2]).high)>>>19|(X=J.low)<<13)^(q<<3|X>>>29)^q>>>6,X=(X>>>19|q<<13)^(X<<3|q>>>29)^(X>>>6|q<<26),Y=(q=s[H-7]).high,Q=($=s[H-16]).high,$=$.low;G=(G=(G=G+Y+((q=K+q.low)>>>0<K>>>0?1:0))+J+((q+=X)>>>0<X>>>0?1:0))+Q+((q+=$)>>>0<$>>>0?1:0),W.high=G,W.low=q}Y=D&j^~D&U,$=N&B^~N&z,W=C&I^C&L^I&L;var ee=P&R^P&M^R&M,te=(K=(C>>>28|P<<4)^(C<<30|P>>>2)^(C<<25|P>>>7),J=(P>>>28|C<<4)^(P<<30|C>>>2)^(P<<25|C>>>7),(X=o[H]).high),ne=X.low;Q=V+((D>>>14|N<<18)^(D>>>18|N<<14)^(D<<23|N>>>9))+((X=Z+((N>>>14|D<<18)^(N>>>18|D<<14)^(N<<23|D>>>9)))>>>0<Z>>>0?1:0),V=U,Z=z,U=j,z=B,j=D,B=N,D=O+(Q=(Q=(Q=Q+Y+((X+=$)>>>0<$>>>0?1:0))+te+((X+=ne)>>>0<ne>>>0?1:0))+G+((X+=q)>>>0<q>>>0?1:0))+((N=F+X|0)>>>0<F>>>0?1:0)|0,O=L,F=M,L=I,M=R,I=C,R=P,C=Q+(W=K+W+((q=J+ee)>>>0<J>>>0?1:0))+((P=X+q|0)>>>0<X>>>0?1:0)|0}h=n.low=h+P,n.high=f+C+(h>>>0<P>>>0?1:0),v=r.low=v+R,r.high=p+I+(v>>>0<R>>>0?1:0),g=i.low=g+M,i.high=m+L+(g>>>0<M>>>0?1:0),_=a.low=_+F,a.high=y+O+(_>>>0<F>>>0?1:0),w=u.low=w+N,u.high=b+D+(w>>>0<N>>>0?1:0),k=l.low=k+B,l.high=x+j+(k>>>0<B>>>0?1:0),E=c.low=E+z,c.high=S+U+(E>>>0<z>>>0?1:0),T=d.low=T+Z,d.high=A+V+(T>>>0<Z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(a),t.HmacSHA512=n._createHmacHelper(a)}(),function(){var e=m,t=(i=e.x64).Word,n=i.WordArray,r=(i=e.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(i),e.HmacSHA384=r._createHmacHelper(i)}();var g,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function _(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=y.charAt(n>>6)+y.charAt(63&n);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=y.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=y.charAt(n>>2)+y.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function b(e){var t,n,r,i="",a=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(r=y.indexOf(e.charAt(t)))<0||(0==a?(i+=T(r>>2),n=3&r,a=1):1==a?(i+=T(n<<2|r>>4),n=15&r,a=2):2==a?(i+=T(n),i+=T(r>>2),n=3&r,a=3):(i+=T(n<<2|r>>4),i+=T(15&r),a=0));return 1==a&&(i+=T(n<<2)),i}function w(e){var t,n=b(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function x(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function k(){return new x(null)}"Microsoft Internet Explorer"==p.appName?(x.prototype.am=function(e,t,n,r,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var u=32767&this[e],l=this[e++]>>15,c=s*u+l*o;i=((u=o*u+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+s*l+(i>>>30),n[r++]=1073741823&u}return i},g=30):"Netscape"!=p.appName?(x.prototype.am=function(e,t,n,r,i,a){for(;--a>=0;){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},g=26):(x.prototype.am=function(e,t,n,r,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var u=16383&this[e],l=this[e++]>>14,c=s*u+l*o;i=((u=o*u+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+s*l,n[r++]=268435455&u}return i},g=28),x.prototype.DB=g,x.prototype.DM=(1<<g)-1,x.prototype.DV=1<<g,x.prototype.FV=Math.pow(2,52),x.prototype.F1=52-g,x.prototype.F2=2*g-52;var S,E,A=new Array;for(S="0".charCodeAt(0),E=0;E<=9;++E)A[S++]=E;for(S="a".charCodeAt(0),E=10;E<36;++E)A[S++]=E;for(S="A".charCodeAt(0),E=10;E<36;++E)A[S++]=E;function T(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function C(e,t){var n=A[e.charCodeAt(t)];return null==n?-1:n}function P(e){var t=k();return t.fromInt(e),t}function I(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function R(e){this.m=e}function L(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function M(e,t){return e&t}function O(e,t){return e|t}function F(e,t){return e^t}function D(e,t){return e&~t}function N(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function j(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function B(){}function U(e){return e}function z(e){this.r2=k(),this.q3=k(),x.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}R.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},R.prototype.revert=function(e){return e},R.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},R.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},R.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},L.prototype.convert=function(e){var t=k();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(x.ZERO)>0&&this.m.subTo(t,t),t},L.prototype.revert=function(e){var t=k();return e.copyTo(t),this.reduce(t),t},L.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},L.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},L.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},x.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},x.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},x.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,a=0;--r>=0;){var o=8==n?255&e[r]:C(e,r);o<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==a?this[this.t++]=o:a+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=n)>=this.DB&&(a-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&x.ZERO.subTo(this,this)},x.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},x.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},x.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},x.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|s,s=(this[n]&a)<<r;for(n=o-1;n>=0;--n)t[n]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},x.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,a=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&a)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&a)<<i),t.t=this.t-n,t.clamp()}},x.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},x.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&x.ZERO.subTo(t,t)},x.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},x.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=k());var a=k(),o=this.s,s=e.s,u=this.DB-I(r[r.t-1]);u>0?(r.lShiftTo(u,a),i.lShiftTo(u,n)):(r.copyTo(a),i.copyTo(n));var l=a.t,c=a[l-1];if(0!=c){var d=c*(1<<this.F1)+(l>1?a[l-2]>>this.F2:0),f=this.FV/d,h=(1<<this.F1)/d,p=1<<this.F2,v=n.t,m=v-l,g=null==t?k():t;for(a.dlShiftTo(m,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),x.ONE.dlShiftTo(l,g),g.subTo(a,a);a.t<l;)a[a.t++]=0;for(;--m>=0;){var y=n[--v]==c?this.DM:Math.floor(n[v]*f+(n[v-1]+p)*h);if((n[v]+=a.am(0,y,n,m,0,l))<y)for(a.dlShiftTo(m,g),n.subTo(g,n);n[v]<--y;)n.subTo(g,n)}null!=t&&(n.drShiftTo(l,t),o!=s&&x.ZERO.subTo(t,t)),n.t=l,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&x.ZERO.subTo(n,n)}}},x.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},x.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},x.prototype.exp=function(e,t){if(e>4294967295||e<1)return x.ONE;var n=k(),r=k(),i=t.convert(this),a=I(e)-1;for(i.copyTo(n);--a>=0;)if(t.sqrTo(n,r),(e&1<<a)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}return t.revert(n)},x.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(n=this[o]>>s)>0&&(i=!0,a=T(n));o>=0;)s<t?(n=(this[o]&(1<<s)-1)<<t-s,n|=this[--o]>>(s+=this.DB-t)):(n=this[o]>>(s-=t)&r,s<=0&&(s+=this.DB,--o)),n>0&&(i=!0),i&&(a+=T(n));return i?a:"0"},x.prototype.negate=function(){var e=k();return x.ZERO.subTo(this,e),e},x.prototype.abs=function(){return this.s<0?this.negate():this},x.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},x.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+I(this[this.t-1]^this.s&this.DM)},x.prototype.mod=function(e){var t=k();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(x.ZERO)>0&&e.subTo(t,t),t},x.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new R(t):new L(t),this.exp(e,n)},x.ZERO=P(0),x.ONE=P(1),B.prototype.convert=U,B.prototype.revert=U,B.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},B.prototype.sqrTo=function(e,t){e.squareTo(t)},z.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=k();return e.copyTo(t),this.reduce(t),t},z.prototype.revert=function(e){return e},z.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},z.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},z.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var V,Z,H,W=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],G=(1<<26)/W[W.length-1];function q(){this.i=0,this.j=0,this.S=new Array}function K(){!function(e){Z[H++]^=255&e,Z[H++]^=e>>8&255,Z[H++]^=e>>16&255,Z[H++]^=e>>24&255,H>=256&&(H-=256)}((new Date).getTime())}if(x.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},x.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=P(n),i=k(),a=k(),o="";for(this.divRemTo(r,i,a);i.signum()>0;)o=(n+a.intValue()).toString(e).substr(1)+o,i.divRemTo(r,i,a);return a.intValue().toString(e)+o},x.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,a=0,o=0,s=0;s<e.length;++s){var u=C(e,s);u<0?"-"==e.charAt(s)&&0==this.signum()&&(i=!0):(o=t*o+u,++a>=n&&(this.dMultiply(r),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&x.ZERO.subTo(this,this)},x.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(x.ONE.shiftLeft(e-1),O,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(x.ONE.shiftLeft(e-1),this);else{var r=new Array,i=7&e;r.length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},x.prototype.bitwiseTo=function(e,t,n){var r,i,a=Math.min(e.t,this.t);for(r=0;r<a;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},x.prototype.changeBit=function(e,t){var n=x.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},x.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},x.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},x.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},x.prototype.multiplyLowerTo=function(e,t,n){var r,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},x.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},x.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},x.prototype.millerRabin=function(e){var t=this.subtract(x.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>W.length&&(e=W.length);for(var i=k(),a=0;a<e;++a){i.fromInt(W[Math.floor(Math.random()*W.length)]);var o=i.modPow(r,this);if(0!=o.compareTo(x.ONE)&&0!=o.compareTo(t)){for(var s=1;s++<n&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(x.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0},x.prototype.clone=function(){var e=k();return this.copyTo(e),e},x.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},x.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},x.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},x.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},x.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},x.prototype.equals=function(e){return 0==this.compareTo(e)},x.prototype.min=function(e){return this.compareTo(e)<0?this:e},x.prototype.max=function(e){return this.compareTo(e)>0?this:e},x.prototype.and=function(e){var t=k();return this.bitwiseTo(e,M,t),t},x.prototype.or=function(e){var t=k();return this.bitwiseTo(e,O,t),t},x.prototype.xor=function(e){var t=k();return this.bitwiseTo(e,F,t),t},x.prototype.andNot=function(e){var t=k();return this.bitwiseTo(e,D,t),t},x.prototype.not=function(){for(var e=k(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},x.prototype.shiftLeft=function(e){var t=k();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},x.prototype.shiftRight=function(e){var t=k();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},x.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+N(this[e]);return this.s<0?this.t*this.DB:-1},x.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=j(this[n]^t);return e},x.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},x.prototype.setBit=function(e){return this.changeBit(e,O)},x.prototype.clearBit=function(e){return this.changeBit(e,D)},x.prototype.flipBit=function(e){return this.changeBit(e,F)},x.prototype.add=function(e){var t=k();return this.addTo(e,t),t},x.prototype.subtract=function(e){var t=k();return this.subTo(e,t),t},x.prototype.multiply=function(e){var t=k();return this.multiplyTo(e,t),t},x.prototype.divide=function(e){var t=k();return this.divRemTo(e,t,null),t},x.prototype.remainder=function(e){var t=k();return this.divRemTo(e,null,t),t},x.prototype.divideAndRemainder=function(e){var t=k(),n=k();return this.divRemTo(e,t,n),new Array(t,n)},x.prototype.modPow=function(e,t){var n,r,i=e.bitLength(),a=P(1);if(i<=0)return a;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new R(t):t.isEven()?new z(t):new L(t);var o=new Array,s=3,u=n-1,l=(1<<n)-1;if(o[1]=r.convert(this),n>1){var c=k();for(r.sqrTo(o[1],c);s<=l;)o[s]=k(),r.mulTo(c,o[s-2],o[s]),s+=2}var d,f,h=e.t-1,p=!0,v=k();for(i=I(e[h])-1;h>=0;){for(i>=u?d=e[h]>>i-u&l:(d=(e[h]&(1<<i+1)-1)<<u-i,h>0&&(d|=e[h-1]>>this.DB+i-u)),s=n;0==(1&d);)d>>=1,--s;if((i-=s)<0&&(i+=this.DB,--h),p)o[d].copyTo(a),p=!1;else{for(;s>1;)r.sqrTo(a,v),r.sqrTo(v,a),s-=2;s>0?r.sqrTo(a,v):(f=a,a=v,v=f),r.mulTo(v,o[d],a)}for(;h>=0&&0==(e[h]&1<<i);)r.sqrTo(a,v),f=a,a=v,v=f,--i<0&&(i=this.DB-1,--h)}return r.revert(a)},x.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return x.ZERO;for(var n=e.clone(),r=this.clone(),i=P(1),a=P(0),o=P(0),s=P(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(o,i),a.subTo(s,a)):(r.subTo(n,r),t&&o.subTo(i,o),s.subTo(a,s))}return 0!=r.compareTo(x.ONE)?x.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},x.prototype.pow=function(e){return this.exp(e,new B)},x.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n},x.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=W[W.length-1]){for(t=0;t<W.length;++t)if(n[0]==W[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<W.length;){for(var r=W[t],i=t+1;i<W.length&&r<G;)r*=W[i++];for(r=n.modInt(r);t<i;)if(r%W[t++]==0)return!1}return n.millerRabin(e)},x.prototype.square=function(){var e=k();return this.squareTo(e),e},q.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0},q.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==Z){var J;if(Z=new Array,H=0,void 0!==v&&(void 0!==v.crypto||void 0!==v.msCrypto)){var X=v.crypto||v.msCrypto;if(X.getRandomValues){var Y=new Uint8Array(32);for(X.getRandomValues(Y),J=0;J<32;++J)Z[H++]=Y[J]}else if("Netscape"==p.appName&&p.appVersion<"5"){var Q=v.crypto.random(32);for(J=0;J<Q.length;++J)Z[H++]=255&Q.charCodeAt(J)}}for(;H<256;)J=Math.floor(65536*Math.random()),Z[H++]=J>>>8,Z[H++]=255&J;H=0,K()}function $(){if(null==V){for(K(),(V=new q).init(Z),H=0;H<Z.length;++H)Z[H]=0;H=0}return V.next()}function ee(){}function te(e,t){return new x(e,t)}function ne(e,t,n){for(var r="",i=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function re(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ie(e,t){this.x=t,this.q=e}function ae(e,t,n,r){this.curve=e,this.x=t,this.y=n,this.z=null==r?x.ONE:r,this.zinv=null}function oe(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new ae(this,null,null)}ee.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=$()},re.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},re.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=te(e,16),this.e=parseInt(t,16)}},re.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var a=new ee,o=new Array;t>2;){for(o[0]=0;0==o[0];)a.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new x(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},re.prototype.encryptOAEP=function(e,t,n){var r=function(e,t,n,r){var i=ue.crypto.MessageDigest,a=ue.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(e){return xe(a.hashHex(ke(e),o))}),e.length+2*r+2>t)throw"Message too long for RSA";var s,u="";for(s=0;s<t-e.length-2*r-2;s+=1)u+="\0";var l=n("")+u+"\x01"+e,c=new Array(r);(new ee).nextBytes(c);var d=ne(c,l.length,n),f=[];for(s=0;s<l.length;s+=1)f[s]=l.charCodeAt(s)^d.charCodeAt(s);var h=ne(f,c.length,n),p=[0];for(s=0;s<c.length;s+=1)p[s+1]=c[s]^h.charCodeAt(s);return new x(p.concat(f))}(e,this.n.bitLength()+7>>3,t,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var a=i.toString(16);return 0==(1&a.length)?a:"0"+a},re.prototype.type="RSA",ie.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ie.prototype.toBigInteger=function(){return this.x},ie.prototype.negate=function(){return new ie(this.q,this.x.negate().mod(this.q))},ie.prototype.add=function(e){return new ie(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ie.prototype.subtract=function(e){return new ie(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ie.prototype.multiply=function(e){return new ie(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ie.prototype.square=function(){return new ie(this.q,this.x.square().mod(this.q))},ie.prototype.divide=function(e){return new ie(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},ae.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ae.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ae.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(x.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(x.ZERO))},ae.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(x.ZERO)&&!this.y.toBigInteger().equals(x.ZERO)},ae.prototype.negate=function(){return new ae(this.curve,this.x,this.y.negate(),this.z)},ae.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(x.ZERO.equals(n))return x.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new x("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),o=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),s=o.multiply(n),u=i.multiply(o),l=t.square().multiply(this.z),c=l.subtract(u.shiftLeft(1)).multiply(e.z).subtract(s).multiply(n).mod(this.curve.q),d=u.multiply(r).multiply(t).subtract(a.multiply(s)).subtract(l.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.q),f=s.multiply(this.z).multiply(e.z).mod(this.curve.q);return new ae(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(d),f)},ae.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new x("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),a=this.curve.a.toBigInteger(),o=t.square().multiply(e);x.ZERO.equals(a)||(o=o.add(this.z.square().multiply(a)));var s=(o=o.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=o.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),l=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new ae(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(u),l)},ae.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new x("3")),i=this.negate(),a=this,o=this.curve.q.subtract(e),s=o.multiply(new x("3")),u=new ae(this.curve,this.x,this.y),l=u.negate();for(t=r.bitLength()-2;t>0;--t){a=a.twice();var c=r.testBit(t);c!=n.testBit(t)&&(a=a.add(c?this:i))}for(t=s.bitLength()-2;t>0;--t){u=u.twice();var d=s.testBit(t);d!=o.testBit(t)&&(u=u.add(d?u:l))}return a},ae.prototype.multiplyTwo=function(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?i=n.testBit(r)?i.add(a):i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i},oe.prototype.getQ=function(){return this.q},oe.prototype.getA=function(){return this.a},oe.prototype.getB=function(){return this.b},oe.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},oe.prototype.getInfinity=function(){return this.infinity},oe.prototype.fromBigInteger=function(e){return new ie(this.q,e)},oe.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new ae(this,this.fromBigInteger(new x(n,16)),this.fromBigInteger(new x(r,16)))}},ie.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ae.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=t(n,32);return e?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(r,32))),i},ae.decodeFrom=function(e,t){t[0];var n=t.length-1,r=t.slice(1,1+n/2),i=t.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var a=new x(r),o=new x(i);return new ae(e,e.fromBigInteger(a),e.fromBigInteger(o))},ae.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,r=t.substr(2,n/2),i=t.substr(2+n/2,n/2),a=new x(r,16),o=new x(i,16);return new ae(e,e.fromBigInteger(a),e.fromBigInteger(o))},ae.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y).divide(t),r=n.square().subtract(this.x).subtract(e.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new ae(this.curve,r,i)},ae.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(x.valueOf(2)),t=this.curve.fromBigInteger(x.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new ae(this.curve,r,i)},ae.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new x("3")),i=this.negate(),a=this;for(t=r.bitLength()-2;t>0;--t){a=a.twice();var o=r.testBit(t);o!=n.testBit(t)&&(a=a.add2D(o?this:i))}return a},ae.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),a=t.multiply(t).mod(i),o=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(i);return a.equals(o)},ae.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ae.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(x.ONE)<0||t.compareTo(e.subtract(x.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(x.ONE)<0||n.compareTo(e.subtract(x.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var se=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(e,t,r){return t?n[t]:String.fromCharCode(parseInt(r,16))}var i=new String(""),a=Object.hasOwnProperty;return function(n,o){var s,u,l=n.match(e),c=l[0],d=!1;"{"===c?s={}:"["===c?s=[]:(s=[],d=!0);for(var f=[s],p=1-d,v=l.length;p<v;++p){var m;switch((c=l[p]).charCodeAt(0)){default:(m=f[0])[u||m.length]=+c,u=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(t,r)),m=f[0],!u){if(!(m instanceof Array)){u=c||i;break}u=m.length}m[u]=c,u=void 0;break;case 91:m=f[0],f.unshift(m[u||m.length]=[]),u=void 0;break;case 93:case 125:f.shift();break;case 102:(m=f[0])[u||m.length]=!1,u=void 0;break;case 110:(m=f[0])[u||m.length]=null,u=void 0;break;case 116:(m=f[0])[u||m.length]=!0,u=void 0;break;case 123:m=f[0],f.unshift(m[u||m.length]={}),u=void 0}}if(d){if(1!==f.length)throw new Error;s=s[0]}else if(f.length)throw new Error;return o&&(s=function e(t,n){var r=t[n];if(r&&"object"===(void 0===r?"undefined":h(r))){var i=null;for(var s in r)if(a.call(r,s)&&r!==t){var u=e(r,s);void 0!==u?r[s]=u:(i||(i=[]),i.push(s))}if(i)for(var l=i.length;--l>=0;)delete r[i[l]]}return o.call(t,n,r)}({"":s},"")),s}}();void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.asn1&&ue.asn1||(ue.asn1={}),ue.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";t=new x(r,16).xor(e).add(x.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return Te(e,t)},this.newObject=function(e){var t=ue.asn1,n=t.ASN1Object,r=t.DERBoolean,i=t.DERInteger,a=t.DERBitString,o=t.DEROctetString,s=t.DERNull,u=t.DERObjectIdentifier,l=t.DEREnumerated,c=t.DERUTF8String,d=t.DERNumericString,f=t.DERPrintableString,h=t.DERTeletexString,p=t.DERIA5String,v=t.DERUTCTime,m=t.DERGeneralizedTime,g=t.DERVisibleString,y=t.DERBMPString,_=t.DERSequence,b=t.DERSet,w=t.DERTaggedObject,x=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var k=Object.keys(e);if(1!=k.length)throw new Error("key of param shall be only one.");var S=k[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+S+":"))throw new Error("undefined key: "+S);if("bool"==S)return new r(e[S]);if("int"==S)return new i(e[S]);if("bitstr"==S)return new a(e[S]);if("octstr"==S)return new o(e[S]);if("null"==S)return new s(e[S]);if("oid"==S)return new u(e[S]);if("enum"==S)return new l(e[S]);if("utf8str"==S)return new c(e[S]);if("numstr"==S)return new d(e[S]);if("prnstr"==S)return new f(e[S]);if("telstr"==S)return new h(e[S]);if("ia5str"==S)return new p(e[S]);if("utctime"==S)return new v(e[S]);if("gentime"==S)return new m(e[S]);if("visstr"==S)return new g(e[S]);if("bmpstr"==S)return new y(e[S]);if("asn1"==S)return new n(e[S]);if("seq"==S){for(var E=e[S],A=[],T=0;T<E.length;T++){var C=x(E[T]);A.push(C)}return new _({array:A})}if("set"==S){for(E=e[S],A=[],T=0;T<E.length;T++)C=x(E[T]),A.push(C);return new b({array:A})}if("tag"==S){var P=e[S];if("[object Array]"===Object.prototype.toString.call(P)&&3==P.length){var I=x(P[2]);return new w({tag:P[0],explicit:P[1],obj:I})}return new w(P)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},ue.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),i=2;i<e.length;i+=2){var a=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);r+=a.substr(1,7),"0"==a.substr(0,1)&&(t=t+"."+new x(r,2).toString(10),r="")}return t},ue.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new x(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var a="",o=0;o<i;o++)a+="0";for(r=a+r,o=0;o<r.length-1;o+=7){var s=r.substr(o,7);o!=r.length-7&&(s="1"+s),n+=t(parseInt(s,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),a=40*parseInt(i[0])+parseInt(i[1]);r+=t(a),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},ue.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},ue.asn1.DERAbstractString=function(e){ue.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=be(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},ze(ue.asn1.DERAbstractString,ue.asn1.ASN1Object),ue.asn1.DERAbstractTime=function(e){ue.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,n){var r=this.zeroPadding,i=this.localDateToUTC(e),a=String(i.getFullYear());"utc"==t&&(a=a.substr(2,2));var o=a+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var s=i.getMilliseconds();if(0!=s){var u=r(String(s),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ve(e)},this.setByDateValue=function(e,t,n,r,i,a){var o=new Date(Date.UTC(e,t-1,n,r,i,a,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},ze(ue.asn1.DERAbstractTime,ue.asn1.ASN1Object),ue.asn1.DERAbstractStructured=function(e){ue.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},ze(ue.asn1.DERAbstractStructured,ue.asn1.ASN1Object),ue.asn1.DERBoolean=function(e){ue.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},ze(ue.asn1.DERBoolean,ue.asn1.ASN1Object),ue.asn1.DERInteger=function(e){ue.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new x(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},ze(ue.asn1.DERInteger,ue.asn1.ASN1Object),ue.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ue.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}ue.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var r="";for(n=0;n<e.length-1;n+=8){var i=e.substr(n,8),a=parseInt(i,2).toString(16);1==a.length&&(a="0"+a),r+=a}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)1==e[n]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},ze(ue.asn1.DERBitString,ue.asn1.ASN1Object),ue.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ue.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}ue.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},ze(ue.asn1.DEROctetString,ue.asn1.DERAbstractString),ue.asn1.DERNull=function(){ue.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},ze(ue.asn1.DERNull,ue.asn1.ASN1Object),ue.asn1.DERObjectIdentifier=function(e){ue.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=parseInt(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var a="",o=0;o<i;o++)a+="0";for(r=a+r,o=0;o<r.length-1;o+=7){var s=r.substr(o,7);o!=r.length-7&&(s="1"+s),n+=t(parseInt(s,2))}return n};try{if(!e.match(/^[0-9.]+$/))return null;var r="",i=e.split("."),a=40*parseInt(i[0],10)+parseInt(i[1],10);r+=t(a),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r}catch(e){return null}}(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=ue.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},ze(ue.asn1.DERObjectIdentifier,ue.asn1.ASN1Object),ue.asn1.DEREnumerated=function(e){ue.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new x(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},ze(ue.asn1.DEREnumerated,ue.asn1.ASN1Object),ue.asn1.DERUTF8String=function(e){ue.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},ze(ue.asn1.DERUTF8String,ue.asn1.DERAbstractString),ue.asn1.DERNumericString=function(e){ue.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},ze(ue.asn1.DERNumericString,ue.asn1.DERAbstractString),ue.asn1.DERPrintableString=function(e){ue.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},ze(ue.asn1.DERPrintableString,ue.asn1.DERAbstractString),ue.asn1.DERTeletexString=function(e){ue.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},ze(ue.asn1.DERTeletexString,ue.asn1.DERAbstractString),ue.asn1.DERIA5String=function(e){ue.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},ze(ue.asn1.DERIA5String,ue.asn1.DERAbstractString),ue.asn1.DERVisibleString=function(e){ue.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},ze(ue.asn1.DERVisibleString,ue.asn1.DERAbstractString),ue.asn1.DERBMPString=function(e){ue.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},ze(ue.asn1.DERBMPString,ue.asn1.DERAbstractString),ue.asn1.DERUTCTime=function(e){ue.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=ve(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=ve(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},ze(ue.asn1.DERUTCTime,ue.asn1.DERAbstractTime),ue.asn1.DERGeneralizedTime=function(e){ue.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ve(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ve(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},ze(ue.asn1.DERGeneralizedTime,ue.asn1.DERAbstractTime),ue.asn1.DERSequence=function(e){ue.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},ze(ue.asn1.DERSequence,ue.asn1.DERAbstractStructured),ue.asn1.DERSet=function(e){ue.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var n=this.asn1Array[t];e.push(n.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},ze(ue.asn1.DERSet,ue.asn1.DERAbstractStructured),ue.asn1.DERTaggedObject=function(e){ue.asn1.DERTaggedObject.superclass.constructor.call(this);var t=ue.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){null!=e.tag&&(this.hT=e.tag),null!=e.explicit&&(this.isExplicit=e.explicit),null!=e.tage&&(this.hT=e.tage,this.isExplicit=!0),null!=e.tagi&&(this.hT=e.tagi,this.isExplicit=!1),null!=e.obj&&(e.obj instanceof t.ASN1Object?(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==h(e.obj)&&(this.asn1Object=t.ASN1Util.newObject(e.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},ze(ue.asn1.DERTaggedObject,ue.asn1.ASN1Object);var ue,le,ce,de=new function(){};function fe(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function he(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function pe(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function ve(e){return pe(fe(e))}function me(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function ge(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function ye(e){return e.length%2==1&&(e="0"+e),me(_(e))}function _e(e){return b(ge(e))}function be(e){return Re(Ne(e))}function we(e){return decodeURIComponent(Le(e))}function xe(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function ke(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function Se(e){return _(e)}function Ee(e){var t=Se(e).replace(/(.{64})/g,"$1\r\n");return t.replace(/\r\n$/,"")}function Ae(e){return b(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Te(e,t){return"-----BEGIN "+t+"-----\r\n"+Ee(e)+"\r\n-----END "+t+"-----\r\n"}function Ce(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Ae(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Pe(e){var t,n,r,i,a,o,s,u,l,c,d;if(d=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=d[1],t=parseInt(u),2===u.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),n=parseInt(d[2])-1,r=parseInt(d[3]),i=parseInt(d[4]),a=parseInt(d[5]),o=parseInt(d[6]),s=0,""!==(l=d[7])&&(c=(l.substr(1)+"00").substr(0,3),s=parseInt(c)),Date.UTC(t,n,r,i,a,o,s);throw"unsupported zulu format: "+e}function Ie(e){return~~(Pe(e)/1e3)}function Re(e){return e.replace(/%/g,"")}function Le(e){return e.replace(/(..)/g,"%$1")}function Me(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var n=(e=e.toLowerCase()).split(":").length-1;if(n<2)throw t;var r=":".repeat(7-n+2),i=(e=e.replace("::",r)).split(":");if(8!=i.length)throw t;for(var a=0;a<8;a++)i[a]=("0000"+i[a]).slice(-4);return i.join("")}function Oe(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)t[n]=t[n].replace(/^0+/,""),""==t[n]&&(t[n]="0");var r=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===r)return e.slice(1,-1);var i="";for(n=0;n<r.length;n++)r[n].length>i.length&&(i=r[n]);return(e=e.replace(i,"::")).slice(1,-1)}function Fe(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?Oe(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function De(e){return e.match(/.{4}/g).map((function(e){var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2),16);if(0==t&n<128)return String.fromCharCode(n);if(t<8){var r=128|63&n;return we((192|(7&t)<<3|(192&n)>>6).toString(16)+r.toString(16))}r=128|(15&t)<<2|(192&n)>>6;var i=128|63&n;return we((224|(240&t)>>4).toString(16)+r.toString(16)+i.toString(16))})).join("")}function Ne(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)"%"==t[r]?(n+=t.substr(r,3),r+=2):n=n+"%"+ve(t[r]);return n}function je(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function Be(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}de.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var n=parseInt(e.substr(t+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},de.getL=function(e,t){var n=de.getLblen(e,t);return n<1?"":e.substr(t+2,2*n)},de.getVblen=function(e,t){var n;return""==(n=de.getL(e,t))?-1:("8"===n.substr(0,1)?new x(n.substr(2),16):new x(n,16)).intValue()},de.getVidx=function(e,t){var n=de.getLblen(e,t);return n<0?n:t+2*(n+1)},de.getV=function(e,t){var n=de.getVidx(e,t),r=de.getVblen(e,t);return e.substr(n,2*r)},de.getTLV=function(e,t){return e.substr(t,2)+de.getL(e,t)+de.getV(e,t)},de.getTLVblen=function(e,t){return 2+2*de.getLblen(e,t)+2*de.getVblen(e,t)},de.getNextSiblingIdx=function(e,t){return de.getVidx(e,t)+2*de.getVblen(e,t)},de.getChildIdx=function(e,t){var n,r,i,a=de,o=[];n=a.getVidx(e,t),r=2*a.getVblen(e,t),"03"==e.substr(t,2)&&(n+=2,r-=2),i=0;for(var s=n;i<=r;){var u=a.getTLVblen(e,s);if((i+=u)<=r&&o.push(s),s+=u,i>=r)break}return o},de.getNthChildIdx=function(e,t,n){return de.getChildIdx(e,t)[n]},de.getIdxbyList=function(e,t,n,r){var i,a,o=de;return 0==n.length?void 0!==r&&e.substr(t,2)!==r?-1:t:(i=n.shift())>=(a=o.getChildIdx(e,t)).length?-1:o.getIdxbyList(e,a[i],n,r)},de.getIdxbyListEx=function(e,t,n,r){var i,a,o=de;if(0==n.length)return void 0!==r&&e.substr(t,2)!==r?-1:t;i=n.shift(),a=o.getChildIdx(e,t);for(var s=0,u=0;u<a.length;u++){var l=e.substr(a[u],2);if("number"==typeof i&&!o.isContextTag(l)&&s==i||"string"==typeof i&&o.isContextTag(l,i))return o.getIdxbyListEx(e,a[u],n,r);o.isContextTag(l)||s++}return-1},de.getTLVbyList=function(e,t,n,r){var i=de,a=i.getIdxbyList(e,t,n,r);return-1==a||a>=e.length?null:i.getTLV(e,a)},de.getTLVbyListEx=function(e,t,n,r){var i=de,a=i.getIdxbyListEx(e,t,n,r);return-1==a?null:i.getTLV(e,a)},de.getVbyList=function(e,t,n,r,i){var a,o,s=de;return-1==(a=s.getIdxbyList(e,t,n,r))||a>=e.length?null:(o=s.getV(e,a),!0===i&&(o=o.substr(2)),o)},de.getVbyListEx=function(e,t,n,r,i){var a,o,s=de;return-1==(a=s.getIdxbyListEx(e,t,n,r))?null:(o=s.getV(e,a),"03"==e.substr(a,2)&&!1!==i&&(o=o.substr(2)),o)},de.getInt=function(e,t,n){null==n&&(n=-1);try{var r=e.substr(t,2);if("02"!=r&&"03"!=r)return n;var i=de.getV(e,t);return"02"==r?parseInt(i,16):function(e){try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var n=parseInt(t,16),r=e.substr(2),i=parseInt(r,16).toString(2);return"0"==i&&(i="00000000"),i=i.slice(0,0-n),parseInt(i,2)}catch(e){return-1}}(i)}catch(e){return n}},de.getOID=function(e,t,n){null==n&&(n=null);try{return"06"!=e.substr(t,2)?n:function(e){if(!je(e))return null;try{var t=[],n=e.substr(0,2),r=parseInt(n,16);t[0]=new String(Math.floor(r/40)),t[1]=new String(r%40);for(var i=e.substr(2),a=[],o=0;o<i.length/2;o++)a.push(parseInt(i.substr(2*o,2),16));var s=[],u="";for(o=0;o<a.length;o++)128&a[o]?u+=Ue((127&a[o]).toString(2),7):(u+=Ue((127&a[o]).toString(2),7),s.push(new String(parseInt(u,2))),u="");var l=t.join(".");return s.length>0&&(l=l+"."+s.join(".")),l}catch(e){return null}}(de.getV(e,t))}catch(e){return n}},de.getOIDName=function(e,t,n){null==n&&(n=null);try{var r=de.getOID(e,t,n);if(r==n)return n;var i=ue.asn1.x509.OID.oid2name(r);return""==i?r:i}catch(e){return n}},de.getString=function(e,t,n){null==n&&(n=null);try{return xe(de.getV(e,t))}catch(e){return n}},de.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var a=e.substr(2),o=[],s=0;s<a.length/2;s++)o.push(parseInt(a.substr(2*s,2),16));var u=[],l="";for(s=0;s<o.length;s++)128&o[s]?l+=t((127&o[s]).toString(2),7):(l+=t((127&o[s]).toString(2),7),u.push(new String(parseInt(l,2))),l="");var c=n.join(".");return u.length>0&&(c=c+"."+u.join(".")),c},de.dump=function(e,t,n,r){var i=de,a=i.getV,o=i.dump,s=i.getChildIdx,u=e;e instanceof ue.asn1.ASN1Object&&(u=e.getEncodedHex());var l=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var c,d=t.ommit_long_octet;if("01"==(c=u.substr(n,2)))return"00"==(f=a(u,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==c)return r+"INTEGER "+l(f=a(u,n),d)+"\n";if("03"==c){var f=a(u,n);return i.isASN1HEX(f.substr(2))?(w=r+"BITSTRING, encapsulates\n")+o(f.substr(2),t,0,r+"  "):r+"BITSTRING "+l(f,d)+"\n"}if("04"==c)return f=a(u,n),i.isASN1HEX(f)?(w=r+"OCTETSTRING, encapsulates\n")+o(f,t,0,r+"  "):r+"OCTETSTRING "+l(f,d)+"\n";if("05"==c)return r+"NULL\n";if("06"==c){var h=a(u,n),p=ue.asn1.ASN1Util.oidHexToInt(h),v=ue.asn1.x509.OID.oid2name(p),m=p.replace(/\./g," ");return""!=v?r+"ObjectIdentifier "+v+" ("+m+")\n":r+"ObjectIdentifier ("+m+")\n"}if("0a"==c)return r+"ENUMERATED "+parseInt(a(u,n))+"\n";if("0c"==c)return r+"UTF8String '"+we(a(u,n))+"'\n";if("13"==c)return r+"PrintableString '"+we(a(u,n))+"'\n";if("14"==c)return r+"TeletexString '"+we(a(u,n))+"'\n";if("16"==c)return r+"IA5String '"+we(a(u,n))+"'\n";if("17"==c)return r+"UTCTime "+we(a(u,n))+"\n";if("18"==c)return r+"GeneralizedTime "+we(a(u,n))+"\n";if("1a"==c)return r+"VisualString '"+we(a(u,n))+"'\n";if("1e"==c)return r+"BMPString '"+De(a(u,n))+"'\n";if("30"==c){if("3000"==u.substr(n,4))return r+"SEQUENCE {}\n";w=r+"SEQUENCE\n";var g=t;if((2==(b=s(u,n)).length||3==b.length)&&"06"==u.substr(b[0],2)&&"04"==u.substr(b[b.length-1],2)){v=i.oidname(a(u,b[0]));var y=JSON.parse(JSON.stringify(t));y.x509ExtName=v,g=y}for(var _=0;_<b.length;_++)w+=o(u,g,b[_],r+"  ");return w}if("31"==c){w=r+"SET\n";var b=s(u,n);for(_=0;_<b.length;_++)w+=o(u,t,b[_],r+"  ");return w}if(0!=(128&(c=parseInt(c,16)))){var w,x=31&c;if(0!=(32&c)){for(w=r+"["+x+"]\n",b=s(u,n),_=0;_<b.length;_++)w+=o(u,t,b[_],r+"  ");return w}return f=a(u,n),de.isASN1HEX(f)?(w=r+"["+x+"]\n")+o(f,t,0,r+"  "):(("68747470"==f.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==x)&&(f=we(f)),r+"["+x+"] "+f+"\n")}return r+"UNKNOWN("+c+") "+a(u,n)+"\n"},de.isContextTag=function(e,t){var n,r;e=e.toLowerCase();try{n=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&n);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((r=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&n)&&(31&n)==r}catch(e){return!1}},de.isASN1HEX=function(e){var t=de;if(e.length%2==1)return!1;var n=t.getVblen(e,0),r=e.substr(0,2),i=t.getL(e,0);return e.length-r.length-i.length==2*n},de.checkStrictDER=function(e,t,n,r,i){var a=de;if(void 0===n){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!ue.lang.String.isHex(e))throw new Error("not hex string");n=e.length,i=(r=e.length/2)<128?1:Math.ceil(r.toString(16))+1}if(a.getL(e,t).length>2*i)throw new Error("L of TLV too long: idx="+t);var o=a.getVblen(e,t);if(o>r)throw new Error("value of L too long than hex: idx="+t);var s=a.getTLV(e,t),u=s.length-2-a.getL(e,t).length;if(u!==2*o)throw new Error("V string length and L's value not the same:"+u+"/"+2*o);if(0===t&&e.length!=s.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+s.length);var l=e.substr(t,2);if("02"===l){var c=a.getVidx(e,t);if("00"==e.substr(c,2)&&e.charCodeAt(c+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(l,16)){for(var d=a.getVblen(e,t),f=0,h=a.getChildIdx(e,t),p=0;p<h.length;p++)f+=a.getTLV(e,h[p]).length,a.checkStrictDER(e,h[p],n,r,i);if(2*d!=f)throw new Error("sum of children's TLV length and L unmatch: "+2*d+"!="+f)}},de.oidname=function(e){var t=ue.asn1;ue.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return""===n&&(n=e),n},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.lang&&ue.lang||(ue.lang={}),ue.lang.String=function(){},"function"==typeof e?(t.utf8tob64u=le=function(t){return me(e.from(t,"utf8").toString("base64"))},t.b64utoutf8=ce=function(t){return e.from(ge(t),"base64").toString("utf8")}):(t.utf8tob64u=le=function(e){return ye(Re(Ne(e)))},t.b64utoutf8=ce=function(e){return decodeURIComponent(Le(_e(e)))}),ue.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},ue.lang.String.isHex=function(e){return je(e)},ue.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},ue.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=ge(e),ue.lang.String.isBase64(e))},ue.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},ue.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},ue.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},ue.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Ue=function(e,t,n){return null==n&&(n="0"),e.length>=t?e:new Array(t-e.length+1).join(n)+e};function ze(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+t;for(var a="0001",o="00"+r,s="",u=i-4-o.length,l=0;l<u;l+=2)s+="ff";return a+s+o},this.hashString=function(e,t){return new ue.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new ue.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof re||e instanceof ue.crypto.DSA||e instanceof ue.crypto.ECDSA}},ue.crypto.Util.md5=function(e){return new ue.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},ue.crypto.Util.ripemd160=function(e){return new ue.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},ue.crypto.Util.SECURERANDOMGEN=new ee,ue.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return ue.crypto.Util.SECURERANDOMGEN.nextBytes(t),pe(t)},ue.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new x(ue.crypto.Util.getRandomHexOfNbytes(e),16)},ue.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=new Array((e-t)/8+1);return ue.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],pe(n)},ue.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new x(ue.crypto.Util.getRandomHexOfNbits(e),16)},ue.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=ue.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(n))return n}},ue.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(1==n)throw"biMin is greater than biMax";if(0==n)return e;var r=t.subtract(e);return ue.crypto.Util.getRandomBigIntegerZeroToMax(r).add(e)},ue.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=ue.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=ue.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=m.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ue.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},ue.crypto.MessageDigest.getHashLength=function(e){var t=ue.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[n])throw"not supported algorithm: "+e;return t.HASHLENGTH[n]},ue.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ue.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=ue.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==t){try{var r=ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=m.algo.HMAC.create(r,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=m.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=ke(e)),void(this.pass=m.enc.Hex.parse(t))}if("object"!=(void 0===e?"undefined":h(e)))throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=be(e.utf8)),void 0!==e.rstr&&(t=ke(e.rstr)),void 0!==e.b64&&(t=b(e.b64)),void 0!==e.b64u&&(t=_e(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=m.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ue.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ue.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var n=null;try{n=void 0===t?Ve.getKey(e):Ve.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==ue.crypto.ECDSA&&(this.prvKey=new ue.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof re&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof re&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ue.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ue.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==ue.crypto.ECDSA&&(this.pubKey=new ue.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof re&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof re&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ue.crypto.ECDSA&&this.pubKey instanceof ue.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ue.crypto.DSA&&this.pubKey instanceof ue.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=Ve.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},ue.crypto.Cipher=function(e){},ue.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof re&&t.isPublic){var r=ue.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.encrypt(e);if("RSAOAEP"===r)return t.encryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},ue.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof re&&t.isPrivate){var r=ue.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.decrypt(e);if("RSAOAEP"===r)return t.decryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},ue.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof re){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},ue.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.ECDSA=function(e){var t=Error,n=x,r=ae,i=ue.crypto.ECDSA,a=ue.crypto.ECParameterDB,o=i.getName,s=de,u=s.getVbyListEx,l=s.isASN1HEX,c=new ee;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new n(e.bitLength(),c).mod(e.subtract(n.ONE)).add(n.ONE)},this.setNamedCurve=function(e){this.ecparams=a.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),n=this.ecparams.G.multiply(t),r=n.getX().toBigInteger(),i=n.getY().toBigInteger(),a=this.ecparams.keylen/4,o=("0000000000"+t.toString(16)).slice(-a),s="04"+("0000000000"+r.toString(16)).slice(-a)+("0000000000"+i.toString(16)).slice(-a);return this.setPrivateKeyHex(o),this.setPublicKeyHex(s),{ecprvhex:o,ecpubhex:s}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var r=new n(t,16),a=this.ecparams.n,o=new n(e.substring(0,this.ecparams.keylen/4),16);do{var s=this.getBigRandom(a),u=this.ecparams.G.multiply(s).getX().toBigInteger().mod(a)}while(u.compareTo(n.ZERO)<=0);var l=s.modInverse(a).multiply(o.add(r.multiply(u))).mod(a);return i.biRSSigToASN1Sig(u,l)},this.sign=function(e,t){var r=t,i=this.ecparams.n,a=n.fromByteArrayUnsigned(e);do{var o=this.getBigRandom(i),s=this.ecparams.G.multiply(o).getX().toBigInteger().mod(i)}while(s.compareTo(x.ZERO)<=0);var u=o.modInverse(i).multiply(a.add(r.multiply(s))).mod(i);return this.serializeSig(s,u)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,a){try{var o,s,u=i.parseSigHex(t);o=u.r,s=u.s;var l=r.decodeFromHex(this.ecparams.curve,a),c=new n(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(c,o,s,l)}catch(e){return!1}},this.verify=function(e,t,i){var a,o,s;if(Bitcoin.Util.isArray(t)){var u=this.parseSig(t);a=u.r,o=u.s}else{if("object"!==(void 0===t?"undefined":h(t))||!t.r||!t.s)throw"Invalid value for signature";a=t.r,o=t.s}if(i instanceof ae)s=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=r.decodeFrom(this.ecparams.curve,i)}var l=n.fromByteArrayUnsigned(e);return this.verifyRaw(l,a,o,s)},this.verifyRaw=function(e,t,r,i){var a=this.ecparams.n,o=this.ecparams.G;if(t.compareTo(n.ONE)<0||t.compareTo(a)>=0)return!1;if(r.compareTo(n.ONE)<0||r.compareTo(a)>=0)return!1;var s=r.modInverse(a),u=e.multiply(s).mod(a),l=t.multiply(s).mod(a);return o.multiply(u).add(i.multiply(l)).getX().toBigInteger().mod(a).equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),r=t.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var r=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:n.fromByteArrayUnsigned(r),s:n.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var r=this.ecparams.n;return{r:n.fromByteArrayUnsigned(e.slice(1,33)).mod(r),s:n.fromByteArrayUnsigned(e.slice(33,65)).mod(r),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===l(e))throw new Error("not ASN.1 hex string");var t,n,r;try{t=u(e,0,["[0]",0],"06"),n=u(e,0,[1],"04");try{r=u(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=o(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var n,r,i;try{u(e,0,[1,0],"06"),n=u(e,0,[1,1],"06"),r=u(e,0,[2,0,1],"04");try{i=u(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=o(n),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var n,r;try{u(e,0,[0,0],"06"),n=u(e,0,[0,1],"06"),r=u(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=o(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(e,n){if(!1===l(e))throw new t("not ASN.1 hex string");var r,i;try{r=u(e,0,[0,5,0,1],"06"),i=u(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=o(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},ue.crypto.ECDSA.parseSigHex=function(e){var t=ue.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new x(t.r,16),s:new x(t.s,16)}},ue.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=de,n=t.getChildIdx,r=t.getV;if(t.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var i=n(e,0);if(2!=i.length)throw new Error("signature shall have two elements");var a=i[0],o=i[1];if("02"!=e.substr(a,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(o,2))throw new Error("2nd item not ASN.1 integer");return{r:r(e,a),s:r(e,o)}},ue.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=ue.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},ue.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return ue.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},ue.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new x(e,16),r=new x(t,16);return ue.crypto.ECDSA.biRSSigToASN1Sig(n,r)},ue.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=ue.asn1,r=new n.DERInteger({bigint:e}),i=new n.DERInteger({bigint:t});return new n.DERSequence({array:[r,i]}).getEncodedHex()},ue.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.ECParameterDB=new function(){var e={},t={};function n(e){return new x(e,16)}this.getByName=function(n){var r=n;if(void 0!==t[r]&&(r=t[n]),void 0!==e[r])return e[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,a,o,s,u,l,c,d,f,h,p){e[r]={};var v=n(a),m=n(o),g=n(s),y=n(u),_=n(l),b=new oe(v,m,g),w=b.decodePointHex("04"+c+d);e[r].name=r,e[r].keylen=i,e[r].curve=b,e[r].G=w,e[r].n=y,e[r].h=_,e[r].oid=h,e[r].info=p;for(var x=0;x<f.length;x++)t[f[x]]=r}},ue.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ue.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ue.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ue.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ue.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ue.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ue.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ue.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ue.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ue.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Ve=function(){var e=function(e,n,r){return t(m.AES,e,n,r)},t=function(e,t,n,r){var i=m.enc.Hex.parse(t),a=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),s={};s.key=a,s.iv=o,s.ciphertext=i;var u=e.decrypt(s,a,{iv:o});return m.enc.Hex.stringify(u)},n=function(e,t,n){return r(m.AES,e,t,n)},r=function(e,t,n,r){var i=m.enc.Hex.parse(t),a=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),s=e.encrypt(i,a,{iv:o}),u=m.enc.Hex.parse(s.toString());return m.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:e,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,n,r){return t(m.TripleDES,e,n,r)},eproc:function(e,t,n){return r(m.TripleDES,e,t,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,n,r){return t(m.DES,e,n,r)},eproc:function(e,t,n){return r(m.DES,e,t,n)},keylen:8,ivlen:8}},a=function(e){var t={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(t.cipher=n[1],t.ivsalt=n[2]);var r=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(t.type=r[1]);var i=-1,a=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),a=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),a=1);var o=e.indexOf("-----END");if(-1!=i&&-1!=o){var s=e.substring(i+2*a,o-a);s=s.replace(/\s+/g,""),t.data=s}return t},o=function(e,t,n){for(var r=n.substring(0,16),a=m.enc.Hex.parse(r),o=m.enc.Utf8.parse(t),s=i[e].keylen+i[e].ivlen,u="",l=null;;){var c=m.algo.MD5.create();if(null!=l&&c.update(l),c.update(o),c.update(a),l=c.finalize(),(u+=m.enc.Hex.stringify(l)).length>=2*s)break}var d={};return d.keyhex=u.substr(0,2*i[e].keylen),d.ivhex=u.substr(2*i[e].keylen,2*i[e].ivlen),d},s=function(e,t,n,r){var a=m.enc.Base64.parse(e),o=m.enc.Hex.stringify(a);return(0,i[t].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(e){return a(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return o(e,t,n)},decryptKeyB64:function(e,t,n,r){return s(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=a(e),r=(n.type,n.cipher),i=n.ivsalt,u=n.data,l=o(r,t,i).keyhex;return s(u,r,l,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r,a){var s="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw new Error("KEYUTIL unsupported algorithm: "+r);void 0!==a&&null!=a||(a=function(e){var t=m.lib.WordArray.random(e);return m.enc.Hex.stringify(t)}(i[r].ivlen).toUpperCase());var u=function(e,t,n,r){return(0,i[t].eproc)(e,n,r)}(t,r,o(r,n,a).keyhex,a);return s="-----BEGIN "+e+" PRIVATE KEY-----\r\n",s+="Proc-Type: 4,ENCRYPTED\r\n",s+="DEK-Info: "+r+","+a+"\r\n",s+="\r\n",(s+=u.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var n=de,r=n.getChildIdx,i=n.getV,a={},o=r(t,0);if(2!=o.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+o.length);a.ciphertext=i(t,o[1]);var s=r(t,o[0]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+s.length);if("2a864886f70d01050d"!=i(t,s[0]))throw new Error("this only supports pkcs5PBES2");var u=r(t,s[1]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+u.length);var l=r(t,u[1]);if(2!=l.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+l.length);if("2a864886f70d0307"!=i(t,l[0]))throw"this only supports TripleDES";a.encryptionSchemeAlg="TripleDES",a.encryptionSchemeIV=i(t,l[1]);var c=r(t,u[0]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+c.length);if("2a864886f70d01050c"!=i(t,c[0]))throw new Error("this only supports pkcs5PBKDF2");var d=r(t,c[1]);if(d.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+d.length);a.pbkdf2Salt=i(t,d[0]);var f=i(t,d[1]);try{a.pbkdf2Iter=parseInt(f,16)}catch(e){throw new Error("malformed format pbkdf2Iter: "+f)}return a},getPBKDF2KeyHexFromParam:function(e,t){var n=m.enc.Hex.parse(e.pbkdf2Salt),r=e.pbkdf2Iter,i=m.PBKDF2(t,n,{keySize:6,iterations:r});return m.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=Ce(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=Ve.getPBKDF2KeyHexFromParam(r,t),a={};a.ciphertext=m.enc.Hex.parse(r.ciphertext);var o=m.enc.Hex.parse(i),s=m.enc.Hex.parse(r.encryptionSchemeIV),u=m.TripleDES.decrypt(a,o,{iv:s});return m.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(e){var t=de,n=t.getChildIdx,r=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var a=n(e,0);if(a.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(a[1],2))throw new Error("malformed PKCS8 private key(code:003)");var o=n(e,a[1]);if(2!=o.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(o[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(i.algoid=r(e,o[0]),"06"==e.substr(o[1],2)&&(i.algparam=r(e,o[1])),"04"!=e.substr(a[2],2))throw new Error("malformed PKCS8 private key(code:006)");return i.keyidx=t.getVidx(e,a[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Ce(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)t=new re;else if("2a8648ce380401"==n.algoid)t=new ue.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw new Error("unsupported private key algorithm");t=new ue.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,n=de.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)t=new re;else if("2a8648ce380401"===n)t=new ue.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw new Error("unsupported PKCS#8 public key hex");t=new ue.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=de,n=t.getChildIdx,r=t.getV,i={};if("30"!=e.substr(0,2))throw new Error("malformed RSA key(code:001)");var a=n(e,0);if(2!=a.length)throw new Error("malformed RSA key(code:002)");if("02"!=e.substr(a[0],2))throw new Error("malformed RSA key(code:003)");if(i.n=r(e,a[0]),"02"!=e.substr(a[1],2))throw new Error("malformed RSA key(code:004)");return i.e=r(e,a[1]),i},parsePublicPKCS8Hex:function(e){var t=de,n=t.getChildIdx,r=t.getV,i={algparam:null},a=n(e,0);if(2!=a.length)throw new Error("outer DERSequence shall have 2 elements: "+a.length);var o=a[0];if("30"!=e.substr(o,2))throw new Error("malformed PKCS8 public key(code:001)");var s=n(e,o);if(2!=s.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(s[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(i.algoid=r(e,s[0]),"06"==e.substr(s[1],2)?i.algparam=r(e,s[1]):"30"==e.substr(s[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,s[1],[0],"02"),i.algparam.q=t.getVbyList(e,s[1],[1],"02"),i.algparam.g=t.getVbyList(e,s[1],[2],"02")),"03"!=e.substr(a[1],2))throw new Error("malformed PKCS8 public key(code:004)");return i.key=r(e,a[1]).substr(2),i}}}();function Ze(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e}function He(e,t,n){for(var r="",i=0;r.length<t;)r+=xe(n(ke(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function We(e){for(var t in ue.crypto.Util.DIGESTINFOHEAD){var n=ue.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n)return[t,e.substring(r)]}return[]}function Ge(e){var t,n=de,r=n.getChildIdx,i=n.getV,a=n.getTLV,o=n.getVbyList,s=n.getVbyListEx,u=n.getTLVbyList,l=n.getTLVbyListEx,c=n.getIdxbyList,d=n.getIdxbyListEx,f=n.getVidx,h=n.getInt,p=n.oidname,v=n.hextooidstr,m=Ce;try{t=ue.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=u(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=u(e,0,[0]),n=h(t,0);if(n<0||2<n)throw new Error("malformed version field");return this.version=n+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return s(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=l(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var n in t)if(e===t[n])return n;return p(s(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=o(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=o(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return n.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return c(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return c(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return Ve.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),n=this.getSignatureValueHex(),r=u(this.hex,0,[0],"30"),i=new ue.crypto.Signature({alg:t});return i.init(e),i.updateHex(r),i.verify(n)},this.parseExt=function(e){var t,a,s;if(void 0===e){if(s=this.hex,3!==this.version)return-1;t=c(s,0,[0,7,0],"30"),a=r(s,t)}else{s=Ce(e);var u=c(s,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(s,u))return void(this.aExtInfo=new Array);t=c(s,0,[0,3,0,1,0],"30"),a=r(s,t),this.hex=s}this.aExtInfo=new Array;for(var l=0;l<a.length;l++){var d={critical:!1},h=0;3===r(s,a[l]).length&&(d.critical=!0,h=1),d.oid=n.hextooidstr(o(s,a[l],[0],"06"));var p=c(s,a[l],[1+h]);d.vidx=f(s,p),this.aExtInfo.push(d)}},this.getExtInfo=function(e){var t=this.aExtInfo,n=e;if(e.match(/^[0-9.]+$/)||(n=ue.asn1.x509.OID.name2oid(e)),""!==n)for(var r=0;r<t.length;r++)if(t[r].oid===n)return t[r]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("basicConstraints");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var r={extname:"basicConstraints"};if(t&&(r.critical=!0),"3000"===e)return r;if("30030101ff"===e)return r.cA=!0,r;if("30060101ff02"===e.substr(0,12)){var o=i(e,10),s=parseInt(o,16);return r.cA=!0,r.pathLen=s,r}throw new Error("hExtV parse error: "+e)},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("keyUsage");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var r={extname:"keyUsage"};return t&&(r.critical=!0),r.names=this.getExtKeyUsageString(e).split(","),r},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=a(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var n="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(n=n.slice(-8)),10==e.length&&(n=n.slice(-16)),""==(n=n.replace(/0+$/,""))&&(n="0"),n},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),n=new Array,r=0;r<t.length;r++)"1"==t.substr(r,1)&&n.push(Ge.KEYUSAGE_NAME[r]);return n.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("subjectKeyIdentifier");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var r={extname:"subjectKeyIdentifier"};t&&(r.critical=!0);var o=i(e,0);return r.kid={hex:o},r},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityKeyIdentifier");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var o={extname:"authorityKeyIdentifier"};t&&(o.critical=!0);for(var s=r(e,0),u=0;u<s.length;u++){var l=e.substr(s[u],2);if("80"===l&&(o.kid={hex:i(e,s[u])}),"a1"===l){var c=a(e,s[u]),d=this.getGeneralNames(c);o.issuer=d[0].dn}"82"===l&&(o.sn={hex:i(e,s[u])})}return o},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("extKeyUsage");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var o={extname:"extKeyUsage",array:[]};t&&(o.critical=!0);for(var s=r(e,0),u=0;u<s.length;u++)o.array.push(p(i(e,s[u])));return o},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,n=a(this.hex,e.vidx);if(""===n)return t;for(var o=r(n,0),s=0;s<o.length;s++)t.push(p(i(n,o[s])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("subjectAltName");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var r={extname:"subjectAltName",array:[]};return t&&(r.critical=!0),r.array=this.getGeneralNames(e),r},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("issuerAltName");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var r={extname:"issuerAltName",array:[]};return t&&(r.critical=!0),r.array=this.getGeneralNames(e),r},this.getGeneralNames=function(e){for(var t=r(e,0),n=[],i=0;i<t.length;i++){var o=this.getGeneralName(a(e,t[i]));void 0!==o&&n.push(o)}return n},this.getGeneralName=function(e){var t=e.substr(0,2),n=i(e,0),r=xe(n);return"81"==t?{rfc822:r}:"82"==t?{dns:r}:"86"==t?{uri:r}:"87"==t?{ip:Fe(n)}:"a4"==t?{dn:this.getX500Name(n)}:void 0},this.getExtSubjectAltName2=function(){var e,t,n,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var s=new Array,u=a(this.hex,o.vidx),l=r(u,0),c=0;c<l.length;c++)n=u.substr(l[c],2),e=i(u,l[c]),"81"===n&&(t=we(e),s.push(["MAIL",t])),"82"===n&&(t=we(e),s.push(["DNS",t])),"84"===n&&(t=Ge.hex2dn(e,0),s.push(["DN",t])),"86"===n&&(t=we(e),s.push(["URI",t])),"87"===n&&(t=Fe(e),s.push(["IP",t]));return s},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("cRLDistributionPoints");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var i={extname:"cRLDistributionPoints",array:[]};t&&(i.critical=!0);for(var o=r(e,0),s=0;s<o.length;s++){var u=a(e,o[s]);i.array.push(this.getDistributionPoint(u))}return i},this.getDistributionPoint=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var o=e.substr(n[i],2),s=a(e,n[i]);"a0"==o&&(t.dpname=this.getDistributionPointName(s))}return t},this.getDistributionPointName=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var o=e.substr(n[i],2),s=a(e,n[i]);"a0"==o&&(t.full=this.getGeneralNames(s))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,n=r(this.hex,e.vidx),i=0;i<n.length;i++)try{var a=we(o(this.hex,n[i],[0,0,0],"86"));t.push(a)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},n=r(this.hex,e.vidx),i=0;i<n.length;i++){var a=o(this.hex,n[i],[0],"06"),s=o(this.hex,n[i],[1],"86");"2b06010505073001"===a&&t.ocsp.push(we(s)),"2b06010505073002"===a&&t.caissuer.push(we(s))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityInfoAccess");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var i={extname:"authorityInfoAccess",array:[]};t&&(i.critical=!0);for(var u=r(e,0),l=0;l<u.length;l++){var c=s(e,u[l],[0],"06"),d=we(o(e,u[l],[1],"86"));if("2b06010505073001"==c)i.array.push({ocsp:d});else{if("2b06010505073002"!=c)throw new Error("unknown method: "+c);i.array.push({caissuer:d})}}return i},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("certificatePolicies");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var i={extname:"certificatePolicies",array:[]};t&&(i.critical=!0);for(var o=r(e,0),s=0;s<o.length;s++){var u=a(e,o[s]),l=this.getPolicyInformation(u);i.array.push(l)}return i},this.getPolicyInformation=function(e){var t={},n=o(e,0,[0],"06");t.policyoid=p(n);var i=d(e,0,[1],"30");if(-1!=i){t.array=[];for(var s=r(e,i),u=0;u<s.length;u++){var l=a(e,s[u]),c=this.getPolicyQualifierInfo(l);t.array.push(c)}}return t},this.getPolicyQualifierInfo=function(e){var t={},n=o(e,0,[0],"06");if("2b06010505070201"===n){var r=s(e,0,[1],"16");t.cps=xe(r)}else if("2b06010505070202"===n){var i=u(e,0,[1],"30");t.unotice=this.getUserNotice(i)}return t},this.getUserNotice=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var o=a(e,n[i]);"30"!=o.substr(0,2)&&(t.exptext=this.getDisplayText(o))}return t},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=xe(i(e,0)),t},this.getExtCRLNumber=function(e,t){var n={extname:"cRLNumber"};if(t&&(n.critical=!0),"02"==e.substr(0,2))return n.num={hex:i(e,0)},n;throw new Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var n={extname:"cRLReason"};if(t&&(n.critical=!0),"0a"==e.substr(0,2))return n.code=parseInt(i(e,0),16),n;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var n={extname:"ocspNonce"};t&&(n.critical=!0);var r=i(e,0);return n.hex=r,n},this.getExtOcspNoCheck=function(e,t){var n={extname:"ocspNoCheck"};return t&&(n.critical=!0),n},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("adobeTimeStamp");if(void 0===n)return;e=a(this.hex,n.vidx),t=n.critical}var i={extname:"adobeTimeStamp"};t&&(i.critical=!0);var o=r(e,0);if(o.length>1){var s=a(e,o[1]),u=this.getGeneralName(s);null!=u.uri&&(i.uri=u.uri)}if(o.length>2){var l=a(e,o[2]);"0101ff"==l&&(i.reqauth=!0),"010100"==l&&(i.reqauth=!1)}return i},this.getX500NameRule=function(e){for(var t=null,n=[],r=0;r<e.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(i[a]);for(r=0;r<n.length;r++){var o=n[r],s=o.ds,u=o.value,l=o.type;if("prn"!=s&&"utf8"!=s&&"ia5"!=s)return"mixed";if("ia5"==s){if("CN"!=l)return"mixed";if(ue.lang.String.isMail(u))continue;return"mixed"}if("C"==l){if("prn"==s)continue;return"mixed"}if(null==t)t=s;else if(t!==s)return"mixed"}return null==t?"prn":t},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.getX500NameArray=function(e){for(var t=[],n=r(e,0),i=0;i<n.length;i++)t.push(this.getRDN(a(e,n[i])));return t},this.getRDN=function(e){for(var t=[],n=r(e,0),i=0;i<n.length;i++)t.push(this.getAttrTypeAndValue(a(e,n[i])));return t},this.getAttrTypeAndValue=function(e){var t={type:null,value:null,ds:null},n=r(e,0),i=o(e,n[0],[],"06"),a=o(e,n[1],[]),s=ue.asn1.ASN1Util.oidHexToInt(i);return t.type=ue.asn1.x509.OID.oid2atype(s),t.ds=this.HEX2STAG[e.substr(n[1],2)],"bmp"!=t.ds?t.value=we(a):t.value=De(a),t},this.readCertPEM=function(e){this.readCertHex(m(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{c(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=Te(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),e},this.getExtParamArray=function(e){null==e&&-1!=d(this.hex,0,[0,"[3]"])&&(e=l(this.hex,0,[0,"[3]",0],"30"));for(var t=[],n=r(e,0),i=0;i<n.length;i++){var o=a(e,n[i]),s=this.getExtParam(o);null!=s&&t.push(s)}return t},this.getExtParam=function(e){var t=r(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var n=v(o(e,0,[0],"06")),i=!1;3==t&&"0101ff"==u(e,0,[1])&&(i=!0);var a=u(e,0,[t-1,0]),s=void 0;if("2.5.29.14"==n?s=this.getExtSubjectKeyIdentifier(a,i):"2.5.29.15"==n?s=this.getExtKeyUsage(a,i):"2.5.29.17"==n?s=this.getExtSubjectAltName(a,i):"2.5.29.18"==n?s=this.getExtIssuerAltName(a,i):"2.5.29.19"==n?s=this.getExtBasicConstraints(a,i):"2.5.29.31"==n?s=this.getExtCRLDistributionPoints(a,i):"2.5.29.32"==n?s=this.getExtCertificatePolicies(a,i):"2.5.29.35"==n?s=this.getExtAuthorityKeyIdentifier(a,i):"2.5.29.37"==n?s=this.getExtExtKeyUsage(a,i):"1.3.6.1.5.5.7.1.1"==n?s=this.getExtAuthorityInfoAccess(a,i):"2.5.29.20"==n?s=this.getExtCRLNumber(a,i):"2.5.29.21"==n?s=this.getExtCRLReason(a,i):"1.3.6.1.5.5.7.48.1.2"==n?s=this.getExtOcspNonce(a,i):"1.3.6.1.5.5.7.48.1.5"==n?s=this.getExtOcspNoCheck(a,i):"1.2.840.113583.1.1.9.1"==n&&(s=this.getExtAdobeTimeStamp(a,i)),null!=s)return s;var l={extname:n,extn:a};return i&&(l.critical=!0),l},this.findExt=function(e,t){for(var n=0;n<e.length;n++)if(e[n].extname==t)return e[n];return null},this.updateExtCDPFullURI=function(e,t){var n=this.findExt(e,"cRLDistributionPoints");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)if(null!=r[i].dpname&&null!=r[i].dpname.full)for(var a=r[i].dpname.full,o=0;o<a.length;o++){var s=a[i];null!=s.uri&&(s.uri=t)}},this.updateExtAIAOCSP=function(e,t){var n=this.findExt(e,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)null!=r[i].ocsp&&(r[i].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var n=this.findExt(e,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)null!=r[i].caissuer&&(r[i].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return function(e){return e.type+"="+e.value}(e).replace(/\+/,"\\+")})).join("+")}(e).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var e,t,n,r=function(e){return JSON.stringify(e.array).replace(/[\[\]\{\}\"]/g,"")},i=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var i=n[r];if(t+="    policy oid: "+i.policyoid+"\n",void 0!==i.array)for(var a=0;a<i.array.length;a++){var o=i.array[a];void 0!==o.cps&&(t+="    cps: "+o.cps+"\n")}}return t},a=function(t){for(var n="",r=t.array,i=0;i<r.length;i++){var a=r[i];try{void 0!==a.dpname.full[0].uri&&(n+="    "+a.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==a.dname.full[0].dn.hex&&(n+="    "+Ge.hex2dn(a.dpname.full[0].dn.hex)+"\n")}catch(e){}}return n},o=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var i=n[r];void 0!==i.caissuer&&(t+="    caissuer: "+i.caissuer+"\n"),void 0!==i.ocsp&&(t+="    ocsp: "+i.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Be(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Be(t.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var s=0;s<n.length;s++){var u=n[s],l=ue.asn1.x509.OID.oid2name(u.oid);""===l&&(l=u.oid);var c="";if(!0===u.critical&&(c="CRITICAL"),e+="  "+l+" "+c+":\n","basicConstraints"===l){var d=this.getExtBasicConstraints();void 0===d.cA?e+="    {}\n":(e+="    cA=true",void 0!==d.pathLen&&(e+=", pathLen="+d.pathLen),e+="\n")}else if("keyUsage"===l)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===l)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===l){var f=this.getExtAuthorityKeyIdentifier();void 0!==f.kid&&(e+="    kid="+f.kid.hex+"\n")}else"extKeyUsage"===l?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===l?e+="    "+r(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"===l?e+=a(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===l?e+=o(this.getExtAuthorityInfoAccess()):"certificatePolicies"===l&&(e+=i(this.getExtCertificatePolicies()))}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):ue.lang.String.isHex(e)&&this.readCertHex(e))}Ve.getKey=function(e,t,n){var r,i=(g=de).getChildIdx,a=(g.getV,g.getVbyList),o=ue.crypto,s=o.ECDSA,u=o.DSA,l=re,c=Ce,d=Ve;if(void 0!==l&&e instanceof l)return e;if(void 0!==s&&e instanceof s)return e;if(void 0!==u&&e instanceof u)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new s({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new s({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(P=new l).setPublic(e.n,e.e),P;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(P=new l).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),P;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(P=new l).setPrivate(e.n,e.e,e.d),P;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(P=new u).setPublic(e.p,e.q,e.g,e.y),P;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(P=new u).setPrivate(e.p,e.q,e.g,e.y,e.x),P;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(P=new l).setPublic(_e(e.n),_e(e.e)),P;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(P=new l).setPrivateEx(_e(e.n),_e(e.e),_e(e.d),_e(e.p),_e(e.q),_e(e.dp),_e(e.dq),_e(e.qi)),P;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(P=new l).setPrivate(_e(e.n),_e(e.e),_e(e.d)),P;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var f=(C=new s({curve:e.crv})).ecparams.keylen/4,h="04"+("0000000000"+_e(e.x)).slice(-f)+("0000000000"+_e(e.y)).slice(-f);return C.setPublicKeyHex(h),C}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){f=(C=new s({curve:e.crv})).ecparams.keylen/4,h="04"+("0000000000"+_e(e.x)).slice(-f)+("0000000000"+_e(e.y)).slice(-f);var p=("0000000000"+_e(e.d)).slice(-f);return C.setPublicKeyHex(h),C.setPrivateKeyHex(p),C}if("pkcs5prv"===n){var v,m=e,g=de;if(9===(v=i(m,0)).length)(P=new l).readPKCS5PrvKeyHex(m);else if(6===v.length)(P=new u).readPKCS5PrvKeyHex(m);else{if(!(v.length>2&&"04"===m.substr(v[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(P=new s).readPKCS5PrvKeyHex(m)}return P}if("pkcs8prv"===n)return d.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===n)return d._getKeyFromPublicPKCS8Hex(e);if("x509pub"===n)return Ge.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return Ge.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var y=Ce(e,"PUBLIC KEY");return d._getKeyFromPublicPKCS8Hex(y)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var _=c(e,"RSA PRIVATE KEY");return d.getKey(_,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var b=a(r=c(e,"DSA PRIVATE KEY"),0,[1],"02"),w=a(r,0,[2],"02"),k=a(r,0,[3],"02"),S=a(r,0,[4],"02"),E=a(r,0,[5],"02");return(P=new u).setPrivate(new x(b,16),new x(w,16),new x(k,16),new x(S,16),new x(E,16)),P}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return _=c(e,"EC PRIVATE KEY"),d.getKey(_,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return d.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var A=d.getDecryptedKeyHex(e,t),T=new re;return T.readPKCS5PrvKeyHex(A),T}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var C,P=a(r=d.getDecryptedKeyHex(e,t),0,[1],"04"),I=a(r,0,[2,0],"06"),R=a(r,0,[3,0],"03").substr(2);if(void 0===ue.crypto.OID.oidhex2name[I])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+I);return(C=new s({curve:ue.crypto.OID.oidhex2name[I]})).setPublicKeyHex(R),C.setPrivateKeyHex(P),C.isPublic=!1,C}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return b=a(r=d.getDecryptedKeyHex(e,t),0,[1],"02"),w=a(r,0,[2],"02"),k=a(r,0,[3],"02"),S=a(r,0,[4],"02"),E=a(r,0,[5],"02"),(P=new u).setPrivate(new x(b,16),new x(w,16),new x(k,16),new x(S,16),new x(E,16)),P;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return d.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},Ve.generateKeypair=function(e,t){if("RSA"==e){var n=t;(o=new re).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new re,i=o.n.toString(16),a=o.e.toString(16);return r.setPublic(i,a),r.isPrivate=!1,r.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=r,s}if("EC"==e){var o,s,u=t,l=new ue.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new ue.crypto.ECDSA({curve:u})).setPublicKeyHex(l.ecpubhex),o.setPrivateKeyHex(l.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new ue.crypto.ECDSA({curve:u})).setPublicKeyHex(l.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=r,s}throw new Error("unknown algorithm: "+e)},Ve.getPEM=function(e,t,n,r,i,a){var o=ue,s=o.asn1,u=s.DERObjectIdentifier,l=s.DERInteger,c=s.ASN1Util.newObject,d=s.x509.SubjectPublicKeyInfo,f=o.crypto,h=f.DSA,p=f.ECDSA,v=re;function g(e){return c({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function y(e){return c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function _(e){return c({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==v&&e instanceof v||void 0!==h&&e instanceof h||void 0!==p&&e instanceof p)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Te(k=new d(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==v&&e instanceof v&&(void 0===n||null==n)&&1==e.isPrivate)return Te(k=g(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===n||null==n)&&1==e.isPrivate){var b=new u({name:e.curveName}).getEncodedHex(),w=y(e).getEncodedHex(),x="";return(x+=Te(b,"EC PARAMETERS"))+Te(w,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===n||null==n)&&1==e.isPrivate)return Te(k=_(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==v&&e instanceof v&&void 0!==n&&null!=n&&1==e.isPrivate){var k=g(e).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",k,n,r,a)}if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==n&&null!=n&&1==e.isPrivate)return k=y(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",k,n,r,a);if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==n&&null!=n&&1==e.isPrivate)return k=_(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",k,n,r,a);var S=function(e,t){var n=E(e,t);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},E=function(e,t){var n=m.lib.WordArray.random(8),r=m.lib.WordArray.random(8),i=m.PBKDF2(t,n,{keySize:6,iterations:100}),a=m.enc.Hex.parse(e),o=m.TripleDES.encrypt(a,i,{iv:r})+"",s={};return s.ciphertext=o,s.pbkdf2Salt=m.enc.Hex.stringify(n),s.pbkdf2Iter=100,s.encryptionSchemeAlg="DES-EDE3-CBC",s.encryptionSchemeIV=m.enc.Hex.stringify(r),s};if("PKCS8PRV"==t&&null!=v&&e instanceof v&&1==e.isPrivate){var A=g(e).getEncodedHex();return k=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===n||null==n?Te(k,"PRIVATE KEY"):Te(w=S(k,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==p&&e instanceof p&&1==e.isPrivate)return A=new c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),k=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===n||null==n?Te(k,"PRIVATE KEY"):Te(w=S(k,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate)return A=new l({bigint:e.x}).getEncodedHex(),k=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===n||null==n?Te(k,"PRIVATE KEY"):Te(w=S(k,n),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ve.getKeyFromCSRPEM=function(e){var t=Ce(e,"CERTIFICATE REQUEST");return Ve.getKeyFromCSRHex(t)},Ve.getKeyFromCSRHex=function(e){var t=Ve.parseCSRHex(e);return Ve.getKey(t.p8pubkeyhex,null,"pkcs8pub")},Ve.parseCSRHex=function(e){var t=de,n=t.getChildIdx,r=t.getTLV,i={},a=e;if("30"!=a.substr(0,2))throw new Error("malformed CSR(code:001)");var o=n(a,0);if(o.length<1)throw new Error("malformed CSR(code:002)");if("30"!=a.substr(o[0],2))throw new Error("malformed CSR(code:003)");var s=n(a,o[0]);if(s.length<3)throw new Error("malformed CSR(code:004)");return i.p8pubkeyhex=r(a,s[2]),i},Ve.getKeyID=function(e){var t=Ve,n=de;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var r=Ce(t.getPEM(e)),i=n.getIdxbyList(r,0,[1]),a=n.getV(r,i).substring(2);return ue.crypto.Util.hashHex(a,"sha1")},Ve.getJWKFromKey=function(e){var t={};if(e instanceof re&&e.isPrivate)return t.kty="RSA",t.n=ye(e.n.toString(16)),t.e=ye(e.e.toString(16)),t.d=ye(e.d.toString(16)),t.p=ye(e.p.toString(16)),t.q=ye(e.q.toString(16)),t.dp=ye(e.dmp1.toString(16)),t.dq=ye(e.dmq1.toString(16)),t.qi=ye(e.coeff.toString(16)),t;if(e instanceof re&&e.isPublic)return t.kty="RSA",t.n=ye(e.n.toString(16)),t.e=ye(e.e.toString(16)),t;if(e instanceof ue.crypto.ECDSA&&e.isPrivate){if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw new Error("unsupported curve name for JWT: "+r);var n=e.getPublicKeyXYHex();return t.kty="EC",t.crv=r,t.x=ye(n.x),t.y=ye(n.y),t.d=ye(e.prvKeyHex),t}if(e instanceof ue.crypto.ECDSA&&e.isPublic){var r;if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw new Error("unsupported curve name for JWT: "+r);return n=e.getPublicKeyXYHex(),t.kty="EC",t.crv=r,t.x=ye(n.x),t.y=ye(n.y),t}throw new Error("not supported key object")},re.getPosArrayOfChildrenFromHex=function(e){return de.getChildIdx(e,0)},re.getHexValueArrayOfChildrenFromHex=function(e){var t,n=de.getV,r=n(e,(t=re.getPosArrayOfChildrenFromHex(e))[0]),i=n(e,t[1]),a=n(e,t[2]),o=n(e,t[3]),s=n(e,t[4]),u=n(e,t[5]),l=n(e,t[6]),c=n(e,t[7]),d=n(e,t[8]);return(t=new Array).push(r,i,a,o,s,u,l,c,d),t},re.prototype.readPrivateKeyFromPEMString=function(e){var t=Ce(e),n=re.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},re.prototype.readPKCS5PrvKeyHex=function(e){var t=re.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},re.prototype.readPKCS8PrvKeyHex=function(e){var t,n,r,i,a,o,s,u,l=de,c=l.getVbyListEx;if(!1===l.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=c(e,0,[2,0,1],"02"),n=c(e,0,[2,0,2],"02"),r=c(e,0,[2,0,3],"02"),i=c(e,0,[2,0,4],"02"),a=c(e,0,[2,0,5],"02"),o=c(e,0,[2,0,6],"02"),s=c(e,0,[2,0,7],"02"),u=c(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,n,r,i,a,o,s,u)},re.prototype.readPKCS5PubKeyHex=function(e){var t=de,n=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var r=t.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=n(e,r[0]),a=n(e,r[1]);this.setPublic(i,a)},re.prototype.readPKCS8PubKeyHex=function(e){var t=de;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var n=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(n)},re.prototype.readCertPubKeyHex=function(e,t){var n,r;(n=new Ge).readCertHex(e),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)},new RegExp("[^0-9a-f]","gi"),re.prototype.sign=function(e,t){var n=function(e){return ue.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(n,t)},re.prototype.signWithMessageHash=function(e,t){var n=te(ue.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Ze(this.doPrivate(n).toString(16),this.n.bitLength())},re.prototype.signPSS=function(e,t,n){var r=function(e){return ue.crypto.Util.hashHex(e,t)}(ke(e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(r,t,n)},re.prototype.signWithMessageHashPSS=function(e,t,n){var r,i=xe(e),a=i.length,o=this.n.bitLength()-1,s=Math.ceil(o/8),u=function(e){return ue.crypto.Util.hashHex(e,t)};if(-1===n||void 0===n)n=a;else if(-2===n)n=s-a-2;else if(n<-2)throw new Error("invalid salt length");if(s<a+n+2)throw new Error("data too long");var l="";n>0&&(l=new Array(n),(new ee).nextBytes(l),l=String.fromCharCode.apply(String,l));var c=xe(u(ke("\0\0\0\0\0\0\0\0"+i+l))),d=[];for(r=0;r<s-n-a-2;r+=1)d[r]=0;var f=String.fromCharCode.apply(String,d)+"\x01"+l,h=He(c,f.length,u),p=[];for(r=0;r<f.length;r+=1)p[r]=f.charCodeAt(r)^h.charCodeAt(r);var v=65280>>8*s-o&255;for(p[0]&=~v,r=0;r<a;r++)p.push(c.charCodeAt(r));return p.push(188),Ze(this.doPrivate(new x(p)).toString(16),this.n.bitLength())},re.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var n=te(t,16),r=this.n.bitLength();if(n.bitLength()>r)return!1;var i=this.doPublic(n).toString(16);if(i.length+3!=r/4)return!1;var a=We(i.replace(/^1f+00/,""));if(0==a.length)return!1;var o=a[0];return a[1]==function(e){return ue.crypto.Util.hashString(e,o)}(e)},re.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var n=te(t,16);if(n.bitLength()>this.n.bitLength())return 0;var r=We(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&(r[0],r[1]==e)},re.prototype.verifyPSS=function(e,t,n,r){var i=function(e){return ue.crypto.Util.hashHex(e,n)}(ke(e));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(i,t,n,r)},re.prototype.verifyWithMessageHashPSS=function(e,t,n,r){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,a=new x(t,16),o=function(e){return ue.crypto.Util.hashHex(e,n)},s=xe(e),u=s.length,l=this.n.bitLength()-1,c=Math.ceil(l/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=c-u-2;else if(r<-2)throw new Error("invalid salt length");if(c<u+r+2)throw new Error("data too long");var d=this.doPublic(a).toByteArray();for(i=0;i<d.length;i+=1)d[i]&=255;for(;d.length<c;)d.unshift(0);if(188!==d[c-1])throw new Error("encoded message does not end in 0xbc");var f=(d=String.fromCharCode.apply(String,d)).substr(0,c-u-1),h=d.substr(f.length,u),p=65280>>8*c-l&255;if(0!=(f.charCodeAt(0)&p))throw new Error("bits beyond keysize not zero");var v=He(h,f.length,o),m=[];for(i=0;i<f.length;i+=1)m[i]=f.charCodeAt(i)^v.charCodeAt(i);m[0]&=~p;var g=c-u-r-2;for(i=0;i<g;i+=1)if(0!==m[i])throw new Error("leftmost octets not zero");if(1!==m[g])throw new Error("0x01 marker not found");return h===xe(o(ke("\0\0\0\0\0\0\0\0"+s+String.fromCharCode.apply(String,m.slice(-r)))))},re.SALT_LEN_HLEN=-1,re.SALT_LEN_MAX=-2,re.SALT_LEN_RECOVER=-2,Ge.hex2dn=function(e,t){void 0===t&&(t=0);var n=new Ge;return de.getTLV(e,t),n.getX500Name(e).str},Ge.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var n=new Array,r=de.getChildIdx(e,t),i=0;i<r.length;i++)n.push(Ge.hex2attrTypeValue(e,r[i]));return(n=n.map((function(e){return e.replace("+","\\+")}))).join("+")},Ge.hex2attrTypeValue=function(e,t){var n=de,r=n.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var i=n.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var a=r(e,i[0]),o=ue.asn1.ASN1Util.oidHexToInt(a);return ue.asn1.x509.OID.oid2atype(o)+"="+xe(r(e,i[1]))},Ge.getPublicKeyFromCertHex=function(e){var t=new Ge;return t.readCertHex(e),t.getPublicKey()},Ge.getPublicKeyFromCertPEM=function(e){var t=new Ge;return t.readCertPEM(e),t.getPublicKey()},Ge.getPublicKeyInfoPropOfCertPEM=function(e){var t,n,r=de.getVbyList,i={algparam:null};return(t=new Ge).readCertPEM(e),n=t.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},Ge.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.jws&&ue.jws||(ue.jws={}),ue.jws.JWS=function(){var e=ue.jws.JWS.isSafeJSONString;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],a=r[2],o=r[3],s=i+"."+a;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=a,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=s,!n){var u=_e(o),l=te(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=l}var c=ce(i),d=ce(a);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=d,!e(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},ue.jws.JWS.sign=function(e,t,n,r,i){var a,o,s,u=ue,l=u.jws.JWS,c=l.readSafeJSONString,d=l.isSafeJSONString,f=u.crypto,p=(f.ECDSA,f.Mac),v=f.Signature,m=JSON;if("string"!=typeof t&&"object"!=(void 0===t?"undefined":h(t)))throw"spHeader must be JSON string or object: "+t;if("object"==(void 0===t?"undefined":h(t))&&(o=t,a=m.stringify(o)),"string"==typeof t){if(!d(a=t))throw"JWS Head is not safe JSON string: "+a;o=c(a)}if(s=n,"object"==(void 0===n?"undefined":h(n))&&(s=m.stringify(n)),""!=e&&null!=e||void 0===o.alg||(e=o.alg),""!=e&&null!=e&&void 0===o.alg&&(o.alg=e,a=m.stringify(o)),e!==o.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+o.alg;var g=null;if(void 0===l.jwsalg2sigalg[e])throw"unsupported alg name: "+e;g=l.jwsalg2sigalg[e];var y=le(a)+"."+le(s),_="";if("Hmac"==g.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var b=new p({alg:g,prov:"cryptojs",pass:r});b.updateString(y),_=b.doFinal()}else if(-1!=g.indexOf("withECDSA")){(x=new v({alg:g})).init(r,i),x.updateString(y);var w=x.sign();_=ue.crypto.ECDSA.asn1SigToConcatSig(w)}else{var x;"none"!=g&&((x=new v({alg:g})).init(r,i),x.updateString(y),_=x.sign())}return y+"."+ye(_)},ue.jws.JWS.verify=function(e,t,n){var r,i=ue,a=i.jws.JWS,o=a.readSafeJSONString,s=i.crypto,u=s.ECDSA,l=s.Mac,c=s.Signature;void 0!==h(re)&&(r=re);var d=e.split(".");if(3!==d.length)return!1;var f,p=d[0]+"."+d[1],v=_e(d[2]),m=o(ce(d[0])),g=null;if(void 0===m.alg)throw"algorithm not specified in header";if(f=(g=m.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=Ve.getKey(t)),!("RS"!=f&&"PS"!=f||t instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==f&&!(t instanceof u))throw"key shall be a ECDSA obj for ES* algs";var y=null;if(void 0===a.jwsalg2sigalg[m.alg])throw"unsupported alg name: "+g;if("none"==(y=a.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==y.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var _=new l({alg:y,pass:t});return _.updateString(p),v==_.doFinal()}if(-1!=y.indexOf("withECDSA")){var b,w=null;try{w=u.concatSigToASN1Sig(v)}catch(e){return!1}return(b=new c({alg:y})).init(t),b.updateString(p),b.verify(w)}return(b=new c({alg:y})).init(t),b.updateString(p),b.verify(v)},ue.jws.JWS.parse=function(e){var t,n,r,i=e.split("."),a={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[0],n=i[1],3==i.length&&(r=i[2]),a.headerObj=ue.jws.JWS.readSafeJSONString(ce(t)),a.payloadObj=ue.jws.JWS.readSafeJSONString(ce(n)),a.headerPP=JSON.stringify(a.headerObj,null,"  "),null==a.payloadObj?a.payloadPP=ce(n):a.payloadPP=JSON.stringify(a.payloadObj,null,"  "),void 0!==r&&(a.sigHex=_e(r)),a},ue.jws.JWS.verifyJWT=function(e,t,n){var r=ue.jws,i=r.JWS,a=i.readSafeJSONString,o=i.inArray,s=i.includedArray,u=e.split("."),l=u[0],c=u[1],d=(_e(u[2]),a(ce(l))),f=a(ce(c));if(void 0===d.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(d.alg,n.alg))return!1;if(void 0!==f.iss&&"object"===h(n.iss)&&!o(f.iss,n.iss))return!1;if(void 0!==f.sub&&"object"===h(n.sub)&&!o(f.sub,n.sub))return!1;if(void 0!==f.aud&&"object"===h(n.aud))if("string"==typeof f.aud){if(!o(f.aud,n.aud))return!1}else if("object"==h(f.aud)&&!s(f.aud,n.aud))return!1;var p=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(p=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+n.gracePeriod<p)&&!(void 0!==f.nbf&&"number"==typeof f.nbf&&p<f.nbf-n.gracePeriod)&&!(void 0!==f.iat&&"number"==typeof f.iat&&p<f.iat-n.gracePeriod)&&(void 0===f.jti||void 0===n.jti||f.jti===n.jti)&&!!i.verify(e,t,n.alg)},ue.jws.JWS.includedArray=function(e,t){var n=ue.jws.JWS.inArray;if(null===e)return!1;if("object"!==(void 0===e?"undefined":h(e)))return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t))return!1;return!0},ue.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!==(void 0===t?"undefined":h(t)))return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},ue.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ue.jws.JWS.isSafeJSONString=function(e,t,n){var r=null;try{return"object"!=(void 0===(r=se(e))?"undefined":h(r))||r.constructor===Array?0:(t&&(t[n]=r),1)}catch(e){return 0}},ue.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=(void 0===(t=se(e))?"undefined":h(t))||t.constructor===Array?null:t}catch(e){return null}},ue.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},ue.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=ke(t);return ye(ue.crypto.Util.hashHex(n,"sha256"))},ue.jws.IntDate={},ue.jws.IntDate.get=function(e){var t=ue.jws.IntDate,n=t.getNow,r=t.getZulu;if("now"==e)return n();if("now + 1hour"==e)return n()+3600;if("now + 1day"==e)return n()+86400;if("now + 1month"==e)return n()+2592e3;if("now + 1year"==e)return n()+31536e3;if(e.match(/Z$/))return r(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},ue.jws.IntDate.getZulu=function(e){return Ie(e)},ue.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ue.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},ue.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},t.SecureRandom=ee,t.rng_seed_time=K,t.BigInteger=x,t.RSAKey=re;var qe=ue.crypto.EDSA;t.EDSA=qe;var Ke=ue.crypto.DSA;t.DSA=Ke;var Je=ue.crypto.Signature;t.Signature=Je;var Xe=ue.crypto.MessageDigest;t.MessageDigest=Xe;var Ye=ue.crypto.Mac;t.Mac=Ye;var Qe=ue.crypto.Cipher;t.Cipher=Qe,t.KEYUTIL=Ve,t.ASN1HEX=de,t.X509=Ge,t.CryptoJS=m,t.b64tohex=b,t.b64toBA=w,t.stoBA=fe,t.BAtos=he,t.BAtohex=pe,t.stohex=ve,t.stob64=function(e){return _(ve(e))},t.stob64u=function(e){return me(_(ve(e)))},t.b64utos=function(e){return he(w(ge(e)))},t.b64tob64u=me,t.b64utob64=ge,t.hex2b64=_,t.hextob64u=ye,t.b64utohex=_e,t.utf8tob64u=le,t.b64utoutf8=ce,t.utf8tob64=function(e){return _(Re(Ne(e)))},t.b64toutf8=function(e){return decodeURIComponent(Le(b(e)))},t.utf8tohex=be,t.hextoutf8=we,t.hextorstr=xe,t.rstrtohex=ke,t.hextob64=Se,t.hextob64nl=Ee,t.b64nltohex=Ae,t.hextopem=Te,t.pemtohex=Ce,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),r=0;r<e.length/2;r++)n.setUint8(r,parseInt(e.substr(2*r,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",n=new DataView(e),r=0;r<e.byteLength;r++)t+=("00"+n.getUint8(r).toString(16)).slice(-2);return t},t.zulutomsec=Pe,t.zulutosec=Ie,t.zulutodate=function(e){return new Date(Pe(e))},t.datetozulu=function(e,t,n){var r,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;r=(""+i).slice(-2)}else r=("000"+i).slice(-4);if(r+=("0"+(e.getUTCMonth()+1)).slice(-2),r+=("0"+e.getUTCDate()).slice(-2),r+=("0"+e.getUTCHours()).slice(-2),r+=("0"+e.getUTCMinutes()).slice(-2),r+=("0"+e.getUTCSeconds()).slice(-2),n){var a=e.getUTCMilliseconds();0!==a&&(r+="."+(a=(a=("00"+a).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},t.uricmptohex=Re,t.hextouricmp=Le,t.ipv6tohex=Me,t.hextoipv6=Oe,t.hextoip=Fe,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Me(e);throw t}var n=e.split(".");if(4!==n.length)throw t;var r="";try{for(var i=0;i<4;i++)r+=("0"+parseInt(n[i]).toString(16)).slice(-2);return r}catch(e){throw t}},t.encodeURIComponentAll=Ne,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=Be,t.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,n){var r=parseInt(e);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}},t.strdiffidx=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1},t.KJUR=ue;var $e=ue.crypto;t.crypto=$e;var et=ue.asn1;t.asn1=et;var tt=ue.jws;t.jws=tt;var nt=ue.lang;t.lang=nt}).call(this,n(28).Buffer)},function(e,t,n){"use strict";(function(e){var r=n(30),i=n(31),a=n(32);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var d=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){d=!1;break}if(d)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function b(e,t,n,r){return Z(z(t,e.length-n),e,n,r)}function w(e,t,n,r){return Z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return w(e,t,n,r)}function k(e,t,n,r){return Z(V(t),e,n,r)}function S(e,t,n,r){return Z(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(l[d]!==c[d]){a=l[d],o=c[d];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=U(e[a]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,a){return a||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,a){return a||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:z(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(29))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),o=r[0],s=r[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),c=0,d=s>0?o-4:o;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=16383,s=0,u=n-i;s<u;s+=o)a.push(l(e,s,s+o>u?u:s+o));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*u-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.jws,n=e.KeyUtil,i=e.X509,a=e.crypto,o=e.hextob64u,s=e.b64tohex,u=e.AllowedSigningAlgs;return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.parseJwt=function e(n){r.Log.debug("JoseUtil.parseJwt");try{var i=t.JWS.parse(n);return{header:i.headerObj,payload:i.payloadObj}}catch(e){r.Log.error(e)}},e.validateJwt=function(t,a,o,u,l,c,d){r.Log.debug("JoseUtil.validateJwt");try{if("RSA"===a.kty)if(a.e&&a.n)a=n.getKey(a);else{if(!a.x5c||!a.x5c.length)return r.Log.error("JoseUtil.validateJwt: RSA key missing key material",a),Promise.reject(new Error("RSA key missing key material"));var f=s(a.x5c[0]);a=i.getPublicKeyFromCertHex(f)}else{if("EC"!==a.kty)return r.Log.error("JoseUtil.validateJwt: Unsupported key type",a&&a.kty),Promise.reject(new Error(a.kty));if(!(a.crv&&a.x&&a.y))return r.Log.error("JoseUtil.validateJwt: EC key missing key material",a),Promise.reject(new Error("EC key missing key material"));a=n.getKey(a)}return e._validateJwt(t,a,o,u,l,c,d)}catch(e){return r.Log.error(e&&e.message||e),Promise.reject("JWT validation failed")}},e.validateJwtAttributes=function(t,n,i,a,o,s){a||(a=0),o||(o=parseInt(Date.now()/1e3));var u=e.parseJwt(t).payload;if(!u.iss)return r.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(u.iss!==n)return r.Log.error("JoseUtil._validateJwt: Invalid issuer in token",u.iss),Promise.reject(new Error("Invalid issuer in token: "+u.iss));if(!u.aud)return r.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(u.aud===i||Array.isArray(u.aud)&&u.aud.indexOf(i)>=0))return r.Log.error("JoseUtil._validateJwt: Invalid audience in token",u.aud),Promise.reject(new Error("Invalid audience in token: "+u.aud));if(u.azp&&u.azp!==i)return r.Log.error("JoseUtil._validateJwt: Invalid azp in token",u.azp),Promise.reject(new Error("Invalid azp in token: "+u.azp));if(!s){var l=o+a,c=o-a;if(!u.iat)return r.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(l<u.iat)return r.Log.error("JoseUtil._validateJwt: iat is in the future",u.iat),Promise.reject(new Error("iat is in the future: "+u.iat));if(u.nbf&&l<u.nbf)return r.Log.error("JoseUtil._validateJwt: nbf is in the future",u.nbf),Promise.reject(new Error("nbf is in the future: "+u.nbf));if(!u.exp)return r.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(u.exp<c)return r.Log.error("JoseUtil._validateJwt: exp is in the past",u.exp),Promise.reject(new Error("exp is in the past:"+u.exp))}return Promise.resolve(u)},e._validateJwt=function(n,i,a,o,s,l,c){return e.validateJwtAttributes(n,a,o,s,l,c).then((function(e){try{return t.JWS.verify(n,i,u)?e:(r.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(e){return r.Log.error(e&&e.message||e),Promise.reject(new Error("signature validation failed"))}}))},e.hashString=function e(t,n){try{return a.Util.hashString(t,n)}catch(e){r.Log.error(e)}},e.hexToBase64Url=function e(t){try{return o(t)}catch(e){r.Log.error(e)}},e}()};var r=n(0);e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninResponse=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3);t.SigninResponse=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i.UrlUtility.parseUrlFragment(t,n);this.error=r.error,this.error_description=r.error_description,this.error_uri=r.error_uri,this.code=r.code,this.state=r.state,this.id_token=r.id_token,this.session_state=r.session_state,this.access_token=r.access_token,this.token_type=r.token_type,this.scope=r.scope,this.profile=void 0,this.expires_in=r.expires_in}return r(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutRequest=void 0;var r=n(0),i=n(3),a=n(9);t.SignoutRequest=function e(t){var n=t.url,o=t.id_token_hint,s=t.post_logout_redirect_uri,u=t.data,l=t.extraQueryParams,c=t.request_type;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw r.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var d in o&&(n=i.UrlUtility.addQueryParam(n,"id_token_hint",o)),s&&(n=i.UrlUtility.addQueryParam(n,"post_logout_redirect_uri",s),u&&(this.state=new a.State({data:u,request_type:c}),n=i.UrlUtility.addQueryParam(n,"state",this.state.id))),l)n=i.UrlUtility.addQueryParam(n,d,l[d]);this.url=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutResponse=void 0;var r=n(3);t.SignoutResponse=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r.UrlUtility.parseUrlFragment(t,"?");this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.state=n.state}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryWebStorage=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.InMemoryWebStorage=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return e.prototype.getItem=function(e){return i.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},e.prototype.setItem=function(e,t){i.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=t},e.prototype.removeItem=function(e){i.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},e.prototype.key=function(e){return Object.getOwnPropertyNames(this._data)[e]},r(e,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManager=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=n(10),o=n(39),s=n(15),u=n(45),l=n(47),c=n(18),d=n(8),f=n(20),h=n(11),p=n(4);t.UserManager=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.SilentRenewService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.SessionMonitor,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.TokenRevocationClient,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.TokenClient,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.JoseUtil;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),n instanceof o.UserManagerSettings||(n=new o.UserManagerSettings(n));var m=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return m._events=new u.UserManagerEvents(n),m._silentRenewService=new r(m),m.settings.automaticSilentRenew&&(i.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),m.startSilentRenew()),m.settings.monitorSession&&(i.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),m._sessionMonitor=new a(m)),m._tokenRevocationClient=new s(m._settings),m._tokenClient=new d(m._settings),m._joseUtil=v,m}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getUser=function(){var e=this;return this._loadUser().then((function(t){return t?(i.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(i.Log.info("UserManager.getUser: user not found in storage"),null)}))},t.prototype.removeUser=function(){var e=this;return this.storeUser(null).then((function(){i.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()}))},t.prototype.signinRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var t={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,t).then((function(){i.Log.info("UserManager.signinRedirect: successful")}))},t.prototype.signinRedirectCallback=function(e){return this._signinEnd(e||this._redirectNavigator.url).then((function(e){return e.profile&&e.profile.sub?i.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinRedirectCallback: no sub"),e}))},t.prototype.signinPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var t=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopup: no sub")),e}))):(i.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},t.prototype.signinPopupCallback=function(e){return this._signinCallback(e,this._popupNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopupCallback: no sub")),e})).catch((function(e){i.Log.error(e.message)}))},t.prototype.signinSilent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),this._loadUser().then((function(n){return n&&n.refresh_token?(t.refresh_token=n.refresh_token,e._useRefreshToken(t)):(t.request_type="si:s",t.id_token_hint=t.id_token_hint||e.settings.includeIdTokenInSilentRenew&&n&&n.id_token,n&&e._settings.validateSubOnSilentRenew&&(i.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",n.profile.sub),t.current_sub=n.profile.sub),e._signinSilentIframe(t))}))},t.prototype._useRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(t).then((function(t){return t?t.access_token?e._loadUser().then((function(n){if(n){var r=Promise.resolve();return t.id_token&&(r=e._validateIdTokenFromTokenRefreshToken(n.profile,t.id_token)),r.then((function(){return i.Log.debug("UserManager._useRefreshToken: refresh token response success"),n.id_token=t.id_token||n.id_token,n.access_token=t.access_token,n.refresh_token=t.refresh_token||n.refresh_token,n.expires_in=t.expires_in,e.storeUser(n).then((function(){return e._events.load(n),n}))}))}return null})):(i.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(i.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))}))},t.prototype._validateIdTokenFromTokenRefreshToken=function(e,t){var n=this;return this._metadataService.getIssuer().then((function(r){return n.settings.getEpochTime().then((function(a){return n._joseUtil.validateJwtAttributes(t,r,n._settings.client_id,n._settings.clockSkew,a).then((function(t){return t?t.sub!==e.sub?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))}))}))}))},t.prototype._signinSilentIframe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:t,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilent: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilent: no sub")),e}))):(i.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype.signinSilentCallback=function(e){return this._signinCallback(e,this._iframeNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilentCallback: no sub")),e}))},t.prototype.signinCallback=function(e){var t=this;return this.readSigninResponseState(e).then((function(n){var r=n.state;return n.response,"si:r"===r.request_type?t.signinRedirectCallback(e):"si:p"===r.request_type?t.signinPopupCallback(e):"si:s"===r.request_type?t.signinSilentCallback(e):Promise.reject(new Error("invalid response_type in state"))}))},t.prototype.signoutCallback=function(e,t){var n=this;return this.readSignoutResponseState(e).then((function(r){var i=r.state,a=r.response;return i?"so:r"===i.request_type?n.signoutRedirectCallback(e):"so:p"===i.request_type?n.signoutPopupCallback(e,t):Promise.reject(new Error("invalid response_type in state")):a}))},t.prototype.querySessionStatus=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).request_type="si:s";var n=t.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return n?(t.redirect_uri=n,t.prompt="none",t.response_type=t.response_type||this.settings.query_status_response_type,t.scope=t.scope||"openid",t.skipUserInfo=!0,this._signinStart(t,this._iframeNavigator,{startUrl:n,silentRequestTimeout:t.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(t){return e.processSigninResponse(t.url).then((function(e){if(i.Log.debug("UserManager.querySessionStatus: got signin response"),e.session_state&&e.profile.sub)return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid};i.Log.info("querySessionStatus successful, user not authenticated")})).catch((function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t}))}))):(i.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype._signin=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,t,r).then((function(t){return n._signinEnd(t.url,e)}))},t.prototype._signinStart=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.prepare(r).then((function(t){return i.Log.debug("UserManager._signinStart: got navigator window handle"),n.createSigninRequest(e).then((function(e){return i.Log.debug("UserManager._signinStart: got signin request"),r.url=e.url,r.id=e.state.id,t.navigate(r)})).catch((function(e){throw t.close&&(i.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e}))}))},t.prototype._signinEnd=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then((function(e){i.Log.debug("UserManager._signinEnd: got signin response");var r=new s.User(e);if(n.current_sub){if(n.current_sub!==r.profile.sub)return i.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",r.profile.sub),Promise.reject(new Error("login_required"));i.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return t.storeUser(r).then((function(){return i.Log.debug("UserManager._signinEnd: user stored"),t._events.load(r),r}))}))},t.prototype._signinCallback=function(e,t){i.Log.debug("UserManager._signinCallback");var n="query"===this._settings.response_mode||!this._settings.response_mode&&d.SigninRequest.isCode(this._settings.response_type)?"?":"#";return t.callback(e,void 0,n)},t.prototype.signoutRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var t=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;t&&(e.post_logout_redirect_uri=t);var n={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,n).then((function(){i.Log.info("UserManager.signoutRedirect: successful")}))},t.prototype.signoutRedirectCallback=function(e){return this._signoutEnd(e||this._redirectNavigator.url).then((function(e){return i.Log.info("UserManager.signoutRedirectCallback: successful"),e}))},t.prototype.signoutPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var t=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=t,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(){i.Log.info("UserManager.signoutPopup: successful")}))},t.prototype.signoutPopupCallback=function(e,t){return void 0===t&&"boolean"==typeof e&&(t=e,e=null),this._popupNavigator.callback(e,t,"?").then((function(){i.Log.info("UserManager.signoutPopupCallback: successful")}))},t.prototype._signout=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,t,r).then((function(e){return n._signoutEnd(e.url)}))},t.prototype._signoutStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(n).then((function(r){return i.Log.debug("UserManager._signoutStart: got navigator window handle"),t._loadUser().then((function(a){return i.Log.debug("UserManager._signoutStart: loaded current user from storage"),(t._settings.revokeAccessTokenOnSignout?t._revokeInternal(a):Promise.resolve()).then((function(){var o=e.id_token_hint||a&&a.id_token;return o&&(i.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=o),t.removeUser().then((function(){return i.Log.debug("UserManager._signoutStart: user removed, creating signout request"),t.createSignoutRequest(e).then((function(e){return i.Log.debug("UserManager._signoutStart: got signout request"),n.url=e.url,e.state&&(n.id=e.state.id),r.navigate(n)}))}))}))})).catch((function(e){throw r.close&&(i.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),r.close()),e}))}))},t.prototype._signoutEnd=function(e){return this.processSignoutResponse(e).then((function(e){return i.Log.debug("UserManager._signoutEnd: got signout response"),e}))},t.prototype.revokeAccessToken=function(){var e=this;return this._loadUser().then((function(t){return e._revokeInternal(t,!0).then((function(n){if(n)return i.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then((function(){i.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)}))}))})).then((function(){i.Log.info("UserManager.revokeAccessToken: access token revoked successfully")}))},t.prototype._revokeInternal=function(e,t){var n=this;if(e){var r=e.access_token,a=e.refresh_token;return this._revokeAccessTokenInternal(r,t).then((function(e){return n._revokeRefreshTokenInternal(a,t).then((function(t){return e||t||i.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),e||t}))}))}return Promise.resolve(!1)},t.prototype._revokeAccessTokenInternal=function(e,t){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,t).then((function(){return!0}))},t.prototype._revokeRefreshTokenInternal=function(e,t){return e?this._tokenRevocationClient.revoke(e,t,"refresh_token").then((function(){return!0})):Promise.resolve(!1)},t.prototype.startSilentRenew=function(){this._silentRenewService.start()},t.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},t.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then((function(e){return e?(i.Log.debug("UserManager._loadUser: user storageString loaded"),s.User.fromStorageString(e)):(i.Log.debug("UserManager._loadUser: no user storageString"),null)}))},t.prototype.storeUser=function(e){if(e){i.Log.debug("UserManager.storeUser: storing user");var t=e.toStorageString();return this._userStore.set(this._userStoreKey,t)}return i.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},r(t,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),t}(a.OidcClient)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerSettings=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(0),n(5)),a=n(40),o=n(41),s=n(43),u=n(6),l=n(1),c=n(8);t.UserManagerSettings=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.popup_redirect_uri,i=n.popup_post_logout_redirect_uri,d=n.popupWindowFeatures,f=n.popupWindowTarget,h=n.silent_redirect_uri,p=n.silentRequestTimeout,v=n.automaticSilentRenew,m=void 0!==v&&v,g=n.validateSubOnSilentRenew,y=void 0!==g&&g,_=n.includeIdTokenInSilentRenew,b=void 0===_||_,w=n.monitorSession,x=void 0===w||w,k=n.monitorAnonymousSession,S=void 0!==k&&k,E=n.checkSessionInterval,A=void 0===E?2e3:E,T=n.stopCheckSessionOnError,C=void 0===T||T,P=n.query_status_response_type,I=n.revokeAccessTokenOnSignout,R=void 0!==I&&I,L=n.accessTokenExpiringNotificationTime,M=void 0===L?60:L,O=n.redirectNavigator,F=void 0===O?new a.RedirectNavigator:O,D=n.popupNavigator,N=void 0===D?new o.PopupNavigator:D,j=n.iframeNavigator,B=void 0===j?new s.IFrameNavigator:j,U=n.userStore,z=void 0===U?new u.WebStorageStateStore({store:l.Global.sessionStorage}):U;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,arguments[0]));return V._popup_redirect_uri=r,V._popup_post_logout_redirect_uri=i,V._popupWindowFeatures=d,V._popupWindowTarget=f,V._silent_redirect_uri=h,V._silentRequestTimeout=p,V._automaticSilentRenew=m,V._validateSubOnSilentRenew=y,V._includeIdTokenInSilentRenew=b,V._accessTokenExpiringNotificationTime=M,V._monitorSession=x,V._monitorAnonymousSession=S,V._checkSessionInterval=A,V._stopCheckSessionOnError=C,P?V._query_status_response_type=P:arguments[0]&&arguments[0].response_type?V._query_status_response_type=c.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":V._query_status_response_type="id_token",V._revokeAccessTokenOnSignout=R,V._redirectNavigator=F,V._popupNavigator=N,V._iframeNavigator=B,V._userStore=z,V}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),t}(i.OidcClientSettings)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectNavigator=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.RedirectNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(){return Promise.resolve(this)},e.prototype.navigate=function(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(i.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},r(e,[{key:"url",get:function(){return window.location.href}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupNavigator=void 0;var r=n(0),i=n(42);t.PopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.PopupWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t,n,a){r.Log.debug("PopupNavigator.callback");try{return i.PopupWindow.notifyOpener(t,n,a),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=n(3);t.PopupWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t}));var r=t.popupWindowTarget||"_blank",a=t.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",r,a),this._popup&&(i.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return e.prototype.navigate=function(e){return this._popup?e&&e.url?(i.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},e.prototype._success=function(e){i.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},e.prototype._error=function(e){i.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup(!1)},e.prototype._cleanup=function(e){i.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},e.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},e.prototype._callback=function(e,t){this._cleanup(t),e?(i.Log.debug("PopupWindow.callback success"),this._success({url:e})):(i.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},e.notifyOpener=function(e,t,n){if(window.opener){if(e=e||window.location.href){var r=a.UrlUtility.parseUrlFragment(e,n);if(r.state){var o="popupCallback_"+r.state,s=window.opener[o];s?(i.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),s(e,t)):i.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else i.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else i.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},r(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameNavigator=void 0;var r=n(0),i=n(44);t.IFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.IFrameWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t){r.Log.debug("IFrameNavigator.callback");try{return i.IFrameWindow.notifyParent(t),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.IFrameWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t})),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return e.prototype.navigate=function(e){if(e&&e.url){var t=e.silentRequestTimeout||1e4;i.Log.debug("IFrameWindow.navigate: Using timeout of:",t),this._timer=window.setTimeout(this._timeout.bind(this),t),this._frame.src=e.url}else this._error("No url provided");return this.promise},e.prototype._success=function(e){this._cleanup(),i.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._frame&&(i.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},e.prototype._timeout=function(){i.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},e.prototype._message=function(e){if(i.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var t=e.data;t?this._success({url:t}):this._error("Invalid response from frame")}},e.notifyParent=function(e){i.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(i.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},r(e,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerEvents=void 0;var r=n(0),i=n(16),a=n(17);t.UserManagerEvents=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r._userLoaded=new a.Event("User loaded"),r._userUnloaded=new a.Event("User unloaded"),r._silentRenewError=new a.Event("Silent renew error"),r._userSignedIn=new a.Event("User signed in"),r._userSignedOut=new a.Event("User signed out"),r._userSessionChanged=new a.Event("User session changed"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.load=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.Log.debug("UserManagerEvents.load"),e.prototype.load.call(this,t),n&&this._userLoaded.raise(t)},t.prototype.unload=function(){r.Log.debug("UserManagerEvents.unload"),e.prototype.unload.call(this),this._userUnloaded.raise()},t.prototype.addUserLoaded=function(e){this._userLoaded.addHandler(e)},t.prototype.removeUserLoaded=function(e){this._userLoaded.removeHandler(e)},t.prototype.addUserUnloaded=function(e){this._userUnloaded.addHandler(e)},t.prototype.removeUserUnloaded=function(e){this._userUnloaded.removeHandler(e)},t.prototype.addSilentRenewError=function(e){this._silentRenewError.addHandler(e)},t.prototype.removeSilentRenewError=function(e){this._silentRenewError.removeHandler(e)},t.prototype._raiseSilentRenewError=function(e){r.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},t.prototype.addUserSignedIn=function(e){this._userSignedIn.addHandler(e)},t.prototype.removeUserSignedIn=function(e){this._userSignedIn.removeHandler(e)},t.prototype._raiseUserSignedIn=function(){r.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},t.prototype.addUserSignedOut=function(e){this._userSignedOut.addHandler(e)},t.prototype.removeUserSignedOut=function(e){this._userSignedOut.removeHandler(e)},t.prototype._raiseUserSignedOut=function(){r.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},t.prototype.addUserSessionChanged=function(e){this._userSessionChanged.addHandler(e)},t.prototype.removeUserSessionChanged=function(e){this._userSessionChanged.removeHandler(e)},t.prototype._raiseUserSessionChanged=function(){r.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},t}(i.AccessTokenEvents)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=n(1),o=n(17);t.Timer=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Global.timer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return o._timer=r,o._nowFunc=i||function(){return Date.now()/1e3},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.init=function(e){e<=0&&(e=1),e=parseInt(e);var t=this.now+e;if(this.expiration===t&&this._timerHandle)i.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),i.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=t;var n=5;e<n&&(n=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*n)}},t.prototype.cancel=function(){this._timerHandle&&(i.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},t.prototype._callback=function(){var t=this._expiration-this.now;i.Log.debug("Timer.callback; "+this._name+" timer expires in:",t),this._expiration<=this.now&&(this.cancel(),e.prototype.raise.call(this))},r(t,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),t}(o.Event)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SilentRenewService=void 0;var r=n(0);t.SilentRenewService=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userManager=t}return e.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then((function(e){})).catch((function(e){r.Log.error("SilentRenewService.start: Error from getUser:",e.message)})))},e.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},e.prototype._tokenExpiring=function(){var e=this;this._userManager.signinSilent().then((function(e){r.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")}),(function(t){r.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupNavigator=void 0;var r=n(21);t.CordovaPopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new r.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaIFrameNavigator=void 0;var r=n(21);t.CordovaIFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){e.popupWindowFeatures="hidden=yes";var t=new r.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.11.6"}])},e.exports=t()},5210:function(e,t,n){"use strict";var r=n(7061).default,i=n(2122).default,a=n(7156).default,o=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var u=n(7639),l=n(6477),c=function(e,t){return window.fetch(e,t)},d=function(){function e(t,n,s,d,f){var h=this;o(this,e),this.loginHandler=t,this.redirectHandler=n,this.logoutHandler=s,this.sessionInfoManager=d,this.issuerConfigFetcher=f,this.login=function(){var e=a(r().mark((function e(t,n){var a,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.sessionInfoManager.clear(t.sessionId);case 2:if(s=null!==(a=t.redirectUrl)&&void 0!==a?a:(0,l.removeOidcQueryParam)(window.location.href),(0,u.isValidRedirectUrl)(s)){e.next=5;break}throw new Error("".concat(s," is not a valid redirect URL, it is either a malformed IRI or it includes a hash fragment."));case 5:return e.next=7,h.loginHandler.handle(i(i({},t),{},{redirectUrl:s,clientName:null!==(o=t.clientName)&&void 0!==o?o:t.clientId,eventEmitter:n}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.fetch=c,this.logout=function(){var e=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.logoutHandler.handle(t);case 2:h.fetch=c;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getSessionInfo=function(){var e=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.sessionInfoManager.get(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllSessionInfo=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.sessionInfoManager.getAll());case 1:case"end":return e.stop()}}),e)}))),this.validateCurrentSession=function(){var e=a(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.sessionInfoManager.get(t);case 2:if(void 0!==(n=e.sent)&&void 0!==n.clientAppId&&void 0!==n.issuer){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleIncomingRedirect=function(){var e=a(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.redirectHandler.handle(t,n);case 3:return i=e.sent,h.fetch=i.fetch.bind(window),h.cleanUrlAfterRedirect(t),e.abrupt("return",{isLoggedIn:i.isLoggedIn,webId:i.webId,sessionId:i.sessionId,expirationDate:i.expirationDate});case 9:return e.prev=9,e.t0=e.catch(0),h.cleanUrlAfterRedirect(t),n.emit(u.EVENTS.ERROR,"redirect",e.t0),e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()}return s(e,[{key:"cleanUrlAfterRedirect",value:function(e){var t=new URL(e);t.searchParams.delete("state"),t.searchParams.delete("code"),t.searchParams.delete("id_token"),t.searchParams.delete("access_token"),t.searchParams.delete("error"),t.searchParams.delete("error_description"),t.searchParams.delete("iss"),window.history.replaceState(null,"",t.toString())}}]),e}();t.default=d},4783:function(e,t,n){"use strict";var r=n(7061).default,i=n(2122).default,a=n(6690).default,o=n(9728).default,s=n(6115).default,u=n(1655).default,l=n(6389).default,c=n(7156).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Session=t.silentlyAuthenticate=void 0;var d=n(7465),f=n(7639),h=n(2856),p=n(4934),v=n(6260);function m(e,t,n){return g.apply(this,arguments)}function g(){return(g=c(r().mark((function e(t,n,i){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateCurrentSession(t);case 2:if(null===(o=e.sent)){e.next=8;break}return window.localStorage.setItem(v.KEY_CURRENT_URL,window.location.href),e.next=7,n.login({sessionId:t,prompt:"none",oidcIssuer:o.issuer,redirectUrl:o.redirectUrl,clientId:o.clientAppId,clientSecret:o.clientAppSecret,tokenType:null!==(a=o.tokenType)&&void 0!==a?a:"DPoP"},i);case 7:return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return!!(null===e||void 0===e?void 0:e.isLoggedIn)}t.silentlyAuthenticate=m;var _=function(e){u(n,e);var t=l(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return a(this,n),(e=t.call(this)).tokenRequestInProgress=!1,e.login=function(){var t=c(r().mark((function t(n){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clientAuthentication.login(i(i({sessionId:e.info.sessionId},n),{},{tokenType:null!==(a=n.tokenType)&&void 0!==a?a:"DPoP"}),s(e));case 2:return t.abrupt("return",new Promise((function(){})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetch=function(){var t=c(r().mark((function t(n,i){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.clientAuthentication.fetch(n,i));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.internalLogout=function(){var t=c(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.localStorage.removeItem(v.KEY_CURRENT_SESSION),t.next=3,e.clientAuthentication.logout(e.info.sessionId);case 3:e.info.isLoggedIn=!1,n&&e.emit(f.EVENTS.LOGOUT);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.logout=c(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.internalLogout(!0));case 1:case"end":return t.stop()}}),t)}))),e.handleIncomingRedirect=c(r().mark((function t(){var n,i,a,o,u,l,c,d=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=d.length>0&&void 0!==d[0]?d[0]:{},!e.info.isLoggedIn){t.next=3;break}return t.abrupt("return",e.info);case 3:if(!e.tokenRequestInProgress){t.next=5;break}return t.abrupt("return",void 0);case 5:return o=null!==(i=(a="string"===typeof n?{url:n}:n).url)&&void 0!==i?i:window.location.href,e.tokenRequestInProgress=!0,t.next=10,e.clientAuthentication.handleIncomingRedirect(o,s(e));case 10:if(!y(u=t.sent)){t.next=17;break}e.setSessionInfo(u),null===(l=window.localStorage.getItem(v.KEY_CURRENT_URL))?e.emit(f.EVENTS.LOGIN):(window.localStorage.removeItem(v.KEY_CURRENT_URL),e.emit(f.EVENTS.SESSION_RESTORED,l)),t.next=25;break;case 17:if(!0!==a.restorePreviousSession){t.next=25;break}if(null===(c=window.localStorage.getItem(v.KEY_CURRENT_SESSION))){t.next=25;break}return t.next=22,m(c,e.clientAuthentication,s(e));case 22:if(!t.sent){t.next=25;break}return t.abrupt("return",new Promise((function(){})));case 25:return e.tokenRequestInProgress=!1,t.abrupt("return",u);case 27:case"end":return t.stop()}}),t)}))),o.clientAuthentication?e.clientAuthentication=o.clientAuthentication:o.secureStorage&&o.insecureStorage?e.clientAuthentication=(0,p.getClientAuthenticationWithDependencies)({secureStorage:o.secureStorage,insecureStorage:o.insecureStorage}):e.clientAuthentication=(0,p.getClientAuthenticationWithDependencies)({}),o.sessionInfo?e.info={sessionId:o.sessionInfo.sessionId,isLoggedIn:!1,webId:o.sessionInfo.webId}:e.info={sessionId:null!==u&&void 0!==u?u:(0,h.v4)(),isLoggedIn:!1},e.on(f.EVENTS.LOGIN,(function(){return window.localStorage.setItem(v.KEY_CURRENT_SESSION,e.info.sessionId)})),e.on(f.EVENTS.SESSION_EXPIRED,(function(){return e.internalLogout(!1)})),e.on(f.EVENTS.ERROR,(function(){return e.internalLogout(!1)})),e}return o(n,[{key:"onLogin",value:function(e){this.on(f.EVENTS.LOGIN,e)}},{key:"onLogout",value:function(e){this.on(f.EVENTS.LOGOUT,e)}},{key:"onError",value:function(e){this.on(f.EVENTS.ERROR,e)}},{key:"onSessionRestore",value:function(e){this.on(f.EVENTS.SESSION_RESTORED,e)}},{key:"onSessionExpiration",value:function(e){this.on(f.EVENTS.SESSION_EXPIRED,e)}},{key:"setSessionInfo",value:function(e){var t=this;this.info.isLoggedIn=e.isLoggedIn,this.info.webId=e.webId,this.info.sessionId=e.sessionId,this.info.expirationDate=e.expirationDate,this.on(f.EVENTS.SESSION_EXTENDED,(function(e){t.info.expirationDate=Date.now()+1e3*e}))}}]),n}(d.EventEmitter);t.Session=_},6260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CURRENT_URL=t.KEY_CURRENT_SESSION=void 0;var r=n(7639);t.KEY_CURRENT_SESSION="".concat(r.SOLID_CLIENT_AUTHN_KEY_PREFIX,"currentSession"),t.KEY_CURRENT_URL="".concat(r.SOLID_CLIENT_AUTHN_KEY_PREFIX,"currentUrl")},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onSessionRestore=t.onLogout=t.onLogin=t.handleIncomingRedirect=t.logout=t.login=t.fetch=t.getDefaultSession=void 0;var r,i=n(4783);function a(){return"undefined"===typeof r&&(r=new i.Session),r}t.getDefaultSession=a;t.fetch=function(){var e=a();return e.fetch.apply(e,arguments)};t.login=function(){var e=a();return e.login.apply(e,arguments)};t.logout=function(){var e=a();return e.logout.apply(e,arguments)};t.handleIncomingRedirect=function(){var e=a();return e.handleIncomingRedirect.apply(e,arguments)};t.onLogin=function(){var e=a();return e.onLogin.apply(e,arguments)};t.onLogout=function(){var e=a();return e.onLogout.apply(e,arguments)};t.onSessionRestore=function(){var e=a();return e.onSessionRestore.apply(e,arguments)}},4934:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getClientAuthenticationWithDependencies=void 0;var i=n(7639),a=r(n(4554)),o=r(n(5210)),s=r(n(5934)),u=r(n(5404)),l=r(n(5010)),c=n(3860),d=r(n(5046)),f=n(7582),h=n(5857),p=r(n(9992)),v=r(n(6287)),m=r(n(4079)),g=r(n(938)),y=n(3576),_=r(n(1559));t.getClientAuthenticationWithDependencies=function(e){var t=new i.InMemoryStorage,n=e.secureStorage||t,r=e.insecureStorage||new v.default,b=new a.default(n,r),w=new l.default(b),x=new g.default(b),k=new f.SessionInfoManager(b),S=new _.default(b,w,x),E=new s.default(b,new u.default(b,new m.default),w,x),A=new p.default([new y.ErrorOidcHandler,new h.AuthCodeRedirectHandler(b,k,w,x,S),new c.FallbackRedirectHandler]);return new o.default(E,A,new d.default(k),k,w)}},2464:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryStorage=t.ConfigurationError=t.NotImplementedError=t.getClientAuthenticationWithDependencies=t.Session=void 0;var a=n(4783);Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return a.Session}});var o=n(4934);Object.defineProperty(t,"getClientAuthenticationWithDependencies",{enumerable:!0,get:function(){return o.getClientAuthenticationWithDependencies}}),i(n(33),t);var s=n(7639);Object.defineProperty(t,"NotImplementedError",{enumerable:!0,get:function(){return s.NotImplementedError}}),Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return s.ConfigurationError}}),Object.defineProperty(t,"InMemoryStorage",{enumerable:!0,get:function(){return s.InMemoryStorage}})},9992:function(e,t,n){"use strict";var r=n(9728).default,i=n(6690).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){a(n,e);var t=o(n);function n(e){return i(this,n),t.call(this,e)}return r(n)}(n(7639).AggregateHandler);t.default=s},938:function(e,t,n){"use strict";var r=n(7061).default,i=n(7424).default,a=n(7156).default,o=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var u=n(6477),l=function(){function e(t){o(this,e),this.storageUtility=t}return s(e,[{key:"getClient",value:function(){var e=a(r().mark((function e(t,n){var a,o,s,l,c,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.storageUtility.getForUser(t.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(t.sessionId,"clientSecret",{secure:!1})]);case 2:if(a=e.sent,o=i(a,2),s=o[0],l=o[1],!s){e.next=8;break}return e.abrupt("return",{clientId:s,clientSecret:l,clientType:"dynamic"});case 8:return e.prev=8,e.next=11,(0,u.registerClient)(t,n);case 11:return c=e.sent,d={clientId:c.clientId},c.clientSecret&&(d.clientSecret=c.clientSecret),c.idTokenSignedResponseAlg&&(d.idTokenSignedResponseAlg=c.idTokenSignedResponseAlg),e.next=17,this.storageUtility.setForUser(t.sessionId,d,{secure:!1});case 17:return e.abrupt("return",c);case 20:throw e.prev=20,e.t0=e.catch(8),new Error("Client registration failed: [".concat(e.t0,"]"));case 23:case"end":return e.stop()}}),e,this,[[8,20]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();t.default=l},5010:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.WELL_KNOWN_OPENID_CONFIG=void 0;var s=n(7639);t.WELL_KNOWN_OPENID_CONFIG=".well-known/openid-configuration";var u={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function l(e){var t={};return Object.keys(e).forEach((function(n){u[n]&&(t[u[n].toKey]=e[n])})),Array.isArray(t.scopesSupported)||(t.scopesSupported=["openid"]),t}var c=function(){function e(t){a(this,e),this.storageUtility=t}return o(e,[{key:"fetchConfig",value:function(){var n=i(r().mark((function n(i){var a,o,u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=new URL(t.WELL_KNOWN_OPENID_CONFIG,i.endsWith("/")?i:"".concat(i,"/")).href,n.next=3,window.fetch(o);case 3:return u=n.sent,n.prev=4,n.t0=l,n.next=8,u.json();case 8:n.t1=n.sent,a=(0,n.t0)(n.t1),n.next=15;break;case 12:throw n.prev=12,n.t2=n.catch(4),new s.ConfigurationError("[".concat(i.toString(),"] has an invalid configuration: ").concat(n.t2.message));case 15:return n.next=17,this.storageUtility.set(e.getLocalStorageKey(i),JSON.stringify(a));case 17:return n.abrupt("return",a);case 18:case"end":return n.stop()}}),n,this,[[4,12]])})));return function(e){return n.apply(this,arguments)}}()}],[{key:"getLocalStorageKey",value:function(e){return"issuerConfig:".concat(e)}}]),e}();t.default=c},5934:function(e,t,n){"use strict";var r=n(2122).default,i=n(7061).default,a=n(7156).default,o=n(6690).default,s=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var u=n(7639);function l(e){return"string"===typeof e.oidcIssuer}function c(e){return"string"===typeof e.redirectUrl}var d=function(){function e(t,n,r,i){o(this,e),this.storageUtility=t,this.oidcHandler=n,this.issuerConfigFetcher=r,this.clientRegistrar=i}return s(e,[{key:"canHandle",value:function(){var e=a(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t)&&c(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=a(i().mark((function e(t){var n,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(t)){e.next=2;break}throw new u.ConfigurationError("OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ".concat(JSON.stringify(t)));case 2:if(c(t)){e.next=4;break}throw new u.ConfigurationError("OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ".concat(JSON.stringify(t)));case 4:return e.next=6,this.issuerConfigFetcher.fetchConfig(t.oidcIssuer);case 6:return n=e.sent,e.next=9,(0,u.handleRegistration)(t,n,this.storageUtility,this.clientRegistrar);case 9:return a=e.sent,o=r(r({issuer:n.issuer,dpop:"dpop"===t.tokenType.toLowerCase()},t),{},{issuerConfiguration:n,client:a}),e.abrupt("return",this.oidcHandler.handle(o));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=d},4079:function(e,t,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){r(this,e)}return i(e,[{key:"redirect",value:function(e,t){t&&t.handleRedirect?t.handleRedirect(e):t&&t.redirectByReplacingState?window.history.replaceState({},"",e):window.location.href=e}}]),e}();t.default=a},5857:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.AuthCodeRedirectHandler=void 0;var s=n(7639),u=n(6477),l=function(){function e(t,n,r,i,o){a(this,e),this.storageUtility=t,this.sessionInfoManager=n,this.issuerConfigFetcher=r,this.clientRegistrar=i,this.tokerRefresher=o}return o(e,[{key:"canHandle",value:function(){var e=i(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URL(t),e.abrupt("return",null!==n.searchParams.get("code")&&null!==n.searchParams.get("state"));case 5:throw e.prev=5,e.t0=e.catch(0),new Error("[".concat(t,"] is not a valid URL, and cannot be used as a redirect URL: ").concat(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=i(r().mark((function e(t,n){var i,a,o,l,c,d,f,h,p,v,m,g,y,_,b;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.canHandle(t);case 2:if(e.sent){e.next=4;break}throw new Error("AuthCodeRedirectHandler cannot handle [".concat(t,"]: it is missing one of [code, state]."));case 4:return i=new URL(t),a=i.searchParams.get("state"),e.next=8,this.storageUtility.getForUser(a,"sessionId",{errorIfNull:!0});case 8:return o=e.sent,e.next=11,(0,s.loadOidcContextFromStorage)(o,this.storageUtility,this.issuerConfigFetcher);case 11:if(l=e.sent,c=l.issuerConfig,d=l.codeVerifier,f=l.redirectUrl,h=l.dpop,"string"!==typeof(p=i.searchParams.get("iss"))||p===c.issuer){e.next=19;break}throw new Error("The value of the iss parameter (".concat(p,") does not match the issuer identifier of the authorization server (").concat(c.issuer,"). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)"));case 19:if(void 0!==d){e.next=21;break}throw new Error("The code verifier for session ".concat(o," is missing from storage."));case 21:if(void 0!==f){e.next=23;break}throw new Error("The redirect URL for session ".concat(o," is missing from storage."));case 23:return e.next=25,this.clientRegistrar.getClient({sessionId:o},c);case 25:if(v=e.sent,g=Date.now(),!h){e.next=34;break}return e.next=30,(0,u.getDpopToken)(c,v,{grantType:"authorization_code",code:i.searchParams.get("code"),codeVerifier:d,redirectUrl:f});case 30:m=e.sent,window.localStorage.removeItem("oidc.".concat(a)),e.next=37;break;case 34:return e.next=36,(0,u.getBearerToken)(i.toString());case 36:m=e.sent;case 37:return void 0!==m.refreshToken&&(y={sessionId:o,refreshToken:m.refreshToken,tokenRefresher:this.tokerRefresher}),e.next=40,(0,s.buildAuthenticatedFetch)(fetch,m.accessToken,{dpopKey:m.dpopKey,refreshOptions:y,eventEmitter:n,expiresIn:m.expiresIn});case 40:return _=e.sent,e.next=43,this.storageUtility.setForUser(o,{webId:m.webId,isLoggedIn:"true"},{secure:!0});case 43:return i.searchParams.delete("code"),e.next=46,this.storageUtility.setForUser(o,{redirectUrl:i.toString()},{secure:!1});case 46:return e.next=48,this.sessionInfoManager.get(o);case 48:if(b=e.sent){e.next=51;break}throw new Error("Could not retrieve session: [".concat(o,"]."));case 51:return e.abrupt("return",Object.assign(b,{fetch:_,expirationDate:"number"===typeof m.expiresIn?g+1e3*m.expiresIn:null}));case 52:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();t.AuthCodeRedirectHandler=l},3576:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorOidcHandler=void 0;var s=n(7639),u=n(7582),l=function(){function e(){a(this,e)}return o(e,[{key:"canHandle",value:function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",new URL(t).searchParams.has("error"));case 4:throw e.prev=4,e.t0=e.catch(0),new Error("[".concat(t,"] is not a valid URL, and cannot be used as a redirect URL: ").concat(e.t0));case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=i(r().mark((function e(t,n){var i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==n&&(i=new URL(t),a=i.searchParams.get("error"),o=i.searchParams.get("error_description"),n.emit(s.EVENTS.ERROR,a,o)),e.abrupt("return",(0,u.getUnauthenticatedSession)());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();t.ErrorOidcHandler=l},3860:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackRedirectHandler=void 0;var s=n(7582),u=function(){function e(){a(this,e)}return o(e,[{key:"canHandle",value:function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,new URL(t),e.abrupt("return",!0);case 5:throw e.prev=5,e.t0=e.catch(0),new Error("[".concat(t,"] is not a valid URL, and cannot be used as a redirect URL: ").concat(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.getUnauthenticatedSession)());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.FallbackRedirectHandler=u},5404:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(7639),u=n(6477),l=function(){function e(t,n){a(this,e),this.storageUtility=t,this.redirector=n}return o(e,[{key:"canHandle",value:function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!(t.issuerConfiguration.grantTypesSupported&&t.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=i(r().mark((function e(t){var n,i,a,o,l,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={authority:t.issuer.toString(),client_id:t.client.clientId,client_secret:t.client.clientSecret,redirect_uri:t.redirectUrl.toString(),post_logout_redirect_uri:t.redirectUrl.toString(),response_type:"code",scope:s.DEFAULT_SCOPES,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:null!==(n=t.prompt)&&void 0!==n?n:"consent"},a=new u.OidcClient(i),o=this.redirector,l=this.storageUtility,e.prev=4,e.next=7,a.createSigninRequest();case 7:return c=e.sent,e.next=10,Promise.all([l.setForUser(c.state._id,{sessionId:t.sessionId}),l.setForUser(t.sessionId,{codeVerifier:c.state._code_verifier,issuer:t.issuer.toString(),redirectUrl:t.redirectUrl,dpop:t.dpop?"true":"false"})]);case 10:o.redirect(c.url.toString(),{handleRedirect:t.handleRedirect}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0);case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=l},1559:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(7639),u=n(6477),l=function(){function e(t,n,r){a(this,e),this.storageUtility=t,this.issuerConfigFetcher=n,this.clientRegistrar=r}return o(e,[{key:"refresh",value:function(){var e=i(r().mark((function e(t,n,i,a){var o,l,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.loadOidcContextFromStorage)(t,this.storageUtility,this.issuerConfigFetcher);case 2:return o=e.sent,e.next=5,this.clientRegistrar.getClient({sessionId:t},o.issuerConfig);case 5:if(l=e.sent,void 0!==n){e.next=8;break}throw new Error("Session [".concat(t,"] has no refresh token to allow it to refresh its access token."));case 8:if(!o.dpop||void 0!==i){e.next=10;break}throw new Error("For session [".concat(t,"], the key bound to the DPoP access token must be provided to refresh said access token."));case 10:return e.next=12,(0,u.refresh)(n,o.issuerConfig,l,i);case 12:if(void 0===(c=e.sent).refreshToken){e.next=17;break}return null===a||void 0===a||a.emit(s.EVENTS.NEW_REFRESH_TOKEN,c.refreshToken),e.next=17,this.storageUtility.setForUser(t,{refreshToken:c.refreshToken});case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()}]),e}();t.default=l},5046:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){a(this,e),this.sessionInfoManager=t}return o(e,[{key:"canHandle",value:function(){var e=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfoManager.clear(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=s},7582:function(e,t,n){"use strict";var r=n(7061).default,i=n(6690).default,a=n(9728).default,o=n(7156).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionInfoManager=t.clear=t.getUnauthenticatedSession=void 0;var s=n(7639),u=n(2856),l=n(6477);function c(e,t){return d.apply(this,arguments)}function d(){return(d=o(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.deleteAllUserData(t,{secure:!1}),n.deleteAllUserData(t,{secure:!0}),n.delete("clientKey",{secure:!1})]);case 2:return e.next=4,(0,l.clearOidcPersistentStorage)();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.getUnauthenticatedSession=function(){return{isLoggedIn:!1,sessionId:(0,u.v4)(),fetch:fetch}},t.clear=c;var f=function(){function e(t){i(this,e),this.storageUtility=t}return a(e,[{key:"update",value:function(e,t){throw new Error("Not Implemented")}},{key:"get",value:function(){var e=o(r().mark((function e(t){var n,i,a,o,u,l,c,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageUtility.getForUser(t,"isLoggedIn",{secure:!0});case 2:return i=e.sent,e.next=5,this.storageUtility.getForUser(t,"webId",{secure:!0});case 5:return a=e.sent,e.next=8,this.storageUtility.getForUser(t,"clientId",{secure:!1});case 8:return o=e.sent,e.next=11,this.storageUtility.getForUser(t,"clientSecret",{secure:!1});case 11:return u=e.sent,e.next=14,this.storageUtility.getForUser(t,"redirectUrl",{secure:!1});case 14:return l=e.sent,e.next=17,this.storageUtility.getForUser(t,"refreshToken",{secure:!0});case 17:return c=e.sent,e.next=20,this.storageUtility.getForUser(t,"issuer",{secure:!1});case 20:return d=e.sent,e.next=23,this.storageUtility.getForUser(t,"tokenType",{secure:!1});case 23:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=27;break}e.t0=void 0!==n;case 27:if(!e.t0){e.next=31;break}e.t2=n,e.next=32;break;case 31:e.t2="DPoP";case 32:if(f=e.t2,(0,s.isSupportedTokenType)(f)){e.next=35;break}throw new Error("Tokens of type [".concat(f,"] are not supported."));case 35:if(void 0!==o||void 0!==i||void 0!==a||void 0!==c){e.next=37;break}return e.abrupt("return",void 0);case 37:return e.abrupt("return",{sessionId:t,webId:a,isLoggedIn:"true"===i,redirectUrl:l,refreshToken:c,issuer:d,clientAppId:o,clientAppSecret:u,tokenType:f});case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(t,this.storageUtility));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRegisteredSessionIdAll",value:function(){var e=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"clearAll",value:function(){var e=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.SessionInfoManager=f},6287:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){a(this,e)}return o(e,[{key:"storage",get:function(){return window.localStorage}},{key:"get",value:function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.getItem(t)||void 0);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage.setItem(t,n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage.removeItem(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=s},4554:function(e,t,n){"use strict";var r=n(9728).default,i=n(6690).default,a=n(1655).default,o=n(6389).default;Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return r(n)}(n(7639).StorageUtility);t.default=s},2856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.default}});var r=f(n(4140)),i=f(n(6799)),a=f(n(2999)),o=f(n(6276)),s=f(n(2109)),u=f(n(167)),l=f(n(9102)),c=f(n(2821)),d=f(n(8258));function f(e){return e&&e.__esModule?e:{default:e}}},6672:function(e,t){"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,a,o){return r((s=r(r(t,e),r(i,o)))<<(u=a)|s>>>32-u,n);var s,u}function a(e,t,n,r,a,o,s){return i(t&n|~t&r,e,t,a,o,s)}function o(e,t,n,r,a,o,s){return i(t&r|n&~r,e,t,a,o,s)}function s(e,t,n,r,a,o,s){return i(t^n^r,e,t,a,o,s)}function u(e,t,n,r,a,o,s){return i(n^(t|~r),e,t,a,o,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var a=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(a>>>4&15)+r.charAt(15&a),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;for(var i=1732584193,l=-271733879,c=-1732584194,d=271733878,f=0;f<e.length;f+=16){var h=i,p=l,v=c,m=d;i=a(i,l,c,d,e[f],7,-680876936),d=a(d,i,l,c,e[f+1],12,-389564586),c=a(c,d,i,l,e[f+2],17,606105819),l=a(l,c,d,i,e[f+3],22,-1044525330),i=a(i,l,c,d,e[f+4],7,-176418897),d=a(d,i,l,c,e[f+5],12,1200080426),c=a(c,d,i,l,e[f+6],17,-1473231341),l=a(l,c,d,i,e[f+7],22,-45705983),i=a(i,l,c,d,e[f+8],7,1770035416),d=a(d,i,l,c,e[f+9],12,-1958414417),c=a(c,d,i,l,e[f+10],17,-42063),l=a(l,c,d,i,e[f+11],22,-1990404162),i=a(i,l,c,d,e[f+12],7,1804603682),d=a(d,i,l,c,e[f+13],12,-40341101),c=a(c,d,i,l,e[f+14],17,-1502002290),i=o(i,l=a(l,c,d,i,e[f+15],22,1236535329),c,d,e[f+1],5,-165796510),d=o(d,i,l,c,e[f+6],9,-1069501632),c=o(c,d,i,l,e[f+11],14,643717713),l=o(l,c,d,i,e[f],20,-373897302),i=o(i,l,c,d,e[f+5],5,-701558691),d=o(d,i,l,c,e[f+10],9,38016083),c=o(c,d,i,l,e[f+15],14,-660478335),l=o(l,c,d,i,e[f+4],20,-405537848),i=o(i,l,c,d,e[f+9],5,568446438),d=o(d,i,l,c,e[f+14],9,-1019803690),c=o(c,d,i,l,e[f+3],14,-187363961),l=o(l,c,d,i,e[f+8],20,1163531501),i=o(i,l,c,d,e[f+13],5,-1444681467),d=o(d,i,l,c,e[f+2],9,-51403784),c=o(c,d,i,l,e[f+7],14,1735328473),i=s(i,l=o(l,c,d,i,e[f+12],20,-1926607734),c,d,e[f+5],4,-378558),d=s(d,i,l,c,e[f+8],11,-2022574463),c=s(c,d,i,l,e[f+11],16,1839030562),l=s(l,c,d,i,e[f+14],23,-35309556),i=s(i,l,c,d,e[f+1],4,-1530992060),d=s(d,i,l,c,e[f+4],11,1272893353),c=s(c,d,i,l,e[f+7],16,-155497632),l=s(l,c,d,i,e[f+10],23,-1094730640),i=s(i,l,c,d,e[f+13],4,681279174),d=s(d,i,l,c,e[f],11,-358537222),c=s(c,d,i,l,e[f+3],16,-722521979),l=s(l,c,d,i,e[f+6],23,76029189),i=s(i,l,c,d,e[f+9],4,-640364487),d=s(d,i,l,c,e[f+12],11,-421815835),c=s(c,d,i,l,e[f+15],16,530742520),i=u(i,l=s(l,c,d,i,e[f+2],23,-995338651),c,d,e[f],6,-198630844),d=u(d,i,l,c,e[f+7],10,1126891415),c=u(c,d,i,l,e[f+14],15,-1416354905),l=u(l,c,d,i,e[f+5],21,-57434055),i=u(i,l,c,d,e[f+12],6,1700485571),d=u(d,i,l,c,e[f+3],10,-1894986606),c=u(c,d,i,l,e[f+10],15,-1051523),l=u(l,c,d,i,e[f+1],21,-2054922799),i=u(i,l,c,d,e[f+8],6,1873313359),d=u(d,i,l,c,e[f+15],10,-30611744),c=u(c,d,i,l,e[f+6],15,-1560198380),l=u(l,c,d,i,e[f+13],21,1309151649),i=u(i,l,c,d,e[f+4],6,-145523070),d=u(d,i,l,c,e[f+11],10,-1120210379),c=u(c,d,i,l,e[f+2],15,718787259),l=u(l,c,d,i,e[f+9],21,-343485551),i=r(i,h),l=r(l,p),c=r(c,v),d=r(d,m)}return[i,l,c,d]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(n(t)),i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))};t.default=l},2583:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},2109:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},8258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(9102))&&r.__esModule?r:{default:r};var a=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=a},8877:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},1471:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};var r=new Uint8Array(16)},817:function(e,t){"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var a=unescape(encodeURIComponent(e));e=[];for(var o=0;o<a.length;++o)e.push(a.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,u=Math.ceil(s/16),l=new Array(u),c=0;c<u;++c){for(var d=new Uint32Array(16),f=0;f<16;++f)d[f]=e[64*c+4*f]<<24|e[64*c+4*f+1]<<16|e[64*c+4*f+2]<<8|e[64*c+4*f+3];l[c]=d}l[u-1][14]=8*(e.length-1)/Math.pow(2,32),l[u-1][14]=Math.floor(l[u-1][14]),l[u-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<u;++h){for(var p=new Uint32Array(80),v=0;v<16;++v)p[v]=l[h][v];for(var m=16;m<80;++m)p[m]=r(p[m-3]^p[m-8]^p[m-14]^p[m-16],1);for(var g=i[0],y=i[1],_=i[2],b=i[3],w=i[4],x=0;x<80;++x){var k=Math.floor(x/20),S=r(g,5)+n(k,y,_,b)+w+t[k]+p[x]>>>0;w=b,b=_,_=r(y,30)>>>0,y=g,g=S}i[0]=i[0]+g>>>0,i[1]=i[1]+y>>>0,i[2]=i[2]+_>>>0,i[3]=i[3]+b>>>0,i[4]=i[4]+w>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};t.default=i},2821:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var r,i=(r=n(9102))&&r.__esModule?r:{default:r};for(var a=[],o=0;o<256;++o)a.push((o+256).toString(16).slice(1));function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}var u=function(e){var t=s(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);if(!(0,i.default)(t))throw TypeError("Stringified UUID is invalid");return t};t.default=u},4140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,a,o=(r=n(1471))&&r.__esModule?r:{default:r},s=n(2821);var u=0,l=0;var c=function(e,t,n){var r=t&&n||0,c=t||new Array(16),d=(e=e||{}).node||i,f=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==f){var h=e.random||(e.rng||o.default)();null==d&&(d=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=a=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:l+1,m=p-u+(v-l)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||p>u)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,l=v,a=f;var g=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;c[r++]=g>>>24&255,c[r++]=g>>>16&255,c[r++]=g>>>8&255,c[r++]=255&g;var y=p/4294967296*1e4&268435455;c[r++]=y>>>8&255,c[r++]=255&y,c[r++]=y>>>24&15|16,c[r++]=y>>>16&255,c[r++]=f>>>8|128,c[r++]=255&f;for(var _=0;_<6;++_)c[r+_]=d[_];return t||(0,s.unsafeStringify)(c)};t.default=c},6799:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3306)),i=a(n(6672));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v3",48,i.default);t.default=o},3306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,o,s){var u;if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"===typeof r&&(r=(0,a.default)(r)),16!==(null===(u=r)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),(l=n(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,o){s=s||0;for(var c=0;c<16;++c)o[s+c]=l[c];return o}return(0,i.unsafeStringify)(l)}try{r.name=e}catch(u){}return r.DNS=o,r.URL=s,r};var r,i=n(2821),a=(r=n(8258))&&r.__esModule?r:{default:r};var o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=o;var s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},2999:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2583)),i=o(n(1471)),a=n(2821);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();var o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return(0,a.unsafeStringify)(o)};t.default=s},6276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3306)),i=a(n(817));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v5",80,i.default);t.default=o},9102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(8877))&&r.__esModule?r:{default:r};var a=function(e){return"string"===typeof e&&i.default.test(e)};t.default=a},167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(9102))&&r.__esModule?r:{default:r};var a=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=a},7639:function(e,t,n){"use strict";var r=n(7424).default,i=n(1655).default,a=n(6389).default,o=n(3496).default,s=n(2122).default,u=n(7061).default,l=n(861).default,c=n(7156).default,d=n(6690).default,f=n(9728).default,h=n(7465),p=n(4255),v=n(2167),m=n(8649),g=["ES256","RS256"],y={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},_=["openid","offline_access","webid"].join(" "),b=function(){function e(t){d(this,e),this.handleables=t}return f(e,[{key:"getProperHandler",value:function(){var e=c(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.handleables.map((function(e){return e.canHandle.apply(e,l(t))})));case 2:n=e.sent,r=0;case 4:if(!(r<n.length)){e.next=10;break}if(!n[r]){e.next=7;break}return e.abrupt("return",this.handleables[r]);case 7:r+=1,e.next=4;break;case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canHandle",value:function(){var e=c(u().mark((function e(){var t,n,r,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return e.next=3,this.getProperHandler(n);case 3:return e.t0=e.sent,e.abrupt("return",null!==e.t0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=c(u().mark((function e(){var t,n,r,i,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,n=new Array(t),r=0;r<t;r++)n[r]=a[r];return e.next=3,this.getProperHandler(n);case 3:if(!(i=e.sent)){e.next=6;break}return e.abrupt("return",i.handle.apply(i,n));case 6:throw new Error("[".concat(this.constructor.name,"] cannot find a suitable handler for: ").concat(n.map((function(e){try{return JSON.stringify(e)}catch(t){return e.toString()}})).join(", ")));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function w(e,t){return x.apply(this,arguments)}function x(){return(x=c(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.fetch(t);case 2:if(200===(r=e.sent).status){e.next=5;break}throw new Error("Could not fetch JWKS for [".concat(n,"] at [").concat(t,"]: ").concat(r.status," ").concat(r.statusText));case 5:return e.prev=5,e.next=8,r.json();case 8:i=e.sent.keys[0],e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Error("Malformed JWKS for [".concat(n,"] at [").concat(t,"]: ").concat(e.t0.message));case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function k(){return(k=c(u().mark((function e(t,n,r,i){var a,o,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(n,r);case 2:return a=e.sent,e.prev=3,e.t0=v,e.t1=t,e.next=8,v.importJWK(a);case 8:return e.t2=e.sent,e.t3={issuer:r,audience:i},e.next=12,e.t0.jwtVerify.call(e.t0,e.t1,e.t2,e.t3);case 12:s=e.sent,l=s.payload,o=l,e.next=20;break;case 17:throw e.prev=17,e.t4=e.catch(3),new Error("Token verification failed: ".concat(e.t4.stack));case 20:if("string"!==typeof o.webid){e.next=22;break}return e.abrupt("return",o.webid);case 22:if("string"===typeof o.sub){e.next=24;break}throw new Error("The token ".concat(JSON.stringify(o)," is invalid: it has no 'webid' claim and no 'sub' claim."));case 24:return e.prev=24,new URL(o.sub),e.abrupt("return",o.sub);case 29:throw e.prev=29,e.t5=e.catch(24),new Error("The token has no 'webid' claim, and its 'sub' claim of [".concat(o.sub,"] is invalid as a URL - error [").concat(e.t5,"]."));case 32:case"end":return e.stop()}}),e,null,[[3,17],[24,29]])})))).apply(this,arguments)}function S(e){try{return new URL(e),!0}catch(t){return!1}}function E(e,t){return void 0===e.clientId||S(e.clientId)?t.scopesSupported.includes("webid")&&void 0!==e.clientId&&S(e.clientId)?"solid-oidc":"dynamic":"static"}function A(){return(A=c(u().mark((function e(t,n,r,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dynamic"!==(a=E(t,n))){e.next=3;break}return e.abrupt("return",i.getClient({sessionId:t.sessionId,clientName:t.clientName,redirectUrl:t.redirectUrl},n));case 3:return e.next=5,r.setForUser(t.sessionId,{clientId:t.clientId});case 5:if(!t.clientSecret){e.next=8;break}return e.next=8,r.setForUser(t.sessionId,{clientSecret:t.clientSecret});case 8:if(!t.clientName){e.next=11;break}return e.next=11,r.setForUser(t.sessionId,{clientName:t.clientName});case 11:return e.abrupt("return",{clientId:t.clientId,clientSecret:t.clientSecret,clientName:t.clientName,clientType:a});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=c(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getForUser(n,"sessionId"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=c(u().mark((function e(t,n,i){var a,o,s,l,c,d,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.getForUser(t,"issuer",{errorIfNull:!0}),n.getForUser(t,"codeVerifier"),n.getForUser(t,"redirectUrl"),n.getForUser(t,"dpop",{errorIfNull:!0})]);case 3:return a=e.sent,o=r(a,4),s=o[0],l=o[1],c=o[2],d=o[3],e.next=11,n.deleteForUser(t,"codeVerifier");case 11:return e.next=13,i.fetchConfig(s);case 13:return f=e.sent,e.abrupt("return",{codeVerifier:l,redirectUrl:c,issuerConfig:f,dpop:"true"===d});case 17:throw e.prev=17,e.t0=e.catch(0),new Error("Failed to retrieve OIDC context from storage associated with session [".concat(t,"]: ").concat(e.t0));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function P(){return(P=c(u().mark((function e(t,n,r,i,a,o,s){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=3;break}return e.next=3,t.setForUser(n,{refreshToken:a},{secure:o});case 3:if(void 0===r){e.next=6;break}return e.next=6,t.setForUser(n,{webId:r},{secure:o});case 6:if(void 0===i){e.next=9;break}return e.next=9,t.setForUser(n,{isLoggedIn:i},{secure:o});case 9:if(void 0===s){e.next=22;break}return e.t0=t,e.t1=n,e.t2=JSON.stringify(s.publicKey),e.t3=JSON,e.next=16,v.exportJWK(s.privateKey);case 16:return e.t4=e.sent,e.t5=e.t3.stringify.call(e.t3,e.t4),e.t6={publicKey:e.t2,privateKey:e.t5},e.t7={secure:o},e.next=22,e.t0.setForUser.call(e.t0,e.t1,e.t6,e.t7);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){function e(t,n){d(this,e),this.secureStorage=t,this.insecureStorage=n}return f(e,[{key:"getKey",value:function(e){return"solidClientAuthenticationUser:".concat(e)}},{key:"getUserData",value:function(){var e=c(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n?this.secureStorage:this.insecureStorage).get(this.getKey(t));case 2:if(void 0!==(r=e.sent)){e.next=5;break}return e.abrupt("return",{});case 5:return e.prev=5,e.abrupt("return",JSON.parse(r));case 9:throw e.prev=9,e.t0=e.catch(5),new Error("Data for user [".concat(t,"] in [").concat(n?"secure":"unsecure","] storage is corrupted - expected valid JSON, but got: ").concat(r));case 12:case"end":return e.stop()}}),e,this,[[5,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserData",value:function(){var e=c(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(r?this.secureStorage:this.insecureStorage).set(this.getKey(t),JSON.stringify(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=c(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,((null===n||void 0===n?void 0:n.secure)?this.secureStorage:this.insecureStorage).get(t);case 2:if(void 0!==(r=e.sent)||!(null===n||void 0===n?void 0:n.errorIfNull)){e.next=5;break}throw new Error("[".concat(t,"] is not stored"));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=c(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",((null===r||void 0===r?void 0:r.secure)?this.secureStorage:this.insecureStorage).set(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=c(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",((null===n||void 0===n?void 0:n.secure)?this.secureStorage:this.insecureStorage).delete(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getForUser",value:function(){var e=c(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserData(t,null===r||void 0===r?void 0:r.secure);case 2:if((i=e.sent)&&i[n]||(a=void 0),void 0!==(a=i[n])||!(null===r||void 0===r?void 0:r.errorIfNull)){e.next=7;break}throw new Error("Field [".concat(n,"] for user [").concat(t,"] is not stored"));case 7:return e.abrupt("return",a||void 0);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setForUser",value:function(){var e=c(u().mark((function e(t,n,r){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getUserData(t,null===r||void 0===r?void 0:r.secure);case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i={};case 9:return e.next=11,this.setUserData(t,s(s({},i),n),null===r||void 0===r?void 0:r.secure);case 11:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"deleteForUser",value:function(){var e=c(u().mark((function e(t,n,r){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserData(t,null===r||void 0===r?void 0:r.secure);case 2:return delete(i=e.sent)[n],e.next=6,this.setUserData(t,i,null===r||void 0===r?void 0:r.secure);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"deleteAllUserData",value:function(){var e=c(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,((null===n||void 0===n?void 0:n.secure)?this.secureStorage:this.insecureStorage).delete(this.getKey(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),R=function(){function e(){d(this,e),this.map={}}return f(e,[{key:"get",value:function(){var e=c(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map[t]||void 0);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=c(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.map[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=c(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.map[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),L=function(e){i(n,e);var t=a(n);function n(e){return d(this,n),t.call(this,e)}return f(n)}(o(Error)),M=function(e){i(n,e);var t=a(n);function n(e){return d(this,n),t.call(this,"[".concat(e,"] is not implemented"))}return f(n)}(o(Error)),O=function(e){i(n,e);var t=a(n);function n(e){var r;return d(this,n),(r=t.call(this,"Invalid response from OIDC provider: missing fields ".concat(e))).missingFields=e,r}return f(n)}(o(Error)),F=function(e){i(n,e);var t=a(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e)).error=r,a.errorDescription=i,a}return f(n)}(o(Error));function D(e){var t=new URL(e);return new URL(t.pathname,t.origin).toString()}function N(e,t,n){return j.apply(this,arguments)}function j(){return(j=c(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new v.SignJWT({htu:D(t),htm:n.toUpperCase(),jti:m.v4()}).setProtectedHeader({alg:g[0],jwk:r.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(r.privateKey,{}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=c(u().mark((function e(){var t,n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.generateKeyPair(g[0]);case 2:return t=e.sent,n=t.privateKey,r=t.publicKey,e.t0=n,e.next=8,v.exportJWK(r);case 8:return e.t1=e.sent,(i={privateKey:e.t0,publicKey:e.t1}).publicKey.alg=g[0],e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=600;function z(e,t,n,r){return V.apply(this,arguments)}function V(){return(V=c(u().mark((function e(t,n,r,i){var a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new p.Headers(null===i||void 0===i?void 0:i.headers)).set("Authorization","DPoP ".concat(n)),e.t0=o,e.next=5,N(t,null!==(a=null===i||void 0===i?void 0:i.method)&&void 0!==a?a:"get",r);case 5:return e.t1=e.sent,e.t0.set.call(e.t0,"DPoP",e.t1),e.abrupt("return",s(s({},i),{},{headers:o}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,n,r){return H.apply(this,arguments)}function H(){return(H=c(u().mark((function e(t,n,r,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r){e.next=2;break}return e.abrupt("return",z(t,n,r,i));case 2:return(a=new p.Headers(null===i||void 0===i?void 0:i.headers)).set("Authorization","Bearer ".concat(n)),e.abrupt("return",s(s({},i),{},{headers:a}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,n,r,i){return G.apply(this,arguments)}function G(){return(G=c(u().mark((function e(t,n,r,i,a){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=r,e.next=4,Z(r.toString(),n,a,i);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n){return K.apply(this,arguments)}function K(){return(K=c(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenRefresher.refresh(t.sessionId,t.refreshToken,n);case 2:return a=e.sent,null===r||void 0===r||r.emit(y.SESSION_EXTENDED,null!==(i=a.expiresIn)&&void 0!==i?i:U),"string"===typeof a.refreshToken&&(null===r||void 0===r||r.emit(y.NEW_REFRESH_TOKEN,a.refreshToken)),e.abrupt("return",{accessToken:a.accessToken,refreshToken:a.refreshToken,expiresIn:a.expiresIn});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){return void 0!==e?e-5>0?e-5:e:U};function X(){return X=c(u().mark((function e(t,n,r){var i,a,o,s,l,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n,void 0!==(s=null===r||void 0===r?void 0:r.refreshOptions)?(l=function(){var e=c(u().mark((function e(){var t,n,i,c,d,f,h,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(s,r.dpopKey,r.eventEmitter);case 3:d=e.sent,f=d.accessToken,h=d.refreshToken,p=d.expiresIn,a=f,void 0!==h&&(s.refreshToken=h),clearTimeout(o),o=setTimeout(l,1e3*J(p)),null===(t=r.eventEmitter)||void 0===t||t.emit(y.TIMEOUT_SET,o),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),e.t0 instanceof F&&(null===(n=null===r||void 0===r?void 0:r.eventEmitter)||void 0===n||n.emit(y.ERROR,e.t0.error,e.t0.errorDescription),null===(i=null===r||void 0===r?void 0:r.eventEmitter)||void 0===i||i.emit(y.SESSION_EXPIRED)),e.t0 instanceof O&&e.t0.missingFields.includes("access_token")&&(null===(c=null===r||void 0===r?void 0:r.eventEmitter)||void 0===c||c.emit(y.SESSION_EXPIRED));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),o=setTimeout(l,1e3*J(r.expiresIn)),null===(i=r.eventEmitter)||void 0===i||i.emit(y.TIMEOUT_SET,o)):void 0!==r&&void 0!==r.eventEmitter&&(d=setTimeout((function(){r.eventEmitter.emit(y.SESSION_EXPIRED)}),1e3*J(r.expiresIn)),r.eventEmitter.emit(y.TIMEOUT_SET,d)),e.abrupt("return",function(){var e=c(u().mark((function e(n,i){var o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,a,n,i,null===r||void 0===r?void 0:r.dpopKey);case 2:if(o=e.sent,s=!o.ok&&(u=o.status,![401,403].includes(u)),!o.ok&&!s){e.next=6;break}return e.abrupt("return",o);case 6:if(!(o.url!==n)||void 0===(null===r||void 0===r?void 0:r.dpopKey)){e.next=11;break}return e.next=10,W(t,a,o.url,i,r.dpopKey);case 10:o=e.sent;case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}var u}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}var Y="getResponse",Q={get:function(){var e=c(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),set:function(){var e=c(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),delete:function(){var e=c(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getForUser:function(){var e=c(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y);case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),setForUser:function(){var e=c(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteForUser:function(){var e=c(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteAllUserData:function(){var e=c(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},$=function(e){var t=e;return{get:function(){var e=c(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t[n]){e.next=2;break}return e.abrupt("return",void 0);case 2:if("string"!==typeof t[n]){e.next=4;break}return e.abrupt("return",t[n]);case 4:return e.abrupt("return",JSON.stringify(t[n]));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),set:function(){var e=c(u().mark((function e(n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[n]=r;case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),delete:function(){var e=c(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete t[n];case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};t.AggregateHandler=b,t.ConfigurationError=L,t.DEFAULT_SCOPES=_,t.EVENTS=y,t.InMemoryStorage=R,t.InvalidResponseError=O,t.NotImplementedError=M,t.OidcProviderError=F,t.PREFERRED_SIGNING_ALG=g,t.REFRESH_BEFORE_EXPIRATION_SECONDS=5,t.SOLID_CLIENT_AUTHN_KEY_PREFIX="solidClientAuthn:",t.StorageUtility=I,t.StorageUtilityGetResponse=Y,t.StorageUtilityMock=Q,t.USER_SESSION_PREFIX="solidClientAuthenticationUser",t.buildAuthenticatedFetch=function(e,t,n){return X.apply(this,arguments)},t.buildProxyHandler=function(e,t){return{get:function(n,r,i){if(!Object.getOwnPropertyNames(h.EventEmitter).includes(r)&&Object.getOwnPropertyNames(e).includes(r))throw new Error("".concat(t,": [").concat(r,"] is not supported"));return Reflect.get(n,r,i)}}},t.createDpopHeader=N,t.determineSigningAlg=function(e,t){var n;return null!==(n=t.find((function(t){return e.includes(t)})))&&void 0!==n?n:null},t.fetchJwks=w,t.generateDpopKeyPair=function(){return B.apply(this,arguments)},t.getSessionIdFromOauthState=function(e,t){return T.apply(this,arguments)},t.getWebidFromTokenPayload=function(e,t,n,r){return k.apply(this,arguments)},t.handleRegistration=function(e,t,n,r){return A.apply(this,arguments)},t.isSupportedTokenType=function(e){return"string"===typeof e&&["DPoP","Bearer"].includes(e)},t.isValidRedirectUrl=function(e){try{return""===new URL(e).hash}catch(t){return!1}},t.loadOidcContextFromStorage=function(e,t,n){return C.apply(this,arguments)},t.mockStorage=$,t.mockStorageUtility=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?new I($(e),$({})):new I($({}),$(e))},t.saveSessionInfoToStorage=function(e,t,n,r,i,a,o){return P.apply(this,arguments)}},8649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.default}});var r=f(n(5313)),i=f(n(5925)),a=f(n(3720)),o=f(n(3255)),s=f(n(2668)),u=f(n(1752)),l=f(n(3126)),c=f(n(2830)),d=f(n(6314));function f(e){return e&&e.__esModule?e:{default:e}}},4997:function(e,t){"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,a,o){return r((s=r(r(t,e),r(i,o)))<<(u=a)|s>>>32-u,n);var s,u}function a(e,t,n,r,a,o,s){return i(t&n|~t&r,e,t,a,o,s)}function o(e,t,n,r,a,o,s){return i(t&r|n&~r,e,t,a,o,s)}function s(e,t,n,r,a,o,s){return i(t^n^r,e,t,a,o,s)}function u(e,t,n,r,a,o,s){return i(n^(t|~r),e,t,a,o,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var a=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(a>>>4&15)+r.charAt(15&a),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;for(var i=1732584193,l=-271733879,c=-1732584194,d=271733878,f=0;f<e.length;f+=16){var h=i,p=l,v=c,m=d;i=a(i,l,c,d,e[f],7,-680876936),d=a(d,i,l,c,e[f+1],12,-389564586),c=a(c,d,i,l,e[f+2],17,606105819),l=a(l,c,d,i,e[f+3],22,-1044525330),i=a(i,l,c,d,e[f+4],7,-176418897),d=a(d,i,l,c,e[f+5],12,1200080426),c=a(c,d,i,l,e[f+6],17,-1473231341),l=a(l,c,d,i,e[f+7],22,-45705983),i=a(i,l,c,d,e[f+8],7,1770035416),d=a(d,i,l,c,e[f+9],12,-1958414417),c=a(c,d,i,l,e[f+10],17,-42063),l=a(l,c,d,i,e[f+11],22,-1990404162),i=a(i,l,c,d,e[f+12],7,1804603682),d=a(d,i,l,c,e[f+13],12,-40341101),c=a(c,d,i,l,e[f+14],17,-1502002290),i=o(i,l=a(l,c,d,i,e[f+15],22,1236535329),c,d,e[f+1],5,-165796510),d=o(d,i,l,c,e[f+6],9,-1069501632),c=o(c,d,i,l,e[f+11],14,643717713),l=o(l,c,d,i,e[f],20,-373897302),i=o(i,l,c,d,e[f+5],5,-701558691),d=o(d,i,l,c,e[f+10],9,38016083),c=o(c,d,i,l,e[f+15],14,-660478335),l=o(l,c,d,i,e[f+4],20,-405537848),i=o(i,l,c,d,e[f+9],5,568446438),d=o(d,i,l,c,e[f+14],9,-1019803690),c=o(c,d,i,l,e[f+3],14,-187363961),l=o(l,c,d,i,e[f+8],20,1163531501),i=o(i,l,c,d,e[f+13],5,-1444681467),d=o(d,i,l,c,e[f+2],9,-51403784),c=o(c,d,i,l,e[f+7],14,1735328473),i=s(i,l=o(l,c,d,i,e[f+12],20,-1926607734),c,d,e[f+5],4,-378558),d=s(d,i,l,c,e[f+8],11,-2022574463),c=s(c,d,i,l,e[f+11],16,1839030562),l=s(l,c,d,i,e[f+14],23,-35309556),i=s(i,l,c,d,e[f+1],4,-1530992060),d=s(d,i,l,c,e[f+4],11,1272893353),c=s(c,d,i,l,e[f+7],16,-155497632),l=s(l,c,d,i,e[f+10],23,-1094730640),i=s(i,l,c,d,e[f+13],4,681279174),d=s(d,i,l,c,e[f],11,-358537222),c=s(c,d,i,l,e[f+3],16,-722521979),l=s(l,c,d,i,e[f+6],23,76029189),i=s(i,l,c,d,e[f+9],4,-640364487),d=s(d,i,l,c,e[f+12],11,-421815835),c=s(c,d,i,l,e[f+15],16,530742520),i=u(i,l=s(l,c,d,i,e[f+2],23,-995338651),c,d,e[f],6,-198630844),d=u(d,i,l,c,e[f+7],10,1126891415),c=u(c,d,i,l,e[f+14],15,-1416354905),l=u(l,c,d,i,e[f+5],21,-57434055),i=u(i,l,c,d,e[f+12],6,1700485571),d=u(d,i,l,c,e[f+3],10,-1894986606),c=u(c,d,i,l,e[f+10],15,-1051523),l=u(l,c,d,i,e[f+1],21,-2054922799),i=u(i,l,c,d,e[f+8],6,1873313359),d=u(d,i,l,c,e[f+15],10,-30611744),c=u(c,d,i,l,e[f+6],15,-1560198380),l=u(l,c,d,i,e[f+13],21,1309151649),i=u(i,l,c,d,e[f+4],6,-145523070),d=u(d,i,l,c,e[f+11],10,-1120210379),c=u(c,d,i,l,e[f+2],15,718787259),l=u(l,c,d,i,e[f+9],21,-343485551),i=r(i,h),l=r(l,p),c=r(c,v),d=r(d,m)}return[i,l,c,d]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(n(t)),i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))};t.default=l},4789:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},2668:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},6314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(3126))&&r.__esModule?r:{default:r};var a=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=a},2020:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},4726:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};var r=new Uint8Array(16)},58:function(e,t){"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var a=unescape(encodeURIComponent(e));e=[];for(var o=0;o<a.length;++o)e.push(a.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,u=Math.ceil(s/16),l=new Array(u),c=0;c<u;++c){for(var d=new Uint32Array(16),f=0;f<16;++f)d[f]=e[64*c+4*f]<<24|e[64*c+4*f+1]<<16|e[64*c+4*f+2]<<8|e[64*c+4*f+3];l[c]=d}l[u-1][14]=8*(e.length-1)/Math.pow(2,32),l[u-1][14]=Math.floor(l[u-1][14]),l[u-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<u;++h){for(var p=new Uint32Array(80),v=0;v<16;++v)p[v]=l[h][v];for(var m=16;m<80;++m)p[m]=r(p[m-3]^p[m-8]^p[m-14]^p[m-16],1);for(var g=i[0],y=i[1],_=i[2],b=i[3],w=i[4],x=0;x<80;++x){var k=Math.floor(x/20),S=r(g,5)+n(k,y,_,b)+w+t[k]+p[x]>>>0;w=b,b=_,_=r(y,30)>>>0,y=g,g=S}i[0]=i[0]+g>>>0,i[1]=i[1]+y>>>0,i[2]=i[2]+_>>>0,i[3]=i[3]+b>>>0,i[4]=i[4]+w>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};t.default=i},2830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var r,i=(r=n(3126))&&r.__esModule?r:{default:r};for(var a=[],o=0;o<256;++o)a.push((o+256).toString(16).slice(1));function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}var u=function(e){var t=s(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);if(!(0,i.default)(t))throw TypeError("Stringified UUID is invalid");return t};t.default=u},5313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,a,o=(r=n(4726))&&r.__esModule?r:{default:r},s=n(2830);var u=0,l=0;var c=function(e,t,n){var r=t&&n||0,c=t||new Array(16),d=(e=e||{}).node||i,f=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==f){var h=e.random||(e.rng||o.default)();null==d&&(d=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=a=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:l+1,m=p-u+(v-l)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||p>u)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,l=v,a=f;var g=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;c[r++]=g>>>24&255,c[r++]=g>>>16&255,c[r++]=g>>>8&255,c[r++]=255&g;var y=p/4294967296*1e4&268435455;c[r++]=y>>>8&255,c[r++]=255&y,c[r++]=y>>>24&15|16,c[r++]=y>>>16&255,c[r++]=f>>>8|128,c[r++]=255&f;for(var _=0;_<6;++_)c[r+_]=d[_];return t||(0,s.unsafeStringify)(c)};t.default=c},5925:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4020)),i=a(n(4997));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v3",48,i.default);t.default=o},4020:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,o,s){var u;if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"===typeof r&&(r=(0,a.default)(r)),16!==(null===(u=r)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),(l=n(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,o){s=s||0;for(var c=0;c<16;++c)o[s+c]=l[c];return o}return(0,i.unsafeStringify)(l)}try{r.name=e}catch(u){}return r.DNS=o,r.URL=s,r};var r,i=n(2830),a=(r=n(6314))&&r.__esModule?r:{default:r};var o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=o;var s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},3720:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4789)),i=o(n(4726)),a=n(2830);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();var o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return(0,a.unsafeStringify)(o)};t.default=s},3255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4020)),i=a(n(58));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v5",80,i.default);t.default=o},3126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2020))&&r.__esModule?r:{default:r};var a=function(e){return"string"===typeof e&&i.default.test(e)};t.default=a},1752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(3126))&&r.__esModule?r:{default:r};var a=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=a},9945:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(4704).default,o=n(861).default,s=n(8416).default,u=n(2122).default,l=n(7424).default,c=n(9728).default,d=n(6690).default,f=n(1655).default,h=n(6389).default,p=n(3496).default,v=n(7478),m=n(4533),g=n(3181),y=n(1322),_=n(1210),b=n(4255);function w(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var x=w(b);m.dataset;var k="https://inrupt.com/.well-known/sdk-local-node/",S=Object.freeze;function E(e){return e.substring(0,k.length)===k}function A(e){return e.substring(k.length)}function T(e){return"string"===typeof e&&"_:"===e.substring(0,2)}function C(e){return e.substring(2)}function P(e){return"_:".concat(e.value)}function I(e){return"object"===typeof e&&"object"===typeof e.internal_resourceInfo}function R(e){var t=e;return"object"===typeof t&&"object"===typeof t.internal_resourceInfo&&"object"===typeof t.internal_resourceInfo.linkedResources}function L(e){var t=e;return"object"===typeof t.internal_changeLog&&Array.isArray(t.internal_changeLog.additions)&&Array.isArray(t.internal_changeLog.deletions)}var M=function(e){f(n,e);var t=h(n);function n(){return d(this,n),t.apply(this,arguments)}return c(n)}(p(Error));function O(e){return"string"===typeof e?e:e.value}var F={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function D(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&null}function N(e){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;var t=U(e),n=l(t,2),r=n[0],i=n[1],a=r.split(":"),o=l(a,3),s=o[0],u=o[1],c=o[2],d=Number.parseInt(s,10),f=Number.parseInt(u,10),h=c.split("."),p=l(h,2),v=p[0],m=p[1],g=Number.parseInt(v,10),y=m?Number.parseInt(m,10):void 0;f>=60&&(d+=1,f-=60);var _={hour:d,minute:f,second:g};if("number"===typeof y&&(_.millisecond=y),"string"===typeof i){var b=z(i),w=l(b,2),x=w[0],k=w[1];if("number"!==typeof x||x>24||"number"!==typeof k||k>59)return null;_.timezoneHourOffset=x,_.timezoneMinuteOffset=k}return _}function j(e){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;var t=e.split("T"),n=l(t,2),r=n[0],i=n[1],a="-"===r.charAt(0)?[-1,r.substring(1)]:[1,r],o=l(a,2),s=o[0],u=o[1].split("-"),c=l(u,3),d=c[0],f=c[1],h=c[2],p=Number.parseInt(d,10)*s,v=Number.parseInt(f,10)-1,m=Number.parseInt(h,10),g=U(i),y=l(g,2),_=y[0],b=y[1],w="string"===typeof b?z(b):[0,0],x=l(w,2),k=x[0],S=x[1],E=_.split(":"),A=l(E,3),T=A[0],C=A[1],P=A[2],I=Number.parseInt(T,10)+k,R=Number.parseInt(C,10)+S,L=P.split("."),M=l(L,2),O=M[0],F=M[1],D=Number.parseInt(O,10),N=F?Number.parseInt(F,10):0,j=new Date(Date.UTC(p,v,m,I,R,D,N));return p>=0&&p<100&&j.setUTCFullYear(j.getUTCFullYear()-1900),j}function B(e){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;var t=e,n="-"===t.charAt(0)?[-1,t.substring(1)]:[1,t],r=l(n,2),i=r[0],a=r[1].split("-"),o=l(a,3),s=o[0],u=o[1],c=o[2],d=c.length>2?c.substring(0,2):c,f=Number.parseInt(s,10)*i,h=Number.parseInt(u,10)-1,p=Number.parseInt(d,10),v=new Date(Date.UTC(f,h,p,12));return f>=0&&f<100&&v.setUTCFullYear(v.getUTCFullYear()-1900),v}function U(e){if(e.endsWith("Z"))return[e.substring(0,e.length-1),"Z"];var t=e.split("+"),n=e.split("-");return 1===t.length&&1===n.length?[t[0],void 0]:t.length>n.length?[t[0],"+".concat(t[1])]:[n[0],"-".concat(n[1])]}function z(e){if("Z"===e)return[0,0];var t="+"===e.charAt(0)?1:-1,n=e.substring(1).split(":"),r=l(n,2),i=r[0],a=r[1];return[Number.parseInt(i,10)*t,Number.parseInt(a,10)*t]}function V(e){var t=Number.parseFloat(e);return Number.isNaN(t)?null:t}function Z(e){var t=Number.parseInt(e,10);return Number.isNaN(t)?null:t}function H(e){return e.toLowerCase()}function W(e){return G(e)&&"NamedNode"===e.termType}function G(e){return null!==e&&"object"===typeof e&&"string"===typeof e.termType&&"string"===typeof e.value&&"function"===typeof e.equals}function q(e){return W(e)&&E(e.value)}function K(e){var t=O(e);if("function"!==typeof URL)return!0;try{new URL(t);return!0}catch(n){return!1}}function J(e,t){return Y.namedNode(X(A(e.value),t))}function X(e,t){if("function"!==typeof URL)throw new Error("The URL interface is not available, so an IRI cannot be determined.");var n=new URL(t);return n.hash=e,n.href}var Y=v;function Q(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!["NamedNode","DefaultGraph"].includes(t.graph.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(t.graph.termType,"] as their Graph node."));var i="DefaultGraph"===t.graph.termType?"default":t.graph.value,a=null!==(n=e.graphs[i])&&void 0!==n?n:{};return S(u(u({},e),{},{graphs:S(u(u({},e.graphs),{},s({},i,$(a,t,r))))}))}function $(e,t,n){var r;if(!["NamedNode","BlankNode"].includes(t.subject.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(t.subject.termType,"] as their Subject node."));var i="BlankNode"===t.subject.termType?"_:".concat(t.subject.value):t.subject.value,a=null!==(r=e[i])&&void 0!==r?r:{type:"Subject",url:i,predicates:{}};return S(u(u({},e),{},s({},i,function(e,t,n){return S(u(u({},e),{},{predicates:ee(e.predicates,t,n)}))}(a,t,n))))}function ee(e,t,n){var r;if(!["NamedNode"].includes(t.predicate.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(t.predicate.termType,"] as their Predicate node."));var i=t.predicate.value,a=null!==(r=e[i])&&void 0!==r?r:{};return S(u(u({},e),{},s({},i,te(a,t,n))))}function te(e,t,n){var r,i,a,l,c,d,f,h;if("NamedNode"===t.object.termType){var p=S([].concat(o(null!==(r=e.namedNodes)&&void 0!==r?r:[]),[t.object.value]));return S(u(u({},e),{},{namedNodes:p}))}if("Literal"===t.object.termType){if(t.object.datatype.value===F.langString){var v=t.object.language.toLowerCase(),m=S([].concat(o(null!==(a=null===(i=e.langStrings)||void 0===i?void 0:i[v])&&void 0!==a?a:[]),[t.object.value])),g=S(u(u({},null!==(l=e.langStrings)&&void 0!==l?l:{}),{},s({},v,m)));return S(u(u({},e),{},{langStrings:g}))}var y=S([].concat(o(null!==(d=null===(c=e.literals)||void 0===c?void 0:c[t.object.datatype.value])&&void 0!==d?d:[]),[t.object.value])),_=S(u(u({},null!==(f=e.literals)&&void 0!==f?f:{}),{},s({},t.object.datatype.value,y)));return S(u(u({},e),{},{literals:_}))}if("BlankNode"===t.object.termType){var b=ne(t.object,n),w=S([].concat(o(null!==(h=e.blankNodes)&&void 0!==h?h:[]),[b]));return S(u(u({},e),{},{blankNodes:w}))}throw new Error("Objects of type [".concat(t.object.termType,"] are not supported."))}function ne(e,t){var n,r;if(void 0===(null!==(n=t.chainBlankNodes)&&void 0!==n?n:[]).find((function(t){return t.equals(e)})))return P(e);var i=(null!==(r=t.otherQuads)&&void 0!==r?r:[]).filter((function(t){return t.subject.equals(e)})),a=i.filter((function(e){return!se(e.object)})).reduce((function(e,n){var r;if(!["NamedNode"].includes(n.predicate.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(n.predicate.termType,"] as their Predicate node."));var i=null!==(r=e[n.predicate.value])&&void 0!==r?r:{};return S(u(u({},e),{},s({},n.predicate.value,te(i,n,t))))}),{});return i.filter((function(e){return se(e.object)})).reduce((function(e,n){var r,i;if(!["NamedNode"].includes(n.predicate.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(n.predicate.termType,"] as their Predicate node."));var a=null!==(r=e[n.predicate.value])&&void 0!==r?r:{},l=null!==(i=a.blankNodes)&&void 0!==i?i:[];return S(u(u({},e),{},s({},n.predicate.value,u(u({},a),{},{blankNodes:[].concat(o(l),[ne(n.object,t)])}))))}),a)}function re(e){var t=e.map((function(e){return e.subject})).filter(se),n=e.map((function(e){return e.object})).filter(se);var r=[];return n.forEach((function(t){r.push.apply(r,o(oe(t,e)))})),t.concat(n).filter((function(t){if(r.some((function(e){return e.equals(t)})))return!1;var n,i=e.filter((function(e){return e.object.equals(t)})).map((function(e){return e.subject}));return i.length>0&&(n=i).every((function(e){return n.every((function(t){return e.equals(t)}))}))}))}function ie(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i=null!==(t=n.dataFactory)&&void 0!==t?t:v;return Object.keys(e.graphs).forEach((function(t){var a=e.graphs[t],s="default"===t?i.defaultGraph():i.namedNode(t);Object.keys(a).forEach((function(e){var t=a[e].predicates,u=T(e)?i.blankNode(C(e)):i.namedNode(e);r.push.apply(r,o(ae(t,u,s,n)))}))})),r}function ae(e,t,n){var r,i=[],a=null!==(r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).dataFactory)&&void 0!==r?r:v;return Object.keys(e).forEach((function(r){var s,u,l,c,d=a.namedNode(r),f=null!==(s=e[r].langStrings)&&void 0!==s?s:{},h=null!==(u=e[r].namedNodes)&&void 0!==u?u:[],p=null!==(l=e[r].literals)&&void 0!==l?l:{},v=null!==(c=e[r].blankNodes)&&void 0!==c?c:[];Object.keys(p).forEach((function(e){var r=a.namedNode(e);p[e].forEach((function(e){var o=a.literal(e,r);i.push(a.quad(t,d,o,n))}))})),Object.keys(f).forEach((function(e){f[e].forEach((function(r){var o=a.literal(r,e);i.push(a.quad(t,d,o,n))}))})),h.forEach((function(e){var r=a.namedNode(e);i.push(a.quad(t,d,r,n))})),v.forEach((function(e){if(T(e)){var r=a.blankNode(C(e));i.push(a.quad(t,d,r,n))}else{var s=a.blankNode(),u=a.quad(t,d,s,n),l=ae(e,s,n);i.push(u),i.push.apply(i,o(l))}}))})),i}function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(void 0!==n.find((function(t){return t.equals(e)})))return n;var r=t.filter((function(t){return t.subject.equals(e)&&se(t.object)})).map((function(e){return e.object}));if(0===r.length)return[];var i,s=[].concat(o(n),[e]),u=r.map((function(e){return oe(e,t,s)})),l=[],c=a(u);try{for(c.s();!(i=c.n()).done;){var d=i.value;l.push.apply(l,o(d))}}catch(f){c.e(f)}finally{c.f()}return l}function se(e){return"BlankNode"===e.termType}var ue=function(){var e=i(r().mark((function e(t,i){var a,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:e.next=8;break;case 5:return a=e.sent,o=a.default,e.abrupt("return",o(t,i));case 8:return s=n(4255),e.abrupt("return",s(t,i));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function le(e){var t,n,r,i,a,o=null!==(n=null===(t=e.headers.get("Content-Type"))||void 0===t?void 0:t.split(";"))&&void 0!==n?n:[],s=o.length>0&&["text/turtle","application/ld+json"].includes(o[0]),u={sourceIri:e.url,isRawData:!s,contentLocation:null!==(r=e.headers.get("Content-Location"))&&void 0!==r?r:void 0,contentType:null!==(i=e.headers.get("Content-Type"))&&void 0!==i?i:void 0,linkedResources:{},location:null!==(a=e.headers.get("Location"))&&void 0!==a?a:void 0},l=e.headers.get("Link");if(l){var c=g.parse(l),d=c.get("rel","acl");1===d.length&&(u.aclUrl=new URL(d[0].uri,u.sourceIri).href),u.linkedResources=c.refs.reduce((function(e,t){var n,r;return null!==(n=e[r=t.rel])&&void 0!==n||(e[r]=[]),e[t.rel].push(new URL(t.uri,u.sourceIri).href),e}),u.linkedResources)}var f=e.headers.get("WAC-Allow");return f&&(u.permissions=function(e){function t(e){var t=e.split(" ");return t.includes("write")?{read:t.includes("read"),append:!0,write:!0,control:t.includes("control")}:{read:t.includes("read"),append:t.includes("append"),write:!1,control:t.includes("control")}}function n(e,t){var n=e.split(",").map((function(e){return e.split("=")})).filter((function(e){return 2===e.length&&e[0].trim()===t}));if(1!==n.length)return"";var r=n[0][1].trim();return'"'!==r.charAt(0)||'"'!==r.charAt(r.length-1)?"":r.substring(1,r.length-1)}return{user:t(n(e,"user")),public:t(n(e,"public"))}}(f)),u}function ce(e){return"function"===typeof e.slice?Object.assign(e.slice(),u({},e)):u({},e)}function de(e){return!e.ok}var fe={Authorization:"http://www.w3.org/ns/auth/acl#Authorization",AuthenticatedAgent:"http://www.w3.org/ns/auth/acl#AuthenticatedAgent",accessTo:"http://www.w3.org/ns/auth/acl#accessTo",agent:"http://www.w3.org/ns/auth/acl#agent",agentGroup:"http://www.w3.org/ns/auth/acl#agentGroup",agentClass:"http://www.w3.org/ns/auth/acl#agentClass",default:"http://www.w3.org/ns/auth/acl#default",defaultForNew:"http://www.w3.org/ns/auth/acl#defaultForNew",mode:"http://www.w3.org/ns/auth/acl#mode",origin:"http://www.w3.org/ns/auth/acl#origin"},he={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},pe={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},ve={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"},me={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",memberAccessControl:"http://www.w3.org/ns/solid/acp#memberAccessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},ge={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},ye={publicKey:"https://w3id.org/security#publicKey"},_e={storage:"http://www.w3.org/ns/pim/space#storage"},be={fetch:ue};function we(e){return xe.apply(this,arguments)}function xe(){return xe=i(r().mark((function e(t){var n,i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:u(u({},be),{},{ignoreAuthenticationErrors:!1}),a=u(u({},be),n),e.next=4,a.fetch(t,{method:"HEAD"});case 4:return o=e.sent,e.abrupt("return",ke(o,{ignoreAuthenticationErrors:null!==(i=n.ignoreAuthenticationErrors)&&void 0!==i&&i}));case 6:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreAuthenticationErrors:!1};if(de(e)&&(!function(e){return 401===e.status||403===e.status}(e)||!t.ignoreAuthenticationErrors))throw new Ie("Fetching the metadata of the Resource at [".concat(e.url,"] failed: [").concat(e.status,"] [").concat(e.statusText,"]."),e);return{internal_resourceInfo:le(e)}}function Se(e){return(I(e)?Ae(e):O(e)).endsWith("/")}function Ee(e){var t;return null!==(t=e.internal_resourceInfo.contentType)&&void 0!==t?t:null}function Ae(e){return I(e)?e.internal_resourceInfo.sourceIri:null}var Te=Ae;function Ce(e){var t;if(!R(e))return null;var n=null!==(t=Pe(e)["http://www.w3.org/ns/solid/terms#podOwner"])&&void 0!==t?t:[];return 1===n.length?n[0]:null}function Pe(e){return e.internal_resourceInfo.linkedResources}var Ie=function(e){f(n,e);var t=h(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).response=r,i}return c(n,[{key:"statusCode",get:function(){return this.response.status}},{key:"statusText",get:function(){return this.response.statusText}}]),n}(M),Re=function(){var e=i(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t);case 2:return n=e.sent,e.t0=void 0,e.t1=t,e.next=7,n.json();case 7:return e.t2=e.sent,e.abrupt("return",{contextUrl:e.t0,documentUrl:e.t1,document:e.t2});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=[],t=[],a=[];return{onQuad:function(t){e.push(t)},onError:function(e){a.push(e)},onComplete:function(e){t.push(e)},parse:function(){var o=i(r().mark((function i(o,s){var u,l,c;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.e(180),n.e(670)]).then(n.t.bind(n,2180,23));case 2:return u=r.sent.default,l=[],r.prev=4,r.next=7,u.toRDF(JSON.parse(o),{base:Ae(s),documentLoader:Re});case 7:c=r.sent,l=Me(c),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),a.forEach((function(e){return e(r.t0)}));case 14:l.forEach((function(t){e.forEach((function(e){return e(t)}))})),t.forEach((function(e){return e()}));case 16:case"end":return r.stop()}}),i,null,[[4,11]])})));return function(e,t){return o.apply(this,arguments)}}()}};function Me(e){return e.map((function(e){return Y.quad(Oe(e.subject),Oe(e.predicate),Oe(e.object),Oe(e.graph))}))}function Oe(e){switch(e.termType){case"NamedNode":return Y.namedNode(e.value);case"BlankNode":return Y.blankNode(e.value.substr(2));case"Literal":return Y.literal(e.value,e.language||e.datatype);case"DefaultGraph":return Y.defaultGraph();default:throw Error("unknown termType: ".concat(e.termType))}}var Fe=function(){var e=[],t=[],n=[];return{onQuad:function(t){e.push(t)},onError:function(e){n.push(e)},onComplete:function(e){t.push(e)},parse:function(){var a=i(r().mark((function i(a,o){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,De(Ae(o));case 2:r.sent.parse(a,(function(r,i){r?n.forEach((function(e){return e(r)})):i?e.forEach((function(e){return e(i)})):t.forEach((function(e){return e()}))}));case 4:case"end":return r.stop()}}),i)})));return function(e,t){return a.apply(this,arguments)}}()}};function De(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new y.Parser({format:"text/turtle",baseIRI:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return Be.apply(this,arguments)}function Be(){return(Be=i(r().mark((function e(t){var n,i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"text/turtle",n=new y.Writer({format:"text/turtle"}),i=t.map((function(e){return Y.quad(e.subject,e.predicate,e.object,void 0)})),n.addQuads(i),a=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))})),e.next=7,a;case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ue={acl:"http://www.w3.org/ns/auth/acl#",acp:"http://www.w3.org/ns/solid/acp#",cc:"http://creativecommons.org/ns#",cert:"http://www.w3.org/ns/auth/cert#",csvw:"http://www.w3.org/ns/csvw#",current:"#",dc:"http://purl.org/dc/terms/",dcam:"http://purl.org/dc/dcam/",dcat:"http://www.w3.org/ns/dcat#",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",posixstat:"http://www.w3.org/ns/posix/stat#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",shacl:"http://www.w3.org/ns/shacl#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",solid:"http://www.w3.org/ns/solid/terms#",swapdoc:"http://www.w3.org/2000/10/swap/pim/doc#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",ws:"http://www.w3.org/ns/pim/space#",xsd:"http://www.w3.org/2001/XMLSchema#"},ze=m.dataset;function Ve(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(null!==(n=null===(t=r.datasetFactory)||void 0===t?void 0:t.dataset)&&void 0!==n?n:ze)(ie(e,r))}function Ze(){return(Ze=i(r().mark((function e(t,n){var i,o,s,l,c,d,f,h,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=u({},n),o=i.prefixes,s=void 0===o?Ue:o,l=i.thing,c=new y.Writer({format:"application/turtle",prefixes:s}),d=l?new y.NamedNode(l):void 0,f=a(Ve(t).match(d));try{for(f.s();!(h=f.n()).done;)p=h.value,c.addQuad(p)}catch(r){f.e(r)}finally{f.f()}return e.abrupt("return",new Promise((function(e,t){c.end((function(n,r){n?t(n):e(r)}))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var He=Object.freeze({__proto__:null,getJsonLdParser:Le,getTurtleParser:Fe,solidDatasetAsTurtle:function(e,t){return Ze.apply(this,arguments)}}),We={fetch:ue},Ge=["Slug","If-None-Match","Content-Type"];function qe(e){return Ge.some((function(t){return void 0!==e[t]}))}function Ke(e){return Je.apply(this,arguments)}function Je(){return Je=i(r().mark((function e(t){var n,i,a,o,s,l,c,d=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:We,i=u(u({},We),n),a=O(t),e.next=5,i.fetch(a,i.init);case 5:if(!de(o=e.sent)){e.next=8;break}throw new Ie("Fetching the File failed: [".concat(o.status,"] [").concat(o.statusText,"]."),o);case 8:return s=le(o),e.next=11,o.blob();case 11:return l=e.sent,c=Object.assign(l,{internal_resourceInfo:s}),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}function Xe(){return Xe=i(r().mark((function e(t){var n,i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:We,i=u(u({},We),n),a=I(t)?O(Te(t)):O(t),e.next=5,i.fetch(a,u(u({},i.init),{},{method:"DELETE"}));case 5:if(!de(o=e.sent)){e.next=8;break}throw new Ie("Deleting the file at [".concat(a,"] failed: [").concat(o.status,"] [").concat(o.statusText,"]."),o);case 8:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}function Ye(){return Ye=i(r().mark((function e(t,n){var i,a,o,s,u,l,c,d=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>2&&void 0!==d[2]?d[2]:We,a=O(t),e.next=4,tt(a,n,"POST",i);case 4:if(!de(o=e.sent)){e.next=7;break}throw new Ie("Saving the file in [".concat(t,"] failed: [").concat(o.status,"] [").concat(o.statusText,"]."),o);case 7:if(null!==(s=o.headers.get("Location"))){e.next=10;break}throw new Error("Could not determine the location of the newly saved file.");case 10:return u=new URL(s,new URL(a).origin).href,l=ce(n),c={internal_resourceInfo:{isRawData:!0,sourceIri:u,contentType:rt(n,i.contentType)}},e.abrupt("return",Object.assign(l,c));case 14:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Qe(e,t){return $e.apply(this,arguments)}function $e(){return $e=i(r().mark((function e(t,n){var i,a,o,s,u,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]?l[2]:We,a=O(t),e.next=4,tt(a,n,"PUT",i);case 4:if(!de(o=e.sent)){e.next=7;break}throw new Ie("Overwriting the file at [".concat(a,"] failed: [").concat(o.status,"] [").concat(o.statusText,"]."),o);case 7:return s=ce(n),(u=le(o)).sourceIri=a,u.isRawData=!0,e.abrupt("return",Object.assign(s,{internal_resourceInfo:u}));case 12:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function et(e){if("undefined"===typeof e)return{};var t,n={};return t=e,Array.isArray(t)?e.forEach((function(e){var t=l(e,2),r=t[0],i=t[1];n[r]=i})):!function(e){return"function"===typeof e.forEach}(e)?n=e:e.forEach((function(e,t){n[t]=e})),n}function tt(e,t,n,r){return nt.apply(this,arguments)}function nt(){return(nt=i(r().mark((function e(t,n,i,a){var o,s,l,c,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=u(u({},We),a),!qe(c=et(null!==(s=null===(o=l.init)||void 0===o?void 0:o.headers)&&void 0!==s?s:{}))){e.next=4;break}throw new Error("No reserved header (".concat(Ge.join(", "),") should be set in the optional RequestInit."));case 4:return void 0!==l.slug&&(c.Slug=l.slug),c["Content-Type"]=rt(n,a.contentType),d=O(t),e.abrupt("return",l.fetch(d,u(u({},l.init),{},{headers:c,method:i,body:n})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e,t){if("string"===typeof t)return t;var n="object"===typeof e&&null!==e&&"string"===typeof e.type&&e.type.length>0?e.type:void 0;return null!==n&&void 0!==n?n:"application/octet-stream"}function it(e){var t,n,r,i,a,o,s,u;if(W(e))return"<".concat(e.value,"> (URL)");if(function(e){return G(e)&&"Literal"===e.termType}(e)){if(!W(e.datatype))return"[".concat(e.value,"] (RDF/JS Literal of unknown type)");var l;switch(e.datatype.value){case F.boolean:return l=null!==(n=null===(t=D(e.value))||void 0===t?void 0:t.valueOf())&&void 0!==n?n:"Invalid data: `".concat(e.value,"`"),"".concat(l," (boolean)");case F.dateTime:return l=null!==(i=null===(r=j(e.value))||void 0===r?void 0:r.toUTCString())&&void 0!==i?i:"Invalid data: `".concat(e.value,"`"),"".concat(l," (datetime)");case F.decimal:return l=null!==(o=null===(a=V(e.value))||void 0===a?void 0:a.toString())&&void 0!==o?o:"Invalid data: `".concat(e.value,"`"),"".concat(l," (decimal)");case F.integer:return l=null!==(u=null===(s=Z(e.value))||void 0===s?void 0:s.toString())&&void 0!==u?u:"Invalid data: `".concat(e.value,"`"),"".concat(l," (integer)");case F.langString:return'"'.concat(e.value,'" (').concat(e.language," string)");case F.string:return'"'.concat(e.value,'" (string)');default:return"[".concat(e.value,"] (RDF/JS Literal of type: `").concat(e.datatype.value,"`)")}}return"BlankNode"===e.termType?"[".concat(e.value,"] (RDF/JS BlankNode)"):"Quad"===e.termType?"??? (nested RDF* Quad)":"Variable"===e.termType?"?".concat(e.value," (RDF/JS Variable)"):e}function at(e){if(!Pt(e))throw new Ot(e)}function ot(e,t){var n=L(e)?e.internal_changeLog:{additions:[],deletions:[]},r=t.filter((function(e){return!ut(e)})).reduce((function(e,t){var n=l(e,2),r=n[0],i=n[1];return"undefined"!==typeof r.find((function(e){return e.equals(t)}))?[r.filter((function(e){return!e.equals(t)})),i]:[r,i.concat(t)]}),[n.additions,n.deletions]),i=l(r,2),a=i[0],o=i[1];return S(u(u({},e),{},{internal_changeLog:{additions:a,deletions:o}}))}function st(e){return L(e)?e:S(u(u({},e),{},{internal_changeLog:{additions:[],deletions:[]}}))}function ut(e){return"BlankNode"===e.subject.termType||"BlankNode"===e.object.termType}function lt(e,t){var n,r,i;if(at(e),!K(t))throw new Ft(t);var a=O(t),o=null!==(i=null===(r=null===(n=e.predicates[a])||void 0===n?void 0:n.namedNodes)||void 0===r?void 0:r[0])&&void 0!==i?i:null;return null===o?null:E(o)?"#".concat(A(o)):o}var ct=lt;function dt(e,t){var n,r,i;if(at(e),!K(t))throw new Ft(t);var a=O(t);return null!==(i=null===(r=null===(n=e.predicates[a])||void 0===n?void 0:n.namedNodes)||void 0===r?void 0:r.map((function(e){return E(e)?"#".concat(A(e)):e})))&&void 0!==i?i:[]}var ft=dt;function ht(e,t,n){var r,i;if(at(e),!K(t))throw new Ft(t);var a=O(t),o=null!==(i=null===(r=e.predicates[a])||void 0===r?void 0:r.langStrings)&&void 0!==i?i:{},s=Object.keys(o).find((function(e){return e.toLowerCase()===n.toLowerCase()&&Array.isArray(o[e])&&o[e].length>0}));return"string"===typeof s?o[s][0]:null}function pt(e,t,n){var r,i;if(at(e),!K(t))throw new Ft(t);var a=O(t),s=null!==(i=null===(r=e.predicates[a])||void 0===r?void 0:r.langStrings)&&void 0!==i?i:{},u=Object.keys(s).find((function(e){return e.toLowerCase()===n.toLowerCase()&&Array.isArray(s[e])&&s[e].length>0}));return"string"===typeof u?o(s[u]):[]}function vt(e,t){return at(e),kt(e,t,F.string)}function mt(e,t){var n=ct(e,t);return null===n?null:Y.namedNode(n)}function gt(e,t){return ft(e,t).map((function(e){return Y.namedNode(e)}))}function yt(e,t){var n,r,i,a;if(at(e),!K(t))throw new Ft(t);var o=O(t),s=null!==(r=null===(n=e.predicates[o])||void 0===n?void 0:n.langStrings)&&void 0!==r?r:{},u=Object.keys(s);if(u.length>0){var l=u.find((function(e){return Array.isArray(s[e])&&s[e].length>0}));if("string"===typeof l)return Y.literal(s[l][0],l)}var c=null!==(a=null===(i=e.predicates[o])||void 0===i?void 0:i.literals)&&void 0!==a?a:{},d=Object.keys(c);if(d.length>0){var f=d.find((function(e){return Array.isArray(c[e])&&c[e].length>0}));if("string"===typeof f)return Y.literal(c[f][0],Y.namedNode(f))}return null}function _t(e,t){var n,r,i,a;if(at(e),!K(t))throw new Ft(t);for(var o=O(t),s=[],u=null!==(r=null===(n=e.predicates[o])||void 0===n?void 0:n.langStrings)&&void 0!==r?r:{},l=Object.keys(u),c=function(){var e=f[d],t=u[e].map((function(t){return Y.literal(t,e)}));s=s.concat(t)},d=0,f=l;d<f.length;d++)c();for(var h=null!==(a=null===(i=e.predicates[o])||void 0===i?void 0:i.literals)&&void 0!==a?a:{},p=Object.keys(h),v=function(){var e=g[m],t=h[e],n=Y.namedNode(e),r=t.map((function(e){return Y.literal(e,n)}));s=s.concat(r)},m=0,g=p;m<g.length;m++)v();return s}function bt(e,t){var n,r;at(e);var i=mt(e,t);if(null!==i)return i;var a=yt(e,t);if(null!==a)return a;var o=O(t),s=null!==(r=null===(n=e.predicates[o])||void 0===n?void 0:n.blankNodes)&&void 0!==r?r:[];if(s.length>0){var u=T(s[0])?C(s[0]):void 0;return Y.blankNode(u)}return null}function wt(e,t){var n,r;at(e);var i=gt(e,t),a=_t(e,t),o=O(t),s=(null!==(r=null===(n=e.predicates[o])||void 0===n?void 0:n.blankNodes)&&void 0!==r?r:[]).map((function(e){var t=T(e)?C(e):void 0;return Y.blankNode(t)}));return i.concat(a).concat(s)}function xt(e,t,n){var r,i,a,o;if(!K(t))throw new Ft(t);var s=O(t);return null!==(o=null===(a=null===(i=null===(r=e.predicates[s])||void 0===r?void 0:r.literals)||void 0===i?void 0:i[n])||void 0===a?void 0:a[0])&&void 0!==o?o:null}function kt(e,t,n){var r,i,a;if(!K(t))throw new Ft(t);var s=O(t),u=null!==(a=null===(i=null===(r=e.predicates[s])||void 0===r?void 0:r.literals)||void 0===i?void 0:i[n])&&void 0!==a?a:[];return o(u)}function St(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!K(t))throw new Nt(t);var i="undefined"!==typeof r.scope?O(r.scope):"default",a=null!==(n=e.graphs[i])&&void 0!==n?n:{},o=O(t),s=a[E(o)&&R(e)?X(A(o),Ae(e)):o];return"undefined"===typeof s?null:s}function Et(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{acceptBlankNodes:!1},r="undefined"!==typeof n.scope?O(n.scope):"default",i=null!==(t=e.graphs[r])&&void 0!==t?t:{};return Object.values(i).filter((function(e){return!T(e.url)||n.acceptBlankNodes}))}function At(e,t){var n,r=Mt(t)&&R(e)?X(A(t.url),Ae(e)):t.url,i=e.graphs.default,a=S(u(u({},i),{},s({},r,S(u(u({},t),{},{url:r}))))),o=S(u(u({},e.graphs),{},{default:a})),c=Y.namedNode(r),d=null===(n=e.graphs.default[r])||void 0===n?void 0:n.predicates,f="undefined"!==typeof d?ae(d,c,Y.defaultGraph()):[],h=ae(t.predicates,c,Y.defaultGraph());return function(e,t){var n=L(e)?e.internal_changeLog:{additions:[],deletions:[]},r=t.filter((function(e){return!ut(e)})).reduce((function(e,t){var n=l(e,2),r=n[0],i=n[1];return"undefined"!==typeof i.find((function(e){return e.equals(t)}))?[r,i.filter((function(e){return!e.equals(t)}))]:[r.concat(t),i]}),[n.additions,n.deletions]),i=l(r,2),a=i[0],o=i[1];return S(u(u({},e),{},{internal_changeLog:{additions:a,deletions:o}}))}(ot(S(u(u({},e),{},{graphs:o})),f),h)}function Tt(e,t){var n,r;r=W(t)?t.value:"string"===typeof t?E(t)&&R(e)?X(A(t),Ae(e)):t:Mt(t)?t.url:Rt(t);var i=e.graphs.default,a=u({},i);delete a[r];var o=S(u(u({},e.graphs),{},{default:S(a)})),s=Y.namedNode(r),l=null===(n=e.graphs.default[r])||void 0===n?void 0:n.predicates,c="undefined"!==typeof l?ae(l,s,Y.defaultGraph()):[];return ot(S(u(u({},e),{},{graphs:o})),c)}function Ct(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"!==typeof t.url){var n=t.url;if(!K(n))throw new Nt(n);return S({type:"Subject",predicates:S({}),url:n})}var r,i=null!==(e=t.name)&&void 0!==e?e:jt(),a=(r=i,"".concat(k).concat(r));return S({type:"Subject",predicates:S({}),url:a})}function Pt(e){return"object"===typeof e&&null!==e&&"string"===typeof e.type&&"Subject"===e.type}function It(e,t){if(Mt(e)){if("undefined"===typeof t)throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return X(A(e.url),t)}return e.url}var Rt=It;function Lt(e){var t="";Mt(e)?t+="## Thing (no URL yet \u2014 identifier: `#".concat(A(e.url),"`)\n"):t+="## Thing: ".concat(e.url,"\n");var n=Object.keys(e.predicates);if(0===n.length)t+="\n<empty>\n";else{var r,i=a(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;t+="\nProperty: ".concat(o,"\n"),t+=wt(e,o).reduce((function(e,t){return"".concat(e,"- ").concat(it(t),"\n")}),"")}}catch(s){i.e(s)}finally{i.f()}}return t}function Mt(e){return E(e.url)}var Ot=function(e){f(n,e);var t=h(n);function n(e){var r;d(this,n);var i="Expected a Thing, but received: [".concat(e,"].");return(r=t.call(this,i)).receivedValue=e,r}return c(n)}(M),Ft=function(e){f(n,e);var t=h(n);function n(e){var r;d(this,n);var i=W(e)?e.value:e,a="Expected a valid URL to identify a property, but received: [".concat(i,"].");return(r=t.call(this,a)).receivedProperty=i,r}return c(n)}(M),Dt=function(e){f(n,e);var t=h(n);function n(e){var r;d(this,n);var i=W(e)?e.value:e,a="Expected a valid URL value, but received: [".concat(i,"].");return(r=t.call(this,a)).receivedValue=i,r}return c(n)}(M),Nt=function(e){f(n,e);var t=h(n);function n(e){var r;d(this,n);var i=W(e)?e.value:e,a="Expected a valid URL to identify a Thing, but received: [".concat(i,"].");return(r=t.call(this,a)).receivedValue=i,r}return c(n)}(M),jt=function(){return _.v4()};function Bt(e){var t=new URL(e);return t.hash="",t.href}function Ut(){return S({type:"Dataset",graphs:{default:{}}})}function zt(e){return Vt.apply(this,arguments)}function Vt(){return Vt=i(r().mark((function e(t){var n,a,o,s,l,c,d,f,h=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:{},!de(t)){e.next=3;break}throw new Ie("Fetching the SolidDataset at [".concat(t.url,"] failed: [").concat(t.status,"] [").concat(t.statusText,"]."),t);case 3:if(a=ke(t),o=u({"text/turtle":Fe()},n.parsers),null!==(s=Ee(a))){e.next=8;break}throw new Error("Could not determine the content type of the Resource at [".concat(Ae(a),"]."));case 8:if(l=s.split(";")[0],"undefined"!==typeof(c=o[l])){e.next=12;break}throw new Error("The Resource at [".concat(Ae(a),"] has a MIME type of [").concat(l,"], but the only parsers available are for the following MIME types: [").concat(Object.keys(o).join(", "),"]."));case 12:return e.next=14,t.text();case 14:return d=e.sent,f=new Promise((function(e,t){var n=S({graphs:S({default:S({})}),type:"Dataset"}),o=[],l=[];c.onError((function(e){t(new Error("Encountered an error parsing the Resource at [".concat(Ae(a),"] with content type [").concat(s,"]: ").concat(e)))})),c.onQuad((function(e){l.push(e),"BlankNode"===e.subject.termType||"BlankNode"===e.object.termType?o.push(e):n=Q(n,e)})),c.onComplete(i(r().mark((function t(){var i,s,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:20,i=o.length<=20?re(o):[],s=o.filter((function(e){return i.every((function(t){return!t.equals(e.subject)}))})),n=s.reduce((function(e,t){return Q(e,t,{otherQuads:l,chainBlankNodes:i})}),n),c=S(u(u({},n),a)),e(c);case 6:case"end":return t.stop()}}),t)})))),c.parse(d,a)})),e.abrupt("return",f);case 17:case"end":return e.stop()}}),e)}))),Vt.apply(this,arguments)}function Zt(e){return Ht.apply(this,arguments)}function Ht(){return Ht=i(r().mark((function e(t){var n,i,a,o,s,l,c,d=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:be,t=O(t),a=u(u({},be),n),o=Object.keys(null!==(i=n.parsers)&&void 0!==i?i:{}),s=o.length>0?o.join(", "):"text/turtle",e.next=7,a.fetch(t,{headers:{Accept:s}});case 7:if(!de(l=e.sent)){e.next=10;break}throw new Ie("Fetching the Resource at [".concat(t,"] failed: [").concat(l.status,"] [").concat(l.statusText,"]."),l);case 10:return e.next=12,zt(l,n);case 12:return c=e.sent,e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)}))),Ht.apply(this,arguments)}function Wt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=i(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.internal_changeLog.deletions.length>0)){e.next=8;break}return e.t1="DELETE DATA {",e.next=4,je(t.internal_changeLog.deletions.map(on));case 4:e.t2=e.sent.trim(),e.t0=e.t1.concat.call(e.t1,e.t2,"};"),e.next=9;break;case 8:e.t0="";case 9:if(n=e.t0,!(t.internal_changeLog.additions.length>0)){e.next=18;break}return e.t4="INSERT DATA {",e.next=14,je(t.internal_changeLog.additions.map(on));case 14:e.t5=e.sent.trim(),e.t3=e.t4.concat.call(e.t4,e.t5,"};"),e.next=19;break;case 18:e.t3="";case 19:return i=e.t3,e.abrupt("return",{method:"PATCH",body:"".concat(n," ").concat(i),headers:{"Content-Type":"application/sparql-update"}});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(ie(t).map(on));case 2:return e.t0=e.sent,e.t1={"Content-Type":"text/turtle","If-None-Match":"*",Link:"<".concat(pe.Resource,'>; rel="type"')},e.abrupt("return",{method:"PUT",body:e.t0,headers:e.t1});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t){return Xt.apply(this,arguments)}function Xt(){return Xt=i(r().mark((function e(t,n){var i,a,o,s,l,c,d,f,h,p=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.length>2&&void 0!==p[2]?p[2]:be,t=O(t),a=u(u({},be),i),!$t(o=st(n),t)){e.next=10;break}return e.next=7,Wt(o);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,qt(o);case 12:e.t0=e.sent;case 13:return s=e.t0,e.next=16,a.fetch(t,s);case 16:if(!de(l=e.sent)){e.next=20;break}throw c=$t(o,t)?"The changes that were sent to the Pod are listed below.\n\n".concat(an(o)):"The SolidDataset that was sent to the Pod is listed below.\n\n".concat(rn(o)),new Ie("Storing the Resource at [".concat(t,"] failed: [").concat(l.status,"] [").concat(l.statusText,"].\n\n").concat(c),l);case 20:return d=u(u({},le(l)),{},{isRawData:!1}),f=S(u(u({},n),{},{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:d})),h=un(f),e.abrupt("return",h);case 24:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}function Yt(){return Yt=i(r().mark((function e(t){var n,i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:be,i=u(u({},be),n),a=I(t)?O(Ae(t)):O(t),e.next=5,i.fetch(a,{method:"DELETE"});case 5:if(!de(o=e.sent)){e.next=8;break}throw new Ie("Deleting the SolidDataset at [".concat(a,"] failed: [").concat(o.status,"] [").concat(o.statusText,"]."),o);case 8:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}function Qt(){return Qt=i(r().mark((function e(t){var n,i,a,o,s,l,c,d=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:be,t=(t=O(t)).endsWith("/")?t:"".concat(t,"/"),a=u(u({},be),n),e.t0=a,e.t1=t,!a.initialContent){e.next=12;break}return e.next=9,je(ie(a.initialContent).map(on));case 9:e.t2=e.sent,e.next=13;break;case 12:e.t2=void 0;case 13:return e.t3=e.t2,e.t4={Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:"<".concat(pe.BasicContainer,'>; rel="type"')},e.t5={method:"PUT",body:e.t3,headers:e.t4},e.next=18,e.t0.fetch.call(e.t0,e.t1,e.t5);case 18:if(!de(o=e.sent)){e.next=22;break}throw s=void 0===a.initialContent?"empty":"non-empty",new Ie("Creating the ".concat(s," Container at [").concat(t,"] failed: [").concat(o.status,"] [").concat(o.statusText,"]."),o);case 22:return l=le(o),c=S(u(u({},null!==(i=n.initialContent)&&void 0!==i?i:Ut()),{},{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:l})),e.abrupt("return",c);case 25:case"end":return e.stop()}}),e)}))),Qt.apply(this,arguments)}function $t(e,t){return L(e)&&I(e)&&"string"===typeof e.internal_resourceInfo.sourceIri&&(n=t,Bt(e.internal_resourceInfo.sourceIri)===Bt(n));var n}function en(){return en=i(r().mark((function e(t,n){var i,a,o,s,l,c,d,f,h,p,v=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.length>2&&void 0!==v[2]?v[2]:be,a=u(u({},be),i),t=O(t),e.next=5,je(ie(n).map(on));case 5:return o=e.sent,s={"Content-Type":"text/turtle",Link:"<".concat(pe.Resource,'>; rel="type"')},i.slugSuggestion&&(s.slug=i.slugSuggestion),e.next=10,a.fetch(t,{method:"POST",body:o,headers:s});case 10:if(!de(l=e.sent)){e.next=13;break}throw new Ie("Storing the Resource in the Container at [".concat(t,"] failed: [").concat(l.status,"] [").concat(l.statusText,"].\n\n")+"The SolidDataset that was sent to the Pod is listed below.\n\n".concat(rn(n)),l);case 13:if((c=le(l)).location){e.next=16;break}throw new Error("Could not determine the location of the newly saved SolidDataset.");case 16:try{d=new URL(c.location).href}catch(r){d=new URL(c.location,l.url).href}return f={internal_resourceInfo:{isRawData:!1,sourceIri:d}},h=S(u(u({},n),f)),p=un(h),e.abrupt("return",p);case 21:case"end":return e.stop()}}),e)}))),en.apply(this,arguments)}function tn(){return tn=i(r().mark((function e(t){var n,i,a,o,s,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:be,t=O(t),i=u(u({},be),n),a={"Content-Type":"text/turtle",Link:"<".concat(pe.BasicContainer,'>; rel="type"')},n.slugSuggestion&&(a.slug=n.slugSuggestion),e.next=7,i.fetch(t,{method:"POST",headers:a});case 7:if(!de(o=e.sent)){e.next=10;break}throw new Ie("Creating an empty Container in the Container at [".concat(t,"] failed: [").concat(o.status,"] [").concat(o.statusText,"]."),o);case 10:if((s=le(o)).location){e.next=13;break}throw new Error("Could not determine the location of the newly created Container.");case 13:return e.prev=13,l=new URL(s.location).toString(),e.abrupt("return",S(u(u({},Ut()),{},{internal_resourceInfo:u(u({},s),{},{sourceIri:l})})));case 18:e.prev=18,e.t0=e.catch(13);case 20:return e.abrupt("return",S(u(u({},Ut()),{},{internal_resourceInfo:u(u({},s),{},{sourceIri:new URL(s.location,o.url).href})})));case 21:case"end":return e.stop()}}),e,null,[[13,18]])}))),tn.apply(this,arguments)}function nn(){return nn=i(r().mark((function e(t){var n,i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:be,i=I(t)?O(Ae(t)):O(t),Se(t)){e.next=4;break}throw new Error("You're trying to delete the Container at [".concat(i,"], but Container URLs should end in a `/`. Are you sure this is a Container?"));case 4:return a=u(u({},be),n),e.next=7,a.fetch(i,{method:"DELETE"});case 7:if(!de(o=e.sent)){e.next=10;break}throw new Ie("Deleting the Container at [".concat(i,"] failed: [").concat(o.status,"] [").concat(o.statusText,"]."),o);case 10:case"end":return e.stop()}}),e)}))),nn.apply(this,arguments)}function rn(e){var t="";I(e)?t+="# SolidDataset: ".concat(Ae(e),"\n"):t+="# SolidDataset (no URL yet)\n";var n=Et(e);return 0===n.length?t+="\n<empty>\n":n.forEach((function(n){t+="\n".concat(Lt(n)),L(e)&&(t+="\n".concat(function(e,t){var n=Y.namedNode(t.url),r=e.internal_changeLog.additions.reduce((function(e,t){return t.subject.equals(n)?e+1:e}),0),i=e.internal_changeLog.deletions.reduce((function(e,t){return t.subject.equals(n)?e+1:e}),0),a=1===r?"1 new value added":"".concat(r," new values added"),o=1===i?"1 value removed":"".concat(i," values removed");return"(".concat(a," / ").concat(o,")")}(e,n),"\n"))})),t}function an(e){if(!I(e))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!L(e)||0===e.internal_changeLog.additions.length&&0===e.internal_changeLog.deletions.length)return"## Changes compared to ".concat(Ae(e),"\n\n")+"This SolidDataset has not been modified since it was fetched from ".concat(Ae(e),".\n");var t="## Changes compared to ".concat(Ae(e),"\n"),n=function(e){var t=Object.create(null);return e.internal_changeLog.deletions.forEach((function(n){var r,i,a,o=q(n.subject)?J(n.subject,Ae(e)):n.subject;if(W(o)&&W(n.predicate)){var s=O(o),u=O(n.predicate);null!==(r=t[s])&&void 0!==r||(t[s]=Object.create(null)),null!==(i=(a=t[s])[u])&&void 0!==i||(a[u]={added:[],deleted:[]}),t[s][u].deleted.push(n.object)}})),e.internal_changeLog.additions.forEach((function(n){var r,i,a,o=q(n.subject)?J(n.subject,Ae(e)):n.subject;if(W(o)&&W(n.predicate)){var s=O(o),u=O(n.predicate);null!==(r=t[s])&&void 0!==r||(t[s]=Object.create(null)),null!==(i=(a=t[s])[u])&&void 0!==i||(a[u]={added:[],deleted:[]}),t[s][u].added.push(n.object)}})),t}(e);return Object.keys(n).forEach((function(e){t+="\n### Thing: ".concat(e,"\n");var r=n[e];Object.keys(r).forEach((function(e){t+="\nProperty: ".concat(e,"\n");var n=r[e].deleted,i=r[e].added;n.length>0&&(t+="- Removed:\n",t+=n.reduce((function(e,t){return"".concat(e,"  - ").concat(it(t),"\n")}),"")),i.length>0&&(t+="- Added:\n",t+=i.reduce((function(e,t){return"".concat(e,"  - ").concat(it(t),"\n")}),""))}))})),t}function on(e){var t=W(e.subject)?sn(e.subject):e.subject,n=W(e.object)?sn(e.object):e.object;return Y.quad(t,e.predicate,n,e.graph)}function sn(e){return E(e.value)?Y.namedNode("#".concat(A(e.value))):e}function un(e){var t=Ae(e),n=e.graphs.default,r=Object.keys(n).reduce((function(e,n){var r=function(e,t){var n=Object.keys(e.predicates).reduce((function(e,n){var r,i=null!==(r=e[n].namedNodes)&&void 0!==r?r:[];if(i.every((function(e){return!E(e)})))return e;var a=S(i.map((function(e){return E(e)?"".concat(t,"#").concat(A(e)):e}))),o=S(u(u({},e[n]),{},{namedNodes:a}));return S(u(u({},e),{},s({},n,o)))}),e.predicates);return S(u(u({},e),{},{predicates:n,url:E(e.url)?"".concat(t,"#").concat(A(e.url)):e.url}))}(e[n],t),i=E(n)?"".concat(t,"#").concat(A(n)):n,a=u({},e);return delete a[n],a[i]=r,S(a)}),n),i=S(u(u({},e.graphs),{},{default:r}));return S(u(u({},e),{},{graphs:i}))}function ln(){return ln=i(r().mark((function e(t){var n,i,a,o,s,l,c,d,f=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:be,i=O(t),e.prev=2,a=new URL("/.well-known/solid",new URL(i).origin).href,e.next=6,Zt(a,{fetch:n.fetch});case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(2);case 11:return e.next=13,we(i,{fetch:n.fetch,ignoreAuthenticationErrors:!0});case 13:if(o=e.sent,s=Pe(o),l=s[_e.storage],null===(c=1===(null===l||void 0===l?void 0:l.length)?l[0]:null)){e.next=20;break}return d=new URL(".well-known/solid",c.endsWith("/")?c:"".concat(c,"/")).href,e.abrupt("return",Zt(d,u(u({},n),{},{parsers:{"application/ld+json":Le()}})));case 20:throw new Error("Could not determine storage root or well-known solid resource.");case 21:case"end":return e.stop()}}),e,null,[[2,9]])}))),ln.apply(this,arguments)}var cn=x.Response;function dn(e){var t=Ut();return u(u({},t),{},{internal_resourceInfo:{sourceIri:O(e),isRawData:!1,contentType:"text/turtle",linkedResources:{}}})}function fn(e){var t=O(e);if(!t.endsWith("/"))throw new Error("A Container's URL should end in a slash. Please update your tests.");return dn(t)}var hn=function(e,t,n){var r,i;if(at(e),!K(t))throw new Ft(t);if(!Pt(n)&&!K(n))throw new Dt(n);var a,o=O(t),l=null!==(r=e.predicates[o])&&void 0!==r?r:{},c=null!==(i=l.namedNodes)&&void 0!==i?i:[];a=W(n)?n.value:"string"===typeof n?n:Mt(n)?n.url:Rt(n);var d=S(c.concat(O(a))),f=S(u(u({},l),{},{namedNodes:d})),h=S(u(u({},e.predicates),{},s({},o,f)));return S(u(u({},e),{},{predicates:h}))},pn=hn,vn=function(e,t,n){return at(e),An(e,t,function(e){return e?"true":"false"}(n),F.boolean)},mn=function(e,t,n){return at(e),An(e,t,function(e){return e.toISOString()}(n),F.dateTime)},gn=function(e,t,n){return at(e),An(e,t,function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=U(e.toISOString()),a=l(i,2),o=(a[0],a[1]);return"".concat(t,"-").concat(String(n).padStart(2,"0"),"-").concat(String(r).padStart(2,"0")).concat(o)}(n),F.date)},yn=function(e,t,n){return at(e),An(e,t,function(e){var t,n;if(e.millisecond&&(t=e.millisecond<10?"00".concat(e.millisecond):e.millisecond<100?"0".concat(e.millisecond):e.millisecond),"number"===typeof e.timezoneHourOffset){var r=Math.abs(e.timezoneHourOffset)<10?"0".concat(Math.abs(e.timezoneHourOffset)):Math.abs(e.timezoneHourOffset);n=e.timezoneHourOffset>=0?"+".concat(r):"-".concat(r),e.timezoneMinuteOffset?n="".concat(n,":").concat(e.timezoneMinuteOffset<10?"0".concat(e.timezoneMinuteOffset):e.timezoneMinuteOffset):n+=":00"}return"".concat(e.hour<10?"0".concat(e.hour):e.hour,":").concat(e.minute<10?"0".concat(e.minute):e.minute,":").concat(e.second<10?"0".concat(e.second):e.second).concat(e.millisecond?".".concat(t):"").concat(n||"")}(n),F.time)},_n=function(e,t,n){return at(e),An(e,t,function(e){return e.toString()}(n),F.decimal)},bn=function(e,t,n){return at(e),An(e,t,function(e){return e.toString()}(n),F.integer)};function wn(e,t,n,r){var i,a,o;if(at(e),!K(t))throw new Ft(t);var l=O(t),c=H(r),d=null!==(i=e.predicates[l])&&void 0!==i?i:{},f=null!==(a=d.langStrings)&&void 0!==a?a:{},h=null!==(o=f[c])&&void 0!==o?o:[],p=S(h.concat(n)),v=S(u(u({},f),{},s({},c,p))),m=S(u(u({},d),{},{langStrings:v})),g=S(u(u({},e.predicates),{},s({},l,m)));return S(u(u({},e),{},{predicates:g}))}var xn=function(e,t,n){return at(e),An(e,t,n,F.string)};function kn(e,t,n){return hn(e,t,n.value)}function Sn(e,t,n){if(at(e),!K(t))throw new Ft(t);return n.datatype.value===F.langString?wn(e,t,n.value,n.language):An(e,t,n.value,n.datatype.value)}function En(e,t,n){var r,i;if("NamedNode"===n.termType)return kn(e,t,n);if("Literal"===n.termType)return Sn(e,t,n);if("BlankNode"===n.termType){if(at(e),!K(t))throw new Ft(t);var a=O(t),o=null!==(r=e.predicates[a])&&void 0!==r?r:{},l=null!==(i=o.blankNodes)&&void 0!==i?i:[],c=S(l.concat(P(n))),d=S(u(u({},o),{},{blankNodes:c})),f=S(u(u({},e.predicates),{},s({},a,d)));return S(u(u({},e),{},{predicates:f}))}throw new Error("Term type [".concat(n.termType,"] is not supported by @inrupt/solid-client."))}function An(e,t,n,r){var i,a,o;if(at(e),!K(t))throw new Ft(t);var l=O(t),c=null!==(i=e.predicates[l])&&void 0!==i?i:{},d=null!==(a=c.literals)&&void 0!==a?a:{},f=null!==(o=d[r])&&void 0!==o?o:[],h=S(f.concat(n)),p=S(u(u({},d),{},s({},r,h))),v=S(u(u({},c),{},{literals:p})),m=S(u(u({},e.predicates),{},s({},l,v)));return S(u(u({},e),{},{predicates:m}))}function Tn(e,t){if(at(e),!K(t))throw new Ft(t);var n=O(t),r=u({},e.predicates);return delete r[n],S(u(u({},e),{},{predicates:S(r)}))}var Cn=function(e,t,n){var r,i,a;if(at(e),!K(t))throw new Ft(t);var o=O(t);if(!Pt(n)&&!K(n))throw new Dt(n);var l=Pt(n)?Rt(n):O(n),c=S(null!==(a=null===(i=null===(r=e.predicates[o])||void 0===r?void 0:r.namedNodes)||void 0===i?void 0:i.filter((function(e){return e.toLowerCase()!==l.toLowerCase()})))&&void 0!==a?a:[]),d=S(u(u({},e.predicates[o]),{},{namedNodes:c})),f=S(u(u({},e.predicates),{},s({},o,d)));return S(u(u({},e),{},{predicates:f}))},Pn=Cn,In=function(e,t,n){return at(e),Un(e,t,F.boolean,(function(e){return D(e)===n}))},Rn=function(e,t,n){return at(e),Un(e,t,F.dateTime,(function(e){var t;return(null===(t=j(e))||void 0===t?void 0:t.getTime())===n.getTime()}))},Ln=function(e,t,n){return at(e),Un(e,t,F.date,(function(e){var t=B(e);return!!t&&(t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate())}))},Mn=function(e,t,n){return at(e),Un(e,t,F.time,(function(e){var t=N(e);return!!t&&(t.hour===n.hour&&t.minute===n.minute&&t.second===n.second&&t.millisecond===n.millisecond&&t.timezoneHourOffset===n.timezoneHourOffset&&t.timezoneMinuteOffset===n.timezoneMinuteOffset)}))},On=function(e,t,n){return at(e),Un(e,t,F.decimal,(function(e){return V(e)===n}))},Fn=function(e,t,n){return at(e),Un(e,t,F.integer,(function(e){return Z(e)===n}))};function Dn(e,t,n,r){var i,a;if(at(e),!K(t))throw new Ft(t);var o=O(t),l=null!==(a=null===(i=e.predicates[o])||void 0===i?void 0:i.langStrings)&&void 0!==a?a:{},c=Object.keys(l).find((function(e){return H(e)===H(r)&&Array.isArray(l[e])&&l[e].length>0}));if("string"!==typeof c)return e;var d=l[c],f=S(d.filter((function(e){return e!==n}))),h=S(u(u({},l),{},s({},c,f))),p=S(u(u({},e.predicates[o]),{},{langStrings:h})),v=S(u(u({},e.predicates),{},s({},o,p)));return S(u(u({},e),{},{predicates:v}))}var Nn=function(e,t,n){return at(e),Un(e,t,F.string,(function(e){return e===n}))};function jn(e,t,n){return Cn(e,t,n.value)}function Bn(e,t,n){var r,i,a;if(at(e),!K(t))throw new Ft(t);var o=n.datatype.value;if(o===F.langString)return Dn(e,t,n.value,n.language);var l=O(t),c=null!==(r=e.predicates[l])&&void 0!==r?r:{},d=null!==(i=c.literals)&&void 0!==i?i:{},f=null!==(a=d[o])&&void 0!==a?a:[],h=S(f.filter((function(e){return e!==n.value}))),p=S(u(u({},d),{},s({},o,h))),v=S(u(u({},c),{},{literals:p})),m=S(u(u({},e.predicates),{},s({},l,v)));return S(u(u({},e),{},{predicates:m}))}function Un(e,t,n,r){var i,a,o;if(!K(t))throw new Ft(t);var l=O(t),c=null!==(i=e.predicates[l])&&void 0!==i?i:{},d=null!==(a=c.literals)&&void 0!==a?a:{},f=null!==(o=d[n])&&void 0!==o?o:[],h=S(f.filter((function(e){return!r(e)}))),p=S(u(u({},d),{},s({},n,h))),v=S(u(u({},c),{},{literals:p})),m=S(u(u({},e.predicates),{},s({},l,v)));return S(u(u({},e),{},{predicates:m}))}var zn=function(e,t,n){if(at(e),!K(t))throw new Ft(t);if(!Pt(n)&&!K(n))throw new Dt(n);return hn(Tn(e,t),t,n)},Vn=zn,Zn=function(e,t,n){return at(e),vn(Tn(e,t),t,n)},Hn=function(e,t,n){return at(e),mn(Tn(e,t),t,n)},Wn=function(e,t,n){return at(e),gn(Tn(e,t),t,n)},Gn=function(e,t,n){return at(e),yn(Tn(e,t),t,n)},qn=function(e,t,n){return at(e),_n(Tn(e,t),t,n)},Kn=function(e,t,n){return at(e),bn(Tn(e,t),t,n)};function Jn(e,t,n,r){return at(e),wn(Tn(e,t),t,n,r)}var Xn=function(e,t,n){return at(e),xn(Tn(e,t),t,n)};function Yn(e,t,n){return at(e),kn(Tn(e,t),t,n)}function Qn(e,t,n){return at(e),Sn(Tn(e,t),t,n)}function $n(e,t,n){if(at(e),!K(t))throw new Ft(t);return En(Tn(e,t),t,n)}function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct(),t=Pt(e)?e:Ct(e);function n(e){return function(n,r){return t=e(t,n,r),a}}function r(e){return function(n,r){return t=e(t,n,r),a}}function i(e){return function(n,r){return t=e(t,n,r),a}}var a={build:function(){return t},addUrl:n(hn),addIri:n(pn),addBoolean:n(vn),addDatetime:n(mn),addDate:n(gn),addTime:n(yn),addDecimal:n(_n),addInteger:n(bn),addStringNoLocale:n(xn),addStringEnglish:function(e,n){return t=wn(t,e,n,"en"),a},addStringWithLocale:function(e,n,r){return t=wn(t,e,n,r),a},addNamedNode:n(kn),addLiteral:n(Sn),addTerm:n(En),setUrl:r(zn),setIri:r(Vn),setBoolean:r(Zn),setDatetime:r(Hn),setDate:r(Wn),setTime:r(Gn),setDecimal:r(qn),setInteger:r(Kn),setStringNoLocale:r(Xn),setStringEnglish:function(e,n){return t=Jn(t,e,n,"en"),a},setStringWithLocale:function(e,n,r){return t=Jn(t,e,n,r),a},setNamedNode:r(Yn),setLiteral:r(Qn),setTerm:r($n),removeAll:function(e){return t=Tn(t,e),a},removeUrl:i(Cn),removeIri:i(Pn),removeBoolean:i(In),removeDatetime:i(Rn),removeDate:i(Ln),removeTime:i(Mn),removeDecimal:i(On),removeInteger:i(Fn),removeStringNoLocale:i(Nn),removeStringEnglish:function(e,n){return er(Dn(t,e,n,"en"))},removeStringWithLocale:function(e,n,r){return er(Dn(t,e,n,r))},removeNamedNode:i(jn),removeLiteral:i(Bn)};return a}function tr(e){var t=Pe(e).type;return Array.isArray(t)&&t.includes(me.AccessControlResource)}function nr(e){return rr.apply(this,arguments)}function rr(){return rr=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:be,Br(t)){e.next=3;break}return e.abrupt("return",{resourceAcl:null,fallbackAcl:null});case 3:return e.prev=3,e.next=6,ir(t,n);case 6:if(null!==(i=e.sent)){e.next=14;break}return e.next=10,or(t,n);case 10:e.t1=e.sent,e.t0={resourceAcl:null,fallbackAcl:e.t1},e.next=15;break;case 14:e.t0={resourceAcl:i,fallbackAcl:null};case 15:return a=e.t0,e.abrupt("return",a);case 19:if(e.prev=19,e.t2=e.catch(3),!(e.t2 instanceof Ar)){e.next=23;break}return e.abrupt("return",{resourceAcl:null,fallbackAcl:null});case 23:throw e.t2;case 24:case"end":return e.stop()}}),e,null,[[3,19]])}))),rr.apply(this,arguments)}function ir(e){return ar.apply(this,arguments)}function ar(){return ar=i(r().mark((function e(t){var n,i,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:be,Br(t)){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,e.next=6,Zt(t.internal_resourceInfo.aclUrl,n);case 6:if(!tr(i=e.sent)){e.next=9;break}throw new Ar(t,i);case 9:return e.abrupt("return",S(u(u({},i),{},{internal_accessTo:Ae(t)})));case 12:if(e.prev=12,e.t0=e.catch(3),!(e.t0 instanceof Ar)){e.next=16;break}throw e.t0;case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[3,12]])}))),ar.apply(this,arguments)}function or(e){return sr.apply(this,arguments)}function sr(){return sr=i(r().mark((function e(t){var n,i,a,o,s,u,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:be,i=new URL(Ae(t)),"/"!==(a=i.pathname)){e.next=5;break}return e.abrupt("return",null);case 5:return o=ur(a),s=new URL(o,i.origin).href,e.next=9,we(s,n);case 9:if(Br(u=e.sent)){e.next=12;break}return e.abrupt("return",null);case 12:return e.next=14,ir(u,n);case 14:if(null!==(l=e.sent)){e.next=17;break}return e.abrupt("return",or(u,n));case 17:return e.abrupt("return",l);case 18:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}function ur(e){var t="/"===e.substring(e.length-1)?e.substring(0,e.length-1):e;return"".concat(e.substring(0,t.lastIndexOf("/")),"/")}function lr(e){return Et(e).filter(cr)}function cr(e){return ft(e,he.type).includes(fe.Authorization)}function dr(e,t){return e.filter((function(e){return function(e,t){return ft(e,fe.accessTo).includes(t)}(e,t)}))}function fr(e,t){return e.filter((function(e){return function(e,t){return ft(e,fe.default).includes(t)||ft(e,fe.defaultForNew).includes(t)}(e,t)}))}function hr(e){var t=ft(e,fe.mode);return t.includes(mr.write)?{read:t.includes(mr.read),append:!0,write:!0,control:t.includes(mr.control)}:{read:t.includes(mr.read),append:t.includes(mr.append),write:!1,control:t.includes(mr.control)}}function pr(e){return e.reduce((function(e,t){return e.write||t.write?{read:e.read||t.read,append:!0,write:!0,control:e.control||t.control}:{read:e.read||t.read,append:e.append||t.append,write:!1,control:e.control||t.control}}),{read:!1,append:!1,write:!1,control:!1})}function vr(e){return!ae(e.predicates,Y.namedNode(e.url),Y.defaultGraph()).some((function(e){return!function(e){var t=e.predicate,n=e.object;if(t.equals(Y.namedNode(he.type))&&n.equals(Y.namedNode(fe.Authorization)))return!0;if(t.equals(Y.namedNode(fe.accessTo))||t.equals(Y.namedNode(fe.default))||t.equals(Y.namedNode(fe.defaultForNew)))return!0;if(t.equals(Y.namedNode(fe.mode))&&Object.values(mr).some((function(e){return n.equals(Y.namedNode(e))})))return!0;if(t.equals(Y.namedNode(fe.agent))||t.equals(Y.namedNode(fe.agentGroup))||t.equals(Y.namedNode(fe.agentClass)))return!0;if(t.equals(Y.namedNode(fe.origin)))return!0;return!1}(e)}))&&(null===ct(e,fe.accessTo)&&null===ct(e,fe.default)&&null===ct(e,fe.defaultForNew)||(null===ct(e,fe.mode)||null===ct(e,fe.agent)&&null===ct(e,fe.agentGroup)&&null===ct(e,fe.agentClass)))}var mr={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function gr(e,t,n){return e.filter((function(e){return ft(e,n).includes(t)}))}function yr(e,t){var n={};return e.forEach((function(e){var r=ft(e,t),i=hr(e);r.forEach((function(e){n[e]="undefined"===typeof n[e]?i:pr([n[e],i])}))})),n}function _r(e){var t=Ct();return t=Vn(t,he.type,fe.Authorization),e.read&&(t=pn(t,fe.mode,mr.read)),e.append&&!e.write&&(t=pn(t,fe.mode,mr.append)),e.write&&(t=pn(t,fe.mode,mr.write)),e.control&&(t=pn(t,fe.mode,mr.control)),t}function br(e,t){return Object.assign(ce(e),{internal_acl:t})}var wr=[fe.agent,fe.agentClass,fe.agentGroup,fe.origin];function xr(e,t,n,r,i){if(!ft(e,n).includes(t))return[e,_r({read:!1,append:!1,write:!1,control:!1})];var a=Pn(e,n,t),o=function(e){var t=Ct();function n(e,t,n){return ft(e,n).reduce((function(e,t){return pn(e,n,t)}),t)}return t=n(e,t=Vn(t,he.type,fe.Authorization),fe.accessTo),t=n(e,t,fe.default),t=n(e,t,fe.defaultForNew),t=n(e,t,fe.agent),t=n(e,t,fe.agentGroup),t=n(e,t,fe.agentClass),t=n(e,t,fe.origin),n(e,t,fe.mode)}(e);return o=Pn(o,"resource"===i?fe.accessTo:fe.default,r),"default"===i&&(o=Pn(o,fe.defaultForNew,r)),o=Vn(o,n,t),wr.filter((function(e){return e!==n})).forEach((function(e){o=Tn(o,e)})),[a,o]}function kr(e,t,n,r,i){var a=e;Et(e).forEach((function(t){var o=xr(t,i,n,e.internal_accessTo,r),s=l(o,2),u=s[0],c=s[1];a=At(a,u),a=At(a,c)}));var o=_r(t);return o=Vn(o,"resource"===r?fe.accessTo:fe.default,e.internal_accessTo),o=Vn(o,n,i),function(e){return lr(e).filter(vr).reduce(Tt,e)}(At(a,o))}function Sr(e,t){return br(e,{resourceAcl:t,fallbackAcl:null})}function Er(e){return e.internal_acl.resourceAcl}var Ar=function(e){f(n,e);var t=h(n);function n(e,r){return d(this,n),t.call(this,"[".concat(Te(e),"] is governed by Access Control Policies in [").concat(Te(r),"] rather than by Web Access Control."))}return c(n)}(p(Error));function Tr(e){return null!==e.internal_acl.resourceAcl&&Ae(e)===e.internal_acl.resourceAcl.internal_accessTo&&e.internal_resourceInfo.aclUrl===Ae(e.internal_acl.resourceAcl)}function Cr(){return Cr=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:be,e.next=3,Zt(t,n);case 3:return i=e.sent,e.next=6,nr(i,n);case 6:return a=e.sent,e.abrupt("return",br(i,a));case 8:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Pr(){return Pr=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:be,e.next=3,Ke(t,n);case 3:return i=e.sent,e.next=6,nr(i,n);case 6:return a=e.sent,e.abrupt("return",br(i,a));case 8:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Ir(){return Ir=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:be,e.next=3,we(t,n);case 3:return i=e.sent,e.next=6,nr(i,n);case 6:return a=e.sent,e.abrupt("return",br(i,a));case 8:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Rr(e){return Tr(e)?e.internal_acl.resourceAcl:null}function Lr(e){return null!==e.internal_acl.fallbackAcl}function Mr(e){return Lr(e)?e.internal_acl.fallbackAcl:null}function Or(e){return S(u(u({},Ut()),{},{internal_accessTo:Ae(e),internal_resourceInfo:{sourceIri:e.internal_resourceInfo.aclUrl,isRawData:!1,linkedResources:{}}}))}function Fr(e){var t=Or(e);return fr(lr(e.internal_acl.fallbackAcl),e.internal_acl.fallbackAcl.internal_accessTo).map((function(t){return t=Tn(t,fe.default),t=Tn(t,fe.defaultForNew),t=Vn(t,fe.accessTo,Ae(e)),t=Vn(t,fe.default,Ae(e))})).reduce(At,t)}function Dr(e,t){return Nr.apply(this,arguments)}function Nr(){return Nr=i(r().mark((function e(t,n){var i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=s.length>2&&void 0!==s[2]?s[2]:be,Br(t)){e.next=3;break}throw new Error("Could not determine the location of the ACL for the Resource at [".concat(Ae(t),"]; possibly the current user does not have Control access to that Resource. Try calling `hasAccessibleAcl()` before calling `saveAclFor()`."));case 3:return e.next=5,Jt(t.internal_resourceInfo.aclUrl,n,i);case 5:return a=e.sent,o=u(u({},a),{},{internal_accessTo:Ae(t)}),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)}))),Nr.apply(this,arguments)}function jr(){return jr=i(r().mark((function e(t){var n,i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:be,i=u(u({},be),n),e.next=4,i.fetch(t.internal_resourceInfo.aclUrl,{method:"DELETE"});case 4:if((a=e.sent).ok){e.next=7;break}throw new Error("Deleting the ACL of the Resource at [".concat(Ae(t),"] failed: [").concat(a.status,"] [").concat(a.statusText,"]."));case 7:return o=Object.assign(ce(t),{acl:{resourceAcl:null}}),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}function Br(e){return"string"===typeof e.internal_resourceInfo.aclUrl}function Ur(e,t){return Tr(e)?Vr(e.internal_acl.resourceAcl,t):Lr(e)?Wr(e.internal_acl.fallbackAcl,t):null}function zr(e){return Tr(e)?Zr(Rr(e)):Lr(e)?Gr(Mr(e)):null}function Vr(e,t){return pr(qr(dr(lr(e),e.internal_accessTo),t).map(hr))}function Zr(e){return Xr(Kr(dr(lr(e),e.internal_accessTo)))}function Hr(e,t,n){return kr(e,n,fe.agent,"resource",t)}function Wr(e,t){return pr(qr(fr(lr(e),e.internal_accessTo),t).map(hr))}function Gr(e){return Xr(Kr(fr(lr(e),e.internal_accessTo)))}function qr(e,t){return gr(e,t,fe.agent)}function Kr(e){return e.filter(Jr)}function Jr(e){return null!==ct(e,fe.agent)}function Xr(e){return yr(e,fe.agent)}function Yr(e,t){return Tr(e)?$r(e.internal_acl.resourceAcl,t):Lr(e)?ti(e.internal_acl.fallbackAcl,t):null}function Qr(e){return Tr(e)?ei(Rr(e)):Lr(e)?ni(Mr(e)):null}function $r(e,t){return pr(ri(dr(lr(e),e.internal_accessTo),t).map(hr))}function ei(e){return ii(dr(lr(e),e.internal_accessTo))}function ti(e,t){return pr(ri(fr(lr(e),e.internal_accessTo),t).map(hr))}function ni(e){return ii(fr(lr(e),e.internal_accessTo))}function ri(e,t){return gr(e,t,fe.agentGroup)}function ii(e){return yr(e,fe.agentGroup)}function ai(e,t,n){return kr(e,n,fe.agentGroup,"resource",t)}function oi(e){return Tr(e)?si(e.internal_acl.resourceAcl):Lr(e)?ui(e.internal_acl.fallbackAcl):null}function si(e){return pr(ci(dr(lr(e),e.internal_accessTo),ve.Agent).map(hr))}function ui(e){return pr(ci(fr(lr(e),e.internal_accessTo),ve.Agent).map(hr))}function li(e,t){return kr(e,t,fe.agentClass,"resource",ve.Agent)}function ci(e,t){return e.filter((function(e){return function(e,t){return ft(e,fe.agentClass).includes(t)}(e,t)}))}function di(e,t){var n=St(e,t);if(null===n)throw new Error("Profile document [".concat(Ae(e),"] does not include WebID [").concat(t,"]"));return n}function fi(e,t){return lt(di(e,t),ye.publicKey)}var hi=function(e){return"undefined"!==typeof e.keys};function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=i(r().mark((function e(t,n){var i,a,s,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]?c[2]:be,a=u(u({},be),i),e.next=4,a.fetch(n);case 4:if((s=e.sent).ok){e.next=7;break}throw new Error("Fetching [".concat(n,"] returned an error: ").concat(s.status," ").concat(s.statusText));case 7:return e.prev=7,e.next=10,s.json();case 10:if(l=e.sent,hi(l)){e.next=13;break}throw new Error("[".concat(n,"] does not dereference to a valid JWKS: ").concat(JSON.stringify(l)));case 13:return e.abrupt("return",{keys:[].concat(o(l.keys),[t])});case 16:throw e.prev=16,e.t0=e.catch(7),new Error("Parsing the document at [".concat(n,"] failed: ").concat(e.t0));case 19:case"end":return e.stop()}}),e,null,[[7,16]])}))),vi.apply(this,arguments)}function mi(){return mi=i(r().mark((function e(t,n){var i,a,o,s,u=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:be,e.next=3,Zt(n,{fetch:i.fetch});case 3:if(null!==(a=e.sent)){e.next=6;break}throw new Error("The profile document associated with WebID [".concat(n,"] could not be retrieved."));case 6:if(null!==(o=fi(a,n))){e.next=9;break}throw new Error("No key set is declared for the property [".concat(ye.publicKey,"] in the profile of [").concat(n,"]"));case 9:return e.next=11,pi(t,o,i);case 11:return s=e.sent,e.abrupt("return",Qe(o,new Blob([JSON.stringify(s)]),{contentType:"application/json",fetch:i.fetch}));case 13:case"end":return e.stop()}}),e)}))),mi.apply(this,arguments)}function gi(e,t){var n=St(t,e),r=Et(t).filter((function(e){return ft(e,ve.primaryTopic).length>0})).map(Rt).concat(n?ft(n,ve.isPrimaryTopicOf):[]).filter((function(e){return e!==Te(t)}));return Array.from(new Set(r))}function yi(e){return _i.apply(this,arguments)}function _i(){return _i=i(r().mark((function e(t){var n,i,a,o,s,u,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null!==(i=(n=l.length>1&&void 0!==l[1]?l[1]:be).fetch)&&void 0!==i?i:ue,null===(a=n.webIdProfile)||void 0===a){e.next=6;break}e.t0=a,e.next=9;break;case 6:return e.next=8,Zt(t,{fetch:b.fetch});case 8:e.t0=e.sent;case 9:return s=e.t0,e.next=12,Promise.allSettled(gi(t,s).map((function(e){return Zt(e,{fetch:o})})));case 12:return u=e.sent.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})),e.abrupt("return",{webIdProfile:s,altProfileAll:u});case 14:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function bi(){return bi=i(r().mark((function e(t){var n,i,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:be,e.next=3,yi(t,n);case 3:return i=e.sent,e.abrupt("return",wi(i,t));case 5:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function wi(e,t){var n=new Set;return[e.webIdProfile].concat(o(e.altProfileAll)).forEach((function(e){var r=St(e,t);null!==r&&ft(r,_e.storage).forEach((function(e){return n.add(e)}))})),Array.from(n)}function xi(){return(xi=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zt(t,{fetch:b.fetch}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ki(e){if(!Oa(e))throw new Error("An Access Control Resource for [".concat(Ae(e),"] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources."));return e.internal_acp.acr}function Si(e,t){return Object.assign(ce(e),{internal_acp:u(u({},e.internal_acp),{},{acr:t})})}function Ei(e){var t=Ct(e);return t=Vn(t,he.type,me.AccessControl)}function Ai(e,t){var n=Et(ki(e),t),r=n.filter((function(e){return ft(e,he.type).includes(me.AccessControl)})),i=n.filter((function(e){return ft(e,me.accessControl).length>0})).map((function(e){return Ct({url:ft(e,me.accessControl)[0]})}));return r.concat(i)}function Ti(e,t){return Si(e,At(ki(e),t))}function Ci(e,t){return pn(e,me.apply,t)}function Pi(e){return ft(e,me.apply)}function Ii(e,t){return Pn(e,me.apply,t)}function Ri(e){return Tn(e,me.apply)}function Li(e,t){return pn(e,me.applyMembers,t)}function Mi(e){return ft(e,me.applyMembers)}function Oi(e){return Tn(e,me.applyMembers)}function Fi(e){var t=Ai(e);return 0===t.length?Ei():t[0]}function Di(e){return R(e)&&Array.isArray(e.internal_resourceInfo.linkedResources[me.accessControl])&&1===e.internal_resourceInfo.linkedResources[me.accessControl].length}function Ni(e,t){var n,r=ki(e),i=Ae(r),a=null!==(n=St(r,i))&&void 0!==n?n:Ct({url:i});return Si(e,At(r,a=pn(a,me.access,t)))}function ji(e,t){var n,r=ki(e),i=Ae(r),a=null!==(n=St(r,i))&&void 0!==n?n:Ct({url:i});return Si(e,At(r,a=pn(a,me.accessMembers,t)))}function Bi(e){var t=ki(e),n=St(t,Ae(t));return null===n?[]:ft(n,me.access)}function Ui(e){var t=ki(e),n=St(t,Ae(t));return null===n?[]:ft(n,me.accessMembers)}function zi(e,t){var n=ki(e),r=St(n,Ae(n));return null===r?e:Si(e,At(n,Pn(r,me.access,t)))}function Vi(e,t){var n=ki(e),r=St(n,Ae(n));return null===r?e:Si(e,At(n,Pn(r,me.accessMembers,t)))}function Zi(e){var t=ki(e),n=St(t,Ae(t));return null===n?e:Si(e,At(t,Tn(n,me.access)))}function Hi(e){var t=ki(e),n=St(t,Ae(t));return null===n?e:Si(e,At(t,Tn(n,me.accessMembers)))}function Wi(e,t){return Ti(e,Ci(Fi(e),t))}function Gi(e,t){return Ti(e,Li(Fi(e),t))}function qi(e){var t=Ai(e).map((function(e){return Pi(e)})),n=new Set;return t.forEach((function(e){e.forEach((function(e){return n.add(e)}))})),Array.from(n)}function Ki(e){var t=Ai(e).map((function(e){return Mi(e)})),n=new Set;return t.forEach((function(e){e.forEach((function(e){return n.add(e)}))})),Array.from(n)}function Ji(e,t){return Ai(e).map((function(e){return Ii(e,t)})).reduce(Ti,e)}function Xi(e,t){var n=Ai(e).map((function(e){return function(e,t){return Pn(e,me.applyMembers,t)}(e,t)}));return n.reduce(Ti,e)}function Yi(e){return Ai(e).map((function(e){return Ri(e)})).reduce(Ti,e)}function Qi(e){return Ai(e).map((function(e){return Oi(e)})).reduce(Ti,e)}function $i(e){var t="# Access controls for ".concat(Ae(e),"\n"),n=qi(e),r=Ki(e),i=Bi(e),a=Ui(e);return 0===n.length&&0===r.length&&0===i.length&&0===a.length&&(t+="\n<no policies specified yet>\n"),n.length>0&&(t+="\nThe following policies apply to this resource:\n- ",t+="".concat(n.join("\n- "),"\n")),i.length>0&&(t+="\nThe following policies apply to the access control resource for this resource:\n- ",t+="".concat(i.join("\n- "),"\n")),r.length>0&&(t+="\nThe following policies apply to the children of this resource:\n- ",t+="".concat(r.join("\n- "),"\n")),a.length>0&&(t+="\nThe following policies apply to the access control resources for children of this resource:\n- ",t+="".concat(a.join("\n- "),"\n")),t}var ea="http://www.w3.org/ns/solid/acp#",ta={AccessControl:ea.concat("AccessControl"),AccessControlResource:ea.concat("AccessControlResource"),AuthenticatedAgent:ea.concat("AuthenticatedAgent"),CreatorAgent:ea.concat("CreatorAgent"),Matcher:ea.concat("Matcher"),Policy:ea.concat("Policy"),PublicAgent:ea.concat("PublicAgent"),access:ea.concat("access"),accessControl:ea.concat("accessControl"),agent:ea.concat("agent"),allOf:ea.concat("allOf"),allow:ea.concat("allow"),anyOf:ea.concat("anyOf"),apply:ea.concat("apply"),client:ea.concat("client"),deny:ea.concat("deny"),memberAccessControl:ea.concat("memberAccessControl"),noneOf:ea.concat("noneOf"),vc:ea.concat("vc")},na="http://www.w3.org/ns/auth/acl#",ra={Append:na.concat("Append"),Control:na.concat("Control"),Read:na.concat("Read"),Write:na.concat("Write")},ia="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function aa(e){var t=ki(e);return St(t,Ae(t))}var oa="defaultAccessControl",sa="defaultAcrAccessControl",ua="defaultMemberAccessControl",la="defaultMemberAcrAccessControl";function ca(e,t){return Ae(ki(e)).concat("#").concat(t)}function da(e,t){var n=ki(e),r=ca(e,t),i=St(n,r);return null===i||"undefined"===typeof i?Ct({url:r}):i}function fa(e,t){var n=ft(e,t);return{read:n.includes(ra.Read),append:n.includes(ra.Append),write:n.includes(ra.Write),controlRead:!1,controlWrite:!1}}function ha(e,t,n){var r=Tn(e,n);return(t.read||t.controlRead)&&(r=pn(r,n,ra.Read)),t.append&&(r=pn(r,n,ra.Append)),(t.write||t.controlWrite)&&(r=pn(r,n,ra.Write)),r}var pa="defaultVcPolicy",va="defaultVcMatcher";function ma(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{inherit:!1},i=ki(e),a=function(e,t,n,r){var i,a=St(e,t);null===a&&(a=er({url:t}).addIri(he.type,ta.Policy).addIri(ta.anyOf,n).build());var o=null!==(i=St(e,n))&&void 0!==i?i:er({url:n}).addIri(he.type,ta.Matcher).addIri(ta.vc,ia).build(),s=fa(a,ta.allow);return{matcher:o,policy:a=ha(a,u(u({},s),r),ta.allow)}}(i,"".concat(Te(i),"#").concat(pa),"".concat(Te(i),"#").concat(va),t),o=a.policy,s=a.matcher,l=da(e,"defaultAccessControl");ft(l,ta.apply).includes(Rt(o))||(l=pn(l,ta.apply,o));var c=da(e,"defaultMemberAccessControl"),d=null!==(n=aa(e))&&void 0!==n?n:Ct({url:Te(i)});return ft(d,ta.accessControl).includes(Rt(l))||(d=pn(d,ta.accessControl,l)),i=[d,l,o,s].reduce(At,i),r.inherit&&(ft(c,ta.apply).includes(Rt(o))||(c=pn(c,ta.apply,o)),ft(d,ta.memberAccessControl).includes(Rt(c))||(d=pn(d,ta.memberAccessControl,c)),i=[d,c].reduce(At,i)),function(e,t){return Object.assign(ce(e),{internal_acp:{acr:t}})}(e,i)}var ga={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},ya=function(e,t,n){return ft(e,t).includes(Rt(n))};function _a(e){var t=ki(e),n=da(e,"defaultAccessControl"),r=aa(e);if(null===r||!ya(r,ta.accessControl,n))return ga;var i=St(t,"".concat(Te(t),"#").concat(pa));if(null===i||!ya(n,ta.apply,i))return ga;var a=St(t,"".concat(Te(t),"#").concat(va));return null!==a&&ya(i,ta.anyOf,a)?fa(i,ta.allow):ga}function ba(e){return wa.apply(this,arguments)}function wa(){return wa=i(r().mark((function e(t){var n,i,a,o,s,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:be,i=O(t),a=u(u({},be),n),e.next=5,Zt(i,a);case 5:return o=e.sent,e.next=8,Fa(o,a);case 8:return s=e.sent,e.abrupt("return",u(u({},o),s));case 10:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function xa(e){return ka.apply(this,arguments)}function ka(){return ka=i(r().mark((function e(t){var n,i,a,o,s,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:be,i=O(t),a=u(u({},be),n),e.next=5,Ke(i,a);case 5:return o=e.sent,e.next=8,Fa(o,a);case 8:return s=e.sent,e.abrupt("return",Object.assign(o,s));case 10:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function Sa(e){return Ea.apply(this,arguments)}function Ea(){return Ea=i(r().mark((function e(t){var n,i,a,o,s,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:be,i=O(t),a=u(u({},be),n),e.next=5,we(i,a);case 5:return o=e.sent,e.next=8,Fa(o,a);case 8:return s=e.sent,e.abrupt("return",u(u({},o),s));case 10:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Aa(e){return Ta.apply(this,arguments)}function Ta(){return Ta=i(r().mark((function e(t){var n,i,a,o,s,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:be,i=O(t),a=u(u({},be),n),e.next=5,Zt(i,a);case 5:if(!Br(o=e.sent)){e.next=11;break}return e.next=9,nr(o,a);case 9:return s=e.sent,e.abrupt("return",br(o,s));case 11:return e.next=13,Fa(o,a);case 13:return l=e.sent,e.abrupt("return",u(u({},o),l));case 15:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}function Ca(e){return Pa.apply(this,arguments)}function Pa(){return Pa=i(r().mark((function e(t){var n,i,a,o,s,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:be,i=O(t),a=u(u({},be),n),e.next=5,Ke(i,a);case 5:if(!Br(o=e.sent)){e.next=11;break}return e.next=9,nr(o,a);case 9:return s=e.sent,e.abrupt("return",br(o,s));case 11:return e.next=13,Fa(o,a);case 13:return l=e.sent,e.abrupt("return",Object.assign(o,l));case 15:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Ia(e){return Ra.apply(this,arguments)}function Ra(){return Ra=i(r().mark((function e(t){var n,i,a,o,s,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:be,i=O(t),a=u(u({},be),n),e.next=5,we(i,a);case 5:if(!Br(o=e.sent)){e.next=11;break}return e.next=9,nr(o,a);case 9:return s=e.sent,e.abrupt("return",br(o,s));case 11:return e.next=13,Fa(o,a);case 13:return l=e.sent,e.abrupt("return",u(u({},o),l));case 15:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function La(e){return Ma.apply(this,arguments)}function Ma(){return Ma=i(r().mark((function e(t){var n,i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:be,i=ki(t),a=u(u({},be),n),e.next=5,Jt(Ae(i),i,a);case 5:return o=e.sent,e.abrupt("return",Si(t,o));case 7:case"end":return e.stop()}}),e)}))),Ma.apply(this,arguments)}function Oa(e){return"object"===typeof e.internal_acp&&null!==e.internal_acp&&"object"===typeof e.internal_acp.acr&&null!==e.internal_acp.acr}function Fa(e,t){return Da.apply(this,arguments)}function Da(){return(Da=i(r().mark((function e(t,n){var i,a,o,s,c,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Di(t)){e.next=6;break}a=t.internal_resourceInfo.linkedResources,o=l(a[me.accessControl],1),i=o[0],e.next=11;break;case 6:if(!Br(t)){e.next=11;break}return e.next=9,we(t.internal_resourceInfo.aclUrl,n);case 9:tr(s=e.sent)&&(i=Ae(s));case 11:if("string"===typeof i){e.next=13;break}return e.abrupt("return",{internal_acp:{acr:null}});case 13:return e.prev=13,e.next=16,Zt(i,n);case 16:c=e.sent,e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(13),e.abrupt("return",{internal_acp:{acr:null}});case 22:return d=u(u({},c),{},{accessTo:Ae(t)}),f={internal_acp:{acr:d}},e.abrupt("return",f);case 25:case"end":return e.stop()}}),e,null,[[13,19]])})))).apply(this,arguments)}function Na(e){var t=qi(e).map(Bt).concat(Ki(e).map(Bt)).concat(Bi(e).map(Bt)).concat(Ui(e).map(Bt));return Array.from(new Set(t))}function ja(e){return Ba.apply(this,arguments)}function Ba(){return Ba=i(r().mark((function e(t){var n,i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:be,i=O(t),a=u(u({},be),n),e.next=5,we(i,a);case 5:return o=e.sent,e.t0=Oa,e.next=9,Fa(o,a);case 9:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 11:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function Ua(e){if(R(e))return[me.accessControl,"acl"].map((function(t){if(Array.isArray(e.internal_resourceInfo.linkedResources[t])&&1===e.internal_resourceInfo.linkedResources[t].length)return e.internal_resourceInfo.linkedResources[t][0]})).find((function(e){return void 0!==e}))}function za(e){return ft(e,he.type).includes(me.Rule)}function Va(e,t){return pn(e,me.allOf,t)}function Za(e,t){return Pn(e,me.allOf,t)}function Ha(e,t){return Vn(e,me.allOf,t)}function Wa(e){return ft(e,me.allOf)}function Ga(e,t){return pn(e,me.anyOf,t)}function qa(e,t){return Pn(e,me.anyOf,t)}function Ka(e,t){return Vn(e,me.anyOf,t)}function Ja(e){return ft(e,me.anyOf)}function Xa(e,t){return pn(e,me.noneOf,t)}function Ya(e,t){return Pn(e,me.noneOf,t)}function Qa(e,t){return Vn(e,me.noneOf,t)}function $a(e){return ft(e,me.noneOf)}function eo(e){var t=Ct({url:O(e)});return t=zn(t,he.type,me.Rule)}function to(e,t){var n=ki(e),r=new URL(Ae(n));r.hash="#".concat(t);var i=Ct({url:r.href});return i=zn(i,he.type,me.Rule)}function no(e,t){var n=St(e,t);return null===n||lt(n,he.type)!==me.Rule?null:n}function ro(e,t){var n=ki(e),r=Ae(n),i=new URL(r);i.hash="#".concat(t);var a=St(n,i.href);return null!==a&&za(a)?a:null}function io(e){return Et(e).filter(za)}function ao(e){return Et(ki(e)).filter(za)}function oo(e,t){return Tt(e,t)}function so(e,t){var n,r=ki(e);if("string"===typeof t)if(K(t))n=t;else{var i=new URL(Ae(r));i.hash="#".concat(t),n=i.href}else n=W(t)?O(t):It(t);var a=ro(e,new URL(n).hash.substring(1));return null===a?e:Si(e,Tt(r,a))}function uo(e,t){return At(e,t)}function lo(e,t){return Si(e,At(ki(e),t))}function co(e){return ft(e,me.agent).filter((function(e){return e!==me.PublicAgent&&e!==me.AuthenticatedAgent&&e!==me.CreatorAgent}))}function fo(e,t){var n=_o(e),r=xo(e),i=Eo(e),a=Vn(e,me.agent,t);return n&&(a=bo(a)),r&&(a=ko(a)),i&&(a=Ao(a)),a}function ho(e,t){return pn(e,me.agent,t)}function po(e,t){return Pn(e,me.agent,t)}function vo(e){return ft(e,me.group)}function mo(e,t){return Vn(e,me.group,t)}function go(e,t){return pn(e,me.group,t)}function yo(e,t){return Pn(e,me.group,t)}function _o(e){return ft(e,me.agent).filter((function(e){return e===me.PublicAgent})).length>0}function bo(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return pn(e,me.agent,me.PublicAgent)}function wo(e){return Pn(e,me.agent,me.PublicAgent)}function xo(e){return ft(e,me.agent).filter((function(e){return e===me.AuthenticatedAgent})).length>0}function ko(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return pn(e,me.agent,me.AuthenticatedAgent)}function So(e){return Pn(e,me.agent,me.AuthenticatedAgent)}function Eo(e){return ft(e,me.agent).filter((function(e){return e===me.CreatorAgent})).length>0}function Ao(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return pn(e,me.agent,me.CreatorAgent)}function To(e){return Pn(e,me.agent,me.CreatorAgent)}function Co(e){return ft(e,me.client).filter((function(e){return e!==ge.PublicOidcClient}))}function Po(e,t){var n=Lo(e),r=Vn(e,me.client,t);return n&&(r=Mo(r)),r}function Io(e,t){return pn(e,me.client,t)}function Ro(e,t){return Pn(e,me.client,t)}function Lo(e){return ft(e,me.client).filter((function(e){return e===ge.PublicOidcClient})).length>0}function Mo(e){return pn(e,me.client,ge.PublicOidcClient)}function Oo(e){return Pn(e,me.client,ge.PublicOidcClient)}function Fo(e){var t="## Rule: ".concat(It(e),"\n\n"),n="";_o(e)&&(n+="- Everyone\n"),xo(e)&&(n+="- All authenticated agents\n"),Eo(e)&&(n+="- The creator of this resource\n"),Lo(e)&&(n+="- Users of any client application\n");var r=co(e);r.length>0&&(n+="- The following agents:\n  - ",n+="".concat(r.join("\n  - "),"\n"));var i=vo(e);i.length>0&&(n+="- Members of the following groups:\n  - ",n+="".concat(i.join("\n  - "),"\n"));var a=Co(e);return a.length>0&&(n+="- Users of the following client applications:\n  - ",n+="".concat(a.join("\n  - "),"\n")),t+=n.length>0?"This rule applies to:\n".concat(n):"<empty>\n"}function Do(e){return ft(e,he.type).includes(me.Policy)}function No(e){var t=Ct({url:O(e)});return t=zn(t,he.type,me.Policy)}function jo(e,t){var n=St(e,t);return null!==n&&Do(n)?n:null}function Bo(e){return Et(e).filter((function(e){return!Mt(e)&&Do(e)}))}function Uo(e,t){return Tt(e,t)}function zo(e,t){return At(e,t)}function Vo(e,t){var n=Tn(e,me.allow);return!0===t.read&&(n=pn(n,me.allow,mr.read)),!0===t.append&&(n=pn(n,me.allow,mr.append)),!0===t.write&&(n=pn(n,me.allow,mr.write)),n}function Zo(e,t){var n=Tn(e,me.allow);return!0===t.read&&(n=pn(n,me.allow,me.Read)),!0===t.append&&(n=pn(n,me.allow,me.Append)),!0===t.write&&(n=pn(n,me.allow,me.Write)),n}function Ho(e){var t=ft(e,me.allow);return{read:t.includes(mr.read),append:t.includes(mr.append),write:t.includes(mr.write)}}function Wo(e){var t=ft(e,me.allow);return{read:t.includes(me.Read),append:t.includes(me.Append),write:t.includes(me.Write)}}function Go(e,t){var n=Tn(e,me.deny);return!0===t.read&&(n=pn(n,me.deny,mr.read)),!0===t.append&&(n=pn(n,me.deny,mr.append)),!0===t.write&&(n=pn(n,me.deny,mr.write)),n}function qo(e,t){var n=Tn(e,me.deny);return!0===t.read&&(n=pn(n,me.deny,me.Read)),!0===t.append&&(n=pn(n,me.deny,me.Append)),!0===t.write&&(n=pn(n,me.deny,me.Write)),n}function Ko(e){var t=ft(e,me.deny);return{read:t.includes(mr.read),append:t.includes(mr.append),write:t.includes(mr.write)}}function Jo(e){var t=ft(e,me.deny);return{read:t.includes(me.Read),append:t.includes(me.Append),write:t.includes(me.Write)}}function Xo(e,t){var n=ki(e),r=new URL(Ae(n));r.hash="#".concat(t);var i=Ct({url:r.href});return i=zn(i,he.type,me.Policy)}function Yo(e,t){var n=ki(e),r=Ae(n),i=new URL(r);i.hash="#".concat(t);var a=St(n,i.href);return qi(e).includes(i.href)&&null!==a&&Do(a)?a:null}function Qo(e,t){var n=ki(e),r=Ae(n),i=new URL(r);i.hash="#".concat(t);var a=St(n,i.href);return Bi(e).includes(i.href)&&null!==a&&Do(a)?a:null}function $o(e){var t=ki(e);return qi(e).map((function(e){return St(t,e)})).filter((function(e){return null!==e&&Do(e)}))}function es(e){var t=ki(e);return Bi(e).map((function(e){return St(t,e)})).filter((function(e){return null!==e&&Do(e)}))}function ts(e,t){var n,r=ki(e),i=t;if("string"===typeof i&&!1===K(i)){var a=new URL(Ae(r));a.hash="#".concat(t),i=a.href}return n="string"===typeof i?i:W(i)?O(i):It(i,Ae(r)),null===Yo(e,new URL(n).hash.substring(1))?e:Ji(Si(e,Tt(r,i)),n)}function ns(e,t){var n,r=ki(e),i=t;if("string"===typeof i&&!1===K(i)){var a=new URL(Ae(r));a.hash="#".concat(t),i=a.href}return n="string"===typeof i?i:W(i)?O(i):It(i,Ae(r)),null===Qo(e,new URL(n).hash.substring(1))?e:zi(Si(e,Tt(r,i)),n)}function rs(e,t){var n=ki(e);return Wi(Si(e,At(n,t)),It(t,Ae(n)))}function is(e,t){var n=ki(e);return Ni(Si(e,At(n,t)),It(t,Ae(n)))}function as(e){function t(e,t){return t?"denied":e?"allowed":"unspecified"}var n=Wo(e),r=Jo(e),i="## Policy: ".concat(It(e),"\n\n");i+="- Read: ".concat(t(n.read,r.read),"\n"),i+="- Append: ".concat(t(n.append,r.append),"\n"),i+="- Write: ".concat(t(n.write,r.write),"\n");var a=Wa(e),o=Ja(e),s=$a(e);return 0===a.length&&0===o.length&&0===s.length&&(i+="\n<no rules specified yet>\n"),a.length>0&&(i+="\nAll of these rules should match:\n",i+="- ".concat(a.join("\n- "),"\n")),o.length>0&&(i+="\nAt least one of these rules should match:\n",i+="- ".concat(o.join("\n- "),"\n")),s.length>0&&(i+="\nNone of these rules should match:\n",i+="- ".concat(s.join("\n- "),"\n")),i}function os(e){var t=new URL("access-control-resource",e).href;return u(u({},dn(t)),{},{accessTo:e})}function ss(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:os(Ae(e));return Object.assign(ce(e),{internal_acp:{acr:t,aprs:{}}})}var us={acrAsMarkdown:$i,addAcrPolicyUrl:Ni,addMemberAcrPolicyUrl:ji,addMemberPolicyUrl:Gi,addPolicyUrl:Wi,getAcrPolicyUrlAll:Bi,getMemberAcrPolicyUrlAll:Ui,getMemberPolicyUrlAll:Ki,getPolicyUrlAll:qi,hasLinkedAcr:Di,removeAcrPolicyUrl:zi,removeAcrPolicyUrlAll:Zi,removeMemberAcrPolicyUrl:Vi,removeMemberAcrPolicyUrlAll:Hi,removeMemberPolicyUrl:Xi,removeMemberPolicyUrlAll:Qi,removePolicyUrl:Ji,removePolicyUrlAll:Yi},ls={createPolicy:No,getAllowModes:Wo,getDenyModes:Jo,getPolicy:jo,getPolicyAll:Bo,policyAsMarkdown:as,removePolicy:Uo,setAllowModes:Zo,setDenyModes:qo,setPolicy:zo},cs={addAgent:ho,addForbiddenRuleUrl:Xa,addGroup:go,addOptionalRuleUrl:Ga,addRequiredRuleUrl:Va,createRule:eo,getAgentAll:co,getForbiddenRuleUrlAll:$a,getGroupAll:vo,getOptionalRuleUrlAll:Ja,getRequiredRuleUrlAll:Wa,getRule:no,getRuleAll:io,hasAuthenticated:xo,hasCreator:Eo,hasPublic:_o,removeAgent:po,removeForbiddenRuleUrl:Ya,removeGroup:yo,removeOptionalRuleUrl:qa,removeRequiredRuleUrl:Za,removeRule:oo,ruleAsMarkdown:Fo,setAgent:fo,setForbiddenRuleUrl:Qa,setGroup:mo,setOptionalRuleUrl:Ka,setRequiredRuleUrl:Ha,setRule:uo},ds={addMockAcrTo:ss,mockAcrFor:os};function fs(e,t){return t?bo(e):wo(e)}function hs(e,t){return t?ko(e):So(e)}function ps(e,t){return t?Ao(e):To(e)}var vs={getForbiddenRuleurlAll:$a,setPublic:fs,setAuthenticated:hs,setCreator:ps},ms=u(u(u(u(u(u({},{getFileWithAccessDatasets:Ca,getFileWithAcr:xa,getReferencedPolicyUrlAll:Na,getResourceInfoWithAccessDatasets:Ia,getResourceInfoWithAcr:Sa,getSolidDatasetWithAccessDatasets:Aa,getSolidDatasetWithAcr:ba,hasAccessibleAcr:Oa,saveAcrFor:La}),us),ls),cs),ds),vs),gs={createPolicy:No,getAllowModes:Wo,getDenyModes:Jo,getPolicy:jo,getPolicyAll:Bo,policyAsMarkdown:as,removePolicy:Uo,setAllowModes:Zo,setDenyModes:qo,setPolicy:zo},ys={addAgent:ho,addForbiddenRuleUrl:Xa,addGroup:go,addOptionalRuleUrl:Ga,addRequiredRuleUrl:Va,createRule:eo,getAgentAll:co,getForbiddenRuleUrlAll:$a,getGroupAll:vo,getOptionalRuleUrlAll:Ja,getRequiredRuleUrlAll:Wa,getRule:no,getRuleAll:io,hasAuthenticated:xo,hasCreator:Eo,hasPublic:_o,removeAgent:po,removeForbiddenRuleUrl:Ya,removeGroup:yo,removeOptionalRuleUrl:qa,removeRequiredRuleUrl:Za,removeRule:oo,ruleAsMarkdown:Fo,setAgent:fo,setForbiddenRuleUrl:Qa,setGroup:mo,setOptionalRuleUrl:Ka,setRequiredRuleUrl:Ha,setRule:uo},_s={addMockAcrTo:ss,mockAcrFor:os},bs={hasLinkedAcr:Di,addAcrPolicyUrl:Ni,addMemberAcrPolicyUrl:ji,getAcrPolicyUrlAll:Bi,getMemberAcrPolicyUrlAll:Ui,removeAcrPolicyUrl:zi,removeAcrPolicyUrlAll:Zi,removeMemberAcrPolicyUrl:Vi,removeMemberAcrPolicyUrlAll:Hi},ws={createControl:Ei,getControl:function(e,t,n){var r=St(ki(e),t,n);return null!==r&&ft(r,he.type).includes(me.AccessControl)?r:null},getAllControl:Ai,getControlAll:Ai,setControl:Ti,removeControl:function(e,t){var n=Tt(ki(e),t);return Si(e,n)},addPolicyUrl:Ci,getPolicyUrlAll:Pi,removePolicyUrl:Ii,removePolicyUrlAll:Ri,addMemberPolicyUrl:Li,getMemberPolicyUrlAll:Mi,removeMemberPolicyUrl:Mi,removeMemberPolicyUrlAll:Oi,getForbiddenRuleurlAll:$a,setPublic:fs,setAuthenticated:hs,setCreator:ps},xs=u(u(u(u(u(u({},{getFileWithAccessDatasets:Ca,getFileWithAcr:xa,getReferencedPolicyUrlAll:Na,getResourceInfoWithAccessDatasets:Ia,getResourceInfoWithAcr:Sa,getSolidDatasetWithAccessDatasets:Aa,getSolidDatasetWithAcr:ba,hasAccessibleAcr:Oa,saveAcrFor:La}),gs),ys),_s),bs),ws);var ks={acrAsMarkdown:$i,addAcrPolicyUrl:Ni,addMemberAcrPolicyUrl:ji,addMemberPolicyUrl:Gi,addPolicyUrl:Wi,getAcrPolicyUrlAll:Bi,getMemberAcrPolicyUrlAll:Ui,getMemberPolicyUrlAll:Ki,getPolicyUrlAll:qi,hasLinkedAcr:Di,removeAcrPolicyUrl:zi,removeAcrPolicyUrlAll:Zi,removeMemberAcrPolicyUrl:Vi,removeMemberAcrPolicyUrlAll:Hi,removeMemberPolicyUrl:Xi,removeMemberPolicyUrlAll:Qi,removePolicyUrl:Ji,removePolicyUrlAll:Yi},Ss={createPolicy:No,getAllowModes:Wo,getDenyModes:Jo,getPolicy:jo,getPolicyAll:Bo,policyAsMarkdown:as,removePolicy:Uo,setAllowModes:Zo,setDenyModes:qo,setPolicy:zo,createResourcePolicyFor:Xo,getResourceAcrPolicy:Qo,getResourceAcrPolicyAll:es,getResourcePolicy:Yo,getResourcePolicyAll:$o,removeResourceAcrPolicy:ns,removeResourcePolicy:ts,setResourceAcrPolicy:is,setResourcePolicy:rs},Es={addAgent:ho,addGroup:go,createRule:eo,getAgentAll:co,getGroupAll:vo,getRule:no,getRuleAll:io,removeAgent:po,removeGroup:yo,removeRule:oo,ruleAsMarkdown:Fo,setAgent:fo,setGroup:mo,setRule:uo,addClient:Io,getClientAll:Co,hasAnyClient:Lo,removeClient:Ro,setAnyClient:Mo,setClient:Po,removeAnyClient:Oo,hasAuthenticated:xo,hasCreator:Eo,hasPublic:_o,setAuthenticated:ko,setCreator:Ao,setPublic:bo,removeAuthenticated:So,removeCreator:To,removePublic:wo,getAnyOfRuleUrlAll:Ja,addAnyOfRuleUrl:Ga,removeAnyOfRuleUrl:qa,setAnyOfRuleUrl:Ka,getAllOfRuleUrlAll:Wa,addAllOfRuleUrl:Va,removeAllOfRuleUrl:Za,setAllOfRuleUrl:Ha,getNoneOfRuleUrlAll:$a,addNoneOfRuleUrl:Xa,removeNoneOfRuleUrl:Ya,setNoneOfRuleUrl:Qa,createResourceRuleFor:to,getResourceRule:ro,getResourceRuleAll:ao,removeResourceRule:so,setResourceRule:lo},As={addMockAcrTo:ss,mockAcrFor:os},Ts=u(u(u(u(u({},{getFileWithAccessDatasets:Ca,getFileWithAcr:xa,getLinkedAcrUrl:Ua,getReferencedPolicyUrlAll:Na,getResourceInfoWithAccessDatasets:Ia,getResourceInfoWithAcr:Sa,getSolidDatasetWithAccessDatasets:Aa,getSolidDatasetWithAcr:ba,hasAccessibleAcr:Oa,saveAcrFor:La,isAcpControlled:ja}),ks),Ss),Es),As);function Cs(e,t){return Object.assign(ce(e),{internal_acp:u(u({},e.internal_acp),{},{acr:At(e.internal_acp.acr,t)})})}function Ps(e){return e.includes("Member")?ta.memberAccessControl:ta.accessControl}function Is(e,t){var n=ca(e,t),r=ki(e),i=aa(e);return null!==i&&"undefined"!==typeof i||(i=Ct({url:Ae(r)})),ft(i,Ps(t)).includes(n)?e:Cs(e,i=er(i).addUrl(Ps(t),n).build())}function Rs(e,t){var n=Is(e,sa);return Cs(n,er(da(n,sa)).addUrl(ta.access,t).build())}function Ls(e,t){var n=Is(e,la);return Cs(n,er(da(n,la)).addUrl(ta.access,t).build())}function Ms(e,t){var n=Is(e,ua);return Cs(n,er(da(n,ua)).addUrl(ta.apply,t).build())}function Os(e,t){var n=Is(e,oa);return Cs(n,er(da(n,oa)).addUrl(ta.apply,t).build())}function Fs(e){var t=aa(e);return null===t?[]:ft(t,ta.accessControl)}function Ds(e,t,n){var r=ki(e);return Array.from(new Set(t.map((function(e){var t=St(r,e);return null!==t?ft(t,n):[]})).reduce((function(e,t){return e.concat(t)}),[])))}function Ns(e){return Ds(e,Fs(e),ta.access)}function js(e){var t=aa(e);return null===t?[]:ft(t,ta.memberAccessControl)}function Bs(e){return Ds(e,js(e),ta.access)}function Us(e){return Ds(e,js(e),ta.apply)}function zs(e){return Ds(e,Fs(e),ta.apply)}function Vs(e,t){var n=da(e,sa);return Cs(e,Pn(n,ta.access,t))}function Zs(e,t){var n=da(e,la);return Cs(e,Pn(n,ta.access,t))}function Hs(e,t){var n=da(e,ua);return Cs(e,Pn(n,ta.apply,t))}function Ws(e,t){var n=da(e,oa);return Cs(e,Pn(n,ta.apply,t))}function Gs(e,t){return Cs(e,t)}function qs(e){return ft(e,he.type).includes(me.Matcher)}function Ks(e,t){return pn(e,me.allOf,t)}function Js(e,t){return Pn(e,me.allOf,t)}function Xs(e,t){return Vn(e,me.allOf,t)}function Ys(e){return ft(e,me.allOf)}function Qs(e,t){return pn(e,me.anyOf,t)}function $s(e,t){return Pn(e,me.anyOf,t)}function eu(e,t){return Vn(e,me.anyOf,t)}function tu(e){return ft(e,me.anyOf)}function nu(e,t){return pn(e,me.noneOf,t)}function ru(e,t){return Pn(e,me.noneOf,t)}function iu(e,t){return Vn(e,me.noneOf,t)}function au(e){return ft(e,me.noneOf)}function ou(e){var t=Ct({url:O(e)});return t=zn(t,he.type,me.Matcher)}function su(e,t){var n=ki(e),r=new URL(Ae(n));r.hash="#".concat(t);var i=Ct({url:r.href});return i=zn(i,he.type,me.Matcher)}function uu(e,t){var n=St(e,t);return null!==n&&qs(n)?n:null}function lu(e,t){var n=ki(e),r=Ae(n),i=new URL(r);i.hash="#".concat(t);var a=St(n,i.href);return null!==a&&qs(a)?a:null}function cu(e){return Et(e).filter(qs)}function du(e){return Et(ki(e)).filter(qs)}function fu(e,t){return Tt(e,t)}function hu(e,t){var n,r=ki(e);if("string"===typeof t)if(K(t))n=t;else{var i=new URL(Ae(r));i.hash="#".concat(t),n=i.href}else n=W(t)?O(t):It(t);var a=lu(e,new URL(n).hash.substring(1));return null===a?e:Si(e,Tt(r,a))}function pu(e,t){return At(e,t)}function vu(e,t){return Si(e,At(ki(e),t))}function mu(e){return ft(e,me.agent).filter((function(e){return e!==me.PublicAgent&&e!==me.AuthenticatedAgent&&e!==me.CreatorAgent}))}function gu(e,t){var n=bu(e),r=ku(e),i=Au(e),a=Vn(e,me.agent,t);return n&&(a=wu(a)),r&&(a=Su(a)),i&&(a=Tu(a)),a}function yu(e,t){return pn(e,me.agent,t)}function _u(e,t){return Pn(e,me.agent,t)}function bu(e){return ft(e,me.agent).filter((function(e){return e===me.PublicAgent})).length>0}function wu(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return pn(e,me.agent,me.PublicAgent)}function xu(e){return Pn(e,me.agent,me.PublicAgent)}function ku(e){return ft(e,me.agent).filter((function(e){return e===me.AuthenticatedAgent})).length>0}function Su(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return pn(e,me.agent,me.AuthenticatedAgent)}function Eu(e){return Pn(e,me.agent,me.AuthenticatedAgent)}function Au(e){return ft(e,me.agent).filter((function(e){return e===me.CreatorAgent})).length>0}function Tu(e){if("object"===typeof arguments&&"boolean"===typeof arguments[1])throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return pn(e,me.agent,me.CreatorAgent)}function Cu(e){return Pn(e,me.agent,me.CreatorAgent)}function Pu(e){return ft(e,me.client).filter((function(e){return e!==ge.PublicOidcClient})).concat(vt(e,me.client))}function Iu(e,t){return K(t)?pn(e,me.client,t):xn(e,me.client,t)}function Ru(e,t){return K(t)?Pn(e,me.client,t):Nn(e,me.client,t)}function Lu(e){return ft(e,me.client).filter((function(e){return e===ge.PublicOidcClient})).length>0}function Mu(e){return pn(e,me.client,ge.PublicOidcClient)}var Ou={addAcrPolicyUrl:Rs,addMemberAcrPolicyUrl:Ls,addMemberPolicyUrl:Ms,addPolicyUrl:Os,getAcrPolicyUrlAll:Ns,getMemberAcrPolicyUrlAll:Bs,getMemberPolicyUrlAll:Us,getPolicyUrlAll:zs,hasLinkedAcr:Di,removeAcrPolicyUrl:Vs,removeAcrPolicyUrlAll:Zi,removeMemberAcrPolicyUrl:Zs,removeMemberAcrPolicyUrlAll:Hi,removeMemberPolicyUrl:Hs,removeMemberPolicyUrlAll:Qi,removePolicyUrl:Ws,removePolicyUrlAll:Yi},Fu={createPolicy:No,getAllowModes:Ho,getDenyModes:Ko,getPolicy:jo,getPolicyAll:Bo,removePolicy:Uo,setAllowModes:Vo,setDenyModes:Go,setPolicy:zo,createResourcePolicyFor:Xo,getResourceAcrPolicy:Qo,getResourceAcrPolicyAll:es,getResourcePolicy:Yo,getResourcePolicyAll:$o,removeResourceAcrPolicy:ns,removeResourcePolicy:ts,setResourcePolicy:Gs},Du={addAgent:yu,createMatcher:ou,getAgentAll:mu,getMatcher:uu,getMatcherAll:cu,removeAgent:_u,removeMatcher:fu,setAgent:gu,setMatcher:pu,addClient:Iu,getClientAll:Pu,hasAnyClient:Lu,removeClient:Ru,setAnyClient:Mu,setClient:function(e,t){var n=Lu(e),r=Vn(e,me.client,t);return n&&(r=Mu(r)),r},removeAnyClient:function(e){return Pn(e,me.client,ge.PublicOidcClient)},hasAuthenticated:ku,hasCreator:Au,hasPublic:bu,setAuthenticated:Su,setCreator:Tu,setPublic:wu,removeAuthenticated:Eu,removeCreator:Cu,removePublic:xu,getAnyOfMatcherUrlAll:tu,addAnyOfMatcherUrl:Qs,removeAnyOfMatcherUrl:$s,setAnyOfMatcherUrl:eu,getAllOfMatcherUrlAll:Ys,addAllOfMatcherUrl:Ks,removeAllOfMatcherUrl:Js,setAllOfMatcherUrl:Xs,getNoneOfMatcherUrlAll:au,addNoneOfMatcherUrl:nu,removeNoneOfMatcherUrl:ru,setNoneOfMatcherUrl:iu,createResourceMatcherFor:su,getResourceMatcher:lu,getResourceMatcherAll:du,removeResourceMatcher:hu,setResourceMatcher:vu},Nu={addMockAcrTo:ss,mockAcrFor:os},ju=u(u(u(u(u({},{getFileWithAccessDatasets:Ca,getFileWithAcr:xa,getReferencedPolicyUrlAll:Na,getResourceInfoWithAccessDatasets:Ia,getResourceInfoWithAcr:Sa,getSolidDatasetWithAccessDatasets:Aa,getSolidDatasetWithAcr:ba,hasAccessibleAcr:Oa,saveAcrFor:La,isAcpControlled:ja,getVcAccess:_a,setVcAccess:ma}),Ou),Fu),Du),Nu),Bu=[me.agent,me.group];function Uu(e,t,n){if(e.inaccessibleUrls.length>0)return null;var r=e.acrPolicies.filter((function(r){return Hu(r,t,n,e)})),i=e.policies.filter((function(r){return Hu(r,t,n,e)})),a=r.reduce((function(e,t){var n=u({},e),r=Wo(t);return r.read&&(n.controlRead=!0),r.write&&(n.controlWrite=!0),n}),{read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1}),o=i.reduce((function(e,t){var n=u({},e),r=Wo(t);return r.read&&(n.read=!0),r.append&&(n.append=!0),r.write&&(n.write=!0),n}),a),s=r.reduce((function(e,t){var n=u({},e),r=Jo(t);return!0===r.read&&(n.controlRead=!1),!0===r.write&&(n.controlWrite=!1),n}),o);return i.reduce((function(e,t){var n=u({},e),r=Jo(t);return!0===r.read&&(n.read=!1),!0===r.append&&(n.append=!1),!0===r.write&&(n.write=!1),n}),s)}function zu(e,t){return Uu(e,me.agent,t)}function Vu(e,t){return Uu(e,me.group,t)}function Zu(e){return Uu(e,me.agent,me.PublicAgent)}function Hu(e,t,n,r){var i=ft(e,me.allow),a=ft(e,me.deny);if(i.length+a.length===0)return!1;var o=Wa(e).map((function(e){return r.rules.find((function(t){return Rt(t)===e}))})),s=Ja(e).map((function(e){return r.rules.find((function(t){return Rt(t)===e}))})),u=$a(e).map((function(e){return r.rules.find((function(t){return Rt(t)===e}))}));return o.every((function(e){return Gu(e,t,n)}))&&(0===s.length||s.some((function(e){return Gu(e,t,n)})))&&0===u.length}function Wu(e,t){var n=ft(e,me.allow),r=ft(e,me.deny);return!0===t.read&&r.includes(me.Read)||!1===t.read&&n.includes(me.Read)&&!r.includes(me.Read)||!0===t.append&&r.includes(me.Append)||!1===t.append&&n.includes(me.Append)&&!r.includes(me.Append)||!0===t.write&&r.includes(me.Write)||!1===t.write&&n.includes(me.Write)&&!r.includes(me.Write)}function Gu(e,t,n){var r=!0;return Bu.forEach((function(t){r&&(r=null===ct(e,t))})),r||ft(e,t).includes(n)}function qu(e,t){if(e.inaccessibleUrls.length>0)return null;var n={},r=function(e,t){var n=new Set;return e.rules.forEach((function(e){ft(e,t).filter((function(e){return![me.PublicAgent,me.CreatorAgent,me.AuthenticatedAgent].includes(e)||t!==me.agent})).forEach((function(e){return n.add(e)}))})),n}(e,t);return r.forEach((function(r){var i=Uu(e,t,r);n[r]=i})),n}function Ku(e){return qu(e,me.group)}function Ju(e){return qu(e,me.agent)}function Xu(e,t,n,r,i){var a,o,s,c,d;if(!Oa(e)||t.inaccessibleUrls.length>0)return null;var f=Uu(t,n,r);if(null===f)return null;var h=t.acrPolicies.filter((function(e){return Hu(e,n,r,t)})),p=t.policies.filter((function(e){return Hu(e,n,r,t)})),v=h.filter((function(e){return Wu(e,{read:i.controlRead,write:i.controlWrite})})),m=p.filter((function(e){return Wu(e,{read:i.read,append:i.append,write:i.write})})),g=v.filter((function(e){return el(e,n,r,t)})),y=m.filter((function(e){return el(e,n,r,t)})),b=Uu(u(u({},t),{},{acrPolicies:t.acrPolicies.filter((function(e){return!g.includes(e)})),policies:t.policies.filter((function(e){return!y.includes(e)}))}),n,r);if(null===b)return null;var w=e;g.forEach((function(i){var a=nl(i,e,t,n,r),o=l(a,2),s=o[0],u=o[1];w=is(w,s),w=u.reduce(lo,w)})),y.forEach((function(i){var a=nl(i,e,t,n,r),o=l(a,2),s=o[0],u=o[1];w=rs(w,s),w=u.reduce(lo,w)}));var x="rule_".concat(encodeURIComponent("".concat(n,"_").concat(r))),k=to(e,x);k=Vn(k,n,r);var S=null!==(a=i.controlRead)&&void 0!==a?a:f.controlRead,E=null!==(o=i.controlWrite)&&void 0!==o?o:f.controlWrite,A=g;if(S!==b.controlRead||E!==b.controlWrite){var T=_.v4(),C=Xo(e,T);C=Zo(C,{read:!0===S,append:!1,write:!0===E}),C=pn(C,me.allOf,k),w=lo(w=is(w,C),k),A=v}var P=null!==(s=i.read)&&void 0!==s?s:f.read,I=null!==(c=i.append)&&void 0!==c?c:f.append,R=null!==(d=i.write)&&void 0!==d?d:f.write,L=y;if(P!==b.read||I!==b.append||R!==b.write){var M=_.v4(),O=Xo(e,M);O=Zo(O,{read:!0===P,append:!0===I,write:!0===R}),O=pn(O,me.allOf,k),w=lo(w=rs(w,O),k),L=m}return A.forEach((function(e){w=zi(w,Rt(e))})),L.forEach((function(e){w=Ji(w,Rt(e))})),w}function Yu(e,t,n,r){return Xu(e,t,me.agent,n,r)}function Qu(e,t,n,r){return Xu(e,t,me.group,n,r)}function $u(e,t,n){return Xu(e,t,me.agent,me.PublicAgent,n)}function el(e,t,n,r){var i=ft(e,me.allOf).map((function(e){return r.rules.find((function(t){return Rt(t)===e}))})).some((function(e){return tl(e,t,n)})),a=ft(e,me.anyOf).map((function(e){return r.rules.find((function(t){return Rt(t)===e}))})).some((function(e){return tl(e,t,n)})),o=ft(e,me.noneOf).map((function(e){return r.rules.find((function(t){return Rt(t)===e}))})).some((function(e){return tl(e,t,n)}));return i||a||o}function tl(e,t,n){var r=[];return Bu.forEach((function(i){var a=ft(e,i).filter((function(e){return e!==n||i!==t}));r.push.apply(r,o(a))})),r.length>0}function nl(e,t,n,r,i){var a=_.v4(),o=rl(ft(e,me.allOf),t,n,a,r,i),s=rl(ft(e,me.anyOf),t,n,a,r,i),u=rl(ft(e,me.noneOf),t,n,a,r,i),l=Xo(t,encodeURI(Rt(e))+a);return ft(e,me.allow).forEach((function(e){l=pn(l,me.allow,e)})),ft(e,me.deny).forEach((function(e){l=pn(l,me.deny,e)})),o.forEach((function(e){l=pn(l,me.allOf,e)})),s.forEach((function(e){l=pn(l,me.anyOf,e)})),u.forEach((function(e){l=pn(l,me.noneOf,e)})),[l,o.concat(s).concat(u)]}function rl(e,t,n,r,i,a){return e.map((function(e){var o=n.rules.find((function(t){return Rt(t)===e}));if("undefined"===typeof o)return null;var s=to(t,encodeURI(Rt(o))+r),u=!1;return Bu.forEach((function(e){ft(o,e).forEach((function(t){e===i&&t===a||(u=!0,s=pn(s,e,t))}))})),u?s:null})).filter(il)}function il(e){return null!==e}function al(e){return ol.apply(this,arguments)}function ol(){return ol=i(r().mark((function e(t){var n,i,a,o,s,l,c,d,f,h,p,v,m,g,y,_=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>1&&void 0!==_[1]?_[1]:be,i=Bi(t),a=qi(t),o=ul(i).concat(ul(a)),e.next=6,ll(o,n);case 6:return s=e.sent,l=dl(i,s).filter(il),c=dl(a,s).filter(il),d=new Set,l.forEach((function(e){fl(e).forEach((function(e){d.add(e)}))})),c.forEach((function(e){fl(e).forEach((function(e){d.add(e)}))})),f=Array.from(d),h=f.map((function(e){return sl(e)})),p=h.filter((function(e){return!o.includes(e)})),e.next=17,ll(p,n);case 17:return v=e.sent,m=u(u({},s),v),g=dl(f,m).filter(il),y=Object.keys(m).filter((function(e){return null===m[e]})),e.abrupt("return",{inaccessibleUrls:y,acrPolicies:l,policies:c,rules:g});case 22:case"end":return e.stop()}}),e)}))),ol.apply(this,arguments)}function sl(e){var t=new URL(e);return t.hash="",t.href}function ul(e){var t=[];return e.forEach((function(e){var n=sl(e);t.includes(n)||t.push(n)})),t}function ll(e,t){return cl.apply(this,arguments)}function cl(){return cl=i(r().mark((function e(t,n){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Array.from(new Set(t)),o={},e.next=4,Promise.all(a.map(function(){var e=i(r().mark((function e(t){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zt(t,n);case 3:i=e.sent,o[t]=i,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o[t]=null;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),cl.apply(this,arguments)}function dl(e,t){return e.map((function(e){var n=sl(e),r=t[n];return r?St(r,e):null}))}function fl(e){return Wa(e).concat(Ja(e)).concat($a(e))}function hl(e,t){var n,r,i,a;if(e.controlRead!==e.controlWrite)throw new Error("For Pods using Web Access Control, controlRead and controlWrite must be equal.");return{read:null!==(n=e.read)&&void 0!==n?n:t.read,append:null!==(r=e.append)&&void 0!==r?r:t.append,write:null!==(i=e.write)&&void 0!==i?i:t.write,control:null!==(a=e.controlRead)&&void 0!==a?a:t.control}}function pl(e){return{read:e.read,write:e.write,append:e.append,controlRead:e.control,controlWrite:e.control}}function vl(e,t,n,r){return ml.apply(this,arguments)}function ml(){return(ml=i(r().mark((function e(t,n,i,a){var o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr(t,a);case 2:if(o=e.sent,null!==(s=i(br(t,o),n))){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",pl(s));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gl(){return(gl=i(r().mark((function e(t,n,i){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr(t,i);case 2:if(a=e.sent,null!==(o=n(br(t,a)))){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",pl(o));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yl(e,t,n){return _l.apply(this,arguments)}function _l(){return(_l=i(r().mark((function e(t,n,i){var a,o,s,u,c,d,f,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr(t,i);case 2:if(a=e.sent,null!==(o=n(br(t,a)))){e.next=6;break}return e.abrupt("return",null);case 6:for(s={},u=0,c=Object.entries(o);u<c.length;u++)d=l(c[u],2),f=d[0],h=d[1],s[f]=pl(h);return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bl(e,t){return vl(e,t,Ur,arguments.length>2&&void 0!==arguments[2]?arguments[2]:be)}function wl(e,t){return vl(e,t,Yr,arguments.length>2&&void 0!==arguments[2]?arguments[2]:be)}function xl(e){return function(e,t,n){return gl.apply(this,arguments)}(e,oi,arguments.length>1&&void 0!==arguments[1]?arguments[1]:be)}function kl(e){return yl(e,zr,arguments.length>1&&void 0!==arguments[1]?arguments[1]:be)}function Sl(e){return yl(e,Qr,arguments.length>1&&void 0!==arguments[1]?arguments[1]:be)}function El(e,t){return Al.apply(this,arguments)}function Al(){return Al=i(r().mark((function e(t,n){var i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Br(t)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,nr(t,n);case 4:if(i=e.sent,!Tr(a=br(t,i))){e.next=10;break}o=Er(a),e.next=15;break;case 10:if(!Lr(a)){e.next=14;break}o=Fr(a),e.next=15;break;case 14:return e.abrupt("return",null);case 15:return e.abrupt("return",Sr(a,o));case 16:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}function Tl(e,t,n){return Cl.apply(this,arguments)}function Cl(){return Cl=i(r().mark((function e(t,n,i){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,Dr(t,n,i);case 4:return a=e.sent,e.abrupt("return",Sr(t,a));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),Cl.apply(this,arguments)}function Pl(e,t,n,r,i){return Il.apply(this,arguments)}function Il(){return(Il=i(r().mark((function e(t,n,i,a,o){var s,u,l,c,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,El(t,o);case 2:if(null!==(s=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return u=Rr(s),l=i(s),c=hl(n,l),d=a(u,c),e.abrupt("return",Tl(s,d,o));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rl(e,t,n,r,i,a){return Ll.apply(this,arguments)}function Ll(){return(Ll=i(r().mark((function e(t,n,i,a,o,s){var u,l,c,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,El(t,s);case 2:if(null!==(u=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return l=a(u,n),c=Rr(u),d=hl(i,l),f=o(c,n,d),e.abrupt("return",Tl(u,f,s));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ml(e,t,n){return Ol.apply(this,arguments)}function Ol(){return Ol=i(r().mark((function e(t,n,i){var a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:be,e.abrupt("return",Rl(t,n,i,Ur,Hr,a));case 2:case"end":return e.stop()}}),e)}))),Ol.apply(this,arguments)}function Fl(e,t,n){return Dl.apply(this,arguments)}function Dl(){return Dl=i(r().mark((function e(t,n,i){var a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:be,e.abrupt("return",Rl(t,n,i,Yr,ai,a));case 2:case"end":return e.stop()}}),e)}))),Dl.apply(this,arguments)}function Nl(e,t){return jl.apply(this,arguments)}function jl(){return jl=i(r().mark((function e(t,n){var i,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>2&&void 0!==a[2]?a[2]:be,e.abrupt("return",Pl(t,n,oi,li,i));case 2:case"end":return e.stop()}}),e)}))),jl.apply(this,arguments)}var Bl=Object.freeze({__proto__:null,getAccessFor:Ul,getAccessForAll:Vl,getAgentAccess:Gl,getAgentAccessAll:Xl,getGroupAccess:Ql,getGroupAccessAll:ec,getPublicAccess:ic,setAccessFor:Hl,setAgentAccess:Kl,setGroupAccess:nc,setPublicAccess:oc});function Ul(e,t){return zl.apply(this,arguments)}function zl(){return zl=i(r().mark((function e(t,n){var i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.length>2&&void 0!==o[2]?o[2]:be,a=o.length>3&&void 0!==o[3]?o[3]:be,"agent"!==n){e.next=6;break}if("string"===typeof i){e.next=5;break}throw new Error("When reading Agent-specific access, the given agent cannot be left undefined.");case 5:return e.abrupt("return",Gl(t,i,a));case 6:if("group"!==n){e.next=10;break}if("string"===typeof i){e.next=9;break}throw new Error("When reading Group-specific access, the given group cannot be left undefined.");case 9:return e.abrupt("return",Ql(t,i,a));case 10:if("public"!==n){e.next=14;break}if("string"!==typeof i){e.next=13;break}throw new Error("When reading public access, no actor type should be specified (here [".concat(i,"])."));case 13:return e.abrupt("return",ic(t,i));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}function Vl(e,t){return Zl.apply(this,arguments)}function Zl(){return Zl=i(r().mark((function e(t,n){var i,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.length>2&&void 0!==a[2]?a[2]:be,"agent"!==n){e.next=3;break}return e.abrupt("return",Xl(t,i));case 3:if("group"!==n){e.next=5;break}return e.abrupt("return",ec(t,i));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)}))),Zl.apply(this,arguments)}function Hl(e,t,n){return Wl.apply(this,arguments)}function Wl(){return Wl=i(r().mark((function e(t,n,i){var a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>3&&void 0!==s[3]?s[3]:be,o=s.length>4&&void 0!==s[4]?s[4]:be,"agent"!==n){e.next=6;break}if("string"===typeof a){e.next=5;break}throw new Error("When writing Agent-specific access, the given agent cannot be left undefined.");case 5:return e.abrupt("return",Kl(t,a,i,o));case 6:if("group"!==n){e.next=10;break}if("string"===typeof a){e.next=9;break}throw new Error("When writing Group-specific access, the given group cannot be left undefined.");case 9:return e.abrupt("return",nc(t,a,i,o));case 10:if("public"!==n){e.next=14;break}if("string"!==typeof a){e.next=13;break}throw new Error("When writing public access, no actor type should be specified (here [".concat(a,"])."));case 13:return e.abrupt("return",oc(t,i,a));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)}))),Wl.apply(this,arguments)}function Gl(e,t){return ql.apply(this,arguments)}function ql(){return ql=i(r().mark((function e(t,n){var i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:be,e.next=3,Sa(t,i);case 3:if(!Oa(a=e.sent)){e.next=9;break}return e.next=7,al(a,i);case 7:return o=e.sent,e.abrupt("return",zu(o,n));case 9:if(!Br(a)){e.next=11;break}return e.abrupt("return",bl(a,n,i));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),ql.apply(this,arguments)}function Kl(e,t,n){return Jl.apply(this,arguments)}function Jl(){return Jl=i(r().mark((function e(t,n,i){var a,o,s,u,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:be,e.next=3,Sa(t,a);case 3:if(!Oa(o=e.sent)){e.next=22;break}return e.next=7,al(o,a);case 7:if(s=e.sent,!(u=Yu(o,s,n,i))){e.next=21;break}return e.prev=10,e.next=13,La(u,a);case 13:return e.next=15,Gl(t,n,a);case 15:return e.abrupt("return",e.sent);case 18:return e.prev=18,e.t0=e.catch(10),e.abrupt("return",null);case 21:case 29:return e.abrupt("return",null);case 22:if(!Br(o)){e.next=29;break}if(i.controlRead===i.controlWrite){e.next=25;break}throw new Error("When setting access for a Resource in a Pod implementing Web Access Control (i.e. [".concat(Te(o),"]), `controlRead` and `controlWrite` should have the same value."));case 25:return l=i,e.next=28,Ml(o,n,l,a);case 28:return e.abrupt("return",bl(o,n,a));case 30:case"end":return e.stop()}}),e,null,[[10,18]])}))),Jl.apply(this,arguments)}function Xl(e){return Yl.apply(this,arguments)}function Yl(){return Yl=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:be,e.next=3,Sa(t,n);case 3:if(!Oa(i=e.sent)){e.next=9;break}return e.next=7,al(i,n);case 7:return a=e.sent,e.abrupt("return",Ju(a));case 9:if(!Br(i)){e.next=11;break}return e.abrupt("return",kl(i,n));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),Yl.apply(this,arguments)}function Ql(e,t){return $l.apply(this,arguments)}function $l(){return $l=i(r().mark((function e(t,n){var i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:be,e.next=3,Sa(t,i);case 3:if(!Oa(a=e.sent)){e.next=9;break}return e.next=7,al(a,i);case 7:return o=e.sent,e.abrupt("return",Vu(o,n));case 9:if(!Br(a)){e.next=11;break}return e.abrupt("return",wl(a,n,i));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),$l.apply(this,arguments)}function ec(e){return tc.apply(this,arguments)}function tc(){return tc=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:be,e.next=3,Sa(t,n);case 3:if(!Oa(i=e.sent)){e.next=9;break}return e.next=7,al(i,n);case 7:return a=e.sent,e.abrupt("return",Ku(a));case 9:if(!Br(i)){e.next=11;break}return e.abrupt("return",Sl(i,n));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),tc.apply(this,arguments)}function nc(e,t,n){return rc.apply(this,arguments)}function rc(){return rc=i(r().mark((function e(t,n,i){var a,o,s,u,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:be,e.next=3,Sa(t,a);case 3:if(!Oa(o=e.sent)){e.next=22;break}return e.next=7,al(o,a);case 7:if(s=e.sent,!(u=Qu(o,s,n,i))){e.next=21;break}return e.prev=10,e.next=13,La(u,a);case 13:return e.next=15,Ql(t,n,a);case 15:return e.abrupt("return",e.sent);case 18:return e.prev=18,e.t0=e.catch(10),e.abrupt("return",null);case 21:case 29:return e.abrupt("return",null);case 22:if(!Br(o)){e.next=29;break}if(i.controlRead===i.controlWrite){e.next=25;break}throw new Error("When setting access for a Resource in a Pod implementing Web Access Control (i.e. [".concat(Te(o),"]), `controlRead` and `controlWrite` should have the same value."));case 25:return l=i,e.next=28,Fl(o,n,l,a);case 28:return e.abrupt("return",wl(o,n,a));case 30:case"end":return e.stop()}}),e,null,[[10,18]])}))),rc.apply(this,arguments)}function ic(e){return ac.apply(this,arguments)}function ac(){return ac=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:be,e.next=3,Sa(t,n);case 3:if(!Oa(i=e.sent)){e.next=9;break}return e.next=7,al(i,n);case 7:return a=e.sent,e.abrupt("return",Zu(a));case 9:if(!Br(i)){e.next=11;break}return e.abrupt("return",xl(i,n));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}function oc(e,t){return sc.apply(this,arguments)}function sc(){return sc=i(r().mark((function e(t,n){var i,a,o,s,u,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]?l[2]:be,e.next=3,Sa(t,i);case 3:if(!Oa(a=e.sent)){e.next=22;break}return e.next=7,al(a,i);case 7:if(o=e.sent,!(s=$u(a,o,n))){e.next=21;break}return e.prev=10,e.next=13,La(s,i);case 13:return e.next=15,ic(t,i);case 15:return e.abrupt("return",e.sent);case 18:return e.prev=18,e.t0=e.catch(10),e.abrupt("return",null);case 21:case 29:return e.abrupt("return",null);case 22:if(!Br(a)){e.next=29;break}if(n.controlRead===n.controlWrite){e.next=25;break}throw new Error("When setting access for a Resource in a Pod implementing Web Access Control (i.e. [".concat(Te(a),"]), `controlRead` and `controlWrite` should have the same value."));case 25:return u=n,e.next=28,Nl(a,u,i);case 28:return e.abrupt("return",xl(a,i));case 30:case"end":return e.stop()}}),e,null,[[10,18]])}))),sc.apply(this,arguments)}var uc=Object.freeze({__proto__:null,getAccessFor:Ul,getAccessForAll:Vl,getAgentAccess:Gl,getAgentAccessAll:Xl,getGroupAccess:Ql,getGroupAccessAll:ec,getPublicAccess:ic,setAccessFor:Hl,setAgentAccess:Kl,setGroupAccess:nc,setPublicAccess:oc}),lc=[me.agent];function cc(e,t,n){if(e.inaccessibleUrls.length>0)return null;var r=e.acrPolicies.filter((function(r){return hc(r,t,n,e)})),i=e.policies.filter((function(r){return hc(r,t,n,e)})),a=r.reduce((function(e,t){var n=u({},e),r=Ho(t);return r.read&&(n.controlRead=!0),r.write&&(n.controlWrite=!0),n}),{read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1}),o=i.reduce((function(e,t){var n=u({},e),r=Ho(t);return r.read&&(n.read=!0),r.append&&(n.append=!0),r.write&&(n.write=!0),n}),a),s=r.reduce((function(e,t){var n=u({},e),r=Ko(t);return!0===r.read&&(n.controlRead=!1),!0===r.write&&(n.controlWrite=!1),n}),o);return i.reduce((function(e,t){var n=u({},e),r=Ko(t);return!0===r.read&&(n.read=!1),!0===r.append&&(n.append=!1),!0===r.write&&(n.write=!1),n}),s)}function dc(e,t){return cc(e,me.agent,t)}function fc(e){return cc(e,me.agent,me.PublicAgent)}function hc(e,t,n,r){var i=ft(e,me.allow),a=ft(e,me.deny);if(i.length+a.length===0)return!1;var o=Ys(e).map((function(e){return r.matchers.find((function(t){return Rt(t)===e}))})),s=tu(e).map((function(e){return r.matchers.find((function(t){return Rt(t)===e}))})),u=au(e).map((function(e){return r.matchers.find((function(t){return Rt(t)===e}))}));return o.every((function(e){return vc(e,t,n)}))&&(0===s.length||s.some((function(e){return vc(e,t,n)})))&&o.length+s.length>0&&0===u.length}function pc(e,t){var n=ft(e,me.allow),r=ft(e,me.deny);return!0===t.read&&r.includes(mr.read)||!1===t.read&&n.includes(mr.read)&&!r.includes(mr.read)||!0===t.append&&r.includes(mr.append)||!1===t.append&&n.includes(mr.append)&&!r.includes(mr.append)||!0===t.write&&r.includes(mr.write)||!1===t.write&&n.includes(mr.write)&&!r.includes(mr.write)}function vc(e,t,n){return ft(e,t).includes(n)}function mc(e,t){if(e.inaccessibleUrls.length>0)return null;var n={},r=function(e,t){var n=new Set;return e.matchers.forEach((function(e){ft(e,t).filter((function(e){return![me.PublicAgent,me.CreatorAgent,me.AuthenticatedAgent].includes(e)||t!==me.agent})).forEach((function(e){return n.add(e)}))})),n}(e,t);return r.forEach((function(r){var i=cc(e,t,r);n[r]=i})),n}function gc(e){return mc(e,me.agent)}function yc(e,t,n,r,i){var a,o,s,c,d;if(!Oa(e)||t.inaccessibleUrls.length>0)return null;var f=cc(t,n,r);if(null===f)return null;var h=t.acrPolicies.filter((function(e){return hc(e,n,r,t)})),p=t.policies.filter((function(e){return hc(e,n,r,t)})),v=h.filter((function(e){return pc(e,{read:i.controlRead,write:i.controlWrite})})),m=p.filter((function(e){return pc(e,{read:i.read,append:i.append,write:i.write})})),g=v.filter((function(e){return wc(e,n,r,t)})),y=m.filter((function(e){return wc(e,n,r,t)})),b=cc(u(u({},t),{},{acrPolicies:t.acrPolicies.filter((function(e){return!g.includes(e)})),policies:t.policies.filter((function(e){return!y.includes(e)}))}),n,r);if(null===b)return null;var w=e;g.forEach((function(i){var a=kc(i,e,t,n,r),o=l(a,2),s=o[0],u=o[1];w=is(w,s),w=u.reduce(vu,w)})),y.forEach((function(i){var a=kc(i,e,t,n,r),o=l(a,2),s=o[0],u=o[1];w=rs(w,s),w=u.reduce(vu,w)}));var x="matcher_".concat(encodeURIComponent("".concat(n,"_").concat(r))),k=su(e,x);k=Vn(k,n,r);var S=null!==(a=i.controlRead)&&void 0!==a?a:f.controlRead,E=null!==(o=i.controlWrite)&&void 0!==o?o:f.controlWrite,A=g;if(S!==b.controlRead||E!==b.controlWrite){var T=_.v4(),C=Xo(e,T);C=Vo(C,{read:!0===S,append:!1,write:!0===E}),C=pn(C,me.allOf,k),w=vu(w=is(w,C),k),A=v}var P=null!==(s=i.read)&&void 0!==s?s:f.read,I=null!==(c=i.append)&&void 0!==c?c:f.append,R=null!==(d=i.write)&&void 0!==d?d:f.write,L=y;if(P!==b.read||I!==b.append||R!==b.write){var M=_.v4(),O=Xo(e,M);O=Vo(O,{read:!0===P,append:!0===I,write:!0===R}),O=pn(O,me.allOf,k),w=vu(w=rs(w,O),k),L=m}return A.forEach((function(e){w=zi(w,Rt(e))})),L.forEach((function(e){w=Ji(w,Rt(e))})),w}function _c(e,t,n,r){return yc(e,t,me.agent,n,r)}function bc(e,t,n){return yc(e,t,me.agent,me.PublicAgent,n)}function wc(e,t,n,r){var i=ft(e,me.allOf).map((function(e){return r.matchers.find((function(t){return Rt(t)===e}))})).some((function(e){return xc(e,t,n)})),a=ft(e,me.anyOf).map((function(e){return r.matchers.find((function(t){return Rt(t)===e}))})).some((function(e){return xc(e,t,n)})),o=ft(e,me.noneOf).map((function(e){return r.matchers.find((function(t){return Rt(t)===e}))})).some((function(e){return xc(e,t,n)}));return i||a||o}function xc(e,t,n){var r=[];return lc.forEach((function(i){var a=ft(e,i).filter((function(e){return e!==n||i!==t}));r.push.apply(r,o(a))})),r.length>0}function kc(e,t,n,r,i){var a=_.v4(),o=Sc(ft(e,me.allOf),t,n,a,r,i),s=Sc(ft(e,me.anyOf),t,n,a,r,i),u=Sc(ft(e,me.noneOf),t,n,a,r,i),l=Xo(t,encodeURI(Rt(e))+a);return ft(e,me.allow).forEach((function(e){l=pn(l,me.allow,e)})),ft(e,me.deny).forEach((function(e){l=pn(l,me.deny,e)})),o.forEach((function(e){l=pn(l,me.allOf,e)})),s.forEach((function(e){l=pn(l,me.anyOf,e)})),u.forEach((function(e){l=pn(l,me.noneOf,e)})),[l,o.concat(s).concat(u)]}function Sc(e,t,n,r,i,a){return e.map((function(e){var o=n.matchers.find((function(t){return Rt(t)===e}));if("undefined"===typeof o)return null;var s=su(t,encodeURI(Rt(o))+r),u=!1;return lc.forEach((function(e){ft(o,e).forEach((function(t){e===i&&t===a||(u=!0,s=pn(s,e,t))}))})),u?s:null})).filter(Ec)}function Ec(e){return null!==e}function Ac(e){return Tc.apply(this,arguments)}function Tc(){return Tc=i(r().mark((function e(t){var n,i,a,o,s,l,c,d,f,h,p,v,m,g,y,_=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>1&&void 0!==_[1]?_[1]:be,i=Bi(t),a=qi(t),o=Pc(i).concat(Pc(a)),e.next=6,Ic(o,n);case 6:return s=e.sent,l=Lc(i,s).filter(Ec),c=Lc(a,s).filter(Ec),d=new Set,l.forEach((function(e){Mc(e).forEach((function(e){d.add(e)}))})),c.forEach((function(e){Mc(e).forEach((function(e){d.add(e)}))})),f=Array.from(d),h=f.map((function(e){return Cc(e)})),p=h.filter((function(e){return!o.includes(e)})),e.next=17,Ic(p,n);case 17:return v=e.sent,m=u(u({},s),v),g=Lc(f,m).filter(Ec),y=Object.keys(m).filter((function(e){return null===m[e]})),e.abrupt("return",{inaccessibleUrls:y,acrPolicies:l,policies:c,matchers:g});case 22:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}function Cc(e){var t=new URL(e);return t.hash="",t.href}function Pc(e){var t=[];return e.forEach((function(e){var n=Cc(e);t.includes(n)||t.push(n)})),t}function Ic(e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=i(r().mark((function e(t,n){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Array.from(new Set(t)),o={},e.next=4,Promise.all(a.map(function(){var e=i(r().mark((function e(t){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zt(t,n);case 3:i=e.sent,o[t]=i,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o[t]=null;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),Rc.apply(this,arguments)}function Lc(e,t){return e.map((function(e){var n=Cc(e),r=t[n];return r?St(r,e):null}))}function Mc(e){return Ys(e).concat(tu(e)).concat(au(e))}function Oc(e,t){return Fc.apply(this,arguments)}function Fc(){return Fc=i(r().mark((function e(t,n){var i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:be,e.next=3,Sa(t,i);case 3:if(!Oa(a=e.sent)){e.next=9;break}return e.next=7,Ac(a,i);case 7:return o=e.sent,e.abrupt("return",dc(o,n));case 9:if(!Br(a)){e.next=11;break}return e.abrupt("return",bl(a,n,i));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),Fc.apply(this,arguments)}function Dc(){return Dc=i(r().mark((function e(t,n,i){var a,o,s,u,l,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:be,e.next=3,Sa(t,a);case 3:if(!Oa(o=e.sent)){e.next=22;break}return e.next=7,Ac(o,a);case 7:if(s=e.sent,!(u=_c(o,s,n,i))){e.next=21;break}return e.prev=10,e.next=13,La(u,a);case 13:return e.next=15,Oc(t,n,a);case 15:return e.abrupt("return",e.sent);case 18:return e.prev=18,e.t0=e.catch(10),e.abrupt("return",null);case 21:case 29:return e.abrupt("return",null);case 22:if(!Br(o)){e.next=29;break}if(i.controlRead===i.controlWrite){e.next=25;break}throw new Error("When setting access for a Resource in a Pod implementing Web Access Control (i.e. [".concat(Te(o),"]), `controlRead` and `controlWrite` should have the same value."));case 25:return l=i,e.next=28,Ml(o,n,l,a);case 28:return e.abrupt("return",bl(o,n,a));case 30:case"end":return e.stop()}}),e,null,[[10,18]])}))),Dc.apply(this,arguments)}function Nc(){return Nc=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:be,e.next=3,Sa(t,n);case 3:if(!Oa(i=e.sent)){e.next=9;break}return e.next=7,Ac(i,n);case 7:return a=e.sent,e.abrupt("return",gc(a));case 9:if(!Br(i)){e.next=11;break}return e.abrupt("return",kl(i,n));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),Nc.apply(this,arguments)}function jc(e){return Bc.apply(this,arguments)}function Bc(){return Bc=i(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:be,e.next=3,Sa(t,n);case 3:if(!Oa(i=e.sent)){e.next=9;break}return e.next=7,Ac(i,n);case 7:return a=e.sent,e.abrupt("return",fc(a));case 9:if(!Br(i)){e.next=11;break}return e.abrupt("return",xl(i,n));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),Bc.apply(this,arguments)}function Uc(){return Uc=i(r().mark((function e(t,n){var i,a,o,s,u,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]?l[2]:be,e.next=3,Sa(t,i);case 3:if(!Oa(a=e.sent)){e.next=22;break}return e.next=7,Ac(a,i);case 7:if(o=e.sent,!(s=bc(a,o,n))){e.next=21;break}return e.prev=10,e.next=13,La(s,i);case 13:return e.next=15,jc(t,i);case 15:return e.abrupt("return",e.sent);case 18:return e.prev=18,e.t0=e.catch(10),e.abrupt("return",null);case 21:case 29:return e.abrupt("return",null);case 22:if(!Br(a)){e.next=29;break}if(n.controlRead===n.controlWrite){e.next=25;break}throw new Error("When setting access for a Resource in a Pod implementing Web Access Control (i.e. [".concat(Te(a),"]), `controlRead` and `controlWrite` should have the same value."));case 25:return u=n,e.next=28,Nl(a,u,i);case 28:return e.abrupt("return",xl(a,i));case 30:case"end":return e.stop()}}),e,null,[[10,18]])}))),Uc.apply(this,arguments)}var zc=Object.freeze({__proto__:null,getAccessFor:Ul,getAccessForAll:Vl,getAgentAccess:Oc,getAgentAccessAll:function(e){return Nc.apply(this,arguments)},getPublicAccess:jc,setAccessFor:Hl,setAgentAccess:function(e,t,n){return Dc.apply(this,arguments)},setPublicAccess:function(e,t){return Uc.apply(this,arguments)}});function Vc(e,t){return Zc.apply(this,arguments)}function Zc(){return(Zc=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t.internal_resourceInfo.aclUrl){e.next=2;break}return e.abrupt("return",we(t.internal_resourceInfo.aclUrl,n));case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hc(e,t,n){var r=dt(t,ta.allOf).map((function(t){return St(ki(e),t)})).filter((function(e){return null!==e})),i=r.every((function(e){return dt(e,ta.agent).includes(n)})),a=dt(t,ta.anyOf).map((function(t){return St(ki(e),t)})).filter((function(e){return null!==e})),o=a.some((function(e){return dt(e,ta.agent).includes(n)})),s=dt(t,ta.noneOf).map((function(t){return St(ki(e),t)})).filter((function(e){return null!==e})),u=s.some((function(e){return dt(e,ta.agent).includes(n)}));return r.length+a.length>0&&(0===r.length||i)&&(0===a.length||o)&&(0===s.length||!u)}function Wc(e,t,n){var r=function(e){return fa(e,ta.allow)}(e),i=function(e){return fa(e,ta.deny)}(e);return"control"===n?{read:t.read,append:t.append,write:t.write,controlRead:(t.controlRead||r.read)&&!i.read,controlWrite:(t.controlWrite||r.write)&&!i.write}:{read:(t.read||r.read)&&!i.read,append:(t.append||r.append)&&!i.append,write:(t.write||r.write)&&!i.write,controlRead:t.controlRead,controlWrite:t.controlWrite}}function Gc(e,t){return qc.apply(this,arguments)}function qc(){return(qc=i(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},zs(t).map((function(e){return St(ki(t),e)})).filter((function(e){return null!==e})).forEach((function(e){Hc(t,e,n)&&(i=Wc(e,i,"resource"))})),Ns(t).map((function(e){return St(ki(t),e)})).filter((function(e){return null!==e})).forEach((function(e){Hc(t,e,n)&&(i=Wc(e,i,"control"))})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kc(e){var t=e.internal_resourceInfo.linkedResources[ta.accessControl];return Array.isArray(t)&&1===t.length?t[0]:null}function Jc(e,t){return Xc.apply(this,arguments)}function Xc(){return(Xc=i(r().mark((function e(t,n){var i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=Kc(t))){e.next=3;break}return e.abrupt("return",i);case 3:return e.next=5,Vc(t,n);case 5:if(null!==(a=e.sent)){e.next=8;break}return e.abrupt("return",null);case 8:if(o=Pe(a).type,!Array.isArray(o)||!o.includes(ta.AccessControlResource)){e.next=11;break}return e.abrupt("return",Ae(a));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yc(e,t){return Qc.apply(this,arguments)}function Qc(){return(Qc=i(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jc(t,n);case 2:if(null!==(i=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,e.next=8,Zt(i,n);case 8:a=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",null);case 14:return e.abrupt("return",u(u({},t),{},{internal_acp:{acr:u(u({},a),{},{accessTo:Ae(t)})}}));case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function $c(e,t,n){return ed.apply(this,arguments)}function ed(){return(ed=i(r().mark((function e(t,n,i){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,i);case 2:return a=e.sent,e.next=5,Yc(a,i);case 5:if(null!==(o=e.sent)){e.next=8;break}return e.abrupt("return",bl(a,n,i));case 8:return e.abrupt("return",Gc(o,n));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function td(e){return nd.apply(this,arguments)}function nd(){return nd=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((n=t,Array.from(new Set(Et(ki(n)).map((function(e){return dt(e,ta.agent)})).reduce((function(e,t){return e.concat(t)}),[])))).map(function(){var e=i(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.t1={},e.t2=n,e.next=5,Gc(t,n);case 5:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return u(u({},e),t)}),{}));case 3:case"end":return e.stop()}var n}),e)}))),nd.apply(this,arguments)}function rd(){return(rd=i(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,n);case 2:return i=e.sent,e.next=5,Yc(i,n);case 5:if(null!==(a=e.sent)){e.next=8;break}return e.abrupt("return",kl(i,n));case 8:return e.abrupt("return",td(a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function id(e){return ad.apply(this,arguments)}function ad(){return(ad=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gc(t,ta.PublicAgent));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function od(e,t){return sd.apply(this,arguments)}function sd(){return(sd=i(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,n);case 2:return i=e.sent,e.next=5,Yc(i,n);case 5:if(null!==(a=e.sent)){e.next=8;break}return e.abrupt("return",xl(i,n));case 8:return e.abrupt("return",id(a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ud(e,t,n){return ca(e,t).concat("AgentMatcher").concat(n.charAt(0).toUpperCase()+n.slice(1)).concat("Policy")}function ld(e,t,n){return ud(e,t,n).concat("Matcher")}var cd=ta.anyOf;function dd(e,t,n){var r=ud(e,t,n),i=ld(e,t,n),a=St(ki(e),r);return a||(e=function(e,t,n){var r=ud(e,t,n);return r.includes("Acr")?Rs(e,r):Os(e,r)}(e,t,n),a=ha(a=Ct({url:r}),s({},n,!0),ta.allow)),ft(a,cd).includes(i)?e:Cs(e,a=er(a).addUrl(cd,i).build())}function fd(e,t,n,r,i){var a,o=ld(e,n,r),s=dd(e,n,r),u=null!==(a=St(ki(s),o))&&void 0!==a?a:Ct({url:o});return Cs(s,"add"===i?yu(u,t):_u(u,t))}function hd(e,t,n){return pd.apply(this,arguments)}function pd(){return(pd=i(r().mark((function e(t,n,i){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gc(t,n);case 2:return a=e.sent,"boolean"===typeof i.read&&a.read!==i.read&&(t=fd(t,n,oa,"read",i.read?"add":"remove")),"boolean"===typeof i.append&&a.append!==i.append&&(t=fd(t,n,oa,"append",i.append?"add":"remove")),"boolean"===typeof i.write&&a.write!==i.write&&(t=fd(t,n,oa,"write",i.write?"add":"remove")),"boolean"===typeof i.controlRead&&a.controlRead!==i.controlRead&&(t=fd(t,n,sa,"controlRead",i.controlRead?"add":"remove")),"boolean"===typeof i.controlWrite&&a.controlWrite!==i.controlWrite&&(t=fd(t,n,sa,"controlWrite",i.controlWrite?"add":"remove")),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vd(){return(vd=i(r().mark((function e(t,n,i,a){var o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,a);case 2:return o=e.sent,e.next=5,Yc(o,a);case 5:if(null!==(s=e.sent)){e.next=10;break}return e.next=9,Ml(o,n,i,a);case 9:return e.abrupt("return",bl(o,n,a));case 10:return e.prev=10,e.t0=La,e.next=14,hd(s,n,i);case 14:return e.t1=e.sent,e.t2=a,e.next=18,(0,e.t0)(e.t1,e.t2);case 18:return e.next=20,$c(t,n,a);case 20:return e.abrupt("return",e.sent);case 23:return e.prev=23,e.t3=e.catch(10),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,null,[[10,23]])})))).apply(this,arguments)}function md(e,t){return gd.apply(this,arguments)}function gd(){return(gd=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hd(t,ta.PublicAgent,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yd(){return(yd=i(r().mark((function e(t,n,i){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,i);case 2:return a=e.sent,e.next=5,Yc(a,i);case 5:if(null!==(o=e.sent)){e.next=10;break}return e.next=9,Nl(a,n,i);case 9:return e.abrupt("return",xl(a,i));case 10:return e.prev=10,e.t0=La,e.next=14,md(o,n);case 14:return e.t1=e.sent,e.t2=i,e.next=18,(0,e.t0)(e.t1,e.t2);case 18:return e.next=20,od(t,i);case 20:return e.abrupt("return",e.sent);case 23:return e.prev=23,e.t3=e.catch(10),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,null,[[10,23]])})))).apply(this,arguments)}var _d=Object.freeze({__proto__:null,getAclServerResourceInfo:Vc,getAgentAccess:$c,getAgentAccessAll:function(e,t){return rd.apply(this,arguments)},getPublicAccess:od,setAgentAccess:function(e,t,n,r){return vd.apply(this,arguments)},setPublicAccess:function(e,t,n){return yd.apply(this,arguments)}}),bd=Object.freeze({__proto__:null,acrAsMarkdown:$i,addAcrPolicyUrl:Ni,addAgent:ho,addAllOfRuleUrl:Va,addAnyOfRuleUrl:Ga,addClient:Io,addGroup:go,addMemberAcrPolicyUrl:ji,addMemberPolicyUrl:Gi,addMockAcrTo:ss,addNoneOfRuleUrl:Xa,addPolicyUrl:Wi,createPolicy:No,createResourcePolicyFor:Xo,createResourceRuleFor:to,createRule:eo,getAcrPolicyUrlAll:Bi,getAgentAll:co,getAllOfRuleUrlAll:Wa,getAllowModes:Wo,getAnyOfRuleUrlAll:Ja,getClientAll:Co,getDenyModes:Jo,getFileWithAccessDatasets:Ca,getFileWithAcr:xa,getGroupAll:vo,getLinkedAcrUrl:Ua,getMemberAcrPolicyUrlAll:Ui,getMemberPolicyUrlAll:Ki,getNoneOfRuleUrlAll:$a,getPolicy:jo,getPolicyAll:Bo,getPolicyUrlAll:qi,getReferencedPolicyUrlAll:Na,getResourceAcrPolicy:Qo,getResourceAcrPolicyAll:es,getResourceInfoWithAccessDatasets:Ia,getResourceInfoWithAcr:Sa,getResourcePolicy:Yo,getResourcePolicyAll:$o,getResourceRule:ro,getResourceRuleAll:ao,getRule:no,getRuleAll:io,getSolidDatasetWithAccessDatasets:Aa,getSolidDatasetWithAcr:ba,hasAccessibleAcr:Oa,hasAnyClient:Lo,hasAuthenticated:xo,hasCreator:Eo,hasLinkedAcr:Di,hasPublic:_o,isAcpControlled:ja,mockAcrFor:os,policyAsMarkdown:as,removeAcrPolicyUrl:zi,removeAcrPolicyUrlAll:Zi,removeAgent:po,removeAllOfRuleUrl:Za,removeAnyClient:Oo,removeAnyOfRuleUrl:qa,removeAuthenticated:So,removeClient:Ro,removeCreator:To,removeGroup:yo,removeMemberAcrPolicyUrl:Vi,removeMemberAcrPolicyUrlAll:Hi,removeMemberPolicyUrl:Xi,removeMemberPolicyUrlAll:Qi,removeNoneOfRuleUrl:Ya,removePolicy:Uo,removePolicyUrl:Ji,removePolicyUrlAll:Yi,removePublic:wo,removeResourceAcrPolicy:ns,removeResourcePolicy:ts,removeResourceRule:so,removeRule:oo,ruleAsMarkdown:Fo,saveAcrFor:La,setAgent:fo,setAllOfRuleUrl:Ha,setAllowModes:Zo,setAnyClient:Mo,setAnyOfRuleUrl:Ka,setAuthenticated:ko,setClient:Po,setCreator:Ao,setDenyModes:qo,setGroup:mo,setNoneOfRuleUrl:Qa,setPolicy:zo,setPublic:bo,setResourceAcrPolicy:is,setResourcePolicy:rs,setResourceRule:lo,setRule:uo}),wd=Object.freeze({__proto__:null,addAcrPolicyUrl:Rs,addAgent:yu,addAllOfMatcherUrl:Ks,addAnyOfMatcherUrl:Qs,addClient:Iu,addMemberAcrPolicyUrl:Ls,addMemberPolicyUrl:Ms,addMockAcrTo:ss,addNoneOfMatcherUrl:nu,addPolicyUrl:Os,createMatcher:ou,createPolicy:No,createResourceMatcherFor:su,createResourcePolicyFor:Xo,getAcrPolicyUrlAll:Ns,getAgentAll:mu,getAllOfMatcherUrlAll:Ys,getAllowModes:Ho,getAnyOfMatcherUrlAll:tu,getClientAll:Pu,getDenyModes:Ko,getFileWithAccessDatasets:Ca,getFileWithAcr:xa,getLinkedAcrUrl:Ua,getMatcher:uu,getMatcherAll:cu,getMemberAcrPolicyUrlAll:Bs,getMemberPolicyUrlAll:Us,getNoneOfMatcherUrlAll:au,getPolicy:jo,getPolicyAll:Bo,getPolicyUrlAll:zs,getReferencedPolicyUrlAll:Na,getResourceAcrPolicy:Qo,getResourceAcrPolicyAll:es,getResourceInfoWithAccessDatasets:Ia,getResourceInfoWithAcr:Sa,getResourceMatcher:lu,getResourceMatcherAll:du,getResourcePolicy:Yo,getResourcePolicyAll:$o,getSolidDatasetWithAccessDatasets:Aa,getSolidDatasetWithAcr:ba,getVcAccess:_a,hasAccessibleAcr:Oa,hasAuthenticated:ku,hasCreator:Au,hasLinkedAcr:Di,hasPublic:bu,isAcpControlled:ja,mockAcrFor:os,removeAcrPolicyUrl:Vs,removeAcrPolicyUrlAll:Zi,removeAgent:_u,removeAllOfMatcherUrl:Js,removeAnyOfMatcherUrl:$s,removeAuthenticated:Eu,removeClient:Ru,removeCreator:Cu,removeMatcher:fu,removeMemberAcrPolicyUrl:Zs,removeMemberAcrPolicyUrlAll:Hi,removeMemberPolicyUrl:Hs,removeMemberPolicyUrlAll:Qi,removeNoneOfMatcherUrl:ru,removePolicy:Uo,removePolicyUrl:Ws,removePolicyUrlAll:Yi,removePublic:xu,removeResourceAcrPolicy:ns,removeResourceMatcher:hu,removeResourcePolicy:ts,saveAcrFor:La,setAgent:gu,setAllOfMatcherUrl:Xs,setAllowModes:Vo,setAnyOfMatcherUrl:eu,setAuthenticated:Su,setCreator:Tu,setDenyModes:Go,setMatcher:pu,setNoneOfMatcherUrl:iu,setPolicy:zo,setPublic:wu,setResourceMatcher:vu,setResourcePolicy:Gs,setVcAccess:ma}),xd=He.getJsonLdParser,kd=He.getTurtleParser,Sd=He.solidDatasetAsTurtle;t.FetchError=Ie,t.SolidClientError=M,t.ThingExpectedError=Ot,t.access=Bl,t.access_v1=uc,t.access_v2=zc,t.acp_ess_1=bd,t.acp_ess_2=wd,t.acp_v1=xs,t.acp_v2=ms,t.acp_v3=Ts,t.acp_v4=ju,t.addBoolean=vn,t.addDate=gn,t.addDatetime=mn,t.addDecimal=_n,t.addInteger=bn,t.addIri=pn,t.addJwkToJwks=pi,t.addLiteral=Sn,t.addMockFallbackAclTo=function(e){var t=ur(Te(e)),n="".concat(t,".acl"),r=Or(function(e,t){return Object.assign(ce(e),{internal_resourceInfo:u(u({},e.internal_resourceInfo),{},{aclUrl:t})})}(fn(t),n));return br(ce(e),{resourceAcl:null,fallbackAcl:r})},t.addMockResourceAclTo=function(e){var t,n=null!==(t=e.internal_resourceInfo.aclUrl)&&void 0!==t?t:"https://your.pod/mock-acl.ttl",r=Object.assign(ce(e),{internal_resourceInfo:u(u({},e.internal_resourceInfo),{},{aclUrl:n})});return br(r,{resourceAcl:Or(r),fallbackAcl:null})},t.addNamedNode=kn,t.addPublicKeyToProfileJwks=function(e,t){return mi.apply(this,arguments)},t.addStringEnglish=function(e,t,n){return wn(e,t,n,"en")},t.addStringNoLocale=xn,t.addStringWithLocale=wn,t.addTerm=En,t.addTime=yn,t.addUrl=hn,t.asIri=Rt,t.asUrl=It,t.buildThing=er,t.changeLogAsMarkdown=an,t.createAcl=Or,t.createAclFromFallbackAcl=Fr,t.createContainerAt=function(e){return Qt.apply(this,arguments)},t.createContainerInContainer=function(e){return tn.apply(this,arguments)},t.createSolidDataset=Ut,t.createThing=Ct,t.deleteAclFor=function(e){return jr.apply(this,arguments)},t.deleteContainer=function(e){return nn.apply(this,arguments)},t.deleteFile=function(e){return Xe.apply(this,arguments)},t.deleteSolidDataset=function(e){return Yt.apply(this,arguments)},t.fromRdfJsDataset=function(e){var t=Array.from(e),n=re(t);return t.filter((function(e){return n.every((function(t){return!t.equals(e.subject)}))})).reduce((function(e,r){return Q(e,r,{otherQuads:t,chainBlankNodes:n})}),{graphs:{default:{}},type:"Dataset"})},t.getAgentAccess=Ur,t.getAgentAccessAll=zr,t.getAgentDefaultAccess=Wr,t.getAgentDefaultAccessAll=Gr,t.getAgentResourceAccess=Vr,t.getAgentResourceAccessAll=Zr,t.getAltProfileUrlAllFrom=gi,t.getBoolean=function(e,t){at(e);var n=xt(e,t,F.boolean);return null===n?null:D(n)},t.getBooleanAll=function(e,t){return at(e),kt(e,t,F.boolean).map(D).filter((function(e){return null!==e}))},t.getContainedResourceUrlAll=function(e){var t=St(e,Ae(e));return null!==t?ft(t,pe.contains):[]},t.getContentType=Ee,t.getDate=function(e,t){at(e);var n=xt(e,t,F.date);return null===n?null:B(n)},t.getDateAll=function(e,t){return at(e),kt(e,t,F.date).map(B).filter((function(e){return null!==e}))},t.getDatetime=function(e,t){at(e);var n=xt(e,t,F.dateTime);return null===n?null:j(n)},t.getDatetimeAll=function(e,t){return at(e),kt(e,t,F.dateTime).map(j).filter((function(e){return null!==e}))},t.getDecimal=function(e,t){at(e);var n=xt(e,t,F.decimal);return null===n?null:V(n)},t.getDecimalAll=function(e,t){return at(e),kt(e,t,F.decimal).map((function(e){return V(e)})).filter((function(e){return null!==e}))},t.getEffectiveAccess=function(e){var t,n,r,i,a,o,s;if("object"===typeof e.internal_resourceInfo.permissions)return{user:{read:e.internal_resourceInfo.permissions.user.read,append:e.internal_resourceInfo.permissions.user.append,write:e.internal_resourceInfo.permissions.user.write},public:{read:e.internal_resourceInfo.permissions.public.read,append:e.internal_resourceInfo.permissions.public.append,write:e.internal_resourceInfo.permissions.public.write}};var u=Pe(e);return{user:{read:null!==(n=null===(t=u[me.allow])||void 0===t?void 0:t.includes(me.Read))&&void 0!==n&&n,append:null!==(a=(null===(r=u[me.allow])||void 0===r?void 0:r.includes(me.Append))||(null===(i=u[me.allow])||void 0===i?void 0:i.includes(me.Write)))&&void 0!==a&&a,write:null!==(s=null===(o=u[me.allow])||void 0===o?void 0:o.includes(me.Write))&&void 0!==s&&s}}},t.getFallbackAcl=Mr,t.getFile=Ke,t.getFileWithAcl=function(e){return Pr.apply(this,arguments)},t.getGroupAccess=Yr,t.getGroupAccessAll=Qr,t.getGroupDefaultAccess=ti,t.getGroupDefaultAccessAll=ni,t.getGroupResourceAccess=$r,t.getGroupResourceAccessAll=ei,t.getInteger=function(e,t){at(e);var n=xt(e,t,F.integer);return null===n?null:Z(n)},t.getIntegerAll=function(e,t){return at(e),kt(e,t,F.integer).map((function(e){return Z(e)})).filter((function(e){return null!==e}))},t.getIri=ct,t.getIriAll=ft,t.getJsonLdParser=xd,t.getLinkedResourceUrlAll=Pe,t.getLiteral=yt,t.getLiteralAll=_t,t.getNamedNode=mt,t.getNamedNodeAll=gt,t.getPodOwner=Ce,t.getPodUrlAll=function(e){return bi.apply(this,arguments)},t.getPodUrlAllFrom=wi,t.getProfileAll=yi,t.getProfileJwksIri=fi,t.getPropertyAll=function(e){return Object.keys(e.predicates).filter((function(t){return null!==bt(e,t)}))},t.getPublicAccess=oi,t.getPublicDefaultAccess=ui,t.getPublicResourceAccess=si,t.getResourceAcl=Rr,t.getResourceInfo=we,t.getResourceInfoWithAcl=function(e){return Ir.apply(this,arguments)},t.getSolidDataset=Zt,t.getSolidDatasetWithAcl=function(e){return Cr.apply(this,arguments)},t.getSourceIri=Te,t.getSourceUrl=Ae,t.getStringByLocaleAll=function(e,t){var n,r;if(at(e),!K(t))throw new Ft(t);var i=O(t),a=null!==(r=null===(n=e.predicates[i])||void 0===n?void 0:n.langStrings)&&void 0!==r?r:{};return new Map(Object.entries(a).map((function(e){var t=l(e,2),n=t[0],r=t[1];return[n,o(r)]})))},t.getStringEnglish=function(e,t){return ht(e,t,"en")},t.getStringEnglishAll=function(e,t){return pt(e,t,"en")},t.getStringNoLocale=function(e,t){return at(e),xt(e,t,F.string)},t.getStringNoLocaleAll=vt,t.getStringWithLocale=ht,t.getStringWithLocaleAll=pt,t.getTerm=bt,t.getTermAll=wt,t.getThing=St,t.getThingAll=Et,t.getTime=function(e,t){at(e);var n=xt(e,t,F.time);return null===n?null:N(n)},t.getTimeAll=function(e,t){return at(e),kt(e,t,F.time).map(N).filter((function(e){return null!==e}))},t.getTurtleParser=kd,t.getUrl=lt,t.getUrlAll=dt,t.getWebIdDataset=function(e){return xi.apply(this,arguments)},t.getWellKnownSolid=function(e){return ln.apply(this,arguments)},t.hasAccessibleAcl=Br,t.hasAcl=function(e){return"object"===typeof e.internal_acl},t.hasFallbackAcl=Lr,t.hasResourceAcl=Tr,t.hasResourceInfo=I,t.hasServerResourceInfo=R,t.isContainer=Se,t.isPodOwner=function(e,t){var n=Ce(t);return"string"!==typeof n?null:n===e},t.isRawData=function(e){return e.internal_resourceInfo.isRawData},t.isThing=Pt,t.isThingLocal=Mt,t.mockContainerFrom=fn,t.mockFetchError=function(e){var t=new cn(void 0,{status:arguments.length>1&&void 0!==arguments[1]?arguments[1]:404});return new Ie("Fetching the Resource at [".concat(e,"] failed: [").concat(t.status,"] [").concat(t.statusText,"]."),t)},t.mockFileFrom=function(e,t){var n=new Blob;return Object.assign(n,{internal_resourceInfo:{sourceIri:O(e),isRawData:!0,contentType:null===t||void 0===t?void 0:t.contentType,linkedResources:{}}})},t.mockSolidDatasetFrom=dn,t.mockThingFrom=function(e){return{type:"Subject",predicates:{},url:O(e)}},t.overwriteFile=Qe,t.removeAll=Tn,t.removeBoolean=In,t.removeDate=Ln,t.removeDatetime=Rn,t.removeDecimal=On,t.removeInteger=Fn,t.removeIri=Pn,t.removeLiteral=Bn,t.removeNamedNode=jn,t.removeStringEnglish=function(e,t,n){return Dn(e,t,n,"en")},t.removeStringNoLocale=Nn,t.removeStringWithLocale=Dn,t.removeThing=Tt,t.removeTime=Mn,t.removeUrl=Cn,t.responseToResourceInfo=ke,t.responseToSolidDataset=zt,t.saveAclFor=Dr,t.saveFileInContainer=function(e,t){return Ye.apply(this,arguments)},t.saveSolidDatasetAt=Jt,t.saveSolidDatasetInContainer=function(e,t){return en.apply(this,arguments)},t.setAgentDefaultAccess=function(e,t,n){return kr(e,n,fe.agent,"default",t)},t.setAgentResourceAccess=Hr,t.setBoolean=Zn,t.setDate=Wn,t.setDatetime=Hn,t.setDecimal=qn,t.setGroupDefaultAccess=function(e,t,n){return kr(e,n,fe.agentGroup,"default",t)},t.setGroupResourceAccess=ai,t.setInteger=Kn,t.setIri=Vn,t.setLiteral=Qn,t.setNamedNode=Yn,t.setProfileJwks=function(e,t,n){return At(e,Vn(di(e,t),ye.publicKey,n))},t.setPublicDefaultAccess=function(e,t){return kr(e,t,fe.agentClass,"default",ve.Agent)},t.setPublicResourceAccess=li,t.setStringNoLocale=Xn,t.setStringWithLocale=Jn,t.setTerm=$n,t.setThing=At,t.setTime=Gn,t.setUrl=zn,t.solidDatasetAsMarkdown=rn,t.solidDatasetAsTurtle=Sd,t.thingAsMarkdown=Lt,t.toRdfJsDataset=Ve,t.universalAccess=_d},1210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.default}});var r=f(n(2628)),i=f(n(8725)),a=f(n(8514)),o=f(n(4367)),s=f(n(3762)),u=f(n(9843)),l=f(n(5901)),c=f(n(2631)),d=f(n(7646));function f(e){return e&&e.__esModule?e:{default:e}}},7843:function(e,t){"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,a,o){return r((s=r(r(t,e),r(i,o)))<<(u=a)|s>>>32-u,n);var s,u}function a(e,t,n,r,a,o,s){return i(t&n|~t&r,e,t,a,o,s)}function o(e,t,n,r,a,o,s){return i(t&r|n&~r,e,t,a,o,s)}function s(e,t,n,r,a,o,s){return i(t^n^r,e,t,a,o,s)}function u(e,t,n,r,a,o,s){return i(n^(t|~r),e,t,a,o,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var a=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(a>>>4&15)+r.charAt(15&a),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;for(var i=1732584193,l=-271733879,c=-1732584194,d=271733878,f=0;f<e.length;f+=16){var h=i,p=l,v=c,m=d;i=a(i,l,c,d,e[f],7,-680876936),d=a(d,i,l,c,e[f+1],12,-389564586),c=a(c,d,i,l,e[f+2],17,606105819),l=a(l,c,d,i,e[f+3],22,-1044525330),i=a(i,l,c,d,e[f+4],7,-176418897),d=a(d,i,l,c,e[f+5],12,1200080426),c=a(c,d,i,l,e[f+6],17,-1473231341),l=a(l,c,d,i,e[f+7],22,-45705983),i=a(i,l,c,d,e[f+8],7,1770035416),d=a(d,i,l,c,e[f+9],12,-1958414417),c=a(c,d,i,l,e[f+10],17,-42063),l=a(l,c,d,i,e[f+11],22,-1990404162),i=a(i,l,c,d,e[f+12],7,1804603682),d=a(d,i,l,c,e[f+13],12,-40341101),c=a(c,d,i,l,e[f+14],17,-1502002290),i=o(i,l=a(l,c,d,i,e[f+15],22,1236535329),c,d,e[f+1],5,-165796510),d=o(d,i,l,c,e[f+6],9,-1069501632),c=o(c,d,i,l,e[f+11],14,643717713),l=o(l,c,d,i,e[f],20,-373897302),i=o(i,l,c,d,e[f+5],5,-701558691),d=o(d,i,l,c,e[f+10],9,38016083),c=o(c,d,i,l,e[f+15],14,-660478335),l=o(l,c,d,i,e[f+4],20,-405537848),i=o(i,l,c,d,e[f+9],5,568446438),d=o(d,i,l,c,e[f+14],9,-1019803690),c=o(c,d,i,l,e[f+3],14,-187363961),l=o(l,c,d,i,e[f+8],20,1163531501),i=o(i,l,c,d,e[f+13],5,-1444681467),d=o(d,i,l,c,e[f+2],9,-51403784),c=o(c,d,i,l,e[f+7],14,1735328473),i=s(i,l=o(l,c,d,i,e[f+12],20,-1926607734),c,d,e[f+5],4,-378558),d=s(d,i,l,c,e[f+8],11,-2022574463),c=s(c,d,i,l,e[f+11],16,1839030562),l=s(l,c,d,i,e[f+14],23,-35309556),i=s(i,l,c,d,e[f+1],4,-1530992060),d=s(d,i,l,c,e[f+4],11,1272893353),c=s(c,d,i,l,e[f+7],16,-155497632),l=s(l,c,d,i,e[f+10],23,-1094730640),i=s(i,l,c,d,e[f+13],4,681279174),d=s(d,i,l,c,e[f],11,-358537222),c=s(c,d,i,l,e[f+3],16,-722521979),l=s(l,c,d,i,e[f+6],23,76029189),i=s(i,l,c,d,e[f+9],4,-640364487),d=s(d,i,l,c,e[f+12],11,-421815835),c=s(c,d,i,l,e[f+15],16,530742520),i=u(i,l=s(l,c,d,i,e[f+2],23,-995338651),c,d,e[f],6,-198630844),d=u(d,i,l,c,e[f+7],10,1126891415),c=u(c,d,i,l,e[f+14],15,-1416354905),l=u(l,c,d,i,e[f+5],21,-57434055),i=u(i,l,c,d,e[f+12],6,1700485571),d=u(d,i,l,c,e[f+3],10,-1894986606),c=u(c,d,i,l,e[f+10],15,-1051523),l=u(l,c,d,i,e[f+1],21,-2054922799),i=u(i,l,c,d,e[f+8],6,1873313359),d=u(d,i,l,c,e[f+15],10,-30611744),c=u(c,d,i,l,e[f+6],15,-1560198380),l=u(l,c,d,i,e[f+13],21,1309151649),i=u(i,l,c,d,e[f+4],6,-145523070),d=u(d,i,l,c,e[f+11],10,-1120210379),c=u(c,d,i,l,e[f+2],15,718787259),l=u(l,c,d,i,e[f+9],21,-343485551),i=r(i,h),l=r(l,p),c=r(c,v),d=r(d,m)}return[i,l,c,d]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(n(t)),i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))};t.default=l},3542:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},3762:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},7646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(5901))&&r.__esModule?r:{default:r};var a=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=a},2007:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},2692:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};var r=new Uint8Array(16)},8700:function(e,t){"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var a=unescape(encodeURIComponent(e));e=[];for(var o=0;o<a.length;++o)e.push(a.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,u=Math.ceil(s/16),l=new Array(u),c=0;c<u;++c){for(var d=new Uint32Array(16),f=0;f<16;++f)d[f]=e[64*c+4*f]<<24|e[64*c+4*f+1]<<16|e[64*c+4*f+2]<<8|e[64*c+4*f+3];l[c]=d}l[u-1][14]=8*(e.length-1)/Math.pow(2,32),l[u-1][14]=Math.floor(l[u-1][14]),l[u-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<u;++h){for(var p=new Uint32Array(80),v=0;v<16;++v)p[v]=l[h][v];for(var m=16;m<80;++m)p[m]=r(p[m-3]^p[m-8]^p[m-14]^p[m-16],1);for(var g=i[0],y=i[1],_=i[2],b=i[3],w=i[4],x=0;x<80;++x){var k=Math.floor(x/20),S=r(g,5)+n(k,y,_,b)+w+t[k]+p[x]>>>0;w=b,b=_,_=r(y,30)>>>0,y=g,g=S}i[0]=i[0]+g>>>0,i[1]=i[1]+y>>>0,i[2]=i[2]+_>>>0,i[3]=i[3]+b>>>0,i[4]=i[4]+w>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};t.default=i},2631:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var r,i=(r=n(5901))&&r.__esModule?r:{default:r};for(var a=[],o=0;o<256;++o)a.push((o+256).toString(16).slice(1));function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}var u=function(e){var t=s(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);if(!(0,i.default)(t))throw TypeError("Stringified UUID is invalid");return t};t.default=u},2628:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,a,o=(r=n(2692))&&r.__esModule?r:{default:r},s=n(2631);var u=0,l=0;var c=function(e,t,n){var r=t&&n||0,c=t||new Array(16),d=(e=e||{}).node||i,f=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==f){var h=e.random||(e.rng||o.default)();null==d&&(d=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=a=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:l+1,m=p-u+(v-l)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||p>u)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,l=v,a=f;var g=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;c[r++]=g>>>24&255,c[r++]=g>>>16&255,c[r++]=g>>>8&255,c[r++]=255&g;var y=p/4294967296*1e4&268435455;c[r++]=y>>>8&255,c[r++]=255&y,c[r++]=y>>>24&15|16,c[r++]=y>>>16&255,c[r++]=f>>>8|128,c[r++]=255&f;for(var _=0;_<6;++_)c[r+_]=d[_];return t||(0,s.unsafeStringify)(c)};t.default=c},8725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(818)),i=a(n(7843));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v3",48,i.default);t.default=o},818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,o,s){var u;if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"===typeof r&&(r=(0,a.default)(r)),16!==(null===(u=r)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),(l=n(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,o){s=s||0;for(var c=0;c<16;++c)o[s+c]=l[c];return o}return(0,i.unsafeStringify)(l)}try{r.name=e}catch(u){}return r.DNS=o,r.URL=s,r};var r,i=n(2631),a=(r=n(7646))&&r.__esModule?r:{default:r};var o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=o;var s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},8514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(3542)),i=o(n(2692)),a=n(2631);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();var o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return(0,a.unsafeStringify)(o)};t.default=s},4367:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(818)),i=a(n(8700));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v5",80,i.default);t.default=o},5901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2007))&&r.__esModule?r:{default:r};var a=function(e){return"string"===typeof e&&i.default.test(e)};t.default=a},9843:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(5901))&&r.__esModule?r:{default:r};var a=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=a},8398:function(e,t,n){var r,i=n(7061).default,a=n(7156).default,o=n(7424).default;r=function(e,t,n,r,s){return function(){"use strict";var u={577:function(e){e.exports=t},606:function(e){e.exports=n},156:function(t){t.exports=e},767:function(e){e.exports=s},928:function(e){e.exports=r}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={exports:{}};return u[e](n,n.exports,c),n.exports}c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,{a:t}),t},c.d=function(e,t){for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var d={};return function(){c.r(d),c.d(d,{CombinedDataProvider:function(){return te},DatasetContext:function(){return m},DatasetProvider:function(){return g},FileUpload:function(){return l},Image:function(){return P},Link:function(){return Y},LoginButton:function(){return Q},LogoutButton:function(){return $},SessionContext:function(){return s},SessionProvider:function(){return u},Table:function(){return ie},TableColumn:function(){return re},Text:function(){return oe},ThingContext:function(){return _},ThingProvider:function(){return b},Value:function(){return J},Video:function(){return ue},useDataset:function(){return p},useFile:function(){return T},useSession:function(){return le},useThing:function(){return ce}});var e=c(156),t=c.n(e),n=c(577),r=c(606),s=(0,e.createContext)({login:r.login,logout:r.logout,fetch:r.fetch,session:(0,r.getDefaultSession)(),sessionRequestInProgress:!0,profile:void 0}),u=function(u){var l=u.sessionId,c=u.children,d=u.onError,f=u.sessionRequestInProgress,h=u.restorePreviousSession,p=u.skipLoadingProfile,v=u.onSessionRestore,m=h||"undefined"!==typeof v,g=(0,e.useState)((0,r.getDefaultSession)()),y=o(g,2),_=y[0],b=y[1],w=(0,e.useState)(),x=o(w,2),k=x[0],S=x[1];(0,e.useEffect)((function(){void 0!==v&&(0,r.onSessionRestore)(v)}),[v]);var E,A="undefined"===typeof f?!_.info.isLoggedIn:f,T=(0,e.useState)(A),C=o(T,2),P=C[0],I=C[1];"undefined"!==typeof window&&(E=window.location),(0,e.useEffect)((function(){(0,r.handleIncomingRedirect)({url:window.location.href,restorePreviousSession:m}).then(function(){var e=a(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==p){e.next=2;break}return e.abrupt("return");case 2:if(void 0===(null===t||void 0===t?void 0:t.webId)){e.next=7;break}return e.next=5,(0,n.getProfileAll)(null===t||void 0===t?void 0:t.webId,{fetch:_.fetch});case 5:r=e.sent,S(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){if(!d)throw e;d(e)})).finally((function(){I(!1)})),(0,r.getDefaultSession)().on("logout",(function(){b((0,r.getDefaultSession)())}))}),[_,l,d,E,m,p]);var R=function(){var e=a(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.prev=1,e.next=4,(0,r.login)(t);case 4:e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(1),!d){e.next=12;break}d(e.t0),e.next=13;break;case 12:throw e.t0;case 13:return e.prev=13,I(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,6,13,16]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=a(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,r.logout)();case 3:S(void 0),e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(0),!d){e.next=12;break}d(e.t0),e.next=13;break;case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return t().createElement(s.Provider,{value:{session:_,login:R,logout:L,sessionRequestInProgress:P,setSessionRequestInProgress:I,fetch:r.fetch,profile:k}},c)};function l(r){var o=r.saveLocation,u=r.onError,l=r.onSave,c=r.inputProps,d=r.autosave,f=(0,e.useContext)(s).fetch,h=function(){var e=a(i().mark((function e(t){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.target).files){e.next=3;break}return e.abrupt("return");case 3:if(d){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,(0,n.saveFileInContainer)(o,r.files[0],{slug:r.files[0].name?r.files[0].name:void 0,fetch:f});case 8:a=e.sent,l&&l(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),u&&u(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return t().createElement(t().Fragment,null,t().createElement("input",Object.assign({type:"file"},c,{onChange:function(e){return h(e)},"data-testid":"form-input"})))}var f=c(928),h=c.n(f);function p(t,r){var i=(0,e.useContext)(s).fetch,a=(0,e.useContext)(m).solidDataset,o=h()(t?[t,r,i]:null,(function(){var e=Object.assign({fetch:i},r);return(0,n.getSolidDataset)(t,e)})),u=o.data,l=o.error;return{dataset:t?u:a,error:l}}var v=(0,e.createContext)({solidDataset:void 0,setDataset:function(){}}),m=v,g=function(n){var r=n.children,i=n.onError,a=n.solidDataset,s=n.datasetUrl,u=n.loading,l=n.loadingComponent,c=p(s),d=c.dataset,f=c.error;f&&i&&i(f);var h=null!==a&&void 0!==a?a:d,m=(0,e.useState)(h),g=o(m,2),y=g[0],_=g[1];(0,e.useEffect)((function(){_(h)}),[h]);var b=l&&t().createElement(l,null)||u||t().createElement("span",null,"Fetching data...");return null===l&&(b=null),t().createElement(v.Provider,{value:{solidDataset:y,setDataset:_}},y?r:b)},y=(0,e.createContext)({thing:null,setThing:function(){}}),_=y,b=function(r){var i=r.children,a=r.thing,s=r.thingUrl,u=(0,e.useContext)(m).solidDataset,l=a;u&&s&&(l=(0,n.getThing)(u,s));var c=(0,e.useState)(l||null),d=o(c,2),f=d[0],h=d[1];return(0,e.useEffect)((function(){u&&s?h((0,n.getThing)(u,s)):a&&h(a)}),[u,s,a]),t().createElement(y.Provider,{value:{thing:f,setThing:h}},i)},w=function(){var e=a(i().mark((function e(t,r,a,o,s,u,l){var c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(void 0!==s&&r.size>1024*s)){e.next=5;break}return a.setCustomValidity("The selected file must not be larger than ".concat(s,"kB")),a.reportValidity(),e.abrupt("return",null);case 5:return a.setCustomValidity(""),e.next=8,(0,n.overwriteFile)(t,r,{fetch:o});case 8:return u&&u(),c=URL.createObjectURL(r),e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(0),l&&l(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r,i,a,o,s){return e.apply(this,arguments)}}(),x=function(){var e=a(i().mark((function e(t,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.getFile)(t,{fetch:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function k(e,t,r,i){switch(e){case"boolean":return(0,n.getBoolean)(t,r);case"datetime":return(0,n.getDatetime)(t,r);case"decimal":return(0,n.getDecimal)(t,r);case"integer":return(0,n.getInteger)(t,r);case"url":return(0,n.getUrl)(t,r);default:return i?(0,n.getStringWithLocale)(t,r,i):(0,n.getStringNoLocale)(t,r)}}function S(t){var n,r=t.dataset,i=t.thing,a=t.properties,o=t.property,s=t.type,u=t.locale,l=(0,e.useContext)(m),c=l.solidDataset,d=l.setDataset,f=void 0===d?function(){}:d,h=r||c,p=(0,e.useContext)(_),v=p.thing,g=p.setThing,y=void 0===g?function(){}:g,b=i||v||void 0;b||(n=new Error("Thing not found as property or in context"));var w=b&&a?function(e,t,n,r,i){return r.find((function(r){return e(t,n,r,i)}))||r[0]}(k,s,b,a,u)||a[0]:o;if(!w)throw new Error("No property provided");return{dataset:h,thing:b,property:w,error:n,value:b&&w?k(s,b,w,u):null,setDataset:f,setThing:y}}function E(e,t){return A.apply(this,arguments)}function A(){return(A=a(i().mark((function e(t,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.getSolidDataset)(t);case 2:a=e.sent,r(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(t){var n=(0,e.useState)(),r=o(n,2),i=r[0],a=r[1],u=(0,e.useState)(!1),l=o(u,2),c=l[0],d=l[1],f=(0,e.useState)(),h=o(f,2),p=h[0],v=h[1],m=(0,e.useContext)(s).fetch;return(0,e.useEffect)((function(){t&&(d(!0),x(t,m).then((function(e){v(e),d(!1)})).catch((function(e){a(e),d(!1)})))}),[t,m]),{error:i,inProgress:c,data:p}}var C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function P(r){var u,l=r.thing,c=r.property,d=r.properties,f=r.edit,h=r.autosave,p=r.allowDelete,v=r.onSave,m=r.onError,g=r.maxSize,y=r.alt,_=r.inputProps,b=r.errorComponent,x=r.loadingComponent,k=r.deleteComponent,E=r.saveLocation,A=r.solidDataset,P=C(r,["thing","property","properties","edit","autosave","allowDelete","onSave","onError","maxSize","alt","inputProps","errorComponent","loadingComponent","deleteComponent","saveLocation","solidDataset"]),I=(0,e.useContext)(s).fetch,R=S({thing:l,property:c,properties:d,type:"url"}),L=R.value,M=R.thing,O=R.error;L||(u=new Error("No value found for property."));var F=!M&&!O,D=(0,e.useState)(null!==O&&void 0!==O?O:u),N=o(D,2),j=N[0],B=N[1];(0,e.useEffect)((function(){j&&m&&m(j)}),[j,m,b]);var U=(0,e.useState)(),z=o(U,2),V=z[0],Z=z[1],H=T(L),W=H.data,G=H.error,q=H.inProgress;(0,e.useEffect)((function(){if(!q)if(G)B(G);else{var e=W&&URL.createObjectURL(W);e&&Z(e)}}),[W,q,G]);var K=function(){var e=a(i().mark((function e(){var t,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&A&&c&&"string"===typeof L&&h){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,t=(0,n.removeUrl)(l,c,L),r=(0,n.setThing)(A,t),a=(0,n.getSourceUrl)(A)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,n.saveSolidDatasetAt)(a,r,{fetch:I});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),B(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=a(i().mark((function e(t){var r,a,o,s,u,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.files,!(h&&r&&r.length>0)){e.next=29;break}if(!L){e.next=9;break}return e.next=5,w(L,r[0],t,I,g,v,m);case 5:(a=e.sent)&&Z(a),e.next=29;break;case 9:if(L||!E){e.next=29;break}return e.next=12,(0,n.saveFileInContainer)(E,r[0],{fetch:I});case 12:if(o=e.sent,!((s=(0,n.getSourceUrl)(o))&&l&&c&&A)){e.next=29;break}if(Z(s),e.prev=16,u=(0,n.addUrl)(l,c,s),d=(0,n.setThing)(A,u),f=(0,n.getSourceUrl)(A)){e.next=22;break}return e.abrupt("return");case 22:return e.next=24,(0,n.saveSolidDatasetAt)(f,d,{fetch:I});case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(16),B(e.t0);case 29:case"end":return e.stop()}}),e,null,[[16,26]])})));return function(t){return e.apply(this,arguments)}}(),X=null;if(F||q){var Y=x&&t().createElement(x,null)||t().createElement("span",null,"fetching data in progress");return null===x&&(Y=null),Y}return j?X=b?t().createElement(b,{error:j}):t().createElement("span",null,j.toString()):L&&(X=t().createElement("img",Object.assign({src:V,alt:null!==y&&void 0!==y?y:""},P))),t().createElement(t().Fragment,null,X,f&&t().createElement("input",Object.assign({},_,{type:"file",accept:"image/*",onChange:function(e){return J(e.target)}})),p&&(k?t().createElement(k,{onClick:K}):t().createElement("button",{type:"button",onClick:K},"Delete")))}var I=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},R=function(r){var u,l=r.thing,c=r.solidDataset,d=r.property,f=r.properties,h=r.saveDatasetTo,p=r.onSave,v=r.onError,m=r.edit,g=r.autosave,y=r.inputProps,_=I(r,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),b=(0,e.useContext)(s).fetch,w=S({dataset:c,thing:l,type:"datetime",property:d,properties:f}),x=w.value,k=w.thing,A=w.property,T=w.dataset,C=w.setDataset,P=w.error,R=function(){var t=(0,e.useState)(null),n=o(t,2),r=n[0],i=n[1];return(0,e.useEffect)((function(){var e=document.createElement("input");e.type="datetime-local",i("text"!==e.type)}),[]),r}();(0,e.useEffect)((function(){P&&v&&v(P)}),[P,v]);var L=x?x.toISOString().substring(0,x.toISOString().length-5):null,M=(0,e.useState)(L),O=o(M,2),F=O[0],D=O[1],N="";R||(N=null===F||void 0===F?void 0:F.split(/T(.+)/)[0].toString());var j="00:00";R||(j=null===(u=null===F||void 0===F?void 0:F.split(/T(.+)/)[1])||void 0===u?void 0:u.toString());var B=(0,e.useState)(j),U=o(B,2),z=U[0],V=U[1],Z=(0,e.useState)(N),H=o(Z,2),W=H[0],G=H[1];(0,e.useEffect)((function(){!z&&!W||R||D("".concat(null!==W&&void 0!==W?W:"","T").concat(null!==z&&void 0!==z?z:"00:00"))}),[z,W,R]);var q,K=function(){var e=a(i().mark((function e(t){var r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(L!==F&&k&&T&&t.target.reportValidity())){e.next=27;break}if(r=F,a=(0,n.setDatetime)(k,A,new Date("".concat(r,"Z"))),e.prev=3,!h){e.next=12;break}return e.next=7,(0,n.saveSolidDatasetAt)(h,(0,n.setThing)(T,a),{fetch:b});case 7:return o=e.sent,e.next=10,E(h,C);case 10:e.next=21;break;case 12:if(!(0,n.hasResourceInfo)(T)){e.next=20;break}return e.next=15,(0,n.saveSolidDatasetAt)((0,n.getSourceUrl)(T),(0,n.setThing)(T,a),{fetch:b});case 15:return o=e.sent,e.next=18,E((0,n.getSourceUrl)(T),C);case 18:e.next=21;break;case 20:v&&v(new Error("Please provide saveDatasetTo location for new data"));case 21:!P&&p&&p(o,a),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),v&&v(e.t0);case 27:case"end":return e.stop()}}),e,null,[[3,24]])})));return function(t){return e.apply(this,arguments)}}();return q=R?"datetime-local":"datetime-workaround",t().createElement(t().Fragment,null,!m&&T&&k&&t().createElement("span",Object.assign({},_),"".concat(F)),m&&T&&k&&"datetime-local"===q&&t().createElement("input",Object.assign({type:q,"aria-label":"Date and Time",step:"any"},y,{onChange:function(e){D(e.target.value)},onBlur:function(e){return g&&K(e)},value:F,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}",placeholder:"yyyy-mm-ddThh:mm"})),m&&T&&k&&"datetime-workaround"===q&&t().createElement(t().Fragment,null,t().createElement("input",Object.assign({type:"date","aria-label":"Date",step:"any"},y,{onChange:function(e){G(e.target.value)},onBlur:function(e){return g&&K(e)},value:W,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",placeholder:"yyyy-mm-dd"})),t().createElement("input",{type:"time","aria-label":"Time",value:z,onChange:function(e){return V(e.target.value)},onBlur:function(e){return g&&K(e)},pattern:"[0-9]{2}:[0-9]{2}"})))};R.defaultProps={autosave:!1,edit:!1};var L=R,M=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},O=function(r){var u,l=r.thing,c=r.solidDataset,d=r.property,f=r.properties,h=r.saveDatasetTo,p=r.locale,v=r.onSave,m=r.onError,g=r.edit,y=r.autosave,_=r.inputProps,b=M(r,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","edit","autosave","inputProps"]),w=(0,e.useContext)(s).fetch,x=S({dataset:c,thing:l,type:"string",property:d,properties:f,locale:p}),k=x.value,A=x.thing,T=x.property,C=x.dataset,P=x.setDataset,I=x.error;(0,e.useEffect)((function(){I&&m&&m(I)}),[I,m]);var R=null!==(u=null===k||void 0===k?void 0:k.toString())&&void 0!==u?u:"",L=(0,e.useState)(R),O=o(L,2),F=O[0],D=O[1],N=function(){var e=a(i().mark((function e(t){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(R!==F&&A&&C&&t.target.reportValidity())){e.next=26;break}if(r=p?(0,n.setStringWithLocale)(A,T,F,p):(0,n.setStringNoLocale)(A,T,F),e.prev=2,!h){e.next=11;break}return e.next=6,(0,n.saveSolidDatasetAt)(h,(0,n.setThing)(C,r),{fetch:w});case 6:return a=e.sent,e.next=9,E(h,P);case 9:e.next=20;break;case 11:if(!(0,n.hasResourceInfo)(C)){e.next=19;break}return e.next=14,(0,n.saveSolidDatasetAt)((0,n.getSourceUrl)(C),(0,n.setThing)(C,r),{fetch:w});case 14:return a=e.sent,e.next=17,E((0,n.getSourceUrl)(C),P);case 17:e.next=20;break;case 19:m&&m(new Error("Please provide saveDatasetTo location for new data"));case 20:!I&&v&&v(a,r),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),m&&m(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}();return t().createElement(t().Fragment,null,!g&&C&&A&&t().createElement("span",Object.assign({},b),F),g&&C&&A&&t().createElement("input",Object.assign({type:"text"},_,{onChange:function(e){D(e.target.value)},onBlur:function(e){return y&&N(e)},value:F})))};O.defaultProps={autosave:!1,edit:!1};var F=O,D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},N=function(r){var u,l=r.thing,c=r.solidDataset,d=r.property,f=r.properties,h=r.saveDatasetTo,p=r.onSave,v=r.onError,m=r.edit,g=r.autosave,y=r.inputProps,_=D(r,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),b=(0,e.useContext)(s).fetch,w=S({dataset:c,thing:l,type:"boolean",property:d,properties:f}),x=w.value,k=w.thing,A=w.property,T=w.dataset,C=w.setDataset,P=w.error;(0,e.useEffect)((function(){P&&v&&v(P)}),[P,v]);var I,R=!1;R=null!==(u=x)&&void 0!==u&&u,I=R.toString();var L=(0,e.useState)(I),M=o(L,2),O=M[0],F=M[1],N=(0,e.useState)(R),j=o(N,2),B=j[0],U=j[1];(0,e.useEffect)((function(){F(B.toString())}),[B]);var z=function(){var e=a(i().mark((function e(t){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(I!==O&&k&&T&&t.target.reportValidity())){e.next=26;break}if(r=(0,n.setBoolean)(k,A,B),e.prev=2,!h){e.next=11;break}return e.next=6,(0,n.saveSolidDatasetAt)(h,(0,n.setThing)(T,r),{fetch:b});case 6:return a=e.sent,e.next=9,E(h,C);case 9:e.next=20;break;case 11:if(!(0,n.hasResourceInfo)(T)){e.next=19;break}return e.next=14,(0,n.saveSolidDatasetAt)((0,n.getSourceUrl)(T),(0,n.setThing)(T,r),{fetch:b});case 14:return a=e.sent,e.next=17,E((0,n.getSourceUrl)(T),C);case 17:e.next=20;break;case 19:v&&v(new Error("Please provide saveDatasetTo location for new data"));case 20:!P&&p&&p(a,r),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),v&&v(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}();return t().createElement(t().Fragment,null,!m&&T&&k&&t().createElement("span",Object.assign({},_),"".concat(O)),m&&T&&k&&t().createElement("input",Object.assign({type:"checkbox",checked:B},y,{onChange:function(e){U(e.target.checked)},onBlur:function(e){return g&&z(e)},value:O})))};N.defaultProps={autosave:!1,edit:!1};var j=N,B=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},U=function(r){var u,l=r.thing,c=r.solidDataset,d=r.property,f=r.properties,h=r.saveDatasetTo,p=r.onSave,v=r.onError,m=r.edit,g=r.autosave,y=r.inputProps,_=B(r,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),b=(0,e.useContext)(s).fetch,w=S({dataset:c,thing:l,type:"url",property:d,properties:f}),x=w.value,k=w.thing,A=w.property,T=w.dataset,C=w.setDataset,P=w.error;(0,e.useEffect)((function(){P&&v&&v(P)}),[P,v]);var I=null!==(u=null===x||void 0===x?void 0:x.toString())&&void 0!==u?u:"",R=(0,e.useState)(I),L=o(R,2),M=L[0],O=L[1],F=function(){var e=a(i().mark((function e(t){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(I!==M&&k&&T&&t.target.reportValidity())){e.next=26;break}if(r=(0,n.setUrl)(k,A,M),e.prev=2,!h){e.next=11;break}return e.next=6,(0,n.saveSolidDatasetAt)(h,(0,n.setThing)(T,r),{fetch:b});case 6:return a=e.sent,e.next=9,E(h,C);case 9:e.next=20;break;case 11:if(!(0,n.hasResourceInfo)(T)){e.next=19;break}return e.next=14,(0,n.saveSolidDatasetAt)((0,n.getSourceUrl)(T),(0,n.setThing)(T,r),{fetch:b});case 14:return a=e.sent,e.next=17,E((0,n.getSourceUrl)(T),C);case 17:e.next=20;break;case 19:v&&v(new Error("Please provide saveDatasetTo location for new data"));case 20:!P&&p&&p(a,r),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),v&&v(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}();return t().createElement(t().Fragment,null,!m&&T&&k&&t().createElement("span",Object.assign({},_),"".concat(M)),m&&T&&k&&t().createElement("input",Object.assign({type:"url"},y,{onChange:function(e){O(e.target.value)},onBlur:function(e){return g&&F(e)},value:M})))};U.defaultProps={autosave:!1,edit:!1};var z=U,V=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Z=function(r){var u,l=r.thing,c=r.solidDataset,d=r.property,f=r.properties,h=r.saveDatasetTo,p=r.onSave,v=r.onError,m=r.edit,g=r.autosave,y=r.inputProps,_=V(r,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),b=(0,e.useContext)(s).fetch,w=S({dataset:c,thing:l,type:"integer",property:d,properties:f}),x=w.value,k=w.thing,A=w.property,T=w.dataset,C=w.setDataset,P=w.error;(0,e.useEffect)((function(){P&&v&&v(P)}),[P,v]);var I=null!==(u=null===x||void 0===x?void 0:x.toString())&&void 0!==u?u:"",R=(0,e.useState)(I),L=o(R,2),M=L[0],O=L[1],F=function(){var e=a(i().mark((function e(t){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(I!==M&&k&&T&&t.target.reportValidity())){e.next=26;break}if(r=(0,n.setInteger)(k,A,parseInt(M,10)),e.prev=2,!h){e.next=11;break}return e.next=6,(0,n.saveSolidDatasetAt)(h,(0,n.setThing)(T,r),{fetch:b});case 6:return a=e.sent,e.next=9,E(h,C);case 9:e.next=20;break;case 11:if(!(0,n.hasResourceInfo)(T)){e.next=19;break}return e.next=14,(0,n.saveSolidDatasetAt)((0,n.getSourceUrl)(T),(0,n.setThing)(T,r),{fetch:b});case 14:return a=e.sent,e.next=17,E((0,n.getSourceUrl)(T),C);case 17:e.next=20;break;case 19:v&&v(new Error("Please provide saveDatasetTo location for new data"));case 20:!P&&p&&p(a,r),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),v&&v(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}();return t().createElement(t().Fragment,null,!m&&T&&k&&t().createElement("span",Object.assign({},_),"".concat(M)),m&&T&&k&&t().createElement("input",Object.assign({type:"number",step:"any"},y,{onChange:function(e){O(e.target.value)},onBlur:function(e){return g&&F(e)},value:M})))};Z.defaultProps={autosave:!1,edit:!1};var H=Z,W=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},G=function(r){var u,l=r.thing,c=r.solidDataset,d=r.property,f=r.properties,h=r.saveDatasetTo,p=r.onSave,v=r.onError,m=r.edit,g=r.autosave,y=r.inputProps,_=W(r,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),b=(0,e.useContext)(s).fetch,w=S({dataset:c,thing:l,type:"decimal",property:d,properties:f}),x=w.value,k=w.thing,A=w.property,T=w.dataset,C=w.setDataset,P=w.error;(0,e.useEffect)((function(){P&&v&&v(P)}),[P,v]);var I=null!==(u=null===x||void 0===x?void 0:x.toString())&&void 0!==u?u:"",R=(0,e.useState)(I),L=o(R,2),M=L[0],O=L[1],F=function(){var e=a(i().mark((function e(t){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(I!==M&&k&&T&&t.target.reportValidity())){e.next=26;break}if(r=(0,n.setDecimal)(k,A,parseFloat(M)),e.prev=2,!h){e.next=11;break}return e.next=6,(0,n.saveSolidDatasetAt)(h,(0,n.setThing)(T,r),{fetch:b});case 6:return a=e.sent,e.next=9,E(h,C);case 9:e.next=20;break;case 11:if(!(0,n.hasResourceInfo)(T)){e.next=19;break}return e.next=14,(0,n.saveSolidDatasetAt)((0,n.getSourceUrl)(T),(0,n.setThing)(T,r),{fetch:b});case 14:return a=e.sent,e.next=17,E((0,n.getSourceUrl)(T),C);case 17:e.next=20;break;case 19:v&&v(new Error("Please provide saveDatasetTo location for new data"));case 20:!P&&p&&p(a,r),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),v&&v(e.t0);case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}();return t().createElement(t().Fragment,null,!m&&T&&k&&t().createElement("span",Object.assign({},_),"".concat(M)),m&&T&&k&&t().createElement("input",Object.assign({type:"number",step:"any"},y,{onChange:function(e){O(e.target.value)},onBlur:function(e){return g&&F(e)},value:M})))};G.defaultProps={autosave:!1,edit:!1};var q=G,K=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function J(n){var r,i=n,a=i.dataType,s=K(i,["dataType"]),u=s.thing,l=s.solidDataset,c=s.property,d=s.properties,f=s.edit,h=s.loadingComponent,p=s.errorComponent,v=S({dataset:l,thing:u,property:c,properties:d,type:a,locale:s.locale}),m=v.thing,g=v.value,y=v.error;f||g||"boolean"===a||(r=new Error("No value found for property."));var _=!m&&!y,b=(0,e.useState)(null!==y&&void 0!==y?y:r),w=o(b,1)[0];if(_){var x=h&&t().createElement(h,null)||t().createElement("span",null,"fetching data in progress");return null===h&&(x=null),x}if(w)return p?t().createElement(p,{error:w}):t().createElement("span",null,w.toString());var k=F;switch(a){case"boolean":k=j;break;case"datetime":k=L;break;case"decimal":k=q;break;case"integer":k=H;break;case"url":k=z;break;default:k=F}return t().createElement(k,Object.assign({},s))}J.defaultProps={autosave:!1,edit:!1};var X=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Y(n){var r,i=n.children,a=n.property,s=n.properties,u=n.thing,l=n.solidDataset,c=n.autosave,d=n.rel,f=n.target,h=n.edit,p=n.loadingComponent,v=n.errorComponent,m=n.onSave,g=n.onError,y=X(n,["children","property","properties","thing","solidDataset","autosave","rel","target","edit","loadingComponent","errorComponent","onSave","onError"]),_=S({dataset:l,thing:u,property:a,properties:s,type:"url"}),b=_.value,w=_.thing,x=_.property,k=_.dataset,E=_.error;h||b||(r=new Error("URL not found for given property"));var A=!w&&!E,T=(0,e.useState)(null!==E&&void 0!==E?E:r),C=o(T,1)[0];if(A){var P=p&&t().createElement(p,null)||t().createElement("span",null,"fetching data in progress");return null===p&&(P=null),P}if(C)return v?t().createElement(v,{error:C}):t().createElement("span",null,C.toString());var I=d||("_blank"===f?"noopener noreferrer":"nofollow");return h?t().createElement(J,{dataType:"url",solidDataset:k,thing:w,property:x,autosave:c,onSave:m,onError:g,edit:!0}):t().createElement("a",Object.assign({href:b,rel:I,target:f},y),null!==i&&void 0!==i?i:b)}var Q=function(n){var r=n.oidcIssuer,o=n.redirectUrl,u=n.children,l=n.authOptions,c=n.onError,d=Object.assign({redirectUrl:o,oidcIssuer:r},l),f=(0,e.useContext)(s),h=f.login,p=f.setSessionRequestInProgress;function v(){return m.apply(this,arguments)}function m(){return(m=a(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,h(d);case 4:p(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),p(!1),c&&c(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function g(e){return e.preventDefault(),"Enter"===e.key?v():Promise.resolve()}return u?t().createElement("div",{role:"button",tabIndex:0,onClick:v,onKeyDown:g},u):t().createElement("button",{type:"button",onClick:v,onKeyDown:g},"Log In")},$=function(n){var r=n.children,o=n.onLogout,u=n.onError,l=(0,e.useContext)(s).logout;function c(){return d.apply(this,arguments)}function d(){return(d=a(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:o&&o(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),u&&u(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function f(e){return e.preventDefault(),"Enter"===e.key?c():Promise.resolve()}return r?t().createElement("div",{role:"button",tabIndex:0,onClick:c,onKeyDown:f},r):t().createElement("button",{type:"button",onClick:c,onKeyDown:f},"Log Out")},ee=c(767),te=function(e){var n=e.children,r=e.solidDataset,i=e.datasetUrl,a=e.thing,o=e.thingUrl,s=e.onError,u=e.loadingComponent;return t().createElement(g,{onError:s,solidDataset:r,datasetUrl:i,loadingComponent:u},t().createElement(b,{thing:a,thingUrl:o},n))},ne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function re(e){throw new Error("Can't use TableColumn outside a Table.")}function ie(r){var i=r.children,a=r.emptyStateComponent,o=r.things,s=r.filter,u=r.ascIndicator,l=r.descIndicator,c=r.getRowProps,d=ne(r,["children","emptyStateComponent","things","filter","ascIndicator","descIndicator","getRowProps"]),f=(0,e.useMemo)((function(){var t=[],r=o.map((function(){return{}}));return e.Children.forEach(i,(function(e,i){if(e){var a=e.props,s=a.property,u=a.header,l=a.body,c=a.dataType,d=void 0===c?"string":c,f=a.locale,h=a.multiple,p=void 0!==h&&h,v=a.sortable,m=a.sortFn,g=a.filterable;t.push({Header:null!==u&&void 0!==u?u:"".concat(s),accessor:"col".concat(i),disableGlobalFilter:!g,disableSortBy:!v,Cell:null!==l&&void 0!==l?l:function(e){var t=e.value;return null!=t?"".concat(t):""}}),m?t[i].sortType=function(e,t,n){var r=e.values[n],i=t.values[n];return m(r,i)}:("string"===d&&(t[i].sortType=d),"integer"!==d&&"decimal"!==d||(t[i].sortType="number")),o.forEach((function(e,t){r[t]["col".concat(i)]=p?function(e,t,r,i){switch(e){case"boolean":return(0,n.getBooleanAll)(t,r);case"datetime":return(0,n.getDatetimeAll)(t,r);case"decimal":return(0,n.getDecimalAll)(t,r);case"integer":return(0,n.getIntegerAll)(t,r);case"url":return(0,n.getUrlAll)(t,r);default:return i?(0,n.getStringWithLocaleAll)(t,r,i):(0,n.getStringNoLocaleAll)(t,r)}}(d,e.thing,s,f):k(d,e.thing,s,f)}))}})),{columns:t,data:r}}),[i,o]),h=f.columns,p=f.data,v=(0,ee.useTable)({columns:h,data:p,initialState:{globalFilter:s||void 0}},ee.useGlobalFilter,ee.useSortBy),m=v.getTableProps,g=v.getTableBodyProps,y=v.headerGroups,_=v.rows,b=v.prepareRow;return _.length?t().createElement("table",Object.assign({},m(),d),t().createElement("thead",null,y.map((function(e){return t().createElement("tr",Object.assign({},e.getHeaderGroupProps()),e.headers.map((function(e){return t().createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),e.isSorted&&(e.isSortedDesc?l:u))})))}))),t().createElement("tbody",Object.assign({},g()),_.map((function(e){b(e);var n=o[e.index].dataset,r=o[e.index].thing;return t().createElement("tr",Object.assign({},e.getRowProps(c(e,r,n))),t().createElement(te,{solidDataset:n,thing:r},e.cells.map((function(e){return t().createElement("td",Object.assign({},e.getCellProps()),e.render("Cell"))}))))})))):a?t().createElement(a,null):null}ie.defaultProps={filter:void 0,ascIndicator:t().createElement("span",{role:"img","aria-label":"Sorted in ascending order"}," ","\ud83d\udd3c"),descIndicator:t().createElement("span",{role:"img","aria-label":"Sorted in descending order"}," ","\ud83d\udd3d"),getRowProps:function(){return{}}};var ae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function oe(r){var u,l=r.thing,c=r.solidDataset,d=r.property,f=r.properties,h=r.saveDatasetTo,p=r.locale,v=r.onSave,m=r.onError,g=r.inputProps,y=r.errorComponent,_=r.loadingComponent,b=r.edit,w=void 0!==b&&b,x=r.autosave,k=void 0!==x&&x,A=ae(r,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","inputProps","errorComponent","loadingComponent","edit","autosave"]),T=(0,e.useContext)(s).fetch,C=S({dataset:c,thing:l,property:d,properties:f,type:"string",locale:p}),P=C.error,I=C.value,R=C.thing,L=C.property,M=C.dataset,O=C.setDataset;w||I||(u=new Error("No value found for property."));var F=!R&&!P,D=(0,e.useState)(null!==P&&void 0!==P?P:u),N=o(D,1)[0];(0,e.useEffect)((function(){N&&m&&m(N)}),[N,m]);var j=(0,e.useState)(I),B=o(j,2),U=B[0],z=B[1],V=(0,e.useState)(),Z=o(V,2)[1],H=(0,e.useState)(I),W=o(H,2),G=W[0],q=W[1],K=function(){var e=a(i().mark((function e(t){var r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G===t.target.value||!R||!M){e.next=27;break}if(r=t.target.value,a=p?(0,n.setStringWithLocale)(R,L,r,p):(0,n.setStringNoLocale)(R,L,r),e.prev=3,!h){e.next=12;break}return e.next=7,(0,n.saveSolidDatasetAt)(h,(0,n.setThing)(M,a),{fetch:T});case 7:return o=e.sent,e.next=10,E(h,O);case 10:e.next=21;break;case 12:if(!(0,n.hasResourceInfo)(M)){e.next=20;break}return e.next=15,(0,n.saveSolidDatasetAt)((0,n.getSourceUrl)(M),(0,n.setThing)(M,a),{fetch:T});case 15:return o=e.sent,e.next=18,E((0,n.getSourceUrl)(M),O);case 18:e.next=21;break;case 20:Z((function(){throw new Error("Please provide saveDatasetTo location for new data")}));case 21:v&&v(o,a),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),m&&m(e.t0);case 27:case"end":return e.stop()}}),e,null,[[3,24]])})));return function(t){return e.apply(this,arguments)}}();if(F){var J=_&&t().createElement(_,null)||t().createElement("span",null,"fetching data in progress");return null===_&&(J=null),J}return N?y?t().createElement(y,{error:N}):t().createElement("span",null,N.toString()):t().createElement(t().Fragment,null,!w&&M&&R&&t().createElement("span",Object.assign({},A),U),w&&M&&R&&t().createElement("input",Object.assign({type:g&&g.type?g.type:"text"},g,{onFocus:function(e){return q(e.target.value)},onChange:function(e){return z(e.target.value)},onBlur:function(e){return k&&K(e)},value:U||""})))}var se=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function ue(n){var r,u=n.property,l=n.properties,c=n.thing,d=n.edit,f=n.autosave,h=n.onSave,p=n.onError,v=n.maxSize,m=n.inputProps,g=n.errorComponent,y=n.loadingComponent,_=se(n,["property","properties","thing","edit","autosave","onSave","onError","maxSize","inputProps","errorComponent","loadingComponent"]),b=(0,e.useContext)(s).fetch,x=S({thing:c,property:u,properties:l,type:"url"}),k=x.value,E=x.thing,A=x.error;d||k||(r=new Error("No value found for property."));var C=!E&&!A,P=(0,e.useState)(null!==A&&void 0!==A?A:r),I=o(P,2),R=I[0],L=I[1];(0,e.useEffect)((function(){R&&p&&p(R)}),[R,p,g]);var M=(0,e.useState)(""),O=o(M,2),F=O[0],D=O[1],N=T(k),j=N.data,B=N.error,U=N.inProgress;(0,e.useEffect)((function(){if(!U)if(B)L(B);else{var e=j&&URL.createObjectURL(j);e&&D(e)}}),[j,U,B]);var z=function(){var e=a(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.files,!(f&&n&&n.length>0&&k)){e.next=6;break}return e.next=4,w(k,n[0],t,b,v,h,p);case 4:(r=e.sent)&&D(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=null;if(C||U){var Z=y&&t().createElement(y,null)||t().createElement("span",null,"fetching data in progress");return null===y&&(Z=null),Z}return R?V=g?t().createElement(g,{error:R}):t().createElement("span",null,R.toString()):k&&(V=t().createElement("video",Object.assign({src:F||k,controls:!0},_))),t().createElement(t().Fragment,null,V,d&&t().createElement("input",Object.assign({},m,{type:"file",accept:"video/*",onChange:function(e){return z(e.target)}})))}function le(){var t=(0,e.useContext)(s);return{session:t.session,sessionRequestInProgress:t.sessionRequestInProgress,fetch:t.fetch,login:t.login,logout:t.logout}}function ce(t,r,i){var a=p(t,i),o=a.dataset,s=a.error,u=(0,e.useContext)(_).thing;return r?o?{thing:(0,n.getThing)(o,r),error:s}:{thing:null,error:s}:{thing:u||void 0,error:s}}}(),d}()},e.exports=r(n(2791),n(9945),n(2464),n(3320),n(1358))},7478:function(e,t,n){var r=n(1908);e.exports=r},594:function(e,t,n){var r=n(6690).default,i=n(9728).default,a=function(){"use strict";function e(t){r(this,e),this.value=t||"b"+ ++e.nextId}return i(e,[{key:"equals",value:function(e){return!!e&&e.termType===this.termType&&e.value===this.value}}]),e}();a.prototype.termType="BlankNode",a.nextId=0,e.exports=a},1908:function(e,t,n){var r=n(594),i=n(721),a=n(7967),o=n(8558),s=n(1020),u=n(7233),l=n(6646);var c={namedNode:function(e){return new s(e)},blankNode:function(e){return new r(e)},literal:function(e,t){return"string"===typeof t?-1===t.indexOf(":")?new o(e,t):new o(e,null,c.namedNode(t)):new o(e,null,t)},variable:function(e){return new l(e)},defaultGraph:function(){return c.defaultGraphInstance},triple:function(e,t,n){return c.quad(e,t,n)},quad:function(e,t,n,r){return new u(e,t,n,r||c.defaultGraphInstance)},fromTerm:function(e){return a.call(c,e)},fromQuad:function(e){return a.call(c,e)},defaultGraphInstance:new i};e.exports=c},721:function(e,t,n){var r=n(6690).default,i=n(9728).default,a=function(){"use strict";function e(){r(this,e)}return i(e,[{key:"equals",value:function(e){return!!e&&e.termType===this.termType}}]),e}();a.prototype.termType="DefaultGraph",a.prototype.value="",e.exports=a},8558:function(e,t,n){var r=n(6690).default,i=n(9728).default,a=n(1020),o=function(){"use strict";function e(t,n,i){r(this,e),this.value=t,this.datatype=e.stringDatatype,this.language="",n?(this.language=n,this.datatype=e.langStringDatatype):i&&(this.datatype=i)}return i(e,[{key:"equals",value:function(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}]),e}();o.prototype.termType="Literal",o.langStringDatatype=new a("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),o.stringDatatype=new a("http://www.w3.org/2001/XMLSchema#string"),e.exports=o},1020:function(e,t,n){var r=n(6690).default,i=n(9728).default,a=function(){"use strict";function e(t){r(this,e),this.value=t}return i(e,[{key:"equals",value:function(e){return!!e&&e.termType===this.termType&&e.value===this.value}}]),e}();a.prototype.termType="NamedNode",e.exports=a},7233:function(e,t,n){var r=n(6690).default,i=n(9728).default,a=n(721),o=function(){"use strict";function e(t,n,i,o){r(this,e),this.subject=t,this.predicate=n,this.object=i,this.graph=o||new a}return i(e,[{key:"equals",value:function(e){return!!e&&("Quad"===e.termType||!e.termType)&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}}]),e}();o.prototype.termType="Quad",o.prototype.value="",e.exports=o},6646:function(e,t,n){var r=n(6690).default,i=n(9728).default,a=function(){"use strict";function e(t){r(this,e),this.value=t}return i(e,[{key:"equals",value:function(e){return!!e&&e.termType===this.termType&&e.value===this.value}}]),e}();a.prototype.termType="Variable",e.exports=a},7967:function(e){e.exports=function(e){if(!e)return null;if("BlankNode"===e.termType)return this.blankNode(e.value);if("DefaultGraph"===e.termType)return this.defaultGraph();if("Literal"===e.termType)return this.literal(e.value,e.language||this.namedNode(e.datatype.value));if("NamedNode"===e.termType)return this.namedNode(e.value);if("Quad"===e.termType){var t=this.fromTerm(e.subject),n=this.fromTerm(e.predicate),r=this.fromTerm(e.object),i=this.fromTerm(e.graph);return this.quad(t,n,r,i)}if("Variable"===e.termType)return this.variable(e.value);throw new Error("unknown termType ".concat(e.termType))}},2711:function(e,t,n){var r=n(8416).default,i=n(4704).default,a=n(6690).default,o=n(9728).default;function s(e){return"string"===typeof e||e instanceof String}function u(e){if("string"===typeof e)return e;if(!e)return"";if("undefined"!==typeof e.id&&"Quad"!==e.termType)return e.id;var t,n,r,i;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return"_:".concat(e.value);case"Variable":return"?".concat(e.value);case"DefaultGraph":return"";case"Literal":return e.language?'"'.concat(e.value,'"@').concat(e.language):'"'.concat(e.value,'"').concat(e.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==e.datatype.value?"^^".concat(e.datatype.value):"");case"Quad":return t=c(u(e.subject)),n=c(u(e.predicate)),r=c(u(e.object)),i="DefaultGraph"===e.graph.termType?"":" ".concat(u(e.graph)),"<<".concat(t," ").concat(n," ").concat(r).concat(i,">>");default:throw new Error("Unexpected termType: ".concat(e.termType))}}var l=/^"(.*".*)(?="[^"]*$)/;function c(e){return e.replace(l,(function(e,t){return'"'.concat(t.replace(/"/g,'""'))}))}var d=function(e){"use strict";function t(e){if(a(this,t),this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,e){var n,r=i(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.add(o)}}catch(s){r.e(s)}finally{r.f()}}}return o(t,[{key:"size",get:function(){var e=this._size;if(null!==e)return e;e=0;var t,n,r=this._graphs;for(var i in r)for(var a in t=r[i].subjects)for(var o in n=t[a])e+=Object.keys(n[o]).length;return this._size=e,this._size}},{key:"add",value:function(e){var t=u(e.subject),n=u(e.predicate),r=u(e.object),i=u(e.graph),a=this._graphs[i];a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a));var o=this._ids,s=this._entities;return t=o[t]||(o[s[++this._id]=t]=this._id),n=o[n]||(o[s[++this._id]=n]=this._id),r=o[r]||(o[s[++this._id]=r]=this._id),this._addToIndex(a.subjects,t,n,r),this._addToIndex(a.predicates,n,r,t),this._addToIndex(a.objects,r,t,n),this._setQuad(t,n,r,i,e),this._size=null,this}},{key:"delete",value:function(e){var t,n,r,i=u(e.subject),a=u(e.predicate),o=u(e.object),s=u(e.graph),l=this._ids,c=this._graphs;if(!(i=l[i])||!(a=l[a])||!(o=l[o])||!(t=c[s])||!(n=t.subjects[i])||!(r=n[a])||!(o in r))return this;for(i in this._removeFromIndex(t.subjects,i,a,o),this._removeFromIndex(t.predicates,a,o,i),this._removeFromIndex(t.objects,o,i,a),null!==this._size&&this._size--,this._deleteQuad(i,a,o,s),t.subjects)return this;return delete c[s],this}},{key:"has",value:function(e){var t=u(e.subject),n=u(e.predicate),r=u(e.object),i=u(e.graph),a=this._graphs[i];if(!a)return!1;var o,l,c,d=this._ids;return!(s(t)&&!(o=d[t])||s(n)&&!(l=d[n])||s(r)&&!(c=d[r]))&&1===this._countInIndex(a.objects,c,o,l)}},{key:"match",value:function(e,t,n,r){return this._createDataset(this._match(e,t,n,r))}},{key:e,value:function(){return this._match()[Symbol.iterator]()}},{key:"_addToIndex",value:function(e,t,n,r){var i=e[t]||(e[t]={}),a=i[n]||(i[n]={}),o=r in a;return o||(a[r]=null),!o}},{key:"_removeFromIndex",value:function(e,t,n,r){var i=e[t],a=i[n];for(var o in delete a[r],a)return;for(var s in delete i[n],i)return;delete e[t]}},{key:"_findInIndex",value:function(e,t,n,i,a,o,s,u,l,c){var d,f,h;for(var p in t&&((d=e,e={})[t]=d[t]),e)if(f=e[p])for(var v in n&&((d=f,f={})[n]=d[n]),f)if(h=f[v])for(var m=(i?i in h?[i]:[]:Object.keys(h)),g=0;g<m.length;g++){var y,_=(r(y={},a,p),r(y,o,v),r(y,s,m[g]),y),b=this._getQuad(_.subject,_.predicate,_.object,u);if(c)c.push(b);else if(l(b))return!0}return c}},{key:"_countInIndex",value:function(e,t,n,r){var i,a,o,s=0;for(var u in t&&((i=e,e={})[t]=i[t]),e)if(a=e[u])for(var l in n&&((i=a,a={})[n]=i[n]),a)(o=a[l])&&(r?r in o&&s++:s+=Object.keys(o).length);return s}},{key:"_getGraphs",value:function(e){return s(e)?r({},e,this._graphs[e]):this._graphs}},{key:"_match",value:function(e,t,n,r){e=e&&u(e),t=t&&u(t),n=n&&u(n),r=r&&u(r);var i,a,o,l,c=[],d=this._getGraphs(r),f=this._ids;if(s(e)&&!(a=f[e])||s(t)&&!(o=f[t])||s(n)&&!(l=f[n]))return c;for(var h in d)(i=d[h])&&(a?l?this._findInIndex(i.objects,l,a,o,"object","subject","predicate",h,null,c):this._findInIndex(i.subjects,a,o,null,"subject","predicate","object",h,null,c):o?this._findInIndex(i.predicates,o,l,null,"predicate","object","subject",h,null,c):l?this._findInIndex(i.objects,l,null,null,"object","subject","predicate",h,null,c):this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",h,null,c));return c}},{key:"_getQuad",value:function(e,t,n,r){return this._quads.get(this._toId(e,t,n,r))}},{key:"_setQuad",value:function(e,t,n,r,i){this._quads.set(this._toId(e,t,n,r),i)}},{key:"_deleteQuad",value:function(e,t,n,r){this._quads.delete(this._toId(e,t,n,r))}},{key:"_createDataset",value:function(e){return new this.constructor(e)}},{key:"_toId",value:function(e,t,n,r){return"".concat(e,":").concat(t,":").concat(n,":").concat(r)}}]),t}(Symbol.iterator);e.exports=d},4533:function(e,t,n){var r=n(7478),i=n(2711);e.exports=Object.assign({dataset:function(e){return new i(e)}},r)},5935:function(e){"use strict";var t="undefined"!==typeof self?self:"undefined"!==typeof window?window:void 0,n=t.AbortController,r=t.AbortSignal;e.exports=n,e.exports.AbortSignal=r,e.exports.default=n},2009:function(e,t){"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=s(e),o=a[0],u=a[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,u)),c=0,d=u>0?o-4:o;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=16383,s=0,l=r-i;s<l;s+=o)a.push(u(e,s,s+o>l?l:s+o));1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9778:function(e,t,n){"use strict";var r=n(2009),i=n(4038),a="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;var o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|v(e,t),r=s(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(z(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(z(e,SharedArrayBuffer)||e&&z(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return u.from(r,t,n);var i=function(e){if(u.isBuffer(e)){var t=0|p(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||V(e.length)?s(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),s(e<0?0:0|p(e))}function f(e){for(var t=e.length<0?0:0|p(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,u.prototype),r}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function v(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(i)return r?-1:j(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var d=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){d=!1;break}if(d)return a}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(V(s))return o;e[n+o]=s}return o}function w(e,t,n,r){return U(j(t,e.length-n),e,n,r)}function x(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return U(B(t),e,n,r)}function S(e,t,n,r){return U(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128===(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128===(192&a)&&128===(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?s(e):void 0!==t?"string"===typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(z(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),z(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(z(a,Uint8Array))i+a.length>r.length?u.from(a).copy(r,i):Uint8Array.prototype.set.call(r,a,i);else{if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},u.byteLength=v,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(e,t,n,r,i){if(z(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(l[d]!==c[d]){a=l[d],o=c[d];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=Z[e[a]];return i}function R(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function L(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return t=+t,n>>>=0,a||O(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,a){return t=+t,n>>>=0,a||O(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:u.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var N=/[^+/0-9A-Za-z-_]/g;function j(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function B(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!==e}var Z=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},4037:function(e,t,n){"use strict";var r=n(2506),i=n(9722),a=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&a(e,".prototype.")>-1?i(n):n}},9722:function(e,t,n){"use strict";var r=n(3350),i=n(2506),a=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(o,a),u=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(f){l=null}e.exports=function(e){var t=s(r,o,arguments);u&&l&&(u(t,"length").configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))}));return t};var d=function(){return s(r,a,arguments)};l?l(e.exports,"apply",{value:d}):e.exports.apply=d},4255:function(e,t){var n="undefined"!==typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!==typeof e&&(e=String(e)),e}function s(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function c(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function d(e){var t=new FileReader,n=c(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:n.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:n.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n.arrayBuffer&&n.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=c(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=a(e),t=o(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=o(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),s(e)},u.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),s(e)},u.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),s(e)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=function(e){var t=e.toUpperCase();return p.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function g(e){var t=new u;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},h.call(v.prototype),h.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];y.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(w){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function b(e,r){return new Promise((function(i,a){var o=new v(e,r);if(o.signal&&o.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:g(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;i(new y(t,e))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&n.blob&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}b.polyfill=!0,e.fetch||(e.fetch=b,e.Headers=u,e.Request=v,e.Response=y),t.Headers=u,t.Request=v,t.Response=y,t.fetch=b,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},7465:function(e){"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}v(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&v(e,"error",t,n)}(e,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,a,o;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"===typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,function(e){console&&console.warn&&console.warn(e)}(l)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=c.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=a[e];if(void 0===u)return!1;if("function"===typeof u)r(u,this,t);else{var l=u.length,c=p(u,l);for(n=0;n<l;++n)r(c[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,a,o;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},5369:function(e,t,n){"use strict";var r=n(460),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),"[object Array]"===i.call(e)?function(e,t,n){for(var r=0,i=e.length;r<i;r++)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,o):"string"===typeof e?function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}(e,t,o):function(e,t,n){for(var r in e)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,o)}},222:function(e){"use strict";var t=Array.prototype.slice,n=Object.prototype.toString;e.exports=function(e){var r=this;if("function"!==typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,a=t.call(arguments,1),o=Math.max(0,r.length-a.length),s=[],u=0;u<o;u++)s.push("$"+u);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var n=r.apply(this,a.concat(t.call(arguments)));return Object(n)===n?n:this}return r.apply(e,a.concat(t.call(arguments)))})),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i}},3350:function(e,t,n){"use strict";var r=n(222);e.exports=Function.prototype.bind||r},2506:function(e,t,n){"use strict";var r,i=SyntaxError,a=Function,o=TypeError,s=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(C){u=null}var l=function(){throw new o},c=u?function(){try{return l}catch(e){try{return u(arguments,"callee").get}catch(t){return l}}}():l,d=n(697)(),f=Object.getPrototypeOf||function(e){return e.__proto__},h={},p="undefined"===typeof Uint8Array?r:f(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":h,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?f(f([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&d?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&d?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?f(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":p,"%TypeError%":o,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet},m=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=f(i.prototype))}return v[t]=n,n},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(3350),_=n(8316),b=y.call(Function.call,Array.prototype.concat),w=y.call(Function.apply,Array.prototype.splice),x=y.call(Function.call,String.prototype.replace),k=y.call(Function.call,String.prototype.slice),S=y.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,T=function(e,t){var n,r=e;if(_(g,r)&&(r="%"+(n=g[r])[0]+"%"),_(v,r)){var a=v[r];if(a===h&&(a=m(r)),"undefined"===typeof a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:a}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=k(e,0,1),n=k(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return x(e,E,(function(e,t,n,i){r[r.length]=n?x(i,A,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",a=T("%"+r+"%",t),s=a.name,l=a.value,c=!1,d=a.alias;d&&(r=d[0],w(n,b([0,1],d)));for(var f=1,h=!0;f<n.length;f+=1){var p=n[f],m=k(p,0,1),g=k(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&h||(c=!0),_(v,s="%"+(r+="."+p)+"%"))l=v[s];else if(null!=l){if(!(p in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&f+1>=n.length){var y=u(l,p);l=(h=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:l[p]}else h=_(l,p),l=l[p];h&&!c&&(v[s]=l)}}return l}},3347:function(e,t,n){"use strict";var r=n(2506)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(i){r=null}e.exports=r},697:function(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(3297);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},3297:function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4707:function(e,t,n){"use strict";var r=n(3297);e.exports=function(){return r()&&!!Symbol.toStringTag}},8316:function(e,t,n){"use strict";var r=n(3350);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=h(n);i&&i!==p&&e(t,i,r)}var o=c(n);d&&(o=o.concat(d(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!a[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=f(n,g);try{l(t,g,y)}catch(_){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case a:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case l:case f:case m:case v:case u:return e;default:return t}}case i:return t}}}function x(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return x(e)||w(e)===c},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===o||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===f||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b||e.$$typeof===g)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},3181:function(e,t,n){"use strict";var r=n(861).default,i=n(6690).default,a=n(9728).default,o=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/\s|\uFEFF|\xA0/,l=/\r?\n[\x20\x09]+/g,c=/[;,"]/,d=/[;,"]|\s/,f=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,h=1,p=2,v=4;function m(e){return e.replace(s,"")}function g(e){return u.test(e)}function y(e,t){for(;g(e[t]);)t++;return t}function _(e){return d.test(e)||!f.test(e)}var b=function(){function e(t){i(this,e),this.refs=[],t&&this.parse(t)}return a(e,[{key:"rel",value:function(e){for(var t=[],n=e.toLowerCase(),r=0;r<this.refs.length;r++)this.refs[r].rel.toLowerCase()===n&&t.push(this.refs[r]);return t}},{key:"get",value:function(e,t){e=e.toLowerCase();for(var n=[],r=0;r<this.refs.length;r++)this.refs[r][e]===t&&n.push(this.refs[r]);return n}},{key:"set",value:function(e){return this.refs.push(e),this}},{key:"setUnique",value:function(e){return this.refs.some((function(t){return n=t,r=e,Object.keys(n).length===Object.keys(r).length&&Object.keys(n).every((function(e){return e in r&&n[e]===r[e]}));var n,r}))||this.refs.push(e),this}},{key:"has",value:function(e,t){e=e.toLowerCase();for(var n=0;n<this.refs.length;n++)if(this.refs[n][e]===t)return!0;return!1}},{key:"parse",value:function(t,n){t=m(t=(n=n||0)?t.slice(n):t).replace(l,"");for(var i,a=h,o=t.length,s=(n=0,null);n<o;)if(a===h){if(g(t[n])){n++;continue}if("<"!==t[n])throw new Error('Unexpected character "'+t[n]+'" at offset '+n);var u;if(null!=s&&(null!=s.rel?(u=this.refs).push.apply(u,r(e.expandRelations(s))):this.refs.push(s)),-1===(_=t.indexOf(">",n)))throw new Error("Expected end of URI delimiter at offset "+n);s={uri:t.slice(n+1,_)},n=_,a=p,n++}else if(a===p){if(g(t[n])){n++;continue}if(";"===t[n])a=v,n++;else{if(","!==t[n])throw new Error('Unexpected character "'+t[n]+'" at offset '+n);a=h,n++}}else{if(a!==v)throw new Error('Unknown parser state "'+a+'"');if(";"===t[n]||g(t[n])){n++;continue}if(-1===(_=t.indexOf("=",n)))throw new Error("Expected attribute delimiter at offset "+n);var d=m(t.slice(n,_)).toLowerCase(),f="";if('"'===t[n=y(t,n=_+1)])for(n++;n<o;){if('"'===t[n]){n++;break}"\\"===t[n]&&n++,f+=t[n],n++}else{for(var _=n+1;!c.test(t[_])&&_<o;)_++;f=t.slice(n,_),n=_}switch(s[d]&&e.isSingleOccurenceAttr(d)||("*"===d[d.length-1]?s[d]=e.parseExtendedValue(f):(f="type"===d?f.toLowerCase():f,null!=s[d]?Array.isArray(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f)),t[n]){case",":a=h;break;case";":a=v}n++}null!=s&&(null!=s.rel?(i=this.refs).push.apply(i,r(e.expandRelations(s))):this.refs.push(s));return s=null,this}},{key:"toString",value:function(){for(var t=[],n="",r=null,i=0;i<this.refs.length;i++)r=this.refs[i],n=Object.keys(this.refs[i]).reduce((function(t,n){return"uri"===n?t:t+"; "+e.formatAttribute(n,r[n])}),"<"+r.uri+">"),t.push(n);return t.join(", ")}}]),e}();b.isCompatibleEncoding=function(e){return o.test(e)},b.parse=function(e,t){return(new b).parse(e,t)},b.isSingleOccurenceAttr=function(e){return"rel"===e||"type"===e||"media"===e||"title"===e||"title*"===e},b.isTokenAttr=function(e){return"rel"===e||"type"===e||"anchor"===e},b.escapeQuotes=function(e){return e.replace(/"/g,'\\"')},b.expandRelations=function(e){return e.rel.split(" ").map((function(t){var n=Object.assign({},e);return n.rel=t,n}))},b.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']*)')?(.+)/.exec(e);return{language:t[2].toLowerCase(),encoding:b.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:b.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]}},b.formatExtendedAttribute=function(e,t){var n=(t.encoding||"utf-8").toUpperCase();return e+"="+n+"'"+(t.language||"en")+"'"+(Buffer.isBuffer(t.value)&&b.isCompatibleEncoding(n)?t.value.toString(n):Buffer.isBuffer(t.value)?t.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(t.value))},b.formatAttribute=function(e,t){return Array.isArray(t)?t.map((function(t){return b.formatAttribute(e,t)})).join("; "):"*"===e[e.length-1]||"string"!==typeof t?b.formatExtendedAttribute(e,t):(b.isTokenAttr(e)?t=_(t)?'"'+b.escapeQuotes(t)+'"':b.escapeQuotes(t):_(t)&&(t='"'+(t=(t=encodeURIComponent(t)).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),e+"="+t)},e.exports=b},4038:function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*u-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*v}},2534:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},5450:function(e,t,n){"use strict";var r=n(4707)(),i=n(4037)("Object.prototype.toString"),a=function(e){return!(r&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},o=function(e){return!!a(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return a(arguments)}();a.isLegacyArguments=o,e.exports=s?a:o},460:function(e){"use strict";var t,n,r=Function.prototype.toString,i="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof i&&"function"===typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(h){h!==n&&(i=null)}else i=null;var a=/^\s*class\b/,o=function(e){try{var t=r.call(e);return a.test(t)}catch(n){return!1}},s=function(e){try{return!o(e)&&(r.call(e),!0)}catch(t){return!1}},u=Object.prototype.toString,l="function"===typeof Symbol&&!!Symbol.toStringTag,c=!(0 in[,]),d=function(){return!1};if("object"===typeof document){var f=document.all;u.call(f)===u.call(document.all)&&(d=function(e){if((c||!e)&&("undefined"===typeof e||"object"===typeof e))try{var t=u.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(n){}return!1})}e.exports=i?function(e){if(d(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;try{i(e,null,t)}catch(r){if(r!==n)return!1}return!o(e)&&s(e)}:function(e){if(d(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if(l)return s(e);if(o(e))return!1;var t=u.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},5718:function(e,t,n){"use strict";var r,i=Object.prototype.toString,a=Function.prototype.toString,o=/^\s*(?:function)?\*/,s=n(4707)(),u=Object.getPrototypeOf;e.exports=function(e){if("function"!==typeof e)return!1;if(o.test(a.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!u)return!1;if("undefined"===typeof r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&u(t)}return u(e)===r}},6218:function(e,t,n){"use strict";var r=n(5369),i=n(306),a=n(4037),o=a("Object.prototype.toString"),s=n(4707)(),u=n(3347),l="undefined"===typeof globalThis?n.g:globalThis,c=i(),d=a("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},f=a("String.prototype.slice"),h={},p=Object.getPrototypeOf;s&&u&&p&&r(c,(function(e){var t=new l[e];if(Symbol.toStringTag in t){var n=p(t),r=u(n,Symbol.toStringTag);if(!r){var i=p(n);r=u(i,Symbol.toStringTag)}h[e]=r.get}}));e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=f(o(e),8,-1);return d(c,t)>-1}return!!u&&function(e){var t=!1;return r(h,(function(n,r){if(!t)try{t=n.call(e)===r}catch(i){}})),t}(e)}},5483:function(e,t,n){var r=n(8416).default,i=n(6115).default,a=n(3515).default,o=n(1588).default,s=n(3808).default,u=n(4993).default,l=n(1589).default,c=n(861).default,d=n(7424).default,f=n(4704).default,h=n(6690).default,p=n(9728).default,v=n(1655).default,m=n(6389).default,g=n(3496).default;e.exports=function(){"use strict";var e,t,n;function y(r,i){if(e)if(t){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",o={};e(o),n=i(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=i;else e=i}return y(["exports"],(function(e){var t,n,r,y="undefined"!=typeof self?self:{},_="2.13.0",b={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==t){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{t=null!={NODE_ENV:"production",PUBLIC_URL:"https://uo282944.github.io/lomap_6a_despliegue",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"https://uo282944.github.io/lomap_6a_despliegue",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):e}catch(y){t=e}}return t},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},w={supported:!1,testSupport:function(e){!x&&r&&(k?S(e):n=e)}},x=!1,k=!1;function S(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.isContextLost())return;w.supported=!0}catch(e){}e.deleteTexture(t),x=!0}y.document&&((r=y.document.createElement("img")).onload=function(){n&&S(n),n=null,k=!0},r.onerror=function(){x=!0,n=null},r.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var E="01",A=T;function T(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}T.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=i/a}var o=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?o=n:s=n,n=.5*(s-o)+o;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var C=P;function P(e,t){this.x=e,this.y=t}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(e){return e instanceof P?e:Array.isArray(e)?new P(e[0],e[1]):e};var I=Math.PI/180,R=180/Math.PI;function L(e){return e*I}function M(e){return e*R}var O=[[0,0],[1,0],[1,1],[0,1]];function F(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function D(e,t,n,r){var i=new A(e,t,n,r);return function(e){return i.solve(e)}}var N=D(.25,.1,.25,1);function j(e,t,n){return Math.min(n,Math.max(t,e))}function B(e,t,n){return(n=j((n-e)/(t-e),0,1))*n*(3-2*n)}function U(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function z(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),i[o]=t,0==--r&&n(a,i)}))}))}function V(e){var t=[];for(var n in e)t.push(e[n]);return t}function Z(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}var H=1;function W(){return H++}function G(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function q(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function K(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function J(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function X(e,t){return-1!==e.indexOf(t,e.length-t.length)}function Y(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function Q(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function $(e){return Array.isArray(e)?e.map($):"object"==typeof e&&e?Y(e,$):e}var ee={};function te(e){ee[e]||("undefined"!=typeof console&&console.warn(e),ee[e]=!0)}function ne(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function re(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],r+=((n=e[o]).x-t.x)*(t.y+n.y);return r}function ie(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function ae(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){var a=r||i;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var oe=null;function se(e){if(null==oe){var t=e.navigator?e.navigator.userAgent:null;oe=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return oe}function ue(e){try{var t=y[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function le(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}var ce,de,fe="mapbox-tiles",he=500,pe=50;function ve(){try{return y.caches}catch(e){}}function me(){ve()&&!ce&&(ce=y.caches.open(fe))}function ge(e){var t=e.indexOf("?");if(t<0)return e;var n=function(e){var t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),r=n.filter((function(e){var t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return r.length?"".concat(e.slice(0,t),"?").concat(r.join("&")):e.slice(0,t)}var ye=1/0,_e={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(_e);var be=function(e){v(n,e);var t=m(n);function n(e,r,i){var a;return h(this,n),401===r&&Re(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=r,a.url=i,a}return p(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(g(Error)),we=ie()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===y.location.protocol?y.parent:y).location.href},xe=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(we())&&!/^\w+:/.test(n))){if(y.fetch&&y.Request&&y.AbortController&&y.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,r=new y.AbortController,i=new y.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:we(),signal:r.signal}),a=!1,o=!1,s=(n=i.url).indexOf("sku=")>0&&Re(n);"json"===e.type&&i.headers.set("Accept","application/json");var u=function(n,r,a){if(!o){if(n&&"SecurityError"!==n.message&&te(n),r&&a)return l(r);var u=Date.now();y.fetch(i).then((function(n){if(n.ok){var r=s?n.clone():null;return l(n,r,u)}return t(new be(n.statusText,n.status,e.url))})).catch((function(n){"AbortError"!==n.name&&t(new Error("".concat(n.message," ").concat(e.url)))}))}},l=function(n,r,s){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){o||(r&&s&&function(e,t,n){if(me(),ce){var r={status:t.status,statusText:t.statusText,headers:new y.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var i=ae(t.headers.get("Cache-Control")||"");if(!i["no-store"]){i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString());var a=r.headers.get("Expires");a&&(new Date(a).getTime()-n<42e4||function(e,t){if(void 0===de)try{new Response(new ReadableStream),de=!0}catch(e){de=!1}de?t(e.body):e.blob().then(t)}(t,(function(t){var n=new y.Response(t,r);me(),ce&&ce.then((function(t){return t.put(ge(e.url),n)})).catch((function(e){return te(e.message)}))})))}}}(i,r,s),a=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))};return s?function(e,t){if(me(),!ce)return t(null);var n=ge(e.url);ce.then((function(e){e.match(n).then((function(r){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=ae(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,u):u(null,null),{cancel:function(){o=!0,a||r.abort()}}}(e,t);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new y.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new be(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},ke=function(e,t){return xe(Z(e,{type:"arrayBuffer"}),t)};function Se(e){var t=y.document.createElement("a");return t.href=e,t.protocol===y.document.location.protocol&&t.host===y.document.location.host}var Ee,Ae,Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ee=[],Ae=0;var Ce=function e(t,n){if(w.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ae>=b.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ee.push(r),r}Ae++;var i=!1,a=function(){if(!i)for(i=!0,Ae--;Ee.length&&Ae<b.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Ee.shift(),n=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=e(n,r).cancel)}},o=ke(t,(function(e,t,r,i){a(),e?n(e):t&&(y.createImageBitmap?function(e,t){var n=new y.Blob([new Uint8Array(e)],{type:"image/png"});y.createImageBitmap(n).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,(function(e,t){return n(e,t,r,i)})):function(e,t){var n=new y.Image,r=y.URL;n.onload=function(){t(null,n),r.revokeObjectURL(n.src),n.onload=null,y.requestAnimationFrame((function(){n.src=Te}))},n.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new y.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(i):Te}(t,(function(e,t){return n(e,t,r,i)})))}));return{cancel:function(){o.cancel(),a()}}},Pe="NO_ACCESS_TOKEN";function Ie(e){return 0===e.indexOf("mapbox:")}function Re(e){return b.API_URL_REGEX.test(e)}function Le(e){return b.API_CDN_URL_REGEX.test(e)}function Me(e){return b.API_STYLE_REGEX.test(e)&&!Oe(e)}function Oe(e){return b.API_SPRITE_REGEX.test(e)}var Fe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function De(e){var t=e.match(Fe);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ne(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function je(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(y.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var Be=function(){function e(t){h(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return p(e,[{key:"getStorageKey",value:function(e){var t=je(b.ACCESS_TOKEN),n="";return n=t&&t.u?y.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):b.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(n):"mapbox.eventData:".concat(n)}},{key:"fetchEventData",value:function(){var e=ue("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=y.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=y.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){te("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=ue("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{y.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&y.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){te("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,t,n,r){var i=this;if(b.EVENTS_URL){var a=De(b.EVENTS_URL);a.params.push("access_token=".concat(r||b.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString()},s=t?Z(o,t):o,u={url:Ne(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return xe(Z(e,{method:"POST"}),t)}(u,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),Ue=new(function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,"appUserTurnstile"))._customAccessToken=e,r}return p(n,[{key:"postTurnstileEvent",value:function(e,t){b.EVENTS_URL&&b.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Ie(e)||Re(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=je(b.ACCESS_TOKEN),r=n?n.u:b.ACCESS_TOKEN,i=r!==this.eventData.tokenU;K(this.anonId)||(this.anonId=G(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),u=(a-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||o.getDate()!==s.getDate()}else i=!0;i?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:E,"enabled.telemetry":!1,userId:this.anonId},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=r)}),e):this.processRequests()}}}]),n}(Be)),ze=Ue.postTurnstileEvent.bind(Ue),Ve=new(function(e){v(n,e);var t=m(n);function n(){var e;return h(this,n),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return p(n,[{key:"postMapLoadEvent",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,b.EVENTS_URL&&(n||b.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(Pe)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),K(this.anonId)||(this.anonId=G()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:E,skuToken:this.skuToken,userId:this.anonId},(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e))}}}]),n}(Be)),Ze=Ve.postMapLoadEvent.bind(Ve),He=new(function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.call(this,"gljs.performance")}return p(n,[{key:"postPerformanceEvent",value:function(e,t){b.EVENTS_URL&&(e||b.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}},{key:"processRequests",value:function(e){if(!this.pendingRequest&&0!==this.queue.length){var t,n=this.queue.shift(),r=n.timestamp,i=function(e){var t=y.performance.getEntriesByType("resource"),n=y.performance.getEntriesByType("mark"),r=function(e){var t={};if(e)for(var n in e)if("other"!==n){var r,i=f(e[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value,o="".concat(n,"ResolveRangeMin"),s="".concat(n,"ResolveRangeMax"),u="".concat(n,"RequestCount"),l="".concat(n,"RequestCachedCount");t[o]=Math.min(t[o]||1/0,a.startTime),t[s]=Math.max(t[s]||-1/0,a.responseEnd);var c=function(e){void 0===t[e]&&(t[e]=0),++t[e]};void 0!==a.transferSize&&0===a.transferSize&&c(l),c(u)}}catch(d){i.e(d)}finally{i.f()}}return t}(function(e,t){var n={};if(e){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t(a);void 0===n[o]&&(n[o]=[]),n[o].push(a)}}catch(s){i.e(s)}finally{i.f()}}return n}(t,Ye)),i=y.devicePixelRatio,a=y.navigator.connection||y.navigator.mozConnection||y.navigator.webkitConnection,o={counters:[],metadata:[],attributes:[]},s=function(e,t,n){null!=n&&e.push({name:t,value:n.toString()})};for(var u in r)s(o.counters,u,r[u]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(s(o.counters,"interactionRangeMin",e.interactionRange[0]),s(o.counters,"interactionRangeMax",e.interactionRange[1])),n)for(var l=function(){var e=d[c],t=Je[e],r=n.find((function(e){return e.name===t}));r&&s(o.counters,t,r.startTime)},c=0,d=Object.keys(Je);c<d.length;c++)l();return s(o.counters,"visibilityHidden",e.visibilityHidden),s(o.attributes,"style",function(e){if(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.name.split("?")[0];if(Me(r)){var i=r.split("/").slice(-2);if(2===i.length)return"mapbox://styles/".concat(i[0],"/").concat(i[1])}}}catch(a){n.e(a)}finally{n.f()}}}(t)),s(o.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),s(o.attributes,"fogEnabled",e.fogEnabled?"true":"false"),s(o.attributes,"projection",e.projection),s(o.attributes,"zoom",e.zoom),s(o.metadata,"devicePixelRatio",i),s(o.metadata,"connectionEffectiveType",a?a.effectiveType:void 0),s(o.metadata,"navigatorUserAgent",y.navigator.userAgent),s(o.metadata,"screenWidth",y.screen.width),s(o.metadata,"screenHeight",y.screen.height),s(o.metadata,"windowWidth",y.innerWidth),s(o.metadata,"windowHeight",y.innerHeight),s(o.metadata,"mapWidth",e.width/i),s(o.metadata,"mapHeight",e.height/i),s(o.metadata,"webglRenderer",e.renderer),s(o.metadata,"webglVendor",e.vendor),s(o.metadata,"sdkVersion",_),s(o.metadata,"sdkIdentifier","mapbox-gl-js"),o}(n.performanceData),a=f(i.metadata);try{for(a.s();!(t=a.n()).done;)t.value}catch(c){a.e(c)}finally{a.f()}var o,s=f(i.counters);try{for(s.s();!(o=s.n()).done;)o.value}catch(c){s.e(c)}finally{s.f()}var u,l=f(i.attributes);try{for(l.s();!(u=l.n()).done;)u.value}catch(c){l.e(c)}finally{l.f()}this.postEvent(r,i,(function(){}),e)}}}]),n}(Be)),We=He.postPerformanceEvent.bind(He),Ge=new(function(e){v(n,e);var t=m(n);function n(){var e;return h(this,n),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return p(n,[{key:"getSession",value:function(e,t,n,r){var i=this;if(b.API_URL&&b.SESSION_PATH){var a=De(b.API_URL+b.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(r||b.ACCESS_TOKEN||""));var o={url:Ne(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return xe(Z(e,{method:"GET"}),t)}(o,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"getSessionAPI",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,b.SESSION_PATH&&b.API_URL&&(n||b.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(Pe)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||this.getSession(i,this.skuToken,(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e)}}}]),n}(Be)),qe=Ge.getSessionAPI.bind(Ge),Ke=new Set,Je={create:"create",load:"load",fullLoad:"fullLoad"},Xe={mark:function(e){y.performance.mark(e)},measure:function(e,t,n){y.performance.measure(e,t,n)}};function Ye(e){var t=e.name.split("?")[0];return Le(t)&&t.includes("mapbox-gl.js")?"javascript":Le(t)&&t.includes("mapbox-gl.css")?"css":function(e){return b.API_FONTS_REGEX.test(e)}(t)?"fontRange":Oe(t)?"sprite":Me(t)?"style":function(e){return b.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}var Qe,$e,et,tt,nt=y.performance;function rt(e){var t=e?e.url.toString():void 0;return nt.getEntriesByName(t)}var it={now:function(){return void 0!==et?et:y.performance.now()},setNow:function(e){et=e},restoreNow:function(){et=void 0},frame:function(e){var t=y.requestAnimationFrame(e);return{cancel:function(){return y.cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width,r=e.height;tt||(tt=y.document.createElement("canvas"));var i=tt.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("failed to create canvas 2d context");return(n>tt.width||r>tt.height)&&(tt.width=n,tt.height=r),i.clearRect(-t,-t,n+2*t,r+2*t),i.drawImage(e,0,0,n,r),i.getImageData(-t,-t,n+2*t,r+2*t)},resolveURL:function(e){return Qe||(Qe=y.document.createElement("a")),Qe.href=e,Qe.href},get devicePixelRatio(){return y.devicePixelRatio},get prefersReducedMotion(){return!!y.matchMedia&&(null==$e&&($e=y.matchMedia("(prefers-reduced-motion: reduce)")),$e.matches)}};function at(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function ot(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var st=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,e),Z(this,n),this.type=t})),ut=function(e){v(n,e);var t=m(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(this,n),t.call(this,"error",Z({error:e},r))}return p(n)}(st),lt=function(){function e(){h(this,e)}return p(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},at(e,t,this._listeners),this}},{key:"off",value:function(e,t){return ot(e,t,this._listeners),ot(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var n=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},at(e,t,this._oneTimeListeners),this):new Promise((function(t){return n.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new st(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;var r,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],a=f(i);try{for(a.s();!(r=a.n()).done;)r.value.call(this,e)}catch(d){a.e(d)}finally{a.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],u=f(s);try{for(u.s();!(o=u.n()).done;){var l=o.value;ot(n,l,this._oneTimeListeners),l.call(this,e)}}catch(d){u.e(d)}finally{u.f()}var c=this._eventedParent;c&&(Z(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(e))}else e instanceof ut&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),ct=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}function ft(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ht(e){if(Array.isArray(e))return e.map(ht);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=ht(e[n]);return t}return ft(e)}var pt=function(e){v(n,e);var t=m(n);function n(e,r){var i;return h(this,n),(i=t.call(this,r)).message=r,i.key=e,i}return p(n)}(g(Error)),vt=pt,mt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];h(this,e),this.parent=t,this.bindings={};var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(u){i.e(u)}finally{i.f()}}return p(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),gt=mt,yt={kind:"null"},_t={kind:"number"},bt={kind:"string"},wt={kind:"boolean"},xt={kind:"color"},kt={kind:"object"},St={kind:"value"},Et={kind:"collator"},At={kind:"formatted"},Tt={kind:"resolvedImage"};function Ct(e,t){return{kind:"array",itemType:e,N:t}}function Pt(e){if("array"===e.kind){var t=Pt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var It=[yt,_t,bt,wt,xt,At,kt,Ct(St),Tt];function Rt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Rt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=It;n<r.length;n++)if(!Rt(r[n],t))return null}return"Expected ".concat(Pt(e)," but found ").concat(Pt(t)," instead.")}function Lt(e,t){return t.some((function(t){return t.kind===e.kind}))}function Mt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var Ot,Ft={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Dt(e){return(e=Math.round(e))<0?0:e>255?255:e}function Nt(e){return Dt("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function jt(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Bt(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{Ot={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in Ft)return Ft[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var a=n.substr(0,r),o=n.substr(r+1,i-(r+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return null;s=jt(o.pop());case"rgb":return 3!==o.length?null:[Nt(o[0]),Nt(o[1]),Nt(o[2]),s];case"hsla":if(4!==o.length)return null;s=jt(o.pop());case"hsl":if(3!==o.length)return null;var u=(parseFloat(o[0])%360+360)%360/360,l=jt(o[1]),c=jt(o[2]),d=c<=.5?c*(l+1):c+l-c*l,f=2*c-d;return[Dt(255*Bt(f,d,u+1/3)),Dt(255*Bt(f,d,u)),Dt(255*Bt(f,d,u-1/3)),s];default:return null}}return null}}catch(e){}var Ut=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;h(this,e),this.r=t,this.g=n,this.b=r,this.a=i}return p(e,[{key:"toString",value:function(){var e=this.toArray(),t=d(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(r),",").concat(Math.round(i),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}},{key:"toArray01",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[e/r,t/r,n/r,r]}},{key:"toArray01PremultipliedAlpha",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var n=Ot(t);return n?new e(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),e}();Ut.black=new Ut(0,0,0,1),Ut.white=new Ut(1,1,1,1),Ut.transparent=new Ut(0,0,0,0),Ut.red=new Ut(1,0,0,1),Ut.blue=new Ut(0,0,1,1);var zt=Ut,Vt=function(){function e(t,n,r){h(this,e),this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return p(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),Zt=p((function e(t,n,r,i,a){h(this,e),this.text=t.normalize?t.normalize():t,this.image=n,this.scale=r,this.fontStack=i,this.textColor=a})),Ht=function(){function e(t){h(this,e),this.sections=t}return p(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],n=f(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"fromString",value:function(t){return new e([new Zt(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Wt=function(){function e(t){h(this,e),this.name=t.name,this.available=t.available}return p(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Gt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([e,t,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function qt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof zt)return!0;if(e instanceof Vt)return!0;if(e instanceof Ht)return!0;if(e instanceof Wt)return!0;if(Array.isArray(e)){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(!qt(t.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}if("object"==typeof e){for(var r in e)if(!qt(e[r]))return!1;return!0}return!1}function Kt(e){if(null===e)return yt;if("string"==typeof e)return bt;if("boolean"==typeof e)return wt;if("number"==typeof e)return _t;if(e instanceof zt)return xt;if(e instanceof Vt)return Et;if(e instanceof Ht)return At;if(e instanceof Wt)return Tt;if(Array.isArray(e)){var t,n,r=e.length,i=f(e);try{for(i.s();!(n=i.n()).done;){var a=Kt(n.value);if(t){if(t===a)continue;t=St;break}t=a}}catch(o){i.e(o)}finally{i.f()}return Ct(t||St,r)}return kt}function Jt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof zt||e instanceof Ht||e instanceof Wt?e.toString():JSON.stringify(e)}var Xt=function(){function e(t,n){h(this,e),this.type=t,this.value=n}return p(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof zt?["rgba"].concat(this.value.toArray()):this.value instanceof Ht?this.value.serialize():this.value}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!qt(t[1]))return n.error("invalid value");var r=t[1],i=Kt(r),a=n.expectedType;return"array"!==i.kind||0!==i.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(i=a),new e(i,r)}}]),e}(),Yt=Xt,Qt=function(){function e(t){h(this,e),this.name="ExpressionEvaluationError",this.message=t}return p(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),$t={string:bt,number:_t,boolean:wt,object:kt},en=function(){function e(t,n){h(this,e),this.type=t,this.args=n}return p(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Rt(this.type,Kt(n)))return n;if(t===this.args.length-1)throw new Qt("Expected value to be of type ".concat(Pt(this.type),", but found ").concat(Pt(Kt(n))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r,i=1,a=t[0];if("array"===a){var o,s;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in $t)||"object"===u)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=$t[u],i++}else o=St;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}r=Ct(o,s)}else r=$t[a];for(var l=[];i<t.length;i++){var c=n.parse(t[i],i,St);if(!c)return null;l.push(c)}return new e(r,l)}}]),e}(),tn=en,nn=function(){function e(t){h(this,e),this.type=At,this.sections=t}return p(e,[{key:"evaluate",value:function(e){return new Ht(this.sections.map((function(t){var n=t.content.evaluate(e);return Kt(n)===Tt?new Zt("",n,null,null,null):new Zt(Jt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,n=f(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],n=f(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return n.error("First argument must be an image or text section.");for(var i=[],a=!1,o=1;o<=t.length-1;++o){var s=t[o];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;var u=null;if(s["font-scale"]&&!(u=n.parse(s["font-scale"],1,_t)))return null;var l=null;if(s["text-font"]&&!(l=n.parse(s["text-font"],1,Ct(bt))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,xt)))return null;var d=i[i.length-1];d.scale=u,d.font=l,d.textColor=c}else{var f=n.parse(t[o],1,St);if(!f)return null;var h=f.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:f,scale:null,font:null,textColor:null})}}return new e(i)}}]),e}(),rn=function(){function e(t){h(this,e),this.type=Tt,this.input=t}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=Wt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,bt);return r?new e(r):n.error("No image name provided.")}}]),e}(),an={"to-boolean":wt,"to-color":xt,"to-number":_t,"to-string":bt},on=function(){function e(t,n){h(this,e),this.type=t,this.args=n}return p(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,n,r,i=f(this.args);try{for(i.s();!(r=i.n()).done;){if(t=r.value.evaluate(e),n=null,t instanceof zt)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Gt(t[0],t[1],t[2],t[3])))return new zt(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(c){i.e(c)}finally{i.f()}throw new Qt(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var o,s=null,u=f(this.args);try{for(u.s();!(o=u.n()).done;){if(null===(s=o.value.evaluate(e)))return 0;var l=Number(s);if(!isNaN(l))return l}}catch(c){u.e(c)}finally{u.f()}throw new Qt("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?Ht.fromString(Jt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Wt.fromString(Jt(this.args[0].evaluate(e))):Jt(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new nn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new rn(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return n.error("Expected one argument.");for(var i=an[r],a=[],o=1;o<t.length;o++){var s=n.parse(t[o],o,St);if(!s)return null;a.push(s)}return new e(i,a)}}]),e}(),sn=on,un=["Unknown","Point","LineString","Polygon"],ln=function(){function e(){h(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return p(e,[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?un[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,n=this.featureTileCoord,r=n.x,i=n.y;return this.featureDistanceData.bearing[0]*(r*t-e[0])+this.featureDistanceData.bearing[1]*(i*t-e[1])}return 0}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=zt.parse(e)),t}}]),e}(),cn=function(){function e(t,n,r,i){h(this,e),this.name=t,this.type=n,this._evaluate=r,this.args=i}return p(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){var r,i=t[0],a=e.definitions[i];if(!a)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,u=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,l=u.filter((function(e){var n=d(e,1)[0];return!Array.isArray(n)||n.length===t.length-1})),h=null,p=f(l);try{for(p.s();!(o=p.n()).done;){var v=d(o.value,2),m=v[0],g=v[1];h=new Nn(n.registry,n.path,null,n.scope);for(var y=[],_=!1,b=1;b<t.length;b++){var w=t[b],x=Array.isArray(m)?m[b-1]:m.type,k=h.parse(w,1+y.length,x);if(!k){_=!0;break}y.push(k)}if(!_)if(Array.isArray(m)&&m.length!==y.length)h.error("Expected ".concat(m.length," arguments, but found ").concat(y.length," instead."));else{for(var S=0;S<y.length;S++){var E=Array.isArray(m)?m[S]:m.type,A=y[S];h.concat(S+1).checkSubtype(E,A.type)}if(0===h.errors.length)return new e(i,s,g,y)}}}catch(R){p.e(R)}finally{p.f()}if(1===l.length)(r=n.errors).push.apply(r,c(h.errors));else{for(var T=(l.length?l:u).map((function(e){var t;return t=d(e,1)[0],Array.isArray(t)?"(".concat(t.map(Pt).join(", "),")"):"(".concat(Pt(t.type),"...)")})).join(" | "),C=[],P=1;P<t.length;P++){var I=n.parse(t[P],1+C.length);if(!I)return null;C.push(Pt(I.type))}n.error("Expected arguments of type ".concat(T,", but found (").concat(C.join(", "),") instead."))}return null}},{key:"register",value:function(t,n){for(var r in e.definitions=n,n)t[r]=e}}]),e}(),dn=cn,fn=function(){function e(t,n,r){h(this,e),this.type=Et,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}return p(e,[{key:"evaluate",value:function(e){return new Vt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,wt);if(!i)return null;var a=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,wt);if(!a)return null;var o=null;return r.locale&&!(o=n.parse(r.locale,1,bt))?null:new e(i,a,o)}}]),e}(),hn=8192;function pn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function vn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function mn(e,t){var n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*hn),Math.round(r*i*hn)]}function gn(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return r*o-a*i==0&&r*a<=0&&i*o<=0}function yn(e,t){for(var n,r,i,a=!1,o=0,s=t.length;o<s;o++)for(var u=t[o],l=0,c=u.length;l<c-1;l++){if(gn(e,u[l],u[l+1]))return!1;(r=u[l])[1]>(n=e)[1]!=(i=u[l+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(a=!a)}return a}function _n(e,t){for(var n=0;n<t.length;n++)if(yn(e,t[n]))return!0;return!1}function bn(e,t,n,r){var i=r[0]-n[0],a=r[1]-n[1],o=(e[0]-n[0])*a-i*(e[1]-n[1]),s=(t[0]-n[0])*a-i*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function wn(e,t,n){var r,i,a,o,s,u,l,c=f(n);try{for(c.s();!(r=c.n()).done;)for(var d=r.value,h=0;h<d.length-1;++h)if(0!=(u=[(s=d[h+1])[0]-(o=d[h])[0],s[1]-o[1]])[0]*(l=[(a=t)[0]-(i=e)[0],a[1]-i[1]])[1]-u[1]*l[0]&&bn(i,a,o,s)&&bn(o,s,i,a))return!0}catch(p){c.e(p)}finally{c.f()}return!1}function xn(e,t){for(var n=0;n<e.length;++n)if(!yn(e[n],t))return!1;for(var r=0;r<e.length-1;++r)if(wn(e[r],e[r+1],t))return!1;return!0}function kn(e,t){for(var n=0;n<t.length;n++)if(xn(e,t[n]))return!0;return!1}function Sn(e,t,n){for(var r=[],i=0;i<e.length;i++){for(var a=[],o=0;o<e[i].length;o++){var s=mn(e[i][o],n);pn(t,s),a.push(s)}r.push(a)}return r}function En(e,t,n){for(var r=[],i=0;i<e.length;i++){var a=Sn(e[i],t,n);r.push(a)}return r}function An(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){var i=.5*r,a=e[0]-n[0]>i?-r:n[0]-e[0]>i?r:0;0===a&&(a=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=a}pn(t,e)}function Tn(e,t,n,r){var i=Math.pow(2,r.z)*hn,a=[r.x*hn,r.y*hn],o=[];if(!e)return o;var s,u=f(e);try{for(u.s();!(s=u.n()).done;){var l,c=s.value,d=f(c);try{for(d.s();!(l=d.n()).done;){var h=l.value,p=[h.x+a[0],h.y+a[1]];An(p,t,n,i),o.push(p)}}catch(v){d.e(v)}finally{d.f()}}}catch(v){u.e(v)}finally{u.f()}return o}function Cn(e,t,n,r){var i=Math.pow(2,r.z)*hn,a=[r.x*hn,r.y*hn],o=[];if(!e)return o;var s,u,l=f(e);try{for(l.s();!(s=l.n()).done;){var c,d=s.value,h=[],p=f(d);try{for(p.s();!(c=p.n()).done;){var v=c.value,m=[v.x+a[0],v.y+a[1]];pn(t,m),h.push(m)}}catch(x){p.e(x)}finally{p.f()}o.push(h)}}catch(x){l.e(x)}finally{l.f()}if(t[2]-t[0]<=i/2){(u=t)[0]=u[1]=1/0,u[2]=u[3]=-1/0;var g,y=f(o);try{for(y.s();!(g=y.n()).done;){var _,b=g.value,w=f(b);try{for(w.s();!(_=w.n()).done;)An(_.value,t,n,i)}catch(x){w.e(x)}finally{w.f()}}}catch(x){y.e(x)}finally{y.f()}}return o}var Pn=function(){function e(t,n){h(this,e),this.type=wt,this.geojson=t,this.geometries=n}return p(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=Sn(t.coordinates,r,i),o=Tn(e.geometry(),n,r,i);if(!vn(n,r))return!1;var s,u=f(o);try{for(u.s();!(s=u.n()).done;)if(!yn(s.value,a))return!1}catch(p){u.e(p)}finally{u.f()}}if("MultiPolygon"===t.type){var l=En(t.coordinates,r,i),c=Tn(e.geometry(),n,r,i);if(!vn(n,r))return!1;var d,h=f(c);try{for(h.s();!(d=h.n()).done;)if(!_n(d.value,l))return!1}catch(p){h.e(p)}finally{h.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=Sn(t.coordinates,r,i),o=Cn(e.geometry(),n,r,i);if(!vn(n,r))return!1;var s,u=f(o);try{for(u.s();!(s=u.n()).done;)if(!xn(s.value,a))return!1}catch(p){u.e(p)}finally{u.f()}}if("MultiPolygon"===t.type){var l=En(t.coordinates,r,i),c=Cn(e.geometry(),n,r,i);if(!vn(n,r))return!1;var d,h=f(c);try{for(h.s();!(d=h.n()).done;)if(!kn(d.value,l))return!1}catch(p){h.e(p)}finally{h.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(qt(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var a=r.features[i].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(r,r.features[i].geometry)}else if("Feature"===r.type){var o=r.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new e(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}(),In=Pn;function Rn(e){if(e instanceof dn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof In)return!1;var t=!0;return e.eachChild((function(e){t&&!Rn(e)&&(t=!1)})),t}function Ln(e){if(e instanceof dn&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Ln(e)&&(t=!1)})),t}function Mn(e,t){if(e instanceof dn&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!Mn(e,t)&&(n=!1)})),n}var On=function(){function e(t,n){h(this,e),this.type=n.type,this.name=t,this.boundExpression=n}return p(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var r=t[1];return n.scope.has(r)?new e(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),Fn=On,Dn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new gt,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];h(this,e),this.registry=t,this.path=n,this.key=n.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=i,this.errors=a,this.expectedType=r}return p(e,[{key:"parse",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}},{key:"_parse",value:function(e,t){function n(e,t,n){return"assert"===n?new tn(t,[e]):"coerce"===n?new sn(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var a=i.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=n(a,o,t.typeAnnotation||"coerce");else a=n(a,o,t.typeAnnotation||"assert")}if(!(a instanceof Yt)&&"resolvedImage"!==a.type.kind&&jn(a)){var u=new ln;try{a=new Yt(a.type,a.evaluate(u))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,n,r){var i="number"==typeof t?this.path.concat(t):this.path,a=r?this.scope.concat(r):this.scope;return new e(this.registry,i,n||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new vt(i,e))}},{key:"checkSubtype",value:function(e,t){var n=Rt(e,t);return n&&this.error(n),n}}]),e}(),Nn=Dn;function jn(e){if(e instanceof Fn)return jn(e.boundExpression);if(e instanceof dn&&"error"===e.name)return!1;if(e instanceof fn)return!1;if(e instanceof In)return!1;var t=e instanceof sn||e instanceof tn,n=!0;return e.eachChild((function(e){n=t?n&&jn(e):n&&e instanceof Yt})),!!n&&Rn(e)&&Mn(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Bn(e,t){for(var n,r,i=e.length-1,a=0,o=i,s=0;a<=o;)if(n=e[s=Math.floor((a+o)/2)],r=e[s+1],n<=t){if(s===i||t<r)return s;a=s+1}else{if(!(n>t))throw new Qt("Input is not a number.");o=s-1}return 0}var Un=function(){function e(t,n,r){h(this,e),this.type=t,this.input=n,this.labels=[],this.outputs=[];var i,a=f(r);try{for(a.s();!(i=a.n()).done;){var o=d(i.value,2),s=o[0],u=o[1];this.labels.push(s),this.outputs.push(u)}}catch(l){a.e(l)}finally{a.f()}}return p(e,[{key:"evaluate",value:function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Bn(t,r)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,n=f(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(t[1],1,_t);if(!r)return null;var i=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],u=t[o+1],l=o,c=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var d=n.parse(u,c,a);if(!d)return null;a=a||d.type,i.push([s,d])}return new e(a,r,i)}}]),e}(),zn=Un;function Vn(e,t,n){return e*(1-n)+t*n}var Zn=Object.freeze({__proto__:null,number:Vn,color:function(e,t,n){return new zt(Vn(e.r,t.r,n),Vn(e.g,t.g,n),Vn(e.b,t.b,n),Vn(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,r){return Vn(e,t[r],n)}))}}),Hn=.95047,Wn=1.08883,Gn=4/29,qn=6/29,Kn=3*qn*qn,Jn=Math.PI/180,Xn=180/Math.PI;function Yn(e){return e>.008856451679035631?Math.pow(e,1/3):e/Kn+Gn}function Qn(e){return e>qn?e*e*e:Kn*(e-Gn)}function $n(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function er(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tr(e){var t=er(e.r),n=er(e.g),r=er(e.b),i=Yn((.4124564*t+.3575761*n+.1804375*r)/Hn),a=Yn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-Yn((.0193339*t+.119192*n+.9503041*r)/Wn)),alpha:e.a}}function nr(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Qn(t),n=Hn*Qn(n),r=Wn*Qn(r),new zt($n(3.2404542*n-1.5371385*t-.4985314*r),$n(-.969266*n+1.8760108*t+.041556*r),$n(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function rr(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var ir={forward:tr,reverse:nr,interpolate:function(e,t,n){return{l:Vn(e.l,t.l,n),a:Vn(e.a,t.a,n),b:Vn(e.b,t.b,n),alpha:Vn(e.alpha,t.alpha,n)}}},ar={forward:function(e){var t=tr(e),n=t.l,r=t.a,i=t.b,a=Math.atan2(i,r)*Xn;return{h:a<0?a+360:a,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Jn,n=e.c;return nr({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:rr(e.h,t.h,n),c:Vn(e.c,t.c,n),l:Vn(e.l,t.l,n),alpha:Vn(e.alpha,t.alpha,n)}}},or=Object.freeze({__proto__:null,lab:ir,hcl:ar}),sr=function(){function e(t,n,r,i,a){h(this,e),this.type=t,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var o,s=f(a);try{for(s.s();!(o=s.n()).done;){var u=d(o.value,2),l=u[0],c=u[1];this.labels.push(l),this.outputs.push(c)}}catch(p){s.e(p)}finally{s.f()}}return p(e,[{key:"evaluate",value:function(t){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);var a=n.length;if(i>=n[a-1])return r[a-1].evaluate(t);var o=Bn(n,i),s=e.interpolationFactor(this.interpolation,i,n[o],n[o+1]),u=r[o].evaluate(t),l=r[o+1].evaluate(t);return"interpolate"===this.operator?Zn[this.type.kind.toLowerCase()](u,l,s):"interpolate-hcl"===this.operator?ar.reverse(ar.interpolate(ar.forward(u),ar.forward(l),s)):ir.reverse(ir.interpolate(ir.forward(u),ir.forward(l),s))}},{key:"eachChild",value:function(e){e(this.input);var t,n=f(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,n,r){var i=0;if("exponential"===e.name)i=ur(t,e.base,n,r);else if("linear"===e.name)i=ur(t,1,n,r);else if("cubic-bezier"===e.name){var a=e.controlPoints;i=new A(a[0],a[1],a[2],a[3]).solve(ur(t,1,n,r))}return i}},{key:"parse",value:function(t,n){var r=l(t),i=r[0],a=r[1],o=r[2],s=r.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var u=a[1];if("number"!=typeof u)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:u}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(e){return"number"!=typeof e||e<0||e>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,_t)))return null;var d=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=xt:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var h=0;h<s.length;h+=2){var p=s[h],v=s[h+1],m=h+3,g=h+4;if("number"!=typeof p)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(d.length&&d[d.length-1][0]>=p)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var y=n.parse(v,g,f);if(!y)return null;f=f||y.type,d.push([p,y])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new e(f,i,a,o,d):n.error("Type ".concat(Pt(f)," is not interpolatable."))}}]),e}();function ur(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var lr=sr,cr=function(){function e(t,n){h(this,e),this.type=t,this.args=n}return p(e,[{key:"evaluate",value:function(e){var t,n,r=null,i=0,a=f(this.args);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(i++,(r=o.evaluate(e))&&r instanceof Wt&&!r.available&&(t||(t=r),r=null,i===this.args.length))return t;if(null!==r)break}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var a,o=[],s=f(t.slice(1));try{for(s.s();!(a=s.n()).done;){var u=a.value,l=n.parse(u,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,o.push(l)}}catch(d){s.e(d)}finally{s.f()}var c=i&&o.some((function(e){return Rt(i,e.type)}));return new e(c?St:r,o)}}]),e}(),dr=cr,fr=function(){function e(t,n){h(this,e),this.type=n.type,this.bindings=[].concat(t),this.result=n}return p(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=f(this.bindings);try{for(n.s();!(t=n.n()).done;)e(t.value[1])}catch(r){n.e(r)}finally{n.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],n=f(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=d(e.value,2),i=r[0],a=r[1];t.push(i,a.serialize())}}catch(o){n.e(o)}finally{n.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var r=[],i=1;i<t.length-1;i+=2){var a=t[i];if("string"!=typeof a)return n.error("Expected string, but found ".concat(typeof a," instead."),i);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=n.parse(t[i+1],i+1);if(!o)return null;r.push([a,o])}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return s?new e(r,s):null}}]),e}(),hr=fr,pr=function(){function e(t,n,r){h(this,e),this.type=t,this.index=n,this.input=r}return p(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Qt("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new Qt("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new Qt("Array index must be an integer, but found ".concat(t," instead."));return n[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,_t),i=n.parse(t[2],2,Ct(n.expectedType||St));return r&&i?new e(i.type.itemType,r,i):null}}]),e}(),vr=pr,mr=function(){function e(t,n){h(this,e),this.type=wt,this.needle=t,this.haystack=n}return p(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!Mt(t,["boolean","string","number","null"]))throw new Qt("Expected first argument to be of type boolean, string, number or null, but found ".concat(Pt(Kt(t))," instead."));if(!Mt(n,["string","array"]))throw new Qt("Expected second argument to be of type array or string, but found ".concat(Pt(Kt(n))," instead."));return n.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,St),i=n.parse(t[2],2,St);return r&&i?Lt(r.type,[wt,bt,_t,yt,St])?new e(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Pt(r.type)," instead")):null}}]),e}(),gr=mr,yr=function(){function e(t,n,r){h(this,e),this.type=_t,this.needle=t,this.haystack=n,this.fromIndex=r}return p(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Mt(t,["boolean","string","number","null"]))throw new Qt("Expected first argument to be of type boolean, string, number or null, but found ".concat(Pt(Kt(t))," instead."));if(!Mt(n,["string","array"]))throw new Qt("Expected second argument to be of type array or string, but found ".concat(Pt(Kt(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,St),i=n.parse(t[2],2,St);if(!r||!i)return null;if(!Lt(r.type,[wt,bt,_t,yt,St]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Pt(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,_t);return a?new e(r,i,a):null}return new e(r,i)}}]),e}(),_r=yr,br=function(){function e(t,n,r,i,a,o){h(this,e),this.inputType=t,this.type=n,this.input=r,this.cases=i,this.outputs=a,this.otherwise=o}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(Kt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,n=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],a={},o=f(r);try{for(o.s();!(e=o.n()).done;){var s=e.value,u=a[this.cases[s]];void 0===u?(a[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[u][1].push(s)}}catch(g){o.e(g)}finally{o.f()}for(var l=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,h=i;c<h.length;c++){var p=d(h[c],2),v=p[0],m=p[1];n.push(1===m.length?l(m[0]):m.map(l)),n.push(this.outputs[v].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var a={},o=[],s=2;s<t.length-1;s+=2){var u=t[s],l=t[s+1];Array.isArray(u)||(u=[u]);var c=n.concat(s);if(0===u.length)return c.error("Expected at least one branch label.");var d,h=f(u);try{for(h.s();!(d=h.n()).done;){var p=d.value;if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Kt(p)))return null}else r=Kt(p);if(void 0!==a[String(p)])return c.error("Branch labels must be unique.");a[String(p)]=o.length}}catch(y){h.e(y)}finally{h.f()}var v=n.parse(l,s,i);if(!v)return null;i=i||v.type,o.push(v)}var m=n.parse(t[1],1,St);if(!m)return null;var g=n.parse(t[t.length-1],t.length-1,i);return g?"value"!==m.type.kind&&n.concat(1).checkSubtype(r,m.type)?null:new e(r,i,m,a,o,g):null}}]),e}(),wr=br,xr=function(){function e(t,n,r){h(this,e),this.type=t,this.branches=n,this.otherwise=r}return p(e,[{key:"evaluate",value:function(e){var t,n=f(this.branches);try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=r[0],a=r[1];if(i.evaluate(e))return a.evaluate(e)}}catch(o){n.e(o)}finally{n.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=f(this.branches);try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=r[0],a=r[1];e(i),e(a)}}catch(o){n.e(o)}finally{n.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=d(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],a=1;a<t.length-1;a+=2){var o=n.parse(t[a],a,wt);if(!o)return null;var s=n.parse(t[a+1],a+1,r);if(!s)return null;i.push([o,s]),r=r||s.type}var u=n.parse(t[t.length-1],t.length-1,r);return u?new e(r,i,u):null}}]),e}(),kr=xr,Sr=function(){function e(t,n,r,i){h(this,e),this.type=t,this.input=n,this.beginIndex=r,this.endIndex=i}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Mt(t,["string","array"]))throw new Qt("Expected first argument to be of type array or string, but found ".concat(Pt(Kt(t))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,St),i=n.parse(t[2],2,_t);if(!r||!i)return null;if(!Lt(r.type,[Ct(St),bt,St]))return n.error("Expected first argument to be of type array or string, but found ".concat(Pt(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,_t);return a?new e(r.type,r,i,a):null}return new e(r.type,r,i)}}]),e}(),Er=Sr;function Ar(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Tr(e,t,n,r){return 0===r.compare(t,n)}function Cr(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){h(this,i),this.type=wt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return p(i,[{key:"evaluate",value:function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Kt(a),u=Kt(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Qt('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(u.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var l=Kt(a),c=Kt(o);if("string"!==l.kind||"string"!==c.kind)return t(i,a,o)}return this.collator?n(i,a,o,this.collator.evaluate(i)):t(i,a,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],a=t.parse(e[1],1,St);if(!a)return null;if(!Ar(n,a.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Pt(a.type),"'."));var o=t.parse(e[2],2,St);if(!o)return null;if(!Ar(n,o.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Pt(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(Pt(a.type),"' and '").concat(Pt(o.type),"'."));r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new tn(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new tn(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Et)))return null}return new i(a,o,s)}}]),i}()}var Pr=Cr("==",(function(e,t,n){return t===n}),Tr),Ir=Cr("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!Tr(0,t,n,r)})),Rr=Cr("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),Lr=Cr(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Mr=Cr("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Or=Cr(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),Fr=function(){function e(t,n,r,i,a,o){h(this,e),this.type=bt,this.number=t,this.locale=n,this.currency=r,this.unit=i,this.minFractionDigits=a,this.maxFractionDigits=o}return p(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,_t);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var a=null;if(i.locale&&!(a=n.parse(i.locale,1,bt)))return null;var o=null;if(i.currency&&!(o=n.parse(i.currency,1,bt)))return null;var s=null;if(i.unit&&!(s=n.parse(i.unit,1,bt)))return null;var u=null;if(i["min-fraction-digits"]&&!(u=n.parse(i["min-fraction-digits"],1,_t)))return null;var l=null;return i["max-fraction-digits"]&&!(l=n.parse(i["max-fraction-digits"],1,_t))?null:new e(r,a,o,s,u,l)}}]),e}(),Dr=function(){function e(t){h(this,e),this.type=_t,this.input=t}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Qt("Expected value to be of type string or array, but found ".concat(Pt(Kt(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(Pt(r.type)," instead.")):new e(r):null}}]),e}(),Nr={"==":Pr,"!=":Ir,">":Lr,"<":Rr,">=":Or,"<=":Mr,array:tn,at:vr,boolean:tn,case:kr,coalesce:dr,collator:fn,format:nn,image:rn,in:gr,"index-of":_r,interpolate:lr,"interpolate-hcl":lr,"interpolate-lab":lr,length:Dr,let:hr,literal:Yt,match:wr,number:tn,"number-format":Fr,object:tn,slice:Er,step:zn,string:tn,"to-boolean":sn,"to-color":sn,"to-number":sn,"to-string":sn,var:Fn,within:In};function jr(e,t){var n=d(t,4),r=n[0],i=n[1],a=n[2],o=n[3];r=r.evaluate(e),i=i.evaluate(e),a=a.evaluate(e);var s=o?o.evaluate(e):1,u=Gt(r,i,a,s);if(u)throw new Qt(u);return new zt(r/255*s,i/255*s,a/255*s,s)}function Br(e,t){return e in t}function Ur(e,t){var n=t[e];return void 0===n?null:n}function zr(e){return{type:e}}dn.register(Nr,{error:[{kind:"error"},[bt],function(e,t){var n=d(t,1)[0];throw new Qt(n.evaluate(e))}],typeof:[bt,[St],function(e,t){return Pt(Kt(d(t,1)[0].evaluate(e)))}],"to-rgba":[Ct(_t,4),[xt],function(e,t){return d(t,1)[0].evaluate(e).toArray()}],rgb:[xt,[_t,_t,_t],jr],rgba:[xt,[_t,_t,_t,_t],jr],has:{type:wt,overloads:[[[bt],function(e,t){return Br(d(t,1)[0].evaluate(e),e.properties())}],[[bt,kt],function(e,t){var n=d(t,2),r=n[0],i=n[1];return Br(r.evaluate(e),i.evaluate(e))}]]},get:{type:St,overloads:[[[bt],function(e,t){return Ur(d(t,1)[0].evaluate(e),e.properties())}],[[bt,kt],function(e,t){var n=d(t,2),r=n[0],i=n[1];return Ur(r.evaluate(e),i.evaluate(e))}]]},"feature-state":[St,[bt],function(e,t){return Ur(d(t,1)[0].evaluate(e),e.featureState||{})}],properties:[kt,[],function(e){return e.properties()}],"geometry-type":[bt,[],function(e){return e.geometryType()}],id:[St,[],function(e){return e.id()}],zoom:[_t,[],function(e){return e.globals.zoom}],pitch:[_t,[],function(e){return e.globals.pitch||0}],"distance-from-center":[_t,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[_t,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[_t,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[_t,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[St,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[_t,zr(_t),function(e,t){var n,r=0,i=f(t);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"*":[_t,zr(_t),function(e,t){var n,r=1,i=f(t);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"-":{type:_t,overloads:[[[_t,_t],function(e,t){var n=d(t,2),r=n[0],i=n[1];return r.evaluate(e)-i.evaluate(e)}],[[_t],function(e,t){return-d(t,1)[0].evaluate(e)}]]},"/":[_t,[_t,_t],function(e,t){var n=d(t,2),r=n[0],i=n[1];return r.evaluate(e)/i.evaluate(e)}],"%":[_t,[_t,_t],function(e,t){var n=d(t,2),r=n[0],i=n[1];return r.evaluate(e)%i.evaluate(e)}],ln2:[_t,[],function(){return Math.LN2}],pi:[_t,[],function(){return Math.PI}],e:[_t,[],function(){return Math.E}],"^":[_t,[_t,_t],function(e,t){var n=d(t,2),r=n[0],i=n[1];return Math.pow(r.evaluate(e),i.evaluate(e))}],sqrt:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.sqrt(n.evaluate(e))}],log10:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.log(n.evaluate(e))}],log2:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.sin(n.evaluate(e))}],cos:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.cos(n.evaluate(e))}],tan:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.tan(n.evaluate(e))}],asin:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.asin(n.evaluate(e))}],acos:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.acos(n.evaluate(e))}],atan:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.atan(n.evaluate(e))}],min:[_t,zr(_t),function(e,t){return Math.min.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],max:[_t,zr(_t),function(e,t){return Math.max.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],abs:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.abs(n.evaluate(e))}],round:[_t,[_t],function(e,t){var n=d(t,1)[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.floor(n.evaluate(e))}],ceil:[_t,[_t],function(e,t){var n=d(t,1)[0];return Math.ceil(n.evaluate(e))}],"filter-==":[wt,[bt,St],function(e,t){var n=d(t,2),r=n[0],i=n[1];return e.properties()[r.value]===i.value}],"filter-id-==":[wt,[St],function(e,t){var n=d(t,1)[0];return e.id()===n.value}],"filter-type-==":[wt,[bt],function(e,t){var n=d(t,1)[0];return e.geometryType()===n.value}],"filter-<":[wt,[bt,St],function(e,t){var n=d(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a<o}],"filter-id-<":[wt,[St],function(e,t){var n=d(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[wt,[bt,St],function(e,t){var n=d(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a>o}],"filter-id->":[wt,[St],function(e,t){var n=d(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[wt,[bt,St],function(e,t){var n=d(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[wt,[St],function(e,t){var n=d(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[wt,[bt,St],function(e,t){var n=d(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[wt,[St],function(e,t){var n=d(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[wt,[St],function(e,t){return d(t,1)[0].value in e.properties()}],"filter-has-id":[wt,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[wt,[Ct(bt)],function(e,t){return d(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[wt,[Ct(St)],function(e,t){return d(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[wt,[bt,Ct(St)],function(e,t){var n=d(t,2),r=n[0];return n[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[wt,[bt,Ct(St)],function(e,t){var n=d(t,2),r=n[0],i=n[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:wt,overloads:[[[wt,wt],function(e,t){var n=d(t,2),r=n[0],i=n[1];return r.evaluate(e)&&i.evaluate(e)}],[zr(wt),function(e,t){var n,r=f(t);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(e))return!1}catch(i){r.e(i)}finally{r.f()}return!0}]]},any:{type:wt,overloads:[[[wt,wt],function(e,t){var n=d(t,2),r=n[0],i=n[1];return r.evaluate(e)||i.evaluate(e)}],[zr(wt),function(e,t){var n,r=f(t);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(e))return!0}catch(i){r.e(i)}finally{r.f()}return!1}]]},"!":[wt,[wt],function(e,t){return!d(t,1)[0].evaluate(e)}],"is-supported-script":[wt,[bt],function(e,t){var n=d(t,1)[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[bt,[bt],function(e,t){return d(t,1)[0].evaluate(e).toUpperCase()}],downcase:[bt,[bt],function(e,t){return d(t,1)[0].evaluate(e).toLowerCase()}],concat:[bt,zr(St),function(e,t){return t.map((function(t){return Jt(t.evaluate(e))})).join("")}],"resolved-locale":[bt,[Et],function(e,t){return d(t,1)[0].evaluate(e).resolvedLocale()}]});var Vr=Nr;function Zr(e){return{result:"success",value:e}}function Hr(e){return{result:"error",value:e}}function Wr(e){return"data-driven"===e["property-type"]}function Gr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function qr(e){return!!e.expression&&e.expression.interpolated}function Kr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Jr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Xr(e){return e}function Yr(e,t){var n,r,i,a="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],s=o||!(o||void 0!==e.property),u=e.type||(qr(t)?"exponential":"interval");if(a&&((e=dt({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],zt.parse(e[1])]}))),e.default=zt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!or[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===u)n=ti;else if("interval"===u)n=ei;else if("categorical"===u){n=$r,r=Object.create(null);var l,c=f(e.stops);try{for(c.s();!(l=c.n()).done;){var d=l.value;r[d[0]]=d[1]}}catch(S){c.e(S)}finally{c.f()}i=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'.concat(u,'"'));n=ni}if(o){for(var h={},p=[],v=0;v<e.stops.length;v++){var m=e.stops[v],g=m[0].zoom;void 0===h[g]&&(h[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},p.push(g)),h[g].stops.push([m[0].value,m[1]])}for(var y=[],_=0,b=p;_<b.length;_++){var w=b[_];y.push([h[w].zoom,Yr(h[w],t)])}var x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:lr.interpolationFactor.bind(void 0,x),zoomStops:y.map((function(e){return e[0]})),evaluate:function(n,r){var i=n.zoom;return ti({stops:y,base:e.base},t,i).evaluate(i,r)}}}if(s){var k="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:lr.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var o=a.zoom;return n(e,t,o,r,i)}}}return{kind:"source",evaluate:function(a,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Qr(e.default,t.default):n(e,t,s,r,i)}}}function Qr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function $r(e,t,n,r,i){return Qr(typeof n===i?r[n]:void 0,e.default,t.default)}function ei(e,t,n){if("number"!==Kr(n))return Qr(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=Bn(e.stops.map((function(e){return e[0]})),n);return e.stops[i][1]}function ti(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==Kr(n))return Qr(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var a=Bn(e.stops.map((function(e){return e[0]})),n),o=function(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],u=e.stops[a+1][1],l=Zn[t.type]||Xr;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=or[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.evaluate.apply(void 0,t),i=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return l(r,i,o)}}:l(s,u,o)}function ni(e,t,n){return"color"===t.type?n=zt.parse(n):"formatted"===t.type?n=Ht.fromString(n.toString()):"resolvedImage"===t.type?n=Wt.fromString(n.toString()):Kr(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Qr(n,e.default,t.default)}var ri=function(){function e(t,n){h(this,e),this.expression=t,this._warningHistory={},this._evaluator=new ln,this._defaultValue=n?function(e){return"color"===e.type&&(Jr(e.default)||Array.isArray(e.default))?new zt(0,0,0,0):"color"===e.type?zt.parse(e.default)||null:void 0===e.default?null:e.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,n,r,i,a,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{var u=this.expression.evaluate(this._evaluator);if(null==u||"number"==typeof u&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Qt("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(u)," instead."));return u}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function ii(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Vr}function ai(e,t){var n=new Nn(Vr,[],t?function(e){var t={color:xt,string:bt,number:_t,enum:bt,boolean:wt,formatted:At,resolvedImage:Tt};return"array"===e.type?Ct(t[e.value]||St,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Zr(new ri(r,t)):Hr(n.errors)}var oi=function(){function e(t,n){h(this,e),this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!Ln(n.expression)}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}}]),e}(),si=function(){function e(t,n,r,i){h(this,e),this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==t&&!Ln(n.expression),this.interpolationType=i}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}},{key:"interpolationFactor",value:function(e,t,n){return this.interpolationType?lr.interpolationFactor(this.interpolationType,e,t,n):0}}]),e}();function ui(e,t){if("error"===(e=ai(e,t)).result)return e;var n=e.value.expression,r=Rn(n);if(!r&&!Wr(t))return Hr([new vt("","data expressions not supported")]);var i=Mn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Gr(t))return Hr([new vt("","zoom expressions not supported")]);var a=ci(n);return a||i?a instanceof vt?Hr([a]):a instanceof lr&&!qr(t)?Hr([new vt("",'"interpolate" expressions cannot be used with this property')]):Zr(a?new si(r?"camera":"composite",e.value,a.labels,a instanceof lr?a.interpolation:void 0):new oi(r?"constant":"source",e.value)):Hr([new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var li=function(){function e(t,n){h(this,e),this._parameters=t,this._specification=n,dt(this,Yr(this._parameters,this._specification))}return p(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function ci(e){var t=null;if(e instanceof hr)t=ci(e.result);else if(e instanceof dr){var n,r=f(e.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t=ci(i))break}}catch(a){r.e(a)}finally{r.f()}}else(e instanceof zn||e instanceof lr)&&e.input instanceof dn&&"zoom"===e.input.name&&(t=e);return t instanceof vt||e.eachChild((function(e){var n=ci(e);n instanceof vt?t=n:!t&&n?t=new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new vt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}var di=p((function e(t,n,r,i){h(this,e),this.message=(t?"".concat(t,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)}));function fi(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],u=Kr(n);if("object"!==u)return[new di(t,n,"object expected, ".concat(u," found"))];for(var l in n){var c=l.split(".")[0],d=r[c]||r["*"],f=void 0;i[c]?f=i[c]:r[c]?f=Gi:i["*"]?f=i["*"]:r["*"]&&(f=Gi),f?s=s.concat(f({key:(t?"".concat(t,"."):t)+l,value:n[l],valueSpec:d,style:a,styleSpec:o,object:n,objectKey:l},n)):s.push(new di(t,n[l],'unknown property "'.concat(l,'"')))}for(var h in r)i[h]||r[h].required&&void 0===r[h].default&&void 0===n[h]&&s.push(new di(t,n,'missing required property "'.concat(h,'"')));return s}function hi(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||Gi;if("array"!==Kr(t))return[new di(a,t,"array expected, ".concat(Kr(t)," found"))];if(n.length&&t.length!==n.length)return[new di(a,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new di(a,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Kr(n.value)&&(s=n.value);for(var u=[],l=0;l<t.length;l++)u=u.concat(o({array:t,arrayIndex:l,value:t[l],valueSpec:s,style:r,styleSpec:i,key:"".concat(a,"[").concat(l,"]")}));return u}function pi(e){var t=e.key,n=e.value,r=e.valueSpec,i=Kr(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new di(t,n,"number expected, ".concat(i," found"))];if("minimum"in r){var a=r.minimum;if("array"===Kr(r.minimum)&&(a=r.minimum[e.arrayIndex]),n<a)return[new di(t,n,"".concat(n," is less than the minimum value ").concat(a))]}if("maximum"in r){var o=r.maximum;if("array"===Kr(r.maximum)&&(o=r.maximum[e.arrayIndex]),n>o)return[new di(t,n,"".concat(n," is greater than the maximum value ").concat(o))]}return[]}function vi(e){var t,n,r,i=e.valueSpec,a=ft(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,u=!s,l="array"===Kr(e.value.stops)&&"array"===Kr(e.value.stops[0])&&"object"===Kr(e.value.stops[0][0]),c=fi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new di(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(hi({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Kr(n)&&0===n.length&&t.push(new di(e.key,n,"array must have at least one stop")),t},default:function(e){return Gi({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&c.push(new di(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new di(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!qr(e.valueSpec)&&c.push(new di(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!Wr(e.valueSpec)?c.push(new di(e.key,e.value,"property functions not supported")):s&&!Gr(e.valueSpec)&&c.push(new di(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==e.value.property||c.push(new di(e.key,e.value,'"property" property is required')),c;function d(e){var t=[],a=e.value,s=e.key;if("array"!==Kr(a))return[new di(s,a,"array expected, ".concat(Kr(a)," found"))];if(2!==a.length)return[new di(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(l){if("object"!==Kr(a[0]))return[new di(s,a,"object expected, ".concat(Kr(a[0])," found"))];if(void 0===a[0].zoom)return[new di(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new di(s,a,"object stop key must have value")];var u=ft(a[0].zoom);if("number"!=typeof u)return[new di(s,a[0].zoom,"stop zoom values must be numbers")];if(r&&r>u)return[new di(s,a[0].zoom,"stop zoom values must appear in ascending order")];u!==r&&(r=u,n=void 0,o={}),t=t.concat(fi({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:pi,value:f}}))}else t=t.concat(f({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return ii(ht(a[1]))?t.concat([new di("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(Gi({key:"".concat(s,"[1]"),value:a[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function f(e,r){var s=Kr(e.value),u=ft(e.value),l=null!==e.value?e.value:r;if(t){if(s!==t)return[new di(e.key,l,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof u&&"string"!=typeof u&&"boolean"!=typeof u)return[new di(e.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, ".concat(s," found");return Wr(i)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new di(e.key,l,c)]}return"categorical"!==a||"number"!==s||"number"==typeof u&&isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&"number"==typeof u&&"number"==typeof n&&void 0!==n&&u<n?[new di(e.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===a&&u in o?[new di(e.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new di(e.key,l,"integer expected, found ".concat(String(u)))]}}function mi(e){var t=("property"===e.expressionContext?ui:ai)(ht(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new di("".concat(e.key).concat(t.key),e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new di(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ln(n))return[new di(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return gi(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Mn(n,["zoom","feature-state"]))return[new di(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Rn(n))return[new di(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gi(e,t){var n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression){var r,i=f(t.valueSpec.expression.parameters);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.delete(a)}}catch(s){i.e(s)}finally{i.f()}}if(0===n.size)return[];var o=[];return e instanceof dn&&n.has(e.name)?[new di(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((function(e){o.push.apply(o,c(gi(e,t)))})),o)}function yi(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(ft(n))&&i.push(new di(t,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(ft(n))&&i.push(new di(t,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function _i(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,n=f(e.slice(1));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!_i(r)&&"boolean"!=typeof r)return!1}}catch(i){n.e(i)}finally{n.f()}return!0;default:return!0}}function bi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};_i(e)||(e=Ti(e));var n=e,r=!0;try{r=function(e){if(!ki(e))return e;var t=ht(e);return xi(t),t=wi(t)}(n)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}var i=ct["filter_".concat(t)],a=ai(r,i),o=null;if("error"===a.result)throw new Error(a.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));o=function(e,t,n){return a.value.evaluate(e,t,{},n)};var s=null,u=null;if(r!==n){var l=ai(n,i);if("error"===l.result)throw new Error(l.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));s=function(e,t,n,r,i){return l.value.evaluate(e,t,{},n,void 0,void 0,r,i)},u=!Rn(l.value.expression)}return{filter:o,dynamicFilter:s||void 0,needGeometry:Ai(r),needFeature:!!u}}function wi(e){if(!Array.isArray(e))return e;var t=function(e){if(Si.has(e[0]))for(var t=1;t<e.length;t++)if(ki(e[t]))return!0;return e}(e);return!0===t?t:t.map((function(e){return wi(e)}))}function xi(e){var t=!1,n=[];if("case"===e[0]){for(var r=1;r<e.length-1;r+=2)t=t||ki(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||ki(e[1]);for(var i=2;i<e.length-1;i+=2)n.push(e[i+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||ki(e[1]);for(var a=1;a<e.length-1;a+=2)n.push(e[a+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(n)));for(var o=1;o<e.length;o++)xi(e[o])}function ki(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;for(var t,n=1;n<e.length;n++)if(ki(e[n]))return!0;return!1}var Si=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ei(e,t){return e<t?-1:e>t?1:0}function Ai(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(Ai(e[t]))return!0;return!1}function Ti(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Ci(e[1],e[2],"=="):"!="===n?Ri(Ci(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Ci(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(Ti))):"all"===n?["all"].concat(e.slice(1).map(Ti)):"none"===n?["all"].concat(e.slice(1).map(Ti).map(Ri)):"in"===n?Pi(e[1],e.slice(2)):"!in"===n?Ri(Pi(e[1],e.slice(2))):"has"===n?Ii(e[1]):"!has"===n?Ri(Ii(e[1])):"within"!==n||e}function Ci(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function Pi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Ei)]]:["filter-in-small",e,["literal",t]]}}function Ii(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ri(e){return["!",e]}function Li(e){return _i(ht(e.value))?mi(dt({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(e.layerType||"fill")]})):Mi(e)}function Mi(e){var t=e.value,n=e.key;if("array"!==Kr(t))return[new di(n,t,"array expected, ".concat(Kr(t)," found"))];var r,i=e.styleSpec,a=[];if(t.length<1)return[new di(n,t,"filter array must have at least 1 element")];switch(a=a.concat(yi({key:"".concat(n,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),ft(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===ft(t[1])&&a.push(new di(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new di(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(r=Kr(t[1]))&&a.push(new di("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));for(var o=2;o<t.length;o++)r=Kr(t[o]),"$type"===ft(t[1])?a=a.concat(yi({key:"".concat(n,"[").concat(o,"]"),value:t[o],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new di("".concat(n,"[").concat(o,"]"),t[o],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)a=a.concat(Mi({key:"".concat(n,"[").concat(s,"]"),value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Kr(t[1]),2!==t.length?a.push(new di(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==r&&a.push(new di("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));break;case"within":r=Kr(t[1]),2!==t.length?a.push(new di(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==r&&a.push(new di("".concat(n,"[1]"),t[1],"object expected, ".concat(r," found")))}return a}function Oi(e,t){var n=e.key,r=e.style,i=e.styleSpec,a=e.value,o=e.objectKey,s=i["".concat(t,"_").concat(e.layerType)];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return Gi({key:n,value:a,valueSpec:i.transition,style:r,styleSpec:i});var l,c=e.valueSpec||s[o];if(!c)return[new di(n,a,'unknown property "'.concat(o,'"'))];if("string"===Kr(a)&&Wr(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new di(n,a,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(l[1])," }`."))];var d=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&d.push(new di(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Jr(ht(a))&&"identity"===ft(a.type)&&d.push(new di(n,a,'"text-font" does not support identity functions'))),d.concat(Gi({key:e.key,value:a,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:o}))}function Fi(e){return Oi(e,"paint")}function Di(e){return Oi(e,"layout")}function Ni(e){var t=[],n=e.value,r=e.key,i=e.style,a=e.styleSpec;n.type||n.ref||t.push(new di(r,n,'either "type" or "ref" is required'));var o,s=ft(n.type),u=ft(n.ref);if(n.id)for(var l=ft(n.id),c=0;c<e.arrayIndex;c++){var d=i.layers[c];ft(d.id)===l&&t.push(new di(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(d.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new di(r,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),i.layers.forEach((function(e){ft(e.id)===u&&(o=e)})),o?o.ref?t.push(new di(r,n.ref,"ref cannot reference another ref layer")):s=ft(o.type):"string"==typeof u&&t.push(new di(r,n.ref,'ref layer "'.concat(u,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var f=i.sources&&i.sources[n.source],h=f&&ft(f.type);f?"vector"===h&&"raster"===s?t.push(new di(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===h&&"raster"!==s?t.push(new di(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==h||n["source-layer"]?"raster-dem"===h&&"hillshade"!==s?t.push(new di(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===h&&f.lineMetrics||t.push(new di(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new di(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new di(r,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new di(r,n,'missing required property "source"'));return t=t.concat(fi({key:r,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Gi({key:"".concat(r,".type"),value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:function(e){return Li(dt({layerType:s},e))},layout:function(e){return fi({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Di(dt({layerType:s},e))}}})},paint:function(e){return fi({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Fi(dt({layerType:s},e))}}})}}})),t}function ji(e){var t=e.value,n=e.key,r=Kr(t);return"string"!==r?[new di(n,t,"string expected, ".concat(r," found"))]:[]}var Bi={promoteId:function(e){var t=e.key,n=e.value;if("string"===Kr(n))return ji({key:t,value:n});var r=[];for(var i in n)r.push.apply(r,c(ji({key:"".concat(t,".").concat(i),value:n[i]})));return r}};function Ui(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new di(n,t,'"type" is required')];var a,o=ft(t.type);switch(o){case"vector":case"raster":case"raster-dem":return a=fi({key:n,value:t,valueSpec:r["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:r,objectElementValidators:Bi});case"geojson":if(a=fi({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Bi}),t.cluster)for(var s in t.clusterProperties){var u,l,f=d(t.clusterProperties[s],2),h=f[0],p=f[1],v="string"==typeof h?[h,["accumulated"],["get",s]]:h;(u=a).push.apply(u,c(mi({key:"".concat(n,".").concat(s,".map"),value:p,expressionContext:"cluster-map"}))),(l=a).push.apply(l,c(mi({key:"".concat(n,".").concat(s,".reduce"),value:v,expressionContext:"cluster-reduce"})))}return a;case"video":return fi({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return fi({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new di(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yi({key:"".concat(n,".type"),value:t.type,valueSpec:{values:zi(r)},style:i,styleSpec:r})}}function zi(e){return e.source.reduce((function(t,n){var r=e[n];return"enum"===r.type.type&&(t=t.concat(Object.keys(r.type.values))),t}),[])}function Vi(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,a=[],o=Kr(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new di("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var u=s.match(/^(.*)-transition$/);a=a.concat(u&&r[u[1]]&&r[u[1]].transition?Gi({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Gi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new di(s,t[s],'unknown property "'.concat(s,'"'))])}return a}function Zi(e){var t=e.value,n=e.key,r=e.style,i=e.styleSpec,a=i.terrain,o=[],s=Kr(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new di("terrain",t,"object expected, ".concat(s," found"))]);for(var u in t){var l=u.match(/^(.*)-transition$/);o=o.concat(l&&a[l[1]]&&a[l[1]].transition?Gi({key:u,value:t[u],valueSpec:i.transition,style:r,styleSpec:i}):a[u]?Gi({key:u,value:t[u],valueSpec:a[u],style:r,styleSpec:i}):[new di(u,t[u],'unknown property "'.concat(u,'"'))])}if(t.source){var c=r.sources&&r.sources[t.source],d=c&&ft(c.type);c?"raster-dem"!==d&&o.push(new di(n,t.source,"terrain cannot be used with a source of type ".concat(String(d),', it only be used with a "raster-dem" source type'))):o.push(new di(n,t.source,'source "'.concat(t.source,'" not found')))}else o.push(new di(n,t,'terrain is missing required property "source"'));return o}function Hi(e){var t=e.value,n=e.style,r=e.styleSpec,i=r.fog,a=[],o=Kr(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new di("fog",t,"object expected, ".concat(o," found"))]);for(var s in t){var u=s.match(/^(.*)-transition$/);a=a.concat(u&&i[u[1]]&&i[u[1]].transition?Gi({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?Gi({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new di(s,t[s],'unknown property "'.concat(s,'"'))])}return a}var Wi={"*":function(){return[]},array:hi,boolean:function(e){var t=e.value,n=e.key,r=Kr(t);return"boolean"!==r?[new di(n,t,"boolean expected, ".concat(r," found"))]:[]},number:pi,color:function(e){var t=e.key,n=e.value,r=Kr(n);return"string"!==r?[new di(t,n,"color expected, ".concat(r," found"))]:null===Ot(n)?[new di(t,n,'color expected, "'.concat(n,'" found'))]:[]},enum:yi,filter:Li,function:vi,layer:Ni,object:fi,source:Ui,light:Vi,terrain:Zi,fog:Hi,string:ji,formatted:function(e){return 0===ji(e).length?[]:mi(e)},resolvedImage:function(e){return 0===ji(e).length?[]:mi(e)},projection:function(e){var t=e.value,n=e.styleSpec,r=n.projection,i=e.style,a=[],o=Kr(t);if("object"===o)for(var s in t)a=a.concat(Gi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==o&&(a=a.concat([new di("projection",t,"object or string expected, ".concat(o," found"))]));return a}};function Gi(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Jr(ft(t))?vi(e):n.expression&&ii(ht(t))?mi(e):n.type&&Wi[n.type]?Wi[n.type](e):fi(dt({},e,{valueSpec:n.type?r[n.type]:n}))}function qi(e){var t=e.value,n=e.key,r=ji(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new di(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new di(n,t,'"glyphs" url must include a "{range}" token'))),r}function Ki(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return Yi(Gi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:qi,"*":function(){return[]}}}))}var Ji=function(e){return Yi(Fi(e))},Xi=function(e){return Yi(Di(e))};function Yi(e){return e.slice().sort((function(e,t){return e.line&&t.line?e.line-t.line:0}))}function Qi(e,t){var n=!1;if(t&&t.length){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.fire(new ut(new Error(a.message))),n=!0}}catch(o){i.e(o)}finally{i.f()}}return n}var $i=ea;function ea(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[3+a],s=i[3+a+1];r.push(o===s?null:i.subarray(o,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}ea.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},ea.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ea.prototype._insertCell=function(e,t,n,r,i,a){this.cells[i].push(a)},ea.prototype.query=function(e,t,n,r,i){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},ea.prototype._queryCell=function(e,t,n,r,i,a,o,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,d=0;d<u.length;d++){var f=u[d];if(void 0===o[f]){var h=4*f;(s?s(c[h+0],c[h+1],c[h+2],c[h+3]):e<=c[h+2]&&t<=c[h+3]&&n>=c[h+0]&&r>=c[h+1])?(o[f]=!0,a.push(l[f])):o[f]=!1}}},ea.prototype._forEachCell=function(e,t,n,r,i,a,o,s){for(var u=this._convertToCellCoord(e),l=this._convertToCellCoord(t),c=this._convertToCellCoord(n),d=this._convertToCellCoord(r),f=u;f<=c;f++)for(var h=l;h<=d;h++){var p=this.d*h+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(h),this._convertFromCellCoord(f+1),this._convertFromCellCoord(h+1)))&&i.call(this,e,t,n,r,p,a,o,s))return}},ea.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ea.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ea.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];i[3+o]=a,i.set(s,a),a+=s.length}return i[3+e.length]=a,i.set(this.keys,a),i[3+e.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var ta={};function na(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),ta[t]={klass:e,omit:n.omit||[]}}for(var ra in na(Object,"Object"),$i.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},$i.deserialize=function(e){return new $i(e.buffer)},Object.defineProperty($i,"name",{value:"Grid"}),na($i,"Grid"),na(zt,"Color"),na(Error,"Error"),na(be,"AJAXError"),na(Wt,"ResolvedImage"),na(li,"StylePropertyFunction"),na(ri,"StyleExpression",{omit:["_evaluator"]}),na(si,"ZoomDependentExpression"),na(oi,"ZoomConstantExpression"),na(dn,"CompoundExpression",{omit:["_evaluate"]}),Vr)ta[Vr[ra]._classRegistryKey]||na(Vr[ra],"Expression".concat(ra));function ia(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function aa(e){return y.ImageBitmap&&e instanceof y.ImageBitmap}function oa(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(ia(e)||aa(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof y.ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var r,i=[],a=f(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(oa(o,t))}}catch(d){a.e(d)}finally{a.f()}return i}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class ".concat(u));var l=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)e.hasOwnProperty(c)&&(ta[u].omit.indexOf(c)>=0||(l[c]=oa(e[c],t)));e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof e)}function sa(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ia(e)||aa(e)||ArrayBuffer.isView(e)||e instanceof y.ImageData)return e;if(Array.isArray(e))return e.map(sa);if("object"==typeof e){var t=e.$name||"Object",n=ta[t].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];"$name"!==o&&(r[o]=sa(e[o]))}return r}throw new Error("can't deserialize object of type "+typeof e)}var ua=function(e){return e>=1536&&e<=1791},la=function(e){return e>=1872&&e<=1919},ca=function(e){return e>=2208&&e<=2303},da=function(e){return e>=11904&&e<=12031},fa=function(e){return e>=12032&&e<=12255},ha=function(e){return e>=12272&&e<=12287},pa=function(e){return e>=12288&&e<=12351},va=function(e){return e>=12352&&e<=12447},ma=function(e){return e>=12448&&e<=12543},ga=function(e){return e>=12544&&e<=12591},ya=function(e){return e>=12704&&e<=12735},_a=function(e){return e>=12736&&e<=12783},ba=function(e){return e>=12784&&e<=12799},wa=function(e){return e>=12800&&e<=13055},xa=function(e){return e>=13056&&e<=13311},ka=function(e){return e>=13312&&e<=19903},Sa=function(e){return e>=19968&&e<=40959},Ea=function(e){return e>=40960&&e<=42127},Aa=function(e){return e>=42128&&e<=42191},Ta=function(e){return e>=44032&&e<=55215},Ca=function(e){return e>=63744&&e<=64255},Pa=function(e){return e>=64336&&e<=65023},Ia=function(e){return e>=65040&&e<=65055},Ra=function(e){return e>=65072&&e<=65103},La=function(e){return e>=65104&&e<=65135},Ma=function(e){return e>=65136&&e<=65279},Oa=function(e){return e>=65280&&e<=65519};function Fa(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(ja(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}function Da(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(!Na(t.value.charCodeAt(0)))return!1}catch(r){n.e(r)}finally{n.f()}return!0}function Na(e){return!(ua(e)||la(e)||ca(e)||Pa(e)||Ma(e))}function ja(e){return!(746!==e&&747!==e&&(e<4352||!(ya(e)||ga(e)||Ra(e)&&!(e>=65097&&e<=65103)||Ca(e)||xa(e)||da(e)||_a(e)||!(!pa(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||ka(e)||Sa(e)||wa(e)||function(e){return e>=12592&&e<=12687}(e)||function(e){return e>=43360&&e<=43391}(e)||function(e){return e>=55216&&e<=55295}(e)||function(e){return e>=4352&&e<=4607}(e)||Ta(e)||va(e)||ha(e)||function(e){return e>=12688&&e<=12703}(e)||fa(e)||ba(e)||ma(e)&&12540!==e||!(!Oa(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!La(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||function(e){return e>=5120&&e<=5759}(e)||function(e){return e>=6320&&e<=6399}(e)||Ia(e)||function(e){return e>=19904&&e<=19967}(e)||Ea(e)||Aa(e))))}function Ba(e){return!(ja(e)||function(e){return!!(function(e){return e>=128&&e<=255}(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||function(e){return e>=8192&&e<=8303}(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||function(e){return e>=8448&&e<=8527}(e)||function(e){return e>=8528&&e<=8591}(e)||function(e){return e>=8960&&e<=9215}(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||function(e){return e>=9216&&e<=9279}(e)&&9251!==e||function(e){return e>=9280&&e<=9311}(e)||function(e){return e>=9312&&e<=9471}(e)||function(e){return e>=9632&&e<=9727}(e)||function(e){return e>=9728&&e<=9983}(e)&&!(e>=9754&&e<=9759)||function(e){return e>=11008&&e<=11263}(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||pa(e)||ma(e)||function(e){return e>=57344&&e<=63743}(e)||Ra(e)||La(e)||Oa(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Ua(e){return e>=1424&&e<=2303||Pa(e)||Ma(e)}function za(e,t){return!(!t&&Ua(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||function(e){return e>=6016&&e<=6143}(e))}function Va(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(Ua(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var Za="deferred",Ha="loading",Wa="loaded",Ga=null,qa="unavailable",Ka=null,Ja=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(qa="error"),Ga&&Ga(e)};function Xa(){Ya.fire(new st("pluginStateChange",{pluginStatus:qa,pluginURL:Ka}))}var Ya=new lt,Qa=function(){return qa},$a=function(){if(qa!==Za||!Ka)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qa=Ha,Xa(),Ka&&ke({url:Ka},(function(e){e?Ja(e):(qa=Wa,Xa())}))},eo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return qa===Wa||null!=eo.applyArabicShaping},isLoading:function(){return qa===Ha},setState:function(e){qa=e.pluginStatus,Ka=e.pluginURL},isParsed:function(){return null!=eo.applyArabicShaping&&null!=eo.processBidirectionalText&&null!=eo.processStyledBidirectionalText},getPluginURL:function(){return Ka}},to=function(){function e(t,n){h(this,e),this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}return p(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;)if(!za(n.value.charCodeAt(0),t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(e,eo.isLoaded())}}]),e}(),no=function(){function e(t,n){h(this,e),this.property=t,this.value=n,this.expression=function(e,t){if(Jr(e))return new li(e,t);if(ii(e)){var n=ui(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=zt.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===n?t.specification.default:n,t.specification)}return p(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}]),e}(),ro=function(){function e(t){h(this,e),this.property=t,this.value=new no(t,void 0)}return p(e,[{key:"transitioned",value:function(e,t){return new ao(this.property,this.value,t,Z({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new ao(this.property,this.value,null,{},0)}}]),e}(),io=function(){function e(t){h(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return p(e,[{key:"getValue",value:function(e){return $(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ro(this._values[e].property)),this._values[e].value=new no(this._values[e].property,null===t?void 0:$(t))}},{key:"getTransition",value:function(e){return $(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ro(this._values[e].property)),this._values[e].transition=$(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var a=this.getTransition(r);void 0!==a&&(e["".concat(r,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var n=new oo(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var a=i[r];n._values[a]=this._values[a].transitioned(e,t._values[a])}return n}},{key:"untransitioned",value:function(){for(var e=new oo(this._properties),t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e}}]),e}(),ao=function(){function e(t,n,r,i,a){h(this,e);var o=i.delay||0,s=i.duration||0;a=a||0,this.property=t,this.value=n,this.begin=a+o,this.end=this.begin+s,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return p(e,[{key:"possiblyEvaluate",value:function(e,t,n){var r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return a.possiblyEvaluate(e,t,n);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),i,F(o))}return i}}]),e}(),oo=function(){function e(t){h(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return p(e,[{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new lo(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var n=t[e];if(this._values[n].prior)return!0}return!1}}]),e}(),so=function(){function e(t){h(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return p(e,[{key:"getValue",value:function(e){return $(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new no(this._values[e].property,null===t?void 0:$(t))}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e}},{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new lo(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r}}]),e}(),uo=function(){function e(t,n,r){h(this,e),this.property=t,this.value=n,this.parameters=r}return p(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}]),e}(),lo=function(){function e(t){h(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return p(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),co=function(){function e(t){h(this,e),this.specification=t}return p(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,n){var r=Zn[this.specification.type];return r?r(e,t,n):e}}]),e}(),fo=function(){function e(t,n){h(this,e),this.specification=t,this.overrides=n}return p(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return new uo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}},{key:"interpolate",value:function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new uo(this,{kind:"constant",value:void 0},e.parameters);var r=Zn[this.specification.type];return r?new uo(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}},{key:"evaluate",value:function(e,t,n,r,i,a){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,a)}}]),e}(),ho=function(){function e(t){h(this,e),this.specification=t}return p(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}]),e}(),po=p((function e(t){h(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];var n=new to(0,{});for(var r in t){var i=t[r];i.specification.overridable&&this.overridableProperties.push(r);var a=this.defaultPropertyValues[r]=new no(i,void 0),o=this.defaultTransitionablePropertyValues[r]=new ro(i);this.defaultTransitioningPropertyValues[r]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=a.possiblyEvaluate(n)}}));function vo(e,t){return 256*(e=j(Math.floor(e),0,255))+j(Math.floor(t),0,255)}na(fo,"DataDrivenProperty"),na(co,"DataConstantProperty"),na(ho,"ColorRampProperty");var mo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},go=p((function e(t,n){h(this,e),this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),yo=function(){function e(){h(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return p(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}},{key:"destroy",value:function(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function _o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:e.map((function(e){var i=mo[e.type].BYTES_PER_ELEMENT,a=n=bo(n,Math.max(t,i)),o=e.components||1;return r=Math.max(r,i),n+=i*o,{name:e.name,type:e.type,components:o,offset:a}})),size:bo(n,Math.max(r,t)),alignment:t}}function bo(e,t){return Math.ceil(e/t)*t}var wo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}]),n}(yo);wo.prototype.bytesPerElement=4,na(wo,"StructArrayLayout2i4");var xo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}]),n}(yo);xo.prototype.bytesPerElement=6,na(xo,"StructArrayLayout3i6");var ko=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,e}}]),n}(yo);ko.prototype.bytesPerElement=8,na(ko,"StructArrayLayout4i8");var So=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a,o)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s){var u=6*e,l=12*e,c=3*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=a,this.uint8[l+7]=o,this.float32[c+2]=s,e}}]),n}(yo);So.prototype.bytesPerElement=12,na(So,"StructArrayLayout2i4ub1f12");var Eo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,e}}]),n}(yo);Eo.prototype.bytesPerElement=16,na(Eo,"StructArrayLayout4f16");var Ao=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=6*e,s=3*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,this.float32[s+2]=a,e}}]),n}(yo);Ao.prototype.bytesPerElement=12,na(Ao,"StructArrayLayout4ui1f12");var To=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,e}}]),n}(yo);To.prototype.bytesPerElement=8,na(To,"StructArrayLayout4ui8");var Co=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e}}]),n}(yo);Co.prototype.bytesPerElement=12,na(Co,"StructArrayLayout6i12");var Po=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,l,c,d){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,a,o,s,u,l,c,d)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,l,c,d,f){var h=12*e;return this.int16[h+0]=t,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=u,this.int16[h+8]=l,this.int16[h+9]=c,this.int16[h+10]=d,this.int16[h+11]=f,e}}]),n}(yo);Po.prototype.bytesPerElement=24,na(Po,"StructArrayLayout4i4ui4i24");var Io=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,o){var s=10*e,u=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[u+2]=i,this.float32[u+3]=a,this.float32[u+4]=o,e}}]),n}(yo);Io.prototype.bytesPerElement=20,na(Io,"StructArrayLayout3i3f20");var Ro=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),n}(yo);Ro.prototype.bytesPerElement=4,na(Ro,"StructArrayLayout1ul4");var Lo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,l,c,d,f){var h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,r,i,a,o,s,u,l,c,d,f)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,l,c,d,f,h){var p=20*e,v=10*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=a,this.float32[v+3]=o,this.float32[v+4]=s,this.float32[v+5]=u,this.float32[v+6]=l,this.int16[p+14]=c,this.uint32[v+8]=d,this.uint16[p+18]=f,this.uint16[p+19]=h,e}}]),n}(yo);Lo.prototype.bytesPerElement=40,na(Lo,"StructArrayLayout5i4f1i1ul2ui40");var Mo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a,o)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s){var u=8*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+4]=i,this.int16[u+5]=a,this.int16[u+6]=o,this.int16[u+7]=s,e}}]),n}(yo);Mo.prototype.bytesPerElement=16,na(Mo,"StructArrayLayout3i2i2i16");var Oo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.int16[s+6]=i,this.int16[s+7]=a,e}}]),n}(yo);Oo.prototype.bytesPerElement=16,na(Oo,"StructArrayLayout2f1f2i16");var Fo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=r,this.float32[o+2]=i,e}}]),n}(yo);Fo.prototype.bytesPerElement=12,na(Fo,"StructArrayLayout2ub2f12");var Do=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}]),n}(yo);Do.prototype.bytesPerElement=12,na(Do,"StructArrayLayout3f12");var No=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}]),n}(yo);No.prototype.bytesPerElement=6,na(No,"StructArrayLayout3ui6");var jo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g,y,_,b){var w=this.length;return this.resize(w+1),this.emplace(w,e,t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g,y,_,b)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g,y,_,b,w){var x=30*e,k=15*e,S=60*e;return this.int16[x+0]=t,this.int16[x+1]=n,this.int16[x+2]=r,this.float32[k+2]=i,this.float32[k+3]=a,this.uint16[x+8]=o,this.uint16[x+9]=s,this.uint32[k+5]=u,this.uint32[k+6]=l,this.uint32[k+7]=c,this.uint16[x+16]=d,this.uint16[x+17]=f,this.uint16[x+18]=h,this.float32[k+10]=p,this.float32[k+11]=v,this.uint8[S+48]=m,this.uint8[S+49]=g,this.uint8[S+50]=y,this.uint32[k+13]=_,this.int16[x+28]=b,this.uint8[S+58]=w,e}}]),n}(yo);jo.prototype.bytesPerElement=60,na(jo,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");var Bo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g,y,_,b,w,x,k,S,E,A,T,C,P){var I=this.length;return this.resize(I+1),this.emplace(I,e,t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g,y,_,b,w,x,k,S,E,A,T,C,P)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g,y,_,b,w,x,k,S,E,A,T,C,P,I){var R=38*e,L=19*e;return this.int16[R+0]=t,this.int16[R+1]=n,this.int16[R+2]=r,this.float32[L+2]=i,this.float32[L+3]=a,this.int16[R+8]=o,this.int16[R+9]=s,this.int16[R+10]=u,this.int16[R+11]=l,this.int16[R+12]=c,this.int16[R+13]=d,this.uint16[R+14]=f,this.uint16[R+15]=h,this.uint16[R+16]=p,this.uint16[R+17]=v,this.uint16[R+18]=m,this.uint16[R+19]=g,this.uint16[R+20]=y,this.uint16[R+21]=_,this.uint16[R+22]=b,this.uint16[R+23]=w,this.uint16[R+24]=x,this.uint16[R+25]=k,this.uint16[R+26]=S,this.uint16[R+27]=E,this.uint16[R+28]=A,this.uint32[L+15]=T,this.float32[L+16]=C,this.float32[L+17]=P,this.float32[L+18]=I,e}}]),n}(yo);Bo.prototype.bytesPerElement=76,na(Bo,"StructArrayLayout3i2f6i15ui1ul3f76");var Uo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),n}(yo);Uo.prototype.bytesPerElement=4,na(Uo,"StructArrayLayout1f4");var zo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=5*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,this.float32[o+4]=a,e}}]),n}(yo);zo.prototype.bytesPerElement=20,na(zo,"StructArrayLayout5f20");var Vo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=r,this.uint16[a+4]=i,e}}]),n}(yo);Vo.prototype.bytesPerElement=12,na(Vo,"StructArrayLayout1ul3ui12");var Zo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}]),n}(yo);Zo.prototype.bytesPerElement=4,na(Zo,"StructArrayLayout2ui4");var Ho=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),n}(yo);Ho.prototype.bytesPerElement=2,na(Ho,"StructArrayLayout1ui2");var Wo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}]),n}(yo);Wo.prototype.bytesPerElement=8,na(Wo,"StructArrayLayout2f8");var Go=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"tileAnchorY",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+5]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+6]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+14]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+8]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+19]}}]),n}(go);Go.prototype.size=40;var qo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(e){return new Go(this,e)}}]),n}(Lo);na(qo,"CollisionBoxArray");var Ko=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+5]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+7]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+10]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+11]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+48]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+49]},set:function(e){this._structArray.uint8[this._pos1+49]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+50]},set:function(e){this._structArray.uint8[this._pos1+50]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+13]},set:function(e){this._structArray.uint32[this._pos4+13]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+28]}},{key:"flipState",get:function(){return this._structArray.uint8[this._pos1+58]},set:function(e){this._structArray.uint8[this._pos1+58]=e}}]),n}(go);Ko.prototype.size=60;var Jo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(e){return new Ko(this,e)}}]),n}(jo);na(Jo,"PlacedSymbolArray");var Xo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+8]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+9]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+11]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+12]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+13]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+23]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+24]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+25]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+26]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+27]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+28]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+15]},set:function(e){this._structArray.uint32[this._pos4+15]=e}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+16]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+17]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+18]}}]),n}(go);Xo.prototype.size=76;var Yo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(e){return new Xo(this,e)}}]),n}(Bo);na(Yo,"SymbolInstanceArray");var Qo=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),n}(Uo);na(Qo,"GlyphOffsetArray");var $o=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getx",value:function(e){return this.int16[2*e+0]}},{key:"gety",value:function(e){return this.int16[2*e+1]}}]),n}(wo);na($o,"SymbolLineVertexArray");var es=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),n}(go);es.prototype.size=12;var ts=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(e){return new es(this,e)}}]),n}(Vo);na(ts,"FeatureIndexArray");var ns=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"geta_centroid_pos0",value:function(e){return this.uint16[2*e+0]}},{key:"geta_centroid_pos1",value:function(e){return this.uint16[2*e+1]}}]),n}(Zo);na(ns,"FillExtrusionCentroidArray");var rs=_o([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),is=_o([{name:"a_dash",components:4,type:"Uint16"}]),as={},os={get exports(){return as},set exports(e){as=e}},ss={};({get exports(){return ss},set exports(e){ss=e}}).exports=function(e,t){var n,r,i,a,o,s,u,l;for(r=e.length-(n=3&e.length),i=t,o=3432918353,s=461845907,l=0;l<r;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(a=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var us={};({get exports(){return us},set exports(e){us=e}}).exports=function(e,t){for(var n,r=e.length,i=t^r,a=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var ls=ss,cs=us;os.exports=ls,as.murmur3=ls,as.murmur2=cs;var ds=function(){function e(){h(this,e),this.ids=[],this.positions=[],this.indexed=!1}return p(e,[{key:"add",value:function(e,t,n,r){this.ids.push(fs(e)),this.positions.push(t,n,r)}},{key:"getPositions",value:function(e){for(var t=fs(e),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=t?r=i:n=i+1}for(var a=[];this.ids[n]===t;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}}],[{key:"serialize",value:function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return hs(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(t){var n=new e;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}]),e}();function fs(e){var t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:as(String(e))}function hs(e,t,n,r){for(;n<r;){for(var i=e[n+r>>1],a=n-1,o=r+1;;){do{a++}while(e[a]<i);do{o--}while(e[o]>i);if(a>=o)break;ps(e,a,o),ps(t,3*a,3*o),ps(t,3*a+1,3*o+1),ps(t,3*a+2,3*o+2)}o-n<r-o?(hs(e,t,n,o),n=o+1):(hs(e,t,o+1,r),r=o)}}function ps(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}na(ds,"FeaturePositionMap");var vs=function(){function e(t){h(this,e),this.gl=t.gl,this.initialized=!1}return p(e,[{key:"fetchUniformLocation",value:function(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}]),e}(),ms=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=0,r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}]),n}(vs),gs=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=[0,0,0,0],r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}]),n}(vs),ys=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=zt.transparent,r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}]),n}(vs),_s=new Float32Array(16),bs=new Float32Array(9),ws=new Float32Array(4);function xs(e){return[vo(255*e.r,255*e.g),vo(255*e.b,255*e.a)]}var ks=function(){function e(t,n,r){h(this,e),this.value=t,this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.type=r}return p(e,[{key:"setUniform",value:function(e,t,n,r,i){t.set(e,i,r.constantOr(this.value))}},{key:"getBinding",value:function(e,t){return"color"===this.type?new ys(e):new ms(e)}}]),e}(),Ss=function(){function e(t,n){h(this,e),this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.pattern=null,this.pixelRatio=1}return p(e,[{key:"setConstantPatternPositions",value:function(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}},{key:"setUniform",value:function(e,t,n,r,i){var a="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;a&&t.set(e,i,a)}},{key:"getBinding",value:function(e,t){return"u_pattern"===t||"u_dash"===t?new gs(e):new ms(e)}}]),e}(),Es=function(){function e(t,n,r,i){h(this,e),this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return p(e,[{key:"populatePaintArray",value:function(e,t,n,r,i,a){var o=this.paintVertexArray.length,s=this.expression.evaluate(new to(0),t,{},i,r,a);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}},{key:"updatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,a)}},{key:"_setPaintValue",value:function(e,t,n){if("color"===this.type)for(var r=xs(n),i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),As=function(){function e(t,n,r,i,a,o){h(this,e),this.expression=t,this.uniformNames=n.map((function(e){return"u_".concat(e,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o}return p(e,[{key:"populatePaintArray",value:function(e,t,n,r,i,a){var o=this.expression.evaluate(new to(this.zoom),t,{},i,r,a),s=this.expression.evaluate(new to(this.zoom+1),t,{},i,r,a),u=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(u,e,o,s)}},{key:"updatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),o=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,a,o)}},{key:"_setPaintValue",value:function(e,t,n,r){if("color"===this.type)for(var i=xs(n),a=xs(r),o=e;o<t;o++)this.paintVertexArray.emplace(o,i[0],i[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t,n,r,i){var a=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,o=j(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);t.set(e,i,o)}},{key:"getBinding",value:function(e,t){return new ms(e)}}]),e}(),Ts=function(){function e(t,n,r,i,a){h(this,e),this.expression=t,this.layerId=a,this.paintVertexAttributes=("array"===r?is:rs).members;for(var o=0;o<n.length;++o);this.paintVertexArray=new i}return p(e,[{key:"populatePaintArray",value:function(e,t,n){var r=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(e,t,n,r,i,a){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],a)}},{key:"_setPaintValues",value:function(e,t,n,r){if(r&&n){var i=r[n];if(i)for(var a=i.tl,o=i.br,s=i.pixelRatio,u=e;u<t;u++)this.paintVertexArray.emplace(u,a[0],a[1],o[0],o[1],s)}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),Cs=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};h(this,e),this.binders={},this._buffers=[];var i=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof uo&&Wr(o.property.specification)){var s=Rs(a,t.type),u=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,d="line-dasharray"===a||a.endsWith("pattern"),f="line-dasharray"===a&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==u.kind||f)if("source"===u.kind||f||d){var p=Os(a,l,"source");this.binders[a]=d?new Ts(u,s,l,p,t.id):new Es(u,s,l,p),i.push("/a_".concat(a))}else{var v=Os(a,l,"composite");this.binders[a]=new As(u,s,l,c,n,v),i.push("/z_".concat(a))}else this.binders[a]=d?new Ss(u.value,s):new ks(u.value,s,l),i.push("/u_".concat(a))}}this.cacheKey=i.sort().join("")}return p(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof Es||t instanceof As?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,n,r,i,a){for(var o in this.binders){var s=this.binders[o];(s instanceof Es||s instanceof As||s instanceof Ts)&&s.populatePaintArray(e,t,n,r,i,a)}}},{key:"setConstantPatternPositions",value:function(e){for(var t in this.binders){var n=this.binders[t];n instanceof Ss&&n.setConstantPatternPositions(e)}}},{key:"updatePaintArrays",value:function(e,t,n,r,i,a){var o=!1;for(var s in e){var u,l=t.getPositions(s),c=f(l);try{for(c.s();!(u=c.n()).done;){var d=u.value,h=n.feature(d.index);for(var p in this.binders){var v=this.binders[p];if((v instanceof Es||v instanceof As||v instanceof Ts)&&!0===v.expression.isStateDependent){var m=r.paint.get(p);v.expression=m.value,v.updatePaintArray(d.start,d.end,h,e[s],i,a),o=!0}}}}catch(g){c.e(g)}finally{c.f()}}return o}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof ks||n instanceof Ss)&&e.push.apply(e,c(n.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Es||n instanceof As||n instanceof Ts)for(var r=0;r<n.paintVertexAttributes.length;r++)e.push(n.paintVertexAttributes[r].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof ks||n instanceof Ss||n instanceof As){var r,i=f(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.push(a)}}catch(o){i.e(o)}finally{i.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e){var t=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof ks||r instanceof Ss||r instanceof As){var i,a=f(r.uniformNames);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.push({name:o,property:n,binding:r.getBinding(e,o)})}}catch(s){a.e(s)}finally{a.f()}}}return t}},{key:"setUniforms",value:function(e,t,n,r,i){var a,o=f(n);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s.name,l=s.property,c=s.binding;this.binders[l].setUniform(e,c,i,r.get(l),u)}}catch(d){o.e(d)}finally{o.f()}}},{key:"updatePaintBuffers",value:function(){for(var e in this._buffers=[],this.binders){var t=this.binders[e];(t instanceof Es||t instanceof As||t instanceof Ts)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Es||n instanceof As||n instanceof Ts)&&n.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Es||t instanceof As||t instanceof Ts)&&t.destroy()}}}]),e}(),Ps=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};h(this,e),this.programConfigurations={};var i,a=f(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.programConfigurations[o.id]=new Cs(o,n,r)}}catch(s){a.e(s)}finally{a.f()}this.needsUpload=!1,this._featureMap=new ds,this._bufferOffset=0}return p(e,[{key:"populatePaintArrays",value:function(e,t,n,r,i,a,o){for(var s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,r,i,a,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,n,r,i){var a,o=f(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,r,i)||this.needsUpload}}catch(u){o.e(u)}finally{o.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}(),Is={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Rs(e,t){return Is[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}var Ls={"line-pattern":{source:Ao,composite:Ao},"fill-pattern":{source:Ao,composite:Ao},"fill-extrusion-pattern":{source:Ao,composite:Ao},"line-dasharray":{source:To,composite:To}},Ms={color:{source:Wo,composite:Eo},number:{source:Uo,composite:Wo}};function Os(e,t,n){var r=Ls[e];return r&&r[n]||Ms[t][n]}na(ks,"ConstantBinder"),na(Ss,"PatternConstantBinder"),na(Es,"SourceExpressionBinder"),na(Ts,"PatternCompositeBinder"),na(As,"CompositeExpressionBinder"),na(Cs,"ProgramConfiguration",{omit:["_buffers"]}),na(Ps,"ProgramConfigurationSet");var Fs="-transition",Ds=function(e){v(n,e);var t=m(n);function n(e,r){var i;if(h(this,n),(i=t.call(this)).id=e.id,i.type=e.type,i._featureFilter={filter:function(){return!0},needGeometry:!1,needFeature:!1},i._filterCompiled=!1,"custom"!==e.type&&(i.metadata=e.metadata,i.minzoom=e.minzoom,i.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(i.source=e.source,i.sourceLayer=e["source-layer"],i.filter=e.filter),r.layout&&(i._unevaluatedLayout=new so(r.layout)),r.paint)){for(var a in i._transitionablePaint=new io(r.paint),e.paint)i.setPaintProperty(a,e.paint[a],{validate:!1});for(var o in e.layout)i.setLayoutProperty(o,e.layout[o],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new lo(r.paint)}return u(i)}return p(n,[{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Xi,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return X(e,Fs)?this._transitionablePaint.getTransition(e.slice(0,-Fs.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Ji,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(X(e,Fs))return this._transitionablePaint.setTransition(e.slice(0,-Fs.length),t||void 0),!1;var r=this._transitionablePaint._values[e],i=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var o=this._transitionablePaint._values[e].value,s=o.isDataDriven(),u=X(e,"pattern")||"line-dasharray"===e;return s||i||u||this._handleOverridablePaintPropertyUpdate(e,a,o)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Q(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Qi(this,e.call(Ki,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof uo&&Wr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}},{key:"compileFilter",value:function(){this._filterCompiled||(this._featureFilter=bi(this.filter),this._filterCompiled=!0)}},{key:"invalidateCompiledFilter",value:function(){this._filterCompiled=!1}},{key:"dynamicFilter",value:function(){return this._featureFilter.dynamicFilter}},{key:"dynamicFilterNeedsFeature",value:function(){return this._featureFilter.needFeature}}]),n}(lt),Ns=_o([{name:"a_pos",components:2,type:"Int16"}],4),js=_o([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),Bs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];h(this,e),this.segments=t}return p(e,[{key:"prepareSegment",value:function(t,n,r,i){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&te("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==i)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(a.sortKey=i),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=f(this.segments);try{for(t.s();!(e=t.n()).done;){var n=e.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(i){t.e(i)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,n,r,i){return new e([{vertexOffset:t,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}]),e}();Bs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,na(Bs,"SegmentVector");var Us=8192,zs=function(){function e(t,n){h(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return p(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof ml?new ml(e.lng,e.lat):ml.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof ml?new ml(e.lng,e.lat):ml.convert(e),this}},{key:"extend",value:function(t){var n,r,i=this._sw,a=this._ne;if(t instanceof ml)n=t,r=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(ml.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&t.hasOwnProperty("lon")?this.extend(ml.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return i||a?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),a.lng=Math.max(r.lng,a.lng),a.lat=Math.max(r.lat,a.lat)):(this._sw=new ml(n.lng,n.lat),this._ne=new ml(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new ml((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new ml(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new ml(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=ml.convert(e),n=t.lng,r=t.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),Vs=1e-6,Zs="undefined"!=typeof Float32Array?Float32Array:Array;function Hs(){var e=new Zs(9);return Zs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ws(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=t[8],f=n[0],h=n[1],p=n[2],v=n[3],m=n[4],g=n[5],y=n[6],_=n[7],b=n[8];return e[0]=f*r+h*o+p*l,e[1]=f*i+h*s+p*c,e[2]=f*a+h*u+p*d,e[3]=v*r+m*o+g*l,e[4]=v*i+m*s+g*c,e[5]=v*a+m*u+g*d,e[6]=y*r+_*o+b*l,e[7]=y*i+_*s+b*c,e[8]=y*a+_*u+b*d,e}function Gs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qs(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],d=t[9],f=t[10],h=t[11],p=t[12],v=t[13],m=t[14],g=t[15],y=n*s-r*o,_=n*u-i*o,b=n*l-a*o,w=r*u-i*s,x=r*l-a*s,k=i*l-a*u,S=c*v-d*p,E=c*m-f*p,A=c*g-h*p,T=d*m-f*v,C=d*g-h*v,P=f*g-h*m,I=y*P-_*C+b*T+w*A-x*E+k*S;return I?(e[0]=(s*P-u*C+l*T)*(I=1/I),e[1]=(i*C-r*P-a*T)*I,e[2]=(v*k-m*x+g*w)*I,e[3]=(f*x-d*k-h*w)*I,e[4]=(u*A-o*P-l*E)*I,e[5]=(n*P-i*A+a*E)*I,e[6]=(m*b-p*k-g*_)*I,e[7]=(c*k-f*b+h*_)*I,e[8]=(o*C-s*A+l*S)*I,e[9]=(r*A-n*C-a*S)*I,e[10]=(p*x-v*b+g*y)*I,e[11]=(d*b-c*x-h*y)*I,e[12]=(s*E-o*T-u*S)*I,e[13]=(n*T-r*E+i*S)*I,e[14]=(v*_-p*w-m*y)*I,e[15]=(c*w-d*_+f*y)*I,e):null}function Ks(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=t[8],f=t[9],h=t[10],p=t[11],v=t[12],m=t[13],g=t[14],y=t[15],_=n[0],b=n[1],w=n[2],x=n[3];return e[0]=_*r+b*s+w*d+x*v,e[1]=_*i+b*u+w*f+x*m,e[2]=_*a+b*l+w*h+x*g,e[3]=_*o+b*c+w*p+x*y,e[4]=(_=n[4])*r+(b=n[5])*s+(w=n[6])*d+(x=n[7])*v,e[5]=_*i+b*u+w*f+x*m,e[6]=_*a+b*l+w*h+x*g,e[7]=_*o+b*c+w*p+x*y,e[8]=(_=n[8])*r+(b=n[9])*s+(w=n[10])*d+(x=n[11])*v,e[9]=_*i+b*u+w*f+x*m,e[10]=_*a+b*l+w*h+x*g,e[11]=_*o+b*c+w*p+x*y,e[12]=(_=n[12])*r+(b=n[13])*s+(w=n[14])*d+(x=n[15])*v,e[13]=_*i+b*u+w*f+x*m,e[14]=_*a+b*l+w*h+x*g,e[15]=_*o+b*c+w*p+x*y,e}function Js(e,t,n){var r,i,a,o,s,u,l,c,d,f,h,p,v=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*g+t[12],e[13]=t[1]*v+t[5]*m+t[9]*g+t[13],e[14]=t[2]*v+t[6]*m+t[10]*g+t[14],e[15]=t[3]*v+t[7]*m+t[11]*g+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=t[8],f=t[9],h=t[10],p=t[11],e[0]=r=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=d,e[9]=f,e[10]=h,e[11]=p,e[12]=r*v+s*m+d*g+t[12],e[13]=i*v+u*m+f*g+t[13],e[14]=a*v+l*m+h*g+t[14],e[15]=o*v+c*m+p*g+t[15]),e}function Xs(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ys(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+c*r,e[6]=s*i+d*r,e[7]=u*i+f*r,e[8]=l*i-a*r,e[9]=c*i-o*r,e[10]=d*i-s*r,e[11]=f*i-u*r,e}function Qs(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=o*i-c*r,e[2]=s*i-d*r,e[3]=u*i-f*r,e[8]=a*r+l*i,e[9]=o*r+c*i,e[10]=s*r+d*i,e[11]=u*r+f*i,e}function $s(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function eu(e,t,n){var r,i,a,o=n[0],s=n[1],u=n[2],l=Math.hypot(o,s,u);return l<Vs?null:(o*=l=1/l,s*=l,u*=l,r=Math.sin(t),i=Math.cos(t),e[0]=o*o*(a=1-i)+i,e[1]=s*o*a+u*r,e[2]=u*o*a-s*r,e[3]=0,e[4]=o*s*a-u*r,e[5]=s*s*a+i,e[6]=u*s*a+o*r,e[7]=0,e[8]=o*u*a+s*r,e[9]=s*u*a-o*r,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var tu=Ks;function nu(){var e=new Zs(3);return Zs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ru(e){var t=new Zs(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function iu(e){return Math.hypot(e[0],e[1],e[2])}function au(e,t,n){var r=new Zs(3);return r[0]=e,r[1]=t,r[2]=n,r}function ou(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function su(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function uu(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function lu(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function cu(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function du(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function fu(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function hu(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function pu(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vu(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function mu(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/(o=o||1),e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function gu(e,t,n){var r=n[0],i=n[1],a=n[2],o=t[0],s=t[1],u=t[2],l=i*u-a*s,c=a*o-r*u,d=r*s-i*o,f=i*d-a*c,h=a*l-r*d,p=r*c-i*l,v=2*n[3];return c*=v,d*=v,h*=2,p*=2,e[0]=o+(l*=v)+(f*=2),e[1]=s+c+h,e[2]=u+d+p,e}var yu,_u=su,bu=uu,wu=iu;function xu(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function ku(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o,e}function Su(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function Eu(){var e=new Zs(4);return Zs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Au(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Tu(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-r*s,e}function Cu(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*s,e[1]=i*u+o*s,e[2]=a*u+r*s,e[3]=o*u-i*s,e}nu(),yu=new Zs(4),Zs!=Float32Array&&(yu[0]=0,yu[1]=0,yu[2]=0,yu[3]=0);var Pu=ku;nu(),au(1,0,0),au(0,1,0),Eu(),Eu(),Hs();var Iu=_o([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]).members,Ru=_o([{name:"a_pos_3",components:3,type:"Int16"}]),Lu=_o([{name:"a_pos",type:"Int16",components:2}]),Mu=function(){function e(t,n){h(this,e),this.pos=t,this.dir=n}return p(e,[{key:"intersectsPlane",value:function(e,t,n){var r=pu(t,this.dir);if(Math.abs(r)<1e-6)return!1;var i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}},{key:"closestPointOnSphere",value:function(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=Vs*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=Vs*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=Vs*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;var r=d(this.dir,3),i=r[0],a=r[1],o=r[2],s=this.pos[0]-e[0],u=this.pos[1]-e[1],l=this.pos[2]-e[2],c=i*i+a*a+o*o,f=2*(s*i+u*a+l*o),h=f*f-4*c*(s*s+u*u+l*l-t*t);if(h<0){var p=Math.max(-f/2,0),v=s+i*p,m=u+a*p,g=l+o*p,y=Math.hypot(v,m,g);return n[0]=v*t/y,n[1]=m*t/y,n[2]=g*t/y,!1}var _=(-f-Math.sqrt(h))/(2*c);if(_<0){var b=Math.hypot(s,u,l);return n[0]=s*t/b,n[1]=u*t/b,n[2]=l*t/b,!1}return n[0]=s+i*_,n[1]=u+a*_,n[2]=l+o*_,!0}}]),e}(),Ou=function(){function e(t,n,r,i,a){h(this,e),this.TL=t,this.TR=n,this.BR=r,this.BL=i,this.horizon=a}return p(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r){var i=[-1,1,1],a=[1,1,1],o=[1,-1,1],s=[-1,-1,1];return new e(mu(i,i,t),mu(a,a,t),mu(o,o,t),mu(s,s,t),n/r)}}]),e}(),Fu=function(){function e(t,n){h(this,e),this.points=t,this.planes=n}return p(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r,i){var a=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var r=Su([],e,t),o=1/r[3]/n*a;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(r,r,[o,o,i?1/r[3]:o,o])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=hu([],vu([],_u([],o[e[0]],o[e[1]]),_u([],o[e[2]],o[e[1]]))),n=-pu(t,o[e[1]]);return t.concat(n)}));return new e(o,s)}}]),e}(),Du=function(){function e(t,n){h(this,e),this.min=t,this.max=n,this.center=du([],ou([],this.min,this.max),.5)}return p(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],r=ru(this.min),i=ru(this.max),a=0;a<n.length;a++)r[a]=n[a]?this.min[a]:this.center[a],i[a]=n[a]?this.center[a]:this.max[a];return i[2]=this.max[2],new e(r,i)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"getCorners",value:function(){var e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}},{key:"intersects",value:function(e){for(var t=this.getCorners(),n=!0,r=0;r<e.planes.length;r++){for(var i=e.planes[r],a=0,o=0;o<t.length;o++)a+=pu(i,t[o])+i[3]>=0;if(0===a)return 0;a!==t.length&&(n=!1)}if(n)return 2;for(var s=0;s<3;s++){for(var u=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=0;c<e.points.length;c++){var d=e.points[c][s]-this.min[s];u=Math.min(u,d),l=Math.max(l,d)}if(l<0||u>this.max[s]-this.min[s])return 0}return 1}}],[{key:"fromPoints",value:function(t){var n,r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],a=f(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;lu(r,r,o),cu(i,i,o)}}catch(s){a.e(s)}finally{a.f()}return new e(r,i)}},{key:"applyTransform",value:function(t,n){for(var r=t.getCorners(),i=0;i<r.length;++i)mu(r[i],r[i],n);return e.fromPoints(r)}}]),e}(),Nu=Us/Math.PI/2,ju=64,Bu=[ju,32,16],Uu=-Nu,zu=Nu,Vu=[new Du([Uu,Uu,Uu],[zu,zu,zu]),new Du([Uu,Uu,Uu],[0,0,zu]),new Du([0,Uu,Uu],[zu,0,zu]),new Du([Uu,0,Uu],[0,zu,zu]),new Du([0,0,Uu],[zu,zu,zu])];function Zu(e){return e*Nu/pl}function Hu(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=du([],e._camera.position,e.worldSize),a=[t,n,1,1];Su(a,a,e.pixelMatrixInverse),xu(a,a,1/a[3]);var o=hu([],_u([],a,i)),s=e.globeMatrix,u=[s[12],s[13],s[14]],l=_u([],u,i),c=iu(l),d=hu([],l),f=e.worldSize/(2*Math.PI),h=pu(d,o),p=Math.asin(f/c);if(p<Math.acos(h)){if(!r)return null;var v=[],m=[];du(v,o,c/h),hu(m,_u(m,v,l)),hu(o,ou(o,l,du(o,m,Math.tan(p)*c)))}var g=[];new Mu(i,o).closestPointOnSphere(u,f,g);var y=hu([],le(s,0)),_=hu([],le(s,1)),b=hu([],le(s,2)),w=pu(y,g),x=pu(_,g),k=pu(b,g),S=M(Math.asin(-x/f)),E=M(Math.atan2(w,k));E=e.center.lng+function(e,t){var n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,E);var A=yl(E),T=j(_l(S),0,1);return new Al(A,T)}var Wu=p((function e(t,n,r){h(this,e),this.a=_u([],t,r),this.b=_u([],n,r),this.center=r;var i=hu([],this.a),a=hu([],this.b);this.angle=Math.acos(pu(i,a))}));function Gu(e,t){return 0===e.angle||(n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)))<0||n>1?null:function(e,t,n,r){var i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,j(n,0,1))+e.center[t];var n}function qu(e){if(e.z<=1)return Vu[e.z+2*e.y+e.x];var t=$u(Qu(e));return Du.fromPoints(t)}function Ku(e,t,n){return du(e,e,1-n),fu(e,e,t,n)}function Ju(e,t){var n=ul(t.zoom);if(0===n)return qu(e);var r=Qu(e),i=$u(r),a=yl(r.getWest())*t.worldSize,o=yl(r.getEast())*t.worldSize,s=_l(r.getNorth())*t.worldSize,u=_l(r.getSouth())*t.worldSize,l=[a,s,0],c=[o,s,0],d=[a,u,0],f=[o,u,0],h=qs([],t.globeMatrix);return mu(l,l,h),mu(c,c,h),mu(d,d,h),mu(f,f,h),i[0]=Ku(i[0],d,n),i[1]=Ku(i[1],f,n),i[2]=Ku(i[2],c,n),i[3]=Ku(i[3],l,n),Du.fromPoints(i)}function Xu(e,t,n){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;mu(a,a,t),du(a,a,n)}}catch(o){i.e(o)}finally{i.f()}}function Yu(e,t,n){var r=t/e.worldSize,i=e.globeMatrix;if(n.z<=1){var a=qu(n).getCorners();return Xu(a,i,r),Du.fromPoints(a)}var o=Qu(n),s=$u(o);Xu(s,i,r);var u=Number.MAX_VALUE,l=[-u,-u,-u],c=[u,u,u];if(o.contains(e.center)){var d,h=f(s);try{for(h.s();!(d=h.n()).done;){var p=d.value;lu(c,c,p),cu(l,l,p)}}catch(B){h.e(B)}finally{h.f()}l[2]=0;var v=e.point,m=[v.x*r,v.y*r,0];return lu(c,c,m),cu(l,l,m),new Du(c,l)}var g=[i[12]*r,i[13]*r,i[14]*r],y=o.getCenter(),_=j(e.center.lat,-Sl,Sl),b=j(y.lat,-Sl,Sl),w=yl(e.center.lng),x=_l(_),k=w-yl(y.lng),S=x-_l(b);k>.5?k-=1:k<-.5&&(k+=1);var E=0;Math.abs(k)>Math.abs(S)?E=k>=0?1:3:(E=S>=0?0:2,fu(g,g,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(L(S>=0?o.getSouth():o.getNorth()))*Nu));var A=s[E],T=s[(E+1)%4],C=new Wu(A,T,g),P=[Gu(C,0)||A[0],Gu(C,1)||A[1],Gu(C,2)||A[2]],I=ul(e.zoom);if(I>0){for(var R=function(e,t,n,r,i){var a=e.x,o=e.y,s=1/(1<<e.z),u=a*s,l=u+s,c=o*s,d=c+s,f=0,h=(u+l)/2-r;return h>.5?f=-1:h<-.5&&(f=1),c=(c*t-(i*=t))*n+i,[[u=((u+f)*t-(r*=t))*n+r,d=(d*t-i)*n+i,0],[l=((l+f)*t-r)*n+r,d,0],[l,c,0],[u,c,0]]}(n,t,e._pixelsPerMercatorPixel,w,x),M=0;M<s.length;M++)Ku(s[M],R[M],I);var O=ou([],R[E],R[(E+1)%4]);du(O,O,.5),Ku(P,O,I)}var F,D=f(s);try{for(D.s();!(F=D.n()).done;){var N=F.value;lu(c,c,N),cu(l,l,N)}}catch(B){D.e(B)}finally{D.f()}return c[2]=Math.min(A[2],T[2]),lu(c,c,P),cu(l,l,P),new Du(c,l)}function Qu(e){var t=e.x,n=e.y,r=1/(1<<e.z),i=new ml(wl(t*r),xl((n+1)*r)),a=new ml(wl((t+1)*r),xl(n*r));return new zs(i,a)}function $u(e){var t=L(e.getNorth()),n=L(e.getSouth()),r=Math.cos(t),i=Math.cos(n),a=Math.sin(t),o=Math.sin(n),s=e.getWest(),u=e.getEast();return[el(i,o,s),el(i,o,u),el(r,a,u),el(r,a,s)]}function el(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nu;return n=L(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function tl(e,t,n){return el(Math.cos(L(e)),Math.sin(L(e)),t,n)}function nl(e,t,n,r){var i=1<<n.z,a=(e/Us+n.x)/i;return tl(xl((t/Us+n.y)/i),wl(a),r)}function rl(e){var t=e.min,n=e.max;return 16383/Math.max(n[0]-t[0],n[1]-t[1],n[2]-t[2])}var il=new Float64Array(16);function al(e){var t,n,r=rl(e),i=$s(il,[r,r,r]);return Js(i,i,((t=[])[0]=-(n=e.min)[0],t[1]=-n[1],t[2]=-n[2],t))}function ol(e){var t,n,r=(n=e.min,(t=il)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t),i=1/rl(e);return Xs(r,r,[i,i,i])}function sl(e,t,n,r,i){var a=function(e){var t=Us/(2*Math.PI);return e/(2*Math.PI)/t}(n),o=[e,t,-n/(2*Math.PI)],s=Gs(new Float64Array(16));return Js(s,s,o),Xs(s,s,[a,a,a]),Ys(s,s,L(-i)),Qs(s,s,L(-r)),s}function ul(e){return B(5,6,e)}function ll(e,t){var n,r,i,a,o,s,u,l,c,d,f=tl(t.lat,t.lng),h=function(e){var t=tl(e._center.lat,e._center.lng),n=vu([],au(0,1,0),t),r=eu([],-e.angle,t);n=mu(n,n,r),eu(r,-e._pitch,n);var i=hu([],t);return du(i,i,Zu(e.cameraToCenterDistance/e.pixelsPerMeter)),mu(i,i,r),ou([],t,i)}(e);return i=(n=su([],h,f))[0],a=n[1],o=n[2],s=(r=f)[0],u=r[1],l=r[2],d=(c=Math.sqrt(i*i+a*a+o*o)*Math.sqrt(s*s+u*u+l*l))&&pu(n,r)/c,Math.acos(Math.min(Math.max(d,-1),1))}function cl(e,t){return ll(e,t)>Math.PI/2*1.01}var dl=L(85),fl=Math.cos(dl),hl=Math.sin(dl),pl=6371008.8,vl=2*Math.PI*pl,ml=function(){function e(t,n){if(h(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return p(e,[{key:"wrap",value:function(){return new e(U(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return pl*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new zs(new e(this.lng-n,this.lat-t),new e(this.lng+n,this.lat+t))}},{key:"toEcef",value:function(e){var t=Zu(e);return tl(this.lat,this.lng,Nu+t)}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}();function gl(e){return vl*Math.cos(e*Math.PI/180)}function yl(e){return(180+e)/360}function _l(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function bl(e,t){return e/gl(t)}function wl(e){return 360*e-180}function xl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function kl(e,t){return e*gl(xl(t))}var Sl=85.051129;function El(e){return 1/Math.cos(e*Math.PI/180)}var Al=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;h(this,e),this.x=+t,this.y=+n,this.z=+r}return p(e,[{key:"toLngLat",value:function(){return new ml(wl(this.x),xl(this.y))}},{key:"toAltitude",value:function(){return kl(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/vl*El(xl(this.y))}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=ml.convert(t);return new e(yl(r.lng),_l(r.lat),bl(n,r.lat))}}]),e}();function Tl(e,t,n,r,i,a,o,s,u){var l=(t+r)/2,c=(n+i)/2,d=new C(l,c);s(d),function(e,t,n,r,i,a){var o=n-i,s=r-a;return Math.abs((r-t)*o-(n-e)*s)/Math.hypot(o,s)}(d.x,d.y,a.x,a.y,o.x,o.y)>=u?(Tl(e,t,n,l,c,a,d,s,u),Tl(e,l,c,r,i,d,o,s,u)):e.push(o)}function Cl(e,t,n){var r=e[0],i=r.x,a=r.y;t(r);for(var o=[r],s=1;s<e.length;s++){var u=e[s],l=u.x,c=u.y;t(u),Tl(o,i,a,l,c,r,u,t,n),i=l,a=c,r=u}return o}function Pl(e,t,n,r){if(r(t,n)){var i=t.add(n)._mult(.5);Pl(e,t,i,r),Pl(e,i,n,r)}else e.push(n)}function Il(e,t){for(var n=e[0],r=[n],i=1;i<e.length;i++){var a=e[i];Pl(r,n,a,t),n=a}return r}var Rl=Math.pow(2,14)-1,Ll=-Rl-1;function Ml(e,t){var n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=j(n,Ll,Rl),e.y=j(r,Ll,Rl),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&te("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function Ol(e,t,n){var r=e.loadGeometry(),i=e.extent,a=Us/i;if(t&&n&&n.projection.isReprojectedInTileSpace)for(var o=1<<t.z,s=n.scale,u=n.x,l=n.y,c=n.projection,d=function(e){var n=wl((t.x+e.x/i)/o),r=xl((t.y+e.y/i)/o),a=c.project(n,r);e.x=(a.x*s-u)*i,e.y=(a.y*s-l)*i},h=0;h<r.length;h++)if(1!==e.type)r[h]=Cl(r[h],d,1);else{var p,v=[],m=f(r[h]);try{for(m.s();!(p=m.n()).done;){var g=p.value;g.x<0||g.x>=i||g.y<0||g.y>=i||(d(g),v.push(g))}}catch(k){m.e(k)}finally{m.f()}r[h]=v}var y,_=f(r);try{for(_.s();!(y=_.n()).done;){var b,w=y.value,x=f(w);try{for(x.s();!(b=x.n()).done;)Ml(b.value,a)}catch(k){x.e(k)}finally{x.f()}}}catch(k){_.e(k)}finally{_.f()}return r}function Fl(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Ol(e):[]}}function Dl(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function Nl(e,t,n){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}var jl=function(){function e(t){h(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new wo,this.indexArray=new No,this.segments=new Bs,this.programConfigurations=new Ps(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return p(e,[{key:"populate",value:function(e,t,n,r){var i=this.layers[0],a=[],o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));var s,u=f(e);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=l.feature,d=l.id,h=l.index,p=l.sourceLayerIndex,v=this.layers[0]._featureFilter.needGeometry,m=Fl(c,v);if(this.layers[0]._featureFilter.filter(new to(this.zoom),m,n)){var g=o?o.evaluate(m,{},n):void 0,y={id:d,properties:c.properties,type:c.type,sourceLayerIndex:p,index:h,geometry:v?m.geometry:Ol(c,n,r),patterns:{},sortKey:g};a.push(y)}}}catch(T){u.e(T)}finally{u.f()}o&&a.sort((function(e,t){return e.sortKey-t.sortKey}));var _=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new Co,_=r.projection);for(var b=0,w=a;b<w.length;b++){var x=w[b],k=x.geometry,S=x.index,E=x.sourceLayerIndex,A=e[S].feature;this.addFeature(x,k,S,t.availableImages,n,_),t.featureIndex.insert(A,k,S,E,this.index)}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ns.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,js.members))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}},{key:"addFeature",value:function(e,t,n,r,i,a){var o,s=f(t);try{for(s.s();!(o=s.n()).done;){var u,l=o.value,c=f(l);try{for(c.s();!(u=c.n()).done;){var d=u.value,h=d.x,p=d.y;if(!(h<0||h>=Us||p<0||p>=Us)){if(a){var v=a.projectTilePoint(h,p,i),m=a.upVector(i,h,p),g=this.globeExtVertexArray;Nl(g,v,m),Nl(g,v,m),Nl(g,v,m),Nl(g,v,m)}var y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),_=y.vertexLength;Dl(this.layoutVertexArray,h,p,-1,-1),Dl(this.layoutVertexArray,h,p,1,-1),Dl(this.layoutVertexArray,h,p,1,1),Dl(this.layoutVertexArray,h,p,-1,1),this.indexArray.emplaceBack(_,_+1,_+2),this.indexArray.emplaceBack(_,_+2,_+3),y.vertexLength+=4,y.primitiveLength+=2}}}catch(b){c.e(b)}finally{c.f()}}}catch(b){s.e(b)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}]),e}();function Bl(e,t){for(var n=0;n<e.length;n++)if(Kl(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(Kl(e,t[r]))return!0;return!!Zl(e,t)}function Ul(e,t,n){return!!Kl(e,t)||!!Wl(t,e,n)}function zl(e,t){if(1===e.length)return ql(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(Kl(e,r[i]))return!0;for(var a=0;a<e.length;a++)if(ql(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(Zl(e,t[o]))return!0;return!1}function Vl(e,t,n){if(e.length>1){if(Zl(e,t))return!0;for(var r=0;r<t.length;r++)if(Wl(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(Wl(e[i],t,n))return!0;return!1}function Zl(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],a=0;a<t.length-1;a++)if(Hl(r,i,t[a],t[a+1]))return!0;return!1}function Hl(e,t,n,r){return ne(e,n,r)!==ne(t,n,r)&&ne(e,t,n)!==ne(e,t,r)}function Wl(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(Gl(e,t[i-1],t[i])<r)return!0;return!1}function Gl(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function ql(e,t){for(var n,r,i,a=!1,o=0;o<e.length;o++)for(var s=0,u=(n=e[o]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(a=!a);return a}function Kl(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var a=e[r],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function Jl(e,t,n,r,i){var a,o=f(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}}catch(h){o.e(h)}finally{o.f()}var u=[new C(t,n),new C(t,i),new C(r,i),new C(r,n)];if(e.length>2){var l,c=f(u);try{for(c.s();!(l=c.n()).done;)if(Kl(e,l.value))return!0}catch(h){c.e(h)}finally{c.f()}}for(var d=0;d<e.length-1;d++)if(Xl(e[d],e[d+1],u))return!0;return!1}function Xl(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var a=ne(e,t,n[0]);return a!==ne(e,t,n[1])||a!==ne(e,t,n[2])||a!==ne(e,t,n[3])}function Yl(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Ql(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function $l(e,t,n,r,i){if(!t[0]&&!t[1])return e;var a=C.convert(t)._mult(i);"viewport"===n&&a._rotate(-r);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function ec(e,t,n,r){var i=C.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}na(jl,"CircleBucket",{omit:["layers"]});var tc=new po({"circle-sort-key":new fo(ct.layout_circle["circle-sort-key"])}),nc={paint:new po({"circle-radius":new fo(ct.paint_circle["circle-radius"]),"circle-color":new fo(ct.paint_circle["circle-color"]),"circle-blur":new fo(ct.paint_circle["circle-blur"]),"circle-opacity":new fo(ct.paint_circle["circle-opacity"]),"circle-translate":new co(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new co(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new co(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new co(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new fo(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fo(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fo(ct.paint_circle["circle-stroke-opacity"])}),layout:tc};function rc(e,t,n,r,i,a,o,s,u){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(u*=e.pixelToTileUnitsFactor);var l,c=e.tileID.canonical,d=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile,h=f(t);try{for(h.s();!(l=h.n()).done;){var p,v=l.value,m=f(v);try{var g=function(){var t=p.value,l=t.add(s),f=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(l.x,l.y,!0):0,h=n.projection.projectTilePoint(l.x,l.y,c);if(f>0){var v=n.projection.upVector(c,l.x,l.y);h.x+=v[0]*d*f,h.y+=v[1]*d*f,h.z+=v[2]*d*f}var m=a?l:ic(h.x,h.y,h.z,r),g=a?e.tilespaceRays.map((function(e){return sc(e,f)})):e.queryGeometry.screenGeometry,y=Su([],[h.x,h.y,h.z,1],r);if(!o&&a?u*=y[3]/n.cameraToCenterDistance:o&&!a&&(u*=n.cameraToCenterDistance/y[3]),a){var _=xl((t.y/Us+c.y)/(1<<c.z));u/=n.projection.pixelsPerMeter(_,1)/bl(1,_)}if(Ul(g,m,u))return{v:!0}};for(m.s();!(p=m.n()).done;){var y=g();if("object"===typeof y)return y.v}}catch(_){m.e(_)}finally{m.f()}}}catch(_){h.e(_)}finally{h.f()}return!1}function ic(e,t,n,r){var i=Su([],[e,t,n,1],r);return new C(i[0]/i[3],i[1]/i[3])}var ac=au(0,0,0),oc=au(0,0,1);function sc(e,t){var n=nu();return ac[2]=t,e.intersectsPlane(ac,oc,n),new C(n[0],n[1])}var uc=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n)}(jl);function lc(e,t,n,r){var i=t.width,a=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*a*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*a*n);return e.width=i,e.height=a,e.data=r,e}function cc(e,t,n){var r=t.width,i=t.height;r===e.width&&i===e.height||(dc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function dc(e,t,n,r,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*a,c=((r.y+u)*t.width+r.x)*a,d=0;d<i.width*a;d++)s[c+d]=o[l+d];return t}na(uc,"HeatmapBucket",{omit:["layers"]});var fc=function(){function e(t,n){h(this,e),lc(this,t,1,n)}return p(e,[{key:"resize",value:function(t){cc(this,new e(t),1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){dc(e,t,n,r,i,1)}}]),e}(),hc=function(){function e(t,n){h(this,e),lc(this,t,4,n)}return p(e,[{key:"resize",value:function(t){cc(this,new e(t),4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){dc(e,t,n,r,i,4)}}]),e}();na(fc,"AlphaImage"),na(hc,"RGBAImage");var pc={paint:new po({"heatmap-radius":new fo(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fo(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new co(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ho(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new co(ct.paint_heatmap["heatmap-opacity"])})};function vc(e){var t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new hc({width:n,height:r}),a=function(n,r,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*o.r/o.a),i.data[n+r+1]=Math.floor(255*o.g/o.a),i.data[n+r+2]=Math.floor(255*o.b/o.a),i.data[n+r+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<r;++o,s+=4*n)for(var u=0,l=0;u<n;u++,l+=4){var c=u/(n-1),d=e.clips[o];a(s,l,d.start*(1-c)+d.end*c)}else for(var f=0,h=0;f<n;f++,h+=4)a(0,h,f/(n-1));return i}var mc={paint:new po({"hillshade-illumination-direction":new co(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new co(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new co(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new co(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new co(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new co(ct.paint_hillshade["hillshade-accent-color"])})},gc=_o([{name:"a_pos",components:2,type:"Int16"}],4).members,yc={};function _c(e,t,n){n=n||2;var r,i,a,o,s,u,l,c=t&&t.length,d=c?t[0]*n:e.length,f=bc(e,0,d,n,!0),h=[];if(!f||f.next===f.prev)return h;if(c&&(f=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=bc(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Rc(o));for(s.sort(Tc),i=0;i<s.length;i++)n=Cc(s[i],n);return n}(e,t,f,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var p=n;p<d;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-r,o-i))?32767/l:0}return xc(f,h,n,r,i,l,0),h}function bc(e,t,n,r,i){var a,o;if(i===Hc(e,t,n,r)>0)for(a=t;a<n;a+=r)o=zc(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=zc(a,e[a],e[a+1],o);return o&&Fc(o,o.next)&&(Vc(o),o=o.next),o}function wc(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Fc(r,r.next)&&0!==Oc(r.prev,r,r.next))r=r.next;else{if(Vc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function xc(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=Ic(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Sc(e,r,i,a):kc(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),Vc(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?xc(e=Ec(wc(e),t,n),t,n,r,i,a,2):2===o&&Ac(e,t,n,r,i,a):xc(wc(e),t,n,r,i,a,1);break}}}function kc(e){var t=e.prev,n=e,r=e.next;if(Oc(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,u=n.y,l=r.y,c=i<a?i<o?i:o:a<o?a:o,d=s<u?s<l?s:l:u<l?u:l,f=i>a?i>o?i:o:a>o?a:o,h=s>u?s>l?s:l:u>l?u:l,p=r.next;p!==t;){if(p.x>=c&&p.x<=f&&p.y>=d&&p.y<=h&&Lc(i,s,a,u,o,l,p.x,p.y)&&Oc(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Sc(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Oc(i,a,o)>=0)return!1;for(var s=i.x,u=a.x,l=o.x,c=i.y,d=a.y,f=o.y,h=s<u?s<l?s:l:u<l?u:l,p=c<d?c<f?c:f:d<f?d:f,v=s>u?s>l?s:l:u>l?u:l,m=c>d?c>f?c:f:d>f?d:f,g=Ic(h,p,t,n,r),y=Ic(v,m,t,n,r),_=e.prevZ,b=e.nextZ;_&&_.z>=g&&b&&b.z<=y;){if(_.x>=h&&_.x<=v&&_.y>=p&&_.y<=m&&_!==i&&_!==o&&Lc(s,c,u,d,l,f,_.x,_.y)&&Oc(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=h&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==o&&Lc(s,c,u,d,l,f,b.x,b.y)&&Oc(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=g;){if(_.x>=h&&_.x<=v&&_.y>=p&&_.y<=m&&_!==i&&_!==o&&Lc(s,c,u,d,l,f,_.x,_.y)&&Oc(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=y;){if(b.x>=h&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==o&&Lc(s,c,u,d,l,f,b.x,b.y)&&Oc(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Ec(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Fc(i,a)&&Dc(i,r,r.next,a)&&Bc(i,a)&&Bc(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),Vc(r),Vc(r.next),r=e=a),r=r.next}while(r!==e);return wc(r)}function Ac(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Mc(o,s)){var u=Uc(o,s);return o=wc(o,o.next),u=wc(u,u.next),xc(o,t,n,r,i,a,0),void xc(u,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function Tc(e,t){return e.x-t.x}function Cc(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var u,l=n,c=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Lc(a<d?i:o,a,c,d,a<d?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),Bc(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&Pc(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;var r=Uc(n,e);return wc(r,r.next),wc(n,n.next)}function Pc(e,t){return Oc(e.prev,e,t.prev)<0&&Oc(t.next,e,e.next)<0}function Ic(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Rc(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Lc(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Mc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Dc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Bc(e,t)&&Bc(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Oc(e.prev,e,t.prev)||Oc(e,t.prev,t))||Fc(e,t)&&Oc(e.prev,e,e.next)>0&&Oc(t.prev,t,t.next)>0)}function Oc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Fc(e,t){return e.x===t.x&&e.y===t.y}function Dc(e,t,n,r){var i=jc(Oc(e,t,n)),a=jc(Oc(e,t,r)),o=jc(Oc(n,r,e)),s=jc(Oc(n,r,t));return i!==a&&o!==s||!(0!==i||!Nc(e,n,t))||!(0!==a||!Nc(e,r,t))||!(0!==o||!Nc(n,e,r))||!(0!==s||!Nc(n,t,r))}function Nc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function jc(e){return e>0?1:e<0?-1:0}function Bc(e,t){return Oc(e.prev,e,e.next)<0?Oc(e,t,e.next)>=0&&Oc(e,e.prev,t)>=0:Oc(e,t,e.prev)<0||Oc(e,e.next,t)<0}function Uc(e,t){var n=new Zc(e.i,e.x,e.y),r=new Zc(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function zc(e,t,n,r){var i=new Zc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Vc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Zc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hc(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function Wc(e,t,n,r,i){Gc(e,t,n||0,r||e.length-1,i||Kc)}function Gc(e,t,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1);Gc(e,t,Math.max(n,Math.floor(t-o*u/a+l)),Math.min(r,Math.floor(t+(a-o)*u/a+l)),i)}var c=e[t],d=n,f=r;for(qc(e,n,t),i(e[r],c)>0&&qc(e,n,r);d<f;){for(qc(e,d,f),d++,f--;i(e[d],c)<0;)d++;for(;i(e[f],c)>0;)f--}0===i(e[n],c)?qc(e,n,f):qc(e,++f,r),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function qc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Kc(e,t){return e<t?-1:e>t?1:0}function Jc(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,a=[],o=0;o<n;o++){var s=re(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&a.push(r),r=[e[o]]):r.push(e[o]))}if(r&&a.push(r),t>1)for(var u=0;u<a.length;u++)a[u].length<=t||(Wc(a[u],t,1,a[u].length-1,Xc),a[u]=a[u].slice(0,t));return a}function Xc(e,t){return t.area-e.area}function Yc(e,t,n){var r,i=n.patternDependencies,a=!1,o=f(t);try{for(o.s();!(r=o.n()).done;){var s=r.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(a=!0);var u=s.constantOr(null);u&&(a=!0,i[u]=!0)}}catch(l){o.e(l)}finally{o.f()}return a}function Qc(e,t,n,r,i){var a,o=i.patternDependencies,s=f(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u.paint.get("".concat(e,"-pattern")).value;if("constant"!==l.kind){var c=l.evaluate({zoom:r},n,{},i.availableImages);o[c=c&&c.name?c.name:c]=!0,n.patterns[u.id]=c}}}catch(d){s.e(d)}finally{s.f()}return n}({get exports(){return yc},set exports(e){yc=e}}).exports=_c,yc.default=_c,_c.deviation=function(e,t,n,r){var i=t&&t.length,a=Math.abs(Hc(e,0,i?t[0]*n:e.length,n));if(i)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(Hc(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var u=0;for(o=0;o<r.length;o+=3){var l=r[o]*n,c=r[o+1]*n,d=r[o+2]*n;u+=Math.abs((e[l]-e[d])*(e[c+1]-e[l+1])-(e[l]-e[c])*(e[d+1]-e[l+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},_c.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&n.holes.push(r+=e[i-1].length)}return n};var $c=function(){function e(t){h(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wo,this.indexArray=new No,this.indexArray2=new Zo,this.programConfigurations=new Ps(t.layers,t.zoom),this.segments=new Bs,this.segments2=new Bs,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.projection=t.projection}return p(e,[{key:"populate",value:function(e,t,n,r){this.hasPattern=Yc("fill",this.layers,t);var i,a=this.layers[0].layout.get("fill-sort-key"),o=[],s=f(e);try{for(s.s();!(i=s.n()).done;){var u=i.value,l=u.feature,c=u.id,d=u.index,h=u.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,v=Fl(l,p);if(this.layers[0]._featureFilter.filter(new to(this.zoom),v,n)){var m=a?a.evaluate(v,{},n,t.availableImages):void 0,g={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:d,geometry:p?v.geometry:Ol(l,n,r),patterns:{},sortKey:m};o.push(g)}}}catch(E){s.e(E)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,_=o;y<_.length;y++){var b=_[y],w=b.geometry,x=b.index,k=b.sourceLayerIndex;if(this.hasPattern){var S=Qc("fill",this.layers,b,this.zoom,t);this.patternFeatures.push(S)}else this.addFeature(b,w,x,n,{},t.availableImages);t.featureIndex.insert(e[x].feature,w,x,k,this.index)}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=f(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,n,r)}}catch(u){o.e(u)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,n,r,i){var a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=f(Jc(t,500));try{for(s.s();!(a=s.n()).done;){var u,l=a.value,c=0,d=f(l);try{for(d.s();!(u=d.n()).done;)c+=u.value.length}catch(E){d.e(E)}finally{d.f()}var h,p=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),v=p.vertexLength,m=[],g=[],y=f(l);try{for(y.s();!(h=y.n()).done;){var _=h.value;if(0!==_.length){_!==l[0]&&g.push(m.length/2);var b=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),w=b.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(w+_.length-1,w),m.push(_[0].x),m.push(_[0].y);for(var x=1;x<_.length;x++)this.layoutVertexArray.emplaceBack(_[x].x,_[x].y),this.indexArray2.emplaceBack(w+x-1,w+x),m.push(_[x].x),m.push(_[x].y);b.vertexLength+=_.length,b.primitiveLength+=_.length}}}catch(E){y.e(E)}finally{y.f()}for(var k=yc(m,g),S=0;S<k.length;S+=3)this.indexArray.emplaceBack(v+k[S],v+k[S+1],v+k[S+2]);p.vertexLength+=c,p.primitiveLength+=k.length/3}}catch(E){s.e(E)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}]),e}();na($c,"FillBucket",{omit:["layers","patternFeatures"]});var ed=new po({"fill-sort-key":new fo(ct.layout_fill["fill-sort-key"])}),td={paint:new po({"fill-antialias":new co(ct.paint_fill["fill-antialias"]),"fill-opacity":new fo(ct.paint_fill["fill-opacity"]),"fill-color":new fo(ct.paint_fill["fill-color"]),"fill-outline-color":new fo(ct.paint_fill["fill-outline-color"]),"fill-translate":new co(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new co(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new fo(ct.paint_fill["fill-pattern"])}),layout:ed},nd=_o([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),rd=_o([{name:"a_centroid_pos",components:2,type:"Uint16"}]),id=_o([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),ad=nd.members,od={},sd=C,ud=ld;function ld(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(cd,this,t)}function cd(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function dd(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)r+=((n=e[o]).x-(t=e[i]).x)*(t.y+n.y);return r}ld.types=["Unknown","Point","LineString","Polygon"],ld.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,a=0,o=0,s=[];e.pos<n;){if(i<=0){var u=e.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)a+=e.readSVarint(),o+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new sd(a,o));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},ld.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,u,s,l]},ld.prototype.toGeoJSON=function(e,t,n){var r,i,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,u=this.loadGeometry(),l=ld.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(r=0;r<u.length;r++)d[r]=u[r][0];c(u=d);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],a=0;a<t;a++){var o=dd(e[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var f={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var fd=ud,hd=pd;function pd(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(vd,this,t),this.length=this._features.length}function vd(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}pd.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new fd(this._pbf,t,this.extent,this._keys,this._values)};var md=hd;function gd(e,t,n){if(3===e){var r=new md(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var yd=od.VectorTile=function(e,t){this.layers=e.readFields(gd,{},t)},_d=od.VectorTileFeature=ud;function bd(e,t,n,r){var i,a=[],o=0===r?function(e,t,n,r,i,a){e.push(new C(a,n+(a-t)/(r-t)*(i-n)))}:function(e,t,n,r,i,a){e.push(new C(t+(a-n)/(i-n)*(r-t),a))},s=f(e);try{for(s.s();!(i=s.n()).done;){var u,l=i.value,c=[],d=f(l);try{for(d.s();!(u=d.n()).done;){var h=u.value;if(!(h.length<=2)){for(var p=[],v=0;v<h.length-1;v++){var m=h[v].x,g=h[v].y,y=h[v+1].x,_=h[v+1].y,b=0===r?m:g,w=0===r?y:_;b<t?w>t&&o(p,m,g,y,_,t):b>n?w<n&&o(p,m,g,y,_,n):p.push(h[v]),w<t&&b>=t&&o(p,m,g,y,_,t),w>n&&b<=n&&o(p,m,g,y,_,n)}var x=h[h.length-1],k=0===r?x.x:x.y;k>=t&&k<=n&&p.push(x),p.length&&(x=p[p.length-1],p[0].x===x.x&&p[0].y===x.y||p.push(p[0]),c.push(p))}}}catch(S){d.e(S)}finally{d.f()}c.length&&a.push(c)}}catch(S){s.e(S)}finally{s.f()}return a}od.VectorTileLayer=hd;var wd=_d.types,xd=Math.pow(2,13);function kd(e,t,n,r,i,a,o,s){e.emplaceBack((t<<1)+o,(n<<1)+a,(Math.floor(r*xd)<<1)+i,Math.round(s))}function Sd(e,t,n){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}var Ed=function(){function e(){h(this,e),this.acc=new C(0,0),this.polyCount=[]}return p(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new C(e.x,e.y),this.max=new C(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===Us)&&e.x===t.x)!=((0===e.y||e.y===Us)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Vn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Us!=e.x>Us&&this.addBorderIntersection(1,Vn(t.y,e.y,(Us-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Vn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Us!=e.y>Us&&this.addBorderIntersection(3,Vn(t.x,e.x,(Us-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{var r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new C(0,0)}},{key:"span",value:function(){return new C(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),Ad=function(){function e(t){h(this,e),this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new ko,this.centroidVertexArray=new ns,this.indexArray=new No,this.programConfigurations=new Ps(t.layers,t.zoom),this.segments=new Bs,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return p(e,[{key:"populate",value:function(e,t,n,r){this.features=[],this.hasPattern=Yc("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Us/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;var i,a=f(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.feature,u=o.id,l=o.index,c=o.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,h=Fl(s,d);if(this.layers[0]._featureFilter.filter(new to(this.zoom),h,n)){var p={id:u,sourceLayerIndex:c,index:l,geometry:d?h.geometry:Ol(s,n,r),properties:s.properties,type:s.type,patterns:{}},v=this.layoutVertexArray.length;this.hasPattern?this.features.push(Qc("fill-extrusion",this.layers,p,this.zoom,t)):this.addFeature(p,p.geometry,l,n,{},t.availableImages,r),t.featureIndex.insert(s,p.geometry,l,c,this.index,v)}}}catch(m){a.e(m)}finally{a.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=f(this.features);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s.geometry;this.addFeature(s,u,s.index,t,n,r,i)}}catch(l){o.e(l)}finally{o.f()}this.sortBorders()}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ad),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,id.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,rd.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,r,i,a,o){var s=[new C(0,0),new C(Us,Us)],u=o.projection,l="globe"===u.name,c=this.enableTerrain&&!l?new Ed:null,d="Polygon"===wd[e.type];l&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Co);for(var h,p,v=Jc(t,500),m=v.length-1;m>=0;m--){var g=v[m];(0===g.length||(h=g[0]).every((function(e){return e.x<=0}))||h.every((function(e){return e.x>=Us}))||h.every((function(e){return e.y<=0}))||h.every((function(e){return e.y>=Us})))&&v.splice(m,1)}if(l)p=Od(v,s,r);else{p=[];var y,_=f(v);try{for(_.s();!(y=_.n()).done;){var b=y.value;p.push({polygon:b,bounds:s})}}catch(Ie){_.e(Ie)}finally{_.f()}}var w,x=d?this.edgeRadius:0,k=f(p);try{for(k.s();!(w=k.n()).done;){var S,E=w.value,A=E.polygon,T=E.bounds,P=0,I=0,R=f(A);try{for(R.s();!(S=R.n()).done;){var L=S.value;d&&!L[0].equals(L[L.length-1])&&L.push(L[0]),I+=d?L.length-1:L.length}}catch(Ie){R.e(Ie)}finally{R.f()}var M=this.segments.prepareSegment((d?5:4)*I,this.layoutVertexArray,this.indexArray);if(d){var O=[],F=[];P=M.vertexLength;var D,N=f(A);try{for(N.s();!(D=N.n()).done;){var j=D.value,B=void 0,U=void 0;j.length&&j!==A[0]&&F.push(O.length/2),B=j[1].sub(j[0])._perp()._unit();for(var z=1;z<j.length;z++){var V=j[z],Z=j[z===j.length-1?1:z+1],H=V.x,W=V.y;if(x){U=Z.sub(V)._perp()._unit();var G=B.add(U)._unit(),q=x*Math.min(4,1/(B.x*G.x+B.y*G.y));H+=q*G.x,W+=q*G.y,B=U}kd(this.layoutVertexArray,H,W,0,0,1,1,0),M.vertexLength++,O.push(V.x,V.y),l&&Sd(this.layoutVertexExtArray,u.projectTilePoint(H,W,r),u.upVector(r,H,W))}}}catch(Ie){N.e(Ie)}finally{N.f()}for(var K=yc(O,F),J=0;J<K.length;J+=3)this.indexArray.emplaceBack(P+K[J],P+K[J+2],P+K[J+1]),M.primitiveLength++}var X,Y=f(A);try{for(Y.s();!(X=Y.n()).done;){var Q=X.value;c&&Q.length&&c.startRing(Q[0]);var $=void 0,ee=void 0,te=void 0,ne=Q.length>4&&Rd(Q[Q.length-2],Q[0],Q[1]),re=x?Cd(Q[Q.length-2],Q[0],Q[1],x):0;ee=Q[1].sub(Q[0])._perp()._unit();for(var ie=!0,ae=1,oe=0;ae<Q.length;ae++){var se=Q[ae-1],ue=Q[ae],le=Q[ae===Q.length-1?1:ae+1];if(c&&d&&c.currentPolyCount.top++,Id(ue,se,T))x&&(ee=le.sub(ue)._perp()._unit(),ie=!ie);else{c&&c.append(ue,se);var ce=ue.sub(se)._perp(),de=ce.x/(Math.abs(ce.x)+Math.abs(ce.y)),fe=ce.y>0?1:0,he=se.dist(ue);if(oe+he>32768&&(oe=0),x){te=le.sub(ue)._perp()._unit();var pe=Pd(se,ue,le,Td(ee,te),x);isNaN(pe)&&(pe=0);var ve=ue.sub(se)._unit();se=se.add(ve.mult(re))._round(),ue=ue.add(ve.mult(-pe))._round(),re=pe,ee=te}var me=M.vertexLength,ge=Q.length>4&&Rd(se,ue,le),ye=Ld(oe,ne,ie);if(kd(this.layoutVertexArray,se.x,se.y,de,fe,0,0,ye),kd(this.layoutVertexArray,se.x,se.y,de,fe,0,1,ye),ye=Ld(oe+=he,ge,!ie),ne=ge,kd(this.layoutVertexArray,ue.x,ue.y,de,fe,0,0,ye),kd(this.layoutVertexArray,ue.x,ue.y,de,fe,0,1,ye),M.vertexLength+=4,this.indexArray.emplaceBack(me+0,me+1,me+2),this.indexArray.emplaceBack(me+1,me+3,me+2),M.primitiveLength+=2,x){var _e=P+(1===ae?Q.length-2:ae-2),be=1===ae?P:_e+1;if(this.indexArray.emplaceBack(me+1,_e,me+3),this.indexArray.emplaceBack(_e,be,me+3),M.primitiveLength+=2,void 0===$&&($=me),!Id(le,Q[ae],T)){var we=ae===Q.length-1?$:M.vertexLength;this.indexArray.emplaceBack(me+2,me+3,we),this.indexArray.emplaceBack(me+3,we+1,we),this.indexArray.emplaceBack(me+3,be,we+1),M.primitiveLength+=3}ie=!ie}if(l){var xe=this.layoutVertexExtArray,ke=u.projectTilePoint(se.x,se.y,r),Se=u.projectTilePoint(ue.x,ue.y,r),Ee=u.upVector(r,se.x,se.y),Ae=u.upVector(r,ue.x,ue.y);Sd(xe,ke,Ee),Sd(xe,ke,Ee),Sd(xe,Se,Ae),Sd(xe,Se,Ae)}}}d&&(P+=Q.length-1)}}catch(Ie){Y.e(Ie)}finally{Y.f()}}}catch(Ie){k.e(Ie)}finally{k.f()}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;for(var Te=c.borders,Ce=this.featuresOnBorder.push(c)-1,Pe=0;Pe<4;Pe++)Te[Pe][0]!==Number.MAX_VALUE&&this.borders[Pe].push(Ce)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,a,r)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(n,r){return e.featuresOnBorder[n].borders[t][0]-e.featuresOnBorder[r].borders[t][0]}))},n=0;n<4;n++)t(n)}},{key:"encodeCentroid",value:function(e,t){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),r=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else n=Math.ceil(7*(e.x+450)),r=0;else n=0,r=+i;var o,s=i?this.centroidVertexArray.length:t.vertexArrayOffset,u=f(t.polyCount);try{for(u.s();!(o=u.n()).done;){var l=o.value;i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*l.edges+l.top);for(var c=0;c<l.top;c++)this.centroidVertexArray.emplace(s++,n,r);for(var d=0;d<2*l.edges;d++)this.centroidVertexArray.emplace(s++,0,r),this.centroidVertexArray.emplace(s++,n,r)}}catch(h){u.e(h)}finally{u.f()}}}]),e}();function Td(e,t){var n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function Cd(e,t,n,r){var i=t.sub(e)._perp()._unit(),a=n.sub(t)._perp()._unit();return Pd(e,t,n,Td(i,a),r)}function Pd(e,t,n,r,i){var a=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(n)/3,i*a/r)}function Id(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function Rd(e,t,n){if(e.x<0||e.x>=Us||t.x<0||t.x>=Us||n.x<0||n.x>=Us)return!1;var r=n.sub(t),i=r.perp(),a=e.sub(t);return(r.x*a.x+r.y*a.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(a.x*a.x+a.y*a.y))>-.866&&i.x*a.x+i.y*a.y<0}function Ld(e,t,n){var r=t?2|e:-3&e;return n?1|r:-2&r}function Md(){var e=Math.PI/32,t=Math.tan(e),n=pl;return n*Math.sqrt(1+2*t*t)-n}function Od(e,t,n){var r=1<<n.z,i=wl(n.x/r),a=wl((n.x+1)/r),o=xl(n.y/r),s=xl((n.y+1)/r);return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=[];if(!e.length||!n||!r)return o;for(var s=function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;o.push({polygon:i,bounds:t})}}catch(a){r.e(a)}finally{r.f()}},u=Math.ceil(Math.log2(n)),l=Math.ceil(Math.log2(r)),c=u-l,d=[],h=0;h<Math.abs(c);h++)d.push(c>0?0:1);for(var p=0;p<Math.min(u,l);p++)d.push(0),d.push(1);var v=e;if(v=bd(v,t[0].y-i,t[1].y+i,1),!(v=bd(v,t[0].x-i,t[1].x+i,0)).length)return o;var m=[];for(d.length?m.push({polygons:v,bounds:t,depth:0}):s(v,t);m.length;){var g=m.pop(),y=g.depth,_=d[y],b=g.bounds[0],w=g.bounds[1],x=0===_?b.x:b.y,k=0===_?w.x:w.y,S=a?a(_,x,k):.5*(x+k),E=bd(g.polygons,x-i,S+i,_),A=bd(g.polygons,S-i,k+i,_);if(E.length){var T=[b,new C(0===_?S:w.x,1===_?S:w.y)];d.length>y+1?m.push({polygons:E,bounds:T,depth:y+1}):s(E,T)}if(A.length){var P=[new C(0===_?S:b.x,1===_?S:b.y),w];d.length>y+1?m.push({polygons:A,bounds:P,depth:y+1}):s(A,P)}}return o}(e,t,Math.ceil((a-i)/11.25),Math.ceil((o-s)/11.25),1,(function(e,t,i){if(0===e)return.5*(t+i);var a=xl((n.y+t/Us)/r);return(_l(.5*(xl((n.y+i/Us)/r)+a))*r-n.y)*Us}))}na(Ad,"FillExtrusionBucket",{omit:["layers","features"]}),na(Ed,"PartMetadata");var Fd=new po({"fill-extrusion-edge-radius":new co(ct["layout_fill-extrusion"]["fill-extrusion-edge-radius"])}),Dd={paint:new po({"fill-extrusion-opacity":new co(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fo(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new co(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new co(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new fo(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fo(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new fo(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new co(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new co(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new co(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Fd};function Nd(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}var jd=function(){function e(t,n,r){h(this,e),this.z=t,this.x=n,this.y=r,this.key=zd(0,t,t,n,r)}return p(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var n=function(e,t,n){var r=Nd(256*e,256*(t=Math.pow(2,n)-t-1),n),i=Nd(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){for(var r,i="",a=e;a>0;a--)i+=(t&(r=1<<a-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),Bd=p((function e(t,n){h(this,e),this.wrap=t,this.canonical=n,this.key=zd(t,n.z,n.z,n.x,n.y)})),Ud=function(){function e(t,n,r,i,a){h(this,e),this.overscaledZ=t,this.wrap=n,this.canonical=new jd(r,+i,+a),this.key=0===n&&t===r?this.canonical.key:zd(n,t,r,i,a)}return p(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var n=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return zd(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-e;return zd(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new e(n,this.wrap,n,r,i),new e(n,this.wrap,n,r+1,i),new e(n,this.wrap,n,r,i+1),new e(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Bd(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}]),e}();function zd(e,t,n,r,i){var a=1<<Math.min(n,22),o=a*(i%a)+r%a;return e&&n<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*o+n)+(t-n)}na(jd,"CanonicalTileID"),na(Ud,"OverscaledTileID",{omit:["projMatrix"]});var Vd=function(e){v(n,e);var t=m(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r)).z=i,a}return p(n)}(C);function Zd(e,t){return e.x*t.x+e.y*t.y}function Hd(e,t){if(1===e.length){for(var n,r=0,i=t[r++];!n||i.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var a=t[r],o=e[0],s=n.sub(i),u=a.sub(i),l=o.sub(i),c=Zd(s,s),d=Zd(s,u),h=Zd(u,u),p=Zd(l,s),v=Zd(l,u),m=c*h-d*d,g=(h*p-d*v)/m,y=(c*v-d*p)/m,_=i.z*(1-g-y)+n.z*g+a.z*y;if(isFinite(_))return _}return 1/0}var b,w=1/0,x=f(t);try{for(x.s();!(b=x.n()).done;){var k=b.value;w=Math.min(w,k.z)}}catch(S){x.e(S)}finally{x.f()}return w}function Wd(e,t,n,r,i,a,o,s){var u=o*i.getElevationAt(e,t,!0,!0),l=0!==a[0],c=l?0===a[1]?o*(a[0]/7-450):o*function(e,t,n){var r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),a=10*(t[0]-8*r),o=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),u=e.getMeterToDEM(n),l=Math.floor(.5*(a*u-1)),c=Math.floor(.5*(o*u-1)),d=e.tileCoordToPixel(r,i),f=2*l+1,h=2*c+1,p=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,d.x-l,d.y-c,f,h),v=Math.abs(p[0]-p[1]),m=Math.abs(p[2]-p[3]),g=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),y=Math.min(.25,.5*u*(v+m)/f),_=Math.min(.25,.5*u*g/h);return s+Math.max(y*a,_*o)}(i,a,s):u;return{base:u+(0===n)?-1:n,top:l?Math.max(c+r,u+n+2):u+r}}var Gd=_o([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,qd=_o([{name:"a_packed",components:4,type:"Float32"}]).members,Kd=_d.types,Jd=Math.cos(Math.PI/180*37.5),Xd=function(){function e(t){var n=this;h(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){n.gradients[e.id]={}})),this.layoutVertexArray=new So,this.layoutVertexArray2=new Eo,this.indexArray=new No,this.programConfigurations=new Ps(t.layers,t.zoom),this.segments=new Bs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return p(e,[{key:"populate",value:function(e,t,n,r){this.hasPattern=Yc("line",this.layers,t);var i,a=this.layers[0].layout.get("line-sort-key"),o=[],s=f(e);try{for(s.s();!(i=s.n()).done;){var u=i.value,l=u.feature,c=u.id,d=u.index,h=u.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,v=Fl(l,p);if(this.layers[0]._featureFilter.filter(new to(this.zoom),v,n)){var m=a?a.evaluate(v,{},n):void 0,g={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:d,geometry:p?v.geometry:Ol(l,n,r),patterns:{},sortKey:m};o.push(g)}}}catch(C){s.e(C)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=t.lineAtlas,_=t.featureIndex,b=this.addConstantDashes(y),w=0,x=o;w<x.length;w++){var k=x[w],S=k.geometry,E=k.index,A=k.sourceLayerIndex;if(b&&this.addFeatureDashes(k,y),this.hasPattern){var T=Qc("line",this.layers,k,this.zoom,t);this.patternFeatures.push(T)}else this.addFeature(k,S,E,n,y.positions,t.availableImages);_.insert(e[E].feature,S,E,A,this.index)}}},{key:"addConstantDashes",value:function(e){var t,n=!1,r=f(this.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.paint.get("line-dasharray").value,o=i.layout.get("line-cap").value;if("constant"!==a.kind||"constant"!==o.kind)n=!0;else{var s=o.value,u=a.value;if(!u)continue;e.addDash(u,s)}}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"addFeatureDashes",value:function(e,t){var n,r=this.zoom,i=f(this.layers);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.paint.get("line-dasharray").value,s=a.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==s.kind){var u=void 0,l=void 0;if("constant"===o.kind){if(!(u=o.value))continue}else u=o.evaluate({zoom:r},e);l="constant"===s.kind?s.value:s.evaluate({zoom:r},e),t.addDash(u,l),e.patterns[a.id]=t.getKey(u,l)}}}catch(c){i.e(c)}finally{i.f()}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=f(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,n,r)}}catch(u){o.e(u)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,qd)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Gd),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,n,r,i,a){var o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),u=o.get("line-cap").evaluate(e,{}),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var d,h=f(t);try{for(h.s();!(d=h.n()).done;){var p=d.value;this.addLine(p,e,s,u,l,c)}}catch(v){h.e(v)}finally{h.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,a,r)}},{key:"addLine",value:function(e,t,n,r,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Kd[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var c,d,f,h,p,v=this.overscaling<=16?122880/(512*this.overscaling):0,m=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(c=e[u-2],p=e[l].sub(c)._unit()._perp());for(var g=l;g<u;g++)if(!(f=g===u-1?s?e[l+1]:void 0:e[g+1])||!e[g].equals(f)){p&&(h=p),c&&(d=c),c=e[g],p=f?f.sub(c)._unit()._perp():h;var y=(h=h||p).add(p);0===y.x&&0===y.y||y._unit();var _=h.x*p.x+h.y*p.y,b=y.x*p.x+y.y*p.y,w=0!==b?1/b:1/0,x=2*Math.sqrt(2-2*b),k=b<Jd&&d&&f,S=h.x*p.y-h.y*p.x>0;if(k&&g>l){var E=c.dist(d);if(E>2*v){var A=c.sub(c.sub(d)._mult(v/E)._round());this.updateDistance(d,A),this.addCurrentVertex(A,h,0,0,m),d=A}}var T=d&&f,C=T?n:s?"butt":r;if(T&&"round"===C&&(w<a?C="miter":w<=2&&(C="fakeround")),"miter"===C&&w>i&&(C="bevel"),"bevel"===C&&(w>2&&(C="flipbevel"),w<i&&(C="miter")),d&&this.updateDistance(d,c),"miter"===C)y._mult(w),this.addCurrentVertex(c,y,0,0,m);else if("flipbevel"===C){if(w>100)y=p.mult(-1);else{var P=w*h.add(p).mag()/h.sub(p).mag();y._perp()._mult(P*(S?-1:1))}this.addCurrentVertex(c,y,0,0,m),this.addCurrentVertex(c,y.mult(-1),0,0,m)}else if("bevel"===C||"fakeround"===C){var I=-Math.sqrt(w*w-1),R=S?I:0,L=S?0:I;if(d&&this.addCurrentVertex(c,h,R,L,m),"fakeround"===C)for(var M=Math.round(180*x/Math.PI/20),O=1;O<M;O++){var F=O/M;if(.5!==F){var D=F-.5;F+=F*D*(F-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*D*D+(.848013+_*(.215638*_-1.06021)))}var N=p.sub(h)._mult(F)._add(h)._unit()._mult(S?-1:1);this.addHalfVertex(c,N.x,N.y,!1,S,0,m)}f&&this.addCurrentVertex(c,p,-R,-L,m)}else if("butt"===C)this.addCurrentVertex(c,y,0,0,m);else if("square"===C){var j=d?1:-1;d||this.addCurrentVertex(c,y,j,j,m),this.addCurrentVertex(c,y,0,0,m),d&&this.addCurrentVertex(c,y,j,j,m)}else"round"===C&&(d&&(this.addCurrentVertex(c,h,0,0,m),this.addCurrentVertex(c,h,1,1,m,!0)),f&&(this.addCurrentVertex(c,p,-1,-1,m,!0),this.addCurrentVertex(c,p,0,0,m)));if(k&&g<u-1){var B=c.dist(f);if(B>2*v){var U=c.add(f.sub(c)._mult(v/B)._round());this.updateDistance(c,U),this.addCurrentVertex(U,p,0,0,m),c=U}}}}}},{key:"addCurrentVertex",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,i),this.addHalfVertex(e,o,s,a,!0,-r,i)}},{key:"addHalfVertex",value:function(e,t,n,r,i,a,o){var s=e.x,u=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(u<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);var l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),i?this.e2=l:this.e1=l}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();na(Xd,"LineBucket",{omit:["layers","patternFeatures"]});var Yd=new po({"line-cap":new fo(ct.layout_line["line-cap"]),"line-join":new fo(ct.layout_line["line-join"]),"line-miter-limit":new co(ct.layout_line["line-miter-limit"]),"line-round-limit":new co(ct.layout_line["line-round-limit"]),"line-sort-key":new fo(ct.layout_line["line-sort-key"])}),Qd={paint:new po({"line-opacity":new fo(ct.paint_line["line-opacity"]),"line-color":new fo(ct.paint_line["line-color"]),"line-translate":new co(ct.paint_line["line-translate"]),"line-translate-anchor":new co(ct.paint_line["line-translate-anchor"]),"line-width":new fo(ct.paint_line["line-width"]),"line-gap-width":new fo(ct.paint_line["line-gap-width"]),"line-offset":new fo(ct.paint_line["line-offset"]),"line-blur":new fo(ct.paint_line["line-blur"]),"line-dasharray":new fo(ct.paint_line["line-dasharray"]),"line-pattern":new fo(ct.paint_line["line-pattern"]),"line-gradient":new ho(ct.paint_line["line-gradient"]),"line-trim-offset":new co(ct.paint_line["line-trim-offset"])}),layout:Yd},$d=new(function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"possiblyEvaluate",value:function(e,t){return t=new to(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),o(s(n.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,r,i){return t=Z({},t,{zoom:Math.floor(t.zoom)}),o(s(n.prototype),"evaluate",this).call(this,e,t,r,i)}}]),n}(fo))(Qd.paint.properties["line-width"].specification);function ef(e,t){return t>0?t+2*e:e}$d.useIntegerZoom=!0;var tf=_o([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nf=_o([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),rf=_o([{name:"a_projected_pos",components:4,type:"Float32"}],4);_o([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var af=_o([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),of=_o([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);_o([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var sf=_o([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),uf=_o([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);_o([{name:"triangle",components:3,type:"Uint16"}]),_o([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),_o([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),_o([{type:"Float32",name:"offsetX"}]),_o([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var lf=24,cf=128;function df(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new to(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,a=0;a<r.length&&r[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var s=r[a],u=r[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new to(s)),maxSize:n.evaluate(new to(u)),interpolationType:i}}function ff(e,t,n){var r=t.uSize,i=t.uSizeT,a=n.lowerSize,o=n.upperSize;return"source"===e.kind?a/cf:"composite"===e.kind?Vn(a/cf,o/cf,i):r}function hf(e,t){var n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var i=e.interpolationType,a=e.minZoom,o=e.maxZoom,s=i?j(lr.interpolationFactor(i,t,a,o),0,1):0;"camera"===e.kind?r=Vn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var pf=Object.freeze({__proto__:null,getSizeData:df,evaluateSizeForFeature:ff,evaluateSizeForZoom:hf,SIZE_PACK_FACTOR:cf});function vf(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),eo.applyArabicShaping&&(e=eo.applyArabicShaping(e)),e}(e.text,t,n)})),e}var mf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function gf(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function yf(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var _f=xf,bf=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},wf=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*u-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*v};function xf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}xf.Varint=0,xf.Fixed64=1,xf.Bytes=2,xf.Fixed32=5;var kf=4294967296,Sf=1/kf,Ef="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Af(e){return e.type===xf.Bytes?e.readVarint()+e.pos:e.pos+1}function Tf(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Cf(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Pf(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function If(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Rf(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Lf(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Mf(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Of(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Ff(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Df(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Nf(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function jf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Bf(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Uf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function zf(e,t,n){t.glyphs=[],1===e&&n.readMessage(Vf,t)}function Vf(e,t,n){if(3===e){var r=n.readMessage(Zf,{}),i=r.id,a=r.bitmap,o=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;t.glyphs.push({id:i,bitmap:new fc({width:o+6,height:s+6},a),metrics:{width:o,height:s,left:u,top:l,advance:c}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function Zf(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Hf(e){var t,n=0,r=0,i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n+=a.w*a.h,r=Math.max(r,a.w)}}catch(m){i.e(m)}finally{i.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],u=0,l=0,c=f(e);try{for(c.s();!(o=c.n()).done;)for(var d=o.value,h=s.length-1;h>=0;h--){var p=s[h];if(!(d.w>p.w||d.h>p.h)){if(d.x=p.x,d.y=p.y,l=Math.max(l,d.y+d.h),u=Math.max(u,d.x+d.w),d.w===p.w&&d.h===p.h){var v=s.pop();h<s.length&&(s[h]=v)}else d.h===p.h?(p.x+=d.w,p.w-=d.w):d.w===p.w?(p.y+=d.h,p.h-=d.h):(s.push({x:p.x+d.w,y:p.y,w:p.w-d.w,h:d.h}),p.y+=d.h,p.h-=d.h);break}}}catch(m){c.e(m)}finally{c.f()}return{w:u,h:l,fill:n/(u*l)||0}}xf.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,e(i,t,this),this.pos===a&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=jf(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Uf(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=jf(this.buf,this.pos)+jf(this.buf,this.pos+4)*kf;return this.pos+=8,e},readSFixed64:function(){var e=jf(this.buf,this.pos)+Uf(this.buf,this.pos+4)*kf;return this.pos+=8,e},readFloat:function(){var e=bf(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=bf(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return Tf(e,r,t);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return Tf(e,r,t);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return Tf(e,r,t);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return Tf(e,r,t);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return Tf(e,r,t);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return Tf(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Ef?function(e,t,n){return Ef.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var a,o,s,u=e[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===c?(o=e[i+2],128==(192&(a=e[i+1]))&&128==(192&o)&&((l=(15&u)<<12|(63&a)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=e[i+2],s=e[i+3],128==(192&(a=e[i+1]))&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==xf.Bytes)return e.push(this.readVarint(t));var n=Af(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==xf.Bytes)return e.push(this.readSVarint());var t=Af(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==xf.Bytes)return e.push(this.readBoolean());var t=Af(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==xf.Bytes)return e.push(this.readFloat());var t=Af(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==xf.Bytes)return e.push(this.readDouble());var t=Af(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==xf.Bytes)return e.push(this.readFixed32());var t=Af(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==xf.Bytes)return e.push(this.readSFixed32());var t=Af(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==xf.Bytes)return e.push(this.readFixed64());var t=Af(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==xf.Bytes)return e.push(this.readSFixed64());var t=Af(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===xf.Varint)for(;this.buf[this.pos++]>127;);else if(t===xf.Bytes)this.pos=this.readVarint()+this.pos;else if(t===xf.Fixed32)this.pos+=4;else{if(t!==xf.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Bf(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Bf(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Bf(this.buf,-1&e,this.pos),Bf(this.buf,Math.floor(e*Sf),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Bf(this.buf,-1&e,this.pos),Bf(this.buf,Math.floor(e*Sf),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Cf(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),wf(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),wf(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Cf(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,xf.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Pf,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,If,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Mf,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Rf,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Lf,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Of,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Ff,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Df,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Nf,t)},writeBytesField:function(e,t){this.writeTag(e,xf.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,xf.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,xf.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,xf.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,xf.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,xf.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,xf.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,xf.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,xf.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,xf.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Wf=function(){function e(t,n){var r=n.pixelRatio,i=n.version,a=n.stretchX,o=n.stretchY,s=n.content;h(this,e),this.paddedRect=t,this.pixelRatio=r,this.stretchX=a,this.stretchY=o,this.content=s,this.version=i}return p(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}(),Gf=function(){function e(t,n){h(this,e);var r={},i={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,r,a),this.addImages(n,i,a);var o=Hf(a),s=o.w,u=o.h,l=new hc({width:s||1,height:u||1});for(var c in t){var d=t[c],f=r[c].paddedRect;hc.copy(d.data,l,{x:0,y:0},{x:f.x+1,y:f.y+1},d.data)}for(var p in n){var v=n[p],m=i[p].paddedRect,g=m.x+1,y=m.y+1,_=v.data.width,b=v.data.height;hc.copy(v.data,l,{x:0,y:0},{x:g,y:y},v.data),hc.copy(v.data,l,{x:0,y:b-1},{x:g,y:y-1},{width:_,height:1}),hc.copy(v.data,l,{x:0,y:0},{x:g,y:y+b},{width:_,height:1}),hc.copy(v.data,l,{x:_-1,y:0},{x:g-1,y:y},{width:1,height:b}),hc.copy(v.data,l,{x:0,y:0},{x:g+_,y:y},{width:1,height:b})}this.image=l,this.iconPositions=r,this.patternPositions=i}return p(e,[{key:"addImages",value:function(e,t,n){for(var r in e){var i=e[r],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(a),t[r]=new Wf(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(e,t){for(var n in this.haveRenderCallbacks=this.haveRenderCallbacks.filter((function(t){return e.hasImage(t)})),e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}},{key:"patchUpdatedImage",value:function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=d(e.tl,2),i=r[0],a=r[1];n.update(t.data,void 0,{x:i,y:a})}}}]),e}();na(Wf,"ImagePosition"),na(Gf,"ImageAtlas");var qf={horizontal:1,vertical:2,horizontalOnly:3},Kf=function(){function e(){h(this,e),this.scale=1,this.fontStack="",this.imageName=null}return p(e,null,[{key:"forText",value:function(t,n){var r=new e;return r.scale=t||1,r.fontStack=n,r}},{key:"forImage",value:function(t){var n=new e;return n.imageName=t,n}}]),e}(),Jf=function(){function e(){h(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return p(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSections",value:function(){return this.sections}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(e){this.text=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e.charCodeAt(r+1)||null,a=e.charCodeAt(r-1)||null;n+=!t&&(i&&Ba(i)&&!mf[e[r+1]]||a&&Ba(a)&&!mf[e[r-1]])||!mf[e[r]]?e[r]:mf[e[r]]}return n}(this.text,e)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&Yf[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&Yf[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}},{key:"substring",value:function(t,n){var r=new e;return r.text=this.text.substring(t,n),r.sectionIndex=this.sectionIndex.slice(t,n),r.sections=this.sections,r}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(Kf.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Kf.forImage(t)),this.sectionIndex.push(this.sections.length-1)):te("Reached maximum number of images 6401")}else te("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,n){for(var r=new e,i=0;i<t.sections.length;i++){var a=t.sections[i];a.image?r.addImageSection(a):r.addTextSection(a,n)}return r}}]),e}();function Xf(e,t,n,r,i,a,o,s,u,l,c,d,h,p,v){var m=Jf.fromFeature(e,i);d===qf.vertical&&m.verticalizePunctuation(h);var g=[],y=function(e,t,n,r,i,a){if(!e)return[];for(var o,s=[],u=function(e,t,n,r,i,a){for(var o=0,s=0;s<e.length();s++){var u=e.getSection(s);o+=$f(e.getCharCode(s),u,r,i,t,a)}return o/Math.max(1,Math.ceil(o/n))}(e,t,n,r,i,a),l=e.text.indexOf("\u200b")>=0,c=0,d=0;d<e.length();d++){var f=e.getSection(d),h=e.getCharCode(d);if(Yf[h]||(c+=$f(h,f,r,i,t,a)),d<e.length()-1){var p=!((o=h)<11904||!(ya(o)||ga(o)||Ra(o)||Ca(o)||xa(o)||da(o)||_a(o)||pa(o)||ka(o)||Sa(o)||wa(o)||Oa(o)||va(o)||ha(o)||fa(o)||ba(o)||ma(o)||Ia(o)||Aa(o)||Ea(o)));(Qf[h]||p||f.imageName)&&s.push(nh(d+1,c,u,s,th(h,e.getCharCode(d+1),p&&l),!1))}}return rh(nh(e.length(),c,u,s,0,!0))}(m,l,a,t,r,p),_=eo.processBidirectionalText,b=eo.processStyledBidirectionalText;if(_&&1===m.sections.length){var w,x=_(m.toString(),y),k=f(x);try{for(k.s();!(w=k.n()).done;){var S=w.value,E=new Jf;E.text=S,E.sections=m.sections;for(var A=0;A<S.length;A++)E.sectionIndex.push(0);g.push(E)}}catch(O){k.e(O)}finally{k.f()}}else if(b){var T,C=b(m.text,m.sectionIndex,y),P=f(C);try{for(P.s();!(T=P.n()).done;){var I=T.value,R=new Jf;R.text=I[0],R.sectionIndex=I[1],R.sections=m.sections,g.push(R)}}catch(O){P.e(O)}finally{P.f()}}else g=function(e,t){var n,r=[],i=e.text,a=0,o=f(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;r.push(e.substring(a,s)),a=s}}catch(O){o.e(O)}finally{o.f()}return a<i.length&&r.push(e.substring(a,i.length)),r}(m,y);var L=[],M={positionedLines:L,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:d,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,a,o,s,u,l,c,d){var h,p=0,v=0,m=0,g="right"===s?1:"left"===s?0:.5,y=!1,_=f(i);try{for(_.s();!(h=_.n()).done;){var b,w=h.value.getSections(),x=f(w);try{for(x.s();!(b=x.n()).done;){var k=b.value;if(!k.imageName){var S=t[k.fontStack];if(S&&!(y=void 0!==S.ascender&&void 0!==S.descender))break}}}catch(O){x.e(O)}finally{x.f()}if(!y)break}}catch(O){_.e(O)}finally{_.f()}var E,A,T=0,C=f(i);try{for(C.s();!(E=C.n()).done;){var P=E.value;P.trim();var I=P.getMaxScale(),R=(I-1)*lf,L={positionedGlyphs:[],lineOffset:0};e.positionedLines[T]=L;var M=L.positionedGlyphs,F=0;if(P.length()){for(var D=0,N=0,j=0;j<P.length();j++){var B=P.getSection(j),U=P.getSectionIndex(j),z=P.getCharCode(j),V=B.scale,Z=null,H=null,W=null,G=lf,q=0,K=!(u===qf.horizontal||!c&&!ja(z)||c&&(Yf[z]||(A=z,ua(A)||la(A)||ca(A)||Pa(A)||Ma(A))));if(B.imageName){var J=r[B.imageName];if(!J)continue;W=B.imageName,e.iconsInText=e.iconsInText||!0,H=J.paddedRect;var X=J.displaySize;V=V*lf/d,Z={width:X[0],height:X[1],left:1,top:-3,advance:K?X[1]:X[0],localGlyph:!1},q=y?-Z.height*V:I*lf-17-X[1]*V,G=Z.advance;var Y=(K?X[0]:X[1])*V-lf*I;Y>0&&Y>F&&(F=Y)}else{var Q=n[B.fontStack];if(!Q)continue;Q[z]&&(H=Q[z]);var $=t[B.fontStack];if(!$)continue;var ee=$.glyphs[z];if(!ee)continue;if(Z=ee.metrics,G=8203!==z?lf:0,y){var te=void 0!==$.ascender?Math.abs($.ascender):0,ne=void 0!==$.descender?Math.abs($.descender):0,re=(te+ne)*V;D<re&&(D=re,N=(te-ne)/2*V),q=-te*V}else q=(I-V)*lf-17}K?(e.verticalizable=!0,M.push({glyph:z,imageName:W,x:p,y:v+q,vertical:K,scale:V,localGlyph:Z.localGlyph,fontStack:B.fontStack,sectionIndex:U,metrics:Z,rect:H}),p+=G*V+l):(M.push({glyph:z,imageName:W,x:p,y:v+q,vertical:K,scale:V,localGlyph:Z.localGlyph,fontStack:B.fontStack,sectionIndex:U,metrics:Z,rect:H}),p+=Z.advance*V+l)}0!==M.length&&(m=Math.max(p-l,m),y?ah(M,g,F,N,a*I/2):ah(M,g,F,0,a/2)),p=0;var ie=a*I+F;L.lineOffset=Math.max(F,R),v+=ie,++T}else v+=a,++T}}catch(O){C.e(O)}finally{C.f()}var ae=v,oe=ih(o),se=oe.horizontalAlign,ue=oe.verticalAlign;(function(e,t,n,r,i,a){var o,s=(t-n)*i,u=-a*r,l=f(e);try{for(l.s();!(o=l.n()).done;){var c,d=o.value,h=f(d.positionedGlyphs);try{for(h.s();!(c=h.n()).done;){var p=c.value;p.x+=s,p.y+=u}}catch(O){h.e(O)}finally{h.f()}}}catch(O){l.e(O)}finally{l.f()}})(e.positionedLines,g,se,ue,m,ae),e.top+=-ue*ae,e.bottom=e.top+ae,e.left+=-se*m,e.right=e.left+m,e.hasBaseline=y}(M,t,n,r,g,o,s,u,d,l,h,v),!function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(O){n.e(O)}finally{n.f()}return!0}(L)&&M}var Yf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function $f(e,t,n,r,i,a){if(t.imageName){var o=r[t.imageName];return o?o.displaySize[0]*t.scale*lf/a+i:0}var s=n[t.fontStack],u=s&&s.glyphs[e];return u?u.metrics.advance*t.scale+i:0}function eh(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function th(e,t,n){var r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function nh(e,t,n,r,i,a){var o,s=null,u=eh(t,n,i,a),l=f(r);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=eh(t-c.x,n,i,a)+c.badness;d<=u&&(s=c,u=d)}}catch(h){l.e(h)}finally{l.f()}return{index:e,x:t,priorBreak:s,badness:u}}function rh(e){return e?rh(e.priorBreak).concat(e.index):[]}function ih(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function ah(e,t,n,r,i){if(t||n||r||i)for(var a=e.length-1,o=e[a],s=(o.x+o.metrics.advance*o.scale)*t,u=0;u<=a;u++)e[u].x-=s,e[u].y+=n+r+i}function oh(e,t,n){var r=ih(n),i=r.horizontalAlign,a=r.verticalAlign,o=t[0]-e.displaySize[0]*i,s=t[1]-e.displaySize[1]*a;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function sh(e,t,n,r,i,a){var o,s=e.image;if(s.content){var u=s.content,l=s.pixelRatio||1;o=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,d,f,h,p=t.left*a,v=t.right*a;"width"===n||"both"===n?(h=i[0]+p-r[3],d=i[0]+v+r[1]):d=(h=i[0]+(p+v-s.displaySize[0])/2)+s.displaySize[0];var m=t.top*a,g=t.bottom*a;return"height"===n||"both"===n?(c=i[1]+m-r[0],f=i[1]+g+r[2]):f=(c=i[1]+(m+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:d,bottom:f,left:h,collisionPadding:o}}var uh=function(e){v(n,e);var t=m(n);function n(e,r,i,a,o){var s;return h(this,n),(s=t.call(this,e,r)).angle=a,s.z=i,void 0!==o&&(s.segment=o),s}return p(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.z,this.angle,this.segment)}}]),n}(C);function lh(e,t,n,r,i){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var u=[],l=0;s<n/2;){var c=e[o],d=e[o+1];if(!d)return!1;var f=e[o-1].angleTo(c)-c.angleTo(d);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;o++,s+=c.dist(d)}return!0}function ch(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function dh(e,t,n){return e?.6*t*n:0}function fh(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function hh(e,t,n,r,i,a){for(var o=dh(n,i,a),s=fh(n,r)*a,u=0,l=ch(e)/2,c=0;c<e.length-1;c++){var d=e[c],f=e[c+1],h=d.dist(f);if(u+h>l){var p=(l-u)/h,v=Vn(d.x,f.x,p),m=Vn(d.y,f.y,p),g=new uh(v,m,0,f.angleTo(d),c);return!o||lh(e,g,s,o,t)?g:void 0}u+=h}}function ph(e,t,n,r,i,a,o,s,u){var l=dh(r,a,o),c=fh(r,i),d=c*o,f=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return t-d<t/4&&(t=d+t/4),vh(e,f?t/2*s%t:(c/2+2*a)*o*s%t,t,l,n,d,f,!1,u)}function vh(e,t,n,r,i,a,o,s,u){for(var l=a/2,c=ch(e),d=0,f=t-n,h=[],p=0;p<e.length-1;p++){for(var v=e[p],m=e[p+1],g=v.dist(m),y=m.angleTo(v);f+n<d+g;){var _=((f+=n)-d)/g,b=Vn(v.x,m.x,_),w=Vn(v.y,m.y,_);if(b>=0&&b<u&&w>=0&&w<u&&f-l>=0&&f+l<=c){var x=new uh(b,w,0,y,p);x._round(),r&&!lh(e,x,a,r,i)||h.push(x)}}d+=g}return s||h.length||o||(h=vh(e,d/2,n,r,i,a,o,!0,u)),h}function mh(e,t,n,r,i){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],u=void 0,l=0;l<s.length-1;l++){var c=s[l],d=s[l+1];c.x<t&&d.x<t||(c.x<t?c=new C(t,c.y+(t-c.x)/(d.x-c.x)*(d.y-c.y))._round():d.x<t&&(d=new C(t,c.y+(t-c.x)/(d.x-c.x)*(d.y-c.y))._round()),c.y<n&&d.y<n||(c.y<n?c=new C(c.x+(n-c.y)/(d.y-c.y)*(d.x-c.x),n)._round():d.y<n&&(d=new C(c.x+(n-c.y)/(d.y-c.y)*(d.x-c.x),n)._round()),c.x>=r&&d.x>=r||(c.x>=r?c=new C(r,c.y+(r-c.x)/(d.x-c.x)*(d.y-c.y))._round():d.x>=r&&(d=new C(r,c.y+(r-c.x)/(d.x-c.x)*(d.y-c.y))._round()),c.y>=i&&d.y>=i||(c.y>=i?c=new C(c.x+(i-c.y)/(d.y-c.y)*(d.x-c.x),i)._round():d.y>=i&&(d=new C(c.x+(i-c.y)/(d.y-c.y)*(d.x-c.x),i)._round()),u&&c.equals(u[u.length-1])||(u=[c],a.push(u)),u.push(d)))))}return a}na(uh,"Anchor");var gh=1e20;function yh(e,t,n,r,i,a,o,s,u){for(var l=t;l<t+r;l++)_h(e,n*a+l,a,i,o,s,u);for(var c=n;c<n+i;c++)_h(e,c*a+t,1,r,o,s,u)}function _h(e,t,n,r,i,a,o){a[0]=0,o[0]=-gh,o[1]=gh,i[0]=e[t];for(var s=1,u=0,l=0;s<r;s++){i[s]=e[t+s*n];var c=s*s;do{var d=a[u];l=(i[s]-i[d]+c-d*d)/(s-d)/2}while(l<=o[u]&&--u>-1);a[++u]=s,o[u]=l,o[u+1]=gh}for(var f=0,h=0;f<r;f++){for(;o[h+1]<f;)h++;var p=a[h],v=f-p;e[t+f*n]=i[p]+v*v}}var bh={none:0,ideographs:1,all:2},wh=function(){function e(t,n,r){h(this,e),this.requestManager=t,this.localGlyphMode=n,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return p(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,n){var r=this,i=[];for(var a in t){var o,s=f(t[a]);try{for(s.s();!(o=s.n()).done;){var u=o.value;i.push({stack:a,id:u})}}catch(l){s.e(l)}finally{s.f()}}z(i,(function(t,n){var i=t.stack,a=t.id,o=r.entries[i];o||(o=r.entries[i]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});var s=o.glyphs[a];if(void 0===s){if(s=r._tinySDF(o,i,a))return o.glyphs[a]=s,void n(null,{stack:i,id:a,glyph:s});var u=Math.floor(a/256);if(256*u>65535)n(new Error("glyphs > 65535 not supported"));else if(o.ranges[u])n(null,{stack:i,id:a,glyph:s});else{var c=o.requests[u];c||(c=o.requests[u]=[],e.loadGlyphRange(i,u,r.url,r.requestManager,(function(e,t){if(t){for(var n in o.ascender=t.ascender,o.descender=t.descender,t.glyphs)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=t.glyphs[+n]);o.ranges[u]=!0}var i,a=f(c);try{for(a.s();!(i=a.n()).done;)(0,i.value)(e,t)}catch(l){a.e(l)}finally{a.f()}delete o.requests[u]}))),c.push((function(e,t){e?n(e):t&&n(null,{stack:i,id:a,glyph:t.glyphs[a]||null})}))}}else n(null,{stack:i,id:a,glyph:s})}),(function(e,t){if(e)n(e);else if(t){var i,a={},o=f(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.stack,c=s.id,d=s.glyph;void 0===a[u]&&(a[u]={}),void 0===a[u].glyphs&&(a[u].glyphs={}),a[u].glyphs[c]=d&&{id:d.id,bitmap:d.bitmap.clone(),metrics:d.metrics},a[u].ascender=r.entries[u].ascender,a[u].descender=r.entries[u].descender}}catch(l){o.e(l)}finally{o.f()}n(null,a)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return this.localGlyphMode!==bh.none&&(this.localGlyphMode===bh.all?!!this.localFontFamily:!!this.localFontFamily&&(Sa(e)||Ta(e)||va(e)||ma(e)||pa(e)))}},{key:"_tinySDF",value:function(t,n,r){var i=this.localFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),(a=t.tinySDF=new e.TinySDF({fontFamily:i,fontWeight:o,fontSize:48,buffer:6,radius:16})).fontWeight=o}if(this.localGlyphs[a.fontWeight][r])return this.localGlyphs[a.fontWeight][r];var s=String.fromCharCode(r),u=a.draw(s),l=u.data,c=u.width,d=u.height,f=u.glyphWidth,h=u.glyphHeight,p=u.glyphLeft,v=u.glyphTop,m=u.glyphAdvance;return this.localGlyphs[a.fontWeight][r]={id:r,bitmap:new fc({width:c,height:d},l),metrics:{width:f/2,height:h/2,left:p/2,top:v/2-27,advance:m/2,localGlyph:!0}}}}}]),e}();function xh(e,t,n,r){var i=[],a=e.image,o=a.pixelRatio,s=a.paddedRect.w-2,u=a.paddedRect.h-2,l=e.right-e.left,c=e.bottom-e.top,d=a.stretchX||[[0,s]],f=a.stretchY||[[0,u]],h=function(e,t){return e+t[1]-t[0]},p=d.reduce(h,0),v=f.reduce(h,0),m=s-p,g=u-v,y=0,_=p,b=0,w=v,x=0,k=m,S=0,E=g;if(a.content&&r){var A=a.content;y=kh(d,0,A[0]),b=kh(f,0,A[1]),_=kh(d,A[0],A[2]),w=kh(f,A[1],A[3]),x=A[0]-y,S=A[1]-b,k=A[2]-A[0]-_,E=A[3]-A[1]-w}var T=function(r,i,s,u){var d=Eh(r.stretch-y,_,l,e.left),f=Ah(r.fixed-x,k,r.stretch,p),h=Eh(i.stretch-b,w,c,e.top),m=Ah(i.fixed-S,E,i.stretch,v),g=Eh(s.stretch-y,_,l,e.left),A=Ah(s.fixed-x,k,s.stretch,p),T=Eh(u.stretch-b,w,c,e.top),P=Ah(u.fixed-S,E,u.stretch,v),I=new C(d,h),R=new C(g,h),L=new C(g,T),M=new C(d,T),O=new C(f/o,m/o),F=new C(A/o,P/o),D=t*Math.PI/180;if(D){var N=Math.sin(D),j=Math.cos(D),B=[j,-N,N,j];I._matMult(B),R._matMult(B),M._matMult(B),L._matMult(B)}var U=r.stretch+r.fixed,z=i.stretch+i.fixed;return{tl:I,tr:R,bl:M,br:L,tex:{x:a.paddedRect.x+1+U,y:a.paddedRect.y+1+z,w:s.stretch+s.fixed-U,h:u.stretch+u.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:O,pixelOffsetBR:F,minFontScaleX:k/o/l,minFontScaleY:E/o/c,isSDF:n}};if(r&&(a.stretchX||a.stretchY))for(var P=Sh(d,m,p),I=Sh(f,g,v),R=0;R<P.length-1;R++)for(var L=P[R],M=P[R+1],O=0;O<I.length-1;O++)i.push(T(L,I[O],M,I[O+1]));else i.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:u+1}));return i}function kh(e,t,n){var r,i=0,a=f(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i+=Math.max(t,Math.min(n,o[1]))-Math.max(t,Math.min(n,o[0]))}}catch(s){a.e(s)}finally{a.f()}return i}function Sh(e,t,n){var r,i=[{fixed:-1,stretch:0}],a=f(e);try{for(a.s();!(r=a.n()).done;){var o=d(r.value,2),s=o[0],u=o[1],l=i[i.length-1];i.push({fixed:s-l.stretch,stretch:l.stretch}),i.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}}catch(c){a.e(c)}finally{a.f()}return i.push({fixed:t+1,stretch:n}),i}function Eh(e,t,n,r){return e/t*n+r}function Ah(e,t,n,r){return e-t*n/r}function Th(e,t,n,r){var i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}wh.loadGlyphRange=function(e,t,n,r,i){var a=256*t,o=a+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(o)),_e.Glyphs);ke(s,(function(e,t){if(e)i(e);else if(t){var n,r={},a=function(e){return new _f(e).readFields(zf,{})}(t),o=f(a.glyphs);try{for(o.s();!(n=o.n()).done;){var s=n.value;r[s.id]=s}}catch(u){o.e(u)}finally{o.f()}i(null,{glyphs:r,ascender:a.ascender,descender:a.descender})}}))},wh.TinySDF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fontSize,r=void 0===n?24:n,i=t.buffer,a=void 0===i?3:i,o=t.radius,s=void 0===o?8:o,u=t.cutoff,l=void 0===u?.25:u,c=t.fontFamily,d=void 0===c?"sans-serif":c,f=t.fontWeight,p=void 0===f?"normal":f,v=t.fontStyle,m=void 0===v?"normal":v;h(this,e),this.buffer=a,this.cutoff=l,this.radius=s;var g=this.size=r+4*a,y=this._createCanvas(g),_=this.ctx=y.getContext("2d",{willReadFrequently:!0});_.font="".concat(m," ").concat(p," ").concat(r,"px ").concat(d),_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(g*g),this.gridInner=new Float64Array(g*g),this.f=new Float64Array(g),this.z=new Float64Array(g+1),this.v=new Uint16Array(g)}return p(e,[{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return t.width=t.height=e,t}},{key:"draw",value:function(e){var t=this.ctx.measureText(e),n=t.width,r=t.actualBoundingBoxAscent,i=t.actualBoundingBoxDescent,a=t.actualBoundingBoxLeft,o=t.actualBoundingBoxRight,s=Math.ceil(r),u=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-a))),l=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=u+2*this.buffer,d=l+2*this.buffer,f=Math.max(c*d,0),h=new Uint8ClampedArray(f),p={data:h,width:c,height:d,glyphWidth:u,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:n};if(0===u||0===l)return p;var v=this.ctx,m=this.buffer,g=this.gridInner,y=this.gridOuter;v.clearRect(m,m,u,l),v.fillText(e,m,m+s);var _=v.getImageData(m,m,u,l);y.fill(gh,0,f),g.fill(0,0,f);for(var b=0;b<l;b++)for(var w=0;w<u;w++){var x=_.data[4*(b*u+w)+3]/255;if(0!==x){var k=(b+m)*c+w+m;if(1===x)y[k]=0,g[k]=gh;else{var S=.5-x;y[k]=S>0?S*S:0,g[k]=S<0?S*S:0}}}yh(y,0,0,c,d,c,this.f,this.v,this.z),yh(g,m,m,u,l,c,this.f,this.v,this.z);for(var E=0;E<f;E++){var A=Math.sqrt(y[E])-Math.sqrt(g[E]);h[E]=Math.round(255-255*(A/this.radius+this.cutoff))}return p}}]),e}();var Ch=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ph;if(h(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}return p(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,a=t[i];if(n(r,a)>=0)break;t[e]=a,e=i}t[e]=r}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&n(t[s],o)<0&&(a=s,o=t[s]),n(o,i)>=0)break;t[e]=o,e=a}t[e]=i}}]),e}();function Ph(e,t){return e<t?-1:e>t?1:0}function Ih(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,a=-1/0,o=-1/0,s=e[0],u=0;u<s.length;u++){var l=s[u];(!u||l.x<r)&&(r=l.x),(!u||l.y<i)&&(i=l.y),(!u||l.x>a)&&(a=l.x),(!u||l.y>o)&&(o=l.y)}var c=Math.min(a-r,o-i),d=c/2,f=new Ch([],Rh);if(0===c)return new C(r,i);for(var h=r;h<a;h+=c)for(var p=i;p<o;p+=c)f.push(new Lh(h+d,p+d,d,e));for(var v=function(e){for(var t=0,n=0,r=0,i=e[0],a=0,o=i.length,s=o-1;a<o;s=a++){var u=i[a],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,t+=3*c}return new Lh(n/t,r/t,0,e)}(e),m=f.length;f.length;){var g=f.pop();(g.d>v.d||!v.d)&&(v=g,n&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,m)),g.max-v.d<=t||(d=g.h/2,f.push(new Lh(g.p.x-d,g.p.y-d,d,e)),f.push(new Lh(g.p.x+d,g.p.y-d,d,e)),f.push(new Lh(g.p.x-d,g.p.y+d,d,e)),f.push(new Lh(g.p.x+d,g.p.y+d,d,e)),m+=4)}return n&&(console.log("num probes: ".concat(m)),console.log("best distance: ".concat(v.d))),v.p}function Rh(e,t){return t.max-e.max}function Lh(e,t,n,r){this.p=new C(e,t),this.h=n,this.d=function(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var a=t[i],o=0,s=a.length,u=s-1;o<s;u=o++){var l=a[o],c=a[u];l.y>e.y!=c.y>e.y&&e.x<(c.x-l.x)*(e.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,Gl(e,l,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var Mh=Number.POSITIVE_INFINITY,Oh=Math.sqrt(2);function Fh(e,t){var n=d(t,2),r=n[0],i=n[1],a=0,o=0;if(i===Mh){r<0&&(r=0);var s=r/Oh;switch(e){case"top-right":case"top-left":o=s-7;break;case"bottom-right":case"bottom-left":o=7-s;break;case"bottom":o=7-r;break;case"top":o=r-7}switch(e){case"top-right":case"bottom-right":a=-s;break;case"top-left":case"bottom-left":a=s;break;case"left":a=r;break;case"right":a=-r}}else{switch(r=Math.abs(r),i=Math.abs(i),e){case"top-right":case"top-left":case"top":o=i-7;break;case"bottom-right":case"bottom-left":case"bottom":o=7-i}switch(e){case"top-right":case"bottom-right":case"right":a=-r;break;case"top-left":case"bottom-left":case"left":a=r}}return[a,o]}function Dh(e,t,n,r,i,a,o,s,u,l){e.createArrays(),e.tilePixelRatio=Us/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var c=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,h={};if("composite"===e.textSizeData.kind){var p=e.textSizeData,v=p.minZoom,m=p.maxZoom;h.compositeTextSizes=[d["text-size"].possiblyEvaluate(new to(v),s),d["text-size"].possiblyEvaluate(new to(m),s)]}if("composite"===e.iconSizeData.kind){var g=e.iconSizeData,y=g.minZoom,_=g.maxZoom;h.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new to(y),s),d["icon-size"].possiblyEvaluate(new to(_),s)]}h.layoutTextSize=d["text-size"].possiblyEvaluate(new to(u+1),s),h.layoutIconSize=d["icon-size"].possiblyEvaluate(new to(u+1),s),h.textMaxSize=d["text-size"].possiblyEvaluate(new to(18),s);var b,w="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),x=c.get("text-size"),k=f(e.features);try{var S=function(){var a,u=b.value,d=c.get("text-font").evaluate(u,{},s).join(","),f=x.evaluate(u,{},s),p=h.layoutTextSize.evaluate(u,{},s),v=(h.layoutIconSize.evaluate(u,{},s),{horizontal:{},vertical:void 0}),m=u.text,g=[0,0];if(m){var y=m.toString(),_=c.get("text-letter-spacing").evaluate(u,{},s)*lf,k=c.get("text-line-height").evaluate(u,{},s)*lf,S=Da(y)?_:0,E=c.get("text-anchor").evaluate(u,{},s),A=c.get("text-variable-anchor");if(!A){var T=c.get("text-radial-offset").evaluate(u,{},s);g=T?Fh(E,[T*lf,Mh]):c.get("text-offset").evaluate(u,{},s).map((function(e){return e*lf}))}var C=w?"center":c.get("text-justify").evaluate(u,{},s),P="point"===c.get("symbol-placement"),I=P?c.get("text-max-width").evaluate(u,{},s)*lf:1/0,R=function(r){e.allowVerticalPlacement&&Fa(y)&&(v.vertical=Xf(m,t,n,i,d,I,k,E,r,S,g,qf.vertical,!0,p,f))};if(!w&&A){for(var L="auto"===C?A.map((function(e){return Nh(e)})):[C],M=!1,O=0;O<L.length;O++){var F=L[O];if(!v.horizontal[F])if(M)v.horizontal[F]=v.horizontal[0];else{var D=Xf(m,t,n,i,d,I,k,"center",F,S,g,qf.horizontal,!1,p,f);D&&(v.horizontal[F]=D,M=1===D.positionedLines.length)}}R("left")}else{if("auto"===C&&(C=Nh(E)),P||c.get("text-writing-mode").indexOf("horizontal")>=0||!Fa(y)){var N=Xf(m,t,n,i,d,I,k,E,C,S,g,qf.horizontal,!1,p,f);N&&(v.horizontal[C]=N)}R(P?"left":C)}}var j=!1;if(u.icon&&u.icon.name){var B=r[u.icon.name];B&&(a=oh(i[u.icon.name],c.get("icon-offset").evaluate(u,{},s),c.get("icon-anchor").evaluate(u,{},s)),j=B.sdf,void 0===e.sdfIcons?e.sdfIcons=B.sdf:e.sdfIcons!==B.sdf&&te("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(B.pixelRatio!==e.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var U=zh(v.horizontal)||v.vertical;e.iconsInText||(e.iconsInText=!!U&&U.iconsInText),(U||a)&&jh(e,u,v,a,r,h,p,0,g,j,o,s,l)};for(k.s();!(b=k.n()).done;)S()}catch(E){k.e(E)}finally{k.f()}a&&e.generateCollisionDebugBuffers(u,e.collisionBoxArray)}function Nh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jh(e,t,n,r,i,a,o,s,u,l,c,h,p){var v=a.textMaxSize.evaluate(t,{},h);void 0===v&&(v=o);var m,g,y=e.layers[0].layout,_=y.get("icon-offset").evaluate(t,{},h),b=zh(n.horizontal)||n.vertical,w="globe"===p.name,x=o/24,k=e.tilePixelRatio*v/24,S=(m=e.overscaling,e.zoom>18&&m>2&&(m>>=1),Math.max(Us/(512*m),1)*y.get("symbol-spacing")),E=y.get("text-padding")*e.tilePixelRatio,A=y.get("icon-padding")*e.tilePixelRatio,T=L(y.get("text-max-angle")),C="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement"),P="map"===y.get("icon-rotation-alignment")&&"point"!==y.get("symbol-placement"),I=y.get("symbol-placement"),R=S/2,M=y.get("icon-text-fit");r&&"none"!==M&&(e.allowVerticalPlacement&&n.vertical&&(g=sh(r,n.vertical,M,y.get("icon-text-fit-padding"),_,x)),b&&(r=sh(r,b,M,y.get("icon-text-fit-padding"),_,x)));var O=function(o,s,f){if(!(s.x<0||s.x>=Us||s.y<0||s.y>=Us)){var v=null;if(w){var m=p.projectTilePoint(s.x,s.y,f),y=m.x,b=m.y,x=m.z;v={anchor:new uh(y,b,x,0,void 0),up:p.upVector(f,s.x,s.y)}}!function(e,t,n,r,i,a,o,s,u,l,c,f,h,p,v,m,g,y,_,b,w,x,k,S,E){var A,T,C,P,I,R,L,M,O,F=e.addToLineVertexArray(t,r),D=0,N=0,j=0,B=0,U=-1,z=-1,V={},Z=as(""),H=n?n.anchor:t,W=0,G=0;if(void 0===u._unevaluatedLayout.getValue("text-radial-offset")?(A=u.layout.get("text-offset").evaluate(w,{},E).map((function(e){return e*lf})),W=(T=d(A,2))[0],G=T[1]):(W=u.layout.get("text-radial-offset").evaluate(w,{},E)*lf,G=Mh),e.allowVerticalPlacement&&i.vertical){var q=i.vertical;if(v)M=Zh(q),s&&(O=Zh(s));else{var K=u.layout.get("text-rotate").evaluate(w,{},E)+90;I=Vh(l,H,t,c,f,h,q,p,K,m),s&&(R=Vh(l,H,t,c,f,h,s,y,K))}}if(a){var J=u.layout.get("icon-rotate").evaluate(w,{},E),X="none"!==u.layout.get("icon-text-fit"),Y=xh(a,J,k,X),Q=s?xh(s,J,k,X):void 0;P=Vh(l,H,t,c,f,h,a,y,J),D=4*Y.length;var $=e.iconSizeData,ee=null;"source"===$.kind?(ee=[cf*u.layout.get("icon-size").evaluate(w,{},E)])[0]>Bh&&te("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===$.kind&&((ee=[cf*x.compositeIconSizes[0].evaluate(w,{},E),cf*x.compositeIconSizes[1].evaluate(w,{},E)])[0]>Bh||ee[1]>Bh)&&te("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,Y,ee,b,_,w,!1,n,t,F.lineStartIndex,F.lineLength,-1,S,E),U=e.icon.placedSymbolArray.length-1,Q&&(N=4*Q.length,e.addSymbols(e.icon,Q,ee,b,_,w,qf.vertical,n,t,F.lineStartIndex,F.lineLength,-1,S,E),z=e.icon.placedSymbolArray.length-1)}for(var ne in i.horizontal){var re=i.horizontal[ne];C||(Z=as(re.text),v?L=Zh(re):C=Vh(l,H,t,c,f,h,re,p,u.layout.get("text-rotate").evaluate(w,{},E),m));var ie=1===re.positionedLines.length;if(j+=Uh(e,n,t,re,o,u,v,w,m,F,i.vertical?qf.horizontal:qf.horizontalOnly,ie?Object.keys(i.horizontal):[ne],V,U,x,S,E),ie)break}i.vertical&&(B+=Uh(e,n,t,i.vertical,o,u,v,w,m,F,qf.vertical,["vertical"],V,z,x,S,E));var ae=-1,oe=function(e,t){return e?Math.max(e,t):t};ae=oe(L,ae),ae=oe(M,ae);var se=(ae=oe(O,ae))>-1?1:0;e.glyphOffsetArray.length>=xp.MAX_GLYPHS&&te("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,w.sortKey),e.symbolInstances.emplaceBack(H.x,H.y,H.z,t.x,t.y,V.right>=0?V.right:-1,V.center>=0?V.center:-1,V.left>=0?V.left:-1,V.vertical>=0?V.vertical:-1,U,z,Z,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,void 0!==I?I:e.collisionBoxArray.length,void 0!==I?I+1:e.collisionBoxArray.length,void 0!==P?P:e.collisionBoxArray.length,void 0!==P?P+1:e.collisionBoxArray.length,R||e.collisionBoxArray.length,R?R+1:e.collisionBoxArray.length,c,j,B,D,N,se,0,W,G,ae)}(e,s,v,o,n,r,i,g,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,E,C,u,0,A,P,_,t,a,l,c,h)}};if("line"===I){var F,D=f(mh(t.geometry,0,0,Us,Us));try{for(D.s();!(F=D.n()).done;){var N,j=F.value,B=ph(j,S,T,n.vertical||b,r,24,k,e.overscaling,Us),U=f(B);try{for(U.s();!(N=U.n()).done;){var z=N.value;b&&Hh(e,b.text,R,z)||O(j,z,h)}}catch(oe){U.e(oe)}finally{U.f()}}}catch(oe){D.e(oe)}finally{D.f()}}else if("line-center"===I){var V,Z=f(t.geometry);try{for(Z.s();!(V=Z.n()).done;){var H=V.value;if(H.length>1){var W=hh(H,T,n.vertical||b,r,24,k);W&&O(H,W,h)}}}catch(oe){Z.e(oe)}finally{Z.f()}}else if("Polygon"===t.type){var G,q=f(Jc(t.geometry,0));try{for(q.s();!(G=q.n()).done;){var K=G.value,J=Ih(K,16);O(K[0],new uh(J.x,J.y,0,0,void 0),h)}}catch(oe){q.e(oe)}finally{q.f()}}else if("LineString"===t.type){var X,Y=f(t.geometry);try{for(Y.s();!(X=Y.n()).done;){var Q=X.value;O(Q,new uh(Q[0].x,Q[0].y,0,0,void 0),h)}}catch(oe){Y.e(oe)}finally{Y.f()}}else if("Point"===t.type){var $,ee=f(t.geometry);try{for(ee.s();!($=ee.n()).done;){var ne,re=$.value,ie=f(re);try{for(ie.s();!(ne=ie.n()).done;){var ae=ne.value;O([ae],new uh(ae.x,ae.y,0,0,void 0),h)}}catch(oe){ie.e(oe)}finally{ie.f()}}}catch(oe){ee.e(oe)}finally{ee.f()}}}var Bh=32640;function Uh(e,t,n,r,i,o,s,u,l,d,h,p,v,m,g,y,_){var b=function(e,t,n,r,i,o,s,u){var l=[];if(0===t.positionedLines.length)return l;var d,h=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,p=function(e){var t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n),v=Math.abs(t.top-t.bottom),m=f(t.positionedLines);try{for(m.s();!(d=m.n()).done;)v-=d.value.lineOffset}catch(oe){m.e(oe)}finally{m.f()}for(var g=t.positionedLines.length,y=v/g,_=t.top-n[1],b=0;b<g;++b){var w=t.positionedLines[b];_=Th(t,y,_,b);var x,k=f(w.positionedGlyphs);try{for(k.s();!(x=k.n()).done;){var S=x.value;if(S.rect){var E=S.rect||{},A=4,T=!0,P=1,I=0;if(S.imageName){var R=s[S.imageName];if(!R)continue;if(R.sdf){te("SDF images are not supported in formatted text and will be ignored.");continue}T=!1,A=1/(P=R.pixelRatio)}var L=(i||u)&&S.vertical,M=S.metrics.advance*S.scale/2,O=S.metrics,F=S.rect;if(null!==F){u&&t.verticalizable&&(I=S.imageName?M-S.metrics.width*S.scale/2:0);var D=i?[S.x+M,S.y]:[0,0],N=[0,0],j=[0,0],B=!1;i||(L?(j=[S.x+M+p[0],S.y+p[1]-I],B=!0):N=[S.x+M+n[0],S.y+n[1]-I]);var U=F.w*S.scale/(P*(S.localGlyph?2:1)),z=F.h*S.scale/(P*(S.localGlyph?2:1)),V=void 0,Z=void 0,H=void 0,W=void 0;if(L){var G=S.y-_,q=new C(-M,M-G),K=-Math.PI/2,J=a(C,c(j));(V=new C(-M+N[0],N[1]))._rotateAround(K,q)._add(J),V.x+=-G+M,V.y-=(O.left-A)*S.scale;var X=S.imageName?O.advance*S.scale:lf*S.scale,Y=String.fromCharCode(S.glyph);gf(Y)?V.x+=(1-A)*S.scale:yf(Y)?V.x+=X-O.height*S.scale+(-A-1)*S.scale:V.x+=S.imageName||O.width+2*A===F.w&&O.height+2*A===F.h?(X-z)/2:(X-(O.height+2*A)*S.scale)/2,Z=new C(V.x,V.y-U),H=new C(V.x+z,V.y),W=new C(V.x+z,V.y-U)}else{var Q=(O.left-A)*S.scale-M+N[0],$=(-O.top-A)*S.scale+N[1],ee=Q+U,ne=$+z;V=new C(Q,$),Z=new C(ee,$),H=new C(Q,ne),W=new C(ee,ne)}if(h){var re=void 0;re=i?new C(0,0):B?new C(p[0],p[1]):new C(n[0],n[1]),V._rotateAround(h,re),Z._rotateAround(h,re),H._rotateAround(h,re),W._rotateAround(h,re)}var ie=new C(0,0),ae=new C(0,0);l.push({tl:V,tr:Z,bl:H,br:W,tex:E,writingMode:t.writingMode,glyphOffset:D,sectionIndex:S.sectionIndex,isSDF:T,pixelOffsetTL:ie,pixelOffsetBR:ae,minFontScaleX:0,minFontScaleY:0})}}}}catch(oe){k.e(oe)}finally{k.f()}}return l}(0,r,l,o,s,u,i,e.allowVerticalPlacement),w=e.textSizeData,x=null;"source"===w.kind?(x=[cf*o.layout.get("text-size").evaluate(u,{},_)])[0]>Bh&&te("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===w.kind&&((x=[cf*g.compositeTextSizes[0].evaluate(u,{},_),cf*g.compositeTextSizes[1].evaluate(u,{},_)])[0]>Bh||x[1]>Bh)&&te("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,b,x,l,s,u,h,t,n,d.lineStartIndex,d.lineLength,m,y,_);var k,S=f(p);try{for(S.s();!(k=S.n()).done;)v[k.value]=e.text.placedSymbolArray.length-1}catch(E){S.e(E)}finally{S.f()}return 4*b.length}function zh(e){for(var t in e)return e[t];return null}function Vh(e,t,n,r,i,a,o,s,u,l){var c=o.top,d=o.bottom,f=o.left,h=o.right,p=o.collisionPadding;if(p&&(f-=p[0],c-=p[1],h+=p[2],d+=p[3]),u){var v=new C(f,c),m=new C(h,c),g=new C(f,d),y=new C(h,d),_=L(u),b=new C(0,0);l&&(b=new C(l[0],l[1])),v._rotateAround(_,b),m._rotateAround(_,b),g._rotateAround(_,b),y._rotateAround(_,b),f=Math.min(v.x,m.x,g.x,y.x),h=Math.max(v.x,m.x,g.x,y.x),c=Math.min(v.y,m.y,g.y,y.y),d=Math.max(v.y,m.y,g.y,y.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,f,c,h,d,s,r,i,a),e.length-1}function Zh(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);var t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Hh(e,t,n,r){var i=e.compareText;if(t in i){for(var a=i[t],o=a.length-1;o>=0;o--)if(r.dist(a[o])<n)return!0}else i[t]=[];return i[t].push(r),!1}function Wh(e,t){var n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),a=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),o=Math.sin(e._pitch)*a+i;return Math.min(1.01*o,i*(1/e._horizonShift))}function Gh(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};var n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,a=e.y*n,o=(e.y+1)*n,s=wl(r),u=wl(i),l=xl(a),c=xl(o),d=t.project(s,l),f=t.project(u,l),h=t.project(u,c),p=t.project(s,c),v=Math.min(d.x,f.x,h.x,p.x),m=Math.min(d.y,f.y,h.y,p.y),g=Math.max(d.x,f.x,h.x,p.x),y=Math.max(d.y,f.y,h.y,p.y),_=n/16;function b(e,n,r,i,a,o){var s=(r+a)/2,u=(i+o)/2,l=t.project(wl(s),xl(u)),c=Math.max(0,v-l.x,m-l.y,l.x-g,l.y-y);v=Math.min(v,l.x),g=Math.max(g,l.x),m=Math.min(m,l.y),y=Math.max(y,l.y),c>_&&(b(e,l,r,i,s,u),b(l,n,s,u,a,o))}b(d,f,r,a,i,a),b(f,h,i,a,i,o),b(h,p,i,o,r,o),b(p,d,r,o,r,a),v-=_,m-=_,g+=_,y+=_;var w=1/Math.max(g-v,y-m);return{scale:w,x:v*w,y:m*w,x2:g*w,y2:y*w,projection:t}}var qh=Gs(new Float32Array(16)),Kh=function(){function e(t){h(this,e),this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}return p(e,[{key:"project",value:function(e,t){return{x:0,y:0,z:0}}},{key:"unproject",value:function(e,t){return new ml(0,0)}},{key:"projectTilePoint",value:function(e,t,n){return{x:e,y:t,z:0}}},{key:"locationPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._coordinatePoint(e.locationCoordinate(t),n)}},{key:"pixelsPerMeter",value:function(e,t){return bl(1,e)*t}},{key:"pixelSpaceConversion",value:function(e,t,n){return 1}},{key:"farthestPixelDistance",value:function(e){return Wh(e,e.pixelsPerMeter)}},{key:"pointCoordinate",value:function(e,t,n,r){var i=e.horizonLineFromTop(!1),a=new C(t,Math.max(i,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,r))}},{key:"pointCoordinate3D",value:function(e,t,n){var r=new C(t,n);if(e.elevation)return e.elevation.pointCoordinate(r);var i=this.pointCoordinate(e,r.x,r.y,0);return[i.x,i.y,i.z]}},{key:"isPointAboveHorizon",value:function(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);var n=e.horizonLineFromTop();return t.y<n}},{key:"createInversionMatrix",value:function(e,t){return qh}},{key:"createTileMatrix",value:function(e,t,n){var r,i,a,o=n.canonical,s=Gs(new Float64Array(16));if(this.isReprojectedInTileSpace){var u=Gh(o,this);r=1,i=u.x+n.wrap*u.scale,a=u.y,Xs(s,s,[r/u.scale,r/u.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(o.z),i=(o.x+Math.pow(2,o.z)*n.wrap)*r,a=o.y*r;return Js(s,s,[i,a,0]),Xs(s,s,[r/Us,r/Us,1]),s}},{key:"upVector",value:function(e,t,n){return[0,0,1]}},{key:"upVectorScale",value:function(e,t,n){return{metersToTile:1}}}]),e}(),Jh=function(e){v(n,e);var t=m(n);function n(e){var r;h(this,n),(r=t.call(this,e)).range=[4,7],r.center=e.center||[-96,37.5];var i=r.parallels=e.parallels||[29.5,45.5],a=d(i,2),o=a[0],s=a[1],u=Math.sin(L(o));return r.n=(u+Math.sin(L(s)))/2,r.c=1+u*(2*r.n-u),r.r0=Math.sqrt(r.c)/r.n,r}return p(n,[{key:"project",value:function(e,t){var n=this.n,r=this.c,i=this.r0,a=L(e-this.center[0]),o=L(t),s=Math.sqrt(r-2*n*Math.sin(o))/n;return{x:s*Math.sin(a*n),y:s*Math.cos(a*n)-i,z:0}}},{key:"unproject",value:function(e,t){var n=this.n,r=this.c,i=this.r0+t,a=Math.atan2(e,Math.abs(i))*Math.sign(i);i*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(i));var o=L(this.center[0])*n,s=j(M((a=U(a,-Math.PI-o,Math.PI-o))/n)+this.center[0],-180,180),u=Math.asin(j((r-(e*e+i*i)*n*n)/(2*n),-1,1)),l=j(M(u),-Sl,Sl);return new ml(s,l)}}]),n}(Kh),Xh=1.340264,Yh=-.081106,Qh=893e-6,$h=.003796,ep=Math.sqrt(3)/2,tp=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"project",value:function(e,t){t=t/180*Math.PI,e=e/180*Math.PI;var n=Math.asin(ep*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(ep*(Xh+3*Yh*r+i*(7*Qh+9*$h*r)))/Math.PI+.5),y:1-.5*(n*(Xh+Yh*r+i*(Qh+$h*r))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;for(var n,r=t=(2*(1-t)-1)*Math.PI,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r=j(r-(n=(r*(Xh+Yh*i+a*(Qh+$h*i))-t)/(Xh+3*Yh*i+a*(7*Qh+9*$h*i))),-Math.PI/3,Math.PI/3))*r)*i*i,!(Math.abs(n)<1e-12));++o);var s=ep*e*(Xh+3*Yh*i+a*(7*Qh+9*$h*i))/Math.cos(r),u=Math.asin(Math.sin(r)/ep),l=j(180*s/Math.PI,-180,180),c=j(180*u/Math.PI,-Sl,Sl);return new ml(l,c)}}]),n}(Kh),np=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).wrap=!0,r.supportsWorldCopies=!0,r}return p(n,[{key:"project",value:function(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}},{key:"unproject",value:function(e,t){var n=360*(e-.5),r=j(360*(.5-t),-Sl,Sl);return new ml(n,r)}}]),n}(Kh),rp=Math.PI/2;function ip(e){return Math.tan((rp+e)/2)}var ap=function(e){v(n,e);var t=m(n);function n(e){var r;h(this,n),(r=t.call(this,e)).center=e.center||[0,30];var i=r.parallels=e.parallels||[30,30],a=d(i,2),o=a[0],s=a[1],u=L(o),l=L(s);r.southernCenter=u+l<0,r.southernCenter&&(u=-u,l=-l);var c=Math.cos(u),f=ip(u);return r.n=u===l?Math.sin(u):Math.log(c/Math.cos(l))/Math.log(ip(l)/f),r.f=c*Math.pow(ip(u),r.n)/r.n,r}return p(n,[{key:"project",value:function(e,t){t=L(t),this.southernCenter&&(t=-t),e=L(e-this.center[0]);var n=1e-6,r=this.n,i=this.f;i>0?t<-rp+n&&(t=-rp+n):t>rp-n&&(t=rp-n);var a=i/Math.pow(ip(t),r),o=a*Math.sin(r*e),s=i-a*Math.cos(r*e);return o=.5*(o/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:o,y:this.southernCenter?s:1-s,z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;var n=this.n,r=this.f,i=r-t,a=Math.sign(i),o=Math.sign(n)*Math.sqrt(e*e+i*i),s=Math.atan2(e,Math.abs(i))*a;i*n<0&&(s-=Math.PI*Math.sign(e)*a);var u=j(M(s/n)+this.center[0],-180,180),l=j(M(2*Math.atan(Math.pow(r/o,1/n))-rp),-Sl,Sl);return new ml(u,this.southernCenter?-l:l)}}]),n}(Kh),op=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).wrap=!0,r.supportsWorldCopies=!0,r.supportsTerrain=!0,r.supportsFog=!0,r.supportsFreeCamera=!0,r.isReprojectedInTileSpace=!1,r.unsupportedLayers=[],r.range=null,r}return p(n,[{key:"project",value:function(e,t){return{x:yl(e),y:_l(t),z:0}}},{key:"unproject",value:function(e,t){var n=wl(e),r=xl(t);return new ml(n,r)}}]),n}(Kh),sp=L(Sl),up=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"project",value:function(e,t){var n=(t=L(t))*t,r=n*n;return{x:.5*((e=L(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;var n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,a=n*n;do{var o=(a=n*n)*a;n=j(n-(i=(n*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))),-sp,sp)}while(Math.abs(i)>1e-6&&--r>0);var s=j(M(e/(.8707+(a=n*n)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),u=M(n);return new ml(s,u)}}]),n}(Kh),lp=L(Sl),cp=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"project",value:function(e,t){t=L(t),e=L(e);var n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),a=Math.sin(i)/i,o=.5*(e*r+2*n*Math.sin(e/2)/a)||0,s=.5*(t+Math.sin(t)/a)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){var n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25,a=1e-6,o=0,s=0;do{var u=Math.cos(r),l=Math.sin(r),c=2*l*u,d=l*l,f=u*u,h=Math.cos(n/2),p=Math.sin(n/2),v=2*h*p,m=p*p,g=1-f*h*h,y=g?1/g:0,_=g?Math.acos(u*h)*Math.sqrt(1/g):0,b=.5*(2*_*u*p+2*n/Math.PI)-e,w=.5*(_*l+r)-t,x=.5*y*(f*m+_*u*h*d)+1/Math.PI,k=y*(v*c/4-_*l*p),S=.125*y*(c*p-_*l*f*v),E=.5*y*(d*h+_*m*u)+.5,A=k*S-E*x;s=(b*S-w*x)/A,n=j(n-(o=(w*k-b*E)/A),-Math.PI,Math.PI),r=j(r-s,-lp,lp)}while((Math.abs(o)>a||Math.abs(s)>a)&&--i>0);return new ml(M(n),M(r))}}]),n}(Kh),dp=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).center=e.center||[0,0],r.parallels=e.parallels||[0,0],r.cosPhi=Math.max(.01,Math.cos(L(r.parallels[0]))),r.scale=1/(2*Math.max(Math.PI*r.cosPhi,1/r.cosPhi)),r.wrap=!0,r.supportsWorldCopies=!0,r}return p(n,[{key:"project",value:function(e,t){var n=this.scale,r=this.cosPhi;return{x:L(e)*r*n+.5,y:-Math.sin(L(t))/r*n+.5,z:0}}},{key:"unproject",value:function(e,t){var n=this.scale,r=this.cosPhi,i=-(t-.5)/n,a=j(M((e-.5)/n)/r,-180,180),o=Math.asin(j(i*r,-1,1)),s=j(M(o),-Sl,Sl);return new ml(a,s)}}]),n}(Kh),fp=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).requiresDraping=!0,r.supportsWorldCopies=!1,r.supportsFog=!0,r.zAxisUnit="pixels",r.unsupportedLayers=["debug"],r.range=[3,5],r}return p(n,[{key:"projectTilePoint",value:function(e,t,n){var r=nl(e,t,n);return mu(r,r,al(qu(n))),{x:r[0],y:r[1],z:r[2]}}},{key:"locationPoint",value:function(e,t){var n=tl(t.lat,t.lng),r=hu([],n),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;fu(n,n,r,bl(1,0)*Us*i);var a=Gs(new Float64Array(16));return Ks(a,e.pixelMatrix,e.globeMatrix),mu(n,n,a),new C(n[0],n[1])}},{key:"pixelsPerMeter",value:function(e,t){return bl(1,0)*t}},{key:"pixelSpaceConversion",value:function(e,t,n){var r=bl(1,e)*t,i=Vn(bl(1,45)*t,r,n);return this.pixelsPerMeter(e,t)/i}},{key:"createTileMatrix",value:function(e,t,n){var r=ol(qu(n.canonical));return Ks(new Float64Array(16),e.globeMatrix,r)}},{key:"createInversionMatrix",value:function(e,t){var n=e.center,r=al(qu(t));return Qs(r,r,L(n.lng)),Ys(r,r,L(n.lat)),Xs(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}},{key:"pointCoordinate",value:function(e,t,n,r){return Hu(e,t,n,!0)||new Al(0,0)}},{key:"pointCoordinate3D",value:function(e,t,n){var r=this.pointCoordinate(e,t,n,0);return[r.x,r.y,r.z]}},{key:"isPointAboveHorizon",value:function(e,t){return!Hu(e,t.x,t.y,!1)}},{key:"farthestPixelDistance",value:function(e){var t=function(e,t){var n,r=e.cameraToCenterDistance,i=e._centerAltitude*t,a=e._camera,o=e._camera.forward(),s=ou([],du([],o,-r),[0,0,i]),u=e.worldSize/(2*Math.PI),l=[0,0,-u],c=e.width/e.height,d=Math.tan(e.fovAboveCenter),f=du([],a.up(),d),h=du([],a.right(),d*c),p=hu([],ou([],ou([],o,f),h)),v=[];if(new Mu(s,p).closestPointOnSphere(l,u,v)){var m=ou([],v,l),g=_u([],m,s);n=Math.cos(e.fovAboveCenter)*iu(g)}else{var y=_u([],s,l),_=_u([],l,s);hu(_,_);var b=iu(y)-u;n=Math.sqrt(b*(b+2*u));var w=Math.acos(n/(u+b))-Math.acos(pu(o,_));n*=Math.cos(w)}return 1.01*n}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=ul(e.zoom);if(n>0){var r=Wh(e,bl(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),a=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Vn(t,r+i*(1-Math.cos(a)),Math.pow(n,10))}return t}},{key:"upVector",value:function(e,t,n){return nl(t,n,e,1)}},{key:"upVectorScale",value:function(e){return{metersToTile:Zu(rl(qu(e)))}}}]),n}(op);function hp(e){var t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new op(e);case"equirectangular":return new np(e);case"naturalEarth":return new up(e);case"equalEarth":return new tp(e);case"winkelTripel":return new cp(e);case"albers":return n?new dp(e):new Jh(e);case"lambertConformalConic":return n?new dp(e):new ap(e);case"globe":return new fp(e)}throw new Error("Invalid projection name: ".concat(e.name))}var pp=_d.types,vp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mp(e,t,n,r,i,a,o,s,u,l,c,d,f){var h=s?Math.min(Bh,Math.round(s[0])):0,p=s?Math.min(Bh,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),a,o,(h<<1)+(u?1:0),p,16*l,16*c,256*d,256*f)}function gp(e,t,n,r,i,a,o){e.emplaceBack(t,n,r,i,a,o)}function yp(e,t,n,r,i){e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i)}function _p(e){var t,n=f(e.sections);try{for(n.s();!(t=n.n()).done;)if(Va(t.value.text))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var bp=function(){function e(t){h(this,e),this.layoutVertexArray=new Po,this.indexArray=new No,this.programConfigurations=t,this.segments=new Bs,this.dynamicLayoutVertexArray=new Eo,this.opacityVertexArray=new Ro,this.placedSymbolArray=new Jo,this.globeExtVertexArray=new Io}return p(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,tf.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,rf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,vp,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,nf.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}]),e}();na(bp,"SymbolBuffers");var wp=function(){function e(t,n,r){h(this,e),this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new r,this.segments=new Bs,this.collisionVertexArray=new Fo,this.collisionVertexArrayExt=new Do}return p(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,af.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,of.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();na(wp,"CollisionBuffers");var xp=function(){function e(t){h(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Gs([]),this.placementViewportMatrix=Gs([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=df(this.zoom,n["text-size"]),this.iconSizeData=df(this.zoom,n["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),a=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((function(e){return qf[e]})),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID,this.projection=t.projection}return p(e,[{key:"createArrays",value:function(){this.text=new bp(new Ps(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new bp(new Ps(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new Qo,this.lineVertexArray=new $o,this.symbolInstances=new Yo}},{key:"calculateGlyphDependencies",value:function(e,t,n,r,i){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,r&&i){var o=mf[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,n,r){var i=this,a=this.layers[0],o=a.layout,s="globe"===this.projection.name,u=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),d=("constant"!==l.value.kind||l.value.value instanceof Ht&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==u.value.kind||u.value.value.length>0),h="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,p=o.get("symbol-sort-key");if(this.features=[],d||h){var v,m=t.iconDependencies,g=t.glyphDependencies,y=t.availableImages,_=new to(this.zoom),b=f(e);try{var w=function(){var e,t,l=v.value,c=l.feature,b=l.id,w=l.index,x=l.sourceLayerIndex,k=a._featureFilter.needGeometry,S=Fl(c,k);if(!a._featureFilter.filter(_,S,n))return"continue";if(k||(S.geometry=Ol(c,n,r)),s&&1!==c.type&&n.z<=5)for(var E=S.geometry,A=.98078528056,T=function(e,t){return pu(nl(e.x,e.y,n,1),nl(t.x,t.y,n,1))<A},C=0;C<E.length;C++)E[C]=Il(E[C],T);if(d){var P=a.getValueAndResolveTokens("text-field",S,n,y),I=Ht.factory(P);_p(I)&&(i.hasRTLText=!0),(!i.hasRTLText||"unavailable"===Qa()||i.hasRTLText&&eo.isParsed())&&(e=vf(I,a,S))}if(h){var R=a.getValueAndResolveTokens("icon-image",S,n,y);t=R instanceof Wt?R:Wt.fromString(R)}if(!e&&!t)return"continue";var L=i.sortFeaturesByKey?p.evaluate(S,{},n):void 0;if(i.features.push({id:b,text:e,icon:t,index:w,sourceLayerIndex:x,geometry:S.geometry,properties:c.properties,type:pp[c.type],sortKey:L}),t&&(m[t.name]=!0),e){var M=u.evaluate(S,{},n).join(","),O="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");i.allowVerticalPlacement=i.writingModes&&i.writingModes.indexOf(qf.vertical)>=0;var F,D=f(e.sections);try{for(D.s();!(F=D.n()).done;){var N=F.value;if(N.image)m[N.image.name]=!0;else{var j=Fa(e.toString()),B=N.fontStack||M,U=g[B]=g[B]||{};i.calculateGlyphDependencies(N.text,U,O,i.allowVerticalPlacement,j)}}}catch(z){D.e(z)}finally{D.f()}}};for(b.s();!(v=b.n()).done;)w()}catch(x){b.e(x)}finally{b.f()}"line"===o.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function a(t){r.push(e[t]),i++}function o(e,t,i){var a=n[e];return delete n[e],n[t]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function s(e,n,i){var a=t[n];return delete t[n],t[e]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(r.x,":").concat(r.y)}for(var l=0;l<e.length;l++){var c=e[l],d=c.geometry,f=c.text?c.text.toString():null;if(f){var h=u(f,d),p=u(f,d,!0);if(h in n&&p in t&&n[h]!==t[p]){var v=s(h,p,d),m=o(h,p,r[v].geometry);delete t[h],delete n[p],n[u(f,r[m].geometry,!0)]=m,r[v].geometry=null}else h in n?o(h,p,d):p in t?s(h,p,d):(a(l),t[h]=i-1,n[p]=i-1)}else a(l)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"getProjection",value:function(){return this.projectionInstance||(this.projectionInstance=hp(this.projection)),this.projectionInstance}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.x,s=a.y;this.lineVertexArray.emplaceBack(o,s)}}catch(u){i.e(u)}finally{i.f()}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,t,n,r,i,a,o,s,u,l,c,f,h,p){for(var v=e.indexArray,m=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,m,v,this.canOverlap?a.sortKey:void 0),_=this.glyphOffsetArray.length,b=y.vertexLength,w=this.allowVerticalPlacement&&o===qf.vertical?Math.PI/2:0,x=a.text&&a.text.sections,k=0;k<t.length;k++){var S=t[k],E=S.tl,A=S.tr,T=S.bl,C=S.br,P=S.tex,I=S.pixelOffsetTL,R=S.pixelOffsetBR,L=S.minFontScaleX,M=S.minFontScaleY,O=S.glyphOffset,F=S.isSDF,D=S.sectionIndex,N=y.vertexLength,j=O[1];if(mp(m,u.x,u.y,E.x,j+E.y,P.x,P.y,n,F,I.x,I.y,L,M),mp(m,u.x,u.y,A.x,j+A.y,P.x+P.w,P.y,n,F,R.x,I.y,L,M),mp(m,u.x,u.y,T.x,j+T.y,P.x,P.y+P.h,n,F,I.x,R.y,L,M),mp(m,u.x,u.y,C.x,j+C.y,P.x+P.w,P.y+P.h,n,F,R.x,R.y,L,M),s){var B=s.anchor,U=B.x,z=B.y,V=B.z,Z=d(s.up,3),H=Z[0],W=Z[1],G=Z[2];gp(g,U,z,V,H,W,G),gp(g,U,z,V,H,W,G),gp(g,U,z,V,H,W,G),gp(g,U,z,V,H,W,G),yp(e.dynamicLayoutVertexArray,U,z,V,w)}else yp(e.dynamicLayoutVertexArray,u.x,u.y,u.z,w);v.emplaceBack(N,N+1,N+2),v.emplaceBack(N+1,N+2,N+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(O[0]),k!==t.length-1&&D===t[k+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},h,p,x&&x[D])}var q=s?s.anchor:u;e.placedSymbolArray.emplaceBack(q.x,q.y,q.z,u.x,u.y,_,this.glyphOffsetArray.length-_,b,l,c,u.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],o,0,!1,0,f,0)}},{key:"_commitLayoutVertex",value:function(e,t,n,r,i,a,o){e.emplaceBack(t,n,r,i,a,Math.round(o.x),Math.round(o.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,n,r,i,a,o){for(var s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),u=s.vertexLength,l=o.tileAnchorX,c=o.tileAnchorY,d=0;d<4;d++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,l,c,new C(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,l,c,new C(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,l,c,new C(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,l,c,new C(e.x1,e.y2)),s.vertexLength+=4;var f=n.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),s.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),u=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(s,u,this.textCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),u=this.getSymbolInstanceIconSize(e,t,a.placedIconSymbolIndex);this._addCollisionDebugVertices(s,u,this.iconCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wp(Mo,sf.members,Zo),this.iconCollisionBox=new wp(Mo,sf.members,Zo);for(var n=hf(this.iconSizeData,e),r=hf(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,n,r){var i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),a=ff(this.textSizeData,e,i)/lf;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,n){var r=this.icon.placedSymbolArray.get(n),i=ff(this.iconSizeData,e,r);return this.tilePixelRatio*i}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),u=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,u,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),u=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,u,s.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=hf(this.iconSizeData,e),r=hf(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,n,r,i,a,o,s,u){var l={};if(t<n){var c=e.get(t),d=c.x1,f=c.y1,h=c.x2,p=c.y2,v=c.padding,m=c.projectedAnchorX,g=c.projectedAnchorY,y=c.projectedAnchorZ,_=c.tileAnchorX,b=c.tileAnchorY,w=c.featureIndex;l.textBox={x1:d,y1:f,x2:h,y2:p,padding:v,projectedAnchorX:m,projectedAnchorY:g,projectedAnchorZ:y,tileAnchorX:_,tileAnchorY:b},l.textFeatureIndex=w}if(r<i){var x=e.get(r),k=x.x1,S=x.y1,E=x.x2,A=x.y2,T=x.padding,C=x.projectedAnchorX,P=x.projectedAnchorY,I=x.projectedAnchorZ,R=x.tileAnchorX,L=x.tileAnchorY,M=x.featureIndex;l.verticalTextBox={x1:k,y1:S,x2:E,y2:A,padding:T,projectedAnchorX:C,projectedAnchorY:P,projectedAnchorZ:I,tileAnchorX:R,tileAnchorY:L},l.verticalTextFeatureIndex=M}if(a<o){var O=e.get(a),F=O.x1,D=O.y1,N=O.x2,j=O.y2,B=O.padding,U=O.projectedAnchorX,z=O.projectedAnchorY,V=O.projectedAnchorZ,Z=O.tileAnchorX,H=O.tileAnchorY,W=O.featureIndex;l.iconBox={x1:F,y1:D,x2:N,y2:j,padding:B,projectedAnchorX:U,projectedAnchorY:z,projectedAnchorZ:V,tileAnchorX:Z,tileAnchorY:H},l.iconFeatureIndex=W}if(s<u){var G=e.get(s),q=G.x1,K=G.y1,J=G.x2,X=G.y2,Y=G.padding,Q=G.projectedAnchorX,$=G.projectedAnchorY,ee=G.projectedAnchorZ,te=G.tileAnchorX,ne=G.tileAnchorY,re=G.featureIndex;l.verticalIconBox={x1:q,y1:K,x2:J,y2:X,padding:Y,projectedAnchorX:Q,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:te,tileAnchorY:ne},l.verticalIconFeatureIndex=re}return l}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(t*s.tileAnchorX+n*s.tileAnchorY)),i.push(s.featureIndex)}return a.sort((function(e,t){return r[e]-r[t]||i[t]-i[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var t,n=f(this.symbolInstanceIndexes);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this.symbolInstances.get(r);this.featureSortOrder.push(i.featureIndex);var a=i.rightJustifiedTextSymbolIndex,o=i.centerJustifiedTextSymbolIndex,s=i.leftJustifiedTextSymbolIndex,u=i.verticalPlacedTextSymbolIndex,l=i.placedIconSymbolIndex,c=i.verticalPlacedIconSymbolIndex;a>=0&&this.addIndicesForPlacedSymbol(this.text,a),o>=0&&o!==a&&this.addIndicesForPlacedSymbol(this.text,o),s>=0&&s!==o&&s!==a&&this.addIndicesForPlacedSymbol(this.text,s),u>=0&&this.addIndicesForPlacedSymbol(this.text,u),l>=0&&this.addIndicesForPlacedSymbol(this.icon,l),c>=0&&this.addIndicesForPlacedSymbol(this.icon,c)}}catch(d){n.e(d)}finally{n.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();na(xp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),xp.MAX_GLYPHS=65535,xp.addDynamicAttributes=yp;var kp=new po({"symbol-placement":new co(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new co(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new co(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new fo(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new co(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new co(ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new co(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new co(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new co(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new fo(ct.layout_symbol["icon-size"]),"icon-text-fit":new co(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new co(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new fo(ct.layout_symbol["icon-image"]),"icon-rotate":new fo(ct.layout_symbol["icon-rotate"]),"icon-padding":new co(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new co(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new fo(ct.layout_symbol["icon-offset"]),"icon-anchor":new fo(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new co(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new co(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new co(ct.layout_symbol["text-rotation-alignment"]),"text-field":new fo(ct.layout_symbol["text-field"]),"text-font":new fo(ct.layout_symbol["text-font"]),"text-size":new fo(ct.layout_symbol["text-size"]),"text-max-width":new fo(ct.layout_symbol["text-max-width"]),"text-line-height":new fo(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new fo(ct.layout_symbol["text-letter-spacing"]),"text-justify":new fo(ct.layout_symbol["text-justify"]),"text-radial-offset":new fo(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new co(ct.layout_symbol["text-variable-anchor"]),"text-anchor":new fo(ct.layout_symbol["text-anchor"]),"text-max-angle":new co(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new co(ct.layout_symbol["text-writing-mode"]),"text-rotate":new fo(ct.layout_symbol["text-rotate"]),"text-padding":new co(ct.layout_symbol["text-padding"]),"text-keep-upright":new co(ct.layout_symbol["text-keep-upright"]),"text-transform":new fo(ct.layout_symbol["text-transform"]),"text-offset":new fo(ct.layout_symbol["text-offset"]),"text-allow-overlap":new co(ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new co(ct.layout_symbol["text-ignore-placement"]),"text-optional":new co(ct.layout_symbol["text-optional"])}),Sp={paint:new po({"icon-opacity":new fo(ct.paint_symbol["icon-opacity"]),"icon-color":new fo(ct.paint_symbol["icon-color"]),"icon-halo-color":new fo(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new fo(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fo(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new co(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new co(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new fo(ct.paint_symbol["text-opacity"]),"text-color":new fo(ct.paint_symbol["text-color"],{runtimeType:xt,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new fo(ct.paint_symbol["text-halo-color"]),"text-halo-width":new fo(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new fo(ct.paint_symbol["text-halo-blur"]),"text-translate":new co(ct.paint_symbol["text-translate"]),"text-translate-anchor":new co(ct.paint_symbol["text-translate-anchor"])}),layout:kp},Ep=function(){function e(t){h(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:yt,this.defaultValue=t}return p(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();na(Ep,"FormatSectionOverride",{omit:["defaultValue"]});var Ap=function(e){v(n,e);var t=m(n);function n(e){return h(this,n),t.call(this,e,Sp)}return p(n,[{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));var r=this.layout.get("text-writing-mode");if(r){var i,a=[],u=f(r);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.indexOf(l)<0&&a.push(l)}}catch(c){u.e(c)}finally{u.f()}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,n,r){var i=this.layout.get(e).evaluate(t,{},n,r),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||ii(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,i)}},{key:"createBucket",value:function(e){return new xp(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=f(Sp.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(n.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),a=new Ep(i),o=new ri(a,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new oi("source",o):new si("composite",o,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new uo(i.property,s,i.parameters)}}}catch(u){t.e(u)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&n.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new Cs(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var n=e.get("text-field"),r=Sp.paint.properties[t],i=!1,a=function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(r.overrides&&r.overrides.hasOverride(a))return void(i=!0)}}catch(o){n.e(o)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof Ht)a(n.value.value.sections);else if("source"===n.value.kind){var o=function e(t){i||(t instanceof Yt&&Kt(t.value)===At?a(t.value.sections):t instanceof nn?a(t.sections):t.eachChild(e))},s=n.value;s._styleExpression&&o(s._styleExpression.expression)}return i}}]),n}(Ds),Tp={paint:new po({"background-color":new co(ct.paint_background["background-color"]),"background-pattern":new co(ct.paint_background["background-pattern"]),"background-opacity":new co(ct.paint_background["background-opacity"])})},Cp={paint:new po({"raster-opacity":new co(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new co(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new co(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new co(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new co(ct.paint_raster["raster-saturation"]),"raster-contrast":new co(ct.paint_raster["raster-contrast"]),"raster-resampling":new co(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new co(ct.paint_raster["raster-fade-duration"])})},Pp=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e,{})).implementation=e,r}return p(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"isLayerDraped",value:function(){return void 0!==this.implementation.renderToTile}},{key:"shouldRedrape",value:function(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),n}(Ds),Ip={paint:new po({"sky-type":new co(ct.paint_sky["sky-type"]),"sky-atmosphere-sun":new co(ct.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new co(ct.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new co(ct.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new co(ct.paint_sky["sky-gradient-radius"]),"sky-gradient":new ho(ct.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new co(ct.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new co(ct.paint_sky["sky-atmosphere-color"]),"sky-opacity":new co(ct.paint_sky["sky-opacity"])})};function Rp(e,t,n){var r=[0,0,1],i=Au([]);return Cu(i,i,n?-L(e)+Math.PI:L(e)),Tu(i,i,-L(t)),gu(r,r,i),hu(r,r)}for(var Lp={circle:function(e){v(n,e);var t=m(n);function n(e){return h(this,n),t.call(this,e,nc)}return p(n,[{key:"createBucket",value:function(e){return new jl(e)}},{key:"queryRadius",value:function(e){var t=e;return Yl("circle-radius",this,t)+Yl("circle-stroke-width",this,t)+Ql(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s){var u=ec(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),l=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return rc(e,r,a,o,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),u,l)}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new Cs(this,e)}}]),n}(Ds),heatmap:function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e,pc))._updateColorRamp(),r}return p(n,[{key:"createBucket",value:function(e){return new uc(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=vc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(e){return Yl("heatmap-radius",this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s){var u=this.paint.get("heatmap-radius").evaluate(t,n);return rc(e,r,a,o,s,!0,!0,new C(0,0),u)}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new Cs(this,e)}}]),n}(Ds),hillshade:function(e){v(n,e);var t=m(n);function n(e){return h(this,n),t.call(this,e,mc)}return p(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}}]),n}(Ds),fill:function(e){v(n,e);var t=m(n);function n(e){return h(this,n),t.call(this,e,td)}return p(n,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(e){return new Cs(this,e)}},{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new $c(e)}},{key:"queryRadius",value:function(){return Ql(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){return!e.queryGeometry.isAboveHorizon&&zl($l(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),r)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Ds),"fill-extrusion":function(e){v(n,e);var t=m(n);function n(e){return h(this,n),t.call(this,e,Dd)}return p(n,[{key:"createBucket",value:function(e){return new Ad(e)}},{key:"queryRadius",value:function(){return Ql(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new Cs(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s,u){var l=ec(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),p=[0,0],v=s&&a.elevation,m=a.elevation?a.elevation.exaggeration():1,g=e.tile.getBucket(this);if(v&&g instanceof Ad){var y=g.centroidVertexArray,_=u+1;_<y.length&&(p[0]=y.geta_centroid_pos0(_),p[1]=y.geta_centroid_pos1(_))}if(0===p[0]&&1===p[1])return!1;"globe"===a.projection.name&&(r=Od([r],[new C(0,0),new C(Us,Us)],e.tileID.canonical).map((function(e){return e.polygon})).flat());var b=function(e,t,n,r,i,a,o,s,u,l,c){return"globe"===e.projection.name?function(e,t,n,r,i,a,o,s,u,l,c){var d=[],h=[],p=e.projection.upVectorScale(c,e.center.lat,e.worldSize).metersToTile,v=[0,0,0,1],m=[0,0,0,1],g=function(e,t,n,r){e[0]=t,e[1]=n,e[2]=r,e[3]=1},y=Md();n>0&&(n+=y),r+=y;var _,b=f(t);try{for(b.s();!(_=b.n()).done;){var w,x=_.value,k=[],S=[],E=f(x);try{for(E.s();!(w=E.n()).done;){var A=w.value,T=A.x+i.x,C=A.y+i.y,P=e.projection.projectTilePoint(T,C,c),I=e.projection.upVector(c,A.x,A.y),R=n,L=r;if(o){var M=Wd(T,C,n,r,o,s,u,l);R+=M.base,L+=M.top}0!==n?g(v,P.x+I[0]*p*R,P.y+I[1]*p*R,P.z+I[2]*p*R):g(v,P.x,P.y,P.z),g(m,P.x+I[0]*p*L,P.y+I[1]*p*L,P.z+I[2]*p*L),mu(v,v,a),mu(m,m,a),k.push(new Vd(v[0],v[1],v[2])),S.push(new Vd(m[0],m[1],m[2]))}}catch(O){E.e(O)}finally{E.f()}d.push(k),h.push(S)}}catch(O){b.e(O)}finally{b.f()}return[d,h]}(e,t,n,r,i,a,o,s,u,l,c):o?function(e,t,n,r,i,a,o,s,u){var l,c=[],d=[],h=[0,0,0,1],p=f(e);try{for(p.s();!(l=p.n()).done;){var v,m=l.value,g=[],y=[],_=f(m);try{for(_.s();!(v=_.n()).done;){var b=v.value,w=b.x+r.x,x=b.y+r.y,k=Wd(w,x,t,n,a,o,s,u);h[0]=w,h[1]=x,h[2]=k.base,h[3]=1,Su(h,h,i),h[3]=Math.max(h[3],1e-5);var S=new Vd(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=w,h[1]=x,h[2]=k.top,h[3]=1,Su(h,h,i),h[3]=Math.max(h[3],1e-5);var E=new Vd(h[0]/h[3],h[1]/h[3],h[2]/h[3]);g.push(S),y.push(E)}}catch(A){_.e(A)}finally{_.f()}c.push(g),d.push(y)}}catch(A){p.e(A)}finally{p.f()}return[c,d]}(t,n,r,i,a,o,s,u,l):function(e,t,n,r,i){var a,o=[],s=[],u=i[8]*t,l=i[9]*t,c=i[10]*t,d=i[11]*t,h=i[8]*n,p=i[9]*n,v=i[10]*n,m=i[11]*n,g=f(e);try{for(g.s();!(a=g.n()).done;){var y,_=a.value,b=[],w=[],x=f(_);try{for(x.s();!(y=x.n()).done;){var k=y.value,S=k.x+r.x,E=k.y+r.y,A=i[0]*S+i[4]*E+i[12],T=i[1]*S+i[5]*E+i[13],C=i[2]*S+i[6]*E+i[14],P=i[3]*S+i[7]*E+i[15],I=A+u,R=T+l,L=C+c,M=Math.max(P+d,1e-5),O=A+h,F=T+p,D=C+v,N=Math.max(P+m,1e-5);b.push(new Vd(I/M,R/M,L/M)),w.push(new Vd(O/N,F/N,D/N))}}catch(j){x.e(j)}finally{x.f()}o.push(b),s.push(w)}}catch(j){g.e(j)}finally{g.f()}return[o,s]}(t,n,r,i,a)}(a,r,h,c,l,o,v?s:null,p,m,a.center.lat,e.tileID.canonical),w=d(b,2),x=w[0],k=w[1],S=e.queryGeometry;return function(e,t,n){var r=1/0;zl(n,t)&&(r=Hd(n,t[0]));for(var i=0;i<t.length;i++)for(var a=t[i],o=e[i],s=0;s<a.length-1;s++){var u=a[s],l=[u,a[s+1],o[s+1],o[s],u];Bl(n,l)&&(r=Math.min(r,Hd(n,l)))}return r!==1/0&&r}(x,k,S.isPointQuery()?S.screenBounds:S.screenGeometry)}}]),n}(Ds),line:function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e,Qd)).gradientVersion=0,r}return p(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){if("line-gradient"===e){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof zn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"widthExpression",value:function(){return this._transitionablePaint._values["line-width"].value.expression}},{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=$d.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new Xd(e)}},{key:"getProgramIds",value:function(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}},{key:"getProgramConfiguration",value:function(e){return new Cs(this,e)}},{key:"queryRadius",value:function(e){var t=e,n=ef(Yl("line-width",this,t),Yl("line-gap-width",this,t)),r=Yl("line-offset",this,t);return n/2+Math.abs(r)+Ql(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){if(e.queryGeometry.isAboveHorizon)return!1;var o=$l(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*ef(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(r=function(e,t){for(var n=[],r=new C(0,0),i=0;i<e.length;i++){for(var a=e[i],o=[],s=0;s<a.length;s++){var u=a[s-1],l=a[s],c=a[s+1],d=0===s?r:l.sub(u)._unit()._perp(),f=s===a.length-1?r:c.sub(l)._unit()._perp(),h=d._add(f)._unit();h._mult(1/(h.x*f.x+h.y*f.y)),o.push(h._mult(t)._add(l))}n.push(o)}return n}(r,u*e.pixelToTileUnitsFactor)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var a=0;a<i.length;a++)if(Kl(e,i[a]))return!0;if(Vl(e,i,n))return!0}return!1}(o,r,s)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Ds),symbol:Ap,background:function(e){v(n,e);var t=m(n);function n(e){return h(this,n),t.call(this,e,Tp)}return p(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(Ds),raster:function(e){v(n,e);var t=m(n);function n(e){return h(this,n),t.call(this,e,Cp)}return p(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(Ds),sky:function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e,Ip))._updateColorRamp(),r}return p(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=vc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}},{key:"getCenter",value:function(e,t){if("atmosphere"===this.paint.get("sky-type")){var n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,a=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&te("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?Rp(a.azimuthal,90-a.polar,t):Rp(n[0],90-n[1],t)}var o=this.paint.get("sky-gradient-center");return Rp(o[0],90-o[1],t)}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),n}(Ds)},Mp=function(){function e(t,n,r,i){h(this,e),this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(n,i)}return p(e,[{key:"update",value:function(e,t,n){var r=e.width,i=e.height,a=this.context,o=a.gl,s=y.HTMLImageElement,u=y.HTMLCanvasElement,l=y.HTMLVideoElement,c=y.ImageData,d=y.ImageBitmap;if(o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!t||!1!==t.premultiply)),n||this.size&&this.size[0]===r&&this.size[1]===i){var f=n||{x:0,y:0},h=f.x,p=f.y;e instanceof s||e instanceof u||e instanceof l||e instanceof c||d&&e instanceof d?o.texSubImage2D(o.TEXTURE_2D,0,h,p,o.RGBA,o.UNSIGNED_BYTE,e):o.texSubImage2D(o.TEXTURE_2D,0,h,p,r,i,o.RGBA,o.UNSIGNED_BYTE,e.data)}else this.size=[r,i],e instanceof s||e instanceof u||e instanceof l||e instanceof c||d&&e instanceof d?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,r,i,0,this.format,o.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&o.generateMipmap(o.TEXTURE_2D)}},{key:"bind",value:function(e,t){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}(),Op=function(){function e(t){var n=this;h(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return p(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){this._channel=void 0,this._callback=function(){}}}]),e}(),Fp=function(){function e(){h(this,e),this.tasks={},this.taskQueue=[],J(["process"],this),this.invoker=new Op(this.process),this.nextId=0}return p(e,[{key:"add",value:function(e,t){var n=this,r=this.nextId++,i=function(e){var t=e.type,n=e.isSymbolTile,r=e.zoom;return r=r||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-r:"maybePrepare"===t&&n?400-r:500:200-r:100-r}(t);if(0===i){ie();try{e()}finally{}return{cancel:function(){}}}return this.tasks[r]={fn:e,metadata:t,priority:i,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:function(){delete n.tasks[r]}}}},{key:"process",value:function(){var e=this;ie();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,n=0;n<this.taskQueue.length;n++){var r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;var i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}},{key:"remove",value:function(){this.invoker.remove()}}]),e}(),Dp=function(){function e(t){h(this,e),this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return p(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Np=["tile","layer","source","sourceLayer","state"],jp=function(){function e(t,n,r,i,a){h(this,e),this.type="Feature",this._vectorTileFeature=t,this._z=n,this._x=r,this._y=i,this.properties=t.properties,this.id=a}return p(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(var t=0,n=Np;t<n.length;t++){var r=n[t];void 0!==this[r]&&(e[r]=this[r])}return e}}]),e}(),Bp=32,Up=33,zp=new Uint16Array(8184),Vp=0;Vp<2046;Vp++){var Zp=Vp+2,Hp=0,Wp=0,Gp=0,qp=0,Kp=0,Jp=0;for(1&Zp?Gp=qp=Kp=Bp:Hp=Wp=Jp=Bp;(Zp>>=1)>1;){var Xp=Hp+Gp>>1,Yp=Wp+qp>>1;1&Zp?(Gp=Hp,qp=Wp,Hp=Kp,Wp=Jp):(Hp=Gp,Wp=qp,Gp=Kp,qp=Jp),Kp=Xp,Jp=Yp}var Qp=4*Vp;zp[Qp+0]=Hp,zp[Qp+1]=Wp,zp[Qp+2]=Gp,zp[Qp+3]=qp}var $p=new Uint16Array(2178),ev=new Uint8Array(1089),tv=new Uint16Array(1089);function nv(e){return 0===e?-.03125:32===e?.03125:0}var rv=_o([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),iv={type:2,extent:Us,loadGeometry:function(){return[[new C(0,0),new C(8193,0),new C(8193,8193),new C(0,8193),new C(0,0)]]}},av=function(){function e(t,n,r,i,a){h(this,e),this.tileID=t,this.uid=W(),this.uses=0,this.tileSize=n,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}return p(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<it.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"tileTransform",get:function(){return this._tileTransform||(this._tileTransform=Gh(this.tileID.canonical,this.projection)),this._tileTransform}},{key:"loadVectorData",value:function(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;var r,i=f(e);try{var a=function(){var e=r.value,i=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==i.length){e.layers=i,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return i.filter((function(t){return t.id===e}))[0]})));var a,o=f(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]=e}}catch(u){o.e(u)}finally{o.f()}}};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof xp){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof xp&&o.hasRTLText){this.hasRTLText=!0,eo.isLoading()||eo.isLoaded()||"deferred"!==Qa()||$a();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new qo}},{key:"unloadVectorData",value:function(){if(this.hasData()){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Mp(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Mp(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Mp(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,n,r,i,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:o,transform:a,params:i,tileTransform:this.tileTransform},e,t,n):{}}},{key:"querySourceFeatures",value:function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=t?t.sourceLayer:"",a=r._geojsonTileLayer||r[i];if(a)for(var o=bi(t&&t.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,d={z:u,x:l,y:c},f=0;f<a.length;f++){var h=a.feature(f);if(o.needGeometry){var p=Fl(h,!0);if(!o.filter(new to(this.tileID.overscaledZ),p,this.tileID.canonical))continue}else if(!o.filter(new to(this.tileID.overscaledZ),h))continue;var v=n.getId(h,i),m=new jp(h,u,l,c,v);m.tile=d,e.push(m)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var n=ae(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=r+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&t){var n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(var i in this.buckets)if(t.style.hasLayer(i)){var a=this.buckets[i],o=a.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],u=e[o];if(s&&u&&0!==Object.keys(u).length){if(a.update(u,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof Xd||a instanceof $c){var l=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&l&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(l.id,this.tileID)}var c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(a)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<it.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=it.now()+e}},{key:"setTexture",value:function(e,t){var n=t.context,r=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Mp(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax))}},{key:"setDependencies",value:function(e,t){var n,r={},i=f(t);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(a){i.e(a)}finally{i.f()}this.dependencies[e]=r}},{key:"hasDependency",value:function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.dependencies[i];if(a){var o,s=f(t);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(u){s.e(u)}finally{s.f()}}}}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}},{key:"_makeDebugTileBoundsBuffers",value:function(e,t){if(t&&"mercator"!==t.name&&!this._tileDebugBuffer){for(var n=Ol(iv,this.tileID.canonical,this.tileTransform)[0],r=new wo,i=new Ho,a=0;a<n.length;a++){var o=n[a],s=o.x,u=o.y;r.emplaceBack(s,u),i.emplaceBack(a)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,Lu.members),this._tileDebugSegments=Bs.simpleSegment(0,0,r.length,i.length)}}},{key:"_makeTileBoundsBuffers",value:function(e,t){if(!this._tileBoundsBuffer&&t&&"mercator"!==t.name){var n,r,i=Ol(iv,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){var a=function(e,t){for(var n=Gh(e,t),r=Math.pow(2,e.z),i=0;i<Up;i++)for(var a=0;a<Up;a++){var o=wl((e.x+(a+nv(a))/Bp)/r),s=xl((e.y+(i+nv(i))/Bp)/r),u=t.project(o,s),l=i*Up+a;$p[2*l+0]=Math.round((u.x*n.scale-n.x)*Us),$p[2*l+1]=Math.round((u.y*n.scale-n.y)*Us)}ev.fill(0),tv.fill(0);for(var c=2045;c>=0;c--){var d=4*c,f=zp[d+0],h=zp[d+1],p=zp[d+2],v=zp[d+3],m=f+p>>1,g=h+v>>1,y=m+g-h,_=g+f-m,b=h*Up+f,w=v*Up+p,x=g*Up+m,k=Math.hypot(($p[2*b+0]+$p[2*w+0])/2-$p[2*x+0],($p[2*b+1]+$p[2*w+1])/2-$p[2*x+1])>=16;if(ev[x]=ev[x]||(k?1:0),c<1022){var S=(h+_>>1)*Up+(f+y>>1),E=(v+_>>1)*Up+(p+y>>1);ev[x]=ev[x]||ev[S]||ev[E]}}var A=new ko,T=new No,C=0;function P(e,t){var n=t*Up+e;return 0===tv[n]&&(A.emplaceBack($p[2*n+0],$p[2*n+1],e*Us/Bp,t*Us/Bp),tv[n]=++C),tv[n]-1}function I(e,t,n,r,i,a){var o=e+n>>1,s=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&ev[s*Up+o])I(i,a,e,t,o,s),I(n,r,i,a,o,s);else{var u=P(e,t),l=P(n,r),c=P(i,a);T.emplaceBack(u,l,c)}}return I(0,0,Bp,Bp,Bp,0),I(Bp,Bp,0,0,0,Bp),{vertices:A,indices:T}}(this.tileID.canonical,t);n=a.vertices,r=a.indices}else{n=new ko,r=new No;var o,s=f(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=u.x,c=u.y;n.emplaceBack(l,c,0,0)}}catch(p){s.e(p)}finally{s.f()}for(var d=yc(n.int16,void 0,4),h=0;h<d.length;h+=3)r.emplaceBack(d[h],d[h+1],d[h+2])}this._tileBoundsBuffer=e.createVertexBuffer(n,rv.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(r),this._tileBoundsSegments=Bs.simpleSegment(0,0,n.length,r.length)}}},{key:"_makeGlobeTileDebugBuffers",value:function(e,t){var n=t.projection;if(n&&"globe"===n.name&&!t.freezeTileCoverage){var r,i=this.tileID.canonical,a=al(Ju(i,t)),o=ul(t.zoom);o>0&&(r=qs(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,i,t,a,r,o),this._makeGlobeTileDebugTextBuffer(e,i,t,a,r,o)}}},{key:"_globePoint",value:function(e,t,n,r,i,a,o){var s=nl(e,t,n);if(a){var u=1<<n.z,l=yl(r.center.lng),c=_l(r.center.lat),d=(n.x+.5)/u-l,f=0;d>.5?f=-1:d<-.5&&(f=1);var h=(e/Us+n.x)/u+f,p=(t/Us+n.y)/u;h=(h-l)*r._pixelsPerMercatorPixel+l,p=(p-c)*r._pixelsPerMercatorPixel+c;var v=[h*r.worldSize,p*r.worldSize,0];mu(v,v,a),s=Ku(s,v,o)}return mu(s,s,i)}},{key:"_makeGlobeTileDebugBorderBuffer",value:function(e,t,n,r,i,a){var o=this,s=new wo,u=new Ho,l=new xo,c=function(e,c,d,f,h){for(var p=(d-e)/(h-1),v=(f-c)/(h-1),m=s.length,g=0;g<h;g++){var y=e+g*p,_=c+g*v;s.emplaceBack(y,_);var b=o._globePoint(y,_,t,n,r,i,a);l.emplaceBack(b[0],b[1],b[2]),u.emplaceBack(m+g)}},d=Us;c(0,0,d,0,16),c(d,0,d,d,16),c(d,d,0,d,16),c(0,d,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(u),this._tileDebugBuffer=e.createVertexBuffer(s,Lu.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Ru.members),this._tileDebugSegments=Bs.simpleSegment(0,0,s.length,u.length)}},{key:"_makeGlobeTileDebugTextBuffer",value:function(e,t,n,r,i,a){var o=new wo,s=new No,u=new xo,l=25;s.reserve(32),o.reserve(l),u.reserve(l);for(var c=function(e,t){return l*e+t},d=0;d<l;d++)for(var f=2048*d,h=0;h<l;h++){var p=2048*h;o.emplaceBack(p,f);var v=this._globePoint(p,f,t,n,r,i,a);u.emplaceBack(v[0],v[1],v[2])}for(var m=0;m<4;m++)for(var g=0;g<4;g++){var y=c(m,g),_=c(m,g+1),b=c(m+1,g),w=c(m+1,g+1);s.emplaceBack(y,_,b),s.emplaceBack(b,_,w)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(s),this._tileDebugTextBuffer=e.createVertexBuffer(o,Lu.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(u,Ru.members),this._tileDebugTextSegments=Bs.simpleSegment(0,0,l,32)}}]),e}(),ov=function(){function e(){h(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return p(e,[{key:"updateState",value:function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},Z(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var a in this.deletedStates[e][r]={},this.state[e][r])n[a]||(this.deletedStates[e][r][a]=null);else for(var o in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][o]&&delete this.deletedStates[e][r][o]}},{key:"removeFeatureState",value:function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var n=String(t),r=Z({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var i=this.deletedStates[e][t];if(null===i)return{};for(var a in i)delete r[a]}return r}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var a in this.stateChanges[r])this.state[r][a]||(this.state[r][a]={}),Z(this.state[r][a],this.stateChanges[r][a]),i[a]=this.state[r][a];n[r]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var u in this.state[o])s[u]={},this.state[o][u]={};else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else if(this.state[o][l])for(var c=0,d=Object.keys(this.deletedStates[o][l]);c<d.length;c++){var f=d[c];delete this.state[o][l][f]}s[l]=this.state[o][l]}n[o]=n[o]||{},Z(n[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var h in e)e[h].setFeatureState(n,t)}}]),e}(),sv=function(){function e(t){h(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return p(e,[{key:"getElevation",value:function(e,t){var n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function uv(e,t,n,r){for(var i=0,a=Number.MAX_VALUE,o=0;o<3;o++)if(Math.abs(r[o])<1e-15){if(n[o]<e[o]||n[o]>t[o])return null}else{var s=1/r[o],u=(e[o]-n[o])*s,l=(t[o]-n[o])*s;if(u>l){var c=u;u=l,l=c}if(u>i&&(i=u),l<a&&(a=l),i>a)return null}return i}function lv(e,t,n,r,i,a,o,s,u,l,c){var d=r-e,f=i-t,h=a-n,p=o-e,v=s-t,m=u-n,g=c[1]*m-c[2]*v,y=c[2]*p-c[0]*m,_=c[0]*v-c[1]*p,b=d*g+f*y+h*_;if(Math.abs(b)<1e-15)return null;var w=1/b,x=l[0]-e,k=l[1]-t,S=l[2]-n,E=(x*g+k*y+S*_)*w;if(E<0||E>1)return null;var A=k*h-S*f,T=S*d-x*h,C=x*f-k*d,P=(c[0]*A+c[1]*T+c[2]*C)*w;return P<0||E+P>1?null:(p*A+v*T+m*C)*w}function cv(e,t,n){return(e-t)/(n-t)}function dv(e,t,n,r,i,a,o,s,u){var l=1<<n,c=a-r,d=o-i,f=(e+1)/l*c+r,h=(t+0)/l*d+i,p=(t+1)/l*d+i;s[0]=(e+0)/l*c+r,s[1]=h,u[0]=f,u[1]=p}var fv=function(){function e(t){if(h(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),n=[],r=Math.ceil(Math.pow(2,t)),i=1/r,a=function(e,t,n,r,i){var a=r?1:0,o=(e+1)*n-a,s=t*n,u=(t+1)*n-a;i[0]=e*n,i[1]=s,i[2]=o,i[3]=u},o=new sv(r),s=[],u=0;u<r*r;u++){a(u%r,Math.floor(u/r),i,!1,s);var l=pv(s[0],s[1],e),c=pv(s[2],s[1],e),d=pv(s[2],s[3],e),f=pv(s[0],s[3],e);o.minimums.push(Math.min(l,c,d,f)),o.maximums.push(Math.max(l,c,d,f)),o.leaves.push(1)}for(n.push(o),r/=2;r>=1;r/=2){var h=n[n.length-1];o=new sv(r);for(var p=0;p<r*r;p++){a(p%r,Math.floor(p/r),2,!0,s);var v=h.getElevation(s[0],s[1]),m=h.getElevation(s[2],s[1]),g=h.getElevation(s[2],s[3]),y=h.getElevation(s[0],s[3]),_=h.isLeaf(s[0],s[1]),b=h.isLeaf(s[2],s[1]),w=h.isLeaf(s[2],s[3]),x=h.isLeaf(s[0],s[3]),k=Math.min(v.min,m.min,g.min,y.min),S=Math.max(v.max,m.max,g.max,y.max),E=_&&b&&w&&x;o.maximums.push(S),o.minimums.push(k),o.leaves.push(S-k<=5&&E?1:0)}n.push(o)}return n}(this.dem),r=n.length-1,i=n[r];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(n,0,0,r,0)}}return p(e,[{key:"raycastRoot",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return uv([e,t,-100],[n,r,this.maximums[0]*o],i,a)}},{key:"raycast",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,n,r,i,a,o);if(null==s)return null;for(var u=[],l=[],c=[],d=[],f=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];f.length>0;){var h=f.pop(),p=h.idx,v=h.t,m=h.nodex,g=h.nodey,y=h.depth;if(this.leaves[p]){dv(m,g,y,e,t,n,r,c,d);var _=1<<y,b=(m+0)/_,w=(m+1)/_,x=(g+0)/_,k=(g+1)/_,S=pv(b,x,this.dem)*o,E=pv(w,x,this.dem)*o,A=pv(w,k,this.dem)*o,T=pv(b,k,this.dem)*o,C=lv(c[0],c[1],S,d[0],c[1],E,d[0],d[1],A,i,a),P=lv(d[0],d[1],A,c[0],d[1],T,c[0],c[1],S,i,a),I=Math.min(null!==C?C:Number.MAX_VALUE,null!==P?P:Number.MAX_VALUE);if(I!==Number.MAX_VALUE)return I;var R=fu([],i,a,v);if(hv(S,E,T,A,cv(R[0],c[0],d[0]),cv(R[1],c[1],d[1]))>=R[2])return v}else{for(var L=0,M=0;M<this._siblingOffset.length;M++){dv((m<<1)+this._siblingOffset[M][0],(g<<1)+this._siblingOffset[M][1],y+1,e,t,n,r,c,d),c[2]=-100,d[2]=this.maximums[this.childOffsets[p]+M]*o;var O=uv(c,d,i,a);if(null!=O){var F=O;u[M]=F;for(var D=!1,N=0;N<L&&!D;N++)F>=u[l[N]]&&(l.splice(N,0,M),D=!0);D||(l[L]=M),L++}}for(var j=0;j<L;j++){var B=l[j];f.push({idx:this.childOffsets[p]+B,t:u[B],nodex:(m<<1)+this._siblingOffset[B][0],nodey:(g<<1)+this._siblingOffset[B][1],depth:y+1})}}}return null}},{key:"_addNode",value:function(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,n,r,i){if(1!==e[r].isLeaf(t,n)){this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);for(var a=r-1,o=e[a],s=0,u=0,l=0;l<this._siblingOffset.length;l++){var c=2*t+this._siblingOffset[l][0],d=2*n+this._siblingOffset[l][1],f=o.getElevation(c,d),h=o.isLeaf(c,d),p=this._addNode(f.min,f.max,h);h&&(s|=1<<l),u||(u=p)}for(var v=0;v<this._siblingOffset.length;v++)s&1<<v||this._construct(e,2*t+this._siblingOffset[v][0],2*n+this._siblingOffset[v][1],a,u+v)}}}]),e}();function hv(e,t,n,r,i,a){return Vn(Vn(e,n,a),Vn(t,r,a),i)}function pv(e,t,n){var r=n.dim,i=j(e*r-.5,0,r-1),a=j(t*r-.5,0,r-1),o=Math.floor(i),s=Math.floor(a),u=Math.min(o+1,r-1),l=Math.min(s+1,r-1);return hv(n.get(o,s),n.get(u,s),n.get(o,l),n.get(u,l),i-o,a-s)}var vv={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},mv=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(h(this,e),this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return te('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var o=this.dim=n.height-2,s=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=r||"mapbox",this.borderReady=i,!i){for(var u=0;u<o;u++)s[this._idx(-1,u)]=s[this._idx(0,u)],s[this._idx(o,u)]=s[this._idx(o-1,u)],s[this._idx(u,-1)]=s[this._idx(u,0)],s[this._idx(u,o)]=s[this._idx(u,o-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(o,-1)]=s[this._idx(o-1,0)],s[this._idx(-1,o)]=s[this._idx(0,o-1)],s[this._idx(o,o)]=s[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}return p(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new fv(this)}},{key:"get",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=j(e,-1,this.dim),t=j(t,-1,this.dim));var n=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}},{key:"unpackVector",get:function(){return vv[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,n){return(256*e*256+256*t+n)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,n){return 256*e+t+n/256-32768}},{key:"getPixels",value:function(){return new hc({width:this.stride,height:this.stride},this.pixels)}},{key:"backfillBorder",value:function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,u=-n*this.dim,l=a;l<o;l++)for(var c=r;c<i;c++){var d=4*this._idx(c,l),f=4*this._idx(c+s,l+u);this.pixels[d+0]=e.pixels[f+0],this.pixels[d+1]=e.pixels[f+1],this.pixels[d+2]=e.pixels[f+2],this.pixels[d+3]=e.pixels[f+3]}}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return vv[e]}},{key:"pack",value:function(t,n){var r=[0,0,0,0],i=e.getUnpackVector(n),a=Math.floor((t+i[3])/i[2]);return r[2]=a%256,a=Math.floor(a/256),r[1]=a%256,a=Math.floor(a/256),r[0]=a,r}}]),e}();na(mv,"DEMData"),na(fv,"DemMinMaxQuadTree",{omit:["dem"]});var gv=function(){function e(t,n){h(this,e),this.max=t,this.onRemove=n,this.reset()}return p(e,[{key:"reset",value:function(){for(var e in this.data){var t,n=f(this.data[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(i){n.e(i)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){r.remove(e,a)}),n)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var n in this.data){var r,i=f(this.data[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;e(a.value)||t.push(a)}}catch(l){i.e(l)}finally{i.f()}}for(var o=0,s=t;o<s.length;o++){var u=s[o];this.remove(u.value.tileID,u)}}}]),e}(),yv=p((function e(t,n,r){h(this,e),this.func=t,this.mask=n,this.range=r}));yv.ReadOnly=!1,yv.ReadWrite=!0,yv.disabled=new yv(519,yv.ReadOnly,[0,1]);var _v=7680,bv=p((function e(t,n,r,i,a,o){h(this,e),this.test=t,this.ref=n,this.mask=r,this.fail=i,this.depthFail=a,this.pass=o}));bv.disabled=new bv({func:519,mask:0},0,0,_v,_v,_v);var wv=p((function e(t,n,r){h(this,e),this.blendFunction=t,this.blendColor=n,this.mask=r}));wv.Replace=[1,0],wv.disabled=new wv(wv.Replace,zt.transparent,[!1,!1,!1,!1]),wv.unblended=new wv(wv.Replace,zt.transparent,[!0,!0,!0,!0]),wv.alphaBlended=new wv([1,771],zt.transparent,[!0,!0,!0,!0]);var xv=1029,kv=2305,Sv=p((function e(t,n,r){h(this,e),this.enable=t,this.mode=n,this.frontFace=r}));Sv.disabled=new Sv(!1,xv,kv),Sv.backCCW=new Sv(!0,xv,kv),Sv.backCW=new Sv(!0,xv,2304),Sv.frontCW=new Sv(!0,1028,2304),Sv.frontCCW=new Sv(!0,1028,kv);var Ev=function(e){v(n,e);var t=m(n);function n(e,r,a){var o;return h(this,n),(o=t.call(this)).id=e,o._onlySymbols=a,r.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),r.on("error",(function(){o._sourceErrored=!0})),o._source=r,o._tiles={},o._cache=new gv(0,o._unloadTile.bind(i(o))),o._timers={},o._cacheTimers={},o._minTileCacheSize=r.minTileCacheSize,o._maxTileCacheSize=r.maxTileCacheSize,o._loadedParentTiles={},o._coveredTiles={},o._state=new ov,o._isRaster="raster"===o._source.type||"raster-dem"===o._source.type||"custom"===o._source.type&&"raster"===o._source._dataType,o}return p(n,[{key:"onAdd",value:function(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return V(this._tiles).map((function(e){return e.tileID})).sort(Av).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,n=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&n.push(this._tiles[r]);return e?n.sort((function(e,n){var r=e.tileID,i=n.tileID,a=new C(r.canonical.x,r.canonical.y)._rotate(t.transform.angle),o=new C(i.canonical.x,i.canonical.y)._rotate(t.transform.angle);return r.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x})).map((function(e){return e.tileID.key})):n.map((function(e){return e.tileID})).sort(Av).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}},{key:"_tileLoaded",value:function(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new ut(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){var i=this.map.painter.terrain;this.update(this.transform,i.getScaledDemTileSize(),!0),i.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=it.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new st("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);a(e,i),a(i,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,n,r){for(var i in this._tiles){var a=this._tiles[i];if(!(r[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var u=o;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;r>=t;r--){var i=e.scaledTo(r),a=this._getLoadedTile(i);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(o)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(+o,this._tiles[o])}}},{key:"update",value:function(e,t,r){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||r)){var a;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new Ud(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return i._source.hasTile(e)})))):a=[];var o=this._updateRetainedTiles(a);if(Tv(this._source.type)&&0!==a.length){for(var s={},u={},l=0,c=Object.keys(o);l<c.length;l++){var d=c[l],h=o[d],p=this._tiles[d];if(p&&!(p.fadeEndTime&&p.fadeEndTime<=it.now())){var v=this.findLoadedParent(h,Math.max(h.overscaledZ-n.maxOverzooming,this._source.minzoom));v&&(this._addTile(v.tileID),s[v.tileID.key]=v.tileID),u[d]=h}}var m=a[a.length-1].overscaledZ;for(var g in this._tiles){var y=this._tiles[g];if(!o[g]&&y.hasData())for(var _=y.tileID;_.overscaledZ>m;){_=_.scaledTo(_.overscaledZ-1);var b=this._tiles[_.key];if(b&&b.hasData()&&u[_.key]){o[g]=y.tileID;break}}}for(var w in s)o[w]||(this._coveredTiles[w]=!0,o[w]=s[w])}for(var x in o)this._tiles[x].clearFadeHold();var k,S=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n}(this._tiles,o),E=f(S);try{for(E.s();!(k=E.n()).done;){var A=k.value,T=this._tiles[A];T.hasSymbolBuckets&&!T.holdingForFade()?T.setHoldDuration(this.map._fadeDuration):T.hasSymbolBuckets&&!T.symbolFadeFinished()||this._removeTile(+A)}}catch(C){E.e(C)}finally{E.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var r,i={},a=e.reduce((function(e,t){return Math.min(e,t.overscaledZ)}),1/0),o=e[0].overscaledZ,s=Math.max(o-n.maxOverzooming,this._source.minzoom),u=Math.max(o+n.maxUnderzooming,this._source.minzoom),l={},c=f(e);try{for(c.s();!(r=c.n()).done;){var d=r.value,h=this._addTile(d);t[d.key]=d,h.hasData()||a<this._source.maxzoom&&(l[d.key]=d)}}catch(S){c.e(S)}finally{c.f()}this._retainLoadedChildren(l,a,u,t);var p,v=f(e);try{for(v.s();!(p=v.n()).done;){var m=p.value,g=this._tiles[m.key];if(!g.hasData()){if(m.canonical.z>=this._source.maxzoom){var y=m.children(this._source.maxzoom)[0],_=this.getTile(y);if(_&&_.hasData()){t[y.key]=y;continue}}else{var b=m.children(this._source.maxzoom);if(t[b[0].key]&&t[b[1].key]&&t[b[2].key]&&t[b[3].key])continue}for(var w=g.wasRequested(),x=m.overscaledZ-1;x>=s;--x){var k=m.scaledTo(x);if(i[k.key])break;if(i[k.key]=!0,!(g=this.getTile(k))&&w&&(g=this._addTile(k)),g&&(t[k.key]=k,w=g.wasRequested(),g.hasData()))break}}}}catch(S){v.e(S)}finally{v.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var a=0,o=t;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);if(!n){var r=this.map?this.map.painter:null;t=new av(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new st("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}},{key:"tilesIn",value:function(e,t,n){var r=[],i=this.transform;if(!i)return r;var a="globe"===i.projection.name,o=yl(i.center.lng);for(var s in this._tiles){var u=this._tiles[s];if(n&&u.clearQueryDebugViz(),!u.holdingForFade()){var l=void 0;if(a){var d=u.tileID.canonical;if(0===d.z){var h=[Math.abs(j.apply(void 0,[o].concat(c(Cv(d,-1))))-o),Math.abs(j.apply(void 0,[o].concat(c(Cv(d,1))))-o)];l=[0,2*h.indexOf(Math.min.apply(Math,h))-1]}else{var p=[Math.abs(j.apply(void 0,[o].concat(c(Cv(d,-1))))-o),Math.abs(j.apply(void 0,[o].concat(c(Cv(d,0))))-o),Math.abs(j.apply(void 0,[o].concat(c(Cv(d,1))))-o)];l=[p.indexOf(Math.min.apply(Math,p))-1]}}else l=[0];var v,m=f(l);try{for(m.s();!(v=m.n()).done;){var g=v.value,y=e.containsTile(u,i,t,g);y&&r.push(y)}}catch(_){m.e(_)}finally{m.f()}}}return r}},{key:"getVisibleCoordinates",value:function(e){var t,n=this,r=this.getRenderableIds(e).map((function(e){return n._tiles[e].tileID})),i=f(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped())}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Tv(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=it.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}},{key:"removeFeatureState",value:function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,n){var r=this._tiles[e];r&&r.setDependencies(t,n)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))}},{key:"_preloadTiles",value:function(e,t){var n,r=this,i=new Map,a=Array.isArray(e)?e:[e],o=this.map.painter.terrain,s=this.usedForTerrain&&o?o.getScaledDemTileSize():this._source.tileSize,u=f(a);try{for(u.s();!(n=u.n()).done;){var l,c=n.value,d=c.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),h=f(d);try{for(h.s();!(l=h.n()).done;){var p=l.value;i.set(p.key,p)}}catch(v){h.e(v)}finally{h.f()}this.usedForTerrain&&c.updateElevation(!1)}}catch(v){u.e(v)}finally{u.f()}z(Array.from(i.values()),(function(e,t){var n=new av(e,r._source.tileSize*e.overscaleFactor(),r.transform.tileZoom,r.map.painter,r._isRaster);r._loadTile(n,(function(e){"raster-dem"===r._source.type&&n.dem&&r._backfillDEM(n),t(e,n)}))}),t)}}]),n}(lt);function Av(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Tv(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function Cv(e,t){var n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}Ev.maxOverzooming=10,Ev.maxUnderzooming=3;var Pv=function(){function e(t,n,r){h(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=n,this._offset=r}return p(e,[{key:"tileCoordToPixel",value:function(e,t){var n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new C(r,i)}},{key:"getElevationAt",value:function(e,t,n,r){var i=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(i),s=Math.floor(a),u=this._dem;return r=!!r,n?Vn(Vn(u.get(o,s,r),u.get(o,s+1,r),a-s),Vn(u.get(o+1,s,r),u.get(o+1,s+1,r),a-s),i-o):u.get(o,s,r)}},{key:"getElevationAtPixel",value:function(e,t,n){return this._dem.get(e,t,!!n)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*bl(1,e)*this._dem.stride}}],[{key:"create",value:function(t,n,r){var i=r||t.findDEMTileFor(n);if(i&&i.dem){var a=i.dem,o=i.tileID,s=1<<n.canonical.z-o.canonical.z;return new e(i,i.tileSize/Us/s,[(n.canonical.x/s-o.canonical.x)*a.dim,(n.canonical.y/s-o.canonical.y)*a.dim])}}}]),e}(),Iv=function(){function e(t,n){h(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new $i(Us,16,0),this.featureIndexArray=new ts,this.promoteId=n}return p(e,[{key:"insert",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,a);for(var s=this.grid,u=0;u<t.length;u++){for(var l=t[u],c=[1/0,1/0,-1/0,-1/0],d=0;d<l.length;d++){var f=l[d];c[0]=Math.min(c[0],f.x),c[1]=Math.min(c[1],f.y),c[2]=Math.max(c[2],f.x),c[3]=Math.max(c[3],f.y)}c[0]<Us&&c[1]<Us&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){if(!this.vtLayers)for(var e in this.vtLayers=new yd(new _f(this.rawTileData)).layers,this.sourceLayerCoder=new Dp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[e]=[];return this.vtLayers}},{key:"query",value:function(e,t,n,r){var i=this;this.loadVTLayers();var a=e.params||{},o=bi(a.filter),s=e.tileResult,u=e.transform,l=s.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(function(e,t,n,r){return Jl(s.bufferedTilespaceGeometry,e,t,n,r)}));c.sort(Lv);var d=null;u.elevation&&c.length>0&&(d=Pv.create(u.elevation,this.tileID));for(var f,h={},p=function(){var u=c[v];if(u===f)return"continue";f=u;var l=i.featureIndexArray.get(u),p=null;i.loadMatchingFeature(h,l,o,a.layers,a.availableImages,t,n,r,(function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return p||(p=Ol(t,i.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(s,t,r,p,i.z,e.transform,e.pixelPosMatrix,d,a)}))},v=0;v<c.length;v++)p();return h}},{key:"loadMatchingFeature",value:function(e,t,n,r,i,a,o,s,u){var l=t.featureIndex,c=t.bucketIndex,d=t.sourceLayerIndex,f=t.layoutVertexArrayOffset,h=this.bucketLayerIDs[c];if(!r||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,h)){var p=this.sourceLayerCoder.decode(d),v=this.vtLayers[p].feature(l);if(n.needGeometry){var m=Fl(v,!0);if(!n.filter(new to(this.tileID.overscaledZ),m,this.tileID.canonical))return}else if(!n.filter(new to(this.tileID.overscaledZ),v))return;for(var g=this.getId(v,p),y=0;y<h.length;y++){var _=h[y];if(!(r&&r.indexOf(_)<0)){var b=a[_];if(b){var w={};void 0!==g&&s&&(w=s.getState(b.sourceLayer||"_geojsonTileLayer",g));var x=Z({},o[_]);x.paint=Rv(x.paint,b.paint,v,w,i),x.layout=Rv(x.layout,b.layout,v,w,i);var k=!u||u(v,b,w,f);if(k){var S=new jp(v,this.z,this.x,this.y,g);S.layer=x;var E=e[_];void 0===E&&(E=e[_]=[]),E.push({featureIndex:l,feature:S,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,n,r,i,a,o,s){var u={};this.loadVTLayers();var l,c=bi(i),d=f(e);try{for(d.s();!(l=d.n()).done;){var h=l.value;this.loadMatchingFeature(u,{bucketIndex:n,sourceLayerIndex:r,featureIndex:h,layoutVertexArrayOffset:0},c,a,o,s,t)}}catch(p){d.e(p)}finally{d.f()}return u}},{key:"loadFeature",value:function(e){var t=e.featureIndex,n=e.sourceLayerIndex;this.loadVTLayers();var r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];var a=this.vtLayers[r].feature(t);return i[t]=a,a}},{key:"hasLayer",value:function(e){var t,n=f(this.bucketLayerIDs);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=f(i);try{for(a.s();!(r=a.n()).done;)if(e===r.value)return!0}catch(o){a.e(o)}finally{a.f()}}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"getId",value:function(e,t){var n=e.id;if(this.promoteId){var r="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=r&&(n=e.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}]),e}();function Rv(e,t,n,r,i){return Y(e,(function(e,a){var o=t instanceof lo?t.get(a):null;return o&&o.evaluate?o.evaluate(n,r,i):o}))}function Lv(e,t){return t-e}na(Iv,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var Mv=function(){function e(t,n){h(this,e),this.width=t,this.height=n,this.nextRow=0,this.image=new fc({width:t,height:n}),this.positions={},this.uploaded=!1}return p(e,[{key:"getDash",value:function(e,t){var n=this.getKey(e,t);return this.positions[n]}},{key:"trim",value:function(){var e=this.width,t=this.height=q(this.nextRow);this.image.resize({width:e,height:t})}},{key:"getKey",value:function(e,t){return e.join(",")+t}},{key:"getDashRanges",value:function(e,t,n){var r=[],i=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,o=!0;r.push({left:i,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],u=1;u<e.length;u++){o=!o;var l=e[u];i=s*n,a=(s+=l)*n,r.push({left:i,right:a,isDash:o,zeroLength:0===l})}return r}},{key:"addRoundDash",value:function(e,t,n){for(var r=t/2,i=-n;i<=n;i++)for(var a=this.width*(this.nextRow+n+i),o=0,s=e[o],u=0;u<this.width;u++){u/s.right>1&&(s=e[++o]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),d=Math.min(l,c),f=void 0,h=i/n*(r+1);if(s.isDash){var p=r-Math.abs(h);f=Math.sqrt(d*d+p*p)}else f=r-Math.sqrt(d*d+h*h);this.image.data[a+u]=Math.max(0,Math.min(255,f+128))}}},{key:"addRegularDash",value:function(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=e[n+1];r.zeroLength?e.splice(n,1):i&&i.isDash===r.isDash&&(i.left=r.left,e.splice(n,1))}var a=e[0],o=e[e.length-1];a.isDash===o.isDash&&(a.left=o.left-this.width,o.right=a.right+this.width);for(var s=this.width*this.nextRow,u=0,l=e[u],c=0;c<this.width;c++){c/l.right>1&&(l=e[++u]);var d=Math.abs(c-l.left),f=Math.abs(c-l.right),h=Math.min(d,f);this.image.data[s+c]=Math.max(0,Math.min(255,(l.isDash?h:-h)+t+128))}}},{key:"addDash",value:function(e,t){var n=this.getKey(e,t);if(this.positions[n])return this.positions[n];var r="round"===t,i=r?7:0,a=2*i+1;if(this.nextRow+a>this.height)return te("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var o=0,s=0;s<e.length;s++)e[s]<0&&(te("Negative value is found in line dasharray, replacing values with 0"),e[s]=0),o+=e[s];if(0!==o){var u=this.width/o,l=this.getDashRanges(e,this.width,u);r?this.addRoundDash(l,u,i):this.addRegularDash(l,"square"===t?.5*u:0)}var c=this.nextRow+i;this.nextRow+=a;var d={tl:[c,i],br:[o,0]};return this.positions[n]=d,d}}]),e}();na(Mv,"LineAtlas");var Ov=p((function e(t){h(this,e);var n={},r=[];for(var i in t){var a=t[i],o=n[i]={};for(var s in a.glyphs){var u=a.glyphs[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l=u.metrics.localGlyph?2:1,c={x:0,y:0,w:u.bitmap.width+2*l,h:u.bitmap.height+2*l};r.push(c),o[s]=c}}}var d=Hf(r),f=d.w,p=d.h,v=new fc({width:f||1,height:p||1});for(var m in t){var g=t[m];for(var y in g.glyphs){var _=g.glyphs[+y];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var b=n[m][y],w=_.metrics.localGlyph?2:1;fc.copy(_.bitmap,v,{x:0,y:0},{x:b.x+w,y:b.y+w},_.bitmap)}}}this.image=v,this.positions=n}));na(Ov,"GlyphAtlas");var Fv=function(){function e(t){h(this,e),this.tileID=new Ud(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Gh(t.tileID.canonical,t.projection),this.projection=t.projection}return p(e,[{key:"parse",value:function(e,t,n,r,i){var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new qo;var o=new Dp(Object.keys(e.layers).sort()),s=new Iv(this.tileID,this.promoteId);s.bucketLayerIDs=[];var u,l,c,d,h={},p=new Mv(256,256),v={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:p,availableImages:n},m=t.familiesBySource[this.source];for(var g in m){var y=e.layers[g];if(y){var _,b=!1,w=!1,x=f(m[g]);try{for(x.s();!(_=x.n()).done;)"symbol"===_.value[0].type?b=!0:w=!0}catch(N){x.e(N)}finally{x.f()}if((!0!==this.isSymbolTile||b)&&(!1!==this.isSymbolTile||w)){1===y.version&&te('Vector tile source "'.concat(this.source,'" layer "').concat(g,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var k=o.encode(g),S=[],E=0;E<y.length;E++){var A=y.feature(E),T=s.getId(A,g);S.push({feature:A,id:T,index:E,sourceLayerIndex:k})}var C,P=f(m[g]);try{for(P.s();!(C=P.n()).done;){var I=C.value,R=I[0];void 0!==this.isSymbolTile&&"symbol"===R.type!==this.isSymbolTile||R.minzoom&&this.zoom<Math.floor(R.minzoom)||R.maxzoom&&this.zoom>=R.maxzoom||"none"!==R.visibility&&(Dv(I,this.zoom,n),(h[R.id]=R.createBucket({index:s.bucketLayerIDs.length,layers:I,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:k,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(S,v,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(I.map((function(e){return e.id}))))}}catch(N){P.e(N)}finally{P.f()}}}}p.trim();var L={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},M=Y(v.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(M).length?r.send("getGlyphs",{uid:this.uid,stacks:M},(function(e,t){u||(u=e,l=t,D.call(a))}),void 0,!1,L):l={};var O=Object.keys(v.iconDependencies);O.length?r.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){u||(u=e,c=t,D.call(a))}),void 0,!1,L):c={};var F=Object.keys(v.patternDependencies);function D(){if(u)return i(u);if(l&&c&&d){var e=new Ov(l),t=new Gf(c,d);for(var r in h){var a=h[r];a instanceof xp?(Dv(a.layers,this.zoom,n),Dh(a,l,e.positions,c,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):a.hasPattern&&(a instanceof Xd||a instanceof $c||a instanceof Ad)&&(Dv(a.layers,this.zoom,n),a.addFeatures(v,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:V(h).filter((function(e){return!e.isEmpty()})),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:p,imageAtlas:t,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}F.length?r.send("getImages",{icons:F,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){u||(u=e,d=t,D.call(a))}),void 0,!1,L):d={},D.call(this)}}]),e}();function Dv(e,t,n){var r,i=new to(t),a=f(e);try{for(a.s();!(r=a.n()).done;)r.value.recalculate(i,n)}catch(o){a.e(o)}finally{a.f()}}var Nv=function(){function e(t){h(this,e),this.entries={},this.scheduler=t}return p(e,[{key:"request",value:function(e,t,n,r){var i=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var o=d(a.result,2),s=o[0],u=o[1];return this.scheduler?this.scheduler.add((function(){r(s,u)}),t):r(s,u),function(){}}return a.callbacks.push(r),a.cancel||(a.cancel=n((function(n,r){a.result=[n,r];var o,s=f(a.callbacks);try{var u=function(){var e=o.value;i.scheduler?i.scheduler.add((function(){e(n,r)}),t):e(n,r)};for(s.s();!(o=s.n()).done;)u()}catch(l){s.e(l)}finally{s.f()}setTimeout((function(){return delete i.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==r})),a.callbacks.length||(a.cancel(),delete i.entries[e]))}}}]),e}();function jv(e,t,n){var r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var r=ke(e.request,(function(e,r,i,a){e?t(e):r&&t(null,{vectorTile:n?void 0:new yd(new _f(r)),rawData:r,cacheControl:i,expires:a})}));return function(){r.cancel(),t()}}),t)}e.ARRAY_TYPE=Zs,e.AUTH_ERR_MSG=Pe,e.Aabb=Du,e.Actor=function(){function e(t,n,r){h(this,e),this.target=t,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},J(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?t:y,this.scheduler=new Fp}return p(e,[{key:"send",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[s]=n);var u=se(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!n,targetMapId:r,mustQueue:a,sourceMapId:this.mapId,data:oa(t,u)},u),{cancel:function(){n&&delete i.callbacks[s],i.target.postMessage({id:s,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"receive",value:function(e){var t=this,n=e.data,r=n.id;if(r&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i.cancel()}else if(n.mustQueue||ie()){var a=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((function(){return t.processTask(r,n)}),a&&a.metadata||{type:"message"})}else this.processTask(r,n)}},{key:"processTask",value:function(e,t){var n=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(sa(t.error)):r(null,sa(t.data)))}else{var i=se(this.globalScope)?void 0:[],a=t.hasCallback?function(t,r){delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?oa(t):null,data:oa(r,i)},i)}:function(e){},o=sa(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,a);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],o.source)[s[1]](o,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.CanonicalTileID=jd,e.Color=zt,e.ColorMode=wv,e.CullFaceMode=Sv,e.DEMData=mv,e.DataConstantProperty=co,e.DedupedRequest=Nv,e.DepthMode=yv,e.EXTENT=Us,e.Elevation=function(){function e(){h(this,e)}return p(e,[{key:"isDataAvailableAtPoint",value:function(e){var t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;var n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),a=Math.floor((e.x-i)*r),o=Math.floor(e.y*r),s=this.findDEMTileFor(new Ud(n,i,n,a,o));return!(!s||!s.dem)}},{key:"getAtPointOrZero",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}},{key:"getAtPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==t&&(t=null);var r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;var i=r.getSource().maxzoom,a=1<<i,o=Math.floor(e.x),s=e.x-o,u=new Ud(i,o,i,Math.floor(s*a),Math.floor(e.y*a)),l=this.findDEMTileFor(u);if(!l||!l.dem)return t;var c=l.dem,d=1<<l.tileID.canonical.z,f=(s*d-l.tileID.canonical.x)*c.dim,h=(e.y*d-l.tileID.canonical.y)*c.dim,p=Math.floor(f),v=Math.floor(h);return(n?this.exaggeration():1)*Vn(Vn(c.get(p,v),c.get(p,v+1),h-v),Vn(c.get(p+1,v),c.get(p+1,v+1),h-v),f-p)}},{key:"getAtTileOffset",value:function(e,t,n){var r=1<<e.canonical.z;return this.getAtPointOrZero(new Al(e.wrap+(e.canonical.x+t/Us)/r,(e.canonical.y+n/Us)/r))}},{key:"getAtTileOffsetFunc",value:function(e,t,n,r){var i=this;return function(a){var o=i.getAtTileOffset(e,a.x,a.y),s=r.upVector(e.canonical,a.x,a.y);return du(s,s,o*r.upVectorScale(e.canonical,t,n).metersToTile),s}}},{key:"getForTilePoints",value:function(e,t,n,r){var i=this;if(this.isUsingMockSource())return!1;var a=Pv.create(this,e,r);return!!a&&(t.forEach((function(e){e[2]=i.exaggeration()*a.getElevationAt(e[0],e[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(e){if(this.isUsingMockSource())return null;var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z,a=e.canonical.x/i-r.canonical.x,o=e.canonical.y/i-r.canonical.y,s=0,u=0;u<e.canonical.z-r.canonical.z&&!n.leaves[s];u++){a*=2,o*=2;var l=2*Math.floor(o)+Math.floor(a);s=n.childOffsets[s]+l,a%=1,o%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"isUsingMockSource",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}(),e.ErrorEvent=ut,e.EvaluationParameters=to,e.Event=st,e.Evented=lt,e.FillExtrusionBucket=Ad,e.Frustum=Fu,e.FrustumCorners=Ou,e.GLOBE_RADIUS=Nu,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=function(){function e(t){h(this,e),this._createGrid(t),this._createPoles(t)}return p(e,[{key:"destroy",value:function(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();var e,t=f(this._poleSegments);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(s){t.e(s)}finally{t.f()}var n,r=f(this._gridSegments);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.withSkirts.destroy(),i.withoutSkirts.destroy()}}catch(s){r.e(s)}finally{r.f()}if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();var a,o=f(this._wireframeSegments);try{for(o.s();!(a=o.n()).done;)a.value.destroy()}catch(s){o.e(s)}finally{o.f()}}}},{key:"_fillGridMeshWithLods",value:function(e,t){for(var n=new wo,r=new No,i=[],a=e+1+2,o=t[0]+1,s=t[0]+1+(1+t.length),u=function(e,t,n){var r=e===a-1?e-2:0===e?e:e-1;return[r+=n?24575:0,t]},l=0;l<a;++l)n.emplaceBack.apply(n,c(u(l,0,!0)));for(var d=0;d<o;++d)for(var f=0;f<a;++f)n.emplaceBack.apply(n,c(u(f,d,(0===f||f===a-1)&&!0)));for(var h=0;h<t.length;++h)for(var p=t[h],v=0;v<a;++v)n.emplaceBack.apply(n,c(u(v,p,!0)));for(var m=0;m<t.length;++m){for(var g=r.length,y=t[m]+1+2,_=new No,b=0;b<y-1;b++)for(var w=b===y-2,x=w?a*(s-t.length+m-b):a,k=0;k<a-1;k++){var S=b*a+k;0===b||w||0===k||k===a-2?(_.emplaceBack(S+1,S,S+x),_.emplaceBack(S+x,S+x+1,S+1)):(r.emplaceBack(S+1,S,S+x),r.emplaceBack(S+x,S+x+1,S+1))}for(var E=Bs.simpleSegment(0,g,n.length,r.length-g),A=0;A<_.uint16.length;A+=3)r.emplaceBack(_.uint16[A],_.uint16[A+1],_.uint16[A+2]);var T=Bs.simpleSegment(0,g,n.length,r.length-g);i.push({withoutSkirts:E,withSkirts:T})}return{vertices:n,indices:r,segments:i}}},{key:"_createGrid",value:function(e){var t=this._fillGridMeshWithLods(ju,Bu);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,Lu.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}},{key:"_createPoles",value:function(e){for(var t=new No,n=0;n<=ju;n++)t.emplaceBack(0,n+1,n+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);var r=new zo,i=new zo;this._poleSegments=[];for(var a=0,o=0;a<5;a++){var s=360/(1<<a);r.emplaceBack(0,-Nu,0,.5,0),i.emplaceBack(0,-Nu,0,.5,1);for(var u=0;u<=ju;u++){var l=u/ju,c=Vn(0,s,l),f=el(fl,hl,c,Nu),h=d(f,3),p=h[0],v=h[1],m=h[2];r.emplaceBack(p,v,m,l,0),i.emplaceBack(p,v,m,l,1)}this._poleSegments.push(Bs.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,Iu,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(i,Iu,!1)}},{key:"getGridBuffers",value:function(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}},{key:"getPoleBuffers",value:function(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},{key:"getWirefameBuffers",value:function(e,t){if(!this._wireframeSegments){var n=new Zo,r=ju,i=r+1+2,a=1;this._wireframeSegments=[];for(var o=0,s=0;o<Bu.length;o++){for(var u=Bu[o],l=a;l<u+a;l++)for(var c=a;c<r+a;c++){var d=l*i+c;n.emplaceBack(d,d+1),n.emplaceBack(d,d+i),n.emplaceBack(d,d+i+1)}var f=u*r*3;this._wireframeSegments.push(Bs.simpleSegment(0,s,(u+1)*i,f)),s+=f}this._wireframeIndexBuffer=e.createIndexBuffer(n)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}}]),e}(),e.GlyphManager=wh,e.ImagePosition=Wf,e.LivePerformanceUtils=Xe,e.LngLat=ml,e.LngLatBounds=zs,e.LocalGlyphMode=bh,e.MAX_MERCATOR_LATITUDE=Sl,e.MercatorCoordinate=Al,e.ONE_EM=lf,e.OverscaledTileID=Ud,e.PerformanceMarkers=Je,e.Properties=po,e.RGBAImage=hc,e.Ray=Mu,e.RequestManager=function(){function e(t,n,r){h(this,e),this._transformRequestFn=t,this._customAccessToken=n,this._silenceAuthErrors=!!r,this._createSkuToken()}return p(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",E,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!Ie(e))return e;var n=De(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!Ie(e))return e;var n=De(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t,n,r){if(!Ie(e))return e;var i=De(e);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),n&&i.params.push("language=".concat(n)),r&&i.params.push("worldview=".concat(r)),this._makeAPIURL(i,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,n,r){var i=De(e);return Ie(e)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(t).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(t).concat(n),Ne(i))}},{key:"normalizeTileURL",value:function(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Ie(e))return e;var r=De(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(w.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(b.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(b.TILE_URL_VERSION).concat(r.path));var i=this._customAccessToken||function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.match(/^access_token=(.*)$/);if(r)return r[1]}}catch(i){n.e(i)}finally{n.f()}return null}(r.params)||b.ACCESS_TOKEN;return b.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,i)}},{key:"canonicalizeTileURL",value:function(e,t){var n=De(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;var r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(b.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(b.TILE_URL_VERSION,"/"),""));var i=n.params;return t&&(i=i.filter((function(e){return!e.match(/^access_token=/)}))),i.length&&(r+="?".concat(i.join("&"))),r}},{key:"canonicalizeTileset",value:function(e,t){var n,r=!!t&&Ie(t),i=[],a=f(e.tiles||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;Re(o)?i.push(this.canonicalizeTileURL(o,r)):i.push(o)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"_makeAPIURL",value:function(e,t){var n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=De(b.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){var i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==r.path&&(e.path="".concat(r.path).concat(e.path)),!b.REQUIRE_ACCESS_TOKEN)return Ne(e);if(t=t||b.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),Ne(e)}}]),e}(),e.ResourceType=_e,e.SegmentVector=Bs,e.SourceCache=Ev,e.StencilMode=bv,e.StructArrayLayout1ui2=Ho,e.StructArrayLayout2f1f2i16=Oo,e.StructArrayLayout2i4=wo,e.StructArrayLayout2ui4=Zo,e.StructArrayLayout3f12=Do,e.StructArrayLayout3ui6=No,e.StructArrayLayout4i8=ko,e.StructArrayLayout5f20=zo,e.Texture=Mp,e.Tile=av,e.Transitionable=io,e.Uniform1f=ms,e.Uniform1i=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=0,r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}}]),n}(vs),e.Uniform2f=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=[0,0],r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}}]),n}(vs),e.Uniform3f=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=[0,0,0],r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}}]),n}(vs),e.Uniform4f=gs,e.UniformColor=ys,e.UniformMatrix2f=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=ws,r}return p(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t))for(var r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}}]),n}(vs),e.UniformMatrix3f=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=bs,r}return p(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t))for(var r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}}]),n}(vs),e.UniformMatrix4f=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).current=_s,r}return p(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var r=1;r<16;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}}]),n}(vs),e.UnwrappedTileID=Bd,e.ValidationError=di,e.VectorTileFeature=_d,e.VectorTileWorkerSource=function(e){v(n,e);var t=m(n);function n(e,r,i,a,o){var s;return h(this,n),(s=t.call(this)).actor=e,s.layerIndex=r,s.availableImages=i,s.loadVectorData=o||jv,s.loading={},s.loaded={},s.deduped=new Nv(e.scheduler),s.isSpriteLoaded=a,s.scheduler=e.scheduler,s}return p(n,[{key:"loadTile",value:function(e,t){var n=this,r=e.uid,i=e&&e.request,a=i&&i.collectResourceTiming,o=this.loading[r]=new Fv(e);o.abort=this.loadVectorData(e,(function(s,u){var l=!n.loading[r];if(delete n.loading[r],l||s||!u)return o.status="done",l||(n.loaded[r]=o),t(s);var c=u.rawData,d={};u.expires&&(d.expires=u.expires),u.cacheControl&&(d.cacheControl=u.cacheControl),o.vectorTile=u.vectorTile||new yd(new _f(c));var f=function(){o.parse(o.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(e,n){if(e||!n)return t(e);var r={};if(a){var o=rt(i);o.length>0&&(r.resourceTiming=JSON.parse(JSON.stringify(o)))}t(null,Z({rawTileData:c.slice(0)},n,d,r))}))};n.isSpriteLoaded?f():n.once("isSpriteLoaded",(function(){n.scheduler?n.scheduler.add(f,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):f()})),n.loaded=n.loaded||{},n.loaded[r]=o}))}},{key:"reloadTile",value:function(e,t){var n=this,r=this.loaded,i=e.uid,a=this;if(r&&r[i]){var o=r[i];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Gh(e.tileID.canonical,e.projection);var s=function(e,r){var i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,n.availableImages,a.actor,i)),t(e,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(e,t){var n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}},{key:"removeTile",value:function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}}]),n}(lt),e.WritingMode=qf,e.ZoomDependentExpression=si,e.add=ou,e.addDynamicAttributes=yp,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8];return e[0]=o*c-s*l,e[1]=i*l-r*c,e[2]=r*s-i*o,e[3]=s*u-a*c,e[4]=n*c-i*u,e[5]=i*a-n*s,e[6]=a*l-o*u,e[7]=r*u-n*l,e[8]=n*o-r*a,e},e.asyncAll=z,e.bezier=D,e.bindAll=J,e.boundsAttributes=rv,e.bufferConvexPolygon=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=U(r-1,-1,e.length-1),a=U(r+1,-1,e.length-1),o=e[r],s=e[a],u=e[i].sub(o).unit(),l=s.sub(o).unit(),c=l.angleWithSep(u.x,u.y),d=u.add(l).unit().mult(-1*t/Math.sin(c/2));n.push(o.add(d))}return n},e.cacheEntryPossiblyAdded=function(e){++ye>pe&&(e.getActor().send("enforceCacheSizeLimit",he),ye=0)},e.calculateGlobeLabelMatrix=function(e,t){var n=e.point,r=sl(n.x,n.y,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Ks(r,r,ol(qu(t)))},e.calculateGlobeMatrix=function(e){var t=e.point,n=t.x,r=t.y,i=e._center,a=i.lng,o=i.lat;return sl(n,r,e.worldSize,a,o)},e.calculateGlobeMercatorMatrix=function(e){var t=e.pixelsPerMeter,n=t/bl(1,e.center.lat),r=Gs(new Float64Array(16));return Js(r,r,[e.point.x,e.point.y,0]),Xs(r,r,[n,n,t]),Float32Array.from(r)},e.circumferenceAtLatitude=gl,e.clamp=j,e.clearTileCache=function(e){if(ve()){var t=y.caches.delete(fe);e&&t.catch(e).then((function(){return e()}))}},e.clipLine=mh,e.clone=function(e){var t=new Zs(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=$,e.collisionCircleLayout=uf,e.config=b,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Zs(16);return Zs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Hs,e.createExpression=ai,e.createLayout=_o,e.createStyleLayer=function(e){return"custom"===e.type?new Pp(e):new Lp[e.type](e)},e.cross=vu,e.degToRad=L,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=pu,e.earthRadius=pl,e.ease=N,e.easeCubicInOut=F,e.ecefToLatLng=function(e){var t=d(e,3),n=t[0],r=t[1],i=t[2],a=Math.hypot(n,r,i),o=Math.atan2(n,i),s=.5*Math.PI-Math.acos(-r/a);return new ml(M(o),M(s))},e.emitValidationErrors=Qi,e.endsWith=X,e.enforceCacheSizeLimit=function(e){me(),ce&&ce.then((function(t){t.keys().then((function(n){for(var r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=ff,e.evaluateSizeForZoom=hf,e.evaluateVariableOffset=Fh,e.evented=Ya,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=it,e.exported$1=w,e.extend=Z,e.extend$1=dt,e.fillExtrusionHeightLift=Md,e.filterObject=Q,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,d=r*s,f=i*o,h=i*s,p=i*u,v=a*o,m=a*s,g=a*u;return e[0]=1-d-p,e[1]=c+g,e[2]=f-m,e[3]=0,e[4]=c-g,e[5]=1-l-p,e[6]=h+v,e[7]=0,e[8]=f+m,e[9]=h-v,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=$s,e.furthestTileCorner=function(e){var t=Math.round((e+45+360)%360/90)%4;return O[t]},e.getAABBPointSquareDist=function(e,t,n){for(var r=0,i=0;i<2;++i){var a=n?n[i]:0;e[i]>a&&(r+=(e[i]-a)*(e[i]-a)),t[i]<a&&(r+=(a-t[i])*(a-t[i]))}return r},e.getAnchorAlignment=ih,e.getAnchorJustification=Nh,e.getBounds=function(e){var t,n=1/0,r=1/0,i=-1/0,a=-1/0,o=f(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),a=Math.max(a,s.y)}}catch(u){o.e(u)}finally{o.f()}return{min:new C(n,r),max:new C(i,a)}},e.getColumn=le,e.getGridMatrix=function(e,t,n,r){var i=t.getNorth(),a=t.getSouth(),o=t.getWest(),s=t.getEast(),u=1<<e.z,l=s-o,c=i-a,d=l/ju,f=-c/Bu[n],h=[0,d,0,f,0,0,i,o,0];if(e.z>0){var p=180/r;Ws(h,h,[p/l+1,0,0,0,p/c+1,0,-.5*p/d,.5*p/f,1])}return h[2]=u,h[5]=e.x,h[8]=e.y,h},e.getImage=Ce,e.getJSON=function(e,t){return xe(Z(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){var t=Sl-5;e=j(e,-t,t)/t*90;var n=Math.pow(Math.abs(Math.sin(L(e))),3);return Math.round(n*(Bu.length-1))},e.getMapSessionAPI=qe,e.getPerformanceMeasurement=rt,e.getProjection=hp,e.getRTLTextPluginStatus=Qa,e.getReferrer=we,e.getTilePoint=function(e,t){var n=t.x,r=t.y;return new C(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*Us,(r*e.scale-e.y)*Us)},e.getTileVec3=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return au(((t.x-n)*e.scale-e.x)*Us,(t.y*e.scale-e.y)*Us,kl(t.z,t.y))},e.getVideo=function(e,t){var n=y.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var i=y.document.createElement("source");Se(e[r])||(n.crossOrigin="Anonymous"),i.src=e[r],n.appendChild(i)}return{cancel:function(){}}},e.globeCenterToScreenPoint=function(e){var t=[0,0,0],n=Gs(new Float64Array(16));return Ks(n,e.pixelMatrix,e.globeMatrix),mu(t,t,n),new C(t[0],t[1])},e.globeDenormalizeECEF=ol,e.globeECEFOrigin=function(e,t){var n=[0,0,0];return mu(n,n,al(qu(t.canonical))),mu(n,n,e),n},e.globeMetersToEcef=Zu,e.globeNormalizeECEF=al,e.globePixelsToTileUnits=function(e,t){return Us/(512*Math.pow(2,e))*rl(qu(t))},e.globePoleMatrixForTile=function(e,t,n){var r=Gs(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return Qs(r,n.globeMatrix,i),Float32Array.from(r)},e.globeTileBounds=qu,e.globeTiltAtLngLat=ll,e.globeToMercatorTransition=ul,e.globeUseCustomAntiAliasing=function(e,t,n){var r=ul(n.zoom),i=e.style.map._antialias,a=!!t.extStandardDerivatives,o=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!i&&!o&&a},e.identity=Gs,e.identity$1=Au,e.invert=qs,e.isFullscreen=function(){return!!y.document.fullscreenElement||!!y.document.webkitFullscreenElement},e.isLngLatBehindGlobe=cl,e.isMapAuthenticated=function(e){return Ke.has(e)},e.isMapboxURL=Ie,e.isSafariWithAntialiasingBug=function(e){var t=e.navigator?e.navigator.userAgent:null;return!!se(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=xl,e.latLngToECEF=tl,e.len=wu,e.length=iu,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=wl,e.loadVectorTile=jv,e.makeRequest=xe,e.mapValue=function(e,t,n,r,i){return j((e-t)/(n-t)*(i-r)+r,r,i)},e.mercatorScale=El,e.mercatorXfromLng=yl,e.mercatorYfromLat=_l,e.mercatorZfromAltitude=bl,e.mul=tu,e.mul$1=bu,e.multiply=Ks,e.multiply$1=Ws,e.multiply$2=uu,e.nextPowerOfTwo=q,e.normalize=hu,e.normalize$1=Pu,e.normalize$2=ku,e.number=Vn,e.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*l,e[15]=1,e},e.pbf=_f,e.perspective=function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(a=1/(r-i)),e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=eo,e.pointGeometry=C,e.polesInViewport=function(e){var t=Gs(new Float64Array(16));Ks(t,e.pixelMatrix,e.globeMatrix);var n=[0,Uu,0],r=[0,zu,0];return mu(n,n,t),mu(r,r,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!cl(e,new ml(e.center.lat,90)),r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!cl(e,new ml(e.center.lat,-90))]},e.polygonContainsPoint=Kl,e.polygonIntersectsBox=Jl,e.polygonIntersectsPolygon=Bl,e.polygonizeBounds=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new C(n,n),a=e.sub(i),o=t.add(i),s=[a,new C(o.x,a.y),o,new C(a.x,o.y)];return r&&s.push(a.clone()),s},e.posAttributes=Lu,e.postMapLoadEvent=Ze,e.postPerformanceEvent=We,e.postTurnstileEvent=ze,e.potpack=Hf,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=M,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:qa,pluginURL:Ka}),Ya.on("pluginStateChange",e),e},e.removeAuthState=function(e){Ke.delete(e)},e.renderColorRamp=vc,e.resample=Cl,e.rotateX=Ys,e.rotateX$1=Tu,e.rotateY=Qs,e.rotateY$1=Cu,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+c*r,e[2]=s*i+d*r,e[3]=u*i+f*r,e[4]=l*i-a*r,e[5]=c*i-o*r,e[6]=d*i-s*r,e[7]=f*i-u*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=a*u+o*s,e[3]=o*u-a*s,e},e.scale=Xs,e.scale$1=xu,e.scale$2=du,e.scaleAndAdd=fu,e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.setCacheLimits=function(e,t){he=e,pe=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qa===Za||qa===Ha||qa===Wa)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ka=it.resolveURL(e),qa=Za,Ga=t,Xa(),n||$a()},e.smoothstep=B,e.spec=ct,e.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},e.storeAuthState=function(e,t){t?Ke.add(e):Ke.delete(e)},e.sub=_u,e.subtract=su,e.symbolSize=pf,e.tileAABB=function(e,t,n,r,i,a,o,s,u){if("globe"===u.name)return Yu(e,t,new jd(n,r,i));var l=Gh({z:n,x:r,y:i},u);return new Du([(a+l.x/l.scale)*t,t*(l.y/l.scale),o],[(a+l.x2/l.scale)*t,t*(l.y2/l.scale),s])},e.tileCornersToBounds=Qu,e.tileTransform=Gh,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},e.transformMat4=mu,e.transformMat4$1=Su,e.transformQuat=gu,e.transitionTileAABBinECEF=Ju,e.translate=Js,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Ja,e.uniqueId=W,e.updateGlobeVertexNormal=function(e,t,n,r,i){var a=5*t+2;e.float32[a+0]=n,e.float32[a+1]=r,e.float32[a+2]=i},e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFilter=function(e){return Yi(Li(e))},e.validateFog=function(e){return Yi(Hi(e))},e.validateLayer=function(e){return Yi(Ni(e))},e.validateLight=function(e){return Yi(Vi(e))},e.validateSource=function(e){return Yi(Ui(e))},e.validateStyle=Ki,e.validateTerrain=function(e){return Yi(Zi(e))},e.values=V,e.vectorTile=od,e.version=_,e.warnOnce=te,e.window=y,e.wrap=U})),y(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){var n,r="[",i=f(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r+="".concat(t(a),",")}}catch(c){i.e(c)}finally{i.f()}return"".concat(r,"]")}var o,s="{",u=f(Object.keys(e).sort());try{for(u.s();!(o=u.n()).done;){var l=o.value;s+="".concat(l,":").concat(t(e[l]),",")}}catch(c){u.e(c)}finally{u.f()}return"".concat(s,"}")}function n(n){var r,i="",a=f(e.refProperties);try{for(a.s();!(r=a.n()).done;){var o=r.value;i+="/".concat(t(n[o]))}}catch(s){a.e(s)}finally{a.f()}return i}var r=function(){function t(e){h(this,t),this.keyCache={},e&&this.replace(e)}return p(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,r){var i,a=this,o=f(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;this._layerConfigs[s.id]=s,(this._layers[s.id]=e.createStyleLayer(s)).compileFilter(),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(w){o.e(w)}finally{o.f()}var u,l=f(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}}catch(w){l.e(w)}finally{l.f()}this.familiesBySource={};var d,h=function(e,t){for(var r={},i=0;i<e.length;i++){var a=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=a);var o=r[a];o||(o=r[a]=[]),o.push(e[i])}var s=[];for(var u in r)s.push(r[u]);return s}(e.values(this._layerConfigs),this.keyCache),p=f(h);try{for(p.s();!(d=p.n()).done;){var v=d.value.map((function(e){return a._layers[e.id]})),m=v[0];if("none"!==m.visibility){var g=m.source||"",y=this.familiesBySource[g];y||(y=this.familiesBySource[g]={});var _=m.sourceLayer||"_geojsonTileLayer",b=y[_];b||(b=y[_]=[]),b.push(v)}}}catch(w){p.e(w)}finally{p.f()}}}]),t}(),i=function(){function t(){h(this,t)}return p(t,[{key:"loadTile",value:function(t,n){var r=t.uid,i=t.encoding,a=t.rawImageData,o=t.padding,s=t.buildQuadTree,u=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?this.getImageData(a,o):a;n(null,new e.DEMData(r,u,i,o<1,s))}},{key:"getImageData",value:function(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}]),t}(),a=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)u(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)u(t.coordinates[r],n);return t};function u(e,t){if(0!==e.length){l(e[0],t);for(var n=1;n<e.length;n++)l(e[n],!t)}}function l(e,t){for(var n=0,r=0,i=0,a=e.length,o=a-1;i<a;o=i++){var s=(e[i][0]-e[o][0])*(e[o][1]+e[i][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!=!!t&&e.reverse()}var c=e.VectorTileFeature.prototype.toGeoJSON,g=function(){function t(n){h(this,t),this._feature=n,this.extent=e.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return p(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,n=[],r=f(this._feature.geometry);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push([new e.pointGeometry(i[0],i[1])])}}catch(p){r.e(p)}finally{r.f()}return n}var a,o=[],s=f(this._feature.geometry);try{for(s.s();!(a=s.n()).done;){var u,l=a.value,c=[],d=f(l);try{for(d.s();!(u=d.n()).done;){var h=u.value;c.push(new e.pointGeometry(h[0],h[1]))}}catch(p){d.e(p)}finally{d.f()}o.push(c)}}catch(p){s.e(p)}finally{s.f()}return o}},{key:"toGeoJSON",value:function(e,t,n){return c.call(this,e,t,n)}}]),t}(),y=function(){function t(n){h(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=n.length,this._features=n}return p(t,[{key:"feature",value:function(e){return new g(this._features[e])}}]),t}(),_={},b={get exports(){return _},set exports(e){_=e}},w=e.pointGeometry,x=e.vectorTile.VectorTileFeature,k=S;function S(e,t){this.options=t||{},this.features=e,this.length=e.length}function E(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}S.prototype.feature=function(e){return new E(this.features[e],this.options.extent)},E.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new w(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},E.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var u=o[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},E.prototype.toGeoJSON=x.prototype.toGeoJSON;var A=e.pbf,T=k;function C(e){var t=new A;return function(e,t){for(var n in e.layers)t.writeMessage(3,P,e.layers[n])}(e,t),t.finish()}function P(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,I,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)t.writeMessage(4,F,a[n])}function I(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,R,e),t.writeVarintField(3,n.type),t.writeMessage(4,O,n)}function R(e,t){var n=e.feature,r=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in n.properties){var u=n.properties[s],l=a[s];if(null!==u){void 0===l&&(r.push(s),a[s]=l=r.length-1),t.writeVarint(l);var c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var d=c+":"+u,f=o[d];void 0===f&&(i.push(u),o[d]=f=i.length-1),t.writeVarint(f)}}}function L(e,t){return(t<<3)+(7&e)}function M(e){return e<<1^e>>31}function O(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,a=0,o=n.length,s=0;s<o;s++){var u=n[s],l=1;1===r&&(l=u.length),t.writeVarint(L(1,l));for(var c=3===r?u.length-1:u.length,d=0;d<c;d++){1===d&&1!==r&&t.writeVarint(L(2,c-1));var f=u[d].x-i,h=u[d].y-a;t.writeVarint(M(f)),t.writeVarint(M(h)),i+=f,a+=h}3===r&&t.writeVarint(L(7,1))}}function F(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function D(e,t,n,r,i,a){if(!(i-r<=n)){var o=r+i>>1;N(e,t,o,r,i,a%2),D(e,t,n,r,o-1,a+1),D(e,t,n,o+1,i,a+1)}}function N(e,t,n,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,s=n-r+1,u=Math.log(o),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1);N(e,t,n,Math.max(r,Math.floor(n-s*l/o+c)),Math.min(i,Math.floor(n+(o-s)*l/o+c)),a)}var d=t[2*n+a],f=r,h=i;for(j(e,t,r,n),t[2*i+a]>d&&j(e,t,r,i);f<h;){for(j(e,t,f,h),f++,h--;t[2*f+a]<d;)f++;for(;t[2*h+a]>d;)h--}t[2*r+a]===d?j(e,t,r,h):j(e,t,++h,i),h<=n&&(r=h+1),n<=h&&(i=h-1)}}function j(e,t,n,r){B(e,n,r),B(t,2*n,2*r),B(t,2*n+1,2*r+1)}function B(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function U(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}b.exports=C,_.fromVectorTileJs=C,_.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new T(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return C({layers:n})},_.GeoJSONWrapper=T;var z,V=function(e){return e[0]},Z=function(e){return e[1]},H=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;h(this,e),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),u=this.coords=new a(2*t.length),l=0;l<t.length;l++)s[l]=l,u[2*l]=n(t[l]),u[2*l+1]=r(t[l]);D(s,u,i,0,s.length-1,0)}return p(e,[{key:"range",value:function(e,t,n,r){return function(e,t,n,r,i,a,o){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var d=l.pop(),f=l.pop(),h=l.pop();if(f-h<=o)for(var p=h;p<=f;p++)s=t[2*p],u=t[2*p+1],s>=n&&s<=i&&u>=r&&u<=a&&c.push(e[p]);else{var v=Math.floor((h+f)/2);s=t[2*v],u=t[2*v+1],s>=n&&s<=i&&u>=r&&u<=a&&c.push(e[v]);var m=(d+1)%2;(0===d?n<=s:r<=u)&&(l.push(h),l.push(v-1),l.push(m)),(0===d?i>=s:a>=u)&&(l.push(v+1),l.push(f),l.push(m))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)}},{key:"within",value:function(e,t,n){return function(e,t,n,r,i,a){for(var o=[0,e.length-1,0],s=[],u=i*i;o.length;){var l=o.pop(),c=o.pop(),d=o.pop();if(c-d<=a)for(var f=d;f<=c;f++)U(t[2*f],t[2*f+1],n,r)<=u&&s.push(e[f]);else{var h=Math.floor((d+c)/2),p=t[2*h],v=t[2*h+1];U(p,v,n,r)<=u&&s.push(e[h]);var m=(l+1)%2;(0===l?n-i<=p:r-i<=v)&&(o.push(d),o.push(h-1),o.push(m)),(0===l?n+i>=p:r+i>=v)&&(o.push(h+1),o.push(c),o.push(m))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}]),e}(),W={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},G=Math.fround||(z=new Float32Array(1),function(e){return z[0]=+e,z[0]}),q=function(){function e(t){h(this,e),this.options=te(Object.create(W),t),this.trees=new Array(this.options.maxZoom+1)}return p(e,[{key:"load",value:function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,a=t.nodeSize;n&&console.time("total time");var o="prepare ".concat(e.length," points");n&&console.time(o),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(J(e[u],u));this.trees[i+1]=new H(s,ne,re,a,Float32Array),n&&console.timeEnd(o);for(var l=i;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new H(s,ne,re,a,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var o=this.getClusters([n,r,180,a],t),s=this.getClusters([-180,r,i,a],t);return o.concat(s)}var u,l=this.trees[this._limitZoom(t)],c=l.range(Q(n),$(a),Q(i),$(r)),d=[],h=f(c);try{for(h.s();!(u=h.n()).done;){var p=u.value,v=l.points[p];d.push(v.numPoints?X(v):this.points[v.index])}}catch(m){h.e(m)}finally{h.f()}return d}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var a=i.points[t];if(!a)throw new Error(r);var o,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),u=i.within(a.x,a.y,s),l=[],c=f(u);try{for(c.s();!(o=c.n()).done;){var d=o.value,h=i.points[d];h.parentId===e&&l.push(h.numPoints?X(h):this.points[h.index])}}catch(p){c.e(p)}finally{c.f()}if(0===l.length)throw new Error(r);return l}},{key:"getLeaves",value:function(e,t,n){var r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}},{key:"getTile",value:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,l),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,r,i){var a,o=this.getChildren(t),s=f(o);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u.properties;if(l&&l.cluster?i+l.point_count<=r?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,n,r,i):i<r?i++:e.push(u),e.length===n)break}}catch(c){s.e(c)}finally{s.f()}return i}},{key:"_addTileFeatures",value:function(e,t,n,r,i,a){var o,s=f(e);try{for(s.s();!(o=s.n()).done;){var u=t[o.value],l=u.numPoints,c=void 0,d=void 0,h=void 0;if(l)c=Y(u),d=u.x,h=u.y;else{var p=this.points[u.index];c=p.properties,d=Q(p.geometry.coordinates[0]),h=$(p.geometry.coordinates[1])}var v={type:1,geometry:[[Math.round(this.options.extent*(d*i-n)),Math.round(this.options.extent*(h*i-r))]],tags:c},m=void 0;l?m=u.id:this.options.generateId?m=u.index:this.points[u.index].id&&(m=this.points[u.index].id),void 0!==m&&(v.id=m),a.features.push(v)}}catch(g){s.e(g)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=[],r=this.options,i=r.radius,a=r.extent,o=r.reduce,s=r.minPoints,u=i/(a*Math.pow(2,t)),l=0;l<e.length;l++){var c=e[l];if(!(c.zoom<=t)){c.zoom=t;var d,h=this.trees[t+1],p=h.within(c.x,c.y,u),v=c.numPoints||1,m=v,g=f(p);try{for(g.s();!(d=g.n()).done;){var y=d.value,_=h.points[y];_.zoom>t&&(m+=_.numPoints||1)}}catch(M){g.e(M)}finally{g.f()}if(m>v&&m>=s){var b,w=c.x*v,x=c.y*v,k=o&&v>1?this._map(c,!0):null,S=(l<<5)+(t+1)+this.points.length,E=f(p);try{for(E.s();!(b=E.n()).done;){var A=b.value,T=h.points[A];if(!(T.zoom<=t)){T.zoom=t;var C=T.numPoints||1;w+=T.x*C,x+=T.y*C,T.parentId=S,o&&(k||(k=this._map(c,!0)),o(k,this._map(T)))}}}catch(M){E.e(M)}finally{E.f()}c.parentId=S,n.push(K(w/m,x/m,S,m,k))}else if(n.push(c),m>1){var P,I=f(p);try{for(I.s();!(P=I.n()).done;){var R=P.value,L=h.points[R];L.zoom<=t||(L.zoom=t,n.push(L))}}catch(M){I.e(M)}finally{I.f()}}}}return n}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?te({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?te({},r):r}}]),e}();function K(e,t,n,r,i){return{x:G(e),y:G(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function J(e,t){var n=d(e.geometry.coordinates,2),r=n[0],i=n[1];return{x:G(Q(r)),y:G($(i)),zoom:1/0,index:t,parentId:-1}}function X(e){return{type:"Feature",id:e.id,properties:Y(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),ee(e.y)]}};var t}function Y(e){var t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?Math.round(t/100)/10+"k":t;return te(te({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function Q(e){return e/360+.5}function $(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ee(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function te(e,t){for(var n in t)e[n]=t[n];return e}function ne(e){return e.x}function re(e){return e.y}function ie(e,t,n,r){for(var i,a=r,o=n-t>>1,s=n-t,u=e[t],l=e[t+1],c=e[n],d=e[n+1],f=t+3;f<n;f+=3){var h=ae(e[f],e[f+1],u,l,c,d);if(h>a)i=f,a=h;else if(h===a){var p=Math.abs(f-o);p<s&&(i=f,s=p)}}a>r&&(i-t>3&&ie(e,t,i,r),e[i+2]=a,n-i>3&&ie(e,i,n,r))}function ae(e,t,n,r,i,a){var o=i-n,s=a-r;if(0!==o||0!==s){var u=((e-n)*o+(t-r)*s)/(o*o+s*s);u>1?(n=i,r=a):u>0&&(n+=o*u,r+=s*u)}return(o=e-n)*o+(s=t-r)*s}function oe(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)se(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)se(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)se(e,t[r][i])}(i),i}function se(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ue(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===a)le(i,s);else if("MultiPoint"===a)for(var l=0;l<i.length;l++)le(i[l],s);else if("LineString"===a)ce(i,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(l=0;l<i.length;l++)ce(i[l],s=[],o,!1),e.push(oe(u,"LineString",s,t.properties));return}de(i,s,o,!1)}else if("Polygon"===a)de(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(l=0;l<t.geometry.geometries.length;l++)ue(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];de(i[l],c,o,!0),s.push(c)}}e.push(oe(u,a,s,t.properties))}}function le(e,t){t.push(fe(e[0])),t.push(he(e[1])),t.push(0)}function ce(e,t,n,r){for(var i,a,o=0,s=0;s<e.length;s++){var u=fe(e[s][0]),l=he(e[s][1]);t.push(u),t.push(l),t.push(0),s>0&&(o+=r?(i*l-u*a)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-a,2))),i=u,a=l}var c=t.length-3;t[2]=1,ie(t,0,c,n),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function de(e,t,n,r){for(var i=0;i<e.length;i++){var a=[];ce(e[i],a,n,r),t.push(a)}}function fe(e){return e/360+.5}function he(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function pe(e,t,n,r,i,a,o,s){if(r/=t,a>=(n/=t)&&o<r)return e;if(o<n||a>=r)return null;for(var u=[],l=0;l<e.length;l++){var c=e[l],d=c.geometry,f=c.type,h=0===i?c.minX:c.minY,p=0===i?c.maxX:c.maxY;if(h>=n&&p<r)u.push(c);else if(!(p<n||h>=r)){var v=[];if("Point"===f||"MultiPoint"===f)ve(d,v,n,r,i);else if("LineString"===f)me(d,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)ye(d,v,n,r,i,!1);else if("Polygon"===f)ye(d,v,n,r,i,!0);else if("MultiPolygon"===f)for(var m=0;m<d.length;m++){var g=[];ye(d[m],g,n,r,i,!0),g.length&&v.push(g)}if(v.length){if(s.lineMetrics&&"LineString"===f){for(m=0;m<v.length;m++)u.push(oe(c.id,f,v[m],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===v.length?(f="LineString",v=v[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===v.length?"Point":"MultiPoint"),u.push(oe(c.id,f,v,c.tags))}}}return u.length?u:null}function ve(e,t,n,r,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=n&&o<=r&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function me(e,t,n,r,i,a,o){for(var s,u,l=ge(e),c=0===i?be:we,d=e.start,f=0;f<e.length-3;f+=3){var h=e[f],p=e[f+1],v=e[f+2],m=e[f+3],g=e[f+4],y=0===i?h:p,_=0===i?m:g,b=!1;o&&(s=Math.sqrt(Math.pow(h-m,2)+Math.pow(p-g,2))),y<n?_>n&&(u=c(l,h,p,m,g,n),o&&(l.start=d+s*u)):y>r?_<r&&(u=c(l,h,p,m,g,r),o&&(l.start=d+s*u)):_e(l,h,p,v),_<n&&y>=n&&(u=c(l,h,p,m,g,n),b=!0),_>r&&y<=r&&(u=c(l,h,p,m,g,r),b=!0),!a&&b&&(o&&(l.end=d+s*u),t.push(l),l=ge(e)),o&&(d+=s)}var w=e.length-3;h=e[w],p=e[w+1],v=e[w+2],(y=0===i?h:p)>=n&&y<=r&&_e(l,h,p,v),w=l.length-3,a&&w>=3&&(l[w]!==l[0]||l[w+1]!==l[1])&&_e(l,l[0],l[1],l[2]),l.length&&t.push(l)}function ge(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ye(e,t,n,r,i,a){for(var o=0;o<e.length;o++)me(e[o],t,n,r,i,a,!1)}function _e(e,t,n,r){e.push(t),e.push(n),e.push(r)}function be(e,t,n,r,i,a){var o=(a-t)/(r-t);return e.push(a),e.push(n+(i-n)*o),e.push(1),o}function we(e,t,n,r,i,a){var o=(a-n)/(i-n);return e.push(t+(r-t)*o),e.push(a),e.push(1),o}function xe(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=ke(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(ke(a.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var u=[],l=0;l<a.geometry[s].length;l++)u.push(ke(a.geometry[s][l],t));i.push(u)}n.push(oe(a.id,o,i,a.tags))}return n}function ke(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function Se(e,t){if(e.transformed)return e;var n,r,i,a=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(Ee(l[r],l[r+1],t,a,o,s));else for(r=0;r<l.length;r++){var d=[];for(i=0;i<l[r].length;i+=2)d.push(Ee(l[r][i],l[r][i+1],t,a,o,s));u.geometry.push(d)}}return e.transformed=!0,e}function Ee(e,t,n,r,i,a){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-a))]}function Ae(e,t,n,r,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,Te(o,e[s],a,i);var u=e[s].minX,l=e[s].minY,c=e[s].maxX,d=e[s].maxY;u<o.minX&&(o.minX=u),l<o.minY&&(o.minY=l),c>o.maxX&&(o.maxX=c),d>o.maxY&&(o.maxY=d)}return o}function Te(e,t,n,r){var i=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)Ce(o,i,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)Ce(o,i[s],e,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)Ce(o,l[s],e,n,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===a&&r.lineMetrics){for(var d in c={},t.tags)c[d]=t.tags[d];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(f.id=t.id),e.features.push(f)}}function Ce(e,t,n,r,i,a){var o=r*r;if(r>0&&t.size<(i?o:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>o)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,a=i-2;r<i;a=r,r+=2)n+=(e[r]-e[a])*(e[r+1]+e[a+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=o,e[i-1-r]=s}}(s,a),e.push(s)}}function Pe(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ue(n,e.features[r],t,r);else ue(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=pe(e,1,-1-n,n,0,-1,2,t),a=pe(e,1,1-n,2+n,0,-1,2,t);return(i||a)&&(r=pe(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=xe(i,1).concat(r)),a&&(r=r.concat(xe(a,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ie(e,t,n){return 32*((1<<e)*n+t)+e}function Re(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new y(r.features),a=_(i);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:i,rawData:a.buffer})}Pe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Pe.prototype.splitTile=function(e,t,n,r,i,a,o){for(var s=[e,t,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,d=Ie(t,n,r),f=this.tiles[d];if(!f&&(l>1&&console.time("creation"),f=this.tiles[d]=Ae(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var h="z"+t;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(f.source=e,i){if(t===u.maxZoom||t===i)continue;var p=1<<i-t;if(n!==Math.floor(a/p)||r!==Math.floor(o/p))continue}else if(t===u.indexMaxZoom||f.numPoints<=u.indexMaxPoints)continue;if(f.source=null,0!==e.length){l>1&&console.time("clipping");var v,m,g,y,_,b,w=.5*u.buffer/u.extent,x=.5-w,k=.5+w,S=1+w;v=m=g=y=null,_=pe(e,c,n-w,n+k,0,f.minX,f.maxX,u),b=pe(e,c,n+x,n+S,0,f.minX,f.maxX,u),e=null,_&&(v=pe(_,c,r-w,r+k,1,f.minY,f.maxY,u),m=pe(_,c,r+x,r+S,1,f.minY,f.maxY,u),_=null),b&&(g=pe(b,c,r-w,r+k,1,f.minY,f.maxY,u),y=pe(b,c,r+x,r+S,1,f.minY,f.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(v||[],t+1,2*n,2*r),s.push(m||[],t+1,2*n,2*r+1),s.push(g||[],t+1,2*n+1,2*r),s.push(y||[],t+1,2*n+1,2*r+1)}}},Pe.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug;if(e<0||e>24)return null;var o=1<<e,s=Ie(e,t=(t%o+o)%o,n);if(this.tiles[s])return Se(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,l=e,c=t,d=n;!u&&l>0;)l--,c=Math.floor(c/2),d=Math.floor(d/2),u=this.tiles[Ie(l,c,d)];return u&&u.source?(a>1&&console.log("found parent tile z%d-%d-%d",l,c,d),a>1&&console.time("drilling down"),this.splitTile(u.source,l,c,d,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?Se(this.tiles[s],i):null):null};var Le=function(t){v(r,t);var n=m(r);function r(e,t,i,a,o){var s;return h(this,r),s=n.call(this,e,t,i,a,Re),o&&(s.loadGeoJSON=o),s}return p(r,[{key:"loadData",value:function(t,n){var r=this,i=t&&t.request,o=i&&i.collectResourceTiming;this.loadGeoJSON(t,(function(s,u){if(s||!u)return n(s);if("object"!=typeof u)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));a(u,!0);try{if(t.filter){var l=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===l.result)throw new Error(l.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var c=u.features.filter((function(e){return l.value.evaluate({zoom:0},e)}));u={type:"FeatureCollection",features:c}}r._geoJSONIndex=t.cluster?new q(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var i={},a={},o={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l++){var f=c[l],h=d(r[f],2),p=h[0],v=h[1],m=e.createExpression(v),g=e.createExpression("string"==typeof p?[p,["accumulated"],["get",f]]:p);i[f]=m.value,a[f]=g.value}return n.map=function(e){s.properties=e;for(var t={},n=0,r=u;n<r.length;n++){var a=r[n];t[a]=i[a].evaluate(o,s)}return t},n.reduce=function(e,t){s.properties=t;for(var n=0,r=u;n<r.length;n++){var i=r[n];o.accumulated=e[i],e[i]=a[i].evaluate(o,s)}},n}(t)).load(u.features):function(e,t){return new Pe(e,t)}(u,t.geojsonVtOptions)}catch(s){return n(s)}r.loaded={};var f={};if(o){var h=e.getPerformanceMeasurement(i);h&&(f.resourceTiming={},f.resourceTiming[t.source]=JSON.parse(JSON.stringify(h)))}n(null,f)}))}},{key:"reloadTile",value:function(e,t){var n=this.loaded;return n&&n[e.uid]?o(s(r.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),r}(e.VectorTileWorkerSource),Me=function(){function t(n){var r=this;h(this,t),this.self=n,this.actor=new e.Actor(n,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Le},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return p(t,[{key:"clearCaches",value:function(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}},{key:"checkIfReady",value:function(e,t,n){n()}},{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"spriteLoaded",value:function(t,n){for(var r in this.isSpriteLoaded[t]=n,this.workerSources[t]){var i=this.workerSources[t][r];for(var a in i)i[a]instanceof e.VectorTileWorkerSource&&(i[a].isSpriteLoaded=n,i[a].fire(new e.Event("isSpriteLoaded")))}}},{key:"setImages",value:function(e,t,n){for(var r in this.availableImages[e]=t,this.workerSources[e]){var i=this.workerSources[e][r];for(var a in i)i[a].availableImages=t}n()}},{key:"enableTerrain",value:function(e,t,n){this.terrain=t,n()}},{key:"setProjection",value:function(t,n){this.projections[t]=e.getProjection(n)}},{key:"setLayers",value:function(e,t,n){this.getLayerIndex(e).replace(t),n()}},{key:"updateLayers",value:function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}},{key:"loadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}},{key:"loadDEMTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}},{key:"reloadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}},{key:"abortTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}},{key:"removeTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}},{key:"removeSource",value:function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}}},{key:"loadWorkerSource",value:function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}},{key:"syncRTLPluginState",value:function(t,n,r){try{e.plugin.setState(n);var i=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=i){this.self.importScripts(i);var a=e.plugin.isParsed();r(a?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),a)}}catch(e){r(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}},{key:"getWorkerSource",value:function(e,t,n){var r=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){var i={send:function(t,n,i,a,o,s){r.actor.send(t,n,i,e,o,s)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](i,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,n){e.enforceCacheSizeLimit(n)}},{key:"getWorkerPerformanceMetrics",value:function(e,t,n){n(void 0,void 0)}}]),t}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Me(self)),Me})),y(["./shared"],(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n}var n=l;function l(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===g[t=e&&e.failIfMajorPerformanceCaveat]&&(g[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(l.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),g[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var g={};function y(t,n,r){var i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function _(t,n,r){for(var i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t),a=0,o=Object.keys(n);a<o.length;a++){var s=o[a];i.setAttributeNS(null,s,n[s])}return r&&r.appendChild(i),i}l.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var b,w=e.window.document&&e.window.document.documentElement.style,x=w&&void 0!==w.userSelect?"userSelect":"WebkitUserSelect";function k(){w&&x&&(b=w[x],w[x]="none")}function S(){w&&x&&(w[x]=b)}function E(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",E,!0)}function A(){e.window.addEventListener("click",E,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",E,!0)}),0)}function T(e,t){var n=e.getBoundingClientRect();return I(e,n,t)}function C(e,t){for(var n=e.getBoundingClientRect(),r=[],i=0;i<t.length;i++)r.push(I(e,n,t[i]));return r}function P(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function I(t,n,r){var i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.pointGeometry((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function R(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(e[0]=a*(o=1/o),e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}function L(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var M=function(t){v(r,t);var n=m(r);function r(){var t;return h(this,r),(t=n.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return p(r,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,n=f(this.requestors);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.ids,a=r.callback;this._notify(i,a)}}catch(o){n.e(o)}finally{n.f()}this.requestors=[]}}},{key:"hasImage",value:function(e){return!!this.getImage(e)}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),r=!1),r}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var n,r=0,i=f(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a[0]<r||a[1]<a[0]||t<a[1])return!1;r=a[1]}}catch(o){i.e(o)}finally{i.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var n=!0;if(!this.isLoaded()){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.images[a]||(n=!1)}}catch(o){i.e(o)}finally{i.f()}}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,n){var r,i={},a=f(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?i[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(u){a.e(u)}finally{a.f()}n(null,i)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},a=new e.ImagePosition(i,r);this.patterns[t]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),i=r.w,a=r.h,o=this.atlasImage;for(var s in o.resize({width:i||1,height:a||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,d=this.images[s].data,f=d.width,h=d.height;e.RGBAImage.copy(d,o,{x:0,y:0},{x:l,y:c},{width:f,height:h}),e.RGBAImage.copy(d,o,{x:0,y:h-1},{x:l,y:c-1},{width:f,height:1}),e.RGBAImage.copy(d,o,{x:0,y:0},{x:l,y:c+h},{width:f,height:1}),e.RGBAImage.copy(d,o,{x:f-1,y:0},{x:l-1,y:c},{width:1,height:h}),e.RGBAImage.copy(d,o,{x:0,y:0},{x:l+f,y:c},{width:1,height:h})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];L(i)&&this.updateImage(r,i)}}}catch(a){n.e(a)}finally{n.f()}}}]),r}(e.Evented),O=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new(function(){function t(){h(this,t),this.specification=e.spec.light.position}return p(t,[{key:"possiblyEvaluate",value:function(t,n){return function(t){var n=d(t,3),r=n[0],i=n[1],a=n[2],o=e.degToRad(i+90),s=e.degToRad(a);return{x:r*Math.cos(o)*Math.sin(s),y:r*Math.sin(o)*Math.sin(s),z:r*Math.cos(s),azimuthal:i,polar:a}}(t.expression.evaluate(n))}},{key:"interpolate",value:function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}}]),t}()),color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),F="-transition",D=function(t){v(r,t);var n=m(r);function r(t){var i;return h(this,r),(i=n.call(this))._transitionable=new e.Transitionable(O),i.setLight(t),i._transitioning=i._transitionable.untransitioned(),i}return p(r,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,n))for(var r in t){var i=t[r];e.endsWith(r,F)?this._transitionable.setTransition(r.slice(0,-F.length),i):this._transitionable.setValue(r,i)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),r}(e.Evented),N=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),j="-transition",B=function(t){v(r,t);var n=m(r);function r(t,i){var a;return h(this,r),(a=n.call(this))._transitionable=new e.Transitionable(N),a.set(t),a._transitioning=a._transitionable.untransitioned(),a.drapeRenderMode=i,a}return p(r,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){for(var n in t){var r=t[n];e.endsWith(n,j)?this._transitionable.setTransition(n.slice(0,-j.length),r):this._transitionable.setValue(n,r)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),r}(e.Evented);function U(t,n,r,i){var a=e.smoothstep(45,65,r),o=z(t,i),s=d(o,2),u=s[0],l=s[1],c=e.length(n),f=1-Math.min(1,Math.exp((c-u)/(l-u)*-6));return f*=f*f,(f=Math.min(1,1.00747*f))*a*t.alpha}function z(e,t){var n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}var V=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])}),Z="-transition",H=function(t){v(r,t);var n=m(r);function r(t,i){var a;return h(this,r),(a=n.call(this))._transitionable=new e.Transitionable(V),a.set(t),a._transitioning=a._transitionable.untransitioned(),a._transform=i,a}return p(r,[{key:"state",get:function(){var t=this._transform,n="globe"===t.projection.name,r=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),a=[.5,3];return{range:n?[e.number(a[0],i[0],r),e.number(a[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}},{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,n)){for(var r=0,i=Object.keys(e.spec.fog);r<i.length;r++){var a=i[r];t&&void 0===t[a]&&(t[a]=e.spec.fog[a].default)}for(var o in t){var s=t[o];e.endsWith(o,Z)?this._transitionable.setTransition(o.slice(0,-Z.length),s):this._transitionable.setValue(o,s)}}}},{key:"getOpacity",value:function(t){if(!this._transform.projection.supportsFog)return 0;var n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}},{key:"getOpacityAtLatLng",value:function(t,n){return this._transform.projection.supportsFog?function(t,n,r){var i=e.MercatorCoordinate.fromLngLat(n),a=r.elevation?r.elevation.getAtPointOrZero(i):0,o=[i.x,i.y,a];return e.transformMat4(o,o,r.mercatorFogMatrix),U(t,o,r.pitch,r._fov)}(this.state,t,n):0}},{key:"getFovAdjustedRange",value:function(e){return this._transform.projection.supportsFog?z(this.state,e):[0,1]}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),r}(e.Evented),W=function(){function t(n,r){var i=this;h(this,t),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),o=0;o<a.length;o++){var s=new t.Actor(a[o],r,this.id);s.name="Worker ".concat(o),this.actors.push(s)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){i.ready=!0}))}return p(t,[{key:"broadcast",value:function(t,n,r){e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r=r||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function G(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}W.Actor=e.Actor;var q=function(){function t(e,n,r,i){h(this,t),this.screenBounds=e,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}return p(t,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}},{key:"bufferedCameraGeometry",value:function(t){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}},{key:"bufferedCameraGeometryGlobe",value:function(t){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,t),a=this.cameraPoint.clone();switch(3*((a.y>n.y)+(a.y>r.y))+((a.x>n.x)+(a.x>r.x))){case 0:i[0]=a,i[4]=a.clone();break;case 1:i.splice(1,0,a);break;case 2:i[1]=a;break;case 3:i.splice(4,0,a);break;case 5:i.splice(2,0,a);break;case 6:i[3]=a;break;case 7:i.splice(3,0,a);break;case 8:i[2]=a}return i}},{key:"containsTile",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.queryPadding/n._pixelsPerMercatorPixel+1,o=r?this._bufferedCameraMercator(a,n):this._bufferedScreenMercator(a,n),s=t.tileID.wrap+(o.unwrapped?i:0),u=o.polygon.map((function(n){return e.getTilePoint(t.tileTransform,n,s)}));if(e.polygonIntersectsBox(u,0,0,e.EXTENT,e.EXTENT)){s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);var l,c=this.screenGeometryMercator.polygon.map((function(n){return e.getTileVec3(t.tileTransform,n,s)})),d=c.map((function(t){return new e.pointGeometry(t[0],t[1])})),f=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),h=e.getTileVec3(t.tileTransform,f,s),p=c.map((function(t){var n=e.sub(t,t,h);return e.normalize(n,n),new e.Ray(h,n)})),v=G(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:d,tilespaceRays:p,bufferedTilespaceGeometry:u,bufferedTilespaceBounds:(l=e.getBounds(u),l.min.x=e.clamp(l.min.x,0,e.EXTENT),l.min.y=e.clamp(l.min.y,0,e.EXTENT),l.max.x=e.clamp(l.max.x,0,e.EXTENT),l.max.y=e.clamp(l.max.y,0,e.EXTENT),l),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:v}}}},{key:"_bufferedScreenMercator",value:function(e,t){var n,r=X(e);return this._screenRaycastCache[r]?this._screenRaycastCache[r]:(n="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._screenRaycastCache[r]=n,n)}},{key:"_bufferedCameraMercator",value:function(e,t){var n,r=X(e);return this._cameraRaycastCache[r]?this._cameraRaycastCache[r]:(n="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._cameraRaycastCache[r]=n,n)}},{key:"_projectAndResample",value:function(t,n){var r=function(t,n){var r=e.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],a=[0,e.GLOBE_RADIUS,0,1],o=[0,0,0,1];e.transformMat4$1(i,i,r),e.transformMat4$1(a,a,r),e.transformMat4$1(o,o,r);var s=new e.pointGeometry(i[0]/i[3],i[1]/i[3]),u=new e.pointGeometry(a[0]/a[3],a[1]/a[3]),l=e.polygonContainsPoint(t,s)&&i[3]<o[3],d=e.polygonContainsPoint(t,u)&&a[3]<o[3];if(!l&&!d)return null;var f=function(e,t,n){for(var r=1;r<e.length;r++){var i=J(t.pointCoordinate3D(e[r-1]).x),a=J(t.pointCoordinate3D(e[r]).x);if(n<0){if(i<a)return{idx:r,t:-i/(a-1-i)}}else if(a<i)return{idx:r,t:(1-i)/(a+1-i)}}return null}(t,n,l?-1:1);if(!f)return null;var h=f.idx,p=f.t,v=h>1?K(t.slice(0,h),n):[],m=h<t.length?K(t.slice(h),n):[];v=v.map((function(t){return new e.pointGeometry(J(t.x),t.y)})),m=m.map((function(t){return new e.pointGeometry(J(t.x),t.y)}));var g=c(v);0===g.length&&g.push(m[m.length-1]);var y,_=e.number(g[g.length-1].y,(0===m.length?v[0]:m[0]).y,p);return y=l?[new e.pointGeometry(0,_),new e.pointGeometry(0,0),new e.pointGeometry(1,0),new e.pointGeometry(1,_)]:[new e.pointGeometry(1,_),new e.pointGeometry(1,1),new e.pointGeometry(0,1),new e.pointGeometry(0,_)],g.push.apply(g,c(y)),0===m.length?g.push(v[0]):g.push.apply(g,c(m)),{polygon:g.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:!1}}(t,n);if(r)return r;var i=function(t,n){for(var r=!1,i=-1/0,a=0,o=0;o<t.length-1;o++)t[o].x>i&&(i=t[o].x,a=o);for(var s=0;s<t.length-1;s++){var u=(a+s)%(t.length-1),l=t[u],c=t[u+1];Math.abs(l.x-c.x)>.5&&(l.x<c.x?(l.x+=1,0===u&&(t[t.length-1].x+=1)):(c.x+=1,u+1===t.length-1&&(t[0].x+=1)),r=!0)}var d=e.mercatorXfromLng(n.center.lng);return r&&d<Math.abs(d-1)&&t.forEach((function(e){e.x-=1})),{polygon:t,unwrapped:r}}(K(t,n).map((function(t){return new e.pointGeometry(J(t.x),t.y)})),n);return{polygon:i.polygon.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:i.unwrapped}}}],[{key:"createFromScreenPoints",value:function(n,r){var i,a;if(n instanceof e.pointGeometry||"number"==typeof n[0]){var o=e.pointGeometry.convert(n);i=[o],a=r.isPointAboveHorizon(o)}else{var s=e.pointGeometry.convert(n[0]),u=e.pointGeometry.convert(n[1]);i=[s,u],a=e.polygonizeBounds(s,u).every((function(e){return r.isPointAboveHorizon(e)}))}return new t(i,r.getCameraPoint(),a,r)}}]),t}();function K(t,n){return e.resample(t,(function(e){var t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function J(e){return e<0?1+e%1:e%1}function X(e){return 100*e|0}function Y(t,n,r,i,a){var o=function(r,i){if(r)return a(r);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;var o=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),o.tiles=n.canonicalizeTileset(o,t.url),a(null,o)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,r,i),e.ResourceType.Source),o):e.exported.frame((function(){return o(null,t)}))}var Q,$=function(){function t(n,r,i){h(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=r||0,this.maxzoom=i||24}return p(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<a&&t.y>=i&&t.y<o}}]),t}(),ee=function(){function e(t,n,r){h(this,e),this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||n.destroy()}return p(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ne=function(){function e(t,n,r,i){h(this,e),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||n.destroy()}return p(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var n=0;n<this.attributes.length;n++){var r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[te[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),re=function(){function e(t){h(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return p(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),ie=function(t){v(r,t);var n=m(r);function r(){return h(this,r),n.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),r}(re),ae=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),n}(re),oe=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),n}(re),se=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(re),ue=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),n}(re),le=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),n}(re),ce=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),n}(re),de=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),n}(re),fe=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),n}(re),he=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(re),pe=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),n}(re),ve=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),n}(re),me=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),n}(re),ge=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(re),ye=function(t){v(r,t);var n=m(r);function r(){return h(this,r),n.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),r}(re),_e=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),n}(re),be=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),n}(re),we=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),n}(re),xe=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),n}(re),ke=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),n}(re),Se=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),n}(re),Ee=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(re),Ae=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),Te=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),Ce=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),n}(re),Pe=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),Ie=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),n}(re),Re=function(e){v(n,e);var t=m(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).vao=e.extVertexArrayObject,r}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),n}(re),Le=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),n}(re),Me=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(re),Oe=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(re),Fe=function(e){v(n,e);var t=m(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).context=e,i.parent=r,i}return p(n,[{key:"getDefault",value:function(){return null}}]),n}(re),De=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),n}(Fe),Ne=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(Fe),je=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(Ne),Be=function(){function e(t,n,r,i){h(this,e),this.context=t,this.width=n,this.height=r;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new De(t,a),i&&(this.depthAttachment=new Ne(t,a))}return p(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),Ue=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(h(this,n),this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){var r=e;this.extVertexArrayObject={createVertexArrayOES:r.createVertexArray.bind(e),deleteVertexArrayOES:r.deleteVertexArray.bind(e),bindVertexArrayOES:r.bindVertexArray.bind(e)}}this.clearColor=new ie(this),this.clearDepth=new ae(this),this.clearStencil=new oe(this),this.colorMask=new se(this),this.depthMask=new ue(this),this.stencilMask=new le(this),this.stencilFunc=new ce(this),this.stencilOp=new de(this),this.stencilTest=new fe(this),this.depthRange=new he(this),this.depthTest=new pe(this),this.depthFunc=new ve(this),this.blend=new me(this),this.blendFunc=new ge(this),this.blendColor=new ye(this),this.blendEquation=new _e(this),this.cullFace=new be(this),this.cullFaceSide=new we(this),this.frontFace=new xe(this),this.program=new ke(this),this.activeTexture=new Se(this),this.viewport=new Ee(this),this.bindFramebuffer=new Ae(this),this.bindRenderbuffer=new Te(this),this.bindTexture=new Ce(this),this.bindVertexBuffer=new Pe(this),this.bindElementBuffer=new Ie(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Re(this),this.pixelStoreUnpack=new Le(this),this.pixelStoreUnpackPremultiplyAlpha=new Me(this),this.pixelStoreUnpackFlipY=new Oe(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}return p(n,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new ee(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,n){return new ne(this,e,t,n)}},{key:"createRenderbuffer",value:function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(e,t,n){return new Be(this,e,t,n)}},{key:"clear",value:function(e){var t=e.color,n=e.depth,r=e.stencil,i=this.gl,a=0;t&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),n}(),ze=function(t){v(r,t);var n=m(r);function r(t,a,o,s){var l;if(h(this,r),(l=n.call(this)).id=t,l.dispatcher=o,l.type="vector",l.minzoom=0,l.maxzoom=22,l.scheme="xyz",l.tileSize=512,l.reparseOverscaled=!0,l.isTileClipped=!0,l._loaded=!1,e.extend(i(l),e.pick(a,["url","scheme","tileSize","promoteId"])),l._options=e.extend({type:"vector"},a),l._collectResourceTiming=a.collectResourceTiming,512!==l.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return l.setEventedParent(s),l._tileWorkers={},l._deduped=new e.DedupedRequest,u(l)}return p(r,[{key:"load",value:function(t){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));var r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=Y(this._options,this.map._requestManager,r,i,(function(a,o){n._tileJSONRequest=null,n._loaded=!0,a?(r&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(r)),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(i)),n.fire(new e.ErrorEvent(a))):o&&(e.extend(n,o),o.bounds&&(n.tileBounds=new $(o.bounds,n.minzoom,n.maxzoom)),e.postTurnstileEvent(o.tiles,n.map._requestManager._customAccessToken),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(a)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"reload",value:function(){var e=this;this.cancelTileJSONRequest(),this.load((function(){return e.map.style._clearSource(e.id)}))}},{key:"setTiles",value:function(e){return this._options.tiles=e,this.reload(),this}},{key:"setUrl",value:function(e){return this.url=e,this._options.url=e,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,n){var r=this,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",a,s.bind(this));else if(t.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,s.bind(this),void 0,!0);else{var o=e.loadVectorTile.call({deduped:this._deduped},a,(function(e,n){e||!n?s.call(r,e):(a.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,s.bind(r),void 0,!0))}),!0);t.request={cancel:o}}function s(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}]),r}(e.Evented),Ve=function(t){v(r,t);var n=m(r);function r(t,a,o,s){var u;return h(this,r),(u=n.call(this)).id=t,u.dispatcher=o,u.setEventedParent(s),u.type="raster",u.minzoom=0,u.maxzoom=22,u.roundZoom=!0,u.scheme="xyz",u.tileSize=512,u._loaded=!1,u._options=e.extend({type:"raster"},a),e.extend(i(u),e.pick(a,["url","scheme","tileSize"])),u}return p(r,[{key:"load",value:function(t){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Y(this._options,this.map._requestManager,null,null,(function(r,i){n._tileJSONRequest=null,n._loaded=!0,r?n.fire(new e.ErrorEvent(r)):i&&(e.extend(n,i),i.bounds&&(n.tileBounds=new $(i.bounds,n.minzoom,n.maxzoom)),e.postTurnstileEvent(i.tiles),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"reload",value:function(){var e=this;this.cancelTileJSONRequest(),this.load((function(){return e.map.style._clearSource(e.id)}))}},{key:"setTiles",value:function(e){return this._options.tiles=e,this.reload(),this}},{key:"setUrl",value:function(e){return this.url=e,this._options.url=e,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=this,i=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(i,a,o,s){return delete t.request,t.aborted?(t.state="unloaded",n(null)):i?(t.state="errored",n(i)):a?(r.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s}),t.setTexture(a,r.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),void n(null)):n(null)}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}],[{key:"loadTileData",value:function(e,t,n){e.setTexture(t,n)}},{key:"unloadTileData",value:function(e,t){e.texture&&t.saveTileTexture(e.texture)}}]),r}(e.Evented);function Ze(t,n,r,i,a,o,s,u){var l=[t,r,a,n,i,o,1,1,1],c=[s,u,1],f=e.adjoint([],l),h=e.transformMat3(c,c,e.transpose(f,f)),p=d(h,3),v=p[0],m=p[1],g=p[2];return e.multiply$1(l,[v,0,0,0,m,0,0,0,g],l)}var He=function(t){v(r,t);var n=m(r);function r(e,t,i,a){var o;return h(this,r),(o=n.call(this)).id=e,o.dispatcher=i,o.coordinates=t.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(a),o.options=t,o._dirty=!1,o}return p(r,[{key:"load",value:function(t,n){var r=this;this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(n,i){if(r._imageRequest=null,r._loaded=!0,n)r.fire(new e.ErrorEvent(n));else if(i){var a=e.window.HTMLImageElement;r.image=i instanceof a?e.exported.getImageData(i):i,r._dirty=!0,r.width=r.image.width,r.height=r.image.height,t&&(r.coordinates=t),r._finishLoading()}}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}},{key:"setCoordinates",value:function(t){this.coordinates=t,this._boundsArray=void 0;var n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){var n,r=1/0,i=1/0,a=-1/0,o=-1/0,s=f(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;r=Math.min(r,u.x),i=Math.min(i,u.y),a=Math.max(a,u.x),o=Math.max(o,u.y)}}catch(h){s.e(h)}finally{s.f()}var l=Math.max(a-r,o-i),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),d=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((r+a)/2*d),Math.floor((i+o)/2*d))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"_clear",value:function(){this._boundsArray=void 0}},{key:"_prepareData",value:function(t){for(var n in this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}if(!this._boundsArray){var i=e.tileTransform(this.tileID,this.map.transform.projection),a=this.coordinates.map((function(t){var n=i.projection.project(t[0],t[1]);return e.getTilePoint(i,n)._round()})),o=d(a,4),s=o[0],u=o[1],l=o[2],c=o[3];this.perspectiveTransform=function(t,n,r,i,a,o,s,u,l,c){var d=Ze(0,0,t,0,0,n,t,n),f=Ze(r,i,a,o,s,u,l,c);return e.multiply$1(f,e.adjoint(d,d),f),[f[6]/f[8]*t/e.EXTENT,f[7]/f[8]*n/e.EXTENT]}(this.width,this.height,s.x,s.y,u.x,u.y,c.x,c.y,l.x,l.y);var f=this._boundsArray=new e.StructArrayLayout4i8;f.emplaceBack(s.x,s.y,0,0),f.emplaceBack(u.x,u.y,e.EXTENT,0),f.emplaceBack(c.x,c.y,0,e.EXTENT),f.emplaceBack(l.x,l.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(f,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),We={vector:ze,raster:Ve,"raster-dem":function(t){v(r,t);var n=m(r);function r(t,i,a,o){var s;return h(this,r),(s=n.call(this,t,i,a,o)).type="raster-dem",s.maxzoom=22,s._options=e.extend({type:"raster-dem"},i),s.encoding=i.encoding||"mapbox",s}return p(r,[{key:"loadTile",value:function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});var u=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==Q&&(Q=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),Q),l=1-(a.width-e.prevPowerOfTwo(a.width))/2;l<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));var c=u?a:e.exported.getImageData(a,l),d={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:l};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",d,i.bind(this),void 0,!0))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,a=0===n.x?t.wrap-1:t.wrap,o=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,u={};return u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),u}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),r}(Ve),geojson:function(t){v(r,t);var n=m(r);function r(t,i,a,o){var s;h(this,r),(s=n.call(this)).id=t,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._loaded=!1,s.actor=a.getActor(),s.setEventedParent(o),s._data=i.data,s._options=e.extend({},i),s._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(s.maxzoom=i.maxzoom),i.type&&(s.type=i.type),i.attribution&&(s.attribution=i.attribution),s.promoteId=i.promoteId;var u=e.EXTENT/s.tileSize;return s.workerOptions=e.extend({source:s.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*u,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*u,extent:e.EXTENT,maxZoom:s.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*u,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),s}return p(r,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}},{key:"_updateWorkerData",value:function(){var t=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;var n=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),n,(function(n,r){if(t._loaded=!0,t._pendingLoad=null,n)t.fire(new e.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:t._metadataFired?"content":"metadata"};t._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[t.id]&&(i.resourceTiming=r.resourceTiming[t.id]),t.fire(new e.Event("data",i)),t._metadataFired=!0}t._coalesce&&(t._updateWorkerData(),t._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(t,n){var r=this,i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,a){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(a,r.map.painter,"reloadTile"===i),n(null))}),void 0,"loadTile"===i)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),video:function(t){v(r,t);var n=m(r);function r(e,t,i,a){var o;return h(this,r),(o=n.call(this,e,t,i,a)).roundZoom=!0,o.type="video",o.options=t,o}return p(r,[{key:"load",value:function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];var r,i=f(n.urls);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.urls.push(this.map._requestManager.transformRequest(a,e.ResourceType.Source).url)}}catch(o){i.e(o)}finally{i.f()}e.getVideo(this.urls,(function(n,r){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),r}(He),image:He,canvas:function(t){v(r,t);var n=m(r);function r(t,i,a,o){var s;return h(this,r),s=n.call(this,t,i,a,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),s.options=i,s.animate=void 0===i.animate||i.animate,s}return p(r,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1}}]),r}(He),custom:function(t){v(r,t);var n=m(r);function r(t,a,o,s){var u;return h(this,r),(u=n.call(this)).id=t,u.type="custom",u._dataType="raster",u._dispatcher=o,u._implementation=a,u.setEventedParent(s),u.scheme="xyz",u.minzoom=0,u.maxzoom=22,u.tileSize=512,u._loaded=!1,u.roundZoom=!0,u._implementation||u.fire(new e.ErrorEvent(new Error("Missing implementation for ".concat(u.id," custom source")))),u._implementation.loadTile||u.fire(new e.ErrorEvent(new Error("Missing loadTile implementation for ".concat(u.id," custom source")))),u._implementation.bounds&&(u.tileBounds=new $(u._implementation.bounds,u.minzoom,u.maxzoom)),a.update=u._update.bind(i(u)),a.clearTiles=u._clearTiles.bind(i(u)),a.coveringTiles=u._coveringTiles.bind(i(u)),e.extend(i(u),e.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"])),u}return p(r,[{key:"serialize",value:function(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}},{key:"load",value:function(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}},{key:"onRemove",value:function(e){this._implementation.onRemove&&this._implementation.onRemove(e)}},{key:"hasTile",value:function(e){if(this._implementation.hasTile){var t=e.canonical,n=t.x,r=t.y,i=t.z;return this._implementation.hasTile({x:n,y:r,z:i})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=t.tileID.canonical,i=r.x,a=r.y,o=r.z,s=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:i,y:a,z:o},{signal:s.signal})).then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===r?(t.state="errored",n(null)):null===r?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((function(e){20!==e.code&&(t.state="errored",n(e))})),t.request.cancel=function(){return s.abort()}}},{key:"loadTileData",value:function(e,t){Ve.loadTileData(e,t,this._map.painter)}},{key:"unloadTileData",value:function(e){Ve.unloadTileData(e,this._map.painter)}},{key:"unloadTile",value:function(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){var n=e.tileID.canonical,r=n.x,i=n.y,a=n.z;this._implementation.unloadTile({x:r,y:i,z:a})}t()}},{key:"abortTile",value:function(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}},{key:"hasTransition",value:function(){return!1}},{key:"_coveringTiles",value:function(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((function(e){return{x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}}))}},{key:"_clearTiles",value:function(){this._map.style._clearSource(this.id)}},{key:"_update",value:function(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}]),r}(e.Evented)},Ge=function(t,n,r,i){var a=new We[n.type](t,n,r,i);if(a.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(a.id));return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function qe(t,n){var r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Ke(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=e.tilesIn(r,o,s);u.sort(Xe);var l,c=[],d=f(u);try{for(d.s();!(l=d.n()).done;){var h=l.value;c.push({wrappedTileID:h.tile.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,n,e._state,h,i,a,qe(e.transform,h.tile.tileID),s)})}}catch(m){d.e(m)}finally{d.f()}var p=function(e){var t,n={},r={},i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.queryResults,s=a.wrappedTileID,u=r[s]=r[s]||{};for(var l in o){var c,d=o[l],h=u[l]=u[l]||{},p=n[l]=n[l]||[],v=f(d);try{for(v.s();!(c=v.n()).done;){var g=c.value;h[g.featureIndex]||(h[g.featureIndex]=!0,p.push(g))}}catch(m){v.e(m)}finally{v.f()}}}}catch(m){i.e(m)}finally{i.f()}return n}(c);for(var v in p)p[v].forEach((function(t){var n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return p}function Je(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(r,t))}return r}function Xe(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Ye(){return null!=Ta.workerClass?new Ta.workerClass:new e.window.Worker(Ta.workerUrl)}var Qe,$e="mapboxgl_preloaded_worker_pool",et=function(){function e(){h(this,e),this.active={}}return p(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new Ye);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[$e]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function tt(){return Qe||(Qe=new et),Qe}function nt(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return e.refProperties.forEach((function(e){e in n&&(r[e]=n[e])})),r}function rt(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=nt(e[r],t[e[r].ref]));return e}et.workerCount=2;var it={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function at(e,t,n){n.push({command:it.addSource,args:[e,t[e]]})}function ot(e,t,n){t.push({command:it.removeSource,args:[e]}),n[e]=!0}function st(e,t,n,r){ot(e,n,r),at(e,t,n)}function ut(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;return!0}function lt(e,n,r,i,a,o){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:o,args:[i,s,n[s],a]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:o,args:[i,s,n[s],a]}))}function ct(e){return e.id}function dt(e,t){return e[t.id]=t,e}var ft=function(){function t(e,n){h(this,t),this.reset(e,n)}return p(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,r=this._distances[n],i=t*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var a=n-1,o=this._distances[a],s=r-o,u=s>0?(i-o)/s:0;return this.points[a].mult(1-u).add(this.points[n].mult(u))}}]),t}(),ht=function(){function e(t,n,r){h(this,e);var i=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return p(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(e,t,n,r,i,a){this.boxCells[i].push(a)}},{key:"_insertCircleCell",value:function(e,t,n,r,i,a){this.circleCells[i].push(a)}},{key:"_query",value:function(e,t,n,r,i,a){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],d=this.circles[3*u+2];o.push({key:this.circleKeys[u],x1:l-d,y1:c-d,x2:l+d,y2:c+d})}return a?o.filter(a):o}return this._forEachCell(e,t,n,r,this._queryCell,o,{hitTest:i,seenUids:{box:{},circle:{}}},a),i?o.length>0:o}},{key:"_queryCircle",value:function(e,t,n,r,i){var a=e-n,o=e+n,s=t-n,u=t+n;if(o<0||a>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(a,s,o,u,this._queryCellCircle,l,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?l.length>0:l}},{key:"query",value:function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}},{key:"hitTest",value:function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}},{key:"hitTestCircle",value:function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}},{key:"_queryCell",value:function(e,t,n,r,i,a,o,s){var u=o.seenUids,l=this.boxCells[i];if(null!==l){var c,d=this.bboxes,h=f(l);try{for(h.s();!(c=h.n()).done;){var p=c.value;if(!u.box[p]){u.box[p]=!0;var v=4*p;if(e<=d[v+2]&&t<=d[v+3]&&n>=d[v+0]&&r>=d[v+1]&&(!s||s(this.boxKeys[p]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[p],x1:d[v],y1:d[v+1],x2:d[v+2],y2:d[v+3]})}}}}catch(E){h.e(E)}finally{h.f()}}var m=this.circleCells[i];if(null!==m){var g,y=this.circles,_=f(m);try{for(_.s();!(g=_.n()).done;){var b=g.value;if(!u.circle[b]){u.circle[b]=!0;var w=3*b;if(this._circleAndRectCollide(y[w],y[w+1],y[w+2],e,t,n,r)&&(!s||s(this.circleKeys[b]))){if(o.hitTest)return a.push(!0),!0;var x=y[w],k=y[w+1],S=y[w+2];a.push({key:this.circleKeys[b],x1:x-S,y1:k-S,x2:x+S,y2:k+S})}}}}catch(E){_.e(E)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(e,t,n,r,i,a,o,s){var u=o.circle,l=o.seenUids,c=this.boxCells[i];if(null!==c){var d,h=this.bboxes,p=f(c);try{for(p.s();!(d=p.n()).done;){var v=d.value;if(!l.box[v]){l.box[v]=!0;var m=4*v;if(this._circleAndRectCollide(u.x,u.y,u.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[v])))return a.push(!0),!0}}}catch(k){p.e(k)}finally{p.f()}}var g=this.circleCells[i];if(null!==g){var y,_=this.circles,b=f(g);try{for(b.s();!(y=b.n()).done;){var w=y.value;if(!l.circle[w]){l.circle[w]=!0;var x=3*w;if(this._circlesCollide(_[x],_[x+1],_[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[w])))return a.push(!0),!0}}}catch(k){b.e(k)}finally{b.f()}}}},{key:"_forEachCell",value:function(e,t,n,r,i,a,o,s){for(var u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),d=this._convertToYCellCoord(r),f=u;f<=c;f++)for(var h=l;h<=d;h++)if(i.call(this,e,t,n,r,this.xCellCount*h+f,a,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,n,r,i,a){var o=r-e,s=i-t,u=n+a;return u*u>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,n,r,i,a,o){var s=(a-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var l=(o-i)/2,c=Math.abs(t-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var d=u-s,f=c-l;return d*d+f*f<=n*n}}]),e}(),pt=Math.tan(85*Math.PI/180);function vt(t,n,r,i,a,o,s){var u=e.create();if(r)if("globe"===o.name){var l=e.calculateGlobeLabelMatrix(a,n);e.multiply(u,u,l)}else{var c=R([],s);u[0]=c[0],u[1]=c[1],u[4]=c[2],u[5]=c[3],i||e.rotateZ(u,u,a.angle)}else e.multiply(u,a.labelPlaneMatrix,t);return u}function mt(e,t,n,r,i,a,o){var s=vt(e,t,n,r,i,a,o);return"globe"===a.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function gt(t,n,r,i,a,o,s){if(r){if("globe"===o.name){var u=vt(t,n,r,i,a,o,s);return e.invert(u,u),e.multiply(u,t,u),u}var l=e.clone(t),c=e.identity([]);return c[0]=s[0],c[1]=s[1],c[4]=s[2],c[5]=s[3],e.multiply(l,l,c),i||e.rotateZ(l,l,-a.angle),l}return a.glCoordMatrix}function yt(t,n,r,i){var a=[t,n,r,1];r?e.transformMat4$1(a,a,i):Pt(a,a,i);var o=a[3];return a[0]/=o,a[1]/=o,a[2]/=o,a}function _t(e,t){return Math.min(.5+e/t*.5,1.5)}function bt(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function wt(t,n,r,i,a,o,s,u,l,c){var f=r.transform,h=i?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(h,r.transform.zoom),v="globe"===f.projection.name,m=[256/r.width*2+1,256/r.height*2+1],g=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();var y=null;v&&(y=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);for(var _,b=t.lineVertexArray,w=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,x=r.transform.width/r.transform.height,k=!1,S=0;S<w.length;S++){var E=w.get(S),A=E.numGlyphs,T=E.writingMode;if(T!==e.WritingMode.vertical||k||_===e.WritingMode.horizontal||(k=!0),_=T,!E.hidden&&T!==e.WritingMode.vertical||k){k=!1;var C=new e.pointGeometry(E.tileAnchorX,E.tileAnchorY),P=f.projection.projectTilePoint(C.x,C.y,c.canonical),I=P.x,R=P.y,L=P.z;if(l){var M=l(C),O=d(M,3);I+=O[0],R+=O[1],L+=O[2]}var F=[I,R,L,1];if(e.transformMat4$1(F,F,n),bt(F,m)){var D=_t(r.transform.cameraToCenterDistance,F[3]),N=e.evaluateSizeForFeature(h,p,E),j=s?N/D:N*D,B=yt(I,R,L,a);if(B[3]<=0)Ct(A,g);else{var U={},z=s?null:l,V=St(E,j,!1,u,n,a,o,t.glyphOffsetArray,b,g,y,B,C,U,x,z,f.projection,c,s);k=V.useVertical,z&&V.needsFlipping&&(U={}),(V.notEnoughRoom||k||V.needsFlipping&&St(E,j,!0,u,n,a,o,t.glyphOffsetArray,b,g,y,B,C,U,x,z,f.projection,c,s).notEnoughRoom)&&Ct(A,g)}}else Ct(A,g)}else Ct(A,g)}i?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function xt(e,t,n,r,i,a,o,s,u,l,c,d,f,h,p,v){var m=s.lineStartIndex,g=s.glyphStartIndex,y=s.segment,_=g+s.numGlyphs,b=m+s.lineLength,w=t.getoffsetX(g),x=t.getoffsetX(_-1),k=Tt(e*w,n,r,i,a,o,y,m,b,u,l,c,d,f,!0,h,p,v);if(!k)return null;var S=Tt(e*x,n,r,i,a,o,y,m,b,u,l,c,d,f,!0,h,p,v);return S?{first:k,last:S}:null}function kt(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:0!==n&&function(e,t){return 0===e||Math.abs(t/e)>pt}(r,i)?1===n?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function St(t,n,r,i,a,o,s,u,l,c,f,h,p,v,m,g,y,_,b){var w=n/24,x=t.lineOffsetX*w,k=t.lineOffsetY*w,S=t.lineStartIndex,E=t.glyphStartIndex,A=t.numGlyphs,T=t.segment,C=t.writingMode,P=t.flipState,I=S+t.lineLength,R=function(t){if(f){var n=d(t.up,3),r=n[0],i=n[1],a=n[2],o=c.length;e.updateGlobeVertexNormal(f,o+0,r,i,a),e.updateGlobeVertexNormal(f,o+1,r,i,a),e.updateGlobeVertexNormal(f,o+2,r,i,a),e.updateGlobeVertexNormal(f,o+3,r,i,a)}var s=d(t.point,3),u=s[0],l=s[1],h=s[2];e.addDynamicAttributes(c,u,l,h,t.angle)};if(A>1){var L=xt(w,u,x,k,r,h,p,t,l,o,v,g,!1,y,_,b);if(!L)return{notEnoughRoom:!0};if(i&&!r){var M,O,F,D,N=d(L.first.point,3),j=N[0],B=N[1],U=N[2],z=d(L.last.point,3),V=z[0],Z=z[1],H=z[2];M=yt(j,B,U,s),j=(O=d(M,2))[0],B=O[1],F=yt(V,Z,H,s);var W=kt(C,P,((V=(D=d(F,2))[0])-j)*m,(Z=D[1])-B);if(t.flipState=W&&W.needsFlipping?1:2,W)return W}R(L.first);for(var G=E+1;G<E+A-1;G++){var q=Tt(w*u.getoffsetX(G),x,k,r,h,p,T,S,I,l,o,v,g,!1,!1,y,_,b);if(!q)return c.length-=4*(G-E),{notEnoughRoom:!0};R(q)}R(L.last)}else{if(i&&!r){var K=yt(p.x,p.y,0,a),J=S+T+1,X=new e.pointGeometry(l.getx(J),l.gety(J)),Y=yt(X.x,X.y,0,a),Q=Y[3]>0?Y:At(p,X,K,1,a,void 0,y,_.canonical),$=kt(C,P,(Q[0]-K[0])*m,Q[1]-K[1]);if(t.flipState=$&&$.needsFlipping?1:2,$)return $}var ee=Tt(w*u.getoffsetX(E),x,k,r,h,p,T,S,I,l,o,v,g,!1,!1,y,_,b);if(!ee)return{notEnoughRoom:!0};R(ee)}return{}}function Et(e,t,n,r,i){var a=r.projectTilePoint(e.x,e.y,t),o=a.x,s=a.y,u=a.z;if(!i)return yt(o,s,u,n);var l=i(e),c=d(l,3);return yt(o+c[0],s+c[1],u+c[2],n)}function At(t,n,r,i,a,o,s,u){var l=Et(t.sub(n)._unit()._add(t),u,a,s,o);return e.sub(l,r,l),e.normalize(l,l),e.scaleAndAdd(l,r,l,i)}function Tt(t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g,y){var _=i?t-n:t+n,b=_>0?1:-1,w=0;i&&(b*=-1,w=Math.PI),b<0&&(w+=Math.PI);for(var x=u+s+(b>0?0:1)|0,k=a,S=a,E=0,A=0,T=Math.abs(_),C=[],P=[],I=o,R=I,L=function(){return At(R,I,S,T-E+1,d,h,m,g.canonical)};E+A<=T;){if((x+=b)<u||x>=l)return null;if(S=k,R=I,C.push(S),p&&P.push(R),I=new e.pointGeometry(c.getx(x),c.gety(x)),!(k=f[x])){var M=Et(I,g.canonical,d,m,h);k=M[3]>0?f[x]=M:L()}E+=A,A=e.distance(S,k)}v&&h&&(f[x]&&(k=L(),A=e.distance(S,k)),f[x]=k);var O=(T-E)/A,F=I.sub(R)._mult(O)._add(R),D=e.sub([],k,S),N=e.scaleAndAdd([],S,D,O),j=[0,0,1],B=D[0],U=D[1];if(y&&(0!==(j=m.upVector(g.canonical,F.x,F.y))[0]||0!==j[1]||1!==j[2])){var z=[j[2],0,-j[0]],V=e.cross([],j,z);e.normalize(z,z),e.normalize(V,V),B=e.dot(D,z),U=e.dot(D,V)}if(r){var Z=e.cross([],j,D);e.normalize(Z,Z),e.scaleAndAdd(N,N,Z,r*b)}var H=w+Math.atan2(U,B);return C.push(N),p&&P.push(F),{point:N,angle:H,path:C,tilePath:P,up:j}}function Ct(e,t){var n=t.length,r=n+4*e;t.resize(r),t.float32.fill(-1/0,4*n,4*r)}function Pt(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var It=100,Rt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ht(e.width+200,e.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ht(e.width+200,e.height+200,25);h(this,t),this.transform=e,this.grid=r,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+It,this.screenBottomBoundary=e.height+It,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=n}return p(t,[{key:"placeCollisionBox",value:function(e,t,n,r,i,a,o,s){var u=n.projectedAnchorX,l=n.projectedAnchorY,c=n.projectedAnchorZ,f=n.elevation,h=n.tileID,p=e.getProjection();if(f&&h){var v=p.upVector(h.canonical,n.tileAnchorX,n.tileAnchorY),m=d(v,3),g=m[0],y=m[1],_=m[2],b=p.upVectorScale(h.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;u+=g*f*b,l+=y*f*b,c+=_*f*b}var w=this.projectAndGetPerspectiveRatio(o,u,l,c,n.tileID,"globe"===p.name||!!f||this.transform.pitch>0,p),x=a*w.perspectiveRatio,k=(n.x1*t+r.x-n.padding)*x+w.point.x,S=(n.y1*t+r.y-n.padding)*x+w.point.y,E=(n.x2*t+r.x+n.padding)*x+w.point.x,A=(n.y2*t+r.y+n.padding)*x+w.point.y,T=w.perspectiveRatio<=.55||w.occluded;return!this.isInsideGrid(k,S,E,A)||!i&&this.grid.hitTest(k,S,E,A,s)||T?{box:[],offscreen:!1,occluded:w.occluded}:{box:[k,S,E,A],offscreen:this.isOffscreen(k,S,E,A),occluded:!1}}},{key:"placeCollisionCircles",value:function(t,n,r,i,a,o,s,u,l,c,h,p,v,m,g){var y=[],_=this.transform.elevation,b=t.getProjection(),w=_?_.getAtTileOffsetFunc(g,this.transform.center.lat,this.transform.worldSize,b):null,x=new e.pointGeometry(r.tileAnchorX,r.tileAnchorY),k=b.projectTilePoint(x.x,x.y,g.canonical),S=k.x,E=k.y,A=k.z;if(w){var T=w(x),C=d(T,3);S+=C[0],E+=C[1],A+=C[2]}var P="globe"===b.name,I=this.projectAndGetPerspectiveRatio(s,S,E,A,g,P||!!_||this.transform.pitch>0,b),R=I.perspectiveRatio,L=(h?o/R:o*R)/e.ONE_EM,M=yt(S,E,A,u),O=I.signedDistanceFromCamera>0?xt(L,a,r.lineOffsetX*L,r.lineOffsetY*L,!1,M,x,r,i,u,{},_&&!h?w:null,h&&!!_,b,g,h):null,F=!1,D=!1,N=!0;if(O&&!I.occluded){for(var j=.5*v*R+m,B=new e.pointGeometry(-100,-100),U=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),z=new ft,V=O.first,Z=O.last,H=V.path.length,W=[],G=H-1;G>=1;G--)W.push(V.path[G]);for(var q=1;q<Z.path.length;q++)W.push(Z.path[q]);var K=2.5*j;l&&(W=W.map((function(e,t){var n=d(e,3),r=n[0],i=n[1],a=n[2];return w&&!P&&(a=w(t<H-1?V.tilePath[H-1-t]:Z.tilePath[t-H+2])[2]),yt(r,i,a,l)})),W.some((function(e){return e[3]<=0}))&&(W=[]));var J=[];if(W.length>0){var X,Y=1/0,Q=-1/0,$=1/0,ee=-1/0,te=f(W);try{for(te.s();!(X=te.n()).done;){var ne=X.value;Y=Math.min(Y,ne[0]),$=Math.min($,ne[1]),Q=Math.max(Q,ne[0]),ee=Math.max(ee,ne[1])}}catch(me){te.e(me)}finally{te.f()}Q>=B.x&&Y<=U.x&&ee>=B.y&&$<=U.y&&(J=[W.map((function(t){return new e.pointGeometry(t[0],t[1])}))],(Y<B.x||Q>U.x||$<B.y||ee>U.y)&&(J=e.clipLine(J,B.x,B.y,U.x,U.y)))}var re,ie=f(J);try{for(ie.s();!(re=ie.n()).done;){var ae=re.value;z.reset(ae,.25*j);var oe=0;oe=z.length<=.5*j?1:Math.ceil(z.paddedLength/K)+1;for(var se=0;se<oe;se++){var ue=se/Math.max(oe-1,1),le=z.lerp(ue),ce=le.x+It,de=le.y+It;y.push(ce,de,j,0);var fe=ce-j,he=de-j,pe=ce+j,ve=de+j;if(N=N&&this.isOffscreen(fe,he,pe,ve),D=D||this.isInsideGrid(fe,he,pe,ve),!n&&this.grid.hitTestCircle(ce,de,j,p)&&(F=!0,!c))return{circles:[],offscreen:!1,collisionDetected:F,occluded:!1}}}}catch(me){ie.e(me)}finally{ie.f()}}return{circles:!c&&F||!D?[]:y,offscreen:N,collisionDetected:F,occluded:I.occluded}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,r=[],i=1/0,a=1/0,o=-1/0,s=-1/0,u=f(t);try{for(u.s();!(n=u.n()).done;){var l=n.value,c=new e.pointGeometry(l.x+It,l.y+It);i=Math.min(i,c.x),a=Math.min(a,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y),r.push(c)}}catch(b){u.e(b)}finally{u.f()}var d,h=this.grid.query(i,a,o,s).concat(this.ignoredGrid.query(i,a,o,s)),p={},v={},m=f(h);try{for(m.s();!(d=m.n()).done;){var g=d.value,y=g.key;if(void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),!p[y.bucketInstanceId][y.featureIndex]){var _=[new e.pointGeometry(g.x1,g.y1),new e.pointGeometry(g.x2,g.y1),new e.pointGeometry(g.x2,g.y2),new e.pointGeometry(g.x1,g.y2)];e.polygonIntersectsPolygon(r,_)&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===v[y.bucketInstanceId]&&(v[y.bucketInstanceId]=[]),v[y.bucketInstanceId].push(y.featureIndex))}}}catch(b){m.e(b)}finally{m.f()}return v}},{key:"insertCollisionBox",value:function(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,n,r,i){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,n,r,i,a,o,s){var u=[n,r,i,1],l=!1;if(i||this.transform.pitch>0){e.transformMat4$1(u,u,t);var c="globe"===s.name;if(this.fogState&&a&&!c){var d=function(t,n,r,i,a,o){var s=o.calculateFogTileMatrix(a),u=[n,r,i];return e.transformMat4(u,u,s),U(t,u,o.pitch,o._fov)}(this.fogState,n,r,i,a.toUnwrapped(),this.transform);l=d>.9}}else Pt(u,u,t);var f=u[3];return{point:new e.pointGeometry((u[0]/f+1)/2*this.transform.width+It,(-u[1]/f+1)/2*this.transform.height+It),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/f*.5,1.5),signedDistanceFromCamera:f,occluded:o&&u[2]>f||l}}},{key:"isOffscreen",value:function(e,t,n,r){return n<It||e>=this.screenRightBoundary||r<It||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}();function Lt(t,n,r){var i=n.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function Mt(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;var r=n.clone();return r.setProjection(t.projection),Lt(r,t.getProjection(),e)}function Ot(e,t,n){return t.name===n.projection.name?e.projMatrix:Lt(n,t,e)}var Ft=function(){function e(t,n,r,i){h(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):i&&r?1:0,this.placed=r}return p(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Dt=function(){function e(t,n,r,i,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];h(this,e),this.text=new Ft(t?t.text:null,n,r,a),this.icon=new Ft(t?t.icon:null,n,i,a),this.clipped=o}return p(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),Nt=p((function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h(this,e),this.text=t,this.icon=n,this.skipFade=r,this.clipped=i})),jt=p((function t(){h(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]})),Bt=p((function e(t,n,r,i,a){h(this,e),this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=a})),Ut=function(){function e(t){h(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return p(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function zt(t,n,r,i,a){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*n,u=-(o.verticalAlign-.5)*r,l=e.evaluateVariableOffset(t,i);return new e.pointGeometry(s+l[0]*a,u+l[1]*a)}function Vt(t,n,r,i,a){var o=new e.pointGeometry(t,n);return r&&o._rotate(i?a:-a),o}var Zt=function(){function t(e,n,r,i,a){h(this,t),this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new Rt(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Ut(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return p(t,[{key:"getBucketParts",value:function(t,n,r,i){var a=r.getBucket(n),o=r.latestFeatureIndex;if(a&&o&&n.id===a.layerIds[0]){var s=a.layers[0].layout,u=r.collisionBoxArray,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,d=r.tileID.toUnwrapped();this.transform.setProjection(a.projection);var h,p,v,m=(h=r.tileID,p=a.getProjection(),v=this.transform,p.name===this.projection?v.calculateProjMatrix(h.toUnwrapped()):Lt(v,p,h)),g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();var _=n.dynamicFilter(),b=n.dynamicFilterNeedsFeature(),w=this.transform.calculatePixelsToTileUnitsMatrix(r),x=mt(m,r.tileID.canonical,g,y,this.transform,a.getProjection(),w),k=null;if(g){var S=gt(m,r.tileID.canonical,g,y,this.transform,a.getProjection(),w);k=e.multiply([],this.transform.labelPlaneMatrix,S)}var E=null;_&&r.latestFeatureIndex&&(E={unwrappedTileID:d,dynamicFilter:_,dynamicFilterNeedsFeature:b,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new Bt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID);var A={bucket:a,layout:s,posMatrix:m,textLabelPlaneMatrix:x,labelToScreenMatrix:k,clippingData:E,scale:l,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:u,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i){var T,C=f(a.sortKeyRanges);try{for(C.s();!(T=C.n()).done;){var P=T.value,I=P.sortKey,R=P.symbolInstanceStart,L=P.symbolInstanceEnd;t.push({sortKey:I,symbolInstanceStart:R,symbolInstanceEnd:L,parameters:A})}}catch(M){C.e(M)}finally{C.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:A})}}},{key:"attemptAnchorPlacement",value:function(e,t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g){var y,_=d.textOffset0,b=d.textOffset1,w=d.crossTileID,x=[_,b],k=zt(e,n,r,x,i),S=this.collisionIndex.placeCollisionBox(h,i,t,Vt(k.x,k.y,a,o,this.transform.angle),c,s,u,l.predicate);if(v){var E=h.getSymbolInstanceIconSize(g,this.transform.zoom,d.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(h,E,v,Vt(k.x,k.y,a,o,this.transform.angle),c,s,u,l.predicate).box.length)return}if(S.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[w]&&this.prevPlacement.placements[w]&&this.prevPlacement.placements[w].text&&(y=this.prevPlacement.variableOffsets[w].anchor),this.variableOffsets[w]={textOffset:x,width:n,height:r,anchor:e,textScale:i,prevAnchor:y},this.markUsedJustification(h,e,d,p),h.allowVerticalPlacement&&(this.markUsedOrientation(h,p,d),this.placedOrientations[w]=p),{shift:k,placedGlyphBoxes:S}}},{key:"placeLayerBucketPart",value:function(t,n,r,i){var a=this,o=t.parameters,s=o.bucket,u=o.layout,l=o.posMatrix,c=o.textLabelPlaneMatrix,d=o.labelToScreenMatrix,h=o.clippingData,p=o.textPixelRatio,v=o.holdingForFade,m=o.collisionBoxArray,g=o.partiallyEvaluatedTextSize,y=o.partiallyEvaluatedIconSize,_=o.collisionGroup,b=u.get("text-optional"),w=u.get("icon-optional"),x=u.get("text-allow-overlap"),k=u.get("icon-allow-overlap"),S="map"===u.get("text-rotation-alignment"),E="map"===u.get("text-pitch-alignment"),A="none"!==u.get("icon-text-fit"),T="viewport-y"===u.get("symbol-z-order");this.transform.setProjection(s.projection);var C=x&&(k||!s.hasIconData()||w),P=k&&(x||!s.hasTextData()||b);!s.collisionArrays&&m&&s.deserializeCollisionBoxes(m),r&&i&&s.updateCollisionDebugBuffers(this.transform.zoom,m);var I=function(t,i,o){var m=t.crossTileID,T=t.numVerticalGlyphVertices;if(h){var I={zoom:a.transform.zoom,pitch:a.transform.pitch},R=null;if(h.dynamicFilterNeedsFeature){var L=a.retainedQueryData[s.bucketInstanceId];R=h.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:L.bucketIndex,sourceLayerIndex:L.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,h.dynamicFilter)(I,R,a.retainedQueryData[s.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),a.transform.calculateDistanceTileData(h.unwrappedTileID)))return a.placements[m]=new Nt(!1,!1,!1,!0),void(n[m]=!0)}if(!n[m])if(v)a.placements[m]=new Nt(!1,!1,!1);else{var M=!1,O=!1,F=!0,D=!1,N=!1,j=null,B={box:null,offscreen:null,occluded:null},U={box:null,offscreen:null,occluded:null},z=null,V=null,Z=null,H=0,W=0,G=0;o.textFeatureIndex?H=o.textFeatureIndex:t.useRuntimeCollisionCircles&&(H=t.featureIndex),o.verticalTextFeatureIndex&&(W=o.verticalTextFeatureIndex);var q=function(e){e.tileID=a.retainedQueryData[s.bucketInstanceId].tileID;var t=a.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},K=o.textBox;if(K){q(K);var J=function(n){var r=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!n&&a.prevPlacement){var i=a.prevPlacement.placedOrientations[m];i&&(a.placedOrientations[m]=i,r=i,a.markUsedOrientation(s,r,t))}return r},X=function(t,n){if(s.allowVerticalPlacement&&T>0&&o.verticalTextBox){var r,i=f(s.writingModes);try{for(i.s();!(r=i.n()).done&&(r.value===e.WritingMode.vertical?(B=n(),U=B):B=t(),!(B&&B.box&&B.box.length)););}catch(a){i.e(a)}finally{i.f()}}else B=t()};if(u.get("text-variable-anchor")){var Y=u.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[m]){var Q=a.prevPlacement.variableOffsets[m];Y.indexOf(Q.anchor)>0&&(Y=Y.filter((function(e){return e!==Q.anchor})),Y.unshift(Q.anchor))}var $=function(e,n,r){var o=s.getSymbolInstanceTextSize(g,t,a.transform.zoom,i),u=(e.x2-e.x1)*o+2*e.padding,c=(e.y2-e.y1)*o+2*e.padding,d=A&&!k?n:null;d&&q(d);for(var f={box:[],offscreen:!1,occluded:!1},h=x?2*Y.length:Y.length,v=0;v<h;++v){var m=a.attemptAnchorPlacement(Y[v%Y.length],e,u,c,o,S,E,p,l,_,v>=Y.length,t,i,s,r,d,g,y);if(m&&(f=m.placedGlyphBoxes)&&f.box&&f.box.length){M=!0,j=m.shift;break}}return f};X((function(){return $(K,o.iconBox,e.WritingMode.horizontal)}),(function(){var t=o.verticalTextBox;return t&&q(t),s.allowVerticalPlacement&&!(B&&B.box&&B.box.length)&&T>0&&t?$(t,o.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),B&&(M=B.box,F=B.offscreen,D=B.occluded);var ee=J(B&&B.box);if(!M&&a.prevPlacement){var te=a.prevPlacement.variableOffsets[m];te&&(a.variableOffsets[m]=te,a.markUsedJustification(s,te.anchor,t,ee))}}else{var ne=function(n,r){var o=s.getSymbolInstanceTextSize(g,t,a.transform.zoom,i),u=a.collisionIndex.placeCollisionBox(s,o,n,new e.pointGeometry(0,0),x,p,l,_.predicate);return u&&u.box&&u.box.length&&(a.markUsedOrientation(s,r,t),a.placedOrientations[m]=r),u};X((function(){return ne(K,e.WritingMode.horizontal)}),(function(){var t=o.verticalTextBox;return s.allowVerticalPlacement&&T>0&&t?(q(t),ne(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),J(B&&B.box&&B.box.length)}}if(M=(z=B)&&z.box&&z.box.length>0,F=z&&z.offscreen,D=z&&z.occluded,t.useRuntimeCollisionCircles){var re=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),ie=e.evaluateSizeForFeature(s.textSizeData,g,re),ae=u.get("text-padding");V=a.collisionIndex.placeCollisionCircles(s,x,re,s.lineVertexArray,s.glyphOffsetArray,ie,l,c,d,r,E,_.predicate,t.collisionCircleDiameter*ie/e.ONE_EM,ae,a.retainedQueryData[s.bucketInstanceId].tileID),M=x||V.circles.length>0&&!V.collisionDetected,F=F&&V.offscreen,D=V.occluded}if(o.iconFeatureIndex&&(G=o.iconFeatureIndex),o.iconBox){var oe=function(n){q(n);var r=A&&j?Vt(j.x,j.y,S,E,a.transform.angle):new e.pointGeometry(0,0),i=s.getSymbolInstanceIconSize(y,a.transform.zoom,t.placedIconSymbolIndex);return a.collisionIndex.placeCollisionBox(s,i,n,r,k,p,l,_.predicate)};O=U&&U.box&&U.box.length&&o.verticalIconBox?(Z=oe(o.verticalIconBox)).box.length>0:(Z=oe(o.iconBox)).box.length>0,F=F&&Z.offscreen,N=Z.occluded}var se=b||0===t.numHorizontalGlyphVertices&&0===T,ue=w||0===t.numIconVertices;if(se||ue?ue?se||(O=O&&M):M=O&&M:O=M=O&&M,M&&z&&z.box&&a.collisionIndex.insertCollisionBox(z.box,u.get("text-ignore-placement"),s.bucketInstanceId,U&&U.box&&W?W:H,_.ID),O&&Z&&a.collisionIndex.insertCollisionBox(Z.box,u.get("icon-ignore-placement"),s.bucketInstanceId,G,_.ID),V&&(M&&a.collisionIndex.insertCollisionCircles(V.circles,u.get("text-ignore-placement"),s.bucketInstanceId,H,_.ID),r)){var le=s.bucketInstanceId,ce=a.collisionCircleArrays[le];void 0===ce&&(ce=a.collisionCircleArrays[le]=new jt);for(var de=0;de<V.circles.length;de+=4)ce.circles.push(V.circles[de+0]),ce.circles.push(V.circles[de+1]),ce.circles.push(V.circles[de+2]),ce.circles.push(V.collisionDetected?1:0)}var fe="globe"!==s.projection.name;C=C&&(fe||!D),P=P&&(fe||!N),a.placements[m]=new Nt(M||C,O||P,F||s.justReloaded),n[m]=!0}};if(T)for(var R=s.getSortedSymbolIndexes(this.transform.angle),L=R.length-1;L>=0;--L){var M=R[L];I(s.symbolInstances.get(M),M,s.collisionArrays[M])}else for(var O=t.symbolInstanceStart;O<t.symbolInstanceEnd;O++)I(s.symbolInstances.get(O),O,s.collisionArrays[O]);if(r&&s.bucketInstanceId in this.collisionCircleArrays){var F=this.collisionCircleArrays[s.bucketInstanceId];e.invert(F.invProjMatrix,l),F.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}},{key:"markUsedJustification",value:function(t,n,r,i){var a=r.leftJustifiedTextSymbolIndex,o=r.centerJustifiedTextSymbolIndex,s=r.rightJustifiedTextSymbolIndex,u=r.verticalPlacedTextSymbolIndex,l=r.crossTileID,c=e.getAnchorJustification(n),d=i===e.WritingMode.vertical?u:"left"===c?a:"center"===c?o:"right"===c?s:-1;a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=d>=0&&a!==d?0:l),o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=d>=0&&o!==d?0:l),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=d>=0&&s!==d?0:l),u>=0&&(t.text.placedSymbolArray.get(u).crossTileID=d>=0&&u!==d?0:l)}},{key:"markUsedOrientation",value:function(t,n,r){var i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,a=n===e.WritingMode.vertical?n:0,o=r.leftJustifiedTextSymbolIndex,s=r.centerJustifiedTextSymbolIndex,u=r.rightJustifiedTextSymbolIndex,l=r.verticalPlacedTextSymbolIndex,c=t.text.placedSymbolArray;o>=0&&(c.get(o).placedOrientation=i),s>=0&&(c.get(s).placedOrientation=i),u>=0&&(c.get(u).placedOrientation=i),l>=0&&(c.get(l).placedOrientation=a)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=i[s];l?(this.opacities[s]=new Dt(l,r,u.text,u.icon,null,u.clipped),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new Dt(null,r,u.text,u.icon,u.skipFade,u.clipped),n=n||u.text||u.icon)}for(var c in i){var d=i[c];if(!this.opacities[c]){var f=new Dt(d,r,!1,!1);f.isHidden()||(this.opacities[c]=f,n=n||d.text.placed||d.icon.placed)}}for(var h in a)this.variableOffsets[h]||!this.opacities[h]||this.opacities[h].isHidden()||(this.variableOffsets[h]=a[h]);for(var p in o)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=o[p]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var n,r={},i=f(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,r,a.collisionBoxArray)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var i=t.layers[0].layout,a=!!t.layers[0].dynamicFilter(),o=new Dt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),u=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),d="map"===i.get("text-pitch-alignment"),f="none"!==i.get("icon-text-fit"),h=new Dt(null,0,s&&(u||!t.hasIconData()||i.get("icon-optional")),u&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var p=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},v=0,m=0;m<t.symbolInstances.length;m++){var g=t.symbolInstances.get(m),y=g.numHorizontalGlyphVertices,_=g.numVerticalGlyphVertices,b=g.crossTileID,w=g.numIconVertices,x=this.opacities[b];n[b]?x=o:x||(x=h,this.opacities[b]=x),n[b]=!0;var k=y>0||_>0,S=w>0,E=this.placedOrientations[b],A=E===e.WritingMode.vertical,T=E===e.WritingMode.horizontal||E===e.WritingMode.horizontalOnly;if(!k&&!S||x.isHidden()||v++,k){var C=Qt(x.text);p(t.text,y,A?$t:C),p(t.text,_,T?$t:C);var P=x.text.isHidden(),I=g.leftJustifiedTextSymbolIndex,R=g.centerJustifiedTextSymbolIndex,L=g.rightJustifiedTextSymbolIndex,M=g.verticalPlacedTextSymbolIndex,O=t.text.placedSymbolArray,F=P||A?1:0;I>=0&&(O.get(I).hidden=F),R>=0&&(O.get(R).hidden=F),L>=0&&(O.get(L).hidden=F),M>=0&&(O.get(M).hidden=P||T?1:0);var D=this.variableOffsets[b];D&&this.markUsedJustification(t,D.anchor,g,E);var N=this.placedOrientations[b];N&&(this.markUsedJustification(t,"left",g,N),this.markUsedOrientation(t,N,g))}if(S){var j=Qt(x.icon),B=g.placedIconSymbolIndex,U=g.verticalPlacedIconSymbolIndex,z=t.icon.placedSymbolArray,V=x.icon.isHidden()?1:0;B>=0&&(p(t.icon,w,A?$t:j),z.get(B).hidden=V),U>=0&&(p(t.icon,g.numVerticalIconVertices,T?$t:j),z.get(U).hidden=V)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var Z=t.collisionArrays[m];if(Z){var H=new e.pointGeometry(0,0),W=!0;if(Z.textBox||Z.verticalTextBox){if(l){var G=this.variableOffsets[b];G?(H=zt(G.anchor,G.width,G.height,G.textOffset,G.textScale),c&&H._rotate(d?this.transform.angle:-this.transform.angle)):W=!1}a&&(W=!x.clipped),Z.textBox&&Ht(t.textCollisionBox.collisionVertexArray,x.text.placed,!W||A,H.x,H.y),Z.verticalTextBox&&Ht(t.textCollisionBox.collisionVertexArray,x.text.placed,!W||T,H.x,H.y)}var q=W&&Boolean(!T&&Z.verticalIconBox);Z.iconBox&&Ht(t.iconCollisionBox.collisionVertexArray,x.icon.placed,q,f?H.x:0,f?H.y:0),Z.verticalIconBox&&Ht(t.iconCollisionBox.collisionVertexArray,x.icon.placed,!q,f?H.x:0,f?H.y:0)}}}if(t.fullyClipped=0===v,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var K=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=K.invProjMatrix,t.placementViewportMatrix=K.viewportMatrix,t.collisionCircleArray=K.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function Ht(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}var Wt=Math.pow(2,25),Gt=Math.pow(2,24),qt=Math.pow(2,17),Kt=Math.pow(2,16),Jt=Math.pow(2,9),Xt=Math.pow(2,8),Yt=Math.pow(2,1);function Qt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Wt+t*Gt+n*qt+t*Kt+n*Jt+t*Xt+n*Yt+t}var $t=0,en=function(){function e(t){h(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return p(e,[{key:"continuePlacement",value:function(e,t,n,r,i){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;){var o=a[this._currentPartIndex];if(t.placeLayerBucketPart(o,this._seenCrossTileIDs,n,0===o.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}]),e}(),tn=function(){function t(e,n,r,i,a,o,s,u){h(this,t),this.placement=new Zt(e,a,o,s,u),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}return p(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,n,r){for(var i=this,a=e.exported.now(),o=function(){var t=e.exported.now()-a;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new en(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),nn=512/e.EXTENT/2,rn=function(){function t(e,n,r){h(this,t),this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<n.length;i++){var a=n.get(i),o=a.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}}return p(t,[{key:"getScaledCoordinates",value:function(t,n){var r=nn/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.tileAnchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.tileAnchorY)*r)}}},{key:"findMatches",value:function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var a=e.get(i);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o){var s,u=this.getScaledCoordinates(a,t),l=f(o);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(Math.abs(c.coord.x-u.x)<=r&&Math.abs(c.coord.y-u.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}catch(d){l.e(d)}finally{l.f()}}}}}}]),t}(),an=function(){function e(){h(this,e),this.maxCrossTileID=0}return p(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),on=function(){function e(){h(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return p(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var a in r){var o=r[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),i[o.tileID.key]=o}this.indexes[n]=i}this.lng=e}},{key:"addBucket",value:function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var u=o[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var l=o[e.scaledTo(Number(a)).key];l&&l.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var d=t.symbolInstances.get(c);d.crossTileID||(d.crossTileID=n.generate(),i[d.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new rn(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var n in t.indexedSymbolInstances){var r,i=f(t.indexedSymbolInstances[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete this.usedCrossTileIDs[e][a.crossTileID]}}catch(o){i.e(o)}finally{i.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}]),e}(),sn=function(){function e(){h(this,e),this.layerIndexes={},this.crossTileIDs=new an,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return p(e,[{key:"addLayer",value:function(e,t,n,r){var i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new on);var a=!1,o={};"globe"!==r.name&&i.handleWrapJump(n);var s,u=f(t);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=l.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(l.tileID,c,this.crossTileIDs)&&(a=!0),o[c.bucketInstanceId]=!0)}}catch(d){u.e(d)}finally{u.f()}return i.removeStaleBuckets(o)&&(a=!0),a}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]}}]),e}(),un=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},ln=e.pick(it,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),cn=e.pick(it,["setCenter","setZoom","setBearing","setPitch"]),dn={version:8,layers:[],sources:{}},fn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},hn=function(n){v(a,n);var r=m(a);function a(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,a),(n=r.call(this)).map=t,n.dispatcher=new W(tt(),i(n)),n.imageManager=new M,n.imageManager.setEventedParent(i(n)),n.glyphManager=new e.GlyphManager(t._requestManager,o.localFontFamily?e.LocalGlyphMode.all:o.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,o.localFontFamily||o.localIdeographFontFamily),n.crossTileSymbolIndex=new sn,n._layers={},n._num3DLayers=0,n._numSymbolLayers=0,n._numCircleLayers=0,n._serializedLayers={},n._sourceCaches={},n._otherSourceCaches={},n._symbolSourceCaches={},n._loaded=!1,n._availableImages=[],n._order=[],n._drapedFirstOrder=[],n._markersNeedUpdate=!1,n._resetUpdates(),n.dispatcher.broadcast("setReferrer",e.getReferrer());var s=i(n);return n._rtlTextPluginCallback=a.registerForPluginStateChange((function(t){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var r in s._sourceCaches){var i=s._sourceCaches[r],a=i.getSource().type;"vector"!==a&&"geojson"!==a||i.reload()}}))})),n.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=n.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var r in n._layers){var i=n._layers[r];i.source===t.id&&n._validateLayer(i)}}})),n}return p(a,[{key:"loadURL",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);var a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,r){n._request=null,t?n.fire(new e.ErrorEvent(t)):r&&n._load(r,i)}))}},{key:"loadJSON",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((function(){n._request=null,n._load(t,!1!==r.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(dn,!1)}},{key:"_updateLayerCount",value:function(e,t){var n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}},{key:"_load",value:function(t,n){if(!n||!un(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection(),t.sources)this.addSource(r,t.sources[r],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);var i=rt(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var a,o=f(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}}catch(u){o.e(u)}finally{o.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new D(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"terrainSetForDrapingOnly",value:function(){return!!this.terrain&&0===this.terrain.drapeRenderMode}},{key:"setProjection",value:function(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}},{key:"applyProjectionUpdate",value:function(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}},{key:"_updateMapProjection",value:function(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}},{key:"_loadSprite",value:function(t){var n=this;this._spriteRequest=function(t,n,r){var i,a,o,s=e.exported.devicePixelRatio>1?"@2x":"",u=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){u=null,o||(o=e,i=t,c())})),l=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){l=null,o||(o=e,a=t,c())}));function c(){if(o)r(o);else if(i&&a){var t=e.exported.getImageData(a),n={};for(var s in i){var u=i[s],l=u.width,c=u.height,d=u.x,f=u.y,h=u.sdf,p=u.pixelRatio,v=u.stretchX,m=u.stretchY,g=u.content,y=new e.RGBAImage({width:l,height:c});e.RGBAImage.copy(t,y,{x:d,y:f},{x:0,y:0},{width:l,height:c}),n[s]={data:y,pixelRatio:p,sdf:h,stretchX:v,stretchY:m,content:g}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(t,this.map._requestManager,(function(t,r){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.dispatcher.broadcast("spriteLoaded",!0),n.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var n=this.getSource(t.source);if(n){var r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(t.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,n=[],r=f(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this._layers[i];"custom"!==a.type&&n.push(a.serialize())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():fn[e.type])}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var a in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}var u={};for(var l in this._sourceCaches){var c=this._sourceCaches[l];u[l]=c.used,c.used=!1}var d,h=f(this._order);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=this._layers[p];if(v.recalculate(t,this._availableImages),!v.isHidden(t.zoom)){var m=this._getLayerSourceCache(v);m&&(m.used=!0)}var g=this.map.painter;if(g){var y=v.getProgramIds();if(!y)continue;var _,b=v.getProgramConfiguration(t.zoom),w=f(y);try{for(w.s();!(_=w.n()).done;){var x=_.value;g.useProgram(x,b)}}catch(E){w.e(E)}finally{w.f()}}}}catch(E){h.e(E)}finally{h.f()}for(var k in u){var S=this._sourceCaches[k];u[k]!==S.used&&S.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(n){var r=this;if(this._checkLoaded(),un(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=rt(n.layers);var i=function(e,n){if(!e)return[{command:it.setStyle,args:[n]}];var r=[];try{if(!t(e.version,n.version))return[{command:it.setStyle,args:[n]}];t(e.center,n.center)||r.push({command:it.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||r.push({command:it.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||r.push({command:it.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||r.push({command:it.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||r.push({command:it.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||r.push({command:it.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||r.push({command:it.setTransition,args:[n.transition]}),t(e.light,n.light)||r.push({command:it.setLight,args:[n.light]}),t(e.fog,n.fog)||r.push({command:it.setFog,args:[n.fog]}),t(e.projection,n.projection)||r.push({command:it.setProjection,args:[n.projection]});var i={},a=[];!function(e,n,r,i){var a;for(a in n=n||{},e=e||{})e.hasOwnProperty(a)&&(n.hasOwnProperty(a)||ot(a,r,i));for(a in n)n.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t(e[a],n[a])||("geojson"===e[a].type&&"geojson"===n[a].type&&ut(e,n,a)?r.push({command:it.setGeoJSONSourceData,args:[a,n[a].data]}):st(a,n,r,i)):at(a,n,r))}(e.sources,n.sources,a,i);var o=[];e.layers&&e.layers.forEach((function(e){e.source&&i[e.source]?r.push({command:it.removeLayer,args:[e.id]}):o.push(e)}));var s=e.terrain;s&&i[s.source]&&(r.push({command:it.setTerrain,args:[void 0]}),s=void 0),r=r.concat(a),t(s,n.terrain)||r.push({command:it.setTerrain,args:[n.terrain]}),function(e,n,r){n=n||[];var i,a,o,s,u,l,c,d=(e=e||[]).map(ct),f=n.map(ct),h=e.reduce(dt,{}),p=n.reduce(dt,{}),v=d.slice(),m=Object.create(null);for(i=0,a=0;i<d.length;i++)o=d[i],p.hasOwnProperty(o)?a++:(r.push({command:it.removeLayer,args:[o]}),v.splice(v.indexOf(o,a),1));for(i=0,a=0;i<f.length;i++)o=f[f.length-1-i],v[v.length-1-i]!==o&&(h.hasOwnProperty(o)?(r.push({command:it.removeLayer,args:[o]}),v.splice(v.lastIndexOf(o,v.length-a),1)):a++,l=v[v.length-i],r.push({command:it.addLayer,args:[p[o],l]}),v.splice(v.length-i,0,o),m[o]=!0);for(i=0;i<f.length;i++)if(s=h[o=f[i]],u=p[o],!m[o]&&!t(s,u))if(t(s.source,u.source)&&t(s["source-layer"],u["source-layer"])&&t(s.type,u.type)){for(c in lt(s.layout,u.layout,r,o,null,it.setLayoutProperty),lt(s.paint,u.paint,r,o,null,it.setPaintProperty),t(s.filter,u.filter)||r.push({command:it.setFilter,args:[o,u.filter]}),t(s.minzoom,u.minzoom)&&t(s.maxzoom,u.maxzoom)||r.push({command:it.setLayerZoomRange,args:[o,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?lt(s[c],u[c],r,o,c.slice(6),it.setPaintProperty):t(s[c],u[c])||r.push({command:it.setLayerProperty,args:[o,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?lt(s[c],u[c],r,o,c.slice(6),it.setPaintProperty):t(s[c],u[c])||r.push({command:it.setLayerProperty,args:[o,c,u[c]]}))}else r.push({command:it.removeLayer,args:[o]}),l=v[v.lastIndexOf(o)+1],r.push({command:it.addLayer,args:[u,l]})}(o,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:it.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((function(e){return!(e.command in cn)}));if(0===i.length)return!1;var a=i.filter((function(e){return!(e.command in ln)}));if(a.length>0)throw new Error("Unimplemented: ".concat(a.map((function(e){return e.command})).join(", "),"."));return i.forEach((function(e){"setTransition"!==e.command&&"setProjection"!==e.command&&r[e.command].apply(r,e.args)})),this.stylesheet=n,this._updateMapProjection(),!0}},{key:"addImage",value:function(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this._availableImages.slice()}},{key:"addSource",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,"sources.".concat(t),n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var a=Ge(t,n,this.dispatcher,this);a.setEventedParent(this,(function(){return{isSourceLoaded:r._isSourceCacheLoaded(t),source:a.serialize(),sourceId:t}}));var o=function(n){var i=(n?"symbol:":"other:")+t,o=r._sourceCaches[i]=new e.SourceCache(i,a,n);(n?r._symbolSourceCaches:r._otherSourceCaches)[t]=o,o.style=r,o.onAdd(r.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){this._checkLoaded();var n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));var i,a=this._getSourceCaches(t),o=f(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;delete this._sourceCaches[s.id],delete this._updatedSources[s.id],s.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s.getSource().id})),s.setEventedParent(null),s.clearTiles()}}catch(u){o.e(u)}finally{o.f()}return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"_getSources",value:function(){var e=[];for(var t in this._otherSourceCaches){var n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}},{key:"addLayer",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));else{var a;if("custom"===t.type){if(un(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,"layers.".concat(i),t,{arrayIndex:-1},r))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));else{this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a;var s=this._getLayerSourceCache(a);if(this._removedLayers[i]&&a.source&&s&&"custom"!==a.type){var u=this._removedLayers[i];delete this._removedLayers[i],u.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",s.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null),this._updateLayerCount(n,!1);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var a=this.getLayer(n);if(a){if(!t(a.filter,r))return null==r?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateFilter,"layers.".concat(a.id,".filter"),r,{layerType:a.type},i)||(a.filter=e.clone$1(r),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(t){var n=this.getLayer(t);return n&&e.clone$1(n.filter)}},{key:"setLayoutProperty",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(n);o?t(o.getLayoutProperty(r),i)||(o.setLayoutProperty(r,i,a),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(n);o?t(o.getPaintProperty(r),i)||(o.setPaintProperty(r,i,a)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){var n=this.getLayer(e);return n&&n.getPaintProperty(t)}},{key:"setFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=t.sourceLayer,a=this.getSource(r);if(a){var o=a.type;if("geojson"===o&&i)this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==o||i){void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));var s,u=this._getSourceCaches(r),l=f(u);try{for(l.s();!(s=l.n()).done;)s.value.setFeatureState(i,t.id,n)}catch(c){l.e(c)}finally{l.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=this.getSource(r);if(i){var a=i.type,o="vector"===a?t.sourceLayer:void 0;if("vector"!==a||o)if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var s,u=this._getSourceCaches(r),l=f(u);try{for(l.s();!(s=l.n()).done;)s.value.removeFeatureState(o,t.id,n)}catch(c){l.e(c)}finally{l.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var t={};for(var n in this._sourceCaches){var r=this._sourceCaches[n].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(n(o)){r[o]=a;var s,u=f(e);try{for(u.s();!(s=u.n()).done;){var l=s.value[o];if(l){var c,d=f(l);try{for(d.s();!(c=d.n()).done;){var h=c.value;i.push(h)}}catch(E){d.e(E)}finally{d.f()}}}}catch(E){u.e(E)}finally{u.f()}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var p=[],v=this._order.length-1;v>=0;v--){var m=this._order[v];if(n(m))for(var g=i.length-1;g>=0;g--){var y=i[g].feature;if(r[y.layer.id]<v)break;p.push(y),i.pop()}else{var _,b=f(e);try{for(b.s();!(_=b.n()).done;){var w=_.value[m];if(w){var x,k=f(w);try{for(k.s();!(x=k.n()).done;){var S=x.value;p.push(S.feature)}}catch(E){k.e(E)}finally{k.f()}}}}catch(E){b.e(E)}finally{b.f()}}}return p}},{key:"queryRenderedFeatures",value:function(t,n,r){var i=this;n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);var a={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var o,s=f(n.layers);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=this._layers[u];if(!l)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(u,"' does not exist in the map's style and cannot be queried for features.")))),[];a[l.source]=!0}}catch(m){s.e(m)}finally{s.f()}}var c=[];n.availableImages=this._availableImages;var d=n&&n.layers?n.layers.some((function(e){var t=i.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),h=q.createFromScreenPoints(t,r);for(var p in this._sourceCaches){var v=this._sourceCaches[p].getSource().id;n.layers&&!a[v]||c.push(Ke(this._sourceCaches[p],this._layers,this._serializedLayers,h,n,r,d,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(e,t,n,r,i,a,o){var s,u={},l=a.queryRenderedSymbols(r),c=[],d=f(Object.keys(l).map(Number));try{for(d.s();!(s=d.n()).done;){var h=s.value;c.push(o[h])}}catch(m){d.e(m)}finally{d.f()}c.sort(Xe);for(var p=function(){var n=g[v],r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(var a in r){var o=u[a]=u[a]||[],s=r[a];s.sort((function(e,t){var r=n.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));var c,d=f(s);try{for(d.s();!(c=d.n()).done;){var h=c.value;o.push(h)}}catch(m){d.e(m)}finally{d.f()}}},v=0,g=c;v<g.length;v++)p();var y=function(t){u[t].forEach((function(r){var i=r.feature,a=n(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a}))};for(var _ in u)y(_);return u}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),h.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);var r,i=this._getSourceCaches(t),a=[],o=f(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;a=a.concat(Je(s,n))}}catch(u){o.e(u)}finally{o.f()}return a}},{key:"addSourceType",value:function(e,t,n){return a.getSourceType(e)?n(new Error('A source type called "'.concat(e,'" already exists.'))):(a.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.light.getLight(),i=!1;for(var a in e)if(!t(e[a],r[a])){i=!0;break}if(i){var o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(o)}}},{key:"getTerrain",value:function(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}},{key:"setTerrainForDraping",value:function(){this.setTerrain({source:"",exaggeration:0},0)}},{key:"setTerrain",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===r){if("object"==typeof n.source){var i="terrain-dem-src";this.addSource(i,n.source),n=e.clone$1(n),n=e.extend(n,{source:i})}if(this._validate(e.validateTerrain,"terrain",n))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode)this._createTerrain(n,r);else{for(var a=this.terrain,o=a.get(),s=0,u=Object.keys(e.spec.terrain);s<u.length;s++){var l=u[s];!n.hasOwnProperty(l)&&e.spec.terrain[l].default&&(n[l]=e.spec.terrain[l].default)}for(var c in n)if(!t(n[c],o[c])){a.set(n),this.stylesheet.terrain=n;var d=this._setTransitionParameters({duration:0});a.updateTransitions(d);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}},{key:"_createFog",value:function(e){var t=this.fog=new H(e,this.map.transform);this.stylesheet.fog=e;var n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}},{key:"_updateMarkersOpacity",value:function(){var e=this;0!==this.map._markers.length&&this.map._requestDomTask((function(){var t,n=f(e.map._markers);try{for(n.s();!(t=n.n()).done;)t.value._evaluateOpacity()}catch(r){n.e(r)}finally{n.f()}}))}},{key:"getFog",value:function(){return this.fog?this.fog.get():null}},{key:"setFog",value:function(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){var n=this.fog,r=n.get();for(var i in 0===Object.keys(e).length&&n.set(e),e)if(!t(e[i],r[i])){n.set(e),this.stylesheet.fog=e;var a=this._setTransitionParameters({duration:0});n.updateTransitions(a);break}}else this._createFog(e);this._markersNeedUpdate=!0}},{key:"_setTransitionParameters",value:function(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,n=this;if(this.map._optimizeForTerrain&&this.terrain){var r=this._order.filter((function(e){return n.isLayerDraped(n._layers[e])})),i=this._order.filter((function(e){return!n.isLayerDraped(n._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,c(r)),(t=this._drapedFirstOrder).push.apply(t,c(i))}}},{key:"_createTerrain",value:function(e,t){var n=this.terrain=new B(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();var r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_forceSymbolLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&un(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this._sourceCaches)this._sourceCaches[n].clearTiles(),this._sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,n=this._getSourceCaches(e),r=f(n);try{for(r.s();!(t=r.n()).done;)t.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}}},{key:"_reloadSource",value:function(e){var t,n=this._getSourceCaches(e),r=f(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.resume(),i.reload()}}catch(a){r.e(a)}finally{r.f()}}},{key:"_reloadSources",value:function(){var e,t=f(this._getSources());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.reload&&n.reload()}}catch(r){t.e(r)}finally{t.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(t,n,r,i){var a,o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=!1,l=!1,c={},d=f(this._order);try{var h=function(){var e=a.value,n=o._layers[e];if("symbol"!==n.type)return"continue";if(!c[n.source]){var r=o._getLayerSourceCache(n);if(!r)return"continue";c[n.source]=r.getRenderableIds(!0).map((function(e){return r.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var i=o.crossTileSymbolIndex.addLayer(n,c[n.source],t.center.lng,t.projection);u=u||i};for(d.s();!(a=d.n()).done;)h()}catch(y){d.e(y)}finally{d.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new tn(t,this._order,s,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),l=!0),u&&this.pauseablePlacement.placement.setStale()),l||u){var p,v=f(this._order);try{for(v.s();!(p=v.n()).done;){var m=p.value,g=this._layers[m];"symbol"===g.type&&this.placement.updateLayerOpacities(g,c[g.source])}}catch(y){v.e(y)}finally{v.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var r=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}},{key:"getResource",value:function(t,n,r){return e.makeRequest(n,r)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"_isSourceCacheLoaded",value:function(t){var n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'")))),!1):n.every((function(e){return e.loaded()}))}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}},{key:"_clearWorkerCaches",value:function(){this.dispatcher.broadcast("clearCaches")}},{key:"destroy",value:function(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}]),a}(e.Evented);hn.getSourceType=function(e){return We[e]},hn.setSourceType=function(e,t){We[e]=t},hn.registerForPluginStateChange=e.registerForPluginStateChange;var pn="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",vn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",mn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",gn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",yn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",_n={},bn={},wn=[];An(pn,wn),An(mn,wn),An(gn,wn),An(yn,wn),_n=Tn("",mn),bn=Tn(yn,gn);var xn=Tn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),kn=pn,Sn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",En={background:Tn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Tn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Tn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Tn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Tn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Tn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Tn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Tn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Tn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Tn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Tn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Tn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Tn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Tn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Tn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Tn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Tn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Tn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Tn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Tn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Tn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Tn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Tn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Tn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Tn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",vn),skyboxGradient:Tn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",vn),skyboxCapture:Tn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Tn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Tn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function An(e,t){var n,r=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n"),i=f(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("#"===(a=a.trim())[0]&&a.includes("if")&&!a.includes("endif")){var o,s=(a=a.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim()).split(" "),u=f(s);try{for(u.s();!(o=u.n()).done;){var l=o.value;t.includes(l)||t.push(l)}}catch(c){u.e(c)}finally{u.f()}}}}catch(c){i.e(c)}finally{i.f()}}function Tn(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},a=[].concat(wn);return An(e,a),An(t,a),{fragmentSource:e=e.replace(n,(function(e,t,n,r,a){return i[a]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nvarying ").concat(n," ").concat(r," ").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n")})),vertexSource:t=t.replace(n,(function(e,t,n,r,a){var o="float"===r?"vec2":"vec4",s=a.match(/color/)?"color":o;return i[a]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(a,";\nvarying ").concat(n," ").concat(r," ").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = a_").concat(a,";\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = unpack_mix_").concat(s,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = a_").concat(a,";\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = unpack_mix_").concat(s,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n")})),staticAttributes:r,usedDefines:a}}var Cn=function(){function e(){h(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}return p(e,[{key:"bind",value:function(e,t,n,r,i,a,o){this.context=e;for(var s=this.boundPaintVertexBuffers.length!==r.length,u=0;!s&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(s=!0);for(var l=this.boundDynamicVertexBuffers.length!==o.length,c=0;!l&&c<o.length;c++)this.boundDynamicVertexBuffers[c]!==o[c]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==a)this.freshBind(t,n,r,i,a,o);else{e.bindVertexArrayOES.set(this.vao);var d,h=f(o);try{for(h.s();!(d=h.n()).done;){var p=d.value;p&&p.bind()}}catch(v){h.e(v)}finally{h.f()}i&&i.dynamicDraw&&i.bind()}}},{key:"freshBind",value:function(e,t,n,r,i,a){var o,s=e.numAttributes,u=this.context,l=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=a;else{o=u.currentNumAttributes||0;for(var c=s;c<o;c++)l.disableVertexAttribArray(c)}t.enableAttributes(l,e),t.bind(),t.setVertexAttribPointers(l,e,i);var d,h=f(n);try{for(h.s();!(d=h.n()).done;){var p=d.value;p.enableAttributes(l,e),p.bind(),p.setVertexAttribPointers(l,e,i)}}catch(y){h.e(y)}finally{h.f()}var v,m=f(a);try{for(m.s();!(v=m.n()).done;){var g=v.value;g&&(g.enableAttributes(l,e),g.bind(),g.setVertexAttribPointers(l,e,i))}}catch(y){m.e(y)}finally{m.f()}r&&r.bind(),u.currentNumAttributes=s}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function Pn(t,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function In(t,n,r,i,a,o,s){var u=t.context,l=u.gl,c=r.fbo;if(c){t.prepareDrawTile();var d=t.useProgram("hillshade");u.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get());var f=function(e,t,n,r){var i=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),u),u_image:0,u_latrange:Pn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}}(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(u,d,n.toUnwrapped());var h=t.getTileBoundsBuffers(r),p=h.tileBoundsBuffer,v=h.tileBoundsIndexBuffer,m=h.tileBoundsSegments;d.draw(u,l.TRIANGLES,a,o,s,e.CullFaceMode.disabled,f,i.id,p,v,m)}}function Rn(t,n,r){if(n.needsDEMTextureUpload){var i=t.context,a=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);var o=r.getPixels();n.demTexture?n.demTexture.update(o,{premultiply:!1}):n.demTexture=new e.Texture(i,o,a.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}}function Ln(t,n,r,i,a,o){var s=t.context,u=s.gl;if(n.dem){var l=n.dem;if(s.activeTexture.set(u.TEXTURE1),Rn(t,n,l),n.demTexture){n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);var c=l.dim;s.activeTexture.set(u.TEXTURE0);var d=n.fbo;if(!d){var f=new e.Texture(s,{width:c,height:c,data:null},u.RGBA);f.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=n.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(f.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,c,c]);var h=t.getMercatorTileBoundsBuffers(),p=h.tileBoundsBuffer,v=h.tileBoundsIndexBuffer,m=h.tileBoundsSegments;t.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,i,a,o,e.CullFaceMode.disabled,function(t,n){var r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}}(n.tileID,l),r.id,p,v,m),n.needsHillshadePrepare=!1}}}var Mn=function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}},On=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Fn=function(e,t,n,r,i,a,o,s,u,l,c,d,f,h,p){return{u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:a,u_image0:0,u_frustum_tl:o,u_frustum_tr:s,u_frustum_br:u,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:d,u_viewport:f,u_grid_matrix:p?Float32Array.from(p):new Float32Array(9),u_skirt_height:h}};function Dn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}var Nn=new(function(){function e(){h(this,e),this.operations={}}return p(e,[{key:"newMorphing",value:function(e,t,n,r,i){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==n.tileID.key&&(a.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),jn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Bn(e){return 6*Math.pow(1.5,22-e)}function Un(e,t){var n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}var zn=function(e){return{u_matrix:e}};function Vn(t,n,r,i,a){if(a>0){var o=e.exported.now(),s=(o-t.timeAdded)/a,u=n?(o-n.timeAdded)/a:-1,l=r.getSource(),c=i.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),f=d&&t.refreshedUponExpiration?1:e.clamp(d?s:1-u,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var Zn=function(e){v(n,e);var t=m(n);function n(e){var r;h(this,n);var a={type:"raster-dem",maxzoom:e.transform.maxZoom},o=new W(tt(),null),s=Ge("mock-dem",a,o,e.style);return r=t.call(this,"mock-dem",s,!1),s.setEventedParent(i(r)),r._sourceLoaded=!0,r}return p(n,[{key:"_loadTile",value:function(e,t){e.state="loaded",t(null)}}]),n}(e.SourceCache),Hn=function(t){v(r,t);var n=m(r);function r(e){var t;h(this,r);var a=Ge("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new W(tt(),null),e.style);return t=n.call(this,"proxy",a,!1),a.setEventedParent(i(t)),t.map=t.getSource().map=e,t.used=t._sourceLoaded=!0,t.renderCache=[],t.renderCachePool=[],t.proxyCachedFBO={},t}return p(r,[{key:"update",value:function(t,n,r){var i=this;if(!t.freezeTileCoverage){this.transform=t;var a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((function(n,r){if(n[r.key]="",!i._tiles[r.key]){var a=new e.Tile(r,i._source.tileSize*r.overscaleFactor(),t.tileZoom);a.state="loaded",i._tiles[r.key]=a}return n}),{});for(var o in this._tiles)o in a||(this.freeFBO(o),this._tiles[o].unloadVectorData(),delete this._tiles[o])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var n,r=Object.values(t);(n=this.renderCachePool).push.apply(n,r),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),r}(e.SourceCache),Wn=function(e){v(n,e);var t=m(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=r,a.projMatrix=i,a}return p(n)}(e.OverscaledTileID),Gn=function(t){v(r,t);var n=m(r);function r(t,i){var a;h(this,r),(a=n.call(this)).painter=t,a.terrainTileForTile={},a.prevTerrainTileForTile={};var o=function(t){var n=new e.StructArrayLayout2i4,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);for(var a=e.EXTENT/128,o=e.EXTENT+a/2,s=o+a,u=-a;u<s;u+=a)for(var l=-a;l<s;l+=a){var c=l<0||l>o||u<0||u>o?24575:0,d=e.clamp(Math.round(l),0,e.EXTENT),f=e.clamp(Math.round(u),0,e.EXTENT);n.emplaceBack(d+c,f)}for(var h=function(e,t){var n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)},p=1;p<129;p++)for(var v=1;v<129;v++)h(v,p);return[0,129].forEach((function(e){for(var t=0;t<130;t++)h(t,e),h(e,t)})),[n,r,32768]}(),s=d(o,3),u=s[0],l=s[1],c=s[2],f=t.context;a.gridBuffer=f.createVertexBuffer(u,e.posAttributes.members),a.gridIndexBuffer=f.createIndexBuffer(l),a.gridSegments=e.SegmentVector.simpleSegment(0,0,u.length,l.length),a.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,u.length,c),a.proxyCoords=[],a.proxiedCoords={},a._visibleDemTiles=[],a._drapedRenderBatches=[],a._sourceTilesOverlap={},a.proxySourceCache=new Hn(i.map),a.orthoMatrix=e.create(),e.ortho(a.orthoMatrix,"globe"===a.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);var p=f.gl;return a._overlapStencilMode=new e.StencilMode({func:p.GEQUAL,mask:255},0,255,p.KEEP,p.KEEP,p.REPLACE),a._previousZoom=t.transform.zoom,a.pool=[],a._findCoveringTileCache={},a._tilesDirty={},a.style=i,a._useVertexMorphing=!0,a._exaggeration=1,a._mockSourceCache=new Zn(i.map),a}return p(r,[{key:"style",set:function(e){var t=this;e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(function(){t._clearLineLayersFromRenderCache()}))}},{key:"update",value:function(t,n,r){var i=this;if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;var a=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");var o=function(){i.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(i.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var t=i.getScaledDemTileSize();i.sourceCache.update(n,t,!0),i.resetTileLookupCache(i.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"resetTileLookupCache",value:function(e){this._findCoveringTileCache[e]={}}},{key:"getScaledDemTileSize",value:function(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}},{key:"_checkRenderCacheEfficiency",value:function(){var t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"isUsingMockSource",value:function(){return this.sourceCache===this._mockSourceCache}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(t){var n=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var r=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);var a=this.proxyCoords=r.getIds().map((function(e){var t=r.getTileByID(e).tileID;return t.projMatrix=i.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){var r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.pointGeometry(r.x,r.y);t.sort((function(t,n){if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;var r=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),o=i.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(r)-o.distSqr(a)}))}(a,this.painter),this._previousZoom=i.zoom;var o=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){n.proxyToSource[e.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var u in s){var l=s[u];if(l.used&&(l!==this.sourceCache&&this.resetTileLookupCache(l.id),this._setupProxiedCoordsForOrtho(l,t[u],o),!l.usedForTerrain)){var c=t[u];l.getSource().reparseOverscaled&&this._assignTerrainTiles(c)}}this.proxiedCoords[r.id]=a.map((function(e){return new Wn(e,e.key,n.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();var d={};this._visibleDemTiles=[];var h,p=f(this.proxyCoords);try{for(p.s();!(h=p.n()).done;){var v=h.value,m=this.terrainTileForTile[v.key];if(m){var g=m.tileID.key;g in d||(this._visibleDemTiles.push(m),d[g]=g)}}}catch(y){p.e(y)}finally{p.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var n=t._findTileCoveringTileID(e,t.sourceCache);n&&(t.terrainTileForTile[e.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var n in this.terrainTileForTile){var r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Rn(this.painter,r,i))}}},{key:"_prepareDemTileUniforms",value:function(e,t,n,r){if(!t||null==t.demTexture)return!1;var i=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-i.z),o=r||"";return n["u_dem_tl".concat(o)]=[i.x*a%1,i.y*a%1],n["u_dem_scale".concat(o)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"emptyDepthBufferTexture",get:function(){var t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){var r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,n){if(!n.dem)return t;var r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);var r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;var a=this._emptyDEMTexture;return a?a.update(i,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),a}},{key:"setupElevationDraw",value:function(t,n,r){var i,a=this.painter.context,o=a.gl,s=(i=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(i),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();var u=null,l=null,c=1;if(r&&r.morphing&&this._useVertexMorphing){var d=r.morphing.srcDemTile,f=r.morphing.dstDemTile;c=r.morphing.phase,d&&f&&(this._prepareDemTileUniforms(t,d,s,"_prev")&&(l=d),this._prepareDemTileUniforms(t,f,s)&&(u=f))}if(l&&u?(a.activeTexture.set(o.TEXTURE2),u.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.activeTexture.set(o.TEXTURE4),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.u_dem_lerp=c):(u=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,u,s)?u.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),a.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&u){var h=(1<<u.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=h}if(r&&r.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(a,s),"globe"===this.painter.transform.projection.name){var p=this.globeUniformValues(this.painter.transform,t.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(a,p)}}},{key:"globeUniformValues",value:function(t,n,r){var i=t.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,e.EXTENT,0),u_tile_br_up:i.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(n,0,e.EXTENT),u_tile_up_scale:r?e.globeMetersToEcef(1):i.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}},{key:"renderToBackBuffer",value:function(t){var n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,r,i,a){if("globe"===t.transform.projection.name)!function(t,n,r,i,a){var o,s,u=t.context,l=u.gl,c=t.options.showTerrainWireframe?2:0,h=t.transform,p=e.globeUseCustomAntiAliasing(t,u,h),v=function(e,n){if(s!==e){var r=[jn[e],"PROJECTION_GLOBE_VIEW"];p&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(jn[c]),o=t.useProgram("globeRaster",null,r),s=e}},m=t.colorModeForRenderPass(),g=new e.DepthMode(l.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Nn.update(a);var y=e.calculateGlobeMercatorMatrix(h),_=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],b=c?[!1,!0]:[!1],w=t.globeSharedBuffers,x=[h.width*e.exported.devicePixelRatio,h.height*e.exported.devicePixelRatio],k=Float32Array.from(h.globeMatrix),S={useDenormalizedUpVectorScale:!0};if(b.forEach((function(c){var h=t.transform,p=Bn(h.zoom)*n.exaggeration();s=-1;var b,E=c?l.LINES:l.TRIANGLES,A=f(i);try{for(A.s();!(b=A.n()).done;){var T=b.value,C=r.getTile(T),P=e.StencilMode.disabled,I=n.prevTerrainTileForTile[T.key],R=n.terrainTileForTile[T.key];Dn(I,R)&&Nn.newMorphing(T.key,I,R,a,250),u.activeTexture.set(l.TEXTURE0),C.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE);var L=Nn.getMorphValuesForProxy(T.key),M=L?1:0;L&&e.extend$1(S,{morphing:{srcDemTile:L.from,dstDemTile:L.to,phase:e.easeCubicInOut(L.phase)}});var O=e.tileCornersToBounds(T.canonical),F=e.getLatitudinalLod(O.getCenter().lat),D=e.getGridMatrix(T.canonical,O,F,h.worldSize/h._pixelsPerMercatorPixel),N=e.globeNormalizeECEF(e.globeTileBounds(T.canonical)),j=Fn(h.projMatrix,k,y,N,e.globeToMercatorTransition(h.zoom),_,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,x,p,D);if(v(M,c),n.setupElevationDraw(C,o,S),t.prepareDrawProgram(u,o,T.toUnwrapped()),w){var B=c?w.getWirefameBuffers(t.context,F):w.getGridBuffers(F,0!==p),U=d(B,3),z=U[0],V=U[1],Z=U[2];o.draw(u,E,g,P,m,e.CullFaceMode.backCCW,j,"globe_raster",z,V,Z)}}}catch(H){A.e(H)}finally{A.f()}})),w){var E=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&E.push("CUSTOM_ANTIALIASING"),o=t.useProgram("globeRaster",null,E);var A,T=f(i);try{var C=function(){var i=A.value,a=i.canonical,s=a.x,c=a.y,f=a.z,p=0===c,v=c===(1<<f)-1,y=w.getPoleBuffers(f),b=d(y,4),k=b[0],E=b[1],T=b[2],C=b[3];if(C&&(p||v)){var P=r.getTile(i);u.activeTexture.set(l.TEXTURE0),P.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE);var I=e.globePoleMatrixForTile(f,s,h),R=e.globeNormalizeECEF(e.globeTileBounds(i.canonical)),L=function(t,n){return t.draw(u,l.TRIANGLES,g,e.StencilMode.disabled,m,e.CullFaceMode.disabled,Fn(h.projMatrix,I,I,R,0,_,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,x,0),"globe_pole_raster",n,T,C)};n.setupElevationDraw(P,o,S),t.prepareDrawProgram(u,o,i.toUnwrapped()),p&&L(o,k),v&&(I=e.scale(e.create(),I,[1,-1,1]),L(o,E))}};for(T.s();!(A=T.n()).done;)C()}catch(P){T.e(P)}finally{T.f()}}}(t,n,r,i,a);else{var o,s,u=t.context,l=u.gl,c=t.options.showTerrainWireframe?2:0,h=function(e,n){if(s!==e){var r=[jn[e]];n&&r.push(jn[c]),o=t.useProgram("terrainRaster",null,r),s=e}},p=t.colorModeForRenderPass(),v=new e.DepthMode(l.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Nn.update(a);var m=t.transform,g=Bn(m.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((function(c){s=-1;var y,_=c?l.LINES:l.TRIANGLES,b=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments],w=d(b,2),x=w[0],k=w[1],S=f(i);try{for(S.s();!(y=S.n()).done;){var E=y.value,A=r.getTile(E),T=e.StencilMode.disabled,C=n.prevTerrainTileForTile[E.key],P=n.terrainTileForTile[E.key];Dn(C,P)&&Nn.newMorphing(E.key,C,P,a,250),u.activeTexture.set(l.TEXTURE0),A.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);var I=Nn.getMorphValuesForProxy(E.key),R=I?1:0,L=void 0;I&&(L={morphing:{srcDemTile:I.from,dstDemTile:I.to,phase:e.easeCubicInOut(I.phase)}});var M=On(E.projMatrix,Un(E.canonical,m.renderWorldCopies)?g/10:g);h(R,c),n.setupElevationDraw(A,o,L),t.prepareDrawProgram(u,o,E.toUnwrapped()),o.draw(u,_,v,T,p,e.CullFaceMode.backCCW,M,"terrain_raster",n.gridBuffer,x,k)}}catch(O){S.e(O)}finally{S.f()}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}},{key:"renderBatch",value:function(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;var n,r=this.painter,i=this.painter.context,a=this.proxySourceCache,o=this.proxiedCoords[a.id],s=this._drapedRenderBatches.shift(),u=[],l=r.style.order,c=0,d=f(o);try{for(d.s();!(n=d.n()).done;){var h=n.value,p=a.getTileByID(h.proxyTileKey),v=a.proxyCachedFBO[h.key]?a.proxyCachedFBO[h.key][t]:void 0,m=void 0!==v?a.renderCache[v]:this.pool[c++],g=void 0!==v;if(p.texture=m.tex,!g||m.dirty){var y=void 0;i.bindFramebuffer.set(m.fb.framebuffer),this.renderedToTile=!1,m.dirty&&(i.clear({color:e.Color.transparent,stencil:0}),m.dirty=!1);for(var _=s.start;_<=s.end;++_){var b=r.style._layers[l[_]];if(!b.isHidden(r.transform.zoom)){var w=r.style._getLayerSourceCache(b),x=w?this.proxyToSource[h.key][w.id]:[h];if(x){var k=x;i.viewport.set([0,0,m.fb.width,m.fb.height]),y!==(w?w.id:null)&&(this._setupStencil(m,x,b,w),y=w?w.id:null),r.renderLayer(r,w,b,k)}}}this.renderedToTile?(m.dirty=!0,u.push(p.tileID)):g||--c,5===c&&(c=0,this.renderToBackBuffer(u))}else u.push(p.tileID)}}catch(S){d.e(S)}finally{d.f()}return this.renderToBackBuffer(u),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,r.width,r.height]),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var n,r=0,i=0,a=!1,o=0;o<t;++o){var s=e._layers[e.order[o]];this._style.isLayerDraped(s)?(a&&++r,++i):a||(a=!0,n=s.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,n){if(!this._visibleDemTiles)return null;var r=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(r){var i=r.tileID,a=1<<i.overscaledZ,o=i.canonical,s=o.x,u=o.y,l=s/a,c=(s+1)/a,d=u/a,f=(u+1)/a;return{minx:l,miny:d,maxx:c,maxy:f,t:r.dem.tree.raycastRoot(l,d,c,f,e,t,n),tile:r}}));r.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var i,a=f(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(null==o.t)return null;var s=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,n);if(null!=s)return s}}catch(u){a.e(u)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);var i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);var a=t.createFramebuffer(r[0],r[1],!1);return a.colorAttachment.set(i.texture),a.depthAttachment=new je(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:i,dirty:!1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;if(this._style.light&&this._style.light.hasTransition())return!0;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((function(t){var n=e._style._layers[t],r=n.isHidden(e.painter.transform.zoom);return"custom"===n.type?!r&&n.shouldRedrape():!r&&n.hasTransition()}))}},{key:"_clearLineLayersFromRenderCache",value:function(){var t,n=!1,r=f(this._style._getSources());try{for(r.s();!(t=r.n()).done;)if(t.value instanceof ze){n=!0;break}}catch(m){r.e(m)}finally{r.f()}if(n)for(var i={},a=0;a<this._style.order.length;++a){var o=this._style._layers[this._style.order[a]],s=this._style._getLayerSourceCache(o);if(s&&!i[s.id]&&!o.isHidden(this.painter.transform.zoom)&&"line"===o.type&&o.widthExpression()instanceof e.ZoomDependentExpression){i[s.id]=!0;var u,l=f(this.proxyCoords);try{for(l.s();!(u=l.n()).done;){var c=u.value,d=this.proxyToSource[c.key][s.id];if(d){var h,p=f(d);try{for(p.s();!(h=p.n()).done;){var v=h.value;this._clearRenderCacheForTile(s.id,v)}}catch(m){p.e(m)}finally{p.f()}}}}catch(m){l.e(m)}finally{l.f()}}}}},{key:"_clearRasterLayersFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Ve){e=!0;break}if(e)for(var n={},r=0;r<this._style.order.length;++r){var i=this._style._layers[this._style.order[r]],a=this._style._getLayerSourceCache(i);if(a&&!n[a.id]&&!i.isHidden(this.painter.transform.zoom)&&"raster"===i.type){var o,s=i.paint.get("raster-fade-duration"),u=f(this.proxyCoords);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=this.proxyToSource[l.key][a.id];if(c){var d,h=f(c);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=Vn(a.getTile(p),a.findLoadedParent(p,0),a,this.painter.transform,s);(1!==v.opacity||0!==v.mix)&&this._clearRenderCacheForTile(a.id,p)}}catch(m){h.e(m)}finally{h.f()}}}}catch(m){u.e(m)}finally{u.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var n,r=[],i=0,a=this._style._layers[e[i]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++i<t;)a=this._style._layers[e[i]];for(;i<t;++i){var o=this._style._layers[e[i]];o.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(o)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){var n=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var r=0;r<n.length;++r){var i,a=Object.values(n[r]);(i=t.renderCachePool).push.apply(i,a)}}}else{this._clearRasterLayersFromRenderCache();for(var o=this.proxyCoords,s=this._tilesDirty,u=o.length-1;u>=0;u--){var l=o[u];if(t.getTileByID(l.key),void 0!==t.proxyCachedFBO[l.key]){var d=e[l.key],h=this.proxyToSource[l.key],p=0,v=function(e){var t=h[e],n=d[e];if(!n||n.length!==t.length||t.some((function(t,r){return t!==n[r]||s[e]&&s[e].hasOwnProperty(t.key)})))return p=-1,"break";++p};for(var m in h)if("break"===v(m))break;for(var g in t.proxyCachedFBO[l.key])t.renderCache[t.proxyCachedFBO[l.key][g]].dirty=p<0||p!==Object.values(d).length}}var y=c(this._drapedRenderBatches);y.sort((function(e,t){return t.end-t.start-(e.end-e.start)}));var _,b=f(y);try{for(b.s();!(_=b.n()).done;){var w,x=_.value,k=f(o);try{for(k.s();!(w=k.n()).done;){var S=w.value;if(!t.proxyCachedFBO[S.key]){var E=t.renderCachePool.pop();void 0===E&&t.renderCache.length<50&&(E=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==E&&(t.proxyCachedFBO[S.key]={},t.proxyCachedFBO[S.key][x.start]=E,t.renderCache[E].dirty=!0)}}}catch(A){k.e(A)}finally{k.f()}}}catch(A){b.e(A)}finally{b.f()}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,n,r){if(r&&this._sourceTilesOverlap[r.id]){var i=this.painter.context,a=i.gl;if(t.length<=1)this._overlapStencilType=!1;else{var o;if(n.isTileClipped())o=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"clipOrMaskOverlapStencilType",value:function(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}},{key:"stencilModeForRTTOverlap",value:function(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(t,n){var r=this.painter,i=this.painter.context,a=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);var o,s=r.useProgram("clippingMask"),u=f(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=r._tileClippingMaskIDs[l.key]=--n;s.draw(i,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},c,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,zn(l.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}catch(d){u.e(d)}finally{u.f()}}},{key:"pointCoordinate",value:function(t){var n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;var r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;var i=n._camera.position,a=e.mercatorZfromAltitude(1,n.center.lat),o=[i[0],i[1],i[2]/a,0],s=e.subtract([],r.slice(0,3),o);e.normalize(s,s);var u=this.raycast(o,s,this._exaggeration);return null!==u&&u?(e.scaleAndAdd(o,o,s,u),o[3]=o[2],o[2]*=a,o):null}},{key:"drawDepth",value:function(){var t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===a||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){var o=n.gl,s=n.createFramebuffer(i,a,!0);n.activeTexture.set(o.TEXTURE0);var u=new e.Texture(n,{width:i,height:a,data:null},o.RGBA);u.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.colorAttachment.set(u.texture);var l=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,a);s.depthAttachment.set(l),this._depthFBO=s,this._depthTexture=u}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,a]),function(t,n,r,i){if("globe"!==t.transform.projection.name){var a=t.context,o=a.gl;a.clear({depth:1});var s,u=t.useProgram("terrainDepth"),l=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D),c=f(i);try{for(c.s();!(s=c.n()).done;){var d=s.value,h=r.getTile(d),p=On(d.projMatrix,0);n.setupElevationDraw(h,u),u.draw(a,o.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,p,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}catch(v){c.e(v)}finally{c.f()}}}(t,this,r,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,n){if(e.getSource()instanceof He)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var r=this.proxiedCoords[e.id]=[],i=this.proxyCoords,a=0;a<i.length;a++){var o=i[a],s=this._findTileCoveringTileID(o,e);if(s){var u=this._createProxiedId(o,s,n[o.key]&&n[o.key][e.id]);r.push(u),this.proxyToSource[o.key][e.id]=[u]}}for(var l=!1,c=0;c<t.length;c++){var d=e.getTile(t[c]);if(d&&d.hasData()){var f=this._findTileCoveringTileID(d.tileID,this.proxySourceCache);if(f&&f.tileID.canonical.z!==d.tileID.canonical.z){var h=this.proxyToSource[f.tileID.key][e.id],p=this._createProxiedId(f.tileID,d,n[f.tileID.key]&&n[f.tileID.key][e.id]);h?h.splice(h.length-1,0,p):this.proxyToSource[f.tileID.key][e.id]=[p],r.push(p),l=!0}}}this._sourceTilesOverlap[e.id]=l}},{key:"_setupProxiedCoordsForImageSource",value:function(t,n,r){if(t.getSource().loaded())for(var i=this.proxiedCoords[t.id]=[],a=this.proxyCoords,o=t.getSource(),s=new e.pointGeometry(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),u=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e}),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),l=function(t,n){var r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),o=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+a<o+u.min.x||r>o+u.max.x||i+a<s+u.min.y||i>s+u.max.y},c=0;c<a.length;c++)for(var d=a[c],f=0;f<n.length;f++){var h=t.getTile(n[f]);if(h&&h.hasData()&&!l(d,h.tileID)){var p=this._createProxiedId(d,h,r[d.key]&&r[d.key][t.id]),v=this.proxyToSource[d.key][t.id];v?v.push(p):this.proxyToSource[d.key][t.id]=[p],i.push(p)}}}},{key:"_createProxiedId",value:function(t,n,r){var i=this.orthoMatrix;if(r){var a=r.find((function(e){return e.key===n.tileID.key}));if(a)return a}if(n.tileID.key!==t.key){var o,s,u,l=t.canonical.z-n.tileID.canonical.z;i=e.create();var c=n.tileID.wrap-t.wrap<<t.overscaledZ;l>0?(s=(o=e.EXTENT>>l)*((n.tileID.canonical.x<<l)-t.canonical.x+c),u=o*((n.tileID.canonical.y<<l)-t.canonical.y)):(o=e.EXTENT<<-l,s=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+c<<-l)),u=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-l))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[s,u,0])}return new Wn(n.tileID,t.key,i)}},{key:"_findTileCoveringTileID",value:function(t,n){var r=n.getTile(t);if(r&&r.hasData())return r;var i=this._findCoveringTileCache[n.id],a=i[t.key];if((r=a?n.getTileByID(a):null)&&r.hasData()||null===a)return r;var o=r?r.tileID:t,s=o.overscaledZ,u=n.getSource().minzoom,l=[];if(!a){var c=n.getSource().maxzoom;if(t.canonical.z>=c){var d=t.canonical.z-c;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>d,t.canonical.y>>d)):0!==d&&(s=c,o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>d,t.canonical.y>>d))}o.key!==t.key&&(l.push(o.key),r=n.getTile(o))}var f=function(e){l.forEach((function(t){i[t]=e})),l.length=0};for(s-=1;s>=u&&(!r||!r.hasData());s--){r&&f(r.tileID.key);var h=o.calculateScaledKey(s);if((r=n.getTileByID(h))&&r.hasData())break;var p=i[h];if(null===p)break;void 0===p?l.push(h):r=n.getTileByID(p)}return f(r?r.tileID.key:null),r&&r.hasData()?r:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(){this.renderedToTile=!0}},{key:"_clearRenderCacheForTile",value:function(e,t){var n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var t=function(t){for(var n=0,r=new e.StructArrayLayout2ui4,i=131,a=1;a<129;a++){for(var o=1;o<129;o++)n=a*i+o,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===a&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),r}(e.Elevation),qn=function(){function t(n,r,i,a,o,s){h(this,t);var u=n.gl;this.program=u.createProgram();var l=function(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var r=e[n].split(" ");t.push(r.pop())}return t}(i.staticAttributes),c=a?a.getBinderAttributes():[],d=l.concat(c),f=a?a.defines():[];f=f.concat(s.map((function(e){return"#define ".concat(e)})));var p=n.isWebGL2?"#version 300 es\n":"",v=p+f.concat(n.extStandardDerivatives&&0===p.length?"#extension GL_OES_standard_derivatives : enable\n".concat(Sn):Sn,Sn,kn,xn.fragmentSource,bn.fragmentSource,i.fragmentSource).join("\n"),m=p+f.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",kn,xn.vertexSource,bn.vertexSource,_n.vertexSource,i.vertexSource).join("\n"),g=u.createShader(u.FRAGMENT_SHADER);if(u.isContextLost())this.failedToCreate=!0;else{u.shaderSource(g,v),u.compileShader(g),u.attachShader(this.program,g);var y=u.createShader(u.VERTEX_SHADER);if(u.isContextLost())this.failedToCreate=!0;else{u.shaderSource(y,m),u.compileShader(y),u.attachShader(this.program,y),this.attributes={},this.numAttributes=d.length;for(var _=0;_<this.numAttributes;_++)d[_]&&(u.bindAttribLocation(this.program,_,d[_]),this.attributes[d[_]]=_);u.linkProgram(this.program),u.deleteShader(y),u.deleteShader(g),this.fixedUniforms=o(n),this.binderUniforms=a?a.getUniforms(n):[],s.includes("TERRAIN")&&(this.terrainUniforms=function(t){return{u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}}(n)),s.includes("GLOBE")&&(this.globeUniforms=function(t){return{u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}}(n)),s.includes("FOG")&&(this.fogUniforms=function(t){return{u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}}(n))}}}return p(t,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r]&&n[r].set(this.program,r,t[r])}}},{key:"setGlobeUniformValues",value:function(e,t){if(this.globeUniforms){var n=this.globeUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r]&&n[r].set(this.program,r,t[r])}}},{key:"setFogUniformValues",value:function(e,t){if(this.fogUniforms){var n=this.fogUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r].set(this.program,r,t[r])}}},{key:"draw",value:function(e,t,n,i,a,o,s,u,l,c,d,h,p,v,m){var g,y=e.gl;if(!this.failedToCreate){e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(a),e.setCullFace(o);for(var _=0,b=Object.keys(this.fixedUniforms);_<b.length;_++){var w=b[_];this.fixedUniforms[w].set(this.program,w,s[w])}v&&v.setUniforms(this.program,e,this.binderUniforms,h,{zoom:p});var x,k=(g={},r(g,y.LINES,2),r(g,y.TRIANGLES,3),r(g,y.LINE_STRIP,1),g)[t],S=f(d.get());try{for(S.s();!(x=S.n()).done;){var E=x.value,A=E.vaos||(E.vaos={});(A[u]||(A[u]=new Cn)).bind(e,this,l,v?v.getPaintVertexBuffers():[],c,E.vertexOffset,m||[]),y.drawElements(t,E.primitiveLength*k,y.UNSIGNED_SHORT,E.primitiveOffset*k*2)}}catch(T){S.e(T)}finally{S.f()}}}}],[{key:"cacheKey",value:function(e,t,n,r){var i,a="".concat(t).concat(r?r.cacheKey:""),o=f(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.usedDefines.includes(s)&&(a+="/".concat(s))}}catch(u){o.e(u)}finally{o.f()}return a}}]),t}();function Kn(e,t){var n=Math.pow(2,t.tileID.overscaledZ),r=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,i=r*(t.tileID.canonical.x+t.tileID.wrap*n),a=r*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/G(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,a>>16],u_pixel_coord_lower:[65535&i,65535&a]}}var Jn=e.create(),Xn=function(t,n,r,i,a,o,s,u,l,c,d){var f=n.style.light,h=f.properties.get("position"),p=[h.x,h.y,h.z],v=e.create$1();"viewport"===f.properties.get("anchor")&&(e.fromRotation(v,-n.transform.angle),e.transformMat3(p,p,v));var m=f.properties.get("color"),g=n.transform,y={u_matrix:t,u_lightpos:p,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[m.r,m.g,m.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Jn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:a,u_edge_radius:o};return"globe"===g.projection.name&&(y.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],y.u_zoom_transition=l,y.u_inv_rot_matrix=d,y.u_merc_center=c,y.u_up_dir=g.projection.upVector(new e.CanonicalTileID(0,0,0),c[0]*e.EXTENT,c[1]*e.EXTENT),y.u_height_lift=u),y},Yn=function(t,n,r,i,a,o,s,u,l,c,d,f){var h=Xn(t,n,r,i,a,o,s,l,c,d,f),p={u_height_factor:-Math.pow(2,s.overscaledZ)/u.tileSize/8};return e.extend(h,Kn(n,u),p)},Qn=function(e){return{u_matrix:e}},$n=function(t,n,r){return e.extend(Qn(t),Kn(n,r))},er=function(e,t){return{u_matrix:e,u_world:t}},tr=function(t,n,r,i){return e.extend($n(t,n,r),{u_world:i})},nr=e.create(),rr=function(t,n,r,i,a,o){var s,u=t.transform,l="globe"===u.projection.name;if("map"===o.paint.get("circle-pitch-alignment"))if(l){var c=e.globePixelsToTileUnits(u.zoom,n.canonical)*u._pixelsPerMercatorPixel;s=Float32Array.from([c,0,0,c])}else s=u.calculatePixelsToTileUnitsMatrix(r);else s=new Float32Array([u.pixelsToGLUnits[0],0,0,u.pixelsToGLUnits[1]]);var d={u_camera_to_center_distance:u.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:s,u_inv_rot_matrix:nr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){d.u_inv_rot_matrix=i,d.u_merc_center=a,d.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],d.u_zoom_transition=e.globeToMercatorTransition(u.zoom);var f=a[0]*e.EXTENT,h=a[1]*e.EXTENT;d.u_up_dir=u.projection.upVector(new e.CanonicalTileID(0,0,0),f,h)}return d},ir=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},ar=function(t,n,r,i){var a=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/a,n.pixelsToGLUnits[1]/a]}},or=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},sr=e.create(),ur=function(t,n,r,i,a,o,s){var u=t.transform,l="globe"===u.projection.name,c=l?e.globePixelsToTileUnits(u.zoom,n.canonical)*u._pixelsPerMercatorPixel:G(r,1,o),d={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:s,u_inv_rot_matrix:sr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){d.u_inv_rot_matrix=i,d.u_merc_center=a,d.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],d.u_zoom_transition=e.globeToMercatorTransition(u.zoom);var f=a[0]*e.EXTENT,h=a[1]*e.EXTENT;d.u_up_dir=u.projection.upVector(new e.CanonicalTileID(0,0,0),f,h)}return d},lr=function(e,t,n,r,i,a,o){var s=e.transform,u=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:fr(e,t,n,r),u_pixels_to_tile_units:u,u_device_pixel_ratio:a,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:hr(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:dr(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:o}},cr=function(e,t,n,r,i){var a=e.transform;return{u_matrix:fr(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:dr(t,a),u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function dr(e,t){return 1/G(e,1,t.tileZoom)}function fr(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function hr(e){var t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}var pr=function(e,t,n,r,i,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:vr(i.paint.get("raster-hue-rotate")),u_perspective_transform:a};var o,s};function vr(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var mr,gr=e.create(),yr=function(t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m){var g=a.transform,y={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:g.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:g.width/g.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:u,u_is_text:+l,u_pitch_with_map:+i,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:gr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:gr,u_up_vector:[0,-1,0]};return"globe"===m.name&&(y.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],y.u_zoom_transition=f,y.u_inv_rot_matrix=p,y.u_merc_center=h,y.u_camera_forward=g._camera.forward(),y.u_ecef_origin=e.globeECEFOrigin(g.globeMatrix,d.toUnwrapped()),y.u_tile_matrix=Float32Array.from(g.globeMatrix),y.u_up_vector=v),y},_r=function(t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g){return e.extend(yr(t,n,r,i,a,o,s,u,l,c,f,h,p,v,m,g),{u_gamma_scale:i?a.transform.cameraToCenterDistance*Math.cos(a.terrain?0:a.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+d})},br=function(t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m){return e.extend(_r(t,n,r,i,a,o,s,u,!0,l,!0,d,f,h,p,v,m),{u_texsize_icon:c,u_texture_icon:1})},wr=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},xr=function(t,n,r,i,a){return e.extend(function(e,t,n){var r=t.imageManager.getPattern(e.toString()),i=t.imageManager.getPixelSize(),a=i.width,o=i.height,s=Math.pow(2,n.tileID.overscaledZ),u=n.tileSize*Math.pow(2,t.transform.tileZoom)/s,l=u*(n.tileID.canonical.x+n.tileID.wrap*s),c=u*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[a,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/G(n,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(i,r,a),{u_matrix:t,u_opacity:n})},kr={fillExtrusion:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}},fillExtrusionPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}},fill:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},fillPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},fillOutline:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}},fillOutlinePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},circle:function(t){return{u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},collisionBox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}},collisionCircle:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}},debug:function(t){return{u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}},clippingMask:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},heatmap:function(t){return{u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},heatmapTexture:function(t){return{u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}},hillshade:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}},hillshadePrepare:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}},line:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}},linePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}},raster:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}},symbolIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}},symbolSDF:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}},symbolTextAndIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}},background:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}},backgroundPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},terrainRaster:Mn,terrainDepth:Mn,skybox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxGradient:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxCapture:function(t){return{u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}},globeRaster:function(t){return{u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}},globeAtmosphere:function(t){return{u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)}}};function Sr(t,n,r,i,a,o,s){for(var u=t.context,l=u.gl,c=t.transform,d=t.useProgram("collisionBox"),f=[],h=0,p=0,v=0;v<i.length;v++){var m=i[v],g=n.getTile(m),y=g.getBucket(r);if(y){var _=Mt(m,y,c),b=_;0===a[0]&&0===a[1]||(b=t.translatePosMatrix(_,g,a,o));var w=s?y.textCollisionBox:y.iconCollisionBox,x=y.collisionCircleArray;if(x.length>0){var k=e.create(),S=b;e.mul(k,y.placementInvProjMatrix,c.glCoordMatrix),e.mul(k,k,y.placementViewportMatrix),f.push({circleArray:x,circleOffset:p,transform:S,invTransform:k,projection:y.getProjection()}),p=h+=x.length/4}w&&(t.terrain&&t.terrain.setupElevationDraw(g,d),d.draw(u,l.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,ar(b,c,g,y.getProjection()),r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,null,c.zoom,null,[w.collisionVertexBuffer,w.collisionVertexBufferExt]))}}if(s&&f.length){var E=t.useProgram("collisionCircle"),A=new e.StructArrayLayout2f1f2i16;A.resize(4*h),A._trim();for(var T=0,C=0,P=f;C<P.length;C++)for(var I=P[C],R=0;R<I.circleArray.length/4;R++){var L=4*R,M=I.circleArray[L+0],O=I.circleArray[L+1],F=I.circleArray[L+2],D=I.circleArray[L+3];A.emplace(T++,M,O,F,D,0),A.emplace(T++,M,O,F,D,1),A.emplace(T++,M,O,F,D,2),A.emplace(T++,M,O,F,D,3)}(!mr||mr.length<2*h)&&(mr=function(t){var n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var a=6*i;r.uint16[a+0]=4*i+0,r.uint16[a+1]=4*i+1,r.uint16[a+2]=4*i+2,r.uint16[a+3]=4*i+2,r.uint16[a+4]=4*i+3,r.uint16[a+5]=4*i+0}return r}(h));for(var N,j=u.createIndexBuffer(mr,!0),B=u.createVertexBuffer(A,e.collisionCircleLayout.members,!0),U=0,z=f;U<z.length;U++){var V=z[U],Z={u_matrix:V.transform,u_inv_matrix:V.invTransform,u_camera_to_center_distance:(N=c).getCameraToCenterDistance(V.projection),u_viewport_size:[N.width,N.height]};E.draw(u,l.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Z,r.id,B,j,e.SegmentVector.simpleSegment(0,2*V.circleOffset,V.circleArray.length,V.circleArray.length/2),null,c.zoom)}B.destroy(),j.destroy()}}var Er=e.create();function Ar(t,n){var r=t.width,i=t.height,a=t.anchor,o=t.textOffset,s=t.textScale,u=e.getAnchorAlignment(a),l=-(u.horizontalAlign-.5)*r,c=-(u.verticalAlign-.5)*i,d=e.evaluateVariableOffset(a,o);return new e.pointGeometry((l/s+d[0])*n,(c/s+d[1])*n)}function Tr(t,n,r,i,a,o,s,u,l,c,f){var h=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,v=t.icon.dynamicLayoutVertexArray,m={},g=t.getProjection(),y=Ot(u,g,o),_=o.elevation,b=g.upVectorScale(u.canonical,o.center.lat,o.worldSize).metersToTile;p.clear();for(var w=0;w<h.length;w++){var x=h.get(w),k=x.tileAnchorX,S=x.tileAnchorY,E=x.numGlyphs,A=t.allowVerticalPlacement&&!x.placedOrientation,T=x.hidden||!x.crossTileID||A?null:i[x.crossTileID];if(T){var C,P,I,R=0,L=0,M=0;if(_){var O=_?_.getAtTileOffset(u,k,S):0,F=g.upVector(u.canonical,k,S),D=d(F,3);R=O*D[0]*b,L=O*D[1]*b,M=O*D[2]*b}var N=yt(x.projectedAnchorX+R,x.projectedAnchorY+L,x.projectedAnchorZ+M,r?y:s),j=d(N,4),B=j[0],U=j[1],z=j[2],V=j[3],Z=_t(o.getCameraToCenterDistance(g),V),H=a.evaluateSizeForFeature(t.textSizeData,c,x)*Z/e.ONE_EM;r&&(H*=t.tilePixelRatio/l);var W=Ar(T,H);r?(P=yt((B=(C=g.projectTilePoint(k+W.x,S+W.y,u.canonical)).x)+R,(U=C.y)+L,(z=C.z)+M,s),B=(I=d(P,3))[0],U=I[1],z=I[2]):(n&&W._rotate(-o.angle),B+=W.x,U+=W.y,z=0);for(var G=t.allowVerticalPlacement&&x.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,q=0;q<E;q++)e.addDynamicAttributes(p,B,U,z,G);f&&x.associatedIconIndex>=0&&(m[x.associatedIconIndex]={x:B,y:U,z:z,angle:G})}else Ct(E,p)}if(f){v.clear();for(var K=t.icon.placedSymbolArray,J=0;J<K.length;J++){var X=K.get(J),Y=X.numGlyphs,Q=m[J];if(X.hidden||!Q)Ct(Y,v);else for(var $=Q.x,ee=Q.y,te=Q.z,ne=Q.angle,re=0;re<Y;re++)e.addDynamicAttributes(v,$,ee,te,ne)}t.icon.dynamicLayoutVertexBuffer.updateData(v)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function Cr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Pr(t,n,r,i,a,o,s,u,l,c,d,h){var p=t.context,v=p.gl,m=t.transform,g="map"===u,y="map"===l,_=g&&"point"!==r.layout.get("symbol-placement"),b=g&&!y&&!_,w=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=!1,k=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),S=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],E=r.layout.get("text-variable-anchor"),A="globe"===m.projection.name,T=[],C=[0,-1,0],P=C;!A&&!m.mercatorFromTransition||g||(P=function(t){var n=t._camera.getWorldToCamera(t.worldSize,1),r=e.multiply([],n,t.globeMatrix);e.invert(r,r);var i=[0,0,0],a=[0,1,0,0];return e.transformMat4$1(a,a,r),i[0]=a[0],i[1]=a[1],i[2]=a[2],e.normalize(i,i),i}(m));var I,R=f(i);try{for(R.s();!(I=R.n()).done;){var L=I.value,M=n.getTile(L),O=M.getBucket(r);if(O&&("mercator"!==O.projection.name||!A)){var F=a?O.text:O.icon;if(F&&!O.fullyClipped&&F.segments.get().length){var D=F.programConfigurations.get(r.id),N=a||O.sdfIcons,j=a?O.textSizeData:O.iconSizeData,B=y||0!==m.pitch,U=e.evaluateSizeForZoom(j,m.zoom),z=void 0,V=void 0,Z=void 0,H=void 0,W=[0,0],G=null;if(a){if(V=M.glyphAtlasTexture,Z=v.LINEAR,z=M.glyphAtlasTexture.size,O.iconsInText){W=M.imageAtlasTexture.size,G=M.imageAtlasTexture;var q="composite"===j.kind||"camera"===j.kind;H=B||t.options.rotating||t.options.zooming||q?v.LINEAR:v.NEAREST}}else{var K=1!==r.layout.get("icon-size").constantOr(0)||O.iconsNeedLinear;V=M.imageAtlasTexture,Z=N||t.options.rotating||t.options.zooming||K||B?v.LINEAR:v.NEAREST,z=M.imageAtlasTexture.size}var J="globe"===O.projection.name,X=J?P:C,Y=J?e.globeToMercatorTransition(m.zoom):0,Q=Ot(L,O.getProjection(),m),$=m.calculatePixelsToTileUnitsMatrix(M),ee=vt(Q,M.tileID.canonical,y,g,m,O.getProjection(),$),te=t.terrain&&y&&_?e.invert(e.create(),ee):Er,ne=gt(Q,M.tileID.canonical,y,g,m,O.getProjection(),$),re=E&&O.hasTextData(),ie="none"!==r.layout.get("icon-text-fit")&&re&&O.hasIconData();if(_){var ae=m.elevation,oe=ae?ae.getAtTileOffsetFunc(L,m.center.lat,m.worldSize,O.getProjection()):null,se=mt(Q,M.tileID.canonical,y,g,m,O.getProjection(),$);wt(O,Q,t,a,se,ne,y,c,oe,L)}var ue=_||a&&E||ie,le=t.translatePosMatrix(Q,M,o,s),ce=ue?Er:ee,de=t.translatePosMatrix(ne,M,o,s,!0),fe=O.getProjection().createInversionMatrix(m,L.canonical),he=[];t.terrainRenderModeElevated()&&y&&he.push("PITCH_WITH_MAP_TERRAIN"),J&&he.push("PROJECTION_GLOBE_VIEW"),ue&&he.push("PROJECTED_POS_ON_VIEWPORT");var pe=N&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),ve=void 0;ve=N?O.iconsInText?br(j.kind,U,b,y,t,le,ce,de,z,W,L,Y,S,fe,X,O.getProjection()):_r(j.kind,U,b,y,t,le,ce,de,a,z,!0,L,Y,S,fe,X,O.getProjection()):yr(j.kind,U,b,y,t,le,ce,de,a,z,L,Y,S,fe,X,O.getProjection());var me={program:t.useProgram(Cr(N,a,O),D,he),buffers:F,uniformValues:ve,atlasTexture:V,atlasTextureIcon:G,atlasInterpolation:Z,atlasInterpolationIcon:H,isSDF:N,hasHalo:pe,tile:M,labelPlaneMatrixInv:te};if(w&&O.canOverlap){x=!0;var ge,ye=F.segments.get(),_e=f(ye);try{for(_e.s();!(ge=_e.n()).done;){var be=ge.value;T.push({segments:new e.SegmentVector([be]),sortKey:be.sortKey,state:me})}}catch(Ae){_e.e(Ae)}finally{_e.f()}}else T.push({segments:F.segments,sortKey:0,state:me})}}}}catch(Ae){R.e(Ae)}finally{R.f()}x&&T.sort((function(e,t){return e.sortKey-t.sortKey}));for(var we=0,xe=T;we<xe.length;we++){var ke=xe[we],Se=ke.state;if(t.terrain&&t.terrain.setupElevationDraw(Se.tile,Se.program,{useDepthForOcclusion:!A,labelPlaneMatrixInv:Se.labelPlaneMatrixInv}),p.activeTexture.set(v.TEXTURE0),Se.atlasTexture.bind(Se.atlasInterpolation,v.CLAMP_TO_EDGE),Se.atlasTextureIcon&&(p.activeTexture.set(v.TEXTURE1),Se.atlasTextureIcon&&Se.atlasTextureIcon.bind(Se.atlasInterpolationIcon,v.CLAMP_TO_EDGE)),Se.isSDF){var Ee=Se.uniformValues;Se.hasHalo&&(Ee.u_is_halo=1,Ir(Se.buffers,ke.segments,r,t,Se.program,k,d,h,Ee)),Ee.u_is_halo=0}Ir(Se.buffers,ke.segments,r,t,Se.program,k,d,h,Se.uniformValues)}}function Ir(t,n,r,i,a,o,s,u,l){var c=i.context,d=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];a.draw(c,c.gl.TRIANGLES,o,s,u,e.CullFaceMode.disabled,l,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),d)}function Rr(t,n,r,i,a,o,s){var u,l,c,d,h,p=t.context.gl,v=r.paint.get("fill-pattern"),m=v&&v.constantOr(1);s?(l=m&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=p.LINES):(l=m?"fillPattern":"fill",u=p.TRIANGLES);var g,y=f(i);try{for(y.s();!(g=y.n()).done;){var _=g.value,b=n.getTile(_);if(!m||b.patternsLoaded()){var w=b.getBucket(r);if(w){t.prepareDrawTile();var x=w.programConfigurations.get(r.id),k=t.useProgram(l,x);m&&(t.context.activeTexture.set(p.TEXTURE0),b.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePaintBuffers());var S=v.constantOr(null);if(S&&b.imageAtlas){var E=b.imageAtlas.patternPositions[S.toString()];E&&x.setConstantPatternPositions(E)}var A=t.translatePosMatrix(_.projMatrix,b,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){d=w.indexBuffer2,h=w.segments2;var T=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===l&&m?tr(A,t,b,T):er(A,T)}else d=w.indexBuffer,h=w.segments,c=m?$n(A,t,b):Qn(A);t.prepareDrawProgram(t.context,k,_.toUnwrapped()),k.draw(t.context,u,a,t.stencilModeForClipping(_),o,e.CullFaceMode.disabled,c,r.id,w.layoutVertexBuffer,d,h,r.paint,t.transform.zoom,x)}}}}catch(C){y.e(C)}finally{y.f()}}function Lr(t,n,r,i,a,o,s){var u=t.context,l=u.gl,c=t.transform,d=r.paint.get("fill-extrusion-pattern"),h=d.constantOr(1),p=r.paint.get("fill-extrusion-opacity"),v=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],m=r.layout.get("fill-extrusion-edge-radius"),g="globe"===c.projection.name?e.fillExtrusionHeightLift():0,y="globe"===c.projection.name,_=y?e.globeToMercatorTransition(c.zoom):0,b=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)],w=[];y&&w.push("PROJECTION_GLOBE_VIEW"),v[0]>0&&w.push("FAUX_AO");var x,k=f(i);try{for(k.s();!(x=k.n()).done;){var S=x.value,E=n.getTile(S),A=E.getBucket(r);if(A&&A.projection.name===c.projection.name){var T=A.programConfigurations.get(r.id),C=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",T,w);if(t.terrain){var P=t.terrain;if(t.style.terrainSetForDrapingOnly())P.setupElevationDraw(E,C,{useMeterToDem:!0});else{if(!A.enableTerrain)continue;if(P.setupElevationDraw(E,C,{useMeterToDem:!0}),Mr(u,n,S,A,r,P),!A.centroidVertexBuffer){var I=C.attributes.a_centroid_pos;void 0!==I&&l.vertexAttrib2f(I,0,0)}}}h&&(t.context.activeTexture.set(l.TEXTURE0),E.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),T.updatePaintBuffers());var R=d.constantOr(null);if(R&&E.imageAtlas){var L=E.imageAtlas.patternPositions[R.toString()];L&&T.setConstantPatternPositions(L)}var M=t.translatePosMatrix(S.projMatrix,E,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),O=c.projection.createInversionMatrix(c,S.canonical),F=r.paint.get("fill-extrusion-vertical-gradient"),D=h?Yn(M,t,F,p,v,m,S,E,g,_,b,O):Xn(M,t,F,p,v,m,S,g,_,b,O);t.prepareDrawProgram(u,C,S.toUnwrapped());var N=[];t.terrain&&N.push(A.centroidVertexBuffer),y&&N.push(A.layoutVertexExtBuffer),C.draw(u,u.gl.TRIANGLES,a,o,s,e.CullFaceMode.backCCW,D,r.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,r.paint,t.transform.zoom,T,N)}}}catch(j){k.e(j)}finally{k.f()}}function Mr(t,n,r,i,a,o){for(var s,u,l,c=[function(t){var n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){var n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)}],d=function(e){for(var t=n.getSource().minzoom,r=function(e){var t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)},i=0,o=[0,-1,1];i<o.length;i++){var s=o[i];if(!(e.overscaledZ+s<t)){var u=r(e.calculateScaledKey(e.overscaledZ+s));if(u)return u}}},h=[0,0,0],p=function(t,n){return h[0]=Math.min(t.min.y,n.min.y),h[1]=Math.max(t.max.y,n.max.y),h[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,h},v=function(t,n){return h[0]=Math.min(t.min.x,n.min.x),h[1]=Math.max(t.max.x,n.max.x),h[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,h},m=[function(e,t){return p(e,t)},function(e,t){return p(t,e)},function(e,t){return v(e,t)},function(e,t){return v(t,e)}],g=new e.pointGeometry(0,0),y=function(t,n,i,a,c){var d=[[a?i:t,a?t:i,0],[a?i:n,a?n:i,0]],f=c<0?e.EXTENT+c:c,h=[a?f:(t+n)/2,a?(t+n)/2:f,0];return 0===i&&c<0||0!==i&&c>0?o.getForTilePoints(l,[h],!0,u):d.push(h),o.getForTilePoints(r,d,!0,s),Math.max(d[0][2],d[1][2],h[2])/o.exaggeration()},_=0;_<4;_++){var b=(_<2?1:5)-_,w=i.borders[_];if(0!==w.length){var x=l=c[_](r),k=d(x);if(k&&k instanceof e.FillExtrusionBucket&&k.enableTerrain&&(i.borderDoneWithNeighborZ[_]!==k.canonical.z||k.borderDoneWithNeighborZ[b]!==i.canonical.z)&&(u=o.findDEMTileFor(x))&&u.dem){if(!s){var S=o.findDEMTileFor(r);if(!S||!S.dem)return;s=S}var E=k.borders[b],A=0,T=k.borderDoneWithNeighborZ[b]!==i.canonical.z;if(i.canonical.z===k.canonical.z){for(var C=0;C<w.length;C++){for(var P=i.featuresOnBorder[w[C]],I=P.borders[_],R=void 0;A<E.length&&!((R=k.featuresOnBorder[E[A]]).borders[b][1]>I[0]+3);)T&&k.encodeCentroid(void 0,R,!1),A++;if(R&&A<E.length){for(var L=A,M=0;!(R.borders[b][0]>I[1]-3)&&(M++,++A!==E.length);)R=k.featuresOnBorder[E[A]];if(R=k.featuresOnBorder[E[L]],P.intersectsCount()>1||R.intersectsCount()>1||1!==M){1!==M&&(A=L),i.encodeCentroid(void 0,P,!1),T&&k.encodeCentroid(void 0,R,!1);continue}var O=m[_](P,R),F=_%2?e.EXTENT-1:0;g.x=y(O[0],Math.min(e.EXTENT-1,O[1]),F,_<2,O[2]),g.y=0,i.encodeCentroid(g,P,!1),T&&k.encodeCentroid(g,R,!1)}else i.encodeCentroid(void 0,P,!1)}i.borderDoneWithNeighborZ[_]=k.canonical.z,i.needsCentroidUpdate=!0,T&&(k.borderDoneWithNeighborZ[b]=i.canonical.z,k.needsCentroidUpdate=!0)}else{var D,N=f(w);try{for(N.s();!(D=N.n()).done;){var j=D.value;i.encodeCentroid(void 0,i.featuresOnBorder[j],!1)}}catch(V){N.e(V)}finally{N.f()}if(T){var B,U=f(E);try{for(U.s();!(B=U.n()).done;){var z=B.value;k.encodeCentroid(void 0,k.featuresOnBorder[z],!1)}}catch(V){U.e(V)}finally{U.f()}k.borderDoneWithNeighborZ[b]=i.canonical.z,k.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[_]=k.canonical.z,i.needsCentroidUpdate=!0}}}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}var Or=new e.Color(1,0,0,1),Fr=new e.Color(0,1,0,1),Dr=new e.Color(0,0,1,1),Nr=new e.Color(1,0,1,1),jr=new e.Color(0,1,1,1);function Br(t,n,r){var i=t.context,a=t.transform,o=i.gl,s="globe"===a.projection.name,u=s?["PROJECTION_GLOBE_VIEW"]:null,l=r.projMatrix;if(s&&e.globeToMercatorTransition(a.zoom)>0){var c=e.transitionTileAABBinECEF(r.canonical,a),d=e.globeDenormalizeECEF(c);l=e.multiply(new Float32Array(16),a.globeMatrix,d),e.multiply(l,a.projMatrix,l)}var f=t.useProgram("debug",null,u),h=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(h,f);var p=e.DepthMode.disabled,v=e.StencilMode.disabled,m=t.colorModeForRenderPass(),g="$debug";i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s?h._makeGlobeTileDebugBuffers(t.context,a):h._makeDebugTileBoundsBuffers(t.context,a.projection);var y=h._tileDebugBuffer||t.debugBuffer,_=h._tileDebugIndexBuffer||t.debugIndexBuffer,b=h._tileDebugSegments||t.debugSegments;f.draw(i,o.LINE_STRIP,p,v,m,e.CullFaceMode.disabled,or(l,e.Color.red),g,y,_,b,null,null,null,[h._globeTileDebugBorderBuffer]);var w=h.latestRawTileData,x=Math.floor((w&&w.byteLength||0)/1024),k=n.getTile(r).tileSize,S=512/Math.min(k,512)*(r.overscaledZ/a.zoom)*.5,E=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(E+=" => ".concat(r.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,E+=" ".concat(x,"kb"));var A=h._tileDebugTextBuffer||t.debugBuffer,T=h._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,C=h._tileDebugTextSegments||t.debugSegments;f.draw(i,o.TRIANGLES,p,v,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,or(l,e.Color.transparent,S),g,A,T,C,null,null,null,[h._globeTileDebugTextBuffer])}function Ur(e,t,n,r){Vr(e,0,t+n/2,e.transform.width,n,r)}function zr(e,t,n,r){Vr(e,t-n/2,0,n,e.transform.height,r)}function Vr(t,n,r,i,a,o){var s=t.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),s.clear({color:o}),u.disable(u.SCISSOR_TEST)}var Zr=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function Hr(e,t,n,r){e.emplaceBack(t,n,r)}var Wr=p((function t(n){h(this,t),this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Hr(this.vertexArray,-1,-1,1),Hr(this.vertexArray,1,-1,1),Hr(this.vertexArray,-1,1,1),Hr(this.vertexArray,1,1,1),Hr(this.vertexArray,-1,-1,-1),Hr(this.vertexArray,1,-1,-1),Hr(this.vertexArray,-1,1,-1),Hr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,Zr),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}));function Gr(t,n,r,i,a,o){var s=t.gl,u=n.paint.get("sky-atmosphere-color"),l=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),d=function(e,t,n,r,i){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}}(e.fromMat4(e.create$1(),i),a,c,u,l);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,d,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}var qr=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),Kr=function(){function t(n){h(this,t);var r=new e.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);var i=new e.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=n.createVertexBuffer(r,qr.members),this.indexBuffer=n.createIndexBuffer(i),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}return p(t,[{key:"destroy",value:function(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}]),t}(),Jr={symbol:function(t,n,r,i,a){if("translucent"===t.renderPass){var o=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,a,o,s){var u,l=n.transform,c="map"===a,d="map"===o,h=f(t);try{for(h.s();!(u=h.n()).done;){var p=u.value,v=i.getTile(p),m=v.getBucket(r);if(m&&m.text&&m.text.segments.get().length){var g=e.evaluateSizeForZoom(m.textSizeData,l.zoom),y=Ot(p,m.getProjection(),l),_=l.calculatePixelsToTileUnitsMatrix(v),b=vt(y,v.tileID.canonical,d,c,l,m.getProjection(),_),w="none"!==r.layout.get("icon-text-fit")&&m.hasIconData();if(g){var x=Math.pow(2,l.zoom-v.tileID.overscaledZ);Tr(m,c,d,s,e.symbolSize,l,b,p,x,g,w)}}}}catch(k){h.e(k)}finally{h.f()}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&Pr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&Pr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(Sr(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Sr(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var l=t.context,c=l.gl,d=t.transform,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,v=t.colorModeForRenderPass(),m="globe"===d.projection.name,g=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],y=[],_=0;_<i.length;_++){var b=i[_],w=n.getTile(b),x=w.getBucket(r);if(x&&x.projection.name===d.projection.name){var k=x.programConfigurations.get(r.id),S=ir(r);m&&S.push("PROJECTION_GLOBE_VIEW");var E=t.useProgram("circle",k,S),A=x.layoutVertexBuffer,T=x.globeExtVertexBuffer,C=x.indexBuffer,P=d.projection.createInversionMatrix(d,b.canonical),I={programConfiguration:k,program:E,layoutVertexBuffer:A,globeExtVertexBuffer:T,indexBuffer:C,uniformValues:rr(t,b,w,P,g,r),tile:w};if(u){var R,L=x.segments.get(),M=f(L);try{for(M.s();!(R=M.n()).done;){var O=R.value;y.push({segments:new e.SegmentVector([O]),sortKey:O.sortKey,state:I})}}catch(K){M.e(K)}finally{M.f()}}else y.push({segments:x.segments,sortKey:0,state:I})}}u&&y.sort((function(e,t){return e.sortKey-t.sortKey}));for(var F={useDepthForOcclusion:!m},D=0,N=y;D<N.length;D++){var j=N[D],B=j.state,U=B.programConfiguration,z=B.program,V=B.layoutVertexBuffer,Z=B.globeExtVertexBuffer,H=B.indexBuffer,W=B.uniformValues,G=B.tile,q=j.segments;t.terrain&&t.terrain.setupElevationDraw(G,z,F),t.prepareDrawProgram(l,z,G.tileID.toUnwrapped()),z.draw(l,c.TRIANGLES,h,p,v,e.CullFaceMode.disabled,W,r.id,V,H,q,r.paint,d.zoom,U,[Z])}}}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,o=a.gl,s=e.StencilMode.disabled,u=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,r){var i=e.gl,a=t.width*r,o=t.height*r;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,a,o]);var s=n.heatmapFbo;if(!s||s&&(s.width!==a||s.height!==o)){s&&s.destroy();var u=i.createTexture();i.bindTexture(i.TEXTURE_2D,u),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=e.createFramebuffer(a,o,!1),function(e,t,n,r,i,a){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?o.RGBA16F:o.RGBA,i,a,0,o.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?o.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,0,u,s,a,o)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(a,t,r,"globe"===t.transform.projection.name?.5:.25),a.clear({color:e.Color.transparent});for(var l=t.transform,c="globe"===l.projection.name,d=c?["PROJECTION_GLOBE_VIEW"]:null,f=c?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,h=[e.mercatorXfromLng(l.center.lng),e.mercatorYfromLat(l.center.lat)],p=0;p<i.length;p++){var v=i[p];if(!n.hasRenderableParent(v)){var m=n.getTile(v),g=m.getBucket(r);if(g&&g.projection.name===l.projection.name){var y=g.programConfigurations.get(r.id),_=t.useProgram("heatmap",y,d),b=t.transform.zoom;t.terrain&&t.terrain.setupElevationDraw(m,_),t.prepareDrawProgram(a,_,v.toUnwrapped());var w=l.projection.createInversionMatrix(l,v.canonical);_.draw(a,o.TRIANGLES,e.DepthMode.disabled,s,u,f,ur(t,v,m,w,h,b,r.paint.get("heatmap-intensity")),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,y,c?[g.globeExtVertexBuffer]:null)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,i=r.gl,a=n.heatmapFbo;if(a){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,function(e,t,n,r){return{u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),u=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,c=r.paint.get("line-dasharray"),h=c.constantOr(1),p=r.layout.get("line-cap"),v=r.paint.get("line-pattern"),m=v.constantOr(1),g=r.paint.get("line-gradient"),y=m?"linePattern":"line",_=t.context,b=_.gl,w=function(e){var t=[];hr(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");var n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");var r=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!r&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t}(r),x=w.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(x=!1);var k,S=f(i);try{var E=function(){var i=k.value,a=n.getTile(i);if(m&&!a.patternsLoaded())return"continue";var o=a.getBucket(r);if(!o)return"continue";t.prepareDrawTile();var f=o.programConfigurations.get(r.id),S=t.useProgram(y,f,w),E=v.constantOr(null);if(E&&a.imageAtlas){var A=a.imageAtlas.patternPositions[E.toString()];A&&f.setConstantPatternPositions(A)}var T=c.constantOr(null),C=p.constantOr(null);if(!m&&T&&C&&a.lineAtlas){var P=a.lineAtlas.getDash(T,C);P&&f.setConstantPatternPositions(P)}var I=r.paint.get("line-trim-offset"),R=d(I,2),L=R[0],M=R[1];if("round"===C||"square"===C){var O=1;L!==M&&(0===L&&(L-=O),1===M&&(M+=O))}var F=t.terrain?i.projMatrix:null,D=m?cr(t,a,r,F,l):lr(t,a,r,F,o.lineClipsArray.length,l,[L,M]);if(g){var N=o.gradients[r.id],j=N.texture;if(r.gradientVersion!==N.version){var B=256;if(r.stepInterpolant){var U=n.getSource().maxzoom,z=i.canonical.z===U?Math.ceil(1<<t.transform.maxZoom-i.canonical.z):1;B=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*z),256,_.maxTextureSize)}N.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:B,image:N.gradient||void 0,clips:o.lineClipsArray}),N.texture?N.texture.update(N.gradient):N.texture=new e.Texture(_,N.gradient,b.RGBA),N.version=r.gradientVersion,j=N.texture}_.activeTexture.set(b.TEXTURE1),j.bind(r.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE)}h&&(_.activeTexture.set(b.TEXTURE0),a.lineAtlasTexture.bind(b.LINEAR,b.REPEAT),f.updatePaintBuffers()),m&&(_.activeTexture.set(b.TEXTURE0),a.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),f.updatePaintBuffers()),t.prepareDrawProgram(_,S,i.toUnwrapped());var V=function(n){S.draw(_,b.TRIANGLES,s,n,u,e.CullFaceMode.disabled,D,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,t.transform.zoom,f,[o.layoutVertexBuffer2])};if(x){var Z=t.stencilModeForClipping(i).ref;0===Z&&t.terrain&&_.clear({stencil:0});var H={func:b.EQUAL,mask:255};D.u_alpha_discard_threshold=.8,V(new e.StencilMode(H,Z,255,b.KEEP,b.KEEP,b.INVERT)),D.u_alpha_discard_threshold=0,V(new e.StencilMode(H,Z,255,b.KEEP,b.KEEP,b.KEEP))}else V(t.stencilModeForClipping(i))};for(S.s();!(k=S.n()).done;)E()}catch(A){S.e(A)}finally{S.f()}x&&(t.resetStencilClippingMasks(),t.terrain&&_.clear({stencil:0}))}}},fill:function(t,n,r,i){var a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===l){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Rr(t,n,r,i,c,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var d=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Rr(t,n,r,i,d,s,!0)}}},"fill-extrusion":function(t,n,r,i){var a=r.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){var o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||r.paint.get("fill-extrusion-pattern").constantOr(1))Lr(t,n,r,i,o,e.StencilMode.disabled,e.ColorMode.disabled),Lr(t,n,r,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{var s=t.colorModeForRenderPass();Lr(t,n,r,i,o,e.StencilMode.disabled,s)}}},hillshade:function(t,n,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a,o=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),u=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,c="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i),h=d(c,2),p=h[0],v=h[1],m=f(v);try{for(m.s();!(a=m.n()).done;){var g=a.value,y=n.getTile(g);if(y.needsHillshadePrepare&&"offscreen"===t.renderPass)Ln(t,y,r,s,e.StencilMode.disabled,u);else if("translucent"===t.renderPass){var _=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(g):p[g.overscaledZ];In(t,g,y,r,s,_,u)}}}catch(b){m.e(b)}finally{m.f()}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()}},raster:function(t,n,r,i,a,o){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")&&i.length){var s,u=t.context,l=u.gl,c=n.getSource(),h=t.useProgram("raster"),p=t.colorModeForRenderPass(),v=t.terrain&&t.terrain.renderingToTexture,m=c instanceof He||v?[{},i]:t.stencilConfigForOverlap(i),g=d(m,2),y=g[0],_=g[1],b=_[_.length-1].overscaledZ,w=!t.options.moving,x=f(_);try{for(x.s();!(s=x.n()).done;){var k=s.value,S=v?e.DepthMode.disabled:t.depthModeForSublayer(k.overscaledZ-b,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),E=k.toUnwrapped(),A=n.getTile(k);if(!v||A&&A.hasData()){var T=v?k.projMatrix:t.transform.calculateProjMatrix(E,w),C=t.terrain&&v?t.terrain.stencilModeForRTTOverlap(k):y[k.overscaledZ],P=o?0:r.paint.get("raster-fade-duration");A.registerFadeDuration(P);var I=n.findLoadedParent(k,0),R=Vn(A,I,n,t.transform,P),L=void 0,M=void 0;t.terrain&&t.terrain.prepareDrawTile();var O="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;u.activeTexture.set(l.TEXTURE0),A.texture.bind(O,l.CLAMP_TO_EDGE),u.activeTexture.set(l.TEXTURE1),I?(I.texture.bind(O,l.CLAMP_TO_EDGE),L=Math.pow(2,I.tileID.overscaledZ-A.tileID.overscaledZ),M=[A.tileID.canonical.x*L%1,A.tileID.canonical.y*L%1]):A.texture.bind(O,l.CLAMP_TO_EDGE);var F=pr(T,M||[0,0],L||1,R,r,c instanceof He?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(u,h,E),c instanceof He)c.boundsBuffer&&c.boundsSegments&&h.draw(u,l.TRIANGLES,S,e.StencilMode.disabled,p,e.CullFaceMode.disabled,F,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{var D=t.getTileBoundsBuffers(A),N=D.tileBoundsBuffer,j=D.tileBoundsIndexBuffer,B=D.tileBoundsSegments;h.draw(u,l.TRIANGLES,S,C,p,e.CullFaceMode.disabled,F,r.id,N,j,B)}}}}catch(U){x.e(U)}finally{x.f()}t.resetStencilClippingMasks()}},background:function(t,n,r,i){var a=r.paint.get("background-color"),o=r.paint.get("background-opacity");if(0!==o){var s=t.context,u=s.gl,l=t.transform,c=l.tileSize,d=r.paint.get("background-pattern");if(!t.isPatternMissing(d)){var h=!d&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===h){var p,v=e.StencilMode.disabled,m=t.depthModeForSublayer(0,"opaque"===h?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),g=t.colorModeForRenderPass(),y=t.useProgram(d?"backgroundPattern":"background"),_=i;_||(p=t.getBackgroundTiles(),_=Object.values(p).map((function(e){return e.tileID}))),d&&(s.activeTexture.set(u.TEXTURE0),t.imageManager.bind(t.context));var b,w=f(_);try{for(w.s();!(b=w.n()).done;){var x=b.value,k=x.toUnwrapped(),S=i?x.projMatrix:t.transform.calculateProjMatrix(k);t.prepareDrawTile();var E=n?n.getTile(x):p?p[x.key]:new e.Tile(x,c,l.zoom,t),A=d?xr(S,o,t,d,{tileID:x,tileSize:c}):wr(S,o,a);t.prepareDrawProgram(s,y,k);var T=t.getTileBoundsBuffers(E),C=T.tileBoundsBuffer,P=T.tileBoundsIndexBuffer,I=T.tileBoundsSegments;y.draw(s,u.TRIANGLES,m,v,g,e.CullFaceMode.disabled,A,r.id,C,P,I)}}catch(R){w.e(R)}finally{w.f()}}}}},sky:function(t,n,r){var i=t.transform,a="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),o=r.paint.get("sky-opacity")*a;if(0!==o){var s=t.context,u=r.paint.get("sky-type"),l=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),c=t.frameCounter/1e3%1;"atmosphere"===u?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){var a=t.context,o=a.gl,s=n.skyboxFbo;if(!s){s=n.skyboxFbo=a.createFramebuffer(32,32,!1),n.skyboxGeometry=new Wr(a),n.skyboxTexture=a.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,n.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(var u=0;u<6;++u)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(s.framebuffer),a.viewport.set([0,0,32,32]);var l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),d=new Float64Array(16);e.identity(d),e.rotateY(d,d,.5*-Math.PI),Gr(a,n,c,d,l,0),e.identity(d),e.rotateY(d,d,.5*Math.PI),Gr(a,n,c,d,l,1),e.identity(d),e.rotateX(d,d,.5*-Math.PI),Gr(a,n,c,d,l,2),e.identity(d),e.rotateX(d,d,.5*Math.PI),Gr(a,n,c,d,l,3),e.identity(d),Gr(a,n,c,d,l,4),e.identity(d),e.rotateY(d,d,Math.PI),Gr(a,n,c,d,l,5),a.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,a){var o=t.context,s=o.gl,u=t.transform,l=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);var c=function(e,t,n,r,i){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}}(u.skyboxMatrix,n.getCenter(t,!1),0,i,a);t.prepareDrawProgram(o,l),l.draw(o,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,l,o,c):"gradient"===u&&"sky"===t.renderPass&&function(t,n,r,i,a){var o=t.context,s=o.gl,u=t.transform,l=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Wr(o)),o.activeTexture.set(s.TEXTURE0);var c=n.colorRampTexture;c||(c=n.colorRampTexture=new e.Texture(o,n.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);var d=function(t,n,r,i,a){return{u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:a}}(u.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,a);t.prepareDrawProgram(o,l),l.draw(o,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,d,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,l,o,c)}},debug:function(e,t,n){for(var r=0;r<n.length;r++)Br(e,t,n[r])},custom:function(t,n,r,i){var a=t.context,o=r.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&r.isLayerDraped()){if("offscreen"===t.renderPass){var s=o.prerender;if(s){if(t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){var u=t.transform.pointMerc;s.call(o,a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[u.x,u.y],t.transform.pixelsPerMeterRatio)}else s.call(o,a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){var l=o.renderToTile;if(l){var c=i[0].canonical,d=new e.MercatorCoordinate(c.x+i[0].wrap*(1<<c.z),c.y,c.z);a.setDepthMode(e.DepthMode.disabled),a.setStencilMode(e.StencilMode.disabled),a.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),l.call(o,a.gl,d),a.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),a.setStencilMode(e.StencilMode.disabled);var f="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(a.setDepthMode(f),"globe"===t.transform.projection.name){var h=t.transform.pointMerc;o.render(a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[h.x,h.y],t.transform.pixelsPerMeterRatio)}else o.render(a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState(),a.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}},Xr=function(){function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h(this,t),this.context=new Ue(n,i),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new sn,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}return p(t,[{key:"updateTerrain",value:function(e,t){var n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new Gn(this,e));var r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}}},{key:"_updateFog",value:function(e){var t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)this.transform.fogCullDistSq=null;else{var n=t.getFovAdjustedRange(this.transform._fov),r=d(n,2),i=r[0],a=r[1];if(i>a)this.transform.fogCullDistSq=null;else{var o=i+.78*(a-i);this.transform.fogCullDistSq=o*o}}}},{key:"terrain",get:function(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var r,i=f(this.style.order);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.style._layers[a].resize()}}catch(o){i.e(o)}finally{i.f()}}}},{key:"setup",value:function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(o);for(var s=new e.StructArrayLayout1ui2,u=0,l=[0,1,3,2,0];u<l.length;u++){var c=l[u];s.emplaceBack(c)}this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();var d=this.context.gl;this.stencilClearMode=new e.StencilMode({func:d.ALWAYS,mask:0},0,255,d.ZERO,d.ZERO,d.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Kr(this.context)}},{key:"getMercatorTileBoundsBuffers",value:function(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}},{key:"getTileBoundsBuffers",value:function(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}},{key:"clearStencil",value:function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,zn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"resetStencilClippingMasks",value:function(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}},{key:"_renderTileClippingMasks",value:function(t,n,r){if(n&&this.currentStencilSource!==n.id&&t.isTileClipped()&&r&&0!==r.length){if(this._tileClippingMaskIDs&&!this.terrain){var i,a=!1,o=f(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(void 0===this._tileClippingMaskIDs[s.key]){a=!0;break}}}catch(w){o.e(w)}finally{o.f()}if(!a)return}this.currentStencilSource=n.id;var u=this.context,l=u.gl;this.nextStencilID+r.length>256&&this.clearStencil(),u.setColorMode(e.ColorMode.disabled),u.setDepthMode(e.DepthMode.disabled);var c=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var d,h=f(r);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=n.getTile(p),m=this._tileClippingMaskIDs[p.key]=this.nextStencilID++,g=this.getTileBoundsBuffers(v),y=g.tileBoundsBuffer,_=g.tileBoundsIndexBuffer,b=g.tileBoundsSegments;c.draw(u,l.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:l.ALWAYS,mask:0},m,255,l.KEEP,l.KEEP,l.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,zn(p.projMatrix),"$clipping",y,_,b)}}catch(w){h.e(w)}finally{h.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilModeForClipping",value:function(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);var n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var n=this.context.gl,i=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=i[i.length-1].overscaledZ,o=i[0].overscaledZ-a+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var s={},u=0;u<o;u++)s[u+a]=new e.StencilMode({func:n.GEQUAL,mask:255},u+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[s,i]}return[r({},a,e.StencilMode.disabled),i]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,n){var r=this;this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();var i=this.style.order,a=this.style._sourceCaches;for(var o in a){var s=a[o];s.used&&s.prepare(this.context)}var u={},l={},c={};for(var d in a){var h=a[d];u[d]=h.getVisibleCoordinates(),l[d]=u[d].slice().reverse(),c[d]=h.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var p=0;p<i.length;p++)if(this.style._layers[i[p]].is3D()){this.opaquePassCutoff=p;break}if(this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";var v,m=f(i);try{for(m.s();!(v=m.n()).done;){var g=v.value,y=this.style._layers[g],_=t._getLayerSourceCache(y);if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var b=_?l[_.id]:void 0;("custom"===y.type||y.isSky()||b&&b.length)&&this.renderLayer(this,_,y,b)}}}catch(I){m.e(I)}finally{m.f()}if(this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var w=this.style._layers[i[this.currentLayer]],x=t._getLayerSourceCache(w);if(!w.isSky()){var k=x?l[x.id]:void 0;this._renderTileClippingMasks(w,x,k),this.renderLayer(this,x,w,k)}}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){var r=t.context,i=r.gl,a=t.transform,o=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===a.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),u=e.globeToMercatorTransition(a.zoom),l=n.properties.get("color").toArray01(),c=n.properties.get("high-color").toArray01(),d=n.properties.get("space-color").toArray01PremultipliedAlpha(),f=e.identity$1([]);e.rotateY$1(f,f,-e.degToRad(a._center.lng)),e.rotateX$1(f,f,e.degToRad(a._center.lat)),e.rotateZ$1(f,f,a.angle),e.rotateX$1(f,f,-a._pitch);var h=e.fromQuat(new Float32Array(16),f),p=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),v=5e-4,m=e.mapValue(n.properties.get("horizon-blend"),0,1,v,.25),g=e.globeUseCustomAntiAliasing(t,r,a)&&m===v?a.worldSize/(2*Math.PI*1.025)-1:a.globeRadius,y=t.frameCounter/1e3%1,_=e.length(a.globeCenterInViewSpace),b=Math.sqrt(Math.pow(_,2)-Math.pow(g,2)),w=Math.acos(b/_),x=function(t,n,r,i,a,o,s,u,l,c,d,f,h,p){return{u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:a,u_transition:o,u_fadeout_range:s,u_color:u,u_high_color:l,u_space_color:c,u_star_intensity:d,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:f,u_horizon_angle:h,u_rotation_matrix:p}}(a.frustumCorners.TL,a.frustumCorners.TR,a.frustumCorners.BR,a.frustumCorners.BL,a.frustumCorners.horizon,u,m,l,c,d,p,y,w,h);t.prepareDrawProgram(r,s);var k=t.atmosphereBuffer;k&&s.draw(r,i.TRIANGLES,o,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,x,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var S=this.style._layers[i[this.currentLayer]],E=t._getLayerSourceCache(S);S.isSky()&&this.renderLayer(this,E,S,E?l[E.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){var A=this.style._layers[i[this.currentLayer]],T=t._getLayerSourceCache(A);if(A.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(A)){if(A.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var C=T?("symbol"===A.type?c:l)[T.id]:void 0;this._renderTileClippingMasks(A,T,T?u[T.id]:void 0),this.renderLayer(this,T,A,C),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){var P=null;e.values(this.style._layers).forEach((function(e){var n=t._getLayerSourceCache(e);n&&!e.isHidden(r.transform.zoom)&&(!P||P.getSource().maxzoom<n.getSource().maxzoom)&&(P=n)})),P&&this.options.showTileBoundaries&&Jr.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;Ur(e,e.transform.height-(t.top||0),3,Or),Ur(e,t.bottom||0,3,Fr),zr(e,t.left||0,3,Dr),zr(e,e.transform.width-(t.right||0),3,Nr);var n=e.transform.centerPoint;!function(e,t,n,r){Vr(e,t-1,n-10,2,20,r),Vr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,jr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&Jr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingDeferredRenderStart",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}},{key:"gpuTimingDeferredRenderEnd",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"collectDeferredRenderGpuQueries",value:function(){var e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}},{key:"queryGpuTimers",value:function(e){var t={};for(var n in e){var r=e[n],i=this.context.extTimerQuery,a=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=a}return t}},{key:"queryGpuTimeDeferredRender",value:function(e){if(!this.options.gpuTimingDeferredRender)return 0;var t,n=this.context.extTimerQuery,r=0,i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r+=n.getQueryObjectEXT(a,n.QUERY_RESULT_EXT)/1e6,n.deleteQueryEXT(a)}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"translatePosMatrix",value:function(t,n,r,i,a){if(!r[0]&&!r[1])return t;var o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){var s=Math.sin(o),u=Math.cos(o);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[a?r[0]:G(n,r[0],this.transform.zoom),a?r[1]:G(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,l),c}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}},{key:"terrainRenderModeElevated",value:function(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&r.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}},{key:"useProgram",value:function(e,t,n){this.cache=this.cache||{};var r=n||[],i=this.currentGlobalDefines().concat(r),a=qn.cacheKey(En[e],e,i,t);return this.cache[a]||(this.cache[a]=new qn(this.context,e,En[e],t,kr[e],i)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}},{key:"prepareDrawTile",value:function(){this.terrain&&this.terrain.prepareDrawTile()}},{key:"prepareDrawProgram",value:function(t,n,r){if(!this.terrain||!this.terrain.renderingToTexture){var i=this.style.fog;if(i){var a=i.getOpacity(this.transform.pitch),o=function(t,n,r,i,a,o,s,u,l,c,d){var f=t.transform,h=n.properties.get("color").toArray01();h[3]=i;var p=t.frameCounter/1e3%1;return{u_fog_matrix:r?f.calculateFogTileMatrix(r):t.identityMat,u_fog_range:n.getFovAdjustedRange(f._fov),u_fog_color:h,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:a,u_frustum_tr:o,u_frustum_br:s,u_frustum_bl:u,u_globe_pos:l,u_globe_radius:c,u_viewport:d,u_globe_transition:e.globeToMercatorTransition(f.zoom),u_is_globe:+("globe"===f.projection.name)}}(this,i,r,a,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,o)}}}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){var e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"averageElevationNeedsEasing",value:function(){if(!this.transform._elevation)return!1;var e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}},{key:"getBackgroundTiles",value:function(){var t,n=this._backgroundTiles,r=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512}),a=f(i);try{for(a.s();!(t=a.n()).done;){var o=t.value;r[o.key]=n[o.key]||new e.Tile(o,512,this.transform.tileZoom,this)}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"clearBackgroundTiles",value:function(){this._backgroundTiles={}}}]),t}(),Yr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(h(this,t),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=r,this.right=i}return p(t,[{key:"interpolate",value:function(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}},{key:"getCenter",value:function(t,n){var r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(r,i)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}();function Qr(t,n){var r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function $r(t,n){var r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function ei(t,n){var r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){var a=e.normalize([],r);e.scale$2(i,a,e.dot(i,a)),n[0]=i[0],n[1]=i[1]}var o=e.cross([],n,t);if(e.len(o)<1e-15)return null;var s=Math.atan2(-o[1],o[0]);return $r(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}var ti=function(){function t(e,n){h(this,t),this.position=e,this.orientation=n}return p(t,[{key:"position",get:function(){return this._position},set:function(t){if(t){var n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}},{key:"lookAtPoint",value:function(t,n){if(this.orientation=null,this.position){var r=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,a=e.MercatorCoordinate.fromLngLat(t,r),o=[a.x-i.x,a.y-i.y,a.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=ei(o,n)}}},{key:"setPitchBearing",value:function(t,n){this.orientation=$r(e.degToRad(t),e.degToRad(-n))}}]),t}(),ni=function(){function t(n,r){h(this,t),this._transform=e.identity([]),this.orientation=r,this.position=n}return p(t,[{key:"mercatorPosition",get:function(){var t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}},{key:"position",get:function(){var t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]},set:function(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation=t||e.identity$1([]),t&&Qr(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=$r(e,t),Qr(this._transform,this._orientation)}},{key:"forward",value:function(){var t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}},{key:"up",value:function(){var t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}},{key:"right",value:function(){var t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}},{key:"getCameraToWorld",value:function(t,n){var r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}},{key:"getWorldToCameraPosition",value:function(t,n,r){var i=this.position;e.scale$2(i,i,-t);var a=new Float64Array(16);return e.fromScaling(a,[r,r,r]),e.translate(a,a,i),a[10]*=n,a}},{key:"getWorldToCamera",value:function(t,n){var r=new Float64Array(16),i=new Float64Array(4),a=this.position;return e.conjugate(i,this._orientation),e.scale$2(a,a,-t),e.fromQuat(r,i),e.translate(r,r,a),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}},{key:"getCameraToClipPerspective",value:function(t,n,r,i){var a=new Float64Array(16);return e.perspective(a,t,n,r,i),a}},{key:"getDistanceToElevation",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}},{key:"clone",value:function(){return new t(c(this.position),c(this.orientation))}}]),t}();function ri(t,n){var r=ai(t.projection,t.zoom,t.width,t.height),i=function(t,n,r,i,a){var o=new e.LngLat(r.lng-180*oi,r.lat),s=new e.LngLat(r.lng+180*oi,r.lat),u=t.project(o.lng,o.lat),l=t.project(s.lng,s.lat),c=-Math.atan2(l.y-u.y,l.x-u.x),d=e.MercatorCoordinate.fromLngLat(r);d.y=e.clamp(d.y,-.999975,.999975);var f=d.toLngLat(),h=t.project(f.lng,f.lat),p=e.MercatorCoordinate.fromLngLat(f);p.x+=oi;var v=p.toLngLat(),m=t.project(v.lng,v.lat),g=ui(m.x-h.x,m.y-h.y,c),y=e.MercatorCoordinate.fromLngLat(f);y.y+=oi;var _=y.toLngLat(),b=t.project(_.lng,_.lat),w=ui(b.x-h.x,b.y-h.y,c),x=Math.abs(g.x)/Math.abs(w.y),k=e.identity([]);e.rotateZ(k,k,-c*(1-(a?0:i)));var S=e.identity([]);return e.scale(S,S,[1,1-(1-x)*i,1]),S[4]=-w.x/w.y*i,e.rotateZ(S,S,c),e.multiply(S,k,S),S}(t.projection,0,t.center,r,n),a=ii(t);return e.scale(i,i,[a,a,1]),i}function ii(t){var n=t.projection,r=ai(t.projection,t.zoom,t.width,t.height),i=si(n,t.center),a=si(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*a)}function ai(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=t.range;if(!o)return 0;var s=Math.min(a,Math.max(r,i)),u=Math.log(s/1024)/Math.LN2;return e.smoothstep(o[0]+u,o[1]+u,n)}var oi=1/4e4;function si(t,n){var r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*oi,r),a=new e.LngLat(n.lng+180*oi,r),o=t.project(i.lng,r),s=t.project(a.lng,r),u=e.MercatorCoordinate.fromLngLat(i),l=e.MercatorCoordinate.fromLngLat(a),c=s.x-o.x,d=s.y-o.y,f=l.x-u.x,h=l.y-u.y,p=Math.sqrt((f*f+h*h)/(c*c+d*d));return Math.log(p)/Math.LN2}function ui(e,t,n){var r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}var li=function(){function n(t,r,i,a,o,s,u){h(this,n),this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setProjection(s),this.setMaxBounds(u),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Yr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ni,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}return p(n,[{key:"clone",value:function(){var e=new n(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}},{key:"updateElevation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}},{key:"getProjection",value:function(){return e.pick(this.projection,["name","center","parallels"])}},{key:"setProjection",value:function(n){this.projectionOptions=n||{name:"mercator"};var r=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);var i=!t(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}},{key:"setMercatorFromTransition",value:function(){var t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});var n=t!==this.projection.name;return n&&this._calcMatrices(),n}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"cameraWorldSizeForFog",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"cameraWorldSize",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"pixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}},{key:"cameraPixelsPerMeter",get:function(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.pointGeometry(this.width,this.height)}},{key:"bearing",get:function(){return e.wrap(this.rotation,-180,180)},set:function(e){this.rotation=e}},{key:"rotation",get:function(){return-this.angle/Math.PI*180},set:function(t){var n,r=-t*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=r*-s+a*u,e[3]=i*-s+o*u}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"aspect",get:function(){return this.width/this.height}},{key:"fovX",get:function(){return this._fov}},{key:"fovY",get:function(){var e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}},{key:"fov",set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}},{key:"averageElevation",get:function(){return this._averageElevation},set:function(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCameraOnTerrain",value:function(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);var e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}},{key:"_updateSeaLevelZoom",value:function(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}},{key:"sampleAverageElevation",value:function(){if(!this._elevation)return 0;for(var t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop(),i=0,a=0,o=0;o<n.length;o++){var s=new e.pointGeometry(n[o][0]*this.width,r+n[o][1]*(this.height-r)),u=t.pointCoordinate(s);if(u){var l=1/Math.hypot(u[0]-this._camera.position[0],u[1]-this._camera.position[1]);i+=u[3]*l,a+=l}}return 0===a?NaN:i/a}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._seaLevelZoom&&this._elevation){var e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),a=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(a))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(t){var n,r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];var i=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(t){if(this.height&&(t.position||t.orientation)){this._updateCameraState();var n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){var r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var t=this._camera.position,n=new ti;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}},{key:"_setCameraOrientation",value:function(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);var n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;var i=ei(n,r);return!!i&&(this._camera.orientation=i,!0)}},{key:"_setCameraPosition",value:function(t){var n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies)for(var r=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),a=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,a.x,o.x)),u=Math.floor(Math.max(r.x,i.x,a.x,o.x)),l=1,c=s-l;c<=u+l;c++)0!==c&&n.push(new e.UnwrappedTileID(c,t));return n}},{key:"coveringTiles",value:function(t){var n=this,r=this.coveringZoomLevel(t),i=r,a=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);var s=this.locationCoordinate(this.center),u=this.center.lat,l=1<<r,c=[l*s.x,l*s.y,0],d="globe"===this.projection.name,f=!d,h=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,f),p=d?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),v=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*p.x,l*p.y,m*(f?1:v)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,w=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,x=this.projection.isReprojectedInTileSpace?ii(this):1,k=function(t){var r=1/4e4,i=new e.MercatorCoordinate(t.x+r,t.y,t.z),a=new e.MercatorCoordinate(t.x,t.y+r,t.z),o=t.toLngLat(),s=i.toLngLat(),u=a.toLngLat(),l=n.locationCoordinate(o),c=n.locationCoordinate(s),d=n.locationCoordinate(u),f=Math.hypot(c.x-l.x,c.y-l.y),h=Math.hypot(d.x-l.x,d.y-l.y);return Math.sqrt(f*h)*x/r},S=function(t){var r=b,i=w;return{aabb:e.tileAABB(n,l,0,0,0,t,i,r,n.projection),zoom:0,x:0,y:0,minZ:i,maxZ:r,wrap:t,fullyVisible:!1}},E=[],A=[],T=r,C=t.reparseOverscaled?i:r,P=function(e){return e*e},I=P((m-this._centerAltitude)*v),R=function(e){if(n._elevation&&e.tileID&&o){var t=n._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=L(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=n._centerAltitude))}},L=function(t){if(t.zoom<_)return!0;if(t.zoom===T)return!1;if(null!=t.shouldSplit)return t.shouldSplit;var r=t.aabb.distanceX(g),o=t.aabb.distanceY(g),s=I,l=1;if(d){s=P(t.aabb.distanceZ(g));var c=Math.pow(2,t.zoom),f=e.latFromMercatorY((t.y+1)/c),h=e.latFromMercatorY(t.y/c),p=Math.min(Math.max(u,f),h),m=e.circumferenceAtLatitude(p)/e.circumferenceAtLatitude(u);if(l=p===u?1/Math.max(1,n._mercatorScaleRatio-.3):Math.min(1,m/n._mercatorScaleRatio),n.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===T-1&&m>=.9)return!0}else if(a&&(s=P(t.aabb.distanceZ(g)*v)),n.projection.isReprojectedInTileSpace&&i<=5){var b=Math.pow(2,t.zoom),w=k(new e.MercatorCoordinate((t.x+.5)/b,(t.y+.5)/b));l=w>.85?1:w}var x=r*r+o*o+s,S=P((1<<T-t.zoom)*y*l*function(e,t){if(t*P(.707)<e)return 1;var n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)}(Math.max(s,I),x));return x<S};if(this.renderWorldCopies)for(var M=1;M<=3;M++)E.push(S(-M)),E.push(S(M));for(E.push(S(0));E.length>0;){var O=E.pop(),F=O.x,D=O.y,N=O.fullyVisible;if(!N){var j=O.aabb.intersects(h);if(0===j)continue;N=2===j}if(O.zoom!==T&&L(O))for(var B=0;B<4;B++){var U=(F<<1)+B%2,z=(D<<1)+(B>>1),V={aabb:o?O.aabb.quadrant(B):e.tileAABB(this,l,O.zoom+1,U,z,O.wrap,O.minZ,O.maxZ,this.projection),zoom:O.zoom+1,x:U,y:z,wrap:O.wrap,fullyVisible:N,tileID:void 0,shouldSplit:void 0,minZ:O.minZ,maxZ:O.maxZ};a&&!d&&(V.tileID=new e.OverscaledTileID(O.zoom+1===T?C:O.zoom+1,O.wrap,O.zoom+1,U,z),R(V)),E.push(V)}else{var Z=O.zoom===T?C:O.zoom;if(t.minzoom&&t.minzoom>Z)continue;var H=c[0]-(.5+F+(O.wrap<<O.zoom))*(1<<r-O.zoom),W=c[1]-.5-D,G=O.tileID?O.tileID:new e.OverscaledTileID(Z,O.wrap,O.zoom,F,D);A.push({tileID:G,distanceSq:H*H+W*W})}}if(this.fogCullDistSq){var q=this.fogCullDistSq,K=this.horizonLineFromTop();A=A.filter((function(r){var i=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],o=n.calculateFogTileMatrix(r.tileID.toUnwrapped());e.transformMat4$1(i,i,o),e.transformMat4$1(a,a,o);var s=e.getAABBPointSquareDist(i,a);if(0===s)return!0;var u=!1,l=n._elevation;if(l&&s>q&&0!==K){var c,d=n.calculateProjMatrix(r.tileID.toUnwrapped());t.isTerrainDEM||(c=l.getMinMaxForTile(r.tileID)),c||(c={min:w,max:b});var f=e.furthestTileCorner(n.rotation),h=[f[0]*e.EXTENT,f[1]*e.EXTENT,c.max];e.transformMat4(h,h,d),u=(1-h[1])*n.height*.5<K}return s<q||u}))}return A.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.pointGeometry(r.x*this.worldSize,r.y*this.worldSize)}},{key:"unproject",value:function(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}},{key:"point",get:function(){return this.project(this.center)}},{key:"pointMerc",get:function(){return this.point._div(this.worldSize)}},{key:"pixelsPerMeterRatio",get:function(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}},{key:"setLocationAtPoint",value:function(t,n){var r,i,a=this.centerPoint;if("globe"===this.projection.name){var o=this.worldSize;r=(n.x-a.x)/o,i=(n.y-a.y)/o}else{var s=this.pointCoordinate(n),u=this.pointCoordinate(a);r=s.x-u.x,i=s.y-u.y}var l=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(l.x-r,l.y-i))}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this.projection.locationPoint(this,e)}},{key:"locationPoint3D",value:function(e){return this.projection.locationPoint(this,e,!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(t,n){var r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}},{key:"coordinateLocation",value:function(e){return this.projection.unproject(e.x,e.y)}},{key:"pointRayIntersection",value:function(t,n){var r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);var o=a[3];e.scale$1(i,i,1/i[3]),e.scale$1(a,a,1/o);var s=i[2],u=a[2];return{p0:i,p1:a,t:s===u?0:(r-s)/(u-s)}}},{key:"screenPointToMercatorRay",value:function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}},{key:"rayIntersectionCoordinate",value:function(t){var n=t.p0,r=t.p1,i=t.t,a=e.mercatorZfromAltitude(n[2],this._center.lat),o=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(a,o,i))}},{key:"pointCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}},{key:"pointCoordinate3D",value:function(t){if(!this.elevation)return this.pointCoordinate(t);var n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);var r=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);for(var a=.02*i,o=t.clone(),s=0;s<10&&i-r>a;s++){o.y=e.number(r,i,.66);var u=this.projection.pointCoordinate3D(this,o.x,o.y);u?(i=o.y,n=u):r=o.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}},{key:"isPointAboveHorizon",value:function(e){return this.projection.isPointAboveHorizon(this,e)}},{key:"_coordinatePoint",value:function(t,n){var r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"_getBoundsNonRectangular",value:function(){var t=this,n=this._edgeInsets,r=n.top,i=n.left,a=this.height-this._edgeInsets.bottom,o=this.width-this._edgeInsets.right,s=this.pointLocation3D(new e.pointGeometry(i,r)),u=this.pointLocation3D(new e.pointGeometry(o,r)),l=this.pointLocation3D(new e.pointGeometry(o,a)),c=this.pointLocation3D(new e.pointGeometry(i,a)),f=Math.min(s.lng,u.lng,l.lng,c.lng),h=Math.max(s.lng,u.lng,l.lng,c.lng),p=Math.min(s.lat,u.lat,l.lat,c.lat),v=Math.max(s.lat,u.lat,l.lat,c.lat),m=Math.pow(2,-this.zoom)/16*270,g="globe"===this.projection.name?1:4,y=function n(r,i,a,o,s){var u=(r+a)/2,l=(i+o)/2,c=new e.pointGeometry(u,l),d=t.pointLocation3D(c),y=d.lng,_=d.lat,b=Math.max(0,f-y,p-_,y-h,_-v);f=Math.min(f,y),h=Math.max(h,y),p=Math.min(p,_),v=Math.max(v,_),(s<g||b>m)&&(n(r,i,u,l,s+1),n(u,l,a,o,s+1))};if(y(i,r,o,r,1),y(o,r,o,a,1),y(o,a,i,a,1),y(i,a,i,r,1),"globe"===this.projection.name){var _=e.polesInViewport(this),b=d(_,2),w=b[0],x=b[1];w?(v=90,h=180,f=-180):x&&(p=-90,h=180,f=-180)}return new e.LngLatBounds(new e.LngLat(f,p),new e.LngLat(h,v))}},{key:"_getBoundsRectangular",value:function(t,n){var r=this._edgeInsets,i=r.top,a=r.left,o=this.height-this._edgeInsets.bottom,s=this.width-this._edgeInsets.right,u=new e.pointGeometry(a,i),l=new e.pointGeometry(s,i),c=new e.pointGeometry(s,o),d=new e.pointGeometry(a,o),f=this.pointCoordinate(u,t),h=this.pointCoordinate(l,t),p=this.pointCoordinate(c,n),v=this.pointCoordinate(d,n),m=function(e,t){return(t.y-e.y)/(t.x-e.x)};return f.y>1&&h.y>=0?f=new e.MercatorCoordinate((1-v.y)/m(v,f)+v.x,1):f.y<0&&h.y<=1&&(f=new e.MercatorCoordinate(-v.y/m(v,f)+v.x,0)),h.y>1&&f.y>=0?h=new e.MercatorCoordinate((1-p.y)/m(p,h)+p.x,1):h.y<0&&f.y<=1&&(h=new e.MercatorCoordinate(-p.y/m(p,h)+p.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(v)).extend(this.coordinateLocation(p))}},{key:"_getBoundsRectangularTerrain",value:function(){var e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);var t=e.visibleDemTiles.reduce((function(e,t){if(t.dem){var n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}},{key:"getBounds",value:function(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}},{key:"getMaxBounds",value:function(){return this.maxBounds}},{key:"setMaxBounds",value:function(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}},{key:"calculatePosMatrix",value:function(e,t){return this.projection.createTileMatrix(this,t,e)}},{key:"calculateDistanceTileData",value:function(t){var n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];var i=t.canonical,a=1/this.height,o=this.cameraWorldSize,s=o/this.zoomScale(i.z),u=(i.x+Math.pow(2,i.z)*t.wrap)*s,l=i.y*s,c=this.point;c.x*=o/this.worldSize,c.y*=o/this.worldSize;var d=this.angle,f=Math.sin(-d),h=-Math.cos(-d);return r[n]={bearing:[f,h],center:[(c.x-u)*a,(c.y-l)*a],scale:s/e.EXTENT*a},r[n]}},{key:"calculateFogTileMatrix",value:function(t){var n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];var i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}},{key:"calculateProjMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];var a=this.calculatePosMatrix(t,this.worldSize);return e.multiply(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,a),i[r]=new Float32Array(a),i[r]}},{key:"calculatePixelsToTileUnitsMatrix",value:function(t){var n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];var i=function(t,n){var r,i,a,o,s,u,l,c,d=t.tileTransform.scale*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return r=new Float32Array(4),o=(i=n.inverseAdjustmentMatrix)[1],s=i[2],u=i[3],c=(a=[d,d])[1],r[0]=i[0]*(l=a[0]),r[1]=o*l,r[2]=s*c,r[3]=u*c,r}(t,this);return r[n]=i,r[n]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"globeToMercatorMatrix",value:function(){if("globe"===this.projection.name){var t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}},{key:"recenterOnTerrain",value:function(){if(this._elevation&&"globe"!==this.projection.name){var t=this._elevation;this._updateCameraState();var n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=a,i[2]/=a,e.normalize(i,i);var o=t.raycast(r,i,t.exaggeration());if(o){var s=e.scaleAndAdd([],r,i,o),u=new e.MercatorCoordinate(s[0],s[1],e.mercatorZfromAltitude(s[2],e.latFromMercatorY(s[1]))),l=(u.z+e.length([u.x-r[0],u.y-r[1],u.z-r[2]*a]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(l),this._centerAltitude=u.toAltitude(),this._center=this.coordinateLocation(u),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}},{key:"_constrainCamera",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._elevation){var n=this._elevation,r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(a(e.MercatorCoordinate,c(i))),s=this.pixelsPerMeter/this.worldSize*o,u=this._minimumHeightOverTerrain(),l=i[2]-s;if(l<=u)if(l<0||t){var d=this.locationCoordinate(this._center,this._centerAltitude),f=[i[0],i[1],d.z-i[2]],h=e.length(f);f[2]-=(u-l)/this._pixelsPerMercatorPixel;var p=e.length(f);if(0===p)return;e.scale$2(f,f,h/p*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],d.z*this._pixelsPerMercatorPixel-f[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){var n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}var r=this._unmodified,i=this.point,a=i.x,o=i.y,s=0,u=a,l=o,c=this.width/2,d=this.height/2,f=this.worldMinY*this.scale,h=this.worldMaxY*this.scale;if(o-d<f&&(l=f+d),o+d>h&&(l=h-d),h-f<this.height&&(s=Math.max(s,this.height/(h-f)),l=(h+f)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){var p=this.worldMinX*this.scale,v=this.worldMaxX*this.scale,m=this.worldSize/2-(p+v)/2;(u=(a+m+this.worldSize)%this.worldSize-m)-c<p&&(u=p+c),u+c>v&&(u=v-c),v-p<this.width&&(s=Math.max(s,this.width/(v-p)),u=(v+p)/2)}u===a&&l===o||(this.center=this.unproject(new e.pointGeometry(u,l))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCamera(),this._unmodified=r,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));var r=ai(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;var i="meters"===this.projection.zAxisUnit?n:1,a=this._camera.getWorldToCamera(this.worldSize,i),o=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);o[8]=2*-t.x/this.width,o[9]=2*t.y/this.height;var s=e.mul([],o,a);if(this.projection.isReprojectedInTileSpace){var u=this.locationCoordinate(this.center),l=e.identity([]);e.translate(l,l,[u.x*this.worldSize,u.y*this.worldSize,0]),e.multiply(l,l,ri(this)),e.translate(l,l,[-u.x*this.worldSize,-u.y*this.worldSize,0]),e.multiply(s,s,l),this.inverseAdjustmentMatrix=function(e){var t=ri(e,!0);return R([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);var c=e.invert([],o);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(c,this.horizonLineFromTop(),this.height);var d=new Float32Array(16);e.identity(d),e.scale(d,d,[1,-1,1]),e.rotateX(d,d,this._pitch),e.rotateZ(d,d,this.angle);var f=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),h=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;f[8]=2*-t.x/this.width,f[9]=2*(t.y+h)/this.height,this.skyboxMatrix=e.multiply(d,f,d);var p=this.point,v=p.x,m=p.y,g=this.width%2/2,y=this.height%2/2,_=Math.cos(this.angle),b=Math.sin(this.angle),w=v-Math.round(v)+_*g+b*y,x=m-Math.round(m)+_*y+b*g,k=new Float64Array(s);if(e.translate(k,k,[w>.5?w-1:w,x>.5?x-1:x,0]),this.alignedProjMatrix=k,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(s=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);var S=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(S,S,a),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}}},{key:"_calcFogMatrices",value:function(){this._fogTileMatrixCache={};var t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,a=[t,t,n];e.scale$2(a,a,i),e.scale$2(r,r,-1),e.multiply$2(r,r,a);var o=e.create();e.translate(o,o,r),e.scale(o,o,a),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}},{key:"_computeCameraPosition",value:function(e){var t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}},{key:"_updateCameraState",value:function(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}},{key:"_translateCameraConstrained",value:function(t){var n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=t[2],a=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(a=Math.min((n-r)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,a),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var t=this._camera.position,n=this._camera.forward(),r=this._camera.getPitchBearing(),i=r.pitch,a=r.bearing,o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),u=Math.max((t[2]-o)/Math.cos(i),s),l=this._zoomFromMercatorZ(u);e.scaleAndAdd(t,t,n,u),this._pitch=e.clamp(i,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"zoomFromMercatorZAdjusted",value:function(t){for(var n=0,r=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,a=1/0;r-n>1e-6&&r>n;){var o=n+.5*(r-n),s=this.tileSize*Math.pow(2,o),u=this.getCameraToCenterDistance(this.projection,o,s),l=this.scaleZoom(u/(t*this.tileSize)),c=Math.abs(o-l);c<a&&(a=c,i=o),o<l?n=o:r=o}return i}},{key:"_terrainEnabled",value:function(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}},{key:"anyCornerOffEdge",value:function(t,n){var r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),a=Math.min(t.y,n.y),o=Math.max(t.y,n.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;for(var s=[new e.pointGeometry(r,a),new e.pointGeometry(i,o),new e.pointGeometry(r,o),new e.pointGeometry(i,a)],u=this.renderWorldCopies?-3:0,l=this.renderWorldCopies?4:1,c=0,d=s;c<d.length;c++){var f=d[c],h=this.pointRayIntersection(f);if(h.t<0)return!0;var p=this.rayIntersectionCoordinate(h);if(p.x<u||p.y<0||p.x>l||p.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(t,n){var r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}},{key:"getCameraPoint",value:function(){if("globe"===this.projection.name){var t=function(t,n){var r=d(t,3),i=[r[0],r[1],r[2],1];e.transformMat4$1(i,i,n);var a=i[3]=Math.max(i[3],1e-6);return i[0]/=a,i[1]/=a,i[2]/=a,i}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.pointGeometry(t[0],t[1])}var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,n))}},{key:"getCameraToCenterDistance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize,r=ai(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}},{key:"getWorldToCameraMatrix",value:function(){var t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}]),n}();function ci(e,t){var n=!1,r=null,i=function i(){r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}var di=function(){function t(n){h(this,t),this._hashName=n&&encodeURIComponent(n),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ci(this._updateHashUnthrottled.bind(this),300)}return p(t,[{key:"addTo",value:function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}},{key:"getHashString",value:function(){var t=this._map;if(!t)return"";var n=fi(t);if(this._hashName){var r=this._hashName,i=!1,a=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===r?(i=!0,"".concat(t,"=").concat(n)):e})).filter((function(e){return e}));return i||a.push("".concat(r,"=").concat(n)),"#".concat(a.join("&"))}return"#".concat(n)}},{key:"_getCurrentHash",value:function(){var t,n=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")}},{key:"_onHashChange",value:function(){var e=this._map;if(!e)return!1;var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(e){return isNaN(e)}))){var n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}]),t}();function fi(e,t){var n=e.getCenter(),r=Math.round(100*e.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,i),o=Math.round(n.lng*a)/a,s=Math.round(n.lat*a)/a,u=e.getBearing(),l=e.getPitch(),c=t?"/".concat(o,"/").concat(s,"/").concat(r):"".concat(r,"/").concat(s,"/").concat(o);return(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/".concat(Math.round(l))),c}var hi={linearity:.3,easing:e.bezier(0,0,.3,1)},pi=e.extend({deceleration:2500,maxSpeed:1400},hi),vi=e.extend({deceleration:20,maxSpeed:1400},hi),mi=e.extend({deceleration:1e3,maxSpeed:360},hi),gi=e.extend({deceleration:1e3,maxSpeed:90},hi),yi=function(){function t(e){h(this,t),this._map=e,this.clear()}return p(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,n=e.exported.now();t.length>0&&n-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var n,r={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0},i=f(this._inertiaBuffer);try{for(i.s();!(n=i.n()).done;){var a=n.value.settings;r.zoom+=a.zoomDelta||0,r.bearing+=a.bearingDelta||0,r.pitch+=a.pitchDelta||0,a.panDelta&&r.pan._add(a.panDelta),a.around&&(r.around=a.around),a.pinchAround&&(r.pinchAround=a.pinchAround)}}catch(p){i.e(p)}finally{i.f()}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(r.pan.mag()){var u=bi(r.pan.mag(),o,e.extend({},pi,t||{}));s.offset=r.pan.mult(u.amount/r.pan.mag()),s.center=this._map.transform.center,_i(s,u)}if(r.zoom){var l=bi(r.zoom,o,vi);s.zoom=this._map.transform.zoom+l.amount,_i(s,l)}if(r.bearing){var c=bi(r.bearing,o,mi);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),_i(s,c)}if(r.pitch){var d=bi(r.pitch,o,gi);s.pitch=this._map.transform.pitch+d.amount,_i(s,d)}if(s.zoom||s.bearing){var h=void 0===r.pinchAround?r.around:r.pinchAround;s.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),s.noMoveStart=!0,s}}}]),t}();function _i(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function bi(t,n,r){var i=r.maxSpeed,a=r.linearity,o=r.deceleration,s=e.clamp(t*a/(n/1e3),-i,i),u=Math.abs(s)/(o*a);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}}var wi=function(t){v(r,t);var n=m(r);function r(t,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};h(this,r);var u=T(i.getCanvasContainer(),a),l=i.unproject(u);return(o=n.call(this,t,e.extend({point:u,lngLat:l,originalEvent:a},s)))._defaultPrevented=!1,o.target=i,o}return p(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),xi=function(t){v(r,t);var n=m(r);function r(t,i,a){var o;h(this,r);var s="touchend"===t?a.changedTouches:a.touches,u=C(i.getCanvasContainer(),s),l=u.map((function(e){return i.unproject(e)})),c=u.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.pointGeometry(0,0));return(o=n.call(this,t,{points:u,point:c,lngLats:l,lngLat:i.unproject(c),originalEvent:a}))._defaultPrevented=!1,o}return p(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),ki=function(e){v(n,e);var t=m(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,{originalEvent:i}))._defaultPrevented=!1,a}return p(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),Si=function(){function t(e,n){h(this,t),this._map=e,this._clickTolerance=n.clickTolerance}return p(t,[{key:"reset",value:function(){this._mousedownPos=void 0}},{key:"wheel",value:function(e){return this._firePreventable(new ki(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new wi(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"preclick",value:function(t){var n=e.extend({},t);n.type="preclick",this._map.fire(new wi(n.type,this._map,n))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new wi(e.type,this._map,e)))}},{key:"dblclick",value:function(e){return this._firePreventable(new wi(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new xi(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),Ei=function(){function e(t){h(this,e),this._map=t}return p(e,[{key:"reset",value:function(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}},{key:"mousemove",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new wi(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),Ai=function(){function t(e,n){h(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}return p(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(k(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){var n=this;if(this._active){var r=t,i=this._startPos,a=this._lastPos;if(!(!i||!a||a.equals(r)||!this._box&&r.dist(i)<this._clickTolerance)){this._lastPos=r,this._box||(this._box=y("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var o=Math.min(i.x,r.x),s=Math.max(i.x,r.x),u=Math.min(i.y,r.y),l=Math.max(i.y,r.y);this._map._requestDomTask((function(){n._box&&(n._box.style.transform="translate(".concat(o,"px,").concat(u,"px)"),n._box.style.width=s-o+"px",n._box.style.height=l-u+"px")}))}}}},{key:"mouseupWindow",value:function(t,n){var r=this;if(this._active){var i=this._startPos,a=n;if(i&&0===t.button){if(this.reset(),A(),i.x!==a.x||i.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(i,a,r._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",t)}}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),S(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}]),t}();function Ti(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}var Ci=function(){function t(e){h(this,t),this.reset(),this.numTouches=e.numTouches}return p(t,[{key:"reset",value:function(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}},{key:"touchstart",value:function(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){var n,r=new e.pointGeometry(0,0),i=f(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r._add(a)}}catch(o){i.e(o)}finally{i.f()}return r.div(t.length)}(n),this.touches=Ti(r,n)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var r=Ti(n,t);for(var i in this.touches){var a=this.touches[i],o=r[i];(!o||o.dist(a)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),t}(),Pi=function(){function e(t){h(this,e),this.singleTap=new Ci(t),this.numTaps=t.numTaps,this.reset()}return p(e,[{key:"reset",value:function(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var i=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(r)<30;if(i&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),e}(),Ii=function(){function e(){h(this,e),this._zoomIn=new Pi({numTouches:1,numTaps:2}),this._zoomOut=new Pi({numTouches:2,numTaps:1}),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this,i=this._zoomIn.touchend(e,t,n),a=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ri={0:1,2:2},Li=function(){function e(t){h(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return p(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var n=P(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){var n=Ri[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&P(e)===this._eventButton&&(this._moved&&A(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Mi=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"mousedown",value:function(e,t){o(s(n.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),n}(Li),Oi=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Li),Fi=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Li),Di=function(){function t(n,r){h(this,t),this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}return p(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}},{key:"touchstart",value:function(e,t,n){return this._calculateTransform(e,t,n)}},{key:"touchmove",value:function(t,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,r)}}},{key:"touchend",value:function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,n,r){r.length>0&&(this._active=!0);var i=Ti(r,n),a=new e.pointGeometry(0,0),o=new e.pointGeometry(0,0),s=0;for(var u in i){var l=i[u],c=this._touches[u];c&&(a._add(l),o._add(l.sub(c)),s++,i[u]=l)}if(this._touches=i,!(s<this._minTouches)&&o.mag()){var d=o.div(s);return this._sum._add(d),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:d}}}},{key:"enable",value:function(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}},{key:"disable",value:function(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"_addTouchPanBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showTouchPanBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),e._alertContainer.setAttribute("role","null")}),500)}}]),t}(),Ni=function(){function e(){h(this,e),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._firstTwoTouches=void 0}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,n){return{}}},{key:"touchstart",value:function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){var r=this._firstTwoTouches;if(r){e.preventDefault();var i=d(r,2),a=i[0],o=i[1],s=ji(n,t,a),u=ji(n,t,o);if(s&&u){var l=this._aroundCenter?null:s.add(u).div(2);return this._move([s,u],l,e)}}}},{key:"touchend",value:function(e,t,n){if(this._firstTwoTouches){var r=d(this._firstTwoTouches,2),i=r[0],a=r[1],o=ji(n,t,i),s=ji(n,t,a);o&&s||(this._active&&A(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function ji(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Bi(e,t){return Math.log(e/t)/Math.LN2}var Ui=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._distance=0,this._startDistance=0}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Bi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bi(this._distance,n),pinchAround:t}}}]),n}(Ni);function zi(e,t){return 180*e.angleWith(t)/Math.PI}var Vi=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:zi(this._vector,n),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;var r=zi(e,n);return Math.abs(r)<t}}]),n}(Ni);function Zi(e){return Math.abs(e.y)>Math.abs(e.x)}var Hi=function(t){v(r,t);var n=m(r);function r(e){var t;return h(this,r),(t=n.call(this))._map=e,t}return p(r,[{key:"reset",value:function(){o(s(r.prototype),"reset",this).call(this),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}},{key:"_start",value:function(e){this._lastPoints=e,Zi(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(t,n,r){var i=this._lastPoints;if(i){var a=t[0].sub(i[0]),o=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(a,o,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(a.y+o.y)/2*-.5})}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,i=t.mag()>=2;if(r||i){if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return Zi(e)&&Zi(t)&&a}}}]),r}(Ni),Wi={panStep:100,bearingStep:15,pitchStep:10},Gi=function(){function e(){h(this,e);var t=Wi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return p(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:qi,zoom:n?Math.round(u)+n*(e.shiftKey?2:1):u,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+i*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function qi(e){return e*(2-e)}var Ki=4.000244140625,Ji=function(){function t(n,r){h(this,t),this._map=n,this._el=n.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}return p(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}},{key:"wheel",value:function(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Ki==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=T(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;"wheel"===this._type&&n.projection.wrap&&(n._center.lng>=180||n._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);var r=function(){return n._terrainEnabled()&&t._aroundCoord?n.computeZoomRelativeTo(t._aroundCoord):n.zoom};if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>Ki?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==a&&(a=1/a);var o=r(),s=Math.pow(2,o),u="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(u*a))),"wheel"===this._type&&(this._startZoom=o,this._easing=this._smoothOutEasing(200)),this._delta=0}var l,c="number"==typeof this._targetZoom?this._targetZoom:r(),d=this._startZoom,f=this._easing,h=!1;if("wheel"===this._type&&d&&f){var p=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),v=f(p);l=e.number(d,c,v),p<1?this._frameId||(this._frameId=!0):h=!0}else l=c,h=!0;return this._active=!0,h&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!h,zoomDelta:l-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,i=(e.exported.now()-r.start)/r.duration,a=r.easing(i+.01)-r.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=e.bezier(o,s,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"_addScrollZoomBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),e._alertContainer.setAttribute("role","null")}),200)}}]),t}(),Xi=function(){function e(t,n){h(this,e),this._clickZoom=t,this._tapZoom=n}return p(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Yi=function(){function e(){h(this,e),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1}},{key:"blur",value:function(){this.reset()}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Qi=function(){function e(){h(this,e),this._tap=new Pi({numTouches:1,numTaps:1}),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}},{key:"touchstart",value:function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),$i=function(){function e(t,n,r){h(this,e),this._el=t,this._mousePan=n,this._touchPan=r}return p(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),ea=function(){function e(t,n,r){h(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return p(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),ta=function(){function e(t,n,r,i){h(this,e),this._el=t,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return p(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),na=function(e){return e.zoom||e.drag||e.pitch||e.rotate},ra=function(e){v(n,e);var t=m(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n)}(e.Event),ia=function(){function t(){h(this,t),this.constants=[1,1,.01],this.radius=0}return p(t,[{key:"setup",value:function(t,n){var r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}},{key:"projectRay",value:function(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);var n=e.scale$2([],t,this.radius);if(n[2]>0){var r=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),i=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),a=e.add([],n,e.scale$2([],e.sub([],e.add([],i,r),n),2));n[0]=a[0],n[1]=a[1]}return n}}]),t}();function aa(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var oa=function(){function t(n,r){h(this,t),this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yi(n),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ia,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[e.window,"blur",void 0]];var a,o=f(this._listeners);try{for(o.s();!(a=o.n()).done;){var s=d(a.value,3),u=s[0],l=s[1],c=s[2];u.addEventListener(l,u===e.window.document?this.handleWindowEvent:this.handleEvent,c)}}catch(p){o.e(p)}finally{o.f()}}return p(t,[{key:"destroy",value:function(){var t,n=f(this._listeners);try{for(n.s();!(t=n.n()).done;){var r=d(t.value,3),i=r[0],a=r[1],o=r[2];i.removeEventListener(a,i===e.window.document?this.handleWindowEvent:this.handleEvent,o)}}catch(s){n.e(s)}finally{n.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Si(t,e));var r=t.boxZoom=new Ai(t,e);this._add("boxZoom",r);var i=new Ii,a=new Yi;t.doubleClickZoom=new Xi(a,i),this._add("tapZoom",i),this._add("clickZoom",a);var o=new Qi;this._add("tapDragZoom",o);var s=t.touchPitch=new Hi(t);this._add("touchPitch",s);var u=new Oi(e),l=new Fi(e);t.dragRotate=new ea(e,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new Mi(e),d=new Di(t,e);t.dragPan=new $i(n,c,d),this._add("mousePan",c),this._add("touchPan",d,["touchZoom","touchRotate"]);var f=new Vi,h=new Ui;t.touchZoomRotate=new ta(n,h,f,o),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",h,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ei(t));var p=t.scrollZoom=new Ji(t,this);this._add("scrollZoom",p,["mousePan"]);var v=t.keyboard=new Gi;this._add("keyboard",v);for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m++){var y=g[m];e.interactive&&e[y]&&t[y].enable(e[y])}}},{key:"_add",value:function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,n=f(this._handlers);try{for(n.s();!(t=n.n()).done;)t.value.handler.reset()}catch(r){n.e(r)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=f(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!na(this._eventsInProgress)||this.isZooming()}},{key:"_isDragging",value:function(){return!!this._eventsInProgress.drag}},{key:"_blockedByActive",value:function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,n=[],r=f(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._el.contains(i.target)&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"handleEvent",value:function(e,t){this._updatingCamera=!0;var n,r="renderFrame"===e.type,i=r?void 0:e,a={needsRenderFrame:!1},o={},s={},u=e.touches?this._getMapTouches(e.touches):void 0,l=u?C(this._el,u):r?void 0:T(this._el,e),c=f(this._handlers);try{for(c.s();!(n=c.n()).done;){var d=n.value,h=d.handlerName,p=d.handler,v=d.allowed;if(p.isEnabled()){var m=void 0;this._blockedByActive(s,v,h)?p.reset():p[t||e.type]&&(m=p[t||e.type](e,l,u),this.mergeHandlerResult(a,o,m,h,i),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||p.isActive())&&(s[h]=p)}}}catch(b){c.e(b)}finally{c.f()}var g={};for(var y in this._previousActiveHandlers)s[y]||(g[y]=i);this._previousActiveHandlers=s,(Object.keys(g).length||aa(a))&&(this._changes.push([a,o,g]),this._triggerRenderFrame()),(Object.keys(s).length||aa(a))&&this._map._stop(!0),this._updatingCamera=!1;var _=a.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}},{key:"mergeHandlerResult",value:function(t,n,r,i,a){if(r){e.extend(t,r);var o={handlerName:i,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(n.zoom=o),void 0!==r.panDelta&&(n.drag=o),void 0!==r.pitchDelta&&(n.pitch=o),void 0!==r.bearingDelta&&(n.rotate=o)}}},{key:"_applyChanges",value:function(){var t,n={},r={},i={},a=f(this._changes);try{for(a.s();!(t=a.n()).done;){var o=d(t.value,3),s=o[0],u=o[1],l=o[2];s.panDelta&&(n.panDelta=(n.panDelta||new e.pointGeometry(0,0))._add(s.panDelta)),s.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(n.around=s.around),void 0!==s.aroundCoord&&(n.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(n.pinchAround=s.pinchAround),s.noInertia&&(n.noInertia=s.noInertia),e.extend(r,u),e.extend(i,l)}}catch(c){a.e(c)}finally{a.f()}this._updateMapTransform(n,r,i),this._changes=[]}},{key:"_updateMapTransform",value:function(t,n,r){var i=this,a=this._map,o=a.transform,s=function(e){return[e.x,e.y,e.z]};if(function(e){var t=i._eventsInProgress.drag;return t&&!i._handlersById[t.handlerName].isActive()}()&&!aa(t)){var u=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",u!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&a._stop(!0),aa(t)){var l=t.panDelta,c=t.zoomDelta,d=t.bearingDelta,f=t.pitchDelta,h=t.around,p=t.aroundCoord,v=t.pinchAround;o._isCameraConstrained&&(c>0&&(c=0),o._isCameraConstrained=!1),void 0!==v&&(h=v),(c||n.drag&&!i._eventsInProgress.drag)&&h&&(this._dragOrigin=s(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",a._stop(!0),h=h||a.transform.centerPoint,d&&(o.bearing+=d),f&&(o.pitch+=f),o._updateCameraState();var m=[0,0,0];if(l)if("mercator"===o.projection.name){var g=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h).dir),y=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h.sub(l)).dir);m[0]=y[0]-g[0],m[1]=y[1]-g[1]}else{var _=o.pointCoordinate(h);if("globe"===o.projection.name){l=l.rotate(-o.angle);var b=o._pixelsPerMercatorPixel/o.worldSize;m[0]=-l.x*e.mercatorScale(e.latFromMercatorY(_.y))*b,m[1]=-l.y*e.mercatorScale(o.center.lat)*b}else{var w=o.pointCoordinate(h.sub(l));_&&w&&(m[0]=w.x-_.x,m[1]=w.y-_.y)}}var x=o.zoom,k=[0,0,0];if(c){var S=s(p||o.pointCoordinate3D(h)),E={dir:e.normalize([],e.sub([],S,o._camera.position))};if(E.dir[2]<0){var A=o.zoomDeltaToMovement(S,c);e.scale$2(k,E.dir,A)}}var T=e.add(m,m,k);o._translateCameraConstrained(T),c&&Math.abs(o.zoom-x)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}else this._fireEvents(n,r,!0)}},{key:"_fireEvents",value:function(t,n,r){var i=this,a=na(this._eventsInProgress),o=na(t),s={};for(var u in t){var l=t[u].originalEvent;this._eventsInProgress[u]||(s["".concat(u,"start")]=l),this._eventsInProgress[u]=t[u]}for(var c in!a&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(c,s[c]);for(var d in o&&this._fireEvent("move",o.originalEvent),t){var f=t[d].originalEvent;this._fireEvent(d,f)}var h,p={};for(var v in this._eventsInProgress){var m=this._eventsInProgress[v],g=m.handlerName,y=m.originalEvent;this._handlersById[g].isActive()||(delete this._eventsInProgress[v],h=n[g]||y,p["".concat(v,"end")]=h)}for(var _ in p)this._fireEvent(_,p[_]);var b=na(this._eventsInProgress);if(r&&(a||o)&&!b){this._updatingCamera=!0;var w=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),x=function(e){return 0!==e&&-i._bearingSnap<e&&e<i._bearingSnap};w?(x(w.bearing||this._map.getBearing())&&(w.bearing=0),this._map.easeTo(w,{originalEvent:h})):(this._map.fire(new e.Event("moveend",{originalEvent:h})),x(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){e._frameId=void 0,e.handleEvent(new ra("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),sa="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.",ua=function(t){v(r,t);var n=m(r);function r(t,a){var o;return h(this,r),(o=n.call(this))._moving=!1,o._zooming=!1,o.transform=t,o._bearingSnap=a.bearingSnap,e.bindAll(["_renderFrameCallback"],i(o)),o}return p(r,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,n,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}},{key:"panTo",value:function(t,n,r){return this.easeTo(e.extend({center:t},n),r)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}},{key:"resetNorth",value:function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}},{key:"resetNorthPitch",value:function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,n){t=e.LngLatBounds.convert(t);var r=n&&n.bearing||0,i=n&&n.pitch||0,a=t.getNorthWest(),o=t.getSouthEast();return this._cameraForBounds(this.transform,a,o,r,i,n)}},{key:"_extendCameraOptions",value:function(t){var n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){var r=t.padding;t.padding={top:r,bottom:r,right:r,left:r}}return t.padding=e.extend(n,t.padding),t}},{key:"_minimumAABBFrustumDistance",value:function(e,t){var n=t.max[0]-t.min[0],r=t.max[1]-t.min[1];return n/r>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):r/(2*Math.tan(.5*e.fovY)*e.aspect)}},{key:"_cameraForBoundsOnGlobe",value:function(t,n,r,i,a,o){var s=t.clone(),u=this._extendCameraOptions(o);s.bearing=i,s.pitch=a;var l=e.LngLat.convert(n),c=e.LngLat.convert(r),d=.5*(l.lat+c.lat),f=.5*(l.lng+c.lng),h=e.latLngToECEF(d,f),p=e.normalize([],h),v=e.normalize([],e.cross([],p,[0,1,0])),m=e.cross([],v,p),g=[v[0],v[1],v[2],0,m[0],m[1],m[2],0,p[0],p[1],p[2],0,0,0,0,1],y=[h,e.latLngToECEF(l.lat,l.lng),e.latLngToECEF(c.lat,l.lng),e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(l.lat,c.lng),e.latLngToECEF(d,l.lng),e.latLngToECEF(d,c.lng),e.latLngToECEF(l.lat,f),e.latLngToECEF(c.lat,f)],_=e.Aabb.fromPoints(y.map((function(t){return[e.dot(v,t),e.dot(m,t),e.dot(p,t)]}))),b=e.transformMat4([],_.center,g);0===e.squaredLength(b)&&e.set(b,0,0,1),e.normalize(b,b),e.scale$2(b,b,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(b);var w=s.getWorldToCameraMatrix(),x=e.invert(new Float64Array(16),w);_=e.Aabb.applyTransform(_,e.multiply([],w,g)),e.transformMat4(b,b,w);var k=.5*(_.max[2]-_.min[2]),S=this._minimumAABBFrustumDistance(s,_),E=e.scale$2([],[0,0,1],k),A=e.add(E,b,E),T=S+(0===s.pitch?0:e.distance(b,A)),C=s.globeCenterInViewSpace,P=e.sub([],b,[C[0],C[1],C[2]]);e.normalize(P,P),e.scale$2(P,P,T);var I=e.add([],b,P);e.transformMat4(I,I,x);var R=e.earthRadius/e.GLOBE_RADIUS,L=e.length(I),M=e.mercatorZfromAltitude(Math.max(L*R-e.earthRadius,Number.EPSILON),0),O=Math.min(s.zoomFromMercatorZAdjusted(M),u.maxZoom);return O>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=O,this._cameraForBounds(s,n,r,i,a,o)):{center:s.center,zoom:O,bearing:i,pitch:a}}},{key:"queryTerrainElevation",value:function(t,n){var r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}},{key:"_cameraForBounds",value:function(t,n,r,i,a,o){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,r,i,a,o);var s=t.clone(),u=this._extendCameraOptions(o),l=s.padding;s.bearing=i,s.pitch=a;var c=e.LngLat.convert(n),d=e.LngLat.convert(r),f=new e.LngLat(c.lng,d.lat),h=new e.LngLat(d.lng,c.lat),p=s.project(c),v=s.project(d),m=this.queryTerrainElevation(c),g=this.queryTerrainElevation(d),y=this.queryTerrainElevation(f),_=this.queryTerrainElevation(h),b=[[p.x,p.y,Math.min(m||0,g||0,y||0,_||0)],[v.x,v.y,Math.max(m||0,g||0,y||0,_||0)]],w=e.Aabb.fromPoints(b),x=s.getWorldToCameraMatrix(),k=e.invert(new Float64Array(16),x);w=e.Aabb.applyTransform(w,x);var S=e.sub([],w.max,w.min),E=l.left||0,A=l.right||0,T=l.bottom||0,C=l.top||0,P=u.padding,I=P.left,R=P.right,L=P.top,M=P.bottom,O=.5*(E+A),F=.5*(C+T),D=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(E+A+I+R))/S[0],(s.height-(T+C+M+L))/S[1])),u.maxZoom),N=s.scale/s.zoomScale(D);w=new e.Aabb([w.min[0]-(I+O)*N,w.min[1]-(M+F)*N,w.min[2]],[w.max[0]+(R+O)*N,w.max[1]+(L+F)*N,w.max[2]]);var j=.5*S[2],B=this._minimumAABBFrustumDistance(s,w),U=[0,0,1,0];e.transformMat4$1(U,U,x),e.normalize$2(U,U);var z=e.scale$2([],U,B+j),V=e.add([],w.center,z),Z=("number"==typeof u.offset.x&&"number"==typeof u.offset.y?new e.pointGeometry(u.offset.x,u.offset.y):e.pointGeometry.convert(u.offset)).rotate(-e.degToRad(i));w.center[0]-=Z.x*N,w.center[1]+=Z.y*N,e.transformMat4(w.center,w.center,k),e.transformMat4(V,V,k);var H=[w.center[0],w.center[1],V[2]*s.pixelsPerMeter];e.scale$2(H,H,1/s.worldSize);var W=e.lngFromMercatorX(H[0]),G=e.latFromMercatorY(H[1]),q=Math.min(s._zoomFromMercatorZ(H[2]),u.maxZoom),K=new e.LngLat(W,G);return s.mercatorFromTransition&&q<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=q,this._cameraForBounds(s,n,r,i,a,o)):{center:K,zoom:q,bearing:i,pitch:a}}},{key:"fitBounds",value:function(e,t,n){var r=this.cameraForBounds(e,t);return this._fitInternal(r,t,n)}},{key:"fitScreenCoordinates",value:function(t,n,r,i,a){var o=e.pointGeometry.convert(t),s=e.pointGeometry.convert(n),u=new e.pointGeometry(Math.min(o.x,s.x),Math.min(o.y,s.y)),l=new e.pointGeometry(Math.max(o.x,s.x),Math.max(o.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(o,s))return this;var c=this.transform.pointLocation3D(u),d=this.transform.pointLocation3D(l),f=this.transform.pointLocation3D(new e.pointGeometry(u.x,l.y)),h=this.transform.pointLocation3D(new e.pointGeometry(l.x,u.y)),p=[Math.min(c.lng,d.lng,f.lng,h.lng),Math.min(c.lat,d.lat,f.lat,h.lat)],v=[Math.max(c.lng,d.lng,f.lng,h.lng),Math.max(c.lat,d.lat,f.lat,h.lat)],m=i&&i.pitch?i.pitch:this.getPitch(),g=this._cameraForBounds(this.transform,p,v,r,m,i);return this._fitInternal(g,i,a)}},{key:"_fitInternal",value:function(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}},{key:"jumpTo",value:function(t,n){this.stop();var r=t.preloadOnly?this.transform.clone():this.transform,i=!1,a=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(a=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),a&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),o&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}},{key:"getFreeCameraOptions",value:function(){return this.transform.projection.supportsFreeCamera||e.warnOnce(sa),this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(t,n){var r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(sa),this;this.stop();var i=r.zoom,a=r.pitch,o=r.bearing;r.setFreeCameraOptions(t);var s=i!==r.zoom,u=a!==r.pitch,l=o!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),l&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),u&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}},{key:"easeTo",value:function(t,n){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);var i,a,o,s=this.transform,u=this.getZoom(),l=this.getBearing(),c=this.getPitch(),d=this.getPadding(),f="zoom"in t?+t.zoom:u,h="bearing"in t?this._normalizeBearing(t.bearing,l):l,p="pitch"in t?+t.pitch:c,v="padding"in t?t.padding:s.padding,m=e.pointGeometry.convert(t.offset);if("globe"===s.projection.name){var g=e.MercatorCoordinate.fromLngLat(s.center),y=m.rotate(-s.angle);g.x+=y.x/s.worldSize,g.y+=y.y/s.worldSize;var _=g.toLngLat(),b=e.LngLat.convert(t.center||_);this._normalizeCenter(b),i=s.centerPoint.add(y),a=new e.pointGeometry(g.x,g.y).mult(s.worldSize),o=new e.pointGeometry(e.mercatorXfromLng(b.lng),e.mercatorYfromLat(b.lat)).mult(s.worldSize).sub(a)}else{i=s.centerPoint.add(m);var w=s.pointLocation(i),x=e.LngLat.convert(t.center||w);this._normalizeCenter(x),a=s.project(w),o=s.project(x).sub(a)}var k,S,E=s.zoomScale(f-u);t.around&&(k=e.LngLat.convert(t.around),S=s.locationPoint(k));var A=this._zooming||f!==u,T=this._rotating||l!==h,C=this._pitching||p!==c,P=!s.isPaddingEqual(v),I=function(s){return function(g){if(A&&(s.zoom=e.number(u,f,g)),T&&(s.bearing=e.number(l,h,g)),C&&(s.pitch=e.number(c,p,g)),P&&(s.interpolatePadding(d,v,g),i=s.centerPoint.add(m)),k)s.setLocationAtPoint(k,S);else{var y=s.zoomScale(s.zoom-u),_=f>u?Math.min(2,E):Math.max(.5,E),b=Math.pow(_,1-g),w=s.unproject(a.add(o.mult(g*b)).mult(y));s.setLocationAtPoint(s.renderWorldCopies?w.wrap():w,i)}return t.preloadOnly||r._fireMoveEvents(n),s}};if(t.preloadOnly){var R=this._emulate(I,t.duration,s);return this._preloadTiles(R),this}var L={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=A,this._rotating=T,this._pitching=C,this._padding=P,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,L),this._ease(I(s),(function(e){s.recenterOnTerrain(),r._afterEase(n,e)}),t),this}},{key:"_prepareEase",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,n){if(!this._easeId||!n||this._easeId!==n){this._easeId=void 0,this.transform.cameraElevationReference="ground";var r=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,n){var r=this;if(!t.essential&&e.exported.prefersReducedMotion){var i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,o=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):o,d="bearing"in t?this._normalizeBearing(t.bearing,s):s,f="pitch"in t?+t.pitch:u,h="padding"in t?t.padding:a.padding,p=a.zoomScale(c-o),v=e.pointGeometry.convert(t.offset),m=a.centerPoint.add(v),g=a.pointLocation(m),y=e.LngLat.convert(t.center||g);this._normalizeCenter(y);var _=a.project(g),b=a.project(y).sub(_),w=t.curve,x=Math.max(a.width,a.height),k=x/p,S=b.mag();if("minZoom"in t){var E=e.clamp(Math.min(t.minZoom,o,c),a.minZoom,a.maxZoom),A=x/a.zoomScale(E-o);w=Math.sqrt(A/S*2)}var T=w*w;function C(e){var t=(k*k-x*x+(e?-1:1)*T*T*S*S)/(2*(e?k:x)*T*S);return Math.log(Math.sqrt(t*t+1)-t)}function P(e){return(Math.exp(e)-Math.exp(-e))/2}function I(e){return(Math.exp(e)+Math.exp(-e))/2}var R=C(0),L=function(e){return I(R)/I(R+w*e)},M=function(e){return x*((I(R)*(P(t=R+w*e)/I(t))-P(R))/T)/S;var t},O=(C(1)-R)/w;if(Math.abs(S)<1e-6||!isFinite(O)){if(Math.abs(x-k)<1e-6)return this.easeTo(t,n);var F=k<x?-1:1;O=Math.abs(Math.log(k/x))/w,M=function(){return 0},L=function(e){return Math.exp(F*w*e)}}t.duration="duration"in t?+t.duration:1e3*O/("screenSpeed"in t?+t.screenSpeed/w:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);var D=s!==d,N=f!==u,j=!a.isPaddingEqual(h),B=function(i){return function(a){var p=a*O,g=1/L(p);i.zoom=1===a?c:o+i.scaleZoom(g),D&&(i.bearing=e.number(s,d,a)),N&&(i.pitch=e.number(u,f,a)),j&&(i.interpolatePadding(l,h,a),m=i.centerPoint.add(v));var w=1===a?y:i.unproject(_.add(b.mult(M(p))).mult(g));return i.setLocationAtPoint(i.renderWorldCopies?w.wrap():w,m),i._updateCameraOnTerrain(),t.preloadOnly||r._fireMoveEvents(n),i}};if(t.preloadOnly){var U=this._emulate(B,t.duration,a);return this._preloadTiles(U),this}return this._zooming=!0,this._rotating=D,this._pitching=N,this._padding=j,this._prepareEase(n,!1),this._ease(B(a),(function(){return r._afterEase(n)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){var n=this._onEaseEnd;this._onEaseEnd=void 0,n.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.maxBounds){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}},{key:"_emulate",value:function(e,t,n){for(var r=Math.ceil(15*t/1e3),i=[],a=e(n.clone()),o=0;o<=r;o++){var s=a(o/r);i.push(s.clone())}return i}}]),r}(e.Evented),la=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,t),this.options=n,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return p(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y("button","mapboxgl-ctrl-attrib-button",this._container),y("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var n=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}},{key:"_updateEditLink",value:function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=n.reduce((function(e,t,r){return t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(r<n.length-1?"&":"")),e}),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(r,"#").concat(fi(this._map,!0)),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style._sourceCaches;for(var r in n){var i=n[r];if(i.used){var a=i.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length})),e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[].concat(c(this.options.customAttribution),c(e)):e.unshift(this.options.customAttribution));var o=e.join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),t}(),ca=function(){function t(){h(this,t),e.bindAll(["_updateLogo","_updateCompact"],this)}return p(t,[{key:"onAdd",value:function(e){this._map=e,this._container=y("div","mapboxgl-ctrl");var t=y("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),t}(),da=function(){function e(){h(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return p(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue,i=f(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(o){i.e(o)}finally{i.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(e),this._cleared))break}}catch(a){r.e(a)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}();function fa(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var i=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),u=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(u||Math.abs(i.lng-r.center.lng)<o)?t=i:r.locationPoint(a).distSqr(n)<s&&(u||Math.abs(a.lng-r.center.lng)<o)&&(t=a)}for(;Math.abs(t.lng-r.center.lng)>180;){var l=r.locationPoint(t);if(l.x>=0&&l.y>=0&&l.x<=r.width&&l.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}var ha={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},pa=function(t){v(r,t);var n=m(r);function r(t,a){var o;if(h(this,r),o=n.call(this),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],i(o)),o._anchor=t&&t.anchor||"center",o._color=t&&t.color||"#3FB1CE",o._scale=t&&t.scale||1,o._draggable=t&&t.draggable||!1,o._clickTolerance=t&&t.clickTolerance||0,o._isDragging=!1,o._state="inactive",o._rotation=t&&t.rotation||0,o._rotationAlignment=t&&t.rotationAlignment||"auto",o._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",o._updateMoving=function(){return o._update(!0)},o._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)o._element=t.element,o._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{o._defaultMarker=!0,o._element=y("div");var s=41,l=27,c=_("svg",{display:"block",height:s*o._scale+"px",width:l*o._scale+"px",viewBox:"0 0 ".concat(l," ").concat(s)},o._element),d=_("radialGradient",{id:"shadowGradient"},_("defs",{},c));_("stop",{offset:"10%","stop-opacity":.4},d),_("stop",{offset:"100%","stop-opacity":.05},d),_("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c),_("path",{fill:o._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),_("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),_("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}o._element.hasAttribute("aria-label")||o._element.setAttribute("aria-label","Map marker"),o._element.classList.add("mapboxgl-marker"),o._element.addEventListener("dragstart",(function(e){e.preventDefault()})),o._element.addEventListener("mousedown",(function(e){e.preventDefault()}));var f=o._element.classList;for(var p in ha)f.remove("mapboxgl-marker-anchor-".concat(p));return f.add("mapboxgl-marker-anchor-".concat(o._anchor)),o._popup=null,u(o)}return p(r,[{key:"addTo",value:function(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}},{key:"remove",value:function(){var e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}},{key:"_behindTerrain",value:function(){var e=this._map,t=this._pos;if(!e||!t)return!1;var n=e.unproject(t),r=e.getFreeCameraOptions();if(!r.position)return!1;var i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}},{key:"_evaluateOpacity",value:function(){var t=this._map;if(t){var n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)this._clearFadeTimer();else{var r,i=t.unproject(n);t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?r=0:(r=1-t._queryFogOpacity(i),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity="".concat(r),this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null}}}},{key:"_clearFadeTimer",value:function(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}},{key:"_updateDOM",value:function(){var e=this._pos;if(e&&this._map){var t=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(e.x,"px,").concat(e.y,"px)\n            ").concat(ha[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(t.x,"px,").concat(t.y,"px)\n        ")}}},{key:"_calculateXYTransform",value:function(){var t=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!t||"map"!==r)return"";if(!n._showingGlobe()){var i=n.getPitch();return i?"rotateX(".concat(i,"deg)"):""}var a=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(n.transform)),s=Math.abs(o.x)+Math.abs(o.y);if(0===s)return"";var u=a/s;return"rotateX(".concat(-o.y*u,"deg) rotateY(").concat(o.x*u,"deg)")}},{key:"_calculateZTransform",value:function(){var t=this._pos,n=this._map;if(!n||!t)return"";var r=0,i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){var a=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),o=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(a);r=e.radToDeg(Math.atan2(o.y,o.x))-90}else r=-n.getBearing();else if("horizon"===i){var s=e.smoothstep(4,6,n.getZoom()),u=e.globeCenterToScreenPoint(n.transform);u.y+=s*n.transform.height;var l=t.sub(u),c=e.radToDeg(Math.atan2(l.y,l.x));r=(c>90?c-270:c+90)*(1-s)}return(r+=this._rotation)?"rotateZ(".concat(r,"deg)"):""}},{key:"_update",value:function(t){var n=this;e.window.cancelAnimationFrame(this._updateFrameId);var r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=fa(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((function(){n._element&&n._pos&&n._anchor&&(n._pos=n._pos.round(),n._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((function(){n._map&&(n._element&&n._pos&&n._anchor&&n._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!n._fadeTimer&&(n._fadeTimer=setTimeout(n._evaluateOpacity.bind(n),60)))})))}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}},{key:"_onMove",value:function(t){var n=this._map;if(n){var r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){var a=this._clickTolerance||n._clickTolerance;if(t.point.dist(r)<a)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;var t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){var t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){this._draggable=!!e;var t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e||"auto",this._update(),this}},{key:"getPitchAlignment",value:function(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}},{key:"setOccludedOpacity",value:function(e){return this._occludedOpacity=e||.2,this._update(),this}},{key:"getOccludedOpacity",value:function(){return this._occludedOpacity}}]),r}(e.Evented),va={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ma=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ga(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.pointGeometry(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){var r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(r,r);case"top-right":return new e.pointGeometry(-r,r);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(r,-r);case"bottom-right":return new e.pointGeometry(-r,-r);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[n]||[0,0])}var ya=function(){function t(e){h(this,t),this.jumpTo(e)}return p(t,[{key:"getValue",value:function(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;var n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}},{key:"isEasing",value:function(e){return e>=this._startTime&&e<=this._endTime}},{key:"jumpTo",value:function(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}},{key:"easeTo",value:function(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}]),t}(),_a={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ba={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},wa={showCompass:!0,showZoom:!0,visualizePitch:!1},xa=function(){function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h(this,t),this._clickTolerance=10,this.element=r,this.mouseRotate=new Oi({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,i&&(this.mousePitch=new Fi({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}return p(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),k()}},{key:"move",value:function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){var a=this.mousePitch.mousemoveWindow(e,t),o=a&&a.pitchDelta;o&&n.setPitch(n.getPitch()+o)}}},{key:"off",value:function(){var e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){S(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),T(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,T(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=C(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=C(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}(),ka={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Sa={maxWidth:100,unit:"metric"};function Ea(e,t,n){var r=this,i=Aa(t),a=i/t,o={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[n];this._map._requestDomTask((function(){r._container.style.width=e*a+"px",r._container.innerHTML="".concat(i,"&nbsp;").concat(o)}))}function Aa(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}var Ta={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(t){v(c,t);var a=m(c);function c(t){var n;if(h(this,c),e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},ba,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),(n=a.call(this,new li(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t))._interactive=t.interactive,n._minTileCacheSize=t.minTileCacheSize,n._maxTileCacheSize=t.maxTileCacheSize,n._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=t.preserveDrawingBuffer,n._antialias=t.antialias,n._useWebGL2=t.useWebGL2,n._trackResize=t.trackResize,n._bearingSnap=t.bearingSnap,n._refreshExpiredTiles=t.refreshExpiredTiles,n._fadeDuration=t.fadeDuration,n._isInitialLoad=!0,n._crossSourceCollisions=t.crossSourceCollisions,n._collectResourceTiming=t.collectResourceTiming,n._optimizeForTerrain=t.optimizeForTerrain,n._language=n._parseLanguage(t.language),n._worldview=t.worldview,n._renderTaskQueue=new da,n._domRenderTaskQueue=new da,n._controls=[],n._markers=[],n._popups=[],n._mapId=e.uniqueId(),n._locale=e.extend({},_a,t.locale),n._clickTolerance=t.clickTolerance,n._cooperativeGestures=t.cooperativeGestures,n._performanceMetricsCollection=t.performanceMetricsCollection,n._containerWidth=0,n._containerHeight=0,n._averageElevationLastSampledAt=-1/0,n._averageElevationExaggeration=0,n._averageElevation=new ya(0),n._interactionRange=[1/0,-1/0],n._visibilityHidden=0,n._useExplicitProjection=!1,n._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),n._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(n._container=e.window.document.getElementById(t.container),!n._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=t.container}if(n._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&n.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],i(n)),n._setupContainer(),n._setupPainter(),void 0===n.painter)throw new Error("Failed to initialize WebGL.");return n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",n._onWindowOnline,!1),e.window.addEventListener("resize",n._onWindowResize,!1),e.window.addEventListener("orientationchange",n._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",n._onWindowResize,!1),e.window.addEventListener("visibilitychange",n._onVisibilityChange,!1)),n.handlers=new oa(i(n),t),n._localFontFamily=t.localFontFamily,n._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&n.setStyle(t.style,{localFontFamily:n._localFontFamily,localIdeographFontFamily:n._localIdeographFontFamily}),t.projection&&n.setProjection(t.projection),n._hash=t.hash&&new di("string"==typeof t.hash&&t.hash||void 0).addTo(i(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(n.resize(),n.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),n.resize(),t.attributionControl&&n.addControl(new la({customAttribution:t.customAttribution})),n._logoControl=new ca,n.addControl(n._logoControl,t.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event("".concat(t.dataType,"data"),t))})),n.on("dataloading",(function(t){n.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),u(n)}return p(c,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"resize",value:function(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));var n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()||null}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}},{key:"getLanguage",value:function(){return this._language}},{key:"_parseLanguage",value:function(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((function(t){return"auto"===t?e.window.navigator.language:t})):t}},{key:"setLanguage",value:function(e){var t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();var n,r=f(this._controls);try{for(r.s();!(n=r.n()).done;){var i=n.value;i._setLanguage&&i._setLanguage(this._language)}}catch(a){r.e(a)}finally{r.f()}return this}},{key:"getWorldview",value:function(){return this._worldview}},{key:"setWorldview",value:function(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}},{key:"getProjection",value:function(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}},{key:"_showingGlobe",value:function(){return"globe"===this.transform.projection.name}},{key:"setProjection",value:function(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}},{key:"_updateProjectionTransition",value:function(){if("globe"===this.getProjection().name){var t,n=this.transform,r=n.projection.name;"globe"===r&&n.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(n.setMercatorFromTransition(),t=!0):"mercator"===r&&n.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(n.setProjection({name:"globe"}),t=!0),t&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}}},{key:"_prioritizeAndUpdateProjection",value:function(e,t){return this._updateProjection(e||t||{name:"mercator"})}},{key:"_updateProjection",value:function(t){var n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){for(var r in this.painter.clearBackgroundTiles(),this.style._sourceCaches)this.style._sourceCaches[r].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}},{key:"project",value:function(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}},{key:"_isDragging",value:function(){return this.handlers&&this.handlers._isDragging()||!1}},{key:"_createDelegatedListener",value:function(e,t,n){var i=this;if("mouseenter"===e||"mouseover"===e){var a=!1,o=function(r){var o=t.filter((function(e){return i.getLayer(e)})),s=o.length?i.queryRenderedFeatures(r.point,{layers:o}):[];s.length?a||(a=!0,n.call(i,new wi(e,i,r.originalEvent,{features:s}))):a=!1},s=function(){a=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:o,mouseout:s}}}if("mouseleave"===e||"mouseout"===e){var u=!1,l=function(r){var a=t.filter((function(e){return i.getLayer(e)}));(a.length?i.queryRenderedFeatures(r.point,{layers:a}):[]).length?u=!0:u&&(u=!1,n.call(i,new wi(e,i,r.originalEvent)))},c=function(t){u&&(u=!1,n.call(i,new wi(e,i,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:l,mouseout:c}}}var d=function(e){var r=t.filter((function(e){return i.getLayer(e)})),a=r.length?i.queryRenderedFeatures(e.point,{layers:r}):[];a.length&&(e.features=a,n.call(i,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:r({},e,d)}}},{key:"on",value:function(e,t,n){if(void 0===n)return o(s(c.prototype),"on",this).call(this,e,t);Array.isArray(t)||(t=[t]);var r=this._createDelegatedListener(e,t,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r),r.delegates)this.on(i,r.delegates[i]);return this}},{key:"once",value:function(e,t,n){if(void 0===n)return o(s(c.prototype),"once",this).call(this,e,t);Array.isArray(t)||(t=[t]);var r=this._createDelegatedListener(e,t,n);for(var i in r.delegates)this.once(i,r.delegates[i]);return this}},{key:"off",value:function(e,t,n){var r=this;if(void 0===n)return o(s(c.prototype),"off",this).call(this,e,t);t=new Set(Array.isArray(t)?t:[t]);var i=function(e,t){if(e.size!==t.size)return!1;var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!t.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&function(e){for(var a=0;a<e.length;a++){var o=e[a];if(o.listener===n&&i(o.layers,t)){for(var s in o.delegates)r.off(s,o.delegates[s]);return e.splice(a,1),r}}}(a),this}},{key:"queryRenderedFeatures",value:function(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"setStyle",value:function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new hn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new hn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,n){var r=this;if("string"==typeof t){var i=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(a,(function(t,i){t?r.fire(new e.ErrorEvent(t)):i&&r._updateDiff(i,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}},{key:"_updateDiff",value:function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(l){e.warnOnce("Unable to perform style diff: ".concat(l.message||l.error||l,".  Rebuilding the style from scratch.")),this._updateStyle(t,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.pixelRatio,a=void 0===i?1:i,o=r.sdf,s=void 0!==o&&o,u=r.stretchX,l=r.stretchY,c=r.content;if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){var d=e.exported.getImageData(n),f=d.width,h=d.height,p=d.data;this.style.addImage(t,{data:new e.RGBAImage({width:f,height:h},p),pixelRatio:a,stretchX:u,stretchY:l,content:c,sdf:s,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{var v=n.width,m=n.height,g=n;this.style.addImage(t,{data:new e.RGBAImage({width:v,height:m},new Uint8Array(g.data)),pixelRatio:a,stretchX:u,stretchY:l,content:c,sdf:s,version:0,userImage:g}),g.onAdd&&g.onAdd(this,t)}}},{key:"updateImage",value:function(t,n){var r=this.style.getImage(t);if(r){var i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,a=i.width,o=i.height;void 0!==a&&void 0!==o?a===r.data.width&&o===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image (".concat(a,", ").concat(o,")\n                must be that same as the previous version of the image\n                (").concat(r.data.width,", ").concat(r.data.height,")")))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}else this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(function(t,r){n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}},{key:"getTerrain",value:function(){return this.style?this.style.getTerrain():null}},{key:"setFog",value:function(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}},{key:"getFog",value:function(){return this.style?this.style.getFog():null}},{key:"_queryFogOpacity",value:function(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"_updateContainerDimensions",value:function(){if(this._container){for(var t,n,r,i=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300,o=this._container;o&&(!n||!r);){var s=e.window.getComputedStyle(o).transform;s&&"none"!==s&&((t=s.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==t[0]&&"1"!==t[0]&&(n=t[0]),t[3]&&"0"!==t[3]&&"1"!==t[3]&&(r=t[3])),o=o.parentElement}this._containerWidth=n?Math.abs(i/n):i,this._containerHeight=r?Math.abs(a/r):a}}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=y("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=y("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=y("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);var n=this._controlContainer=y("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){r[e]=y("div","mapboxgl-ctrl-".concat(e),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,n){var r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(n,"px")}},{key:"_addMarker",value:function(e){this._markers.push(e)}},{key:"_removeMarker",value:function(e){var t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}},{key:"_addPopup",value:function(e){this._popups.push(e)}},{key:"_removePopup",value:function(e){var t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}},{key:"_setupPainter",value:function(){var t=this,r=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",r),a=i||this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);a?(this._useWebGL2&&!i&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(a,!0),this.painter=new Xr(a,this.transform,!!i),this.on("data",(function(e){"source"===e.dataType&&t.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(a)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_requestDomTask",value:function(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}},{key:"_render",value:function(t){var n,r=this,i=this.painter.context.extTimerQuery,a=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),!this._removed){this._updateProjectionTransition();var o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=this.transform.pitch,l=e.exported.now(),c=new e.EvaluationParameters(s,{now:l,fadeDuration:o,pitch:u,transition:this.style.getTransition()});this.style.update(c)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);var d=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),d=this._updateAverageElevation(a),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):d=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){var f=e.exported.now()-a;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),r.fire(new e.Event("gpu-timing-frame",{cpuTime:f,gpuTime:t})),e.window.performance.mark("frame-gpu",{startTime:a,detail:{gpuTime:t}})}),50)}if(this.listens("gpu-timing-layer")){var h=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(h);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}if(this.listens("gpu-timing-deferred-render")){var p=this.painter.collectDeferredRenderGpuQueries();setTimeout((function(){var t=r.painter.queryGpuTimeDeferredRender(p);r.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:t}))}),50)}var v=this._sourcesDirty||this._styleDirty||this._placementDirty||d;if(v||this._repaint)this.triggerRepaint();else{var m=!this.isMoving()&&this.loaded();if(m&&(d=this._updateAverageElevation(a,!0)),d)this.triggerRepaint();else if(this._triggerFrame(!1),m&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var g=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:g})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}}},{key:"_forceMarkerAndPopupUpdate",value:function(e){var t,n=f(this._markers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e&&!this.getRenderWorldCopies()&&(r._lngLat=r._lngLat.wrap()),r._update()}}catch(s){n.e(s)}finally{n.f()}var i,a=f(this._popups);try{for(a.s();!(i=a.n()).done;){var o=i.value;!e||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}}catch(s){a.e(s)}finally{a.f()}}},{key:"_updateAverageElevation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e){return t.transform.averageElevation=e,t._update(!1),!0};if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((n||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){var i=this.transform.averageElevation,a=this.transform.sampleAverageElevation(),o=!1;this.transform.elevation&&(o=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(a)?a=0:this._averageElevationLastSampledAt=e;var s=Math.abs(i-a);if(s>1){if(this._isInitialLoad||o)return this._averageElevation.jumpTo(a),r(a);this._averageElevation.easeTo(a,e,300)}else if(s>1e-4)return this._averageElevation.jumpTo(a),r(a)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}},{key:"_authenticate",value:function(){var t=this;e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(n){if(n&&(n.message===e.AUTH_ERR_MSG||401===n.status)){var r=t.painter.context.gl;e.storeAuthState(r,!1),t._logoControl instanceof ca&&t._logoControl._updateLogo(),r&&r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT),t._silenceAuthErrors||t.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){var e=this._isDragging();this.painter.updateTerrain(this.style,e)}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,n){for(var r=n[1]-n[0],i=e.length/4,a=0;a<t.length;a++){for(var o=t[a],s=0,u=0;u<o.length;u+=4)o[u]===e[u]&&o[u+1]===e[u+1]&&o[u+2]===e[u+2]&&o[u+3]===e[u+3]&&(s+=1);r+=(n[a+2]-n[a+1])*(1-s/i)}return r}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,n=f(this._controls);try{for(n.s();!(t=n.n()).done;)t.value.onRemove(this)}catch(i){n.e(i)}finally{n.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(t){var n=this;this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((function(e){var t=!!n._renderNextFrame;n._frame=null,n._renderNextFrame=null,t&&n._render(e)})))}},{key:"_preloadTiles",value:function(t){var n=this,r=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(r,(function(e,n){return e._preloadTiles(t,n)}),(function(){n.triggerRepaint()})),this}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"_onVisibilityChange",value:function(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"showTileAABBs",get:function(){return!!this._showTileAABBs},set:function(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}},{key:"_setCacheLimits",value:function(t,n){e.setCacheLimits(t,n)}},{key:"version",get:function(){return e.version}}]),c}(ua),NavigationControl:function(){function t(n){var r=this;h(this,t),this.options=e.extend({},wa,n),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){r._map&&r._map.zoomIn({},{originalEvent:e})})),y("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){r._map&&r._map.zoomOut({},{originalEvent:e})})),y("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){var t=r._map;t&&(r.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=y("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return p(t,[{key:"_updateZoomButtons",value:function(){var e=this._map;if(e){var t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}}},{key:"_rotateCompassArrow",value:function(){var e=this,t=this._map;if(t){var n=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((function(){e._compassIcon&&(e._compassIcon.style.transform=n)}))}}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xa(e,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){var e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}},{key:"_createButton",value:function(e,t){var n=y("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},{key:"_setButtonTitle",value:function(e,t){if(this._map){var n=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}}}]),t}(),GeolocateControl:function(t){v(r,t);var n=m(r);function r(t){var a;return h(this,r),(a=n.call(this)).options=e.extend({geolocation:e.window.navigator.geolocation},ka,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],i(a)),a._updateMarkerRotationThrottled=ci(a._updateMarkerRotation,20),a._numberOfWatches=0,a}return p(r,[{key:"onAdd",value:function(e){return this._map=e,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}},{key:"_checkGeolocationSupport",value:function(t){var n=this,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){return r("denied"!==e.state)})).catch((function(){return r()})):r()}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),a=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),a,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_updateMarkerRotation",value:function(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var n=this;if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=y("button","mapboxgl-ctrl-geolocate",this._container),y("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y("div","mapboxgl-user-location"),this._dotElement.appendChild(y("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(y("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new pa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=y("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==n._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new e.Event("trackuserlocationend")))}))}}},{key:"_onDeviceOrientation",value:function(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_addDeviceOrientationListener",value:function(){var t=this,n=function(){e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",t._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&n()})).catch(console.error):n()}},{key:"_clearWatch",value:function(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),r}(e.Evented),AttributionControl:la,ScaleControl:function(){function t(n){h(this,t),this.options=e.extend({},Sa,n),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(e){return!1}}()||(this._setScale=Ea.bind(this)),e.bindAll(["_update","_setScale","setUnit"],this)}return p(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_update",value:function(){var e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,r=t._containerWidth/2-e/2,i=t.unproject([r,n]),a=t.unproject([r+e,n]),o=i.distanceTo(a);if("imperial"===this.options.unit){var s=3.2808*o;s>5280?this._setScale(e,s/5280,"mile"):this._setScale(e,s,"foot")}else"nautical"===this.options.unit?this._setScale(e,o/1852,"nautical-mile"):o>=1e3?this._setScale(e,o/1e3,"kilometer"):this._setScale(e,o,"meter")}},{key:"_setScale",value:function(e,t,n){var r=this,i=Aa(t),a=i/t;this._map._requestDomTask((function(){r._container.style.width=e*a+"px",r._container.innerHTML="nautical-mile"!==n?new Intl.NumberFormat(r._language,{style:"unit",unitDisplay:"narrow",unit:n}).format(i):"".concat(i,"&nbsp;nm")}))}},{key:"onAdd",value:function(e){return this._map=e,this._language=e.getLanguage(),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}},{key:"_setLanguage",value:function(e){this._language=e,this._update()}},{key:"setUnit",value:function(e){this.options.unit=e,this._update()}}]),t}(),FullscreenControl:function(){function t(n){h(this,t),this._fullscreen=!1,n&&n.container&&(n.container instanceof e.window.HTMLElement?this._container=n.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}return p(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=y("button","mapboxgl-ctrl-fullscreen",this._controlContainer);y("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),Popup:function(t){v(r,t);var n=m(r);function r(t){var a;return h(this,r),(a=n.call(this)).options=e.extend(Object.create(va),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],i(a)),a._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[]),a}return p(r,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);var t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();var n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){this._trackPointer=!0,this._pos=null,this._update();var e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(e.window.document.createTextNode(t))}},{key:"setHTML",value:function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){var t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=y("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){var n=this._closeButton=y("button","mapboxgl-popup-close-button",t);n.type="button",n.setAttribute("aria-label","Close popup"),n.setAttribute("aria-hidden","true"),n.innerHTML="&#215;",n.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){return this._classList.add(e),this._updateClassList(),this}},{key:"removeClassName",value:function(e){return this._classList.delete(e),this._updateClassList(),this}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){var t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}},{key:"_onMouseEvent",value:function(e){this._update(e.point)}},{key:"_getAnchor",value:function(e){if(this.options.anchor)return this.options.anchor;var t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";var i=n.offsetWidth,a=n.offsetHeight,o=r.x<i/2,s=r.x>t.transform.width-i/2;if(r.y+e<a)return o?"top-left":s?"top-right":"top";if(r.y>t.transform.height-a){if(o)return"bottom-left";if(s)return"bottom-right"}return o?"left":s?"right":"bottom"}},{key:"_updateClassList",value:function(){var e=this._container;if(e){var t=c(this._classList);t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}}},{key:"_update",value:function(t){var n=this,r=this._map,i=this._content;if(r&&(this._lngLat||this._trackPointer)&&i){var a=this._container;if(a||(a=this._container=y("div","mapboxgl-popup",r.getContainer()),this._tip=y("div","mapboxgl-popup-tip",a),a.appendChild(i)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=fa(this._lngLat,this._pos,r.transform)),!this._trackPointer||t){var o=this._pos=this._trackPointer&&t?t:r.project(this._lngLat),s=ga(this.options.offset),u=this._anchor=this._getAnchor(s.y),l=ga(this.options.offset,u),c=o.add(l).round();r._requestDomTask((function(){n._container&&u&&(n._container.style.transform="".concat(ha[u]," translate(").concat(c.x,"px,").concat(c.y,"px)"))}))}if(!this._marker&&r._showingGlobe()){var d=e.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(d)}this._updateClassList()}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(ma);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}},{key:"_setOpacity",value:function(e){this._container&&(this._container.style.opacity="".concat(e)),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}}]),r}(e.Evented),Marker:pa,Style:hn,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:ti,Evented:e.Evented,config:e.config,prewarm:function(){tt().acquire($e)},clearPrewarmedResources:function(){var e=Qe;e&&(e.isPreloaded()&&1===e.numActive()?(e.release($e),Qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return et.workerCount},set workerCount(e){et.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return Ta})),n}()},7081:function(e,t,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(6115).default,o=n(1655).default,s=n(6389).default,u=n(2009),l=n(4038),c="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},t.INSPECT_MAX_BYTES=50;var d=2147483647;function f(e){if(e>d)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,h.prototype),t}function h(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return m(e)}return p(e,t,n)}function p(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|b(e,t),r=f(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return h.from(r,t,n);var i=function(e){if(h.isBuffer(e)){var t=0|_(e.length),n=f(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?f(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function v(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function m(e){return v(e),f(e<0?0:0|_(e))}function g(e){for(var t=e.length<0?0:0|_(e.length),n=f(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,h.prototype),r}function _(e){if(e>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|e}function b(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(e).length;default:if(i)return r?-1:Y(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return F(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function x(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=h.from(t,r)),h.isBuffer(t))return 0===t.length?-1:S(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var d=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){d=!1;break}if(d)return a}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a,o=t.length;for(r>o/2&&(r=o/2),a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(te(s))return a;e[n+a]=s}return a}function A(e,t,n,r){return $(Y(t,e.length-n),e,n,r)}function T(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return $(Q(t),e,n,r)}function P(e,t,n,r){return $(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var u=void 0,l=void 0,c=void 0,d=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:128===(192&(u=e[i+1]))&&(d=(31&a)<<6|63&u)>127&&(o=d);break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(d=(15&a)<<12|(63&u)<<6|63&l)>2047&&(d<55296||d>57343)&&(o=d);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(d=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&d<1114112&&(o=d)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=L));return n}(r)}t.kMaxLength=d,h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(e,t,n){return p(e,t,n)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,n){return function(e,t,n){return v(e),e<=0?f(e):void 0!==t?"string"===typeof n?f(e).fill(t,n):f(e).fill(t):f(e)}(e,t,n)},h.allocUnsafe=function(e){return m(e)},h.allocUnsafeSlow=function(e){return m(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=h.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(ee(a,Uint8Array))i+a.length>r.length?(h.isBuffer(a)||(a=h.from(a)),a.copy(r,i)):Uint8Array.prototype.set.call(r,a,i);else{if(!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},h.byteLength=b,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)x(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):w.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},c&&(h.prototype[c]=h.prototype.inspect),h.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){a=u[c],o=l[c];break}return a<o?-1:o<a?1:0},h.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},h.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},h.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},h.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":case"latin1":case"binary":return T(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function F(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=ne[e[a]];return i}function D(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function N(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,a){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,i){q(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function U(e,t,n,r,i){q(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function z(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(e,t,n,r,i){return t=+t,n>>>=0,i||z(e,0,n,4),l.write(e,t,n,r,23,4),n+4}function Z(e,t,n,r,i){return t=+t,n>>>=0,i||z(e,0,n,8),l.write(e,t,n,r,52,8),n+8}h.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,h.prototype),r},h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readBigUInt64LE=re((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||J(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=re((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||J(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},h.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},h.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readBigInt64LE=re((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||J(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),h.prototype.readBigInt64BE=re((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||J(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),h.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),l.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),l.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),l.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),l.read(this,e,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigUInt64LE=re((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},h.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},h.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigInt64LE=re((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},h.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},h.prototype.writeDoubleLE=function(e,t,n){return Z(this,e,t,!0,n)},h.prototype.writeDoubleBE=function(e,t,n){return Z(this,e,t,!1,n)},h.prototype.copy=function(e,t,n,r){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},h.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=h.isBuffer(e)?e:h.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var H={};function W(e,t,n){H[e]=function(n){o(l,n);var u=s(l);function l(){var n;return r(this,l),n=u.call(this),Object.defineProperty(a(n),"message",{value:t.apply(a(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return i(l,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),l}(n)}function G(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function q(e,t,n,r,i,a){if(e>n||e<t){var o,s="bigint"===typeof t?"n":"";throw o=a>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(a+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(a+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new H.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){K(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||J(t,e.length-(n+1))}(r,i,a)}function K(e,t){if("number"!==typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function J(e,t,n){if(Math.floor(e)!==e)throw K(e,n),new H.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=G(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=G(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var X=/[^+/0-9A-Za-z-_]/g;function Y(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Q(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function $(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}},4199:function(e,t,n){"use strict";var r=n(3708),i=r.AbortError,a=r.codes,o=n(6327),s=a.ERR_INVALID_ARG_TYPE;e.exports.addAbortSignal=function(t,n){if(function(e,t){if("object"!==typeof e||!("aborted"in e))throw new s(t,"AbortSignal",e)}(t,"signal"),!(r=n)||"function"!==typeof r.pipe)throw new s("stream","stream.Stream",n);var r;return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!==typeof e||!("aborted"in e))return t;var n=function(){t.destroy(new i(void 0,{cause:e.reason}))};return e.aborted?n():(e.addEventListener("abort",n),o(t,(function(){return e.removeEventListener("abort",n)}))),t}},1909:function(e,t,n){"use strict";var r=n(2122).default,i=n(7061).default,a=n(6690).default,o=n(9728).default,s=n(423),u=s.StringPrototypeSlice,l=s.SymbolIterator,c=s.TypedArrayPrototypeSet,d=s.Uint8Array,f=n(7081).Buffer,h=n(1205).inspect;e.exports=function(e){function t(){a(this,t),this.head=null,this.tail=null,this.length=0}return o(t,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;null!==(t=t.next);)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return f.alloc(0);for(var t=f.allocUnsafe(e>>>0),n=this.head,r=0;n;)c(t,n.data,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n=this.head.data;if(e<n.length){var r=n.slice(0,e);return this.head.data=n.slice(e),r}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}},{key:"first",value:function(){return this.head.data}},{key:l,value:i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.data;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"_getString",value:function(e){var t="",n=this.head,r=0;do{var i=n.data;if(!(e>i.length)){e===i.length?(t+=i,++r,n.next?this.head=n.next:this.head=this.tail=null):(t+=u(i,0,e),this.head=n,n.data=u(i,e));break}t+=i,e-=i.length,++r}while(null!==(n=n.next));return this.length-=r,t}},{key:"_getBuffer",value:function(e){var t=f.allocUnsafe(e),n=e,r=this.head,i=0;do{var a=r.data;if(!(e>a.length)){e===a.length?(c(t,a,n-e),++i,r.next?this.head=r.next:this.head=this.tail=null):(c(t,new d(a.buffer,a.byteOffset,e),n-e),this.head=r,r.data=a.slice(e));break}c(t,a,n-e),e-=a.length,++i}while(null!==(r=r.next));return this.length-=i,t}},{key:e,value:function(e,t){return h(this,r(r({},t),{},{depth:0,customInspect:!1}))}}]),t}(Symbol.for("nodejs.util.inspect.custom"))},51:function(e,t,n){"use strict";var r=n(5937).pipeline,i=n(2185),a=n(3936).destroyer,o=n(7180),s=o.isNodeStream,u=o.isReadable,l=o.isWritable,c=n(3708),d=c.AbortError,f=c.codes,h=f.ERR_INVALID_ARG_VALUE,p=f.ERR_MISSING_ARGS;e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new p("streams");if(1===t.length)return i.from(t[0]);var o,c,f,v,m,g=[].concat(t);if("function"===typeof t[0]&&(t[0]=i.from(t[0])),"function"===typeof t[t.length-1]){var y=t.length-1;t[y]=i.from(t[y])}for(var _=0;_<t.length;++_)if(s(t[_])){if(_<t.length-1&&!u(t[_]))throw new h("streams[".concat(_,"]"),g[_],"must be readable");if(_>0&&!l(t[_]))throw new h("streams[".concat(_,"]"),g[_],"must be writable")}var b=t[0],w=r(t,(function(e){var t=v;v=null,t?t(e):e?m.destroy(e):k||x||m.destroy()})),x=!!l(b),k=!!u(w);return m=new i({writableObjectMode:!(null===b||void 0===b||!b.writableObjectMode),readableObjectMode:!(null===w||void 0===w||!w.writableObjectMode),writable:x,readable:k}),x&&(m._write=function(e,t,n){b.write(e,t)?n():o=n},m._final=function(e){b.end(),c=e},b.on("drain",(function(){if(o){var e=o;o=null,e()}})),w.on("finish",(function(){if(c){var e=c;c=null,e()}}))),k&&(w.on("readable",(function(){if(f){var e=f;f=null,e()}})),w.on("end",(function(){m.push(null)})),m._read=function(){for(;;){var e=w.read();if(null===e)return void(f=m._read);if(!m.push(e))return}}),m._destroy=function(e,t){e||null===v||(e=new d),f=null,o=null,c=null,null===v?t(e):(v=t,a(w,e))},m}},3936:function(e,t,n){"use strict";var r=n(1426),i=n(3708),a=i.aggregateTwoErrors,o=i.codes.ERR_MULTIPLE_CALLBACK,s=i.AbortError,u=n(423).Symbol,l=n(7180),c=l.kDestroyed,d=l.isDestroyed,f=l.isFinished,h=l.isServerRequest,p=u("kDestroy"),v=u("kConstruct");function m(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function g(e,t,n){var i=!1;function a(t){if(!i){i=!0;var a=e._readableState,o=e._writableState;m(t,o,a),o&&(o.closed=!0),a&&(a.closed=!0),"function"===typeof n&&n(t),t?r.nextTick(y,e,t):r.nextTick(_,e)}}try{e._destroy(t||null,a)}catch(t){a(t)}}function y(e,t){b(e,t),_(e)}function _(e){var t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n&&n.emitClose||t&&t.emitClose)&&e.emit("close")}function b(e,t){var n=e._readableState,r=e._writableState;r&&r.errorEmitted||n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function w(e,t,n){var i=e._readableState,a=e._writableState;if(a&&a.destroyed||i&&i.destroyed)return this;i&&i.autoDestroy||a&&a.autoDestroy?e.destroy(t):t&&(t.stack,a&&!a.errored&&(a.errored=t),i&&!i.errored&&(i.errored=t),n?r.nextTick(b,e,t):b(e,t))}function x(e){var t=!1;function n(n){if(t)w(e,null!==n&&void 0!==n?n:new o);else{t=!0;var i=e._readableState,a=e._writableState,s=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(p,n):n?w(e,n,!0):r.nextTick(k,e)}}try{e._construct(n)}catch(i){n(i)}}function k(e){e.emit(v)}function S(e){return e&&e.setHeader&&"function"===typeof e.abort}function E(e){e.emit("close")}function A(e,t){e.emit("error",t),r.nextTick(E,e)}e.exports={construct:function(e,t){if("function"===typeof e._construct){var n=e._readableState,i=e._writableState;n&&(n.constructed=!1),i&&(i.constructed=!1),e.once(v,t),e.listenerCount(v)>1||r.nextTick(x,e)}},destroyer:function(e,t){e&&!d(e)&&(t||f(e)||(t=new s),h(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"===typeof e.destroy?e.destroy(t):"function"===typeof e.close?e.close():t?r.nextTick(A,e,t):r.nextTick(E,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){var n=this._readableState,r=this._writableState,i=r||n;return r&&r.destroyed||n&&n.destroyed?("function"===typeof t&&t(),this):(m(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?g(this,e,t):this.once(p,(function(n){g(this,a(n,e),t)})),this)},undestroy:function(){var e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:w}},2185:function(e,t,n){"use strict";var r=n(2122).default,i=n(423),a=i.ObjectDefineProperties,o=i.ObjectGetOwnPropertyDescriptor,s=i.ObjectKeys,u=i.ObjectSetPrototypeOf;e.exports=m;var l,c,d=n(2527),f=n(9954);u(m.prototype,d.prototype),u(m,d);for(var h=s(f.prototype),p=0;p<h.length;p++){var v=h[p];m.prototype[v]||(m.prototype[v]=f.prototype[v])}function m(e){if(!(this instanceof m))return new m(e);d.call(this,e),f.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function g(){return void 0===l&&(l={}),l}a(m.prototype,{writable:r({__proto__:null},o(f.prototype,"writable")),writableHighWaterMark:r({__proto__:null},o(f.prototype,"writableHighWaterMark")),writableObjectMode:r({__proto__:null},o(f.prototype,"writableObjectMode")),writableBuffer:r({__proto__:null},o(f.prototype,"writableBuffer")),writableLength:r({__proto__:null},o(f.prototype,"writableLength")),writableFinished:r({__proto__:null},o(f.prototype,"writableFinished")),writableCorked:r({__proto__:null},o(f.prototype,"writableCorked")),writableEnded:r({__proto__:null},o(f.prototype,"writableEnded")),writableNeedDrain:r({__proto__:null},o(f.prototype,"writableNeedDrain")),destroyed:{__proto__:null,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),m.fromWeb=function(e,t){return g().newStreamDuplexFromReadableWritablePair(e,t)},m.toWeb=function(e){return g().newReadableWritablePairFromDuplex(e)},m.from=function(e){return c||(c=n(2063)),c(e,"body")}},2063:function(e,t,n){var r=n(7061).default,i=n(7156).default,a=n(9728).default,o=n(6690).default,s=n(1655).default,u=n(6389).default,l=n(6737).default,c=n(8186).default,d=n(1426),f=n(7081),h=n(7180),p=h.isReadable,v=h.isWritable,m=h.isIterable,g=h.isNodeStream,y=h.isReadableNodeStream,_=h.isWritableNodeStream,b=h.isDuplexNodeStream,w=n(6327),x=n(3708),k=x.AbortError,S=x.codes,E=S.ERR_INVALID_ARG_TYPE,A=S.ERR_INVALID_RETURN_VALUE,T=n(3936).destroyer,C=n(2185),P=n(2527),I=n(1205).createDeferredPromise,R=n(8970),L=globalThis.Blob||f.Blob,M="undefined"!==typeof L?function(e){return e instanceof L}:function(e){return!1},O=globalThis.AbortController||n(5935).AbortController,F=n(423).FunctionPrototypeCall,D=function(e){"use strict";s(n,e);var t=u(n);function n(e){var r;return o(this,n),r=t.call(this,e),!1===(null===e||void 0===e?void 0:e.readable)&&(r._readableState.readable=!1,r._readableState.ended=!0,r._readableState.endEmitted=!0),!1===(null===e||void 0===e?void 0:e.writable)&&(r._writableState.writable=!1,r._writableState.ending=!0,r._writableState.ended=!0,r._writableState.finished=!0),r}return a(n)}(C);function N(e){var t,n,r,i,a,o=e.readable&&"function"!==typeof e.readable.read?P.wrap(e.readable):e.readable,s=e.writable,u=!!p(o),l=!!v(s);function c(e){var t=i;i=null,t?t(e):e?a.destroy(e):u||l||a.destroy()}return a=new D({readableObjectMode:!(null===o||void 0===o||!o.readableObjectMode),writableObjectMode:!(null===s||void 0===s||!s.writableObjectMode),readable:u,writable:l}),l&&(w(s,(function(e){l=!1,e&&T(o,e),c(e)})),a._write=function(e,n,r){s.write(e,n)?r():t=r},a._final=function(e){s.end(),n=e},s.on("drain",(function(){if(t){var e=t;t=null,e()}})),s.on("finish",(function(){if(n){var e=n;n=null,e()}}))),u&&(w(o,(function(e){u=!1,e&&T(o,e),c(e)})),o.on("readable",(function(){if(r){var e=r;r=null,e()}})),o.on("end",(function(){a.push(null)})),a._read=function(){for(;;){var e=o.read();if(null===e)return void(r=a._read);if(!a.push(e))return}}),a._destroy=function(e,a){e||null===i||(e=new k),r=null,t=null,n=null,null===i?a(e):(i=a,T(s,e),T(o,e))},a}e.exports=function e(t,n){if(b(t))return t;if(y(t))return N({readable:t});if(_(t))return N({writable:t});if(g(t))return N({writable:!1,readable:!1});if("function"===typeof t){var a=function(e){var t=I(),n=t.promise,i=t.resolve,a=new O,o=a.signal,s=e(c(r().mark((function e(){var t,a,s,u,c,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n,n=null,e.next=5,l(t);case 5:if(a=e.sent,s=a.chunk,u=a.done,c=a.cb,d.nextTick(c),!u){e.next=12;break}return e.abrupt("return");case 12:if(!o.aborted){e.next=14;break}throw new k(void 0,{cause:o.reason});case 14:return f=I(),n=f.promise,i=f.resolve,e.next=19,s;case 19:e.next=0;break;case 21:case"end":return e.stop()}}),e)})))(),{signal:o});return{value:s,write:function(e,t,n){var r=i;i=null,r({chunk:e,done:!1,cb:n})},final:function(e){var t=i;i=null,t({done:!0,cb:e})},destroy:function(e,t){a.abort(),t(e)}}}(t),o=a.value,s=a.write,u=a.final,f=a.destroy;if(m(o))return R(D,o,{objectMode:!0,write:s,final:u,destroy:f});var h=null===o||void 0===o?void 0:o.then;if("function"===typeof h){var p,v=F(h,o,(function(e){if(null!=e)throw new A("nully","body",e)}),(function(e){T(p,e)}));return p=new D({objectMode:!0,readable:!1,write:s,final:function(e){u(i(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v;case 3:d.nextTick(e,null),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),d.nextTick(e,t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))))},destroy:f})}throw new A("Iterable, AsyncIterable or AsyncFunction",n,o)}if(M(t))return e(t.arrayBuffer());if(m(t))return R(D,t,{objectMode:!0,writable:!1});if("object"===typeof(null===t||void 0===t?void 0:t.writable)||"object"===typeof(null===t||void 0===t?void 0:t.readable))return N({readable:null!==t&&void 0!==t&&t.readable?y(null===t||void 0===t?void 0:t.readable)?null===t||void 0===t?void 0:t.readable:e(t.readable):void 0,writable:null!==t&&void 0!==t&&t.writable?_(null===t||void 0===t?void 0:t.writable)?null===t||void 0===t?void 0:t.writable:e(t.writable):void 0});var w,x=null===t||void 0===t?void 0:t.then;if("function"===typeof x)return F(x,t,(function(e){null!=e&&w.push(e),w.push(null)}),(function(e){T(w,e)})),w=new D({objectMode:!0,writable:!1,read:function(){}});throw new E(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},6327:function(e,t,n){var r=n(1426),i=n(3708),a=i.AbortError,o=i.codes,s=o.ERR_INVALID_ARG_TYPE,u=o.ERR_STREAM_PREMATURE_CLOSE,l=n(1205),c=l.kEmptyObject,d=l.once,f=n(7293),h=f.validateAbortSignal,p=f.validateFunction,v=f.validateObject,m=n(423).Promise,g=n(7180),y=g.isClosed,_=g.isReadable,b=g.isReadableNodeStream,w=g.isReadableFinished,x=g.isReadableErrored,k=g.isWritable,S=g.isWritableNodeStream,E=g.isWritableFinished,A=g.isWritableErrored,T=g.isNodeStream,C=g.willEmitClose;var P=function(){};function I(e,t,n){var i,o;2===arguments.length?(n=t,t=c):null==t?t=c:v(t,"options"),p(n,"callback"),h(t.signal,"options.signal"),n=d(n);var l=null!==(i=t.readable)&&void 0!==i?i:b(e),f=null!==(o=t.writable)&&void 0!==o?o:S(e);if(!T(e))throw new s("stream","Stream",e);var m=e._writableState,g=e._readableState,I=function(){e.writable||M()},R=C(e)&&b(e)===l&&S(e)===f,L=E(e,!1),M=function(){L=!0,e.destroyed&&(R=!1),(!R||e.readable&&!l)&&(l&&!O||n.call(e))},O=w(e,!1),F=function(){O=!0,e.destroyed&&(R=!1),(!R||e.writable&&!f)&&(f&&!L||n.call(e))},D=function(t){n.call(e,t)},N=y(e),j=function(){N=!0;var t=A(e)||x(e);return t&&"boolean"!==typeof t?n.call(e,t):l&&!O&&b(e,!0)&&!w(e,!1)?n.call(e,new u):!f||L||E(e,!1)?void n.call(e):n.call(e,new u)},B=function(){e.req.on("finish",M)};!function(e){return e.setHeader&&"function"===typeof e.abort}(e)?f&&!m&&(e.on("end",I),e.on("close",I)):(e.on("complete",M),R||e.on("abort",j),e.req?B():e.on("request",B)),R||"boolean"!==typeof e.aborted||e.on("aborted",j),e.on("end",F),e.on("finish",M),!1!==t.error&&e.on("error",D),e.on("close",j),N?r.nextTick(j):null!==m&&void 0!==m&&m.errorEmitted||null!==g&&void 0!==g&&g.errorEmitted?R||r.nextTick(j):(l||R&&!_(e)||!L&&!1!==k(e))&&(f||R&&!k(e)||!O&&!1!==_(e))?g&&e.req&&e.aborted&&r.nextTick(j):r.nextTick(j);var U=function(){n=P,e.removeListener("aborted",j),e.removeListener("complete",M),e.removeListener("abort",j),e.removeListener("request",B),e.req&&e.req.removeListener("finish",M),e.removeListener("end",I),e.removeListener("close",I),e.removeListener("finish",M),e.removeListener("end",F),e.removeListener("error",D),e.removeListener("close",j)};if(t.signal&&!N){var z=function(){var r=n;U(),r.call(e,new a(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(z);else{var V=n;n=d((function(){t.signal.removeEventListener("abort",z);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];V.apply(e,r)})),t.signal.addEventListener("abort",z)}}return U}e.exports=I,e.exports.finished=function(e,t){return new m((function(n,r){I(e,t,(function(e){e?r(e):n()}))}))}},8970:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(2122).default,o=n(1426),s=n(423),u=s.PromisePrototypeThen,l=s.SymbolAsyncIterator,c=s.SymbolIterator,d=n(7081).Buffer,f=n(3708).codes,h=f.ERR_INVALID_ARG_TYPE,p=f.ERR_STREAM_NULL_VALUES;e.exports=function(e,t,n){var s,f;if("string"===typeof t||t instanceof d)return new e(a(a({objectMode:!0},n),{},{read:function(){this.push(t),this.push(null)}}));if(t&&t[l])f=!0,s=t[l]();else{if(!t||!t[c])throw new h("iterable",["Iterable"],t);f=!1,s=t[c]()}var v=new e(a({objectMode:!0,highWaterMark:1},n)),m=!1;function g(){return(g=i(r().mark((function e(t){var n,i,a,o,u,l,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0!==t&&null!==t,i="function"===typeof s.throw,!n||!i){e.next=12;break}return e.next=5,s.throw(t);case 5:return a=e.sent,o=a.value,u=a.done,e.next=10,o;case 10:if(!u){e.next=12;break}return e.abrupt("return");case 12:if("function"!==typeof s.return){e.next=19;break}return e.next=15,s.return();case 15:return l=e.sent,c=l.value,e.next=19,c;case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=i(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f){e.next=7;break}return e.next=4,s.next();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=s.next();case 8:if(t=e.t0,n=t.value,!t.done){e.next=15;break}v.push(null),e.next=33;break;case 15:if(!n||"function"!==typeof n.then){e.next=21;break}return e.next=18,n;case 18:e.t1=e.sent,e.next=22;break;case 21:e.t1=n;case 22:if(null!==(i=e.t1)){e.next=28;break}throw m=!1,new p;case 28:if(!v.push(i)){e.next=32;break}return e.abrupt("continue",39);case 32:m=!1;case 33:e.next=38;break;case 35:e.prev=35,e.t2=e.catch(0),v.destroy(e.t2);case 38:return e.abrupt("break",41);case 39:e.next=0;break;case 41:case"end":return e.stop()}}),e,null,[[0,35]])})))).apply(this,arguments)}return v._read=function(){m||(m=!0,function(){y.apply(this,arguments)}())},v._destroy=function(e,t){u(function(e){return g.apply(this,arguments)}(e),(function(){return o.nextTick(t,e)}),(function(n){return o.nextTick(t,n||e)}))},v}},794:function(e,t,n){"use strict";var r=n(423),i=r.ArrayIsArray,a=r.ObjectSetPrototypeOf,o=n(7465).EventEmitter;function s(e){o.call(this,e)}function u(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}a(s.prototype,o.prototype),a(s,o),s.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",l));var a=!1;function s(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return u(n,"error",c),u(e,"error",c),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e},e.exports={Stream:s,prependListener:u}},3648:function(e,t,n){"use strict";var r=n(8416).default,i=n(9728).default,a=n(6690).default,o=n(1655).default,s=n(6389).default,u=n(7061).default,l=n(7156).default,c=n(8131).default,d=n(8237).default,f=n(6737).default,h=n(8186).default,p=globalThis.AbortController||n(5935).AbortController,v=n(3708),m=v.codes,g=m.ERR_INVALID_ARG_TYPE,y=m.ERR_MISSING_ARGS,_=m.ERR_OUT_OF_RANGE,b=v.AbortError,w=n(7293),x=w.validateAbortSignal,k=w.validateInteger,S=w.validateObject,E=n(423).Symbol("kWeak"),A=n(6327).finished,T=n(423),C=T.ArrayPrototypePush,P=T.MathFloor,I=T.Number,R=T.NumberIsNaN,L=T.Promise,M=T.PromiseReject,O=T.PromisePrototypeThen,F=T.Symbol,D=F("kEmpty"),N=F("kEof");function j(e,t){if("function"!==typeof e)throw new g("fn",["Function","AsyncFunction"],e);null!=t&&S(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&x(t.signal,"options.signal");var n=1;return null!=(null===t||void 0===t?void 0:t.concurrency)&&(n=P(t.concurrency)),k(n,"concurrency",1),function(){var r=h(u().mark((function r(){var i,a,o,s,c,h,v,m,g,y,_,w,x,k,S;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:k=function(){return(k=l(u().mark((function r(){var i,a,o,l,f,p,x,k,S;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,i=!1,a=!1,r.prev=3,l=d(s);case 5:return r.next=7,l.next();case 7:if(!(i=!(f=r.sent).done)){r.next=25;break}if(p=f.value,!_){r.next=11;break}return r.abrupt("return");case 11:if(!h.aborted){r.next=13;break}throw new b;case 13:try{p=e(p,v)}catch(u){p=M(u)}if(p!==D){r.next=16;break}return r.abrupt("continue",22);case 16:if("function"===typeof(null===(x=p)||void 0===x?void 0:x.catch)&&p.catch(w),c.push(p),g&&(g(),g=null),!(!_&&c.length&&c.length>=n)){r.next=22;break}return r.next=22,new L((function(e){y=e}));case 22:i=!1,r.next=5;break;case 25:r.next=31;break;case 27:r.prev=27,r.t0=r.catch(3),a=!0,o=r.t0;case 31:if(r.prev=31,r.prev=32,!i||null==l.return){r.next=36;break}return r.next=36,l.return();case 36:if(r.prev=36,!a){r.next=39;break}throw o;case 39:return r.finish(36);case 40:return r.finish(31);case 41:c.push(N),r.next=49;break;case 44:r.prev=44,r.t1=r.catch(0),k=M(r.t1),O(k,void 0,w),c.push(k);case 49:return r.prev=49,_=!0,g&&(g(),g=null),null===t||void 0===t||null===(S=t.signal)||void 0===S||S.removeEventListener("abort",m),r.finish(49);case 54:case"end":return r.stop()}}),r,null,[[0,44,49,54],[3,27,31,41],[32,,36,40]])})))).apply(this,arguments)},x=function(){return k.apply(this,arguments)},w=function(){_=!0},o=new p,s=this,c=[],h=o.signal,v={signal:h},m=function(){return o.abort()},null!==t&&void 0!==t&&null!==(i=t.signal)&&void 0!==i&&i.aborted&&m(),null===t||void 0===t||null===(a=t.signal)||void 0===a||a.addEventListener("abort",m),_=!1,x(),r.prev=13;case 14:0;case 15:if(!(c.length>0)){r.next=30;break}return r.next=18,f(c[0]);case 18:if((S=r.sent)!==N){r.next=21;break}return r.abrupt("return");case 21:if(!h.aborted){r.next=23;break}throw new b;case 23:if(S===D){r.next=26;break}return r.next=26,S;case 26:c.shift(),y&&(y(),y=null),r.next=15;break;case 30:return r.next=32,f(new L((function(e){g=e})));case 32:r.next=14;break;case 34:return r.prev=34,o.abort(),_=!0,y&&(y(),y=null),r.finish(34);case 39:case"end":return r.stop()}}),r,this,[[13,,34,39]])})));return function(){return r.apply(this,arguments)}}().call(this)}function B(e){return U.apply(this,arguments)}function U(){return U=l(u().mark((function e(t){var n,r,i,a,o,s,l=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:void 0,r=!1,i=!1,e.prev=3,o=d(H.call(this,t,n));case 5:return e.next=7,o.next();case 7:if(!(r=!(s=e.sent).done)){e.next=13;break}return s.value,e.abrupt("return",!0);case 10:r=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),i=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!i){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e,this,[[3,15,19,29],[20,,24,28]])}))),U.apply(this,arguments)}function z(){return z=l(u().mark((function e(t){var n,r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:void 0,"function"===typeof t){e.next=3;break}throw new g("fn",["Function","AsyncFunction"],t);case 3:return e.next=5,B.call(this,l(u().mark((function e(){var n=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(void 0,n);case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)}))),n);case 5:return e.abrupt("return",!e.sent);case 6:case"end":return e.stop()}}),e,this)}))),z.apply(this,arguments)}function V(){return(V=l(u().mark((function e(t,n){var r,i,a,o,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,i=!1,e.prev=2,o=d(H.call(this,t,n));case 4:return e.next=6,o.next();case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}return l=s.value,e.abrupt("return",l);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),i=!0,a=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!i){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e,this,[[2,14,18,28],[19,,23,27]])})))).apply(this,arguments)}function Z(){return Z=l(u().mark((function e(t,n){var r,i,a,o,s,c,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(){return i=l(u().mark((function e(n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n,r);case 2:return e.abrupt("return",D);case 3:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e,t){return i.apply(this,arguments)},"function"===typeof t){e.next=4;break}throw new g("fn",["Function","AsyncFunction"],t);case 4:a=!1,o=!1,e.prev=6,c=d(j.call(this,r,n));case 8:return e.next=10,c.next();case 10:if(!(a=!(f=e.sent).done)){e.next=16;break}f.value;case 13:a=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),o=!0,s=e.t0;case 22:if(e.prev=22,e.prev=23,!a||null==c.return){e.next=27;break}return e.next=27,c.return();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,this,[[6,18,22,32],[23,,27,31]])}))),Z.apply(this,arguments)}function H(e,t){if("function"!==typeof e)throw new g("fn",["Function","AsyncFunction"],e);function n(){return n=l(u().mark((function t(n,r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,r);case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",n);case 4:return t.abrupt("return",D);case 5:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}return j.call(this,(function(e,t){return n.apply(this,arguments)}),t)}var W=function(e){o(n,e);var t=s(n);function n(){var e;return a(this,n),(e=t.call(this,"reduce")).message="Reduce of an empty stream requires an initial value",e}return i(n)}(y);function G(){return G=l(u().mark((function e(t,n,i){var a,o,s,l,c,f,h,v,m,y,_,w,k,T,C=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"===typeof t){e.next=2;break}throw new g("reducer",["Function","AsyncFunction"],t);case 2:if(null!=i&&S(i,"options"),null!=(null===i||void 0===i?void 0:i.signal)&&x(i.signal,"options.signal"),o=C.length>1,null===i||void 0===i||null===(a=i.signal)||void 0===a||!a.aborted){e.next=11;break}return s=new b(void 0,{cause:i.signal.reason}),this.once("error",(function(){})),e.next=10,A(this.destroy(s));case 10:throw s;case 11:l=new p,c=l.signal,null!==i&&void 0!==i&&i.signal&&(f=r({once:!0},E,this),i.signal.addEventListener("abort",(function(){return l.abort()}),f)),h=!1,e.prev=15,v=!1,m=!1,e.prev=18,_=d(this);case 20:return e.next=22,_.next();case 22:if(!(v=!(w=e.sent).done)){e.next=38;break}if(k=w.value,h=!0,null===i||void 0===i||null===(T=i.signal)||void 0===T||!T.aborted){e.next=27;break}throw new b;case 27:if(o){e.next=32;break}n=k,o=!0,e.next=35;break;case 32:return e.next=34,t(n,k,{signal:c});case 34:n=e.sent;case 35:v=!1,e.next=20;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e.catch(18),m=!0,y=e.t0;case 44:if(e.prev=44,e.prev=45,!v||null==_.return){e.next=49;break}return e.next=49,_.return();case 49:if(e.prev=49,!m){e.next=52;break}throw y;case 52:return e.finish(49);case 53:return e.finish(44);case 54:if(h||o){e.next=56;break}throw new W;case 56:return e.prev=56,l.abort(),e.finish(56);case 59:return e.abrupt("return",n);case 60:case"end":return e.stop()}}),e,this,[[15,,56,59],[18,40,44,54],[45,,49,53]])}))),G.apply(this,arguments)}function q(){return(q=l(u().mark((function e(t){var n,r,i,a,o,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=t&&S(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&x(t.signal,"options.signal"),n=[],r=!1,i=!1,e.prev=5,o=d(this);case 7:return e.next=9,o.next();case 9:if(!(r=!(s=e.sent).done)){e.next=17;break}if(l=s.value,null===t||void 0===t||null===(c=t.signal)||void 0===c||!c.aborted){e.next=13;break}throw new b(void 0,{cause:t.signal.reason});case 13:C(n,l);case 14:r=!1,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),i=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==o.return){e.next=28;break}return e.next=28,o.return();case 28:if(e.prev=28,!i){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,this,[[5,19,23,33],[24,,28,32]])})))).apply(this,arguments)}function K(e){if(e=I(e),R(e))return 0;if(e<0)throw new _("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return null!=e&&S(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&x(e.signal,"options.signal"),function(){var t=h(u().mark((function t(){var n,r,i,a,o,s,l,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=!1,i=!1,t.prev=3,o=d(this);case 5:return t.next=7,f(o.next());case 7:if(!(r=!(s=t.sent).done)){t.next=16;break}if(l=s.value,null===e||void 0===e||null===(c=e.signal)||void 0===c||!c.aborted){t.next=11;break}throw new b({cause:e.signal.reason});case 11:return t.next=13,[n++,l];case 13:r=!1,t.next=5;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(3),i=!0,a=t.t0;case 22:if(t.prev=22,t.prev=23,!r||null==o.return){t.next=27;break}return t.next=27,f(o.return());case 27:if(t.prev=27,!i){t.next=30;break}throw a;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,this,[[3,18,22,32],[23,,27,31]])})));return function(){return t.apply(this,arguments)}}().call(this)},drop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&S(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&x(t.signal,"options.signal"),e=K(e),function(){var n=h(u().mark((function n(){var r,i,a,o,s,l,c,h;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===t||void 0===t||null===(r=t.signal)||void 0===r||!r.aborted){n.next=2;break}throw new b;case 2:i=!1,a=!1,n.prev=4,s=d(this);case 6:return n.next=8,f(s.next());case 8:if(!(i=!(l=n.sent).done)){n.next=18;break}if(c=l.value,null===t||void 0===t||null===(h=t.signal)||void 0===h||!h.aborted){n.next=12;break}throw new b;case 12:if(!(e--<=0)){n.next=15;break}return n.next=15,c;case 15:i=!1,n.next=6;break;case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(4),a=!0,o=n.t0;case 24:if(n.prev=24,n.prev=25,!i||null==s.return){n.next=29;break}return n.next=29,f(s.return());case 29:if(n.prev=29,!a){n.next=32;break}throw o;case 32:return n.finish(29);case 33:return n.finish(24);case 34:case"end":return n.stop()}}),n,this,[[4,20,24,34],[25,,29,33]])})));return function(){return n.apply(this,arguments)}}().call(this)},filter:H,flatMap:function(e,t){var n=j.call(this,e,t);return function(){var e=h(u().mark((function e(){var t,r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,r=!1,e.prev=2,a=d(n);case 4:return e.next=6,f(a.next());case 6:if(!(t=!(o=e.sent).done)){e.next=12;break}return s=o.value,e.delegateYield(c(d(s),f),"t0",9);case 9:t=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),r=!0,i=e.t1;case 18:if(e.prev=18,e.prev=19,!t||null==a.return){e.next=23;break}return e.next=23,f(a.return());case 23:if(e.prev=23,!r){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(){return e.apply(this,arguments)}}().call(this)},map:j,take:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&S(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&x(t.signal,"options.signal"),e=K(e),function(){var n=h(u().mark((function n(){var r,i,a,o,s,l,c,h;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===t||void 0===t||null===(r=t.signal)||void 0===r||!r.aborted){n.next=2;break}throw new b;case 2:i=!1,a=!1,n.prev=4,s=d(this);case 6:return n.next=8,f(s.next());case 8:if(!(i=!(l=n.sent).done)){n.next=21;break}if(c=l.value,null===t||void 0===t||null===(h=t.signal)||void 0===h||!h.aborted){n.next=12;break}throw new b;case 12:if(!(e-- >0)){n.next=17;break}return n.next=15,c;case 15:n.next=18;break;case 17:return n.abrupt("return");case 18:i=!1,n.next=6;break;case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(4),a=!0,o=n.t0;case 27:if(n.prev=27,n.prev=28,!i||null==s.return){n.next=32;break}return n.next=32,f(s.return());case 32:if(n.prev=32,!a){n.next=35;break}throw o;case 35:return n.finish(32);case 36:return n.finish(27);case 37:case"end":return n.stop()}}),n,this,[[4,23,27,37],[28,,32,36]])})));return function(){return n.apply(this,arguments)}}().call(this)}},e.exports.promiseReturningOperators={every:function(e){return z.apply(this,arguments)},forEach:function(e,t){return Z.apply(this,arguments)},reduce:function(e,t,n){return G.apply(this,arguments)},toArray:function(e){return q.apply(this,arguments)},some:B,find:function(e,t){return V.apply(this,arguments)}}},1520:function(e,t,n){"use strict";var r=n(423).ObjectSetPrototypeOf;e.exports=a;var i=n(9994);function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}r(a.prototype,i.prototype),r(a,i),a.prototype._transform=function(e,t,n){n(null,e)}},5937:function(e,t,n){var r,i,a=n(7156).default,o=n(7061).default,s=n(8186).default,u=n(6737).default,l=n(8131).default,c=n(8237).default,d=n(1426),f=n(423),h=f.ArrayIsArray,p=f.Promise,v=f.SymbolAsyncIterator,m=n(6327),g=n(1205).once,y=n(3936),_=n(2185),b=n(3708),w=b.aggregateTwoErrors,x=b.codes,k=x.ERR_INVALID_ARG_TYPE,S=x.ERR_INVALID_RETURN_VALUE,E=x.ERR_MISSING_ARGS,A=x.ERR_STREAM_DESTROYED,T=x.ERR_STREAM_PREMATURE_CLOSE,C=b.AbortError,P=n(7293),I=P.validateFunction,R=P.validateAbortSignal,L=n(7180),M=L.isIterable,O=L.isReadable,F=L.isReadableNodeStream,D=L.isNodeStream,N=globalThis.AbortController||n(5935).AbortController;function j(e,t,n){var r=!1;return e.on("close",(function(){r=!0})),{destroy:function(t){r||(r=!0,y.destroyer(e,t||new A("pipe")))},cleanup:m(e,{readable:t,writable:n},(function(e){r=!e}))}}function B(e){if(M(e))return e;if(F(e))return function(e){return U.apply(this,arguments)}(e);throw new k("val",["Readable","Iterable","AsyncIterable"],e)}function U(){return(U=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i||(i=n(2527)),e.delegateYield(l(c(i.prototype[v].call(t)),u),"t0",2);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,n,r){return V.apply(this,arguments)}function V(){return(V=a(o().mark((function e(t,n,r,i){var a,s,u,l,d,f,h,v,g,y,_,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.end,u=null,l=function(e){if(e&&(s=e),u){var t=u;u=null,t()}},d=function(){return new p((function(e,t){s?t(s):u=function(){s?t(s):e()}}))},n.on("drain",l),f=m(n,{readable:!1},l),e.prev=6,!n.writableNeedDrain){e.next=10;break}return e.next=10,d();case 10:h=!1,v=!1,e.prev=12,y=c(t);case 14:return e.next=16,y.next();case 16:if(!(h=!(_=e.sent).done)){e.next=24;break}if(b=_.value,n.write(b)){e.next=21;break}return e.next=21,d();case 21:h=!1,e.next=14;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(12),v=!0,g=e.t0;case 30:if(e.prev=30,e.prev=31,!h||null==y.return){e.next=35;break}return e.next=35,y.return();case 35:if(e.prev=35,!v){e.next=38;break}throw g;case 38:return e.finish(35);case 39:return e.finish(30);case 40:return a&&n.end(),e.next=43,d();case 43:r(),e.next=49;break;case 46:e.prev=46,e.t1=e.catch(6),r(s!==e.t1?w(s,e.t1):e.t1);case 49:return e.prev=49,f(),n.off("drain",l),e.finish(49);case 53:case"end":return e.stop()}}),e,null,[[6,46,49,53],[12,26,30,40],[31,,35,39]])})))).apply(this,arguments)}function Z(e,t,i){if(1===e.length&&h(e[0])&&(e=e[0]),e.length<2)throw new E("streams");var a,o,s=new N,u=s.signal,l=null===i||void 0===i?void 0:i.signal,c=[];function f(){b(new C)}R(l,"options.signal"),null===l||void 0===l||l.addEventListener("abort",f);var p,v=[],g=0;function y(e){b(e,0===--g)}function b(e,n){if(!e||a&&"ERR_STREAM_PREMATURE_CLOSE"!==a.code||(a=e),a||n){for(;v.length;)v.shift()(a);null===l||void 0===l||l.removeEventListener("abort",f),s.abort(),n&&(a||c.forEach((function(e){return e()})),d.nextTick(t,a,o))}}for(var w=function(){var t=e[x],a=x<e.length-1,s=x>0,l=a||!1!==(null===i||void 0===i?void 0:i.end),f=x===e.length-1;if(D(t)){var h=function(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&y(e)};if(l){var b=j(t,a,s),w=b.destroy,E=b.cleanup;v.push(w),O(t)&&f&&c.push(E)}t.on("error",h),O(t)&&f&&c.push((function(){t.removeListener("error",h)}))}if(0===x)if("function"===typeof t){if(p=t({signal:u}),!M(p))throw new S("Iterable, AsyncIterable or Stream","source",p)}else p=M(t)||F(t)?t:_.from(t);else if("function"===typeof t)if(p=B(p),p=t(p,{signal:u}),a){if(!M(p,!0))throw new S("AsyncIterable","transform[".concat(x-1,"]"),p)}else{r||(r=n(1520));var C=new r({objectMode:!0}),P=null===(A=p)||void 0===A?void 0:A.then;if("function"===typeof P)g++,P.call(p,(function(e){o=e,null!=e&&C.write(e),l&&C.end(),d.nextTick(y)}),(function(e){C.destroy(e),d.nextTick(y,e)}));else{if(!M(p,!0))throw new S("AsyncIterable or Promise","destination",p);g++,z(p,C,y,{end:l})}var I=j(p=C,!1,!0),R=I.destroy,L=I.cleanup;v.push(R),f&&c.push(L)}else if(D(t)){if(F(p)){g+=2;var N=function(e,t,n,r){var i=r.end,a=!1;t.on("close",(function(){a||n(new T)})),e.pipe(t,{end:i}),i?e.once("end",(function(){a=!0,t.end()})):n();return m(e,{readable:!0,writable:!1},(function(t){var r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)})),m(t,{readable:!1,writable:!0},n)}(p,t,y,{end:l});O(t)&&f&&c.push(N)}else{if(!M(p))throw new k("val",["Readable","Iterable","AsyncIterable"],p);g++,z(p,t,y,{end:l})}p=t}else p=_.from(t)},x=0;x<e.length;x++){var A;w()}return(null!==u&&void 0!==u&&u.aborted||null!==l&&void 0!==l&&l.aborted)&&d.nextTick(f),p}e.exports={pipelineImpl:Z,pipeline:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Z(t,g(function(e){return I(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(t)))}}},2527:function(e,t,n){var r=n(2122).default,i=n(7061).default,a=n(4704).default,o=n(6737).default,s=n(8186).default,u=n(1426),l=n(423),c=l.ArrayPrototypeIndexOf,d=l.NumberIsInteger,f=l.NumberIsNaN,h=l.NumberParseInt,p=l.ObjectDefineProperties,v=l.ObjectKeys,m=l.ObjectSetPrototypeOf,g=l.Promise,y=l.SafeSet,_=l.SymbolAsyncIterator,b=l.Symbol;e.exports=J,J.ReadableState=K;var w=n(7465).EventEmitter,x=n(794),k=x.Stream,S=x.prependListener,E=n(7081).Buffer,A=n(4199).addAbortSignal,T=n(6327),C=n(1205).debuglog("stream",(function(e){C=e})),P=n(1909),I=n(3936),R=n(1673),L=R.getHighWaterMark,M=R.getDefaultHighWaterMark,O=n(3708),F=O.aggregateTwoErrors,D=O.codes,N=D.ERR_INVALID_ARG_TYPE,j=D.ERR_METHOD_NOT_IMPLEMENTED,B=D.ERR_OUT_OF_RANGE,U=D.ERR_STREAM_PUSH_AFTER_EOF,z=D.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,V=n(7293).validateObject,Z=b("kPaused"),H=n(5948).StringDecoder,W=n(8970);m(J.prototype,k.prototype),m(J,k);var G=function(){},q=I.errorOrDestroy;function K(e,t,r){"boolean"!==typeof r&&(r=t instanceof n(2185)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.readableObjectMode)),this.highWaterMark=e?L(this,e,"readableHighWaterMark",r):M(!1),this.buffer=new P,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Z]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new H(e.encoding),this.encoding=e.encoding)}function J(e){var t=this;if(!(this instanceof J))return new J(e);var r=this instanceof n(2185);this._readableState=new K(e,this,r),e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.construct&&(this._construct=e.construct),e.signal&&!r&&A(e.signal,this)),k.call(this,e),I.construct(this,(function(){t._readableState.needReadable&&ne(t,t._readableState)}))}function X(e,t,n,r){C("readableAddChunk",t);var i,a=e._readableState;if(a.objectMode||("string"===typeof t?(n=n||a.defaultEncoding,a.encoding!==n&&(r&&a.encoding?t=E.from(t,n).toString(a.encoding):(t=E.from(t,n),n=""))):t instanceof E?n="":k._isUint8Array(t)?(t=k._uint8ArrayToBuffer(t),n=""):null!=t&&(i=new N("chunk",["string","Buffer","Uint8Array"],t))),i)q(e,i);else if(null===t)a.reading=!1,function(e,t){if(C("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?ee(e):(t.needReadable=!1,t.emittedReadable=!0,te(e))}(e,a);else if(a.objectMode||t&&t.length>0)if(r)if(a.endEmitted)q(e,new z);else{if(a.destroyed||a.errored)return!1;Y(e,a,t,!0)}else if(a.ended)q(e,new U);else{if(a.destroyed||a.errored)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?Y(e,a,t,!1):ne(e,a)):Y(e,a,t,!1)}else r||(a.reading=!1,ne(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function Y(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&ee(e)),ne(e,t)}J.prototype.destroy=I.destroy,J.prototype._undestroy=I.undestroy,J.prototype._destroy=function(e,t){t(e)},J.prototype[w.captureRejectionSymbol]=function(e){this.destroy(e)},J.prototype.push=function(e,t){return X(this,e,t,!1)},J.prototype.unshift=function(e,t){return X(this,e,t,!0)},J.prototype.isPaused=function(){var e=this._readableState;return!0===e[Z]||!1===e.flowing},J.prototype.setEncoding=function(e){var t=new H(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;var n,r=this._readableState.buffer,i="",o=a(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;i+=t.write(s)}}catch(u){o.e(u)}finally{o.f()}return r.clear(),""!==i&&r.push(i),this._readableState.length=i.length,this};var Q;function $(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:f(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function ee(e){var t=e._readableState;C("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(C("emitReadable",t.flowing),t.emittedReadable=!0,u.nextTick(te,e))}function te(e){var t=e._readableState;C("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,se(e)}function ne(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,u.nextTick(re,e,t))}function re(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(C("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function ie(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[Z]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function ae(e){C("readable nexttick read 0"),e.read(0)}function oe(e,t){C("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),se(e),t.flowing&&!t.reading&&e.read(0)}function se(e){var t=e._readableState;for(C("flow",t.flowing);t.flowing&&null!==e.read(););}function ue(e,t){"function"!==typeof e.read&&(e=J.wrap(e,{objectMode:!0}));var n=function(e,t){return le.apply(this,arguments)}(e,t);return n.stream=e,n}function le(){return(le=s(i().mark((function e(t,n){var r,a,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e){this===t?(r(),r=G):r=e},r=G,t.on("readable",a),u=T(t,{writable:!1},(function(e){s=e?F(s,e):null,r(),r=G})),e.prev=4;case 5:if(null===(l=t.destroyed?null:t.read())){e.next=12;break}return e.next=10,l;case 10:e.next=22;break;case 12:if(!s){e.next=16;break}throw s;case 16:if(null!==s){e.next=20;break}return e.abrupt("return");case 20:return e.next=22,o(new g(a));case 22:e.next=5;break;case 24:e.next=30;break;case 26:throw e.prev=26,e.t0=e.catch(4),s=F(s,e.t0);case 30:return e.prev=30,!s&&!1===(null===n||void 0===n?void 0:n.destroyOnReturn)||void 0!==s&&!t._readableState.autoDestroy?(t.off("readable",a),u()):I.destroyer(t,null),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[4,26,30,33]])})))).apply(this,arguments)}function ce(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function de(e){var t=e._readableState;C("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,u.nextTick(fe,t,e))}function fe(e,t){if(C("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)u.nextTick(he,t);else if(e.autoDestroy){var n=t._writableState;(!n||n.autoDestroy&&(n.finished||!1===n.writable))&&t.destroy()}}function he(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}function pe(){return void 0===Q&&(Q={}),Q}J.prototype.read=function(e){C("read",e),void 0===e?e=NaN:d(e)||(e=h(e,10));var t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new B("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return C("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?de(this):ee(this),null;if(0===(e=$(e,t))&&t.ended)return 0===t.length&&de(this),null;var r,i=t.needReadable;if(C("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&C("length less than watermark",i=!0),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)C("reading, ended or constructing",i=!1);else if(i){C("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(a){q(this,a)}t.sync=!1,t.reading||(e=$(n,t))}return null===(r=e>0?ce(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&de(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},J.prototype._read=function(e){throw new j("_read()")},J.prototype.pipe=function(e,t){var n=this,r=this._readableState;1===r.pipes.length&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new y(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(e),C("pipe count=%d opts=%j",r.pipes.length,t);var i,a=(!t||!1!==t.end)&&e!==u.stdout&&e!==u.stderr?s:v;function o(t,a){C("onunpipe"),t===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,function(){C("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),i&&e.removeListener("drain",i);e.removeListener("error",f),e.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",v),n.removeListener("data",d),l=!0,i&&r.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&i()}())}function s(){C("onend"),e.end()}r.endEmitted?u.nextTick(a):n.once("end",a),e.on("unpipe",o);var l=!1;function c(){l||(1===r.pipes.length&&r.pipes[0]===e?(C("false write response, pause",0),r.awaitDrainWriters=e,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(e)&&(C("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(e)),n.pause()),i||(i=function(e,t){return function(){var n=e._readableState;n.awaitDrainWriters===t?(C("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(C("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",i))}function d(t){C("ondata");var n=e.write(t);C("dest.write",n),!1===n&&c()}function f(t){if(C("onerror",t),v(),e.removeListener("error",f),0===e.listenerCount("error")){var n=e._writableState||e._readableState;n&&!n.errorEmitted?q(e,t):e.emit("error",t)}}function h(){e.removeListener("finish",p),v()}function p(){C("onfinish"),e.removeListener("close",h),v()}function v(){C("unpipe"),n.unpipe(e)}return n.on("data",d),S(e,"error",f),e.once("close",h),e.once("finish",p),e.emit("pipe",n),!0===e.writableNeedDrain?r.flowing&&c():r.flowing||(C("pipe resume"),n.resume()),e},J.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipes.length)return this;if(!e){var n=t.pipes;t.pipes=[],this.pause();for(var r=0;r<n.length;r++)n[r].emit("unpipe",this,{hasUnpiped:!1});return this}var i=c(t.pipes,e);return-1===i||(t.pipes.splice(i,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},J.prototype.on=function(e,t){var n=k.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,C("on readable",r.length,r.reading),r.length?ee(this):r.reading||u.nextTick(ae,this))),n},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(e,t){var n=k.prototype.removeListener.call(this,e,t);return"readable"===e&&u.nextTick(ie,this),n},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(e){var t=k.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||u.nextTick(ie,this),t},J.prototype.resume=function(){var e=this._readableState;return e.flowing||(C("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,u.nextTick(oe,e,t))}(this,e)),e[Z]=!1,this},J.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this},J.prototype.wrap=function(e){var t=this,n=!1;e.on("data",(function(r){!t.push(r)&&e.pause&&(n=!0,e.pause())})),e.on("end",(function(){t.push(null)})),e.on("error",(function(e){q(t,e)})),e.on("close",(function(){t.destroy()})),e.on("destroy",(function(){t.destroy()})),this._read=function(){n&&e.resume&&(n=!1,e.resume())};for(var r=v(e),i=1;i<r.length;i++){var a=r[i];void 0===this[a]&&"function"===typeof e[a]&&(this[a]=e[a].bind(e))}return this},J.prototype[_]=function(){return ue(this)},J.prototype.iterator=function(e){return void 0!==e&&V(e,"options"),ue(this,e)},p(J.prototype,{readable:{__proto__:null,get:function(){var e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set:function(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get:function(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get:function(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get:function(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get:function(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get:function(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get:function(){return!!this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get:function(){return!!this._readableState&&this._readableState.endEmitted}}}),p(K.prototype,{pipesCount:{__proto__:null,get:function(){return this.pipes.length}},paused:{__proto__:null,get:function(){return!1!==this[Z]},set:function(e){this[Z]=!!e}}}),J._fromList=ce,J.from=function(e,t){return W(J,e,t)},J.fromWeb=function(e,t){return pe().newStreamReadableFromReadableStream(e,t)},J.toWeb=function(e,t){return pe().newReadableStreamFromStreamReadable(e,t)},J.wrap=function(e,t){var n,i;return new J(r(r({objectMode:null===(n=null!==(i=e.readableObjectMode)&&void 0!==i?i:e.objectMode)||void 0===n||n},t),{},{destroy:function(t,n){I.destroyer(e,t),n(t)}})).wrap(e)}},1673:function(e,t,n){"use strict";var r=n(423),i=r.MathFloor,a=r.NumberIsInteger,o=n(3708).codes.ERR_INVALID_ARG_VALUE;function s(e){return e?16:16384}e.exports={getHighWaterMark:function(e,t,n,r){var u=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=u){if(!a(u)||u<0){var l=r?"options.".concat(n):"options.highWaterMark";throw new o(l,u)}return i(u)}return s(e.objectMode)},getDefaultHighWaterMark:s}},9994:function(e,t,n){"use strict";var r=n(2122).default,i=n(423),a=i.ObjectSetPrototypeOf,o=i.Symbol;e.exports=d;var s=n(3708).codes.ERR_METHOD_NOT_IMPLEMENTED,u=n(2185),l=n(1673).getHighWaterMark;a(d.prototype,u.prototype),a(d,u);var c=o("kCallback");function d(e){if(!(this instanceof d))return new d(e);var t=e?l(this,e,"readableHighWaterMark",!0):null;0===t&&(e=r(r({},e),{},{highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0})),u.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function f(e){var t=this;"function"!==typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((function(n,r){n?e?e(n):t.destroy(n):(null!=r&&t.push(r),t.push(null),e&&e())}))}function h(){this._final!==f&&f.call(this)}d.prototype._final=f,d.prototype._transform=function(e,t,n){throw new s("_transform()")},d.prototype._write=function(e,t,n){var r=this,i=this._readableState,a=this._writableState,o=i.length;this._transform(e,t,(function(e,t){e?n(e):(null!=t&&r.push(t),a.ended||o===i.length||i.length<i.highWaterMark?n():r[c]=n)}))},d.prototype._read=function(){if(this[c]){var e=this[c];this[c]=null,e()}}},7180:function(e,t,n){"use strict";var r=n(423),i=r.Symbol,a=r.SymbolAsyncIterator,o=r.SymbolIterator,s=i("kDestroyed"),u=i("kIsErrored"),l=i("kIsReadable"),c=i("kIsDisturbed");function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(!e||"function"!==typeof e.pipe||"function"!==typeof e.on||n&&("function"!==typeof e.pause||"function"!==typeof e.resume)||e._writableState&&!1===(null===(t=e._readableState)||void 0===t?void 0:t.readable)||e._writableState&&!e._readableState)}function f(e){var t;return!(!e||"function"!==typeof e.write||"function"!==typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function h(e){return e&&(e._readableState||e._writableState||"function"===typeof e.write&&"function"===typeof e.on||"function"===typeof e.pipe&&"function"===typeof e.on)}function p(e){if(!h(e))return null;var t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[s]||null!==r&&void 0!==r&&r.destroyed)}function v(e){if(!f(e))return null;if(!0===e.writableEnded)return!0;var t=e._writableState;return(null===t||void 0===t||!t.errored)&&("boolean"!==typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)}function m(e,t){if(!d(e))return null;var n=e._readableState;return(null===n||void 0===n||!n.errored)&&("boolean"!==typeof(null===n||void 0===n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function g(e){return e&&null!=e[l]?e[l]:"boolean"!==typeof(null===e||void 0===e?void 0:e.readable)?null:!p(e)&&(d(e)&&e.readable&&!m(e))}function y(e){return"boolean"!==typeof(null===e||void 0===e?void 0:e.writable)?null:!p(e)&&(f(e)&&e.writable&&!v(e))}function _(e){return"boolean"===typeof e._closed&&"boolean"===typeof e._defaultKeepAlive&&"boolean"===typeof e._removedConnection&&"boolean"===typeof e._removedContLen}function b(e){return"boolean"===typeof e._sent100&&_(e)}e.exports={kDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[c])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t,n,r,i,a,o,s,l,c,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(i=null!==(a=null!==(o=e[u])&&void 0!==o?o:e.readableErrored)&&void 0!==a?a:e.writableErrored)&&void 0!==i?i:null===(s=e._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==r?r:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:u,isReadable:g,kIsReadable:l,isClosed:function(e){if(!h(e))return null;if("boolean"===typeof e.closed)return e.closed;var t=e._writableState,n=e._readableState;return"boolean"===typeof(null===t||void 0===t?void 0:t.closed)||"boolean"===typeof(null===n||void 0===n?void 0:n.closed)?(null===t||void 0===t?void 0:t.closed)||(null===n||void 0===n?void 0:n.closed):"boolean"===typeof e._closed&&_(e)?e._closed:null},isDestroyed:p,isDuplexNodeStream:function(e){return!(!e||"function"!==typeof e.pipe||!e._readableState||"function"!==typeof e.on||"function"!==typeof e.write)},isFinished:function(e,t){return h(e)?!!p(e)||(!1===(null===t||void 0===t?void 0:t.readable)||!g(e))&&(!1===(null===t||void 0===t?void 0:t.writable)||!y(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"===typeof e[a]:!1===t?"function"===typeof e[o]:"function"===typeof e[a]||"function"===typeof e[o])},isReadableNodeStream:d,isReadableEnded:function(e){if(!d(e))return null;if(!0===e.readableEnded)return!0;var t=e._readableState;return!(!t||t.errored)&&("boolean"!==typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)},isReadableFinished:m,isReadableErrored:function(e){var t,n;return h(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:h,isWritable:y,isWritableNodeStream:f,isWritableEnded:v,isWritableFinished:function(e,t){if(!f(e))return null;if(!0===e.writableFinished)return!0;var n=e._writableState;return(null===n||void 0===n||!n.errored)&&("boolean"!==typeof(null===n||void 0===n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return h(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"===typeof e._consuming&&"boolean"===typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:b,willEmitClose:function(e){if(!h(e))return null;var t=e._writableState,n=e._readableState,r=t||n;return!r&&b(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)}}},9954:function(e,t,n){var r=n(1426),i=n(423),a=i.ArrayPrototypeSlice,o=i.Error,s=i.FunctionPrototypeSymbolHasInstance,u=i.ObjectDefineProperty,l=i.ObjectDefineProperties,c=i.ObjectSetPrototypeOf,d=i.StringPrototypeToLowerCase,f=i.Symbol,h=i.SymbolHasInstance;e.exports=N,N.WritableState=F;var p=n(7465).EventEmitter,v=n(794).Stream,m=n(7081).Buffer,g=n(3936),y=n(4199).addAbortSignal,_=n(1673),b=_.getHighWaterMark,w=_.getDefaultHighWaterMark,x=n(3708).codes,k=x.ERR_INVALID_ARG_TYPE,S=x.ERR_METHOD_NOT_IMPLEMENTED,E=x.ERR_MULTIPLE_CALLBACK,A=x.ERR_STREAM_CANNOT_PIPE,T=x.ERR_STREAM_DESTROYED,C=x.ERR_STREAM_ALREADY_FINISHED,P=x.ERR_STREAM_NULL_VALUES,I=x.ERR_STREAM_WRITE_AFTER_END,R=x.ERR_UNKNOWN_ENCODING,L=g.errorOrDestroy;function M(){}c(N.prototype,v.prototype),c(N,v);var O=f("kOnFinished");function F(e,t,r){"boolean"!==typeof r&&(r=t instanceof n(2185)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?b(this,e,"writableHighWaterMark",r):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=z.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,D(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[O]=[]}function D(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function N(e){var t=this,r=this instanceof n(2185);if(!r&&!s(N,this))return new N(e);this._writableState=new F(e,this,r),e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final),"function"===typeof e.construct&&(this._construct=e.construct),e.signal&&y(e.signal,this)),v.call(this,e),g.construct(this,(function(){var e=t._writableState;e.writing||W(t,e),K(t,e)}))}function j(e,t,n,i){var a,o=e._writableState;if("function"===typeof n)i=n,n=o.defaultEncoding;else{if(n){if("buffer"!==n&&!m.isEncoding(n))throw new R(n)}else n=o.defaultEncoding;"function"!==typeof i&&(i=M)}if(null===t)throw new P;if(!o.objectMode)if("string"===typeof t)!1!==o.decodeStrings&&(t=m.from(t,n),n="buffer");else if(t instanceof m)n="buffer";else{if(!v._isUint8Array(t))throw new k("chunk",["string","Buffer","Uint8Array"],t);t=v._uint8ArrayToBuffer(t),n="buffer"}return o.ending?a=new I:o.destroyed&&(a=new T("write")),a?(r.nextTick(i,a),L(e,a,!0),a):(o.pendingcb++,function(e,t,n,r,i){var a=t.objectMode?1:n.length;t.length+=a;var o=t.length<t.highWaterMark;o||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:i}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&i!==M&&(t.allNoop=!1)):(t.writelen=a,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1);return o&&!t.errored&&!t.destroyed}(e,o,t,n,i))}function B(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new T("write")):n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function U(e,t,n,r){--t.pendingcb,r(n),H(t),L(e,n)}function z(e,t){var n=e._writableState,i=n.sync,a=n.writecb;"function"===typeof a?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?r.nextTick(U,e,n,t,a):U(e,n,t,a)):(n.buffered.length>n.bufferedIndex&&W(e,n),i?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===a?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:a,stream:e,state:n},r.nextTick(V,n.afterWriteTickInfo)):Z(e,n,1,a))):L(e,new E)}function V(e){var t=e.stream,n=e.state,r=e.count,i=e.cb;return n.afterWriteTickInfo=null,Z(t,n,r,i)}function Z(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&H(t),K(e,t)}function H(e){if(!e.writing){for(var t=e.bufferedIndex;t<e.buffered.length;++t){var n,r=e.buffered[t],i=r.chunk,a=r.callback,o=e.objectMode?1:i.length;e.length-=o,a(null!==(n=e.errored)&&void 0!==n?n:new T("write"))}for(var s=e[O].splice(0),u=0;u<s.length;u++){var l;s[u](null!==(l=e.errored)&&void 0!==l?l:new T("end"))}D(e)}}function W(e,t){if(!(t.corked||t.bufferProcessing||t.destroyed)&&t.constructed){var n=t.buffered,r=t.bufferedIndex,i=t.objectMode,o=n.length-r;if(o){var s=r;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;var u=t.allNoop?M:function(e){for(var t=s;t<n.length;++t)n[t].callback(e)},l=t.allNoop&&0===s?n:a(n,s);l.allBuffers=t.allBuffers,B(e,t,!0,t.length,l,"",u),D(t)}else{do{var c=n[s],d=c.chunk,f=c.encoding,h=c.callback;n[s++]=null,B(e,t,!1,i?1:d.length,d,f,h)}while(s<n.length&&!t.writing);s===n.length?D(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}}}function G(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function q(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){var n=!1;function i(i){if(n)L(e,null!==i&&void 0!==i?i:E());else if(n=!0,t.pendingcb--,i){for(var a=t[O].splice(0),o=0;o<a.length;o++)a[o](i);L(e,i,t.sync)}else G(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(J,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(a){i(a)}t.sync=!1}(e,t)))}function K(e,t,n){G(t)&&(q(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((function(e,t){G(t)?J(e,t):t.pendingcb--}),e,t)):G(t)&&(t.pendingcb++,J(e,t))))}function J(e,t){t.pendingcb--,t.finished=!0;for(var n=t[O].splice(0),r=0;r<n.length;r++)n[r]();if(e.emit("finish"),t.autoDestroy){var i=e._readableState;(!i||i.autoDestroy&&(i.endEmitted||!1===i.readable))&&e.destroy()}}F.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},u(F.prototype,"bufferedRequestCount",{__proto__:null,get:function(){return this.buffered.length-this.bufferedIndex}}),u(N,h,{__proto__:null,value:function(e){return!!s(this,e)||this===N&&(e&&e._writableState instanceof F)}}),N.prototype.pipe=function(){L(this,new A)},N.prototype.write=function(e,t,n){return!0===j(this,e,t,n)},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||W(this,e))},N.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=d(e)),!m.isEncoding(e))throw new R(e);return this._writableState.defaultEncoding=e,this},N.prototype._write=function(e,t,n){if(!this._writev)throw new S("_write()");this._writev([{chunk:e,encoding:t}],n)},N.prototype._writev=null,N.prototype.end=function(e,t,n){var i,a=this._writableState;if("function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e){var s=j(this,e,t);s instanceof o&&(i=s)}return a.corked&&(a.corked=1,this.uncork()),i||(a.errored||a.ending?a.finished?i=new C("end"):a.destroyed&&(i=new T("end")):(a.ending=!0,K(this,a,!0),a.ended=!0)),"function"===typeof n&&(i||a.finished?r.nextTick(n,i):a[O].push(n)),this},l(N.prototype,{closed:{__proto__:null,get:function(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get:function(){return!!this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get:function(){var e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set:function(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get:function(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get:function(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get:function(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get:function(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get:function(){var e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get:function(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get:function(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get:function(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get:function(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});var X,Y=g.destroy;function Q(){return void 0===X&&(X={}),X}N.prototype.destroy=function(e,t){var n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[O].length)&&r.nextTick(H,n),Y.call(this,e,t),this},N.prototype._undestroy=g.undestroy,N.prototype._destroy=function(e,t){t(e)},N.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},N.fromWeb=function(e,t){return Q().newStreamWritableFromWritableStream(e,t)},N.toWeb=function(e){return Q().newWritableStreamFromStreamWritable(e)}},7293:function(e,t,n){"use strict";var r=n(423),i=r.ArrayIsArray,a=r.ArrayPrototypeIncludes,o=r.ArrayPrototypeJoin,s=r.ArrayPrototypeMap,u=r.NumberIsInteger,l=r.NumberIsNaN,c=r.NumberMAX_SAFE_INTEGER,d=r.NumberMIN_SAFE_INTEGER,f=r.NumberParseInt,h=r.ObjectPrototypeHasOwnProperty,p=r.RegExpPrototypeExec,v=r.String,m=r.StringPrototypeToUpperCase,g=r.StringPrototypeTrim,y=n(3708),_=y.hideStackFrames,b=y.codes,w=b.ERR_SOCKET_BAD_PORT,x=b.ERR_INVALID_ARG_TYPE,k=b.ERR_INVALID_ARG_VALUE,S=b.ERR_OUT_OF_RANGE,E=b.ERR_UNKNOWN_SIGNAL,A=n(1205).normalizeEncoding,T=n(1205).types,C=T.isAsyncFunction,P=T.isArrayBufferView,I={};var R=/^[0-7]+$/;var L=_((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c;if("number"!==typeof e)throw new x(t,"number",e);if(!u(e))throw new S(t,"an integer",e);if(e<n||e>r)throw new S(t,">= ".concat(n," && <= ").concat(r),e)})),M=_((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-2147483648,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2147483647;if("number"!==typeof e)throw new x(t,"number",e);if(!u(e))throw new S(t,"an integer",e);if(e<n||e>r)throw new S(t,">= ".concat(n," && <= ").concat(r),e)})),O=_((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"!==typeof e)throw new x(t,"number",e);if(!u(e))throw new S(t,"an integer",e);var r=n?1:0,i=4294967295;if(e<r||e>i)throw new S(t,">= ".concat(r," && <= ").concat(i),e)}));function F(e,t){if("string"!==typeof e)throw new x(t,"string",e)}var D=_((function(e,t,n){if(!a(n,e)){var r=o(s(n,(function(e){return"string"===typeof e?"'".concat(e,"'"):v(e)})),", ");throw new k(t,e,"must be one of: "+r)}}));function N(e,t,n){return null!=e&&h(e,t)?e[t]:n}var j=_((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=N(n,"allowArray",!1),a=N(n,"allowFunction",!1);if(!N(n,"nullable",!1)&&null===e||!r&&i(e)||"object"!==typeof e&&(!a||"function"!==typeof e))throw new x(t,"Object",e)})),B=_((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!i(e))throw new x(t,"Array",e);if(e.length<n){var r="must be longer than ".concat(n);throw new k(t,e,r)}}));var U=_((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffer";if(!P(e))throw new x(t,["Buffer","TypedArray","DataView"],e)}));var z=_((function(e,t){if(void 0!==e&&(null===e||"object"!==typeof e||!("aborted"in e)))throw new x(t,"AbortSignal",e)})),V=_((function(e,t){if("function"!==typeof e)throw new x(t,"Function",e)})),Z=_((function(e,t){if("function"!==typeof e||C(e))throw new x(t,"Function",e)})),H=_((function(e,t){if(void 0!==e)throw new x(t,"undefined",e)}));e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if("undefined"===typeof e&&(e=n),"string"===typeof e){if(null===p(R,e))throw new k(t,e,"must be a 32-bit unsigned integer or an octal string");e=f(e,8)}return O(e,t),e},validateArray:B,validateBoolean:function(e,t){if("boolean"!==typeof e)throw new x(t,"boolean",e)},validateBuffer:U,validateEncoding:function(e,t){var n=A(t),r=e.length;if("hex"===n&&r%2!==0)throw new k("encoding",t,"is invalid for data of length ".concat(r))},validateFunction:V,validateInt32:M,validateInteger:L,validateNumber:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("number"!==typeof e)throw new x(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&l(e))throw new S(t,"".concat(null!=n?">= ".concat(n):"").concat(null!=n&&null!=r?" && ":"").concat(null!=r?"<= ".concat(r):""),e)},validateObject:j,validateOneOf:D,validatePlainFunction:Z,validatePort:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Port",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"!==typeof e&&"string"!==typeof e||"string"===typeof e&&0===g(e).length||+e!==+e>>>0||e>65535||0===e&&!n)throw new w(t,e,n);return 0|e},validateSignalName:function(e){if(F(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"signal"),void 0===I[e]){if(void 0!==I[m(e)])throw new E(e+" (signals must use all capital letters)");throw new E(e)}},validateString:F,validateUint32:O,validateUndefined:H,validateUnion:function(e,t,n){if(!a(n,e))throw new x(t,"('".concat(o(n,"|"),"')"),e)},validateAbortSignal:z}},8898:function(e,t,n){"use strict";var r=n(7832),i=n(1868),a=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=a,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:function(){return i}}),e.exports.Stream=r.Stream,e.exports.default=e.exports},3708:function(e,t,n){"use strict";var r=n(4704).default,i=n(3496).default,a=n(6690).default,o=n(9728).default,s=n(1655).default,u=n(6389).default,l=n(861).default,c=n(1205),d=c.format,f=c.inspect,h=c.AggregateError,p=globalThis.AggregateError||h,v=Symbol("kIsNodeError"),m=["string","function","number","object","Function","Object","boolean","bigint","symbol"],g=/^([A-Z][a-z0-9]*)+$/,y={};function _(e,t){if(!e)throw new y.ERR_INTERNAL_ASSERTION(t)}function b(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function w(e,t,n){n||(n=Error);var r=function(n){s(i,n);var r=u(i);function i(){a(this,i);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return r.call(this,function(e,t,n){if("function"===typeof t)return _(t.length<=n.length,"Code: ".concat(e,"; The provided arguments length (").concat(n.length,") does not match the required ones (").concat(t.length,").")),t.apply(void 0,l(n));var r=(t.match(/%[dfijoOs]/g)||[]).length;return _(r===n.length,"Code: ".concat(e,"; The provided arguments length (").concat(n.length,") does not match the required ones (").concat(r,").")),0===n.length?t:d.apply(void 0,[t].concat(l(n)))}(e,t,o))}return o(i,[{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),i}(n);Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[v]=!0,y[e]=r}function x(e){var t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}var k=function(e){s(n,e);var t=u(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(a(this,n),void 0!==i&&"object"!==typeof i)throw new y.ERR_INVALID_ARG_TYPE("options","Object",i);return(e=t.call(this,r,i)).code="ABORT_ERR",e.name="AbortError",e}return o(n)}(i(Error));w("ERR_ASSERTION","%s",Error),w("ERR_INVALID_ARG_TYPE",(function(e,t,n){_("string"===typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);var i="The ";e.endsWith(" argument")?i+="".concat(e," "):i+='"'.concat(e,'" ').concat(e.includes(".")?"property":"argument"," "),i+="must be ";var a,o=[],s=[],u=[],l=r(t);try{for(l.s();!(a=l.n()).done;){var c=a.value;_("string"===typeof c,"All expected entries have to be of type string"),m.includes(c)?o.push(c.toLowerCase()):g.test(c)?s.push(c):(_("object"!==c,'The value "object" should be written as "Object"'),u.push(c))}}catch(x){l.e(x)}finally{l.f()}if(s.length>0){var d=o.indexOf("object");-1!==d&&(o.splice(o,d,1),s.push("Object"))}if(o.length>0){switch(o.length){case 1:i+="of type ".concat(o[0]);break;case 2:i+="one of type ".concat(o[0]," or ").concat(o[1]);break;default:var h=o.pop();i+="one of type ".concat(o.join(", "),", or ").concat(h)}(s.length>0||u.length>0)&&(i+=" or ")}if(s.length>0){switch(s.length){case 1:i+="an instance of ".concat(s[0]);break;case 2:i+="an instance of ".concat(s[0]," or ").concat(s[1]);break;default:var p=s.pop();i+="an instance of ".concat(s.join(", "),", or ").concat(p)}u.length>0&&(i+=" or ")}switch(u.length){case 0:break;case 1:u[0].toLowerCase()!==u[0]&&(i+="an "),i+="".concat(u[0]);break;case 2:i+="one of ".concat(u[0]," or ").concat(u[1]);break;default:var v=u.pop();i+="one of ".concat(u.join(", "),", or ").concat(v)}if(null==n)i+=". Received ".concat(n);else if("function"===typeof n&&n.name)i+=". Received function ".concat(n.name);else if("object"===typeof n){var y;if(null!==(y=n.constructor)&&void 0!==y&&y.name)i+=". Received an instance of ".concat(n.constructor.name);else{var b=f(n,{depth:-1});i+=". Received ".concat(b)}}else{var w=f(n,{colors:!1});w.length>25&&(w="".concat(w.slice(0,25),"...")),i+=". Received type ".concat(typeof n," (").concat(w,")")}return i}),TypeError),w("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid",r=f(t);r.length>128&&(r=r.slice(0,128)+"...");var i=e.includes(".")?"property":"argument";return"The ".concat(i," '").concat(e,"' ").concat(n,". Received ").concat(r)}),TypeError),w("ERR_INVALID_RETURN_VALUE",(function(e,t,n){var r,i=null!==n&&void 0!==n&&null!==(r=n.constructor)&&void 0!==r&&r.name?"instance of ".concat(n.constructor.name):"type ".concat(typeof n);return"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),w("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;_(t.length>0,"At least one arg needs to be specified");var i=t.length;switch(t=(Array.isArray(t)?t:[t]).map((function(e){return'"'.concat(e,'"')})).join(" or "),i){case 1:r+="The ".concat(t[0]," argument");break;case 2:r+="The ".concat(t[0]," and ").concat(t[1]," arguments");break;default:var a=t.pop();r+="The ".concat(t.join(", "),", and ").concat(a," arguments")}return"".concat(r," must be specified")}),TypeError),w("ERR_OUT_OF_RANGE",(function(e,t,n){var r;return _(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?r=b(String(n)):"bigint"===typeof n?(r=String(n),(n>Math.pow(2n,32n)||n<-Math.pow(2n,32n))&&(r=b(r)),r+="n"):r=f(n),'The value of "'.concat(e,'" is out of range. It must be ').concat(t,". Received ").concat(r)}),RangeError),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),w("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),w("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),w("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),w("ERR_STREAM_WRITE_AFTER_END","write after end",Error),w("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:k,aggregateTwoErrors:x((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;var n=new p([t,e],t.message);return n.code=t.code,n}return e||t})),hideStackFrames:x,codes:y}},423:function(e){"use strict";e.exports={ArrayIsArray:function(e){return Array.isArray(e)},ArrayPrototypeIncludes:function(e,t){return e.includes(t)},ArrayPrototypeIndexOf:function(e,t){return e.indexOf(t)},ArrayPrototypeJoin:function(e,t){return e.join(t)},ArrayPrototypeMap:function(e,t){return e.map(t)},ArrayPrototypePop:function(e,t){return e.pop(t)},ArrayPrototypePush:function(e,t){return e.push(t)},ArrayPrototypeSlice:function(e,t,n){return e.slice(t,n)},Error:Error,FunctionPrototypeCall:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.call.apply(e,[t].concat(r))},FunctionPrototypeSymbolHasInstance:function(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:function(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty:function(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor:function(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys:function(e){return Object.keys(e)},ObjectSetPrototypeOf:function(e,t){return Object.setPrototypeOf(e,t)},Promise:Promise,PromisePrototypeCatch:function(e,t){return e.catch(t)},PromisePrototypeThen:function(e,t,n){return e.then(t,n)},PromiseReject:function(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest:function(e,t){return e.test(t)},SafeSet:Set,String:String,StringPrototypeSlice:function(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase:function(e){return e.toLowerCase()},StringPrototypeToUpperCase:function(e){return e.toUpperCase()},StringPrototypeTrim:function(e){return e.trim()},Symbol:Symbol,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:function(e,t,n){return e.set(t,n)},Uint8Array:Uint8Array}},1205:function(e,t,n){"use strict";var r=n(9728).default,i=n(6690).default,a=n(1655).default,o=n(6389).default,s=n(3496).default,u=n(7061).default,l=n(7156).default,c=n(7081),d=Object.getPrototypeOf(l(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).constructor,f=globalThis.Blob||c.Blob,h="undefined"!==typeof f?function(e){return e instanceof f}:function(e){return!1},p=function(e){a(n,e);var t=o(n);function n(e){var r;if(i(this,n),!Array.isArray(e))throw new TypeError("Expected input to be an Array, got ".concat(typeof e));for(var a="",o=0;o<e.length;o++)a+="    ".concat(e[o].stack,"\n");return(r=t.call(this,a)).name="AggregateError",r.errors=e,r}return r(n)}(s(Error));e.exports={AggregateError:p,kEmptyObject:Object.freeze({}),once:function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}},createDeferredPromise:function(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),resolve:e,reject:t}},promisify:function(e){return new Promise((function(t,n){e((function(e){if(e)return n(e);for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.apply(void 0,i)}))}))},debuglog:function(){return function(){}},format:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.replace(/%([sdifj])/g,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0];var i=t[1],a=n.shift();if("f"===i)return a.toFixed(6);if("j"===i)return JSON.stringify(a);if("s"===i&&"object"===typeof a){var o=a.constructor!==Object?a.constructor.name:"";return"".concat(o," {}").trim()}return a.toString()}))},inspect:function(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return'"'.concat(e,'"');if(!e.includes("`")&&!e.includes("${"))return"`".concat(e,"`")}return"'".concat(e,"'");case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return"".concat(String(e),"n");case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:function(e){return e instanceof d},isArrayBufferView:function(e){return ArrayBuffer.isView(e)}},isBlob:h},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},7832:function(e,t,n){var r=n(4704).default,i=n(7081).Buffer,a=n(423),o=a.ObjectDefineProperty,s=a.ObjectKeys,u=a.ReflectApply,l=n(1205).promisify.custom,c=n(3648),d=c.streamReturningOperators,f=c.promiseReturningOperators,h=n(3708).codes.ERR_ILLEGAL_CONSTRUCTOR,p=n(51),v=n(5937).pipeline,m=n(3936).destroyer,g=n(6327),y=n(1868),_=n(7180),b=e.exports=n(794).Stream;b.isDisturbed=_.isDisturbed,b.isErrored=_.isErrored,b.isReadable=_.isReadable,b.Readable=n(2527);var w,x=r(s(d));try{var k=function(){var e=w.value,t=d[e];function n(){if(this instanceof n?this.constructor:void 0)throw h();for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return b.Readable.from(u(t,this,r))}o(n,"name",{__proto__:null,value:t.name}),o(n,"length",{__proto__:null,value:t.length}),o(b.Readable.prototype,e,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})};for(x.s();!(w=x.n()).done;)k()}catch(C){x.e(C)}finally{x.f()}var S,E=r(s(f));try{var A=function(){var e=S.value,t=f[e];function n(){if(this instanceof n?this.constructor:void 0)throw h();for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return u(t,this,r)}o(n,"name",{__proto__:null,value:t.name}),o(n,"length",{__proto__:null,value:t.length}),o(b.Readable.prototype,e,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})};for(E.s();!(S=E.n()).done;)A()}catch(C){E.e(C)}finally{E.f()}b.Writable=n(9954),b.Duplex=n(2185),b.Transform=n(9994),b.PassThrough=n(1520),b.pipeline=v;var T=n(4199).addAbortSignal;b.addAbortSignal=T,b.finished=g,b.destroy=m,b.compose=p,o(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:function(){return y}}),o(v,l,{__proto__:null,enumerable:!0,get:function(){return y.pipeline}}),o(g,l,{__proto__:null,enumerable:!0,get:function(){return y.finished}}),b.Stream=b,b._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return i.from(e.buffer,e.byteOffset,e.byteLength)}},1868:function(e,t,n){"use strict";var r=n(423),i=r.ArrayPrototypePop,a=r.Promise,o=n(7180),s=o.isIterable,u=o.isNodeStream,l=n(5937).pipelineImpl,c=n(6327).finished;e.exports={finished:c,pipeline:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new a((function(e,n){var r,a,o=t[t.length-1];if(o&&"object"===typeof o&&!u(o)&&!s(o)){var c=i(t);r=c.signal,a=c.end}l(t,(function(t,r){t?n(t):e(r)}),{signal:r,end:a})}))}}},1975:function(e,t){"use strict";var n="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r="http://www.w3.org/2001/XMLSchema#",i="http://www.w3.org/2000/10/swap/";t.Z={xsd:{decimal:"".concat(r,"decimal"),boolean:"".concat(r,"boolean"),double:"".concat(r,"double"),integer:"".concat(r,"integer"),string:"".concat(r,"string")},rdf:{type:"".concat(n,"type"),nil:"".concat(n,"nil"),first:"".concat(n,"first"),rest:"".concat(n,"rest"),langString:"".concat(n,"langString")},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:"".concat(i,"reify#forSome"),forAll:"".concat(i,"reify#forAll")},log:{implies:"".concat(i,"log#implies")}}},1645:function(e,t,n){"use strict";n.d(t,{DP:function(){return w},LQ:function(){return S},PL:function(){return A},Rh:function(){return y},Xy:function(){return k},_w:function(){return x},dW:function(){return E},jJ:function(){return _},lD:function(){return A},t$:function(){return b}});var r,i=n(2963),a=n(7326),o=n(136),s=n(9388),u=n(5671),l=n(3144),c=n(1975),d=n(2065),f=c.Z.rdf,h=c.Z.xsd,p=0,v=/^"(.*".*)(?="[^"]*$)/,m=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,g={namedNode:function(e){return new _(e)},blankNode:function(e){return new w(e||"n3-".concat(p++))},variable:function(e){return new x(e)},literal:function(e,t){if("string"===typeof t)return new b('"'.concat(e,'"@').concat(t.toLowerCase()));var n=t?t.value:"";""===n&&("boolean"===typeof e?n=h.boolean:"number"===typeof e&&(Number.isFinite(e)?n=Number.isInteger(e)?h.integer:h.double:(n=h.double,Number.isNaN(e)||(e=e>0?"INF":"-INF"))));return""===n||n===h.string?new b('"'.concat(e,'"')):new b('"'.concat(e,'"^^').concat(n))},defaultGraph:function(){return r},quad:P,triple:P};t.ZP=g;var y=function(){function e(t){(0,u.Z)(this,e),this.id=t}return(0,l.Z)(e,[{key:"value",get:function(){return this.id}},{key:"equals",value:function(t){return t instanceof e?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}},{key:"hashCode",value:function(){return 0}},{key:"toJSON",value:function(){return{termType:this.termType,value:this.value}}}]),e}(),_=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"termType",get:function(){return"NamedNode"}}]),n}(y),b=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"termType",get:function(){return"Literal"}},{key:"value",get:function(){return this.id.substring(1,this.id.lastIndexOf('"'))}},{key:"language",get:function(){var e=this.id,t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}},{key:"datatype",get:function(){return new _(this.datatypeString)}},{key:"datatypeString",get:function(){var e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return"^"===n?e.substr(t+2):"@"!==n?h.string:f.langString}},{key:"equals",value:function(e){return e instanceof n?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}},{key:"toJSON",value:function(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}]),n}(y),w=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,"_:".concat(e))}return(0,l.Z)(n,[{key:"termType",get:function(){return"BlankNode"}},{key:"value",get:function(){return this.id.substr(2)}}]),n}(y),x=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,"?".concat(e))}return(0,l.Z)(n,[{key:"termType",get:function(){return"Variable"}},{key:"value",get:function(){return this.id.substr(1)}}]),n}(y),k=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this,""),(0,i.Z)(e,r||(0,a.Z)(e))}return(0,l.Z)(n,[{key:"termType",get:function(){return"DefaultGraph"}},{key:"equals",value:function(e){return this===e||!!e&&this.termType===e.termType}}]),n}(y);function S(e,t){if(t=t||g,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===g)return new b(e);if('"'===e[e.length-1])return t.literal(e.substr(1,e.length-2));var n=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,n-1),"@"===e[n+1]?e.substr(n+2):t.namedNode(e.substr(n+3)));case"<":var r=m.exec(e);return t.quad(S(C(r[1]),t),S(C(r[2]),t),S(C(r[3]),t),r[4]&&S(C(r[4]),t));default:return t.namedNode(e)}}function E(e){if("string"===typeof e)return e;if(e instanceof y&&"Quad"!==e.termType)return e.id;if(!e)return r.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return"_:".concat(e.value);case"Variable":return"?".concat(e.value);case"DefaultGraph":return"";case"Literal":return'"'.concat(e.value,'"').concat(e.language?"@".concat(e.language):e.datatype&&e.datatype.value!==h.string?"^^".concat(e.datatype.value):"");case"Quad":return"<<".concat(T(E(e.subject))," ").concat(T(E(e.predicate))," ").concat(T(E(e.object))).concat((0,d.isDefaultGraph)(e.graph)?"":" ".concat(E(e.graph)),">>");default:throw new Error("Unexpected termType: ".concat(e.termType))}}r=new k;var A=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,a,o){var s;return(0,u.Z)(this,n),(s=t.call(this,""))._subject=e,s._predicate=i,s._object=a,s._graph=o||r,s}return(0,l.Z)(n,[{key:"termType",get:function(){return"Quad"}},{key:"subject",get:function(){return this._subject}},{key:"predicate",get:function(){return this._predicate}},{key:"object",get:function(){return this._object}},{key:"graph",get:function(){return this._graph}},{key:"toJSON",value:function(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}},{key:"equals",value:function(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}]),n}(y);function T(e){return e.replace(v,(function(e,t){return'"'.concat(t.replace(/"/g,'""'))}))}function C(e){return e.replace(v,(function(e,t){return'"'.concat(t.replace(/""/g,'"'))}))}function P(e,t,n,r){return new A(e,t,n,r)}},8678:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(5671),i=n(3144),a=n(1975),o=n(4183),s=n.n(o),u=a.Z.xsd,l=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,c={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},d=/[\x00-\x20<>\\"\{\}\|\^\`]/,f={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},h=/$0^/,p=function(){function e(t){if((0,r.Z)(this,e),this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode)for(var n in this._n3Mode=!1,this)!(n in f)&&this[n]instanceof RegExp&&(this[n]=h);else this._n3Mode=!1!==t.n3;this._comments=!!t.comments,this._literalClosingPos=0}return(0,i.Z)(e,[{key:"_tokenizeToEnd",value:function(e,t){for(var n=this._input,r=n.length;;){for(var i=void 0,a=void 0;i=this._newline.exec(n);)this._comments&&(a=this._comment.exec(i[0]))&&b("comment",a[1],"",this._line,i[0].length),n=n.substr(i[0].length,n.length),r=n.length,this._line++;if(!i&&(i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&(this._comments&&(a=this._comment.exec(n))&&b("comment",a[1],"",this._line,n.length),n=null,b("eof","","",this._line,0)),this._input=n;var o=this._line,s=n[0],l="",c="",f="",h=null,p=0,v=!1;switch(s){case"^":if(n.length<3)break;if("^"!==n[1]){this._n3Mode&&(p=1,l="^");break}if(this._previousMarker="^^","<"!==(n=n.substr(2))[0]){v=!0;break}case"<":if(h=this._unescapedIri.exec(n))l="IRI",c=h[1];else if(h=this._iri.exec(n)){if(null===(c=this._unescape(h[1]))||d.test(c))return w(this);l="IRI"}else n.length>1&&"<"===n[1]?(l="<<",p=2):this._n3Mode&&n.length>1&&"="===n[1]&&(l="inverse",p=2,c=">");break;case">":n.length>1&&">"===n[1]&&(l=">>",p=2);break;case"_":((h=this._blank.exec(n))||t&&(h=this._blank.exec("".concat(n," "))))&&(l="blank",f="_",c=h[1]);break;case'"':if(h=this._simpleQuotedString.exec(n))c=h[1];else{var m=this._parseLiteral(n);if(c=m.value,p=m.matchLength,null===c)return w(this)}null===h&&0===p||(l="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(h=this._simpleApostropheString.exec(n))c=h[1];else{var g=this._parseLiteral(n);if(c=g.value,p=g.matchLength,null===c)return w(this)}null===h&&0===p||(l="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(h=this._variable.exec(n))&&(l="var",c=h[0]);break;case"@":"literal"===this._previousMarker&&(h=this._langcode.exec(n))?(l="langcode",c=h[1]):(h=this._keyword.exec(n))&&(l=h[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){l=".",p=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(n)||t&&(h=this._number.exec("".concat(n," "))))&&(l="literal",c=h[0],f="string"===typeof h[1]?u.double:"string"===typeof h[2]?u.decimal:u.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(n))?l=h[0].toUpperCase():v=!0;break;case"f":case"t":(h=this._boolean.exec(n))?(l="literal",c=h[0],f=u.boolean):v=!0;break;case"a":(h=this._shortPredicates.exec(n))?(l="abbreviation",c="a"):v=!0;break;case"=":this._n3Mode&&n.length>1&&(l="abbreviation",">"!==n[1]?(p=1,c="="):(p=2,c=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(p=1,l=s);break;default:v=!0}if(v&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(h=this._prefix.exec(n))?((h=this._prefixed.exec(n))||t&&(h=this._prefixed.exec("".concat(n," "))))&&(l="prefixed",f=h[1]||"",c=this._unescape(h[2])):(l="prefix",c=h[1]||"")),"^^"===this._previousMarker)switch(l){case"prefixed":l="type";break;case"IRI":l="typeIRI";break;default:l=""}if(!l)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?w(this):this._input=n;var y=p||h[0].length,_=b(l,c,f,o,y);this.previousToken=_,this._previousMarker=l,n=n.substr(y,n.length)}function b(t,i,a,o,s){var u=n?r-n.length:r,l={type:t,value:i,prefix:a,line:o,start:u,end:u+s};return e(null,l),l}function w(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}}},{key:"_unescape",value:function(e){var t=!1,n=e.replace(l,(function(e,n,r,i){if("string"===typeof n)return String.fromCharCode(Number.parseInt(n,16));if("string"===typeof r){var a=Number.parseInt(r,16);return a<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((a-=65536)>>10),56320+(1023&a))}return i in c?c[i]:(t=!0,"")}));return t?null:n}},{key:"_parseLiteral",value:function(e){if(e.length>=3){for(var t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length,r=Math.max(this._literalClosingPos,n);(r=e.indexOf(t,r))>0;){for(var i=0;"\\"===e[r-i-1];)i++;if(i%2===0){var a=e.substring(n,r),o=a.split(/\r\n|\r|\n/).length-1,s=r+n;if(1===n&&0!==o||3===n&&this._lineMode)break;return this._line+=o,{value:this._unescape(a),matchLength:s}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}},{key:"_syntaxError",value:function(e){this._input=null;var t=new Error('Unexpected "'.concat(e,'" on line ').concat(this._line,"."));return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}},{key:"_readStartingBom",value:function(e){return e.startsWith("\ufeff")?e.substr(1):e}},{key:"tokenize",value:function(e,t){var n=this;if(this._line=1,"string"===typeof e){if(this._input=this._readStartingBom(e),"function"!==typeof t){var r,i=[];if(this._tokenizeToEnd((function(e,t){return e?r=e:i.push(t)}),!0),r)throw r;return i}s()((function(){return n._tokenizeToEnd(t,!0)}))}else this._pendingBuffer=null,"function"===typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",(function(e){null!==n._input&&0!==e.length&&(n._pendingBuffer&&(e=Buffer.concat([n._pendingBuffer,e]),n._pendingBuffer=null),128&e[e.length-1]?n._pendingBuffer=e:("undefined"===typeof n._input?n._input=n._readStartingBom("string"===typeof e?e:e.toString()):n._input+=e,n._tokenizeToEnd(t,!1)))})),e.on("end",(function(){"string"===typeof n._input&&n._tokenizeToEnd(t,!0)})),e.on("error",t)}}]),e}()},1543:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5671),i=n(3144),a=n(8678),o=n(1645),s=n(1975),u=0,l=function(){function e(t){(0,r.Z)(this,e),this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&d(this,t.factory);var n="string"===typeof t.format?t.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),o=/trig/.test(n),s=/triple/.test(n),u=/quad/.test(n),l=this._n3Mode=/n3/.test(n),c=s||u;(this._supportsNamedGraphs=!(i||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||o||s||l),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=function(e){return null}),this._blankNodePrefix="string"!==typeof t.blankNodePrefix?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new a.Z({lineMode:c,n3:l}),this._explicitQuantifiers=!!t.explicitQuantifiers}return(0,i.Z)(e,[{key:"_setBase",value:function(e){if(e){var t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}},{key:"_saveContext",value:function(e,t,n,r,i){var a=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:r,object:i,graph:t,inverse:!!a&&this._inversePredicate,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?"".concat(this._graph.id.substr(2),"."):".",this._quantified=Object.create(this._quantified))}},{key:"_restoreContext",value:function(e,t){var n=this._contextStack.pop();if(!n||n.type!==e)return this._error("Unexpected ".concat(t.type),t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}},{key:"_readInTopContext",value:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}},{key:"_readEntity",value:function(e,t){var n;switch(e.type){case"IRI":case"typeIRI":var r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);n=this._namedNode(r);break;case"type":case"prefixed":var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'.concat(e.prefix,':"'),e);n=this._namedNode(i+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error("Expected entity but got ".concat(e.type),e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}},{key:"_readSubject",value:function(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}},{key:"_readPredicate",value:function(e){var t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected ".concat(t),e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}},{key:"_readObject",value:function(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}},{key:"_readPredicateOrNamedGraph",value:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}},{key:"_readGraph",value:function(e){return"{"!==e.type?this._error("Expected graph but got ".concat(e.type),e):(this._graph=this._subject,this._subject=null,this._readSubject)}},{key:"_readBlankNodeHead",value:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}},{key:"_readBlankNodeTail",value:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);var t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}},{key:"_readPredicateAfterBlank",value:function(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}},{key:"_readListItem",value:function(e){var t=null,n=null,r=this._readListItem,i=this._subject,a=this._contextStack,o=a[a.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==a.length&&"list"===a[a.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===n&&(this._subject=n=this._blankNode()),null===i?null===o.predicate?o.subject=n:o.object=n:this._emit(i,this.RDF_REST,n,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return r}},{key:"_readDataTypeOrLang",value:function(e){return this._completeObjectLiteral(e,!1)}},{key:"_readListItemDataTypeOrLang",value:function(e){return this._completeObjectLiteral(e,!0)}},{key:"_completeLiteral",value:function(e){var t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":var n=this._readEntity(e);if(void 0===n)return;t=this._literal(this._literalValue,n),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}},{key:"_completeSubjectLiteral",value:function(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}},{key:"_completeObjectLiteral",value:function(e,t){var n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===n.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}},{key:"_readFormulaTail",value:function(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}},{key:"_readPunctuation",value:function(e){var t,n=this._graph,r=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(n=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'.concat(this._object.id,'"'),e)}if(null!==r){var a=this._predicate,o=this._object;i?this._emit(o,a,r,n):this._emit(r,a,o,n)}return t}},{key:"_readBlankNodePunctuation",value:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'.concat(this._object.id,'"'),e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}},{key:"_readQuadPunctuation",value:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}},{key:"_readPrefix",value:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}},{key:"_readPrefixIRI",value:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'.concat(this._prefix,':"'),e);var t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}},{key:"_readBaseIRI",value:function(e){var t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}},{key:"_readNamedGraphLabel",value:function(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}},{key:"_readNamedGraphBlankLabel",value:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}},{key:"_readDeclarationPunctuation",value:function(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}},{key:"_readQuantifierList",value:function(e){var t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error("Unexpected ".concat(e.type),e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}},{key:"_readQuantifierPunctuation",value:function(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}},{key:"_getPathReader",value:function(e){return this._afterPath=e,this._readPath}},{key:"_readPath",value:function(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var t=this._contextStack,n=t.length&&t[t.length-1];if(n&&"item"===n.type){var r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}},{key:"_readForwardPath",value:function(e){var t,n,r=this._blankNode();if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,n,r,this._graph),this._readPath}},{key:"_readBackwardPath",value:function(e){var t,n,r=this._blankNode();if(void 0!==(t=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(r,t,n,this._graph),this._readPath}},{key:"_readRDFStarTailOrGraph",value:function(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error('Expected >> to follow "'.concat(this._object.id,'"'),e):this._readRDFStarTail(e)}},{key:"_readRDFStarTail",value:function(e){if(">>"!==e.type)return this._error("Expected >> but got ".concat(e.type),e);var t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}},{key:"_getContextEndReader",value:function(){var e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}},{key:"_emit",value:function(e,t,n,r){this._callback(null,this._quad(e,t,n,r||this.DEFAULTGRAPH))}},{key:"_error",value:function(e,t){var n=new Error("".concat(e," on line ").concat(t.line,"."));n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=c}},{key:"_resolveIRI",value:function(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}},{key:"_resolveRelativeIRI",value:function(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}},{key:"_removeDotSegments",value:function(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;for(var t=e.length,n="",r=-1,i=-1,a=0,o="/";r<t;){switch(o){case":":if(i<0&&"/"===e[++r]&&"/"===e[++r])for(;(i=r+1)<t&&"/"!==e[i];)r=i;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(o=e[1+ ++r]){case"/":n+=e.substring(a,r-1),a=r+1;break;case void 0:case"?":case"#":return n+e.substring(a,r)+e.substr(r+1);case".":if(void 0===(o=e[1+ ++r])||"/"===o||"?"===o||"#"===o){if((a=(n+=e.substring(a,r-2)).lastIndexOf("/"))>=i&&(n=n.substr(0,a)),"/"!==o)return"".concat(n,"/").concat(e.substr(r+1));a=r+1}}}o=e[++r]}return n+e.substring(a)}},{key:"parse",value:function(e,t,n){var r=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):"b".concat(u++,"_"),this._prefixCallback=n||c,this._inversePredicate=!1,this._quantified=Object.create(null),!t){var i,a=[];if(this._callback=function(e,t){e?i=e:t&&a.push(t)},this._lexer.tokenize(e).every((function(e){return r._readCallback=r._readCallback(e)})),i)throw i;return a}this._callback=t,this._lexer.tokenize(e,(function(e,t){null!==e?(r._callback(e),r._callback=c):r._readCallback&&(r._readCallback=r._readCallback(t))}))}}],[{key:"_resetBlankNodePrefix",value:function(){u=0}}]),e}();function c(){}function d(e,t){var n=t.namedNode;e._namedNode=n,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=n(s.Z.rdf.first),e.RDF_REST=n(s.Z.rdf.rest),e.RDF_NIL=n(s.Z.rdf.nil),e.N3_FORALL=n(s.Z.r.forAll),e.N3_FORSOME=n(s.Z.r.forSome),e.ABBREVIATIONS={a:n(s.Z.rdf.type),"=":n(s.Z.owl.sameAs),">":n(s.Z.log.implies)},e.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}d(l.prototype,o.ZP)},2065:function(e,t,n){"use strict";n.r(t),n.d(t,{inDefaultGraph:function(){return l},isBlankNode:function(){return a},isDefaultGraph:function(){return u},isLiteral:function(){return o},isNamedNode:function(){return i},isVariable:function(){return s},prefix:function(){return c},prefixes:function(){return d}});var r=n(1645);function i(e){return!!e&&"NamedNode"===e.termType}function a(e){return!!e&&"BlankNode"===e.termType}function o(e){return!!e&&"Literal"===e.termType}function s(e){return!!e&&"Variable"===e.termType}function u(e){return!!e&&"DefaultGraph"===e.termType}function l(e){return u(e.graph)}function c(e,t){return d({"":e.value||e},t)("")}function d(e,t){var n=Object.create(null);for(var i in e)a(i,e[i]);function a(e,r){if("string"===typeof r){var i=Object.create(null);n[e]=function(e){return i[e]||(i[e]=t.namedNode(r+e))}}else if(!(e in n))throw new Error("Unknown prefix: ".concat(e));return n[e]}return t=t||r.ZP,a}},5560:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(5671),i=n(3144),a=n(136),o=n(9388),s=n(1975),u=n(1645),l=n(2065),c=u.ZP.defaultGraph(),d=s.Z.rdf,f=s.Z.xsd,h=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,p=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,v={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},m=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"equals",value:function(){return!1}}]),n}(u.Rh),g=function(){function e(t,n){if((0,r.Z)(this,e),this._prefixRegex=/$0^/,t&&"function"!==typeof t.write&&(n=t,t=null),n=n||{},this._lists=n.lists,t)this._outputStream=t,this._endStream=void 0===n.end||!!n.end;else{var i="";this._outputStream={write:function(e,t,n){i+=e,n&&n()},end:function(e){e&&e(null,i)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=c,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseMatcher=new RegExp("^".concat(_(n.baseIRI)).concat(n.baseIRI.endsWith("/")?"":"[#?]")),this._baseLength=n.baseIRI.length))}return(0,i.Z)(e,[{key:"_inDefaultGraph",get:function(){return c.equals(this._graph)}},{key:"_write",value:function(e,t){this._outputStream.write(e,"utf8",t)}},{key:"_writeQuad",value:function(e,t,n,r,i){try{r.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(c.equals(r)?"":"".concat(this._encodeIriOrBlank(r)," {\n"))),this._graph=r,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(", ".concat(this._encodeObject(n)),i):this._write(";\n    ".concat(this._encodePredicate(this._predicate=t)," ").concat(this._encodeObject(n)),i):this._write("".concat((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)," ").concat(this._encodePredicate(this._predicate=t)," ").concat(this._encodeObject(n)),i)}catch(a){i&&i(a)}}},{key:"_writeQuadLine",value:function(e,t,n,r,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,r),i)}},{key:"quadToString",value:function(e,t,n,r){return"".concat(this._encodeSubject(e)," ").concat(this._encodeIriOrBlank(t)," ").concat(this._encodeObject(n)).concat(r&&r.value?" ".concat(this._encodeIriOrBlank(r)," .\n"):" .\n")}},{key:"quadsToString",value:function(e){var t=this;return e.map((function(e){return t.quadToString(e.subject,e.predicate,e.object,e.graph)})).join("")}},{key:"_encodeSubject",value:function(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}},{key:"_encodeIriOrBlank",value:function(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:"_:".concat(e.value);var t=e.value;this._baseMatcher&&this._baseMatcher.test(t)&&(t=t.substr(this._baseLength)),h.test(t)&&(t=t.replace(p,y));var n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:"<".concat(t,">")}},{key:"_encodeLiteral",value:function(e){var t=e.value;if(h.test(t)&&(t=t.replace(p,y)),e.language)return'"'.concat(t,'"@').concat(e.language);if(this._lineMode){if(e.datatype.value===f.string)return'"'.concat(t,'"')}else switch(e.datatype.value){case f.string:return'"'.concat(t,'"');case f.boolean:if("true"===t||"false"===t)return t;break;case f.integer:if(/^[+-]?\d+$/.test(t))return t;break;case f.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case f.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t}return'"'.concat(t,'"^^').concat(this._encodeIriOrBlank(e.datatype))}},{key:"_encodePredicate",value:function(e){return e.value===d.type?"a":this._encodeIriOrBlank(e)}},{key:"_encodeObject",value:function(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}},{key:"_encodeQuad",value:function(e){var t=e.subject,n=e.predicate,r=e.object,i=e.graph;return"<<".concat(this._encodeSubject(t)," ").concat(this._encodePredicate(n)," ").concat(this._encodeObject(r)).concat((0,l.isDefaultGraph)(i)?"":" ".concat(this._encodeIriOrBlank(i)),">>")}},{key:"_blockedWrite",value:function(){throw new Error("Cannot write because the writer has been closed.")}},{key:"addQuad",value:function(e,t,n,r,i){void 0===n?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"===typeof r?this._writeQuad(e,t,n,c,r):this._writeQuad(e,t,n,r||c,i)}},{key:"addQuads",value:function(e){for(var t=0;t<e.length;t++)this.addQuad(e[t])}},{key:"addPrefix",value:function(e,t,n){var r={};r[e]=t,this.addPrefixes(r,n)}},{key:"addPrefixes",value:function(e,t){if(!this._prefixIRIs)return t&&t();var n=!1;for(var r in e){var i=e[r];"string"!==typeof i&&(i=i.value),n=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[i]=r+=":",this._write("@prefix ".concat(r," <").concat(i,">.\n"))}if(n){var a="",o="";for(var s in this._prefixIRIs)a+=a?"|".concat(s):s,o+=(o?"|":"")+this._prefixIRIs[s];a=_(a),this._prefixRegex=new RegExp("^(?:".concat(o,")[^/]*$|")+"^(".concat(a,")([_a-zA-Z][\\-_a-zA-Z0-9]*)$"))}this._write(n?"\n":"",t)}},{key:"blank",value:function(e,t){var n,r,i=e;switch(void 0===e?i=[]:e.termType?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),r=i.length){case 0:return new m("[]");case 1:if(!((n=i[0]).object instanceof m))return new m("[ ".concat(this._encodePredicate(n.predicate)," ").concat(this._encodeObject(n.object)," ]"));default:for(var a="[",o=0;o<r;o++)(n=i[o]).predicate.equals(e)?a+=", ".concat(this._encodeObject(n.object)):(a+="".concat((o?";\n  ":"\n  ")+this._encodePredicate(n.predicate)," ").concat(this._encodeObject(n.object)),e=n.predicate);return new m("".concat(a,"\n]"))}}},{key:"list",value:function(e){for(var t=e&&e.length||0,n=new Array(t),r=0;r<t;r++)n[r]=this._encodeObject(e[r]);return new m("(".concat(n.join(" "),")"))}},{key:"end",value:function(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(n,r){t=null,e(n,r)};if(this._endStream)try{return this._outputStream.end(t)}catch(n){}t&&t()}}]),e}();function y(e){var t=v[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function _(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}},1322:function(e,t,n){"use strict";n.r(t),n.d(t,{BlankNode:function(){return p.DP},DataFactory:function(){return p.ZP},DefaultGraph:function(){return p.Xy},Lexer:function(){return r.Z},Literal:function(){return p.t$},NamedNode:function(){return p.jJ},Parser:function(){return i.Z},Quad:function(){return p.lD},Store:function(){return g},StreamParser:function(){return b},StreamWriter:function(){return w},Term:function(){return p.Rh},Triple:function(){return p.PL},Util:function(){return x},Variable:function(){return p._w},Writer:function(){return a.Z},default:function(){return k},termFromId:function(){return p.LQ},termToId:function(){return p.dW}});var r=n(8678),i=n(1543),a=n(5560),o=n(7326),s=n(136),u=n(9388),l=n(3433),c=n(7762),d=n(4165),f=n(5671),h=n(3144),p=n(1645),v=n(8898),m=n(1975),g=function(e){function t(e,n){(0,f.Z)(this,t),this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,n||!e||e[0]||(n=e,e=null),n=n||{},this._factory=n.factory||p.ZP,e&&this.addQuads(e)}return(0,h.Z)(t,[{key:"size",get:function(){var e=this._size;if(null!==e)return e;e=0;var t,n,r=this._graphs;for(var i in r)for(var a in t=r[i].subjects)for(var o in n=t[a])e+=Object.keys(n[o]).length;return this._size=e}},{key:"_addToIndex",value:function(e,t,n,r){var i=e[t]||(e[t]={}),a=i[n]||(i[n]={}),o=r in a;return o||(a[r]=null),!o}},{key:"_removeFromIndex",value:function(e,t,n,r){var i=e[t],a=i[n];for(var o in delete a[r],a)return;for(var s in delete i[n],i)return;delete e[t]}},{key:"_findInIndex",value:(0,d.Z)().mark((function e(t,n,r,i,a,o,s,u){var l,c,f,h,v,m,g,y,_,b;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h=this._entities,v=(0,p.LQ)(u,this._factory),m={subject:null,predicate:null,object:null},n&&((l=t,t={})[n]=l[n]),e.t0=(0,d.Z)().keys(t);case 5:if((e.t1=e.t0()).done){e.next=28;break}if(g=e.t1.value,!(c=t[g])){e.next=26;break}m[a]=(0,p.LQ)(h[g],this._factory),r&&((l=c,c={})[r]=l[r]),e.t2=(0,d.Z)().keys(c);case 11:if((e.t3=e.t2()).done){e.next=26;break}if(y=e.t3.value,!(f=c[y])){e.next=24;break}m[o]=(0,p.LQ)(h[y],this._factory),_=i?i in f?[i]:[]:Object.keys(f),b=0;case 17:if(!(b<_.length)){e.next=24;break}return m[s]=(0,p.LQ)(h[_[b]],this._factory),e.next=21,this._factory.quad(m.subject,m.predicate,m.object,v);case 21:b++,e.next=17;break;case 24:e.next=11;break;case 26:e.next=5;break;case 28:case"end":return e.stop()}}),e,this)}))},{key:"_loop",value:function(e,t){for(var n in e)t(n)}},{key:"_loopByKey0",value:function(e,t,n){var r,i;if(r=e[t])for(i in r)n(i)}},{key:"_loopByKey1",value:function(e,t,n){var r;for(r in e)e[r][t]&&n(r)}},{key:"_loopBy2Keys",value:function(e,t,n,r){var i,a,o;if((i=e[t])&&(a=i[n]))for(o in a)r(o)}},{key:"_countInIndex",value:function(e,t,n,r){var i,a,o,s=0;for(var u in t&&((i=e,e={})[t]=i[t]),e)if(a=e[u])for(var l in n&&((i=a,a={})[n]=i[n]),a)(o=a[l])&&(r?r in o&&s++:s+=Object.keys(o).length);return s}},{key:"_getGraphs",value:function(e){if(!y(e))return this._graphs;var t={};return t[e]=this._graphs[e],t}},{key:"_uniqueEntities",value:function(e){var t=this,n=Object.create(null);return function(r){r in n||(n[r]=!0,e((0,p.LQ)(t._entities[r],t._factory)))}}},{key:"add",value:function(e){return this.addQuad(e),this}},{key:"addQuad",value:function(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject),e=(0,p.dW)(e),t=(0,p.dW)(t),n=(0,p.dW)(n),r=(0,p.dW)(r);var i=this._graphs[r];i||(i=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var a=this._ids,o=this._entities;e=a[e]||(a[o[++this._id]=e]=this._id),t=a[t]||(a[o[++this._id]=t]=this._id),n=a[n]||(a[o[++this._id]=n]=this._id);var s=this._addToIndex(i.subjects,e,t,n);return this._addToIndex(i.predicates,t,n,e),this._addToIndex(i.objects,n,e,t),this._size=null,s}},{key:"addQuads",value:function(e){for(var t=0;t<e.length;t++)this.addQuad(e[t])}},{key:"delete",value:function(e){return this.removeQuad(e),this}},{key:"has",value:function(e,t,n,r){if(e&&e.subject){var i=e;e=i.subject,t=i.predicate,n=i.object,r=i.graph}return!this.readQuads(e,t,n,r).next().done}},{key:"import",value:function(e){var t=this;return e.on("data",(function(e){t.addQuad(e)})),e}},{key:"removeQuad",value:function(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject),e=(0,p.dW)(e),t=(0,p.dW)(t),n=(0,p.dW)(n),r=(0,p.dW)(r);var i,a,o,s=this._ids,u=this._graphs;if(!(e=s[e])||!(t=s[t])||!(n=s[n])||!(i=u[r])||!(a=i.subjects[e])||!(o=a[t])||!(n in o))return!1;for(e in this._removeFromIndex(i.subjects,e,t,n),this._removeFromIndex(i.predicates,t,n,e),this._removeFromIndex(i.objects,n,e,t),null!==this._size&&this._size--,i.subjects)return!0;return delete u[r],!0}},{key:"removeQuads",value:function(e){for(var t=0;t<e.length;t++)this.removeQuad(e[t])}},{key:"remove",value:function(e){var t=this;return e.on("data",(function(e){t.removeQuad(e)})),e}},{key:"removeMatches",value:function(e,t,n,r){var i=this,a=new v.Readable({objectMode:!0});return a._read=function(){var o,s=(0,c.Z)(i.readQuads(e,t,n,r));try{for(s.s();!(o=s.n()).done;){var u=o.value;a.push(u)}}catch(l){s.e(l)}finally{s.f()}a.push(null)},this.remove(a)}},{key:"deleteGraph",value:function(e){return this.removeMatches(null,null,null,e)}},{key:"getQuads",value:function(e,t,n,r){return(0,l.Z)(this.readQuads(e,t,n,r))}},{key:"readQuads",value:(0,d.Z)().mark((function e(t,n,r,i){var a,o,s,u,l,c,f;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t&&(0,p.dW)(t),n=n&&(0,p.dW)(n),r=r&&(0,p.dW)(r),i=i&&(0,p.dW)(i),a=this._getGraphs(i),o=this._ids,!(y(t)&&!(u=o[t])||y(n)&&!(l=o[n])||y(r)&&!(c=o[r]))){e.next=7;break}return e.abrupt("return");case 7:e.t0=(0,d.Z)().keys(a);case 8:if((e.t1=e.t0()).done){e.next=30;break}if(f=e.t1.value,!(s=a[f])){e.next=28;break}if(!u){e.next=19;break}if(!c){e.next=16;break}return e.delegateYield(this._findInIndex(s.objects,c,u,l,"object","subject","predicate",f),"t2",14);case 14:e.next=17;break;case 16:return e.delegateYield(this._findInIndex(s.subjects,u,l,null,"subject","predicate","object",f),"t3",17);case 17:e.next=28;break;case 19:if(!l){e.next=23;break}return e.delegateYield(this._findInIndex(s.predicates,l,c,null,"predicate","object","subject",f),"t4",21);case 21:e.next=28;break;case 23:if(!c){e.next=27;break}return e.delegateYield(this._findInIndex(s.objects,c,null,null,"object","subject","predicate",f),"t5",25);case 25:e.next=28;break;case 27:return e.delegateYield(this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",f),"t6",28);case 28:e.next=8;break;case 30:case"end":return e.stop()}}),e,this)}))},{key:"match",value:function(e,t,n,r){return new _(this,e,t,n,r)}},{key:"countQuads",value:function(e,t,n,r){e=e&&(0,p.dW)(e),t=t&&(0,p.dW)(t),n=n&&(0,p.dW)(n),r=r&&(0,p.dW)(r);var i,a,o,s,u=this._getGraphs(r),l=this._ids,c=0;if(y(e)&&!(a=l[e])||y(t)&&!(o=l[t])||y(n)&&!(s=l[n]))return 0;for(var d in u)(i=u[d])&&(c+=e?n?this._countInIndex(i.objects,s,a,o):this._countInIndex(i.subjects,a,o,s):t?this._countInIndex(i.predicates,o,s,a):this._countInIndex(i.objects,s,a,o));return c}},{key:"forEach",value:function(e,t,n,r,i){this.some((function(t){return e(t),!1}),t,n,r,i)}},{key:"every",value:function(e,t,n,r,i){var a=!1,o=!this.some((function(t){return a=!0,!e(t)}),t,n,r,i);return a&&o}},{key:"some",value:function(e,t,n,r,i){var a,o=(0,c.Z)(this.readQuads(t,n,r,i));try{for(o.s();!(a=o.n()).done;){if(e(a.value))return!0}}catch(s){o.e(s)}finally{o.f()}return!1}},{key:"getSubjects",value:function(e,t,n){var r=[];return this.forSubjects((function(e){r.push(e)}),e,t,n),r}},{key:"forSubjects",value:function(e,t,n,r){t=t&&(0,p.dW)(t),n=n&&(0,p.dW)(n),r=r&&(0,p.dW)(r);var i,a,o,s=this._ids,u=this._getGraphs(r);if(e=this._uniqueEntities(e),!(y(t)&&!(a=s[t])||y(n)&&!(o=s[n])))for(r in u)(i=u[r])&&(a?o?this._loopBy2Keys(i.predicates,a,o,e):this._loopByKey1(i.subjects,a,e):o?this._loopByKey0(i.objects,o,e):this._loop(i.subjects,e))}},{key:"getPredicates",value:function(e,t,n){var r=[];return this.forPredicates((function(e){r.push(e)}),e,t,n),r}},{key:"forPredicates",value:function(e,t,n,r){t=t&&(0,p.dW)(t),n=n&&(0,p.dW)(n),r=r&&(0,p.dW)(r);var i,a,o,s=this._ids,u=this._getGraphs(r);if(e=this._uniqueEntities(e),!(y(t)&&!(a=s[t])||y(n)&&!(o=s[n])))for(r in u)(i=u[r])&&(a?o?this._loopBy2Keys(i.objects,o,a,e):this._loopByKey0(i.subjects,a,e):o?this._loopByKey1(i.predicates,o,e):this._loop(i.predicates,e))}},{key:"getObjects",value:function(e,t,n){var r=[];return this.forObjects((function(e){r.push(e)}),e,t,n),r}},{key:"forObjects",value:function(e,t,n,r){t=t&&(0,p.dW)(t),n=n&&(0,p.dW)(n),r=r&&(0,p.dW)(r);var i,a,o,s=this._ids,u=this._getGraphs(r);if(e=this._uniqueEntities(e),!(y(t)&&!(a=s[t])||y(n)&&!(o=s[n])))for(r in u)(i=u[r])&&(a?o?this._loopBy2Keys(i.subjects,a,o,e):this._loopByKey1(i.objects,a,e):o?this._loopByKey0(i.predicates,o,e):this._loop(i.objects,e))}},{key:"getGraphs",value:function(e,t,n){var r=[];return this.forGraphs((function(e){r.push(e)}),e,t,n),r}},{key:"forGraphs",value:function(e,t,n,r){for(var i in this._graphs)this.some((function(t){return e(t.graph),!0}),t,n,r,i)}},{key:"createBlankNode",value:function(e){var t,n;if(e)for(t=e="_:".concat(e),n=1;this._ids[t];)t=e+n++;else do{t="_:b".concat(this._blankNodeIndex++)}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}},{key:"extractLists",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.remove,r=void 0!==n&&n,i=t.ignoreErrors,a={},o=void 0!==i&&i?function(){return!0}:function(e,t){throw new Error("".concat(e.value," ").concat(t))},s=this.getQuads(null,m.Z.rdf.rest,m.Z.rdf.nil,null),u=r?(0,l.Z)(s):[];return s.forEach((function(t){for(var n,i,s=[],l=!1,c=t.graph,d=t.subject;d&&!l;){for(var f=e.getQuads(null,null,d,null),h=e.getQuads(d,null,null,null),p=void 0,v=null,g=null,y=null,_=0;_<h.length&&!l;_++)(p=h[_]).graph.equals(c)?n?l=o(d,"has non-list arcs out"):p.predicate.value===m.Z.rdf.first?v?l=o(d,"has multiple rdf:first arcs"):u.push(v=p):p.predicate.value===m.Z.rdf.rest?g?l=o(d,"has multiple rdf:rest arcs"):u.push(g=p):f.length?l=o(d,"can't be subject and object"):(n=p,i="subject"):l=o(d,"not confined to single graph");for(var b=0;b<f.length&&!l;++b)p=f[b],n?l=o(d,"can't have coreferences"):p.predicate.value===m.Z.rdf.rest?y?l=o(d,"has incoming rdf:rest arcs"):y=p:(n=p,i="object");v?s.unshift(v.object):l=o(d,"has no list head"),d=y&&y.subject}l?r=!1:n&&(a[n[i].value]=s)})),r&&this.removeQuads(u),a}},{key:e,value:(0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.readQuads(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);function y(e){return"string"===typeof e||e instanceof String}var _=function(e,t){(0,s.Z)(r,e);var n=(0,u.Z)(r);function r(e,t,i,a,s){var u;return(0,f.Z)(this,r),u=n.call(this,{objectMode:!0}),Object.assign((0,o.Z)(u),{n3Store:e,subject:t,predicate:i,object:a,graph:s}),u}return(0,h.Z)(r,[{key:"filtered",get:function(){if(!this._filtered){var e,t=this.n3Store,n=this.graph,r=this.object,i=this.predicate,a=this.subject,o=this._filtered=new g({factory:t._factory}),s=(0,c.Z)(t.readQuads(a,i,r,n));try{for(s.s();!(e=s.n()).done;){var u=e.value;o.addQuad(u)}}catch(l){s.e(l)}finally{s.f()}}return this._filtered}},{key:"size",get:function(){return this.filtered.size}},{key:"_read",value:function(){var e,t=(0,c.Z)(this);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.push(n)}}catch(r){t.e(r)}finally{t.f()}this.push(null)}},{key:"add",value:function(e){return this.filtered.add(e)}},{key:"delete",value:function(e){return this.filtered.delete(e)}},{key:"has",value:function(e){return this.filtered.has(e)}},{key:"match",value:function(e,t,n,i){return new r(this.filtered,e,t,n,i)}},{key:t,value:(0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))}]),r}(v.Readable,Symbol.iterator),b=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r,a,o;return(0,f.Z)(this,n),(r=t.call(this,{decodeStrings:!0}))._readableState.objectMode=!0,new i.Z(e).parse({on:function(e,t){switch(e){case"data":a=t;break;case"end":o=t}}},(function(e,t){e&&r.emit("error",e)||t&&r.push(t)}),(function(e,t){r.emit("prefix",e,t)})),r._transform=function(e,t,n){a(e),n()},r._flush=function(e){o(),e()},r}return(0,h.Z)(n,[{key:"import",value:function(e){var t=this;return e.on("data",(function(e){t.write(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.emit("error",e)})),this}}]),n}(v.Transform),w=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;(0,f.Z)(this,n);var i=(r=t.call(this,{encoding:"utf8",writableObjectMode:!0}))._writer=new a.Z({write:function(e,t,n){r.push(e),n&&n()},end:function(e){r.push(null),e&&e()}},e);return r._transform=function(e,t,n){i.addQuad(e,n)},r._flush=function(e){i.end(e)},r}return(0,h.Z)(n,[{key:"import",value:function(e){var t=this;return e.on("data",(function(e){t.write(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.emit("error",e)})),e.on("prefix",(function(e,n){t._writer.addPrefix(e,n)})),this}}]),n}(v.Transform),x=n(2065),k={Lexer:r.Z,Parser:i.Z,Writer:a.Z,Store:g,StreamParser:b,StreamWriter:w,Util:x,DataFactory:p.ZP,Term:p.Rh,NamedNode:p.jJ,Literal:p.t$,BlankNode:p.DP,Variable:p._w,DefaultGraph:p.Xy,Quad:p.lD,Triple:p.PL,termFromId:p.LQ,termToId:p.dW}},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in a=Object(arguments[u]))n.call(a,l)&&(s[l]=a[l]);if(t){o=t(a);for(var c=0;c<o.length;c++)r.call(a,o[c])&&(s[o[c]]=a[o[c]])}}return s}},1426:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,u=[],l=!1,c=-1;function d(){l&&s&&(l=!1,s.length?u=s.concat(u):c=-1,u.length&&f())}function f(){if(!l){var e=o(d);l=!0;for(var t=u.length;t;){for(s=u,u=[];++c<t;)s&&s[c].run();c=-1,t=u.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||o(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},4183:function(e,t,n){var r;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:n.g):function(e){return(r||(r=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))}},4463:function(e,t,n){"use strict";var r=n(2791),i=n(1725),a=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(v,e)||!h.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,k=60106,S=60107,E=60108,A=60114,T=60109,C=60110,P=60112,I=60113,R=60120,L=60115,M=60116,O=60121,F=60128,D=60129,N=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;x=B("react.element"),k=B("react.portal"),S=B("react.fragment"),E=B("react.strict_mode"),A=B("react.profiler"),T=B("react.provider"),C=B("react.context"),P=B("react.forward_ref"),I=B("react.suspense"),R=B("react.suspense_list"),L=B("react.memo"),M=B("react.lazy"),O=B("react.block"),B("react.scope"),F=B("react.opaque.id"),D=B("react.debug_trace_mode"),N=B("react.offscreen"),j=B("react.legacy_hidden")}var U,z="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function Z(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var H=!1;function W(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Z(e):""}function G(e){switch(e.tag){case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case A:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case L:return q(e.type);case O:return q(e._render);case M:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function J(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=J(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=J(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function le(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ve,me=(ve=function(e,t){if(e.namespaceURI!==de.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ye).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Te=null,Ce=null;function Pe(e){if(e=ni(e)){if("function"!==typeof Ae)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Ae(e.stateNode,e.type,t))}}function Ie(e){Te?Ce?Ce.push(e):Ce=[e]:Te=e}function Re(){if(Te){var e=Te,t=Ce;if(Ce=Te=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Le(e,t){return e(t)}function Me(e,t,n,r,i){return e(t,n,r,i)}function Oe(){}var Fe=Le,De=!1,Ne=!1;function je(){null===Te&&null===Ce||(Oe(),Re())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ue=!1;if(d)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ve){Ue=!1}function Ve(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Ze=!1,He=null,We=!1,Ge=null,qe={onError:function(e){Ze=!0,He=e}};function Ke(e,t,n,r,i,a,o,s,u){Ze=!1,He=null,Ve.apply(qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ye(e){if(Je(e)!==e)throw Error(o(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ye(i),e;if(a===r)return Ye(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function $e(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,at=[],ot=null,st=null,ut=null,lt=new Map,ct=new Map,dt=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function vt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=ht(t,n,r,i,a),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ti(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){gt(e)&&n.delete(t)}function _t(){for(it=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==ot&&gt(ot)&&(ot=null),null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),lt.forEach(yt),ct.forEach(yt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_t)))}function wt(e){function t(t){return bt(t,e)}if(0<at.length){bt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==st&&bt(st,e),null!==ut&&bt(ut,e),lt.forEach(t),ct.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)mt(n),null===n.blockedOn&&dt.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kt={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},St={},Et={};function At(e){if(St[e])return St[e];if(!kt[e])return e;var t,n=kt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return St[e]=n[t];return e}d&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete kt.animationend.animation,delete kt.animationiteration.animation,delete kt.animationstart.animation),"TransitionEvent"in window||delete kt.transitionend.transition);var Tt=At("animationend"),Ct=At("animationiteration"),Pt=At("animationstart"),It=At("transitionend"),Rt=new Map,Lt=new Map,Mt=["abort","abort",Tt,"animationEnd",Ct,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",It,"transitionEnd","waiting","waiting"];function Ot(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Lt.set(r,t),Rt.set(r,i),l(i,[r])}}(0,a.unstable_now)();var Ft=8;function Dt(e){if(0!==(1&e))return Ft=15,1;if(0!==(2&e))return Ft=14,2;if(0!==(4&e))return Ft=13,4;var t=24&e;return 0!==t?(Ft=12,t):0!==(32&e)?(Ft=11,32):0!==(t=192&e)?(Ft=10,t):0!==(256&e)?(Ft=9,256):0!==(t=3584&e)?(Ft=8,t):0!==(4096&e)?(Ft=7,4096):0!==(t=4186112&e)?(Ft=6,t):0!==(t=62914560&e)?(Ft=5,t):67108864&e?(Ft=4,67108864):0!==(134217728&e)?(Ft=3,134217728):0!==(t=805306368&e)?(Ft=2,t):0!==(1073741824&e)?(Ft=1,1073741824):(Ft=8,e)}function Nt(e,t){var n=e.pendingLanes;if(0===n)return Ft=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Ft=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Dt(u),i=Ft):0!==(s&=a)&&(r=Dt(s),i=Ft)}else 0!==(a=n&~o)?(r=Dt(a),i=Ft):0!==s&&(r=Dt(s),i=Ft);if(0===r)return 0;if(r=n&((0>(r=31-Zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Dt(t),i<=Ft)return t;Ft=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Zt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Bt(10,t):e;case 10:return 0===(e=Ut(192&~t))?Bt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Zt(t)]=n}var Zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Wt|0)|0},Ht=Math.log,Wt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,qt=a.unstable_runWithPriority,Kt=!0;function Jt(e,t,n,r){De||Oe();var i=Yt,a=De;De=!0;try{Me(i,e,t,n,r)}finally{(De=a)||je()}}function Xt(e,t,n,r){qt(Gt,Yt.bind(null,e,t,n,r))}function Yt(e,t,n,r){var i;if(Kt)if((i=0===(4&t))&&0<at.length&&-1<ft.indexOf(e))e=ht(null,e,t,n,r),at.push(e);else{var a=Qt(e,t,n,r);if(null===a)i&&pt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=ht(a,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=vt(ot,e,t,n,r,i),!0;case"dragenter":return st=vt(st,e,t,n,r,i),!0;case"mouseover":return ut=vt(ut,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,vt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ct.set(a,vt(ct.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;pt(e,r)}Or(e,t,r,null,n)}}}function Qt(e,t,n,r){var i=Ee(r);if(null!==(i=ti(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Or(e,t,r,i,n),null}var $t=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function on(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var un,ln,cn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=sn(dn),hn=i({},dn,{view:0,detail:0}),pn=sn(hn),vn=i({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(un=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=un=0,cn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(vn),gn=sn(i({},vn,{dataTransfer:0})),yn=sn(i({},hn,{relatedTarget:0})),_n=sn(i({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(bn),xn=sn(i({},dn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return An}var Cn=i({},hn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=sn(Cn),In=sn(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=sn(i({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Ln=sn(i({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=i({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Mn),Fn=[9,13,27,32],Dn=d&&"CompositionEvent"in window,Nn=null;d&&"documentMode"in document&&(Nn=document.documentMode);var jn=d&&"TextEvent"in window&&!Nn,Bn=d&&(!Dn||Nn&&8<Nn&&11>=Nn),Un=String.fromCharCode(32),zn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Ie(r),0<(t=Dr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Jn=null;function Xn(e){Cr(e,0)}function Yn(e){if(Y(ri(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(d){var er;if(d){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;$n=er&&(!document.documentMode||9<document.documentMode)}function rr(){Kn&&(Kn.detachEvent("onpropertychange",ir),Jn=Kn=null)}function ir(e){if("value"===e.propertyName&&Yn(Jn)){var t=[];if(qn(t,Jn,e,Ee(e)),e=Xn,De)e(t);else{De=!0;try{Le(e,t)}finally{De=!1,je()}}}}function ar(e,t,n){"focusin"===e?(rr(),Jn=n,(Kn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Jn)}function sr(e,t){if("click"===e)return Yn(t)}function ur(e,t){if("input"===e||"change"===e)return Yn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},cr=Object.prototype.hasOwnProperty;function dr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!cr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=fr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=d&&"documentMode"in document&&11>=document.documentMode,yr=null,_r=null,br=null,wr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&dr(br,r)||(br=r,0<(r=Dr(_r,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}Ot("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ot("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ot(Mt,2);for(var kr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<kr.length;Sr++)Lt.set(kr[Sr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ar=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(Ke.apply(this,arguments),Ze){if(!Ze)throw Error(o(198));var c=He;Ze=!1,He=null,We||(We=!0,Ge=c)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Tr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Tr(i,s,l),a=u}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Pr(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Mr(t,e,2,!1),n.add(r))}var Ir="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Ir]||(e[Ir]=!0,s.forEach((function(t){Ar.has(t)||Lr(t,!1,e,null),Lr(t,!0,e,null)})))}function Lr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Ar.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=ai(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Mr(a,e,i,t),o.add(s))}function Mr(e,t,n,r){var i=Lt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Or(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ti(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Fe(e,t,n)}finally{Ne=!1,je()}}((function(){var r=a,i=Ee(n),o=[];e:{var s=Rt.get(e);if(void 0!==s){var u=fn,l=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":u=Pn;break;case"focusin":l="focus",u=yn;break;case"focusout":l="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Tt:case Ct:case Pt:u=_n;break;case It:u=Ln;break;case"scroll":u=pn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==f&&(null!=(v=Be(p,f))&&c.push(Fr(p,v,h)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ti(l)&&!l[$r])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ti(l):null)&&(l!==(d=Je(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=mn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==u?s:ri(u),h=null==l?s:ri(l),(s=new c(v,p+"leave",u,n,i)).target=d,s.relatedTarget=h,v=null,ti(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=h,c.relatedTarget=d,v=c),d=v,u&&l)e:{for(f=l,p=0,h=c=u;h;h=Nr(h))p++;for(h=0,v=f;v;v=Nr(v))h++;for(;0<p-h;)c=Nr(c),p--;for(;0<h-p;)f=Nr(f),h--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Nr(c),f=Nr(f)}c=null}else c=null;null!==u&&jr(o,s,u,c,!1),null!==l&&null!==d&&jr(o,d,l,c,!0)}if("select"===(u=(s=r?ri(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Qn;else if(Gn(s))if($n)m=ur;else{m=or;var g=ar}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=sr);switch(m&&(m=m(e,r))?qn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?ri(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(yr=g,_r=r,br=null);break;case"focusout":br=_r=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Hn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Bn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Hn&&(y=nn()):(en="value"in($t=i)?$t.value:$t.textContent,Hn=!0)),0<(g=Dr(r,_)).length&&(_=new xn(_,e,null,n,i),o.push({event:_,listeners:g}),y?_.data=y:null!==(y=Zn(n))&&(_.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Zn(t);case"keypress":return 32!==t.which?null:(zn=!0,Un);case"textInput":return(e=t.data)===Un&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=nn(),tn=en=$t=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Dr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Cr(o,t)}))}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(Fr(e,a,i)),null!=(a=Be(e,t))&&r.push(Fr(e,a,i))),e=e.return}return r}function Nr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Be(n,a))&&o.unshift(Fr(n,u,s)):i||null!=(u=Be(n,a))&&o.push(Fr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Br(){}var Ur=null,zr=null;function Vr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Zr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Kr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Xr=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Xr,Qr="__reactProps$"+Xr,$r="__reactContainer$"+Xr,ei="__reactEvents$"+Xr;function ti(e){var t=e[Yr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$r]||n[Yr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Kr(e);null!==e;){if(n=e[Yr])return n;e=Kr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Yr]||e[$r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Qr]||null}function ai(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],si=-1;function ui(e){return{current:e}}function li(e){0>si||(e.current=oi[si],oi[si]=null,si--)}function ci(e,t){si++,oi[si]=e.current,e.current=t}var di={},fi=ui(di),hi=ui(!1),pi=di;function vi(e,t){var n=e.type.contextTypes;if(!n)return di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(hi),li(fi)}function yi(e,t,n){if(fi.current!==di)throw Error(o(168));ci(fi,t),ci(hi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,q(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||di,pi=fi.current,ci(fi,e),ci(hi,hi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,li(hi),li(fi),ci(fi,e)):li(hi),ci(hi,n)}var xi=null,ki=null,Si=a.unstable_runWithPriority,Ei=a.unstable_scheduleCallback,Ai=a.unstable_cancelCallback,Ti=a.unstable_shouldYield,Ci=a.unstable_requestPaint,Pi=a.unstable_now,Ii=a.unstable_getCurrentPriorityLevel,Ri=a.unstable_ImmediatePriority,Li=a.unstable_UserBlockingPriority,Mi=a.unstable_NormalPriority,Oi=a.unstable_LowPriority,Fi=a.unstable_IdlePriority,Di={},Ni=void 0!==Ci?Ci:function(){},ji=null,Bi=null,Ui=!1,zi=Pi(),Vi=1e4>zi?Pi:function(){return Pi()-zi};function Zi(){switch(Ii()){case Ri:return 99;case Li:return 98;case Mi:return 97;case Oi:return 96;case Fi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Ri;case 98:return Li;case 97:return Mi;case 96:return Oi;case 95:return Fi;default:throw Error(o(332))}}function Wi(e,t){return e=Hi(e),Si(e,t)}function Gi(e,t,n){return e=Hi(e),Ei(e,t,n)}function qi(){if(null!==Bi){var e=Bi;Bi=null,Ai(e)}Ki()}function Ki(){if(!Ui&&null!==ji){Ui=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ei(Ri,qi),n}finally{Ui=!1}}}var Ji=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Yi=ui(null),Qi=null,$i=null,ea=null;function ta(){ea=$i=Qi=null}function na(e){var t=Yi.current;li(Yi),e.type._context._currentValue=t}function ra(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ia(e,t){Qi=e,ea=$i=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Do=!0),e.firstContext=null)}function aa(e,t){if(ea!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ea=e,t=1073741823),t={context:e,observedBits:t,next:null},null===$i){if(null===Qi)throw Error(o(308));$i=t,Qi.dependencies={lanes:0,firstContext:t,responders:null}}else $i=$i.next=t;return e._currentValue}var oa=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ca(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fa(e,t,n,r){var a=e.updateQueue;oa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=c:f.next=c,d.lastBaseUpdate=l)}}if(null!==o){for(f=a.baseState,s=0,d=c=l=null;;){u=o.lane;var h=o.eventTime;if((r&u)===u){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(h,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(h,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:oa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else h={eventTime:h,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,l=f):d=d.next=h,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===d&&(l=f),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,zs|=s,e.lanes=s,e.memoizedState=f}}function ha(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var pa=(new r.Component).refs;function va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=hu(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ca(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=hu(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ca(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=hu(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ca(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(i,a))}function ya(e,t,n){var r=!1,i=di,a=t.contextType;return"object"===typeof a&&null!==a?a=aa(a):(i=mi(t)?pi:fi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?vi(e,i):di),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=pa,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=aa(a):(a=mi(t)?pi:fi.current,i.context=vi(e,a)),fa(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var wa=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===pa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ka(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Sa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=qu(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Ku(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=qu(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case k:return(t=Yu(t,e.mode,n)).return=e,t}if(wa(t)||V(t))return(t=Ku(t,e.mode,n,null)).return=e,t;ka(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===S?d(e,t,n.props.children,r,i):l(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null}if(wa(n)||V(n))return null!==i?null:d(e,t,n,r,null);ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===S?d(t,e,r.props.children,i,r.key):l(t,e,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(wa(r)||V(r))return d(t,e=e.get(n)||null,r,i,null);ka(t,r)}return null}function v(i,o,s,u){for(var l=null,c=null,d=o,v=o=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=h(i,d,s[v],u);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g,d=m}if(v===s.length)return n(i,d),l;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],u))&&(o=a(d,o,v),null===c?l=d:c.sibling=d,c=d);return l}for(d=r(i,d);v<s.length;v++)null!==(m=p(d,i,v,s[v],u))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m);return e&&d.forEach((function(e){return t(i,e)})),l}function m(i,s,u,l){var c=V(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var _=h(i,v,y.value,l);if(null===_){null===v&&(v=g);break}e&&v&&null===_.alternate&&t(i,v),s=a(_,s,m),null===d?c=_:d.sibling=_,d=_,v=g}if(y.done)return n(i,v),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,l))&&(s=a(y,s,m),null===d?c=y:d.sibling=y,d=y);return c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?c=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),c}return function(e,r,a,u){var l="object"===typeof a&&null!==a&&a.type===S&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case x:e:{for(c=a.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(a.type===S){n(e,l.sibling),(r=i(l,a.props.children)).return=e,e=r;break e}}else if(l.elementType===a.type){n(e,l.sibling),(r=i(l,a.props)).ref=xa(e,l,a),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===S?((r=Ku(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=qu(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,r,a),u.return=e,e=u)}return s(e);case k:e:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Yu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Xu(a,e.mode,u)).return=e,e=r),s(e);if(wa(a))return v(e,r,a,u);if(V(a))return m(e,r,a,u);if(c&&ka(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,q(e.type)||"Component"))}return n(e,r)}}var Ea=Sa(!0),Aa=Sa(!1),Ta={},Ca=ui(Ta),Pa=ui(Ta),Ia=ui(Ta);function Ra(e){if(e===Ta)throw Error(o(174));return e}function La(e,t){switch(ci(Ia,t),ci(Pa,e),ci(Ca,Ta),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Ca),ci(Ca,t)}function Ma(){li(Ca),li(Pa),li(Ia)}function Oa(e){Ra(Ia.current);var t=Ra(Ca.current),n=he(t,e.type);t!==n&&(ci(Pa,e),ci(Ca,n))}function Fa(e){Pa.current===e&&(li(Ca),li(Pa))}var Da=ui(0);function Na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Ba=null,Ua=!1;function za(e,t){var n=Hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Va(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Za(e){if(Ua){var t=Ba;if(t){var n=t;if(!Va(e,t)){if(!(t=qr(n.nextSibling))||!Va(e,t))return e.flags=-1025&e.flags|2,Ua=!1,void(ja=e);za(ja,n)}ja=e,Ba=qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ua=!1,ja=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Wa(e){if(e!==ja)return!1;if(!Ua)return Ha(e),Ua=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Zr(t,e.memoizedProps))for(t=Ba;t;)za(e,t),t=qr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ba=qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ba=null}}else Ba=ja?qr(e.stateNode.nextSibling):null;return!0}function Ga(){Ba=ja=null,Ua=!1}var qa=[];function Ka(){for(var e=0;e<qa.length;e++)qa[e]._workInProgressVersionPrimary=null;qa.length=0}var Ja=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,Ya=0,Qa=null,$a=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function ao(e,t,n,r,i,a){if(Ya=a,Qa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Lo:Mo,e=n(r,i),no){a=0;do{if(no=!1,!(25>a))throw Error(o(301));a+=1,eo=$a=null,t.updateQueue=null,Ja.current=Oo,e=n(r,i)}while(no)}if(Ja.current=Ro,t=null!==$a&&null!==$a.next,Ya=0,eo=$a=Qa=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Qa.memoizedState=eo=e:eo=eo.next=e,eo}function so(){if(null===$a){var e=Qa.alternate;e=null!==e?e.memoizedState:null}else e=$a.next;var t=null===eo?Qa.memoizedState:eo.next;if(null!==t)eo=t,$a=e;else{if(null===e)throw Error(o(310));e={memoizedState:($a=e).memoizedState,baseState:$a.baseState,baseQueue:$a.baseQueue,queue:$a.queue,next:null},null===eo?Qa.memoizedState=eo=e:eo=eo.next=e}return eo}function uo(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=$a,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,l=i;do{var c=l.lane;if((Ya&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var d={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=d,a=r):u=u.next=d,Qa.lanes|=c,zs|=c}l=l.next}while(null!==l&&l!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Do=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function co(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Do=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ya&e)===e)&&(t._workInProgressVersionPrimary=r,qa.push(t))),e)return n(t._source);throw qa.push(t),Error(o(350))}function ho(e,t,n,r){var i=Ms;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ja.current,l=u.useState((function(){return fo(i,t,n)})),c=l[1],d=l[0];l=eo;var f=e.memoizedState,h=f.refs,p=h.getSnapshot,v=f.source;f=f.subscribe;var m=Qa;return e.memoizedState={refs:h,source:t,subscribe:r},u.useEffect((function(){h.getSnapshot=n,h.setSnapshot=c;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(d,e)||(c(e),e=hu(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Zt(o),l=1<<u;r[u]|=e,o&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=hu(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:d}).dispatch=c=Io.bind(null,Qa,e),l.queue=e,l.baseQueue=null,d=fo(i,t,n),l.memoizedState=l.baseState=d),d}function po(e,t,n){return ho(so(),e,t,n)}function vo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:e}).dispatch=Io.bind(null,Qa,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qa.updateQueue)?(t={lastEffect:null},Qa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},oo().memoizedState=e}function yo(){return so().memoizedState}function _o(e,t,n,r){var i=oo();Qa.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==$a){var o=$a.memoizedState;if(a=o.destroy,null!==r&&io(r,o.deps))return void mo(t,n,a,r)}Qa.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function wo(e,t){return _o(516,4,e,t)}function xo(e,t){return bo(516,4,e,t)}function ko(e,t){return bo(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Eo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,So.bind(null,t,e),n)}function Ao(){}function To(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Po(e,t){var n=Zi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Io(e,t,n){var r=fu(),i=hu(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Qa||null!==o&&o===Qa)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(l){}pu(e,i,r)}}var Ro={readContext:aa,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Lo={readContext:aa,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:aa,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_o(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Io.bind(null,Qa,e),[r.memoizedState,e]},useRef:go,useState:vo,useDebugValue:Ao,useDeferredValue:function(e){var t=vo(e),n=t[0],r=t[1];return wo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=vo(!1),t=e[0];return go(e=Po.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ho(r,e,t,n)},useOpaqueIdentifier:function(){if(Ua){var e=!1,t=function(e){return{$$typeof:F,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=vo(t)[1];return 0===(2&Qa.mode)&&(Qa.flags|=516,mo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return vo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Mo={readContext:aa,useCallback:To,useContext:aa,useEffect:xo,useImperativeHandle:Eo,useLayoutEffect:ko,useMemo:Co,useReducer:lo,useRef:yo,useState:function(){return lo(uo)},useDebugValue:Ao,useDeferredValue:function(e){var t=lo(uo),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(uo)[0];return[yo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(uo)[0]},unstable_isNewReconciler:!1},Oo={readContext:aa,useCallback:To,useContext:aa,useEffect:xo,useImperativeHandle:Eo,useLayoutEffect:ko,useMemo:Co,useReducer:co,useRef:yo,useState:function(){return co(uo)},useDebugValue:Ao,useDeferredValue:function(e){var t=co(uo),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=co(uo)[0];return[yo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(uo)[0]},unstable_isNewReconciler:!1},Fo=w.ReactCurrentOwner,Do=!1;function No(e,t,n,r){t.child=null===e?Aa(t,null,n,r):Ea(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return ia(t,i),r=ao(e,t,n,r,a,i),null===e||Do?(t.flags|=1,No(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Bo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Wu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:dr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Gu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Uo(e,t,n,r,i,a){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Do=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Do=!0)}return Zo(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xu(t,e),null;t.memoizedState={baseLanes:0},xu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xu(t,r);return No(e,t,i,n),t.child}function Vo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Zo(e,t,n,r,i){var a=mi(n)?pi:fi.current;return a=vi(t,a),ia(t,i),n=ao(e,t,n,r,a,i),null===e||Do?(t.flags|=1,No(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ho(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(ia(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ya(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=aa(l):l=vi(t,l=mi(n)?pi:fi.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&_a(t,o,r,l),oa=!1;var f=t.memoizedState;o.state=f,fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||hi.current||oa?("function"===typeof c&&(va(t,n,c,r),u=t.memoizedState),(s=oa||ga(t,n,s,r,f,u,l))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ua(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Xi(t.type,s),o.props=l,d=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=aa(u):u=vi(t,u=mi(n)?pi:fi.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==u)&&_a(t,o,r,u),oa=!1,f=t.memoizedState,o.state=f,fa(t,r,o,i);var p=t.memoizedState;s!==d||f!==p||hi.current||oa?("function"===typeof h&&(va(t,n,h,r),p=t.memoizedState),(l=oa||ga(t,n,l,r,f,p,u))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){Vo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&wi(t,n,!1),as(e,t,a);r=t.stateNode,Fo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ea(t,e.child,null,a),t.child=Ea(t,null,s,a)):No(e,t,s,a),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?yi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yi(0,t.context,!1),La(e,t.containerInfo)}var qo,Ko,Jo,Xo,Yo={dehydrated:null,retryLane:0};function Qo(e,t,n){var r,i=t.pendingProps,a=Da.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),ci(Da,1&a),null===e?(void 0!==i.fallback&&Za(t),e=i.children,a=i.fallback,o?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,e):"number"===typeof i.unstable_expectedLoadTime?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,t.lanes=33554432,e):((n=Ju({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Yo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function $o(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ju(t,i,0,null),n=Ku(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Gu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gu(o,s),null!==e?r=Gu(e,r):(r=Ku(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ra(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(No(e,t,r.children,n),0!==(2&(r=Da.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(Da,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Na(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Na(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Ua)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Ma(),li(hi),li(fi),Ka(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ko(t),null;case 5:Fa(t);var a=Ra(Ia.current);if(n=t.type,null!==e&&null!=t.stateNode)Jo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ra(Ca.current),Wa(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Yr]=t,r[Qr]=s,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Pr(Er[e],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":ee(r,s),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pr("invalid",r);break;case"textarea":ue(r,s),Pr("invalid",r)}for(var l in ke(n,s),e=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&Pr("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Br)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,e===de.html&&(e=fe(n)),e===de.html?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Yr]=t,e[Qr]=r,qo(e,t,!1,!1),t.stateNode=e,l=Se(n,r),n){case"dialog":Pr("cancel",e),Pr("close",e),a=r;break;case"iframe":case"object":case"embed":Pr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Er.length;a++)Pr(Er[a],e);a=r;break;case"source":Pr("error",e),a=r;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),a=r;break;case"details":Pr("toggle",e),a=r;break;case"input":ee(e,r),a=$(e,r),Pr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Pr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Pr("invalid",e);break;default:a=r}ke(n,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?we(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&ge(e,d):"number"===typeof d&&ge(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Pr("scroll",e):null!=d&&b(e,s,d,l))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Br)}Vr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ra(Ia.current),Ra(Ca.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Yr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yr]=t,t.stateNode=r)}return null;case 13:return li(Da),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Da.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Ms||0===(134217727&zs)&&0===(134217727&Vs)||yu(Ms,Fs))),(r||n)&&(t.flags|=4),null);case 4:return Ma(),Ko(t),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return na(t),null;case 19:if(li(Da),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=r.rendering))if(s)os(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Na(e))){for(t.flags|=64,os(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ci(Da,1&Da.current|2),t.child}e=e.sibling}null!==r.tail&&Vi()>Gs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Na(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Ua)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Vi()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Vi(),n.sibling=null,t=Da.current,ci(Da,s?1&t|2:1&t),n):null;case 23:case 24:return ku(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ma(),li(hi),li(fi),Ka(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Fa(e),null;case 13:return li(Da),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Da),null;case 4:return Ma(),null;case 10:return na(e),null;case 23:case 24:return ku(),null;default:return null}}function ls(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ko=function(){},Jo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ra(Ca.current);var o,s=null;switch(n){case"input":a=$(e,a),r=$(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Br)}for(d in ke(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Pr("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===F?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,Ys=r),cs(0,t)},n}function hs(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return cs(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Uu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Nu(n,e),Du(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ha(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ha(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Vr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function _s(e,t){if(ki&&"function"===typeof ki.onCommitFiberUnmount)try{ki.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Nu(t,n);else{r=t;try{i()}catch(a){Uu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Uu(t,a)}break;case 5:vs(t);break;case 4:Es(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function xs(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ks(e,n,t):Ss(e,n,t)}function ks(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Br));else if(4!==r&&null!==(e=e.child))for(ks(e,t,n),e=e.sibling;null!==e;)ks(e,t,n),e=e.sibling}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,l=u;;)if(_s(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(_s(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function As(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ws=Vi(),ys(t.child,!0)),void Ts(t);case 19:return void Ts(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function Ts(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Vu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ps=Math.ceil,Is=w.ReactCurrentDispatcher,Rs=w.ReactCurrentOwner,Ls=0,Ms=null,Os=null,Fs=0,Ds=0,Ns=ui(0),js=0,Bs=null,Us=0,zs=0,Vs=0,Zs=0,Hs=null,Ws=0,Gs=1/0;function qs(){Gs=Vi()+500}var Ks,Js=null,Xs=!1,Ys=null,Qs=null,$s=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,lu=0,cu=null,du=!1;function fu(){return 0!==(48&Ls)?Vi():-1!==su?su:su=Vi()}function hu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Zi()?1:2;if(0===uu&&(uu=Us),0!==Ji.transition){0!==lu&&(lu=null!==Hs?Hs.pendingLanes:0),e=uu;var t=4186112&~lu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Zi(),0!==(4&Ls)&&98===e?e=Bt(12,uu):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;Vt(e,t,n),e===Ms&&(Vs|=t,4===js&&yu(e,Fs));var r=Zi();1===t?0!==(8&Ls)&&0===(48&Ls)?_u(e):(mu(e,n),0===Ls&&(qs(),qi())):(0===(4&Ls)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Hs=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Zt(s),l=1<<u,c=a[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=t,Dt(l);var d=Ft;a[u]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=Nt(e,e===Ms?Fs:0),t=Ft,0===r)null!==n&&(n!==Di&&Ai(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Di&&Ai(n)}15===t?(n=_u.bind(null,e),null===ji?(ji=[n],Bi=Ei(Ri,Ki)):ji.push(n),n=Di):14===t?n=Gi(99,_u.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,lu=uu=0,0!==(48&Ls))throw Error(o(327));var t=e.callbackNode;if(Fu()&&e.callbackNode!==t)return null;var n=Nt(e,e===Ms?Fs:0);if(0===n)return null;var r=n,i=Ls;Ls|=16;var a=Au();for(Ms===e&&Fs===r||(qs(),Su(e,r));;)try{Pu();break}catch(u){Eu(e,u)}if(ta(),Is.current=a,Ls=i,null!==Os?r=0:(Ms=null,Fs=0,r=js),0!==(Us&Vs))Su(e,0);else if(0!==r){if(2===r&&(Ls|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Tu(e,n))),1===r)throw t=Bs,Su(e,0),yu(e,n),mu(e,Vi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Lu(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Ws+500-Vi())){if(0!==Nt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Lu.bind(null,e),r);break}Lu(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Zt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Vi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ps(n/1960))-n)){e.timeoutHandle=Hr(Lu.bind(null,e),n);break}Lu(e);break;default:throw Error(o(329))}}return mu(e,Vi()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~Zs,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zt(t),r=1<<n;e[n]=-1,t&=~r}}function _u(e){if(0!==(48&Ls))throw Error(o(327));if(Fu(),e===Ms&&0!==(e.expiredLanes&Fs)){var t=Fs,n=Tu(e,t);0!==(Us&Vs)&&(n=Tu(e,t=Nt(e,t)))}else n=Tu(e,t=Nt(e,0));if(0!==e.tag&&2===n&&(Ls|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Tu(e,t))),1===n)throw n=Bs,Su(e,0),yu(e,t),mu(e,Vi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lu(e),mu(e,Vi()),null}function bu(e,t){var n=Ls;Ls|=1;try{return e(t)}finally{0===(Ls=n)&&(qs(),qi())}}function wu(e,t){var n=Ls;Ls&=-2,Ls|=8;try{return e(t)}finally{0===(Ls=n)&&(qs(),qi())}}function xu(e,t){ci(Ns,Ds),Ds|=t,Us|=t}function ku(){Ds=Ns.current,li(Ns)}function Su(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Ma(),li(hi),li(fi),Ka();break;case 5:Fa(r);break;case 4:Ma();break;case 13:case 19:li(Da);break;case 10:na(r);break;case 23:case 24:ku()}n=n.return}Ms=e,Os=Gu(e.current,null),Fs=Ds=Us=t,js=0,Bs=null,Zs=Vs=zs=0}function Eu(e,t){for(;;){var n=Os;try{if(ta(),Ja.current=Ro,to){for(var r=Qa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Ya=0,eo=$a=Qa=null,no=!1,Rs.current=null,null===n||null===n.return){js=1,Bs=t,Os=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Fs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Da.current),f=o;do{var h;if(h=13===f.tag){var p=f.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var v=f.memoizedProps;h=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!d)}}if(h){var m=f.updateQueue;if(null===m){var g=new Set;g.add(l),f.updateQueue=g}else m.add(l);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=la(-1,1);y.tag=2,ca(s,y)}s.lanes|=1;break e}u=void 0,s=t;var _=a.pingCache;if(null===_?(_=a.pingCache=new ds,u=new Set,_.set(l,u)):void 0===(u=_.get(l))&&(u=new Set,_.set(l,u)),!u.has(s)){u.add(s);var b=zu.bind(null,a,l,s);l.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((q(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),u=ls(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,da(f,fs(0,a,t));break e;case 1:a=u;var w=f.type,x=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Qs||!Qs.has(x)))){f.flags|=4096,t&=-t,f.lanes|=t,da(f,hs(f,a,t));break e}}f=f.return}while(null!==f)}Ru(n)}catch(k){t=k,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function Au(){var e=Is.current;return Is.current=Ro,null===e?Ro:e}function Tu(e,t){var n=Ls;Ls|=16;var r=Au();for(Ms===e&&Fs===t||Su(e,t);;)try{Cu();break}catch(i){Eu(e,i)}if(ta(),Ls=n,Is.current=r,null!==Os)throw Error(o(261));return Ms=null,Fs=0,js}function Cu(){for(;null!==Os;)Iu(Os)}function Pu(){for(;null!==Os&&!Ti();)Iu(Os)}function Iu(e){var t=Ks(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?Ru(e):Os=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ds)))return void(Os=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ds)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Os=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===js&&(js=5)}function Lu(e){var t=Zi();return Wi(99,Mu.bind(null,e,t)),null}function Mu(e,t){do{Fu()}while(null!==eu);if(0!==(48&Ls))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var l=31-Zt(a),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,a&=~c}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Ms&&(Os=Ms=null,Fs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ls,Ls|=32,Rs.current=null,Ur=Kt,mr(s=vr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,a=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(A){u=null;break e}var d=0,f=-1,h=-1,p=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==u||0!==a&&3!==m.nodeType||(f=d+a),m!==l||0!==c&&3!==m.nodeType||(h=d+c),3===m.nodeType&&(d+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===u&&++p===a&&(f=d),g===l&&++v===c&&(h=d),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===f||-1===h?null:{start:f,end:h}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:s,selectionRange:u},Kt=!1,cu=null,du=!1,Js=r;do{try{Ou()}catch(A){if(null===Js)throw Error(o(330));Uu(Js,A),Js=Js.nextEffect}}while(null!==Js);cu=null,Js=r;do{try{for(s=e;null!==Js;){var _=Js.flags;if(16&_&&ge(Js.stateNode,""),128&_){var b=Js.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&_){case 2:xs(Js),Js.flags&=-3;break;case 6:xs(Js),Js.flags&=-3,As(Js.alternate,Js);break;case 1024:Js.flags&=-1025;break;case 1028:Js.flags&=-1025,As(Js.alternate,Js);break;case 4:As(Js.alternate,Js);break;case 8:Es(s,u=Js);var x=u.alternate;bs(u),null!==x&&bs(x)}Js=Js.nextEffect}}catch(A){if(null===Js)throw Error(o(330));Uu(Js,A),Js=Js.nextEffect}}while(null!==Js);if(w=zr,b=vr(),_=w.focusedElem,s=w.selectionRange,b!==_&&_&&_.ownerDocument&&pr(_.ownerDocument.documentElement,_)){null!==s&&mr(_)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(w,_.value.length)):(w=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),u=_.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!w.extend&&x>s&&(u=s,s=x,x=u),u=hr(_,x),a=hr(_,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),x>s?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=_;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(w=b[_]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Kt=!!Ur,zr=Ur=null,e.current=n,Js=r;do{try{for(_=e;null!==Js;){var k=Js.flags;if(36&k&&gs(_,Js.alternate,Js),128&k){b=void 0;var S=Js.ref;if(null!==S){var E=Js.stateNode;Js.tag,b=E,"function"===typeof S?S(b):S.current=b}}Js=Js.nextEffect}}catch(A){if(null===Js)throw Error(o(330));Uu(Js,A),Js=Js.nextEffect}}while(null!==Js);Js=null,Ni(),Ls=i}else e.current=n;if($s)$s=!1,eu=e,tu=t;else for(Js=r;null!==Js;)t=Js.nextEffect,Js.nextEffect=null,8&Js.flags&&((k=Js).sibling=null,k.stateNode=null),Js=t;if(0===(r=e.pendingLanes)&&(Qs=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,ki&&"function"===typeof ki.onCommitFiberRoot)try{ki.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(A){}if(mu(e,Vi()),Xs)throw Xs=!1,e=Ys,Ys=null,e;return 0!==(8&Ls)||qi(),null}function Ou(){for(;null!==Js;){var e=Js.alternate;du||null===cu||(0!==(8&Js.flags)?$e(Js,cu)&&(du=!0):13===Js.tag&&Cs(e,Js)&&$e(Js,cu)&&(du=!0));var t=Js.flags;0!==(256&t)&&ms(e,Js),0===(512&t)||$s||($s=!0,Gi(97,(function(){return Fu(),null}))),Js=Js.nextEffect}}function Fu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Wi(e,ju)}return!1}function Du(e,t){nu.push(t,e),$s||($s=!0,Gi(97,(function(){return Fu(),null})))}function Nu(e,t){ru.push(t,e),$s||($s=!0,Gi(97,(function(){return Fu(),null})))}function ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ls))throw Error(o(331));var t=Ls;Ls|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===a)throw Error(o(330));Uu(a,l)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===a)throw Error(o(330));Uu(a,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ls=t,qi(),!0}function Bu(e,t,n){ca(e,t=fs(0,t=ls(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(Vt(e,1,t),mu(e,t))}function Uu(e,t){if(3===e.tag)Bu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Bu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){var i=hs(n,e=ls(t,e),1);if(ca(n,i),i=fu(),null!==(n=vu(n,1)))Vt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function zu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Ms===e&&(Fs&n)===n&&(4===js||3===js&&(62914560&Fs)===Fs&&500>Vi()-Ws?Su(e,0):Zs|=n),mu(e,t)}function Vu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Zi()?1:2:(0===uu&&(uu=Us),0===(t=Ut(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(Vt(e,t,n),mu(e,n))}function Zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hu(e,t,n,r){return new Zu(e,t,n,r)}function Wu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=Hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Wu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Ku(n.children,i,a,t);case D:s=8,i|=16;break;case E:s=8,i|=1;break;case A:return(e=Hu(12,n,t,8|i)).elementType=A,e.type=A,e.lanes=a,e;case I:return(e=Hu(13,n,t,i)).type=I,e.elementType=I,e.lanes=a,e;case R:return(e=Hu(19,n,t,i)).elementType=R,e.lanes=a,e;case N:return Ju(n,i,a,t);case j:return(e=Hu(24,n,t,i)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case C:s=9;break e;case P:s=11;break e;case L:s=14;break e;case M:s=16,r=null;break e;case O:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ku(e,t,n,r){return(e=Hu(7,e,r,t)).lanes=n,e}function Ju(e,t,n,r){return(e=Hu(23,e,r,t)).elementType=N,e.lanes=n,e}function Xu(e,t,n){return(e=Hu(6,e,null,t)).lanes=n,e}function Yu(e,t,n){return(t=Hu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n,r){var i=t.current,a=fu(),s=hu(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(mi(l)){n=_i(n,l,u);break e}}n=u}else n=di;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ca(i,t),pu(i,s,a),s}function el(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nl(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function rl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Qu(e,t,null!=n&&!0===n.hydrate),t=Hu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[$r]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function il(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function al(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=el(o);s.call(e)}}$u(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rl(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=el(o);u.call(e)}}wu((function(){$u(t,o,e,i)}))}return el(o)}function ol(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!il(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ks=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||hi.current)Do=!0;else{if(0===(n&r)){switch(Do=!1,t.tag){case 3:Go(t),Ga();break;case 5:Oa(t);break;case 1:mi(t.type)&&bi(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ci(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Qo(e,t,n):(ci(Da,1&Da.current),null!==(t=as(e,t,n))?t.sibling:null);ci(Da,1&Da.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ci(Da,Da.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return as(e,t,n)}Do=0!==(16384&e.flags)}else Do=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=vi(t,fi.current),ia(t,n),i=ao(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&va(t,r,s,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,No(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Wu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===L)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Zo(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Bo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Zo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ua(e,t),fa(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ba=qr(t.stateNode.containerInfo.firstChild),ja=t,a=Ua=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],qa.push(a);for(n=Aa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else No(e,t,r,n),Ga();t=t.child}return t;case 5:return Oa(t),null===e&&Za(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Zr(r,i)?s=null:null!==a&&Zr(r,a)&&(t.flags|=16),Vo(e,t),No(e,t,s,n),t.child;case 6:return null===e&&Za(t),null;case 13:return Qo(e,t,n);case 4:return La(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ea(t,null,r,n):No(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(ci(Yi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!hi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&a)){1===u.tag&&((c=la(-1,n&-n)).tag=2,ca(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),ra(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}No(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,ia(t,n),r=r(i=aa(i,a.unstable_observedBits)),t.flags|=1,No(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Bo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Uo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,ia(t,n),ya(t,r,i),ba(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},rl.prototype.render=function(e){$u(e,this._internalRoot,null,null)},rl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;$u(null,e,null,(function(){t[$r]=null}))},et=function(e){13===e.tag&&(pu(e,4,fu()),nl(e,4))},tt=function(e){13===e.tag&&(pu(e,67108864,fu()),nl(e,67108864))},nt=function(e){if(13===e.tag){var t=fu(),n=hu(e);pu(e,n,t),nl(e,n)}},rt=function(e,t){return t()},Ae=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));Y(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Le=bu,Me=function(e,t,n,r,i){var a=Ls;Ls|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ls=a)&&(qs(),qi())}},Oe=function(){0===(49&Ls)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,Vi())}))}qi()}(),Fu())},Fe=function(e,t){var n=Ls;Ls|=2;try{return e(t)}finally{0===(Ls=n)&&(qs(),qi())}};var sl={Events:[ni,ri,ii,Ie,Re,Fu,{current:!1}]},ul={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ll={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{xi=cl.inject(ll),ki=cl}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl,t.createPortal=ol,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ls;if(0!==(48&n))return e(t);Ls|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ls=n,qi()}},t.hydrate=function(e,t,n){if(!il(t))throw Error(o(200));return al(null,e,t,!0,n)},t.render=function(e,t,n){if(!il(t))throw Error(o(200));return al(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!il(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){al(null,null,e,!1,(function(){e._reactRootContainer=null,e[$r]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return ol(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!il(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return al(e,t,n,!1,r)},t.version="17.0.2"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case f:case h:return e;default:switch(e=e&&e.$$typeof){case c:case l:case d:case v:case p:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},7441:function(e,t,n){"use strict";n(1372)},1707:function(e,t,n){var r=n(7061).default;!function(e,t){"use strict";function n(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var u={init:"init"},l=function(e){var t=e.value;return void 0===t?"":t},c=function(){return t.createElement(t.Fragment,null,"\xa0")},d={Cell:l,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){var n=t.style,r=t.className;return e=a({},e,{},o(t,["style","className"])),n&&(e.style=e.style?a({},e.style||{},{},n||{}):n),r&&(e.className=e.className?e.className+" "+r:r),""===e.className&&delete e.className,e}),{})}var h=function(e,t){return void 0===t&&(t={}),function(n){return void 0===n&&(n={}),[].concat(e,[n]).reduce((function(e,r){return function e(t,n,r){return"function"==typeof n?e({},n(t,r)):Array.isArray(n)?f.apply(void 0,[t].concat(n)):f(t,n)}(e,r,a({},t,{userProps:n}))}),{})}},p=function(e,t,n,r){return void 0===n&&(n={}),e.reduce((function(e,t){return t(e,n)}),t)},v=function(e,t,n){return void 0===n&&(n={}),e.forEach((function(e){e(t,n)}))};function m(e,t,n,r){e.findIndex((function(e){return e.pluginName===n})),t.forEach((function(t){e.findIndex((function(e){return e.pluginName===t}))}))}function g(e,t){return"function"==typeof e?e(t):e}function y(e){var n=t.useRef();return n.current=e,t.useCallback((function(){return n.current}),[])}var _="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;function b(e,n){var r=t.useRef(!1);_((function(){r.current&&e(),r.current=!0}),n)}function w(e,t,n){return void 0===n&&(n={}),function(r,i){void 0===i&&(i={});var o="string"==typeof r?t[r]:r;if(void 0===o)throw console.info(t),new Error("Renderer Error \u261d\ufe0f");return x(o,a({},e,{column:t},n,{},i))}}function x(e,n){return function(e){return"function"==typeof e&&(t=Object.getPrototypeOf(e)).prototype&&t.prototype.isReactComponent;var t}(r=e)||"function"==typeof r||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(r)?t.createElement(e,n):e;var r}function k(e,t,n){return void 0===n&&(n=0),e.map((function(e){return E(e=a({},e,{parent:t,depth:n})),e.columns&&(e.columns=k(e.columns,e,n+1)),e}))}function S(e){return R(e,"columns")}function E(e){var t=e.id,n=e.accessor,r=e.Header;if("string"==typeof n){t=t||n;var i=n.split(".");n=function(e){return function(e,t,n){if(!t)return e;var r,i="function"==typeof t?t:JSON.stringify(t),a=C.get(i)||function(){var e=function(e){return function e(t,n){if(void 0===n&&(n=[]),Array.isArray(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(e).map((function(e){return String(e).replace(".","_")})).join(".").replace(N,".").replace(j,"").split(".")}(t);return C.set(i,e),e}();try{r=a.reduce((function(e,t){return e[t]}),e)}catch(e){}return void 0!==r?r:n}(e,i)}}if(!t&&"string"==typeof r&&r&&(t=r),!t&&e.columns)throw console.error(e),new Error('A column ID (or unique "Header" value) is required!');if(!t)throw console.error(e),new Error("A column ID (or string accessor) is required!");return Object.assign(e,{id:t,accessor:n}),e}function A(e,t){if(!t)throw new Error;return Object.assign(e,a({Header:c,Footer:c},d,{},t,{},e)),Object.assign(e,{originalWidth:e.width}),e}function T(e,t,n){void 0===n&&(n=function(){return{}});for(var r=[],i=e,o=0,s=function(){return o++},u=function(){var e={headers:[]},o=[],u=i.some((function(e){return e.parent}));i.forEach((function(r){var i,l=[].concat(o).reverse()[0];u&&(i=r.parent?a({},r.parent,{originalId:r.parent.id,id:r.parent.id+"_"+s(),headers:[r]},n(r)):A(a({originalId:r.id+"_placeholder",id:r.id+"_placeholder_"+s(),placeholderOf:r,headers:[r]},n(r)),t),l&&l.originalId===i.originalId?l.headers.push(r):o.push(i)),e.headers.push(r)})),r.push(e),i=o};i.length;)u();return r.reverse()}var C=new Map;function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=1)if(void 0!==t[r])return t[r]}function I(e){if("function"==typeof e)return e}function R(e,t){var n=[];return function e(r){r.forEach((function(r){r[t]?e(r[t]):n.push(r)}))}(e),n}function L(e,t){var n=t.manualExpandedKey,r=t.expanded,i=t.expandSubRows,a=void 0===i||i,o=[];return e.forEach((function(e){return function e(t,i){void 0===i&&(i=!0),t.isExpanded=t.original&&t.original[n]||r[t.id],t.canExpand=t.subRows&&!!t.subRows.length,i&&o.push(t),t.subRows&&t.subRows.length&&t.isExpanded&&t.subRows.forEach((function(t){return e(t,a)}))}(e)})),o}function M(e,t,n){return I(e)||t[e]||n[e]||n.text}function O(e,t,n){return e?e(t,n):void 0===t}function F(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var D=null,N=/\[/g,j=/\]/g,B=function(e){return a({role:"table"},e)},U=function(e){return a({role:"rowgroup"},e)},z=function(e,t){var n=t.column;return a({key:"header_"+n.id,colSpan:n.totalVisibleHeaderCount,role:"columnheader"},e)},V=function(e,t){var n=t.column;return a({key:"footer_"+n.id,colSpan:n.totalVisibleHeaderCount},e)},Z=function(e,t){return a({key:"headerGroup_"+t.index,role:"row"},e)},H=function(e,t){return a({key:"footerGroup_"+t.index},e)},W=function(e,t){return a({key:"row_"+t.row.id,role:"row"},e)},G=function(e,t){var n=t.cell;return a({key:"cell_"+n.row.id+"_"+n.column.id,role:"cell"},e)};function q(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[B],getTableBodyProps:[U],getHeaderGroupProps:[Z],getFooterGroupProps:[H],getHeaderProps:[z],getFooterProps:[V],getRowProps:[W],getCellProps:[G],useFinalInstance:[]}}u.resetHiddenColumns="resetHiddenColumns",u.toggleHideColumn="toggleHideColumn",u.setHiddenColumns="setHiddenColumns",u.toggleHideAllColumns="toggleHideAllColumns";var K=function(e){e.getToggleHiddenProps=[J],e.getToggleHideAllColumnsProps=[X],e.stateReducers.push(Y),e.useInstanceBeforeDimensions.push(Q),e.headerGroupsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.hiddenColumns])})),e.useInstance.push($)};K.pluginName="useColumnVisibility";var J=function(e,t){var n=t.column;return[e,{onChange:function(e){n.toggleHidden(!e.target.checked)},style:{cursor:"pointer"},checked:n.isVisible,title:"Toggle Column Visible"}]},X=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleHideAllColumns(!e.target.checked)},style:{cursor:"pointer"},checked:!n.allColumnsHidden&&!n.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!n.allColumnsHidden&&n.state.hiddenColumns.length}]};function Y(e,t,n,r){if(t.type===u.init)return a({hiddenColumns:[]},e);if(t.type===u.resetHiddenColumns)return a({},e,{hiddenColumns:r.initialState.hiddenColumns||[]});if(t.type===u.toggleHideColumn){var i=(void 0!==t.value?t.value:!e.hiddenColumns.includes(t.columnId))?[].concat(e.hiddenColumns,[t.columnId]):e.hiddenColumns.filter((function(e){return e!==t.columnId}));return a({},e,{hiddenColumns:i})}return t.type===u.setHiddenColumns?a({},e,{hiddenColumns:g(t.value,e.hiddenColumns)}):t.type===u.toggleHideAllColumns?a({},e,{hiddenColumns:(void 0!==t.value?t.value:!e.hiddenColumns.length)?r.allColumns.map((function(e){return e.id})):[]}):void 0}function Q(e){var n=e.headers,r=e.state.hiddenColumns;t.useRef(!1).current;var i=0;n.forEach((function(e){return i+=function e(t,n){t.isVisible=n&&!r.includes(t.id);var i=0;return t.headers&&t.headers.length?t.headers.forEach((function(n){return i+=e(n,t.isVisible)})):i=t.isVisible?1:0,t.totalVisibleHeaderCount=i,i}(e,!0)}))}function $(e){var n=e.columns,r=e.flatHeaders,i=e.dispatch,a=e.allColumns,o=e.getHooks,s=e.state.hiddenColumns,l=e.autoResetHiddenColumns,c=void 0===l||l,d=y(e),f=a.length===s.length,p=t.useCallback((function(e,t){return i({type:u.toggleHideColumn,columnId:e,value:t})}),[i]),v=t.useCallback((function(e){return i({type:u.setHiddenColumns,value:e})}),[i]),m=t.useCallback((function(e){return i({type:u.toggleHideAllColumns,value:e})}),[i]),g=h(o().getToggleHideAllColumnsProps,{instance:d()});r.forEach((function(e){e.toggleHidden=function(t){i({type:u.toggleHideColumn,columnId:e.id,value:t})},e.getToggleHiddenProps=h(o().getToggleHiddenProps,{instance:d(),column:e})}));var _=y(c);b((function(){_()&&i({type:u.resetHiddenColumns})}),[i,n]),Object.assign(e,{allColumnsHidden:f,toggleHideColumn:p,setHiddenColumns:v,toggleHideAllColumns:m,getToggleHideAllColumnsProps:g})}var ee={},te={},ne=function(e,t,n){return e},re=function(e,t){return e.subRows||[]},ie=function(e,t,n){return""+(n?[n.id,t].join("."):t)},ae=function(e){return e};function oe(e){var t=e.initialState,n=void 0===t?ee:t,r=e.defaultColumn,i=void 0===r?te:r,s=e.getSubRows,u=void 0===s?re:s,l=e.getRowId,c=void 0===l?ie:l,d=e.stateReducer,f=void 0===d?ne:d,h=e.useControlledState,p=void 0===h?ae:h;return a({},o(e,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:n,defaultColumn:i,getSubRows:u,getRowId:c,stateReducer:f,useControlledState:p})}function se(e,t){void 0===t&&(t=0);var n=0,r=0,i=0,a=0;return e.forEach((function(e){var o=e.headers;if(e.totalLeft=t,o&&o.length){var s=se(o,t),u=s[0],l=s[1],c=s[2],d=s[3];e.totalMinWidth=u,e.totalWidth=l,e.totalMaxWidth=c,e.totalFlexWidth=d}else e.totalMinWidth=e.minWidth,e.totalWidth=Math.min(Math.max(e.minWidth,e.width),e.maxWidth),e.totalMaxWidth=e.maxWidth,e.totalFlexWidth=e.canResize?e.totalWidth:0;e.isVisible&&(t+=e.totalWidth,n+=e.totalMinWidth,r+=e.totalWidth,i+=e.totalMaxWidth,a+=e.totalFlexWidth)})),[n,r,i,a]}function ue(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.rowsById,a=e.column,o=e.getRowId,s=e.getSubRows,u=e.accessValueHooks,l=e.getInstance;t.forEach((function(e,c){return function e(n,c,d,f,h){void 0===d&&(d=0);var v=n,m=o(n,c,f),g=i[m];if(g)g.subRows&&g.originalSubRows.forEach((function(t,n){return e(t,n,d+1,g)}));else if((g={id:m,original:v,index:c,depth:d,cells:[{}]}).cells.map=F,g.cells.filter=F,g.cells.forEach=F,g.cells[0].getCellProps=F,g.values={},h.push(g),r.push(g),i[m]=g,g.originalSubRows=s(n,c),g.originalSubRows){var y=[];g.originalSubRows.forEach((function(t,n){return e(t,n,d+1,g,y)})),g.subRows=y}a.accessor&&(g.values[a.id]=a.accessor(n,c,g,h,t)),g.values[a.id]=p(u,g.values[a.id],{row:g,column:a,instance:l()})}(e,c,0,void 0,n)}))}u.resetExpanded="resetExpanded",u.toggleRowExpanded="toggleRowExpanded",u.toggleAllRowsExpanded="toggleAllRowsExpanded";var le=function(e){e.getToggleAllRowsExpandedProps=[ce],e.getToggleRowExpandedProps=[de],e.stateReducers.push(fe),e.useInstance.push(he),e.prepareRow.push(pe)};le.pluginName="useExpanded";var ce=function(e,t){var n=t.instance;return[e,{onClick:function(e){n.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},de=function(e,t){var n=t.row;return[e,{onClick:function(){n.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function fe(e,t,n,r){if(t.type===u.init)return a({expanded:{}},e);if(t.type===u.resetExpanded)return a({},e,{expanded:r.initialState.expanded||{}});if(t.type===u.toggleAllRowsExpanded){var i=t.value,l=r.rowsById,c=Object.keys(l).length===Object.keys(e.expanded).length;if(void 0!==i?i:!c){var d={};return Object.keys(l).forEach((function(e){d[e]=!0})),a({},e,{expanded:d})}return a({},e,{expanded:{}})}if(t.type===u.toggleRowExpanded){var f,h=t.id,p=t.value,v=e.expanded[h],m=void 0!==p?p:!v;if(!v&&m)return a({},e,{expanded:a({},e.expanded,(f={},f[h]=!0,f))});if(v&&!m){var g=e.expanded;return g[h],a({},e,{expanded:o(g,[h].map(s))})}return e}}function he(e){var n=e.data,r=e.rows,i=e.rowsById,a=e.manualExpandedKey,o=void 0===a?"expanded":a,s=e.paginateExpandedRows,l=void 0===s||s,c=e.expandSubRows,d=void 0===c||c,f=e.autoResetExpanded,p=void 0===f||f,v=e.getHooks,g=e.plugins,_=e.state.expanded,w=e.dispatch;m(g,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var x=y(p),k=Boolean(Object.keys(i).length&&Object.keys(_).length);k&&Object.keys(i).some((function(e){return!_[e]}))&&(k=!1),b((function(){x()&&w({type:u.resetExpanded})}),[w,n]);var S=t.useCallback((function(e,t){w({type:u.toggleRowExpanded,id:e,value:t})}),[w]),E=t.useCallback((function(e){return w({type:u.toggleAllRowsExpanded,value:e})}),[w]),A=t.useMemo((function(){return l?L(r,{manualExpandedKey:o,expanded:_,expandSubRows:d}):r}),[l,r,o,_,d]),T=t.useMemo((function(){return function(e){var t=0;return Object.keys(e).forEach((function(e){var n=e.split(".");t=Math.max(t,n.length)})),t}(_)}),[_]),C=y(e),P=h(v().getToggleAllRowsExpandedProps,{instance:C()});Object.assign(e,{preExpandedRows:r,expandedRows:A,rows:A,expandedDepth:T,isAllRowsExpanded:k,toggleRowExpanded:S,toggleAllRowsExpanded:E,getToggleAllRowsExpandedProps:P})}function pe(e,t){var n=t.instance.getHooks,r=t.instance;e.toggleRowExpanded=function(t){return r.toggleRowExpanded(e.id,t)},e.getToggleRowExpandedProps=h(n().getToggleRowExpandedProps,{instance:r,row:e})}var ve=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return String(r).toLowerCase().includes(String(n).toLowerCase())}))}))};ve.autoRemove=function(e){return!e};var me=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return void 0===r||String(r).toLowerCase()===String(n).toLowerCase()}))}))};me.autoRemove=function(e){return!e};var ge=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return void 0===r||String(r)===String(n)}))}))};ge.autoRemove=function(e){return!e};var ye=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t].includes(n)}))}))};ye.autoRemove=function(e){return!e||!e.length};var _e=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return r&&r.length&&n.every((function(e){return r.includes(e)}))}))}))};_e.autoRemove=function(e){return!e||!e.length};var be=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return r&&r.length&&n.some((function(e){return r.includes(e)}))}))}))};be.autoRemove=function(e){return!e||!e.length};var we=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return n.includes(r)}))}))};we.autoRemove=function(e){return!e||!e.length};var xe=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t]===n}))}))};xe.autoRemove=function(e){return void 0===e};var ke=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t]==n}))}))};ke.autoRemove=function(e){return null==e};var Se=function(e,t,n){var r=n||[],i=r[0],a=r[1];if((i="number"==typeof i?i:-1/0)>(a="number"==typeof a?a:1/0)){var o=i;i=a,a=o}return e.filter((function(e){return t.some((function(t){var n=e.values[t];return n>=i&&n<=a}))}))};Se.autoRemove=function(e){return!e||"number"!=typeof e[0]&&"number"!=typeof e[1]};var Ee=Object.freeze({__proto__:null,text:ve,exactText:me,exactTextCase:ge,includes:ye,includesAll:_e,includesSome:be,includesValue:we,exact:xe,equals:ke,between:Se});u.resetFilters="resetFilters",u.setFilter="setFilter",u.setAllFilters="setAllFilters";var Ae=function(e){e.stateReducers.push(Te),e.useInstance.push(Ce)};function Te(e,t,n,r){if(t.type===u.init)return a({filters:[]},e);if(t.type===u.resetFilters)return a({},e,{filters:r.initialState.filters||[]});if(t.type===u.setFilter){var i=t.columnId,o=t.filterValue,s=r.allColumns,l=r.filterTypes,c=s.find((function(e){return e.id===i}));if(!c)throw new Error("React-Table: Could not find a column with id: "+i);var d=M(c.filter,l||{},Ee),f=e.filters.find((function(e){return e.id===i})),h=g(o,f&&f.value);return O(d.autoRemove,h,c)?a({},e,{filters:e.filters.filter((function(e){return e.id!==i}))}):a({},e,f?{filters:e.filters.map((function(e){return e.id===i?{id:i,value:h}:e}))}:{filters:[].concat(e.filters,[{id:i,value:h}])})}if(t.type===u.setAllFilters){var p=t.filters,v=r.allColumns,m=r.filterTypes;return a({},e,{filters:g(p,e.filters).filter((function(e){var t=v.find((function(t){return t.id===e.id}));return!O(M(t.filter,m||{},Ee).autoRemove,e.value,t)}))})}}function Ce(e){var n=e.data,r=e.rows,i=e.flatRows,a=e.rowsById,o=e.allColumns,s=e.filterTypes,l=e.manualFilters,c=e.defaultCanFilter,d=void 0!==c&&c,f=e.disableFilters,h=e.state.filters,p=e.dispatch,v=e.autoResetFilters,m=void 0===v||v,g=t.useCallback((function(e,t){p({type:u.setFilter,columnId:e,filterValue:t})}),[p]),_=t.useCallback((function(e){p({type:u.setAllFilters,filters:e})}),[p]);o.forEach((function(e){var t=e.id,n=e.accessor,r=e.defaultCanFilter,i=e.disableFilters;e.canFilter=n?P(!0!==i&&void 0,!0!==f&&void 0,!0):P(r,d,!1),e.setFilter=function(t){return g(e.id,t)};var a=h.find((function(e){return e.id===t}));e.filterValue=a&&a.value}));var w=t.useMemo((function(){if(l||!h.length)return[r,i,a];var e=[],t={};return[function n(r,i){void 0===i&&(i=0);var a=r;return(a=h.reduce((function(e,t){var n=t.id,r=t.value,a=o.find((function(e){return e.id===n}));if(!a)return e;0===i&&(a.preFilteredRows=e);var u=M(a.filter,s||{},Ee);return u?(a.filteredRows=u(e,[n],r),a.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+a.id+"."),e)}),r)).forEach((function(r){e.push(r),t[r.id]=r,r.subRows&&(r.subRows=r.subRows&&r.subRows.length>0?n(r.subRows,i+1):r.subRows)})),a}(r),e,t]}),[l,h,r,i,a,o,s]),x=w[0],k=w[1],S=w[2];t.useMemo((function(){o.filter((function(e){return!h.find((function(t){return t.id===e.id}))})).forEach((function(e){e.preFilteredRows=x,e.filteredRows=x}))}),[x,h,o]);var E=y(m);b((function(){E()&&p({type:u.resetFilters})}),[p,l?null:n]),Object.assign(e,{preFilteredRows:r,preFilteredFlatRows:i,preFilteredRowsById:a,filteredRows:x,filteredFlatRows:k,filteredRowsById:S,rows:x,flatRows:k,rowsById:S,setFilter:g,setAllFilters:_})}Ae.pluginName="useFilters",u.resetGlobalFilter="resetGlobalFilter",u.setGlobalFilter="setGlobalFilter";var Pe=function(e){e.stateReducers.push(Ie),e.useInstance.push(Re)};function Ie(e,t,n,r){if(t.type===u.resetGlobalFilter)return a({},e,{globalFilter:r.initialState.globalFilter||void 0});if(t.type===u.setGlobalFilter){var i=t.filterValue,s=r.userFilterTypes,l=M(r.globalFilter,s||{},Ee),c=g(i,e.globalFilter);return O(l.autoRemove,c)?(e.globalFilter,o(e,["globalFilter"])):a({},e,{globalFilter:c})}}function Re(e){var n=e.data,r=e.rows,i=e.flatRows,a=e.rowsById,o=e.allColumns,s=e.filterTypes,l=e.globalFilter,c=e.manualGlobalFilter,d=e.state.globalFilter,f=e.dispatch,h=e.autoResetGlobalFilter,p=void 0===h||h,v=e.disableGlobalFilter,m=t.useCallback((function(e){f({type:u.setGlobalFilter,filterValue:e})}),[f]),g=t.useMemo((function(){if(c||void 0===d)return[r,i,a];var e=[],t={},n=M(l,s||{},Ee);if(!n)return console.warn("Could not find a valid 'globalFilter' option."),r;o.forEach((function(e){var t=e.disableGlobalFilter;e.canFilter=P(!0!==t&&void 0,!0!==v&&void 0,!0)}));var u=o.filter((function(e){return!0===e.canFilter}));return[function r(i){return(i=n(i,u.map((function(e){return e.id})),d)).forEach((function(n){e.push(n),t[n.id]=n,n.subRows=n.subRows&&n.subRows.length?r(n.subRows):n.subRows})),i}(r),e,t]}),[c,d,l,s,o,r,i,a,v]),_=g[0],w=g[1],x=g[2],k=y(p);b((function(){k()&&f({type:u.resetGlobalFilter})}),[f,c?null:n]),Object.assign(e,{preGlobalFilteredRows:r,preGlobalFilteredFlatRows:i,preGlobalFilteredRowsById:a,globalFilteredRows:_,globalFilteredFlatRows:w,globalFilteredRowsById:x,rows:_,flatRows:w,rowsById:x,setGlobalFilter:m,disableGlobalFilter:v})}function Le(e,t){return t.reduce((function(e,t){return e+("number"==typeof t?t:0)}),0)}Pe.pluginName="useGlobalFilter";var Me=Object.freeze({__proto__:null,sum:Le,min:function(e){var t=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.min(t,e))})),t},max:function(e){var t=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.max(t,e))})),t},minMax:function(e){var t=e[0]||0,n=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.min(t,e),n=Math.max(n,e))})),t+".."+n},average:function(e){return Le(0,e)/e.length},median:function(e){if(!e.length)return null;var t=Math.floor(e.length/2),n=[].concat(e).sort((function(e,t){return e-t}));return e.length%2!=0?n[t]:(n[t-1]+n[t])/2},unique:function(e){return Array.from(new Set(e).values())},uniqueCount:function(e){return new Set(e).size},count:function(e){return e.length}}),Oe=[],Fe={};u.resetGroupBy="resetGroupBy",u.setGroupBy="setGroupBy",u.toggleGroupBy="toggleGroupBy";var De=function(e){e.getGroupByToggleProps=[Ne],e.stateReducers.push(je),e.visibleColumnsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.groupBy])})),e.visibleColumns.push(Be),e.useInstance.push(ze),e.prepareRow.push(Ve)};De.pluginName="useGroupBy";var Ne=function(e,t){var n=t.header;return[e,{onClick:n.canGroupBy?function(e){e.persist(),n.toggleGroupBy()}:void 0,style:{cursor:n.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function je(e,t,n,r){if(t.type===u.init)return a({groupBy:[]},e);if(t.type===u.resetGroupBy)return a({},e,{groupBy:r.initialState.groupBy||[]});if(t.type===u.setGroupBy)return a({},e,{groupBy:t.value});if(t.type===u.toggleGroupBy){var i=t.columnId,o=t.value,s=void 0!==o?o:!e.groupBy.includes(i);return a({},e,s?{groupBy:[].concat(e.groupBy,[i])}:{groupBy:e.groupBy.filter((function(e){return e!==i}))})}}function Be(e,t){var n=t.instance.state.groupBy,r=n.map((function(t){return e.find((function(e){return e.id===t}))})).filter(Boolean),i=e.filter((function(e){return!n.includes(e.id)}));return(e=[].concat(r,i)).forEach((function(e){e.isGrouped=n.includes(e.id),e.groupedIndex=n.indexOf(e.id)})),e}var Ue={};function ze(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.rowsById,s=e.allColumns,l=e.flatHeaders,c=e.groupByFn,d=void 0===c?Ze:c,f=e.manualGroupBy,p=e.aggregations,v=void 0===p?Ue:p,g=e.plugins,_=e.state.groupBy,w=e.dispatch,x=e.autoResetGroupBy,k=void 0===x||x,S=e.disableGroupBy,E=e.defaultCanGroupBy,A=e.getHooks;m(g,["useColumnOrder","useFilters"],"useGroupBy");var T=y(e);s.forEach((function(t){var n=t.accessor,r=t.defaultGroupBy,i=t.disableGroupBy;t.canGroupBy=n?P(t.canGroupBy,!0!==i&&void 0,!0!==S&&void 0,!0):P(t.canGroupBy,r,E,!1),t.canGroupBy&&(t.toggleGroupBy=function(){return e.toggleGroupBy(t.id)}),t.Aggregated=t.Aggregated||t.Cell}));var C=t.useCallback((function(e,t){w({type:u.toggleGroupBy,columnId:e,value:t})}),[w]),I=t.useCallback((function(e){w({type:u.setGroupBy,value:e})}),[w]);l.forEach((function(e){e.getGroupByToggleProps=h(A().getGroupByToggleProps,{instance:T(),header:e})}));var L=t.useMemo((function(){if(f||!_.length)return[r,i,o,Oe,Fe,i,o];var e=_.filter((function(e){return s.find((function(t){return t.id===e}))})),t=[],n={},u=[],l={},c=[],h={},p=function r(i,o,f){if(void 0===o&&(o=0),o===e.length)return i.map((function(e){return a({},e,{depth:o})}));var p=e[o],m=d(i,p);return Object.entries(m).map((function(i,a){var d=i[0],m=i[1],g=p+":"+d,y=r(m,o+1,g=f?f+">"+g:g),_=o?R(m,"leafRows"):m,b=function(t,n,r){var i={};return s.forEach((function(a){if(e.includes(a.id))i[a.id]=n[0]?n[0].values[a.id]:null;else{var o="function"==typeof a.aggregate?a.aggregate:v[a.aggregate]||Me[a.aggregate];if(o){var s=n.map((function(e){return e.values[a.id]})),u=t.map((function(e){var t=e.values[a.id];if(!r&&a.aggregateValue){var n="function"==typeof a.aggregateValue?a.aggregateValue:v[a.aggregateValue]||Me[a.aggregateValue];if(!n)throw console.info({column:a}),new Error("React Table: Invalid column.aggregateValue option for column listed above");t=n(t,e,a)}return t}));i[a.id]=o(u,s)}else{if(a.aggregate)throw console.info({column:a}),new Error("React Table: Invalid column.aggregate option for column listed above");i[a.id]=null}}})),i}(_,m,o),w={id:g,isGrouped:!0,groupByID:p,groupByVal:d,values:b,subRows:y,leafRows:_,depth:o,index:a};return y.forEach((function(e){t.push(e),n[e.id]=e,e.isGrouped?(u.push(e),l[e.id]=e):(c.push(e),h[e.id]=e)})),w}))}(r);return p.forEach((function(e){t.push(e),n[e.id]=e,e.isGrouped?(u.push(e),l[e.id]=e):(c.push(e),h[e.id]=e)})),[p,t,n,u,l,c,h]}),[f,_,r,i,o,s,v,d]),M=L[0],O=L[1],F=L[2],D=L[3],N=L[4],j=L[5],B=L[6],U=y(k);b((function(){U()&&w({type:u.resetGroupBy})}),[w,f?null:n]),Object.assign(e,{preGroupedRows:r,preGroupedFlatRow:i,preGroupedRowsById:o,groupedRows:M,groupedFlatRows:O,groupedRowsById:F,onlyGroupedFlatRows:D,onlyGroupedRowsById:N,nonGroupedFlatRows:j,nonGroupedRowsById:B,rows:M,flatRows:O,rowsById:F,toggleGroupBy:C,setGroupBy:I})}function Ve(e){e.allCells.forEach((function(t){var n;t.isGrouped=t.column.isGrouped&&t.column.id===e.groupByID,t.isPlaceholder=!t.isGrouped&&t.column.isGrouped,t.isAggregated=!t.isGrouped&&!t.isPlaceholder&&(null==(n=e.subRows)?void 0:n.length)}))}function Ze(e,t){return e.reduce((function(e,n,r){var i=""+n.values[t];return e[i]=Array.isArray(e[i])?e[i]:[],e[i].push(n),e}),{})}var He=/([0-9]+)/gm;function We(e,t){return e===t?0:e>t?1:-1}function Ge(e,t,n){return[e.values[n],t.values[n]]}function qe(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}var Ke=Object.freeze({__proto__:null,alphanumeric:function(e,t,n){var r=Ge(e,t,n),i=r[0],a=r[1];for(i=qe(i),a=qe(a),i=i.split(He).filter(Boolean),a=a.split(He).filter(Boolean);i.length&&a.length;){var o=i.shift(),s=a.shift(),u=parseInt(o,10),l=parseInt(s,10),c=[u,l].sort();if(isNaN(c[0])){if(o>s)return 1;if(s>o)return-1}else{if(isNaN(c[1]))return isNaN(u)?-1:1;if(u>l)return 1;if(l>u)return-1}}return i.length-a.length},datetime:function(e,t,n){var r=Ge(e,t,n),i=r[0],a=r[1];return We(i=i.getTime(),a=a.getTime())},basic:function(e,t,n){var r=Ge(e,t,n);return We(r[0],r[1])},string:function(e,t,n){var r=Ge(e,t,n),i=r[0],a=r[1];for(i=i.split("").filter(Boolean),a=a.split("").filter(Boolean);i.length&&a.length;){var o=i.shift(),s=a.shift(),u=o.toLowerCase(),l=s.toLowerCase();if(u>l)return 1;if(l>u)return-1;if(o>s)return 1;if(s>o)return-1}return i.length-a.length},number:function(e,t,n){var r=Ge(e,t,n),i=r[0],a=r[1],o=/[^0-9.]/gi;return We(i=Number(String(i).replace(o,"")),a=Number(String(a).replace(o,"")))}});u.resetSortBy="resetSortBy",u.setSortBy="setSortBy",u.toggleSortBy="toggleSortBy",u.clearSortBy="clearSortBy",d.sortType="alphanumeric",d.sortDescFirst=!1;var Je=function(e){e.getSortByToggleProps=[Xe],e.stateReducers.push(Ye),e.useInstance.push(Qe)};Je.pluginName="useSortBy";var Xe=function(e,t){var n=t.instance,r=t.column,i=n.isMultiSortEvent,a=void 0===i?function(e){return e.shiftKey}:i;return[e,{onClick:r.canSort?function(e){e.persist(),r.toggleSortBy(void 0,!n.disableMultiSort&&a(e))}:void 0,style:{cursor:r.canSort?"pointer":void 0},title:r.canSort?"Toggle SortBy":void 0}]};function Ye(e,t,n,r){if(t.type===u.init)return a({sortBy:[]},e);if(t.type===u.resetSortBy)return a({},e,{sortBy:r.initialState.sortBy||[]});if(t.type===u.clearSortBy)return a({},e,{sortBy:e.sortBy.filter((function(e){return e.id!==t.columnId}))});if(t.type===u.setSortBy)return a({},e,{sortBy:t.sortBy});if(t.type===u.toggleSortBy){var i,o=t.columnId,s=t.desc,l=t.multi,c=r.allColumns,d=r.disableMultiSort,f=r.disableSortRemove,h=r.disableMultiRemove,p=r.maxMultiSortColCount,v=void 0===p?Number.MAX_SAFE_INTEGER:p,m=e.sortBy,g=c.find((function(e){return e.id===o})).sortDescFirst,y=m.find((function(e){return e.id===o})),_=m.findIndex((function(e){return e.id===o})),b=null!=s,w=[];return"toggle"!==(i=!d&&l?y?"toggle":"add":_!==m.length-1||1!==m.length?"replace":y?"toggle":"replace")||f||b||l&&h||!(y&&y.desc&&!g||!y.desc&&g)||(i="remove"),"replace"===i?w=[{id:o,desc:b?s:g}]:"add"===i?(w=[].concat(m,[{id:o,desc:b?s:g}])).splice(0,w.length-v):"toggle"===i?w=m.map((function(e){return e.id===o?a({},e,{desc:b?s:!y.desc}):e})):"remove"===i&&(w=m.filter((function(e){return e.id!==o}))),a({},e,{sortBy:w})}}function Qe(e){var n=e.data,r=e.rows,i=e.flatRows,a=e.allColumns,o=e.orderByFn,s=void 0===o?$e:o,l=e.sortTypes,c=e.manualSortBy,d=e.defaultCanSort,f=e.disableSortBy,p=e.flatHeaders,v=e.state.sortBy,g=e.dispatch,_=e.plugins,w=e.getHooks,x=e.autoResetSortBy,k=void 0===x||x;m(_,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var S=t.useCallback((function(e){g({type:u.setSortBy,sortBy:e})}),[g]),E=t.useCallback((function(e,t,n){g({type:u.toggleSortBy,columnId:e,desc:t,multi:n})}),[g]),A=y(e);p.forEach((function(e){var t=e.accessor,n=e.canSort,r=e.disableSortBy,i=e.id,a=t?P(!0!==r&&void 0,!0!==f&&void 0,!0):P(d,n,!1);e.canSort=a,e.canSort&&(e.toggleSortBy=function(t,n){return E(e.id,t,n)},e.clearSortBy=function(){g({type:u.clearSortBy,columnId:e.id})}),e.getSortByToggleProps=h(w().getSortByToggleProps,{instance:A(),column:e});var o=v.find((function(e){return e.id===i}));e.isSorted=!!o,e.sortedIndex=v.findIndex((function(e){return e.id===i})),e.isSortedDesc=e.isSorted?o.desc:void 0}));var T=t.useMemo((function(){if(c||!v.length)return[r,i];var e=[],t=v.filter((function(e){return a.find((function(t){return t.id===e.id}))}));return[function n(r){var i=s(r,t.map((function(e){var t=a.find((function(t){return t.id===e.id}));if(!t)throw new Error("React-Table: Could not find a column with id: "+e.id+" while sorting");var n=t.sortType,r=I(n)||(l||{})[n]||Ke[n];if(!r)throw new Error("React-Table: Could not find a valid sortType of '"+n+"' for column '"+e.id+"'.");return function(t,n){return r(t,n,e.id,e.desc)}})),t.map((function(e){var t=a.find((function(t){return t.id===e.id}));return t&&t.sortInverted?e.desc:!e.desc})));return i.forEach((function(t){e.push(t),t.subRows&&0!==t.subRows.length&&(t.subRows=n(t.subRows))})),i}(r),e]}),[c,v,r,i,a,s,l]),C=T[0],R=T[1],L=y(k);b((function(){L()&&g({type:u.resetSortBy})}),[c?null:n]),Object.assign(e,{preSortedRows:r,preSortedFlatRows:i,sortedRows:C,sortedFlatRows:R,rows:C,flatRows:R,setSortBy:S,toggleSortBy:E})}function $e(e,t,n){return[].concat(e).sort((function(e,r){for(var i=0;i<t.length;i+=1){var a=t[i],o=!1===n[i]||"desc"===n[i],s=a(e,r);if(0!==s)return o?-s:s}return n[0]?e.index-r.index:r.index-e.index}))}u.resetPage="resetPage",u.gotoPage="gotoPage",u.setPageSize="setPageSize";var et=function(e){e.stateReducers.push(tt),e.useInstance.push(nt)};function tt(e,t,n,r){if(t.type===u.init)return a({pageSize:10,pageIndex:0},e);if(t.type===u.resetPage)return a({},e,{pageIndex:r.initialState.pageIndex||0});if(t.type===u.gotoPage){var i=r.pageCount,o=r.page,s=g(t.pageIndex,e.pageIndex),l=!1;return s>e.pageIndex?l=-1===i?o.length>=e.pageSize:s<i:s<e.pageIndex&&(l=s>-1),l?a({},e,{pageIndex:s}):e}if(t.type===u.setPageSize){var c=t.pageSize,d=e.pageSize*e.pageIndex;return a({},e,{pageIndex:Math.floor(d/c),pageSize:c})}}function nt(e){var n=e.rows,r=e.autoResetPage,i=void 0===r||r,a=e.manualExpandedKey,o=void 0===a?"expanded":a,s=e.plugins,l=e.pageCount,c=e.paginateExpandedRows,d=void 0===c||c,f=e.expandSubRows,h=void 0===f||f,p=e.state,v=p.pageSize,g=p.pageIndex,_=p.expanded,w=p.globalFilter,x=p.filters,k=p.groupBy,S=p.sortBy,E=e.dispatch,A=e.data,T=e.manualPagination;m(s,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var C=y(i);b((function(){C()&&E({type:u.resetPage})}),[E,T?null:A,w,x,k,S]);var P=T?l:Math.ceil(n.length/v),I=t.useMemo((function(){return P>0?[].concat(new Array(P)).fill(null).map((function(e,t){return t})):[]}),[P]),R=t.useMemo((function(){var e;if(T)e=n;else{var t=v*g,r=t+v;e=n.slice(t,r)}return d?e:L(e,{manualExpandedKey:o,expanded:_,expandSubRows:h})}),[h,_,o,T,g,v,d,n]),M=g>0,O=-1===P?R.length>=v:g<P-1,F=t.useCallback((function(e){E({type:u.gotoPage,pageIndex:e})}),[E]),D=t.useCallback((function(){return F((function(e){return e-1}))}),[F]),N=t.useCallback((function(){return F((function(e){return e+1}))}),[F]),j=t.useCallback((function(e){E({type:u.setPageSize,pageSize:e})}),[E]);Object.assign(e,{pageOptions:I,pageCount:P,page:R,canPreviousPage:M,canNextPage:O,gotoPage:F,previousPage:D,nextPage:N,setPageSize:j})}et.pluginName="usePagination",u.resetPivot="resetPivot",u.togglePivot="togglePivot";var rt=function(e){e.getPivotToggleProps=[at],e.stateReducers.push(ot),e.useInstanceAfterData.push(st),e.allColumns.push(ut),e.accessValue.push(lt),e.materializedColumns.push(ct),e.materializedColumnsDeps.push(dt),e.visibleColumns.push(ft),e.visibleColumnsDeps.push(ht),e.useInstance.push(pt),e.prepareRow.push(vt)};rt.pluginName="usePivotColumns";var it=[],at=function(e,t){var n=t.header;return[e,{onClick:n.canPivot?function(e){e.persist(),n.togglePivot()}:void 0,style:{cursor:n.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function ot(e,t,n,r){if(t.type===u.init)return a({pivotColumns:it},e);if(t.type===u.resetPivot)return a({},e,{pivotColumns:r.initialState.pivotColumns||it});if(t.type===u.togglePivot){var i=t.columnId,o=t.value,s=void 0!==o?o:!e.pivotColumns.includes(i);return a({},e,s?{pivotColumns:[].concat(e.pivotColumns,[i])}:{pivotColumns:e.pivotColumns.filter((function(e){return e!==i}))})}}function st(e){e.allColumns.forEach((function(t){t.isPivotSource=e.state.pivotColumns.includes(t.id)}))}function ut(e,t){var n=t.instance;return e.forEach((function(e){e.isPivotSource=n.state.pivotColumns.includes(e.id),e.uniqueValues=new Set})),e}function lt(e,t){var n=t.column;return n.uniqueValues&&void 0!==e&&n.uniqueValues.add(e),e}function ct(e,t){var n=t.instance,r=n.allColumns,i=n.state;if(!i.pivotColumns.length||!i.groupBy||!i.groupBy.length)return e;var o=i.pivotColumns.map((function(e){return r.find((function(t){return t.id===e}))})).filter(Boolean),s=r.filter((function(e){return!e.isPivotSource&&!i.groupBy.includes(e.id)&&!i.pivotColumns.includes(e.id)})),u=S(function e(t,n,r){void 0===t&&(t=0),void 0===r&&(r=[]);var i=o[t];return i?Array.from(i.uniqueValues).sort().map((function(o){var s=a({},i,{Header:i.PivotHeader||"string"==typeof i.header?i.Header+": "+o:o,isPivotGroup:!0,parent:n,depth:t,id:n?n.id+"."+i.id+"."+o:i.id+"."+o,pivotValue:o});return s.columns=e(t+1,s,[].concat(r,[function(e){return e.values[i.id]===o}])),s})):s.map((function(e){return a({},e,{canPivot:!1,isPivoted:!0,parent:n,depth:t,id:""+(n?n.id+"."+e.id:e.id),accessor:function(t,n,i){if(r.every((function(e){return e(i)})))return i.values[e.id]}})}))}());return[].concat(e,u)}function dt(e,t){var n=t.instance.state,r=n.pivotColumns,i=n.groupBy;return[].concat(e,[r,i])}function ft(e,t){var n=t.instance.state;return e=e.filter((function(e){return!e.isPivotSource})),n.pivotColumns.length&&n.groupBy&&n.groupBy.length&&(e=e.filter((function(e){return e.isGrouped||e.isPivoted}))),e}function ht(e,t){var n=t.instance;return[].concat(e,[n.state.pivotColumns,n.state.groupBy])}function pt(e){var t=e.columns,n=e.allColumns,r=e.flatHeaders,i=e.getHooks,a=e.plugins,o=e.dispatch,s=e.autoResetPivot,l=void 0===s||s,c=e.manaulPivot,d=e.disablePivot,f=e.defaultCanPivot;m(a,["useGroupBy"],"usePivotColumns");var p=y(e);n.forEach((function(t){var n=t.accessor,r=t.defaultPivot,i=t.disablePivot;t.canPivot=n?P(t.canPivot,!0!==i&&void 0,!0!==d&&void 0,!0):P(t.canPivot,r,f,!1),t.canPivot&&(t.togglePivot=function(){return e.togglePivot(t.id)}),t.Aggregated=t.Aggregated||t.Cell})),r.forEach((function(e){e.getPivotToggleProps=h(i().getPivotToggleProps,{instance:p(),header:e})}));var v=y(l);b((function(){v()&&o({type:u.resetPivot})}),[o,c?null:t]),Object.assign(e,{togglePivot:function(e,t){o({type:u.togglePivot,columnId:e,value:t})}})}function vt(e){e.allCells.forEach((function(e){e.isPivoted=e.column.isPivoted}))}u.resetSelectedRows="resetSelectedRows",u.toggleAllRowsSelected="toggleAllRowsSelected",u.toggleRowSelected="toggleRowSelected",u.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var mt=function(e){e.getToggleRowSelectedProps=[gt],e.getToggleAllRowsSelectedProps=[yt],e.getToggleAllPageRowsSelectedProps=[_t],e.stateReducers.push(bt),e.useInstance.push(wt),e.prepareRow.push(xt)};mt.pluginName="useRowSelect";var gt=function(e,t){var n=t.instance,r=t.row,i=n.manualRowSelectedKey,a=void 0===i?"isSelected":i;return[e,{onChange:function(e){r.toggleRowSelected(e.target.checked)},style:{cursor:"pointer"},checked:!(!r.original||!r.original[a])||r.isSelected,title:"Toggle Row Selected",indeterminate:r.isSomeSelected}]},yt=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleAllRowsSelected(e.target.checked)},style:{cursor:"pointer"},checked:n.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:Boolean(!n.isAllRowsSelected&&Object.keys(n.state.selectedRowIds).length)}]},_t=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleAllPageRowsSelected(e.target.checked)},style:{cursor:"pointer"},checked:n.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:Boolean(!n.isAllPageRowsSelected&&n.page.some((function(e){var t=e.id;return n.state.selectedRowIds[t]})))}]};function bt(e,t,n,r){if(t.type===u.init)return a({selectedRowIds:{}},e);if(t.type===u.resetSelectedRows)return a({},e,{selectedRowIds:r.initialState.selectedRowIds||{}});if(t.type===u.toggleAllRowsSelected){var i=t.value,o=r.isAllRowsSelected,s=r.rowsById,l=r.nonGroupedRowsById,c=void 0===l?s:l,d=void 0!==i?i:!o,f=Object.assign({},e.selectedRowIds);return d?Object.keys(c).forEach((function(e){f[e]=!0})):Object.keys(c).forEach((function(e){delete f[e]})),a({},e,{selectedRowIds:f})}if(t.type===u.toggleRowSelected){var h=t.id,p=t.value,v=r.rowsById,m=r.selectSubRows,g=void 0===m||m,y=r.getSubRows,_=e.selectedRowIds[h],b=void 0!==p?p:!_;if(_===b)return e;var w=a({},e.selectedRowIds);return function e(t){var n=v[t];if(n&&(n.isGrouped||(b?w[t]=!0:delete w[t]),g&&y(n)))return y(n).forEach((function(t){return e(t.id)}))}(h),a({},e,{selectedRowIds:w})}if(t.type===u.toggleAllPageRowsSelected){var x=t.value,k=r.page,S=r.rowsById,E=r.selectSubRows,A=void 0===E||E,T=r.isAllPageRowsSelected,C=r.getSubRows,P=void 0!==x?x:!T,I=a({},e.selectedRowIds);return k.forEach((function(e){return function e(t){var n=S[t];if(n.isGrouped||(P?I[t]=!0:delete I[t]),A&&C(n))return C(n).forEach((function(t){return e(t.id)}))}(e.id)})),a({},e,{selectedRowIds:I})}return e}function wt(e){var n=e.data,r=e.rows,i=e.getHooks,a=e.plugins,o=e.rowsById,s=e.nonGroupedRowsById,l=void 0===s?o:s,c=e.autoResetSelectedRows,d=void 0===c||c,f=e.state.selectedRowIds,p=e.selectSubRows,v=void 0===p||p,g=e.dispatch,_=e.page,w=e.getSubRows;m(a,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var x=t.useMemo((function(){var e=[];return r.forEach((function(t){var n=v?function e(t,n,r){if(n[t.id])return!0;var i=r(t);if(i&&i.length){var a=!0,o=!1;return i.forEach((function(t){o&&!a||(e(t,n,r)?o=!0:a=!1)})),!!a||!!o&&null}return!1}(t,f,w):!!f[t.id];t.isSelected=!!n,t.isSomeSelected=null===n,n&&e.push(t)})),e}),[r,v,f,w]),k=Boolean(Object.keys(l).length&&Object.keys(f).length),S=k;k&&Object.keys(l).some((function(e){return!f[e]}))&&(k=!1),k||_&&_.length&&_.some((function(e){var t=e.id;return!f[t]}))&&(S=!1);var E=y(d);b((function(){E()&&g({type:u.resetSelectedRows})}),[g,n]);var A=t.useCallback((function(e){return g({type:u.toggleAllRowsSelected,value:e})}),[g]),T=t.useCallback((function(e){return g({type:u.toggleAllPageRowsSelected,value:e})}),[g]),C=t.useCallback((function(e,t){return g({type:u.toggleRowSelected,id:e,value:t})}),[g]),P=y(e),I=h(i().getToggleAllRowsSelectedProps,{instance:P()}),R=h(i().getToggleAllPageRowsSelectedProps,{instance:P()});Object.assign(e,{selectedFlatRows:x,isAllRowsSelected:k,isAllPageRowsSelected:S,toggleRowSelected:C,toggleAllRowsSelected:A,getToggleAllRowsSelectedProps:I,getToggleAllPageRowsSelectedProps:R,toggleAllPageRowsSelected:T})}function xt(e,t){var n=t.instance;e.toggleRowSelected=function(t){return n.toggleRowSelected(e.id,t)},e.getToggleRowSelectedProps=h(n.getHooks().getToggleRowSelectedProps,{instance:n,row:e})}var kt=function(e){return{}},St=function(e){return{}};u.setRowState="setRowState",u.setCellState="setCellState",u.resetRowState="resetRowState";var Et=function(e){e.stateReducers.push(At),e.useInstance.push(Tt),e.prepareRow.push(Ct)};function At(e,t,n,r){var i=r.initialRowStateAccessor,o=void 0===i?kt:i,s=r.initialCellStateAccessor,l=void 0===s?St:s,c=r.rowsById;if(t.type===u.init)return a({rowState:{}},e);if(t.type===u.resetRowState)return a({},e,{rowState:r.initialState.rowState||{}});if(t.type===u.setRowState){var d,f=t.rowId,h=t.value,p=void 0!==e.rowState[f]?e.rowState[f]:o(c[f]);return a({},e,{rowState:a({},e.rowState,(d={},d[f]=g(h,p),d))})}if(t.type===u.setCellState){var v,m,y,_,b,w=t.rowId,x=t.columnId,k=t.value,S=void 0!==e.rowState[w]?e.rowState[w]:o(c[w]),E=void 0!==(null==S||null==(v=S.cellState)?void 0:v[x])?S.cellState[x]:l(null==(m=c[w])||null==(y=m.cells)?void 0:y.find((function(e){return e.column.id===x})));return a({},e,{rowState:a({},e.rowState,(b={},b[w]=a({},S,{cellState:a({},S.cellState||{},(_={},_[x]=g(k,E),_))}),b))})}}function Tt(e){var n=e.autoResetRowState,r=void 0===n||n,i=e.data,a=e.dispatch,o=t.useCallback((function(e,t){return a({type:u.setRowState,rowId:e,value:t})}),[a]),s=t.useCallback((function(e,t,n){return a({type:u.setCellState,rowId:e,columnId:t,value:n})}),[a]),l=y(r);b((function(){l()&&a({type:u.resetRowState})}),[i]),Object.assign(e,{setRowState:o,setCellState:s})}function Ct(e,t){var n=t.instance,r=n.initialRowStateAccessor,i=void 0===r?kt:r,a=n.initialCellStateAccessor,o=void 0===a?St:a,s=n.state.rowState;e&&(e.state=void 0!==s[e.id]?s[e.id]:i(e),e.setState=function(t){return n.setRowState(e.id,t)},e.cells.forEach((function(t){e.state.cellState||(e.state.cellState={}),t.state=void 0!==e.state.cellState[t.column.id]?e.state.cellState[t.column.id]:o(t),t.setState=function(r){return n.setCellState(e.id,t.column.id,r)}})))}Et.pluginName="useRowState",u.resetColumnOrder="resetColumnOrder",u.setColumnOrder="setColumnOrder";var Pt=function(e){e.stateReducers.push(It),e.visibleColumnsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.columnOrder])})),e.visibleColumns.push(Rt),e.useInstance.push(Lt)};function It(e,t,n,r){return t.type===u.init?a({columnOrder:[]},e):t.type===u.resetColumnOrder?a({},e,{columnOrder:r.initialState.columnOrder||[]}):t.type===u.setColumnOrder?a({},e,{columnOrder:g(t.columnOrder,e.columnOrder)}):void 0}function Rt(e,t){var n=t.instance.state.columnOrder;if(!n||!n.length)return e;for(var r=[].concat(n),i=[].concat(e),a=[],o=function(){var e=r.shift(),t=i.findIndex((function(t){return t.id===e}));t>-1&&a.push(i.splice(t,1)[0])};i.length&&r.length;)o();return[].concat(a,i)}function Lt(e){var n=e.dispatch;e.setColumnOrder=t.useCallback((function(e){return n({type:u.setColumnOrder,columnOrder:e})}),[n])}Pt.pluginName="useColumnOrder",d.canResize=!0,u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize";var Mt=function(e){e.getResizerProps=[Ot],e.getHeaderProps.push({style:{position:"relative"}}),e.stateReducers.push(Ft),e.useInstance.push(Nt),e.useInstanceBeforeDimensions.push(Dt)},Ot=function(e,t){var n=t.instance,r=t.header,i=n.dispatch,a=function(e,t){var n=!1;if("touchstart"===e.type){if(e.touches&&e.touches.length>1)return;n=!0}var r,a,o=function(e){var t=[];return function e(n){n.columns&&n.columns.length&&n.columns.map(e),t.push(n)}(e),t}(t).map((function(e){return[e.id,e.totalWidth]})),s=n?Math.round(e.touches[0].clientX):e.clientX,l=function(){window.cancelAnimationFrame(r),r=null,i({type:u.columnDoneResizing})},c=function(){window.cancelAnimationFrame(r),r=null,i({type:u.columnResizing,clientX:a})},d=function(e){a=e,r||(r=window.requestAnimationFrame(c))},f={mouse:{moveEvent:"mousemove",moveHandler:function(e){return d(e.clientX)},upEvent:"mouseup",upHandler:function(e){document.removeEventListener("mousemove",f.mouse.moveHandler),document.removeEventListener("mouseup",f.mouse.upHandler),l()}},touch:{moveEvent:"touchmove",moveHandler:function(e){return e.cancelable&&(e.preventDefault(),e.stopPropagation()),d(e.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(e){document.removeEventListener(f.touch.moveEvent,f.touch.moveHandler),document.removeEventListener(f.touch.upEvent,f.touch.moveHandler),l()}}},h=n?f.touch:f.mouse,p=!!function(){if("boolean"==typeof D)return D;var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return D=e}()&&{passive:!1};document.addEventListener(h.moveEvent,h.moveHandler,p),document.addEventListener(h.upEvent,h.upHandler,p),i({type:u.columnStartResizing,columnId:t.id,columnWidth:t.totalWidth,headerIdWidths:o,clientX:s})};return[e,{onMouseDown:function(e){return e.persist()||a(e,r)},onTouchStart:function(e){return e.persist()||a(e,r)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Ft(e,t){if(t.type===u.init)return a({columnResizing:{columnWidths:{}}},e);if(t.type===u.resetResize)return a({},e,{columnResizing:{columnWidths:{}}});if(t.type===u.columnStartResizing){var n=t.clientX,r=t.columnId,i=t.columnWidth,o=t.headerIdWidths;return a({},e,{columnResizing:a({},e.columnResizing,{startX:n,headerIdWidths:o,columnWidth:i,isResizingColumn:r})})}if(t.type===u.columnResizing){var s=t.clientX,l=e.columnResizing,c=l.startX,d=l.columnWidth,f=l.headerIdWidths,h=(s-c)/d,p={};return(void 0===f?[]:f).forEach((function(e){var t=e[0],n=e[1];p[t]=Math.max(n+n*h,0)})),a({},e,{columnResizing:a({},e.columnResizing,{columnWidths:a({},e.columnResizing.columnWidths,{},p)})})}return t.type===u.columnDoneResizing?a({},e,{columnResizing:a({},e.columnResizing,{startX:null,isResizingColumn:null})}):void 0}Mt.pluginName="useResizeColumns";var Dt=function(e){var t=e.flatHeaders,n=e.disableResizing,r=e.getHooks,i=e.state.columnResizing,a=y(e);t.forEach((function(e){var t=P(!0!==e.disableResizing&&void 0,!0!==n&&void 0,!0);e.canResize=t,e.width=i.columnWidths[e.id]||e.originalWidth||e.width,e.isResizing=i.isResizingColumn===e.id,t&&(e.getResizerProps=h(r().getResizerProps,{instance:a(),header:e}))}))};function Nt(e){var n=e.plugins,r=e.dispatch,i=e.autoResetResize,a=void 0===i||i,o=e.columns;m(n,["useAbsoluteLayout"],"useResizeColumns");var s=y(a);b((function(){s()&&r({type:u.resetResize})}),[o]);var l=t.useCallback((function(){return r({type:u.resetResize})}),[r]);Object.assign(e,{resetResizing:l})}var jt={position:"absolute",top:0},Bt=function(e){e.getTableBodyProps.push(Ut),e.getRowProps.push(Ut),e.getHeaderGroupProps.push(Ut),e.getFooterGroupProps.push(Ut),e.getHeaderProps.push((function(e,t){var n=t.column;return[e,{style:a({},jt,{left:n.totalLeft+"px",width:n.totalWidth+"px"})}]})),e.getCellProps.push((function(e,t){var n=t.cell;return[e,{style:a({},jt,{left:n.column.totalLeft+"px",width:n.column.totalWidth+"px"})}]})),e.getFooterProps.push((function(e,t){var n=t.column;return[e,{style:a({},jt,{left:n.totalLeft+"px",width:n.totalWidth+"px"})}]}))};Bt.pluginName="useAbsoluteLayout";var Ut=function(e,t){return[e,{style:{position:"relative",width:t.instance.totalColumnsWidth+"px"}}]},zt={display:"inline-block",boxSizing:"border-box"},Vt=function(e,t){return[e,{style:{display:"flex",width:t.instance.totalColumnsWidth+"px"}}]},Zt=function(e){e.getRowProps.push(Vt),e.getHeaderGroupProps.push(Vt),e.getFooterGroupProps.push(Vt),e.getHeaderProps.push((function(e,t){var n=t.column;return[e,{style:a({},zt,{width:n.totalWidth+"px"})}]})),e.getCellProps.push((function(e,t){var n=t.cell;return[e,{style:a({},zt,{width:n.column.totalWidth+"px"})}]})),e.getFooterProps.push((function(e,t){var n=t.column;return[e,{style:a({},zt,{width:n.totalWidth+"px"})}]}))};function Ht(e){e.getTableProps.push(Wt),e.getRowProps.push(Gt),e.getHeaderGroupProps.push(Gt),e.getFooterGroupProps.push(Gt),e.getHeaderProps.push(qt),e.getCellProps.push(Kt),e.getFooterProps.push(Jt)}Zt.pluginName="useBlockLayout",Ht.pluginName="useFlexLayout";var Wt=function(e,t){return[e,{style:{minWidth:t.instance.totalColumnsMinWidth+"px"}}]},Gt=function(e,t){return[e,{style:{display:"flex",flex:"1 0 auto",minWidth:t.instance.totalColumnsMinWidth+"px"}}]},qt=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]},Kt=function(e,t){var n=t.cell;return[e,{style:{boxSizing:"border-box",flex:n.column.totalFlexWidth+" 0 auto",minWidth:n.column.totalMinWidth+"px",width:n.column.totalWidth+"px"}}]},Jt=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]};function Xt(e){e.stateReducers.push(en),e.getTableProps.push(Yt),e.getHeaderProps.push(Qt),e.getRowProps.push($t)}u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize",Xt.pluginName="useGridLayout";var Yt=function(e,t){var n=t.instance;return[e,{style:{display:"grid",gridTemplateColumns:n.visibleColumns.map((function(e){var t;return n.state.gridLayout.columnWidths[e.id]?n.state.gridLayout.columnWidths[e.id]+"px":(null==(t=n.state.columnResizing)?void 0:t.isResizingColumn)?n.state.gridLayout.startWidths[e.id]+"px":"number"==typeof e.width?e.width+"px":e.width})).join(" ")}}]},Qt=function(e,t){var n=t.column;return[e,{id:"header-cell-"+n.id,style:{position:"sticky",gridColumn:"span "+n.totalVisibleHeaderCount}}]},$t=function(e,t){var n=t.row;return n.isExpanded?[e,{style:{gridColumn:"1 / "+(n.cells.length+1)}}]:[e,{}]};function en(e,t,n,r){if(t.type===u.init)return a({gridLayout:{columnWidths:{}}},e);if(t.type===u.resetResize)return a({},e,{gridLayout:{columnWidths:{}}});if(t.type===u.columnStartResizing){var i=t.columnId,o=t.headerIdWidths,s=tn(i);if(void 0!==s){var l=r.visibleColumns.reduce((function(e,t){var n;return a({},e,((n={})[t.id]=tn(t.id),n))}),{}),c=r.visibleColumns.reduce((function(e,t){var n;return a({},e,((n={})[t.id]=t.minWidth,n))}),{}),d=r.visibleColumns.reduce((function(e,t){var n;return a({},e,((n={})[t.id]=t.maxWidth,n))}),{}),f=o.map((function(e){var t=e[0];return[t,tn(t)]}));return a({},e,{gridLayout:a({},e.gridLayout,{startWidths:l,minWidths:c,maxWidths:d,headerIdGridWidths:f,columnWidth:s})})}return e}if(t.type===u.columnResizing){var h=t.clientX,p=e.columnResizing.startX,v=e.gridLayout,m=v.columnWidth,g=v.minWidths,y=v.maxWidths,_=v.headerIdGridWidths,b=(h-p)/m,w={};return(void 0===_?[]:_).forEach((function(e){var t=e[0],n=e[1];w[t]=Math.min(Math.max(g[t],n+n*b),y[t])})),a({},e,{gridLayout:a({},e.gridLayout,{columnWidths:a({},e.gridLayout.columnWidths,{},w)})})}return t.type===u.columnDoneResizing?a({},e,{gridLayout:a({},e.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function tn(e){var t,n=null==(t=document.getElementById("header-cell-"+e))?void 0:t.offsetWidth;if(void 0!==n)return n}e._UNSTABLE_usePivotColumns=rt,e.actions=u,e.defaultColumn=d,e.defaultGroupByFn=Ze,e.defaultOrderByFn=$e,e.defaultRenderer=l,e.emptyRenderer=c,e.ensurePluginOrder=m,e.flexRender=x,e.functionalUpdate=g,e.loopHooks=v,e.makePropGetter=h,e.makeRenderer=w,e.reduceHooks=p,e.safeUseLayoutEffect=_,e.useAbsoluteLayout=Bt,e.useAsyncDebounce=function(e,n){void 0===n&&(n=0);var a=t.useRef({}),o=y(e),s=y(n);return t.useCallback(function(){var e=i(r().mark((function e(){var t,n,u,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=l.length,n=new Array(t),u=0;u<t;u++)n[u]=l[u];return a.current.promise||(a.current.promise=new Promise((function(e,t){a.current.resolve=e,a.current.reject=t}))),a.current.timeout&&clearTimeout(a.current.timeout),a.current.timeout=setTimeout(i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete a.current.timeout,e.prev=1,e.t0=a.current,e.next=5,o().apply(void 0,n);case 5:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),a.current.reject(e.t2);case 12:return e.prev=12,delete a.current.promise,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])}))),s()),e.abrupt("return",a.current.promise);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[o,s])},e.useBlockLayout=Zt,e.useColumnOrder=Pt,e.useExpanded=le,e.useFilters=Ae,e.useFlexLayout=Ht,e.useGetLatest=y,e.useGlobalFilter=Pe,e.useGridLayout=Xt,e.useGroupBy=De,e.useMountedLayoutEffect=b,e.usePagination=et,e.useResizeColumns=Mt,e.useRowSelect=mt,e.useRowState=Et,e.useSortBy=Je,e.useTable=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e=oe(e),r=[K].concat(r);var o=y(t.useRef({}).current);Object.assign(o(),a({},e,{plugins:r,hooks:q()})),r.filter(Boolean).forEach((function(e){e(o().hooks)}));var s=y(o().hooks);o().getHooks=s,delete o().hooks,Object.assign(o(),p(s().useOptions,oe(e)));var l=o(),c=l.data,d=l.columns,f=l.initialState,m=l.defaultColumn,g=l.getSubRows,_=l.getRowId,b=l.stateReducer,x=l.useControlledState,C=y(b),P=t.useCallback((function(e,t){if(!t.type)throw console.info({action:t}),new Error("Unknown Action \ud83d\udc46");return[].concat(s().stateReducers,Array.isArray(C())?C():[C()]).reduce((function(n,r){return r(n,t,e,o())||n}),e)}),[s,C,o]),I=t.useReducer(P,void 0,(function(){return P(f,{type:u.init})})),R=I[0],L=I[1],M=p([].concat(s().useControlledState,[x]),R,{instance:o()});Object.assign(o(),{state:M,dispatch:L});var O=t.useMemo((function(){return k(p(s().columns,d,{instance:o()}))}),[s,o,d].concat(p(s().columnsDeps,[],{instance:o()})));o().columns=O;var F=t.useMemo((function(){return p(s().allColumns,S(O),{instance:o()}).map(E)}),[O,s,o].concat(p(s().allColumnsDeps,[],{instance:o()})));o().allColumns=F;var D=t.useMemo((function(){for(var e=[],t=[],n={},r=[].concat(F);r.length;){var i=r.shift();ue({data:c,rows:e,flatRows:t,rowsById:n,column:i,getRowId:_,getSubRows:g,accessValueHooks:s().accessValue,getInstance:o})}return[e,t,n]}),[F,c,_,g,s,o]),N=D[0],j=D[1],B=D[2];Object.assign(o(),{rows:N,initialRows:[].concat(N),flatRows:j,rowsById:B}),v(s().useInstanceAfterData,o());var U=t.useMemo((function(){return p(s().visibleColumns,F,{instance:o()}).map((function(e){return A(e,m)}))}),[s,F,o,m].concat(p(s().visibleColumnsDeps,[],{instance:o()})));F=t.useMemo((function(){var e=[].concat(U);return F.forEach((function(t){e.find((function(e){return e.id===t.id}))||e.push(t)})),e}),[F,U]),o().allColumns=F;var z=t.useMemo((function(){return p(s().headerGroups,T(U,m),o())}),[s,U,m,o].concat(p(s().headerGroupsDeps,[],{instance:o()})));o().headerGroups=z;var V=t.useMemo((function(){return z.length?z[0].headers:[]}),[z]);o().headers=V,o().flatHeaders=z.reduce((function(e,t){return[].concat(e,t.headers)}),[]),v(s().useInstanceBeforeDimensions,o());var Z=U.filter((function(e){return e.isVisible})).map((function(e){return e.id})).sort().join("_");U=t.useMemo((function(){return U.filter((function(e){return e.isVisible}))}),[U,Z]),o().visibleColumns=U;var H=se(V),W=H[0],G=H[1],J=H[2];return o().totalColumnsMinWidth=W,o().totalColumnsWidth=G,o().totalColumnsMaxWidth=J,v(s().useInstance,o()),[].concat(o().flatHeaders,o().allColumns).forEach((function(e){e.render=w(o(),e),e.getHeaderProps=h(s().getHeaderProps,{instance:o(),column:e}),e.getFooterProps=h(s().getFooterProps,{instance:o(),column:e})})),o().headerGroups=t.useMemo((function(){return z.filter((function(e,t){return e.headers=e.headers.filter((function(e){return e.headers?function e(t){return t.filter((function(t){return t.headers?e(t.headers):t.isVisible})).length}(e.headers):e.isVisible})),!!e.headers.length&&(e.getHeaderGroupProps=h(s().getHeaderGroupProps,{instance:o(),headerGroup:e,index:t}),e.getFooterGroupProps=h(s().getFooterGroupProps,{instance:o(),headerGroup:e,index:t}),!0)}))}),[z,o,s]),o().footerGroups=[].concat(o().headerGroups).reverse(),o().prepareRow=t.useCallback((function(e){e.getRowProps=h(s().getRowProps,{instance:o(),row:e}),e.allCells=F.map((function(t){var n=e.values[t.id],r={column:t,row:e,value:n};return r.getCellProps=h(s().getCellProps,{instance:o(),cell:r}),r.render=w(o(),t,{row:e,cell:r,value:n}),r})),e.cells=U.map((function(t){return e.allCells.find((function(e){return e.column.id===t.id}))})),v(s().prepareRow,e,{instance:o()})}),[s,o,F,U]),o().getTableProps=h(s().getTableProps,{instance:o()}),o().getTableBodyProps=h(s().getTableBodyProps,{instance:o()}),v(s().useFinalInstance,o()),o()},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2791))},1358:function(e,t,n){e.exports=n(1707)},6374:function(e,t,n){"use strict";n(1725);var r=n(2791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},9117:function(e,t,n){"use strict";var r=n(1725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),a=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),l=d("react.memo"),c=d("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=y.prototype=new g;_.constructor=y,r(_,m.prototype),_.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+A(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+A(s=e[l],l);u+=T(s,t,n,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=T(s=s.value,t,n,c=r+A(s,l++),o);else if("object"===s)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var I={current:null};function R(){var e=I.current;if(null===e)throw Error(h(321));return e}var L={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(h(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(h(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!x.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},2543:function(e,t,n){var r=n(9778),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},6813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,d=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(d,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();_=e+y;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){g=f((function(){e(t.unstable_now())}),n)},i=function(){h(g),g=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function k(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],T=[],C=1,P=null,I=3,R=!1,L=!1,M=!1;function O(e){for(var t=k(T);null!==t;){if(null===t.callback)S(T);else{if(!(t.startTime<=e))break;S(T),t.sortIndex=t.expirationTime,x(A,t)}t=k(T)}}function F(e){if(M=!1,O(e),!L)if(null!==k(A))L=!0,n(D);else{var t=k(T);null!==t&&r(F,t.startTime-e)}}function D(e,n){L=!1,M&&(M=!1,i()),R=!0;var a=I;try{for(O(n),P=k(A);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=P.callback;if("function"===typeof o){P.callback=null,I=P.priorityLevel;var s=o(P.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?P.callback=s:P===k(A)&&S(A),O(n)}else S(A);P=k(A)}if(null!==P)var u=!0;else{var l=k(T);null!==l&&r(F,l.startTime-n),u=!1}return u}finally{P=null,I=a,R=!1}}var N=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||R||(L=!0,n(D))},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return k(A)},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var n=I;I=t;try{return e()}finally{I=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=N,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=I;I=e;try{return t()}finally{I=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,x(T,e),null===k(A)&&e===k(T)&&(M?i():M=!0,r(F,o-s))):(e.sortIndex=u,x(A,e),L||R||(L=!0,n(D))),e},t.unstable_wrapCallback=function(e){var t=I;return function(){var n=I;I=t;try{return e.apply(this,arguments)}finally{I=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},5948:function(e,t,n){"use strict";var r=n(2543).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=o(t[r]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=o(t[r]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},3320:function(e,t,n){"use strict";n.r(t),n.d(t,{SWRConfig:function(){return J},default:function(){return Y},mutate:function(){return V},unstable_serialize:function(){return X},useSWRConfig:function(){return G}});var r=n(2791);function i(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var o,s=function(){},u=s(),l=Object,c=function(e){return e===u},d=function(e){return"function"==typeof e},f=function(e,t){return l.assign({},e,t)},h="undefined",p=function(){return typeof window!=h},v=new WeakMap,m=0,g=function e(t){var n,r,i=typeof t,a=t&&t.constructor,o=a==Date;if(l(t)!==t||o||a==RegExp)n=o?t.toJSON():"symbol"==i?t.toString():"string"==i?JSON.stringify(t):""+t;else{if(n=v.get(t))return n;if(n=++m+"~",v.set(t,n),a==Array){for(n="@",r=0;r<t.length;r++)n+=e(t[r])+",";v.set(t,n)}if(a==l){n="#";for(var s=l.keys(t).sort();!c(r=s.pop());)c(t[r])||(n+=r+":"+e(t[r])+",");v.set(t,n)}}return n},y=!0,_=p(),b=typeof document!=h,w=_&&window.addEventListener?window.addEventListener.bind(window):s,x=b?document.addEventListener.bind(document):s,k=_&&window.removeEventListener?window.removeEventListener.bind(window):s,S=b?document.removeEventListener.bind(document):s,E={isOnline:function(){return y},isVisible:function(){var e=b&&document.visibilityState;return c(e)||"hidden"!==e}},A={initFocus:function(e){return x("visibilitychange",e),w("focus",e),function(){S("visibilitychange",e),k("focus",e)}},initReconnect:function(e){var t=function(){y=!0,e()},n=function(){y=!1};return w("online",t),w("offline",n),function(){k("online",t),k("offline",n)}}},T=!p()||"Deno"in window,C=function(e){return p()&&typeof window.requestAnimationFrame!=h?window.requestAnimationFrame(e):setTimeout(e,1)},P=T?r.useEffect:r.useLayoutEffect,I="undefined"!==typeof navigator&&navigator.connection,R=!T&&I&&(["slow-2g","2g"].includes(I.effectiveType)||I.saveData),L=function(e){if(d(e))try{e=e()}catch(n){e=""}var t=[].concat(e);return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?g(e):"",t,e?"$swr$"+e:""]},M=new WeakMap,O=function(e,t,n,r,i,a,o){void 0===o&&(o=!0);var s=M.get(e),u=s[0],l=s[1],c=s[3],d=u[t],f=l[t];if(o&&f)for(var h=0;h<f.length;++h)f[h](n,r,i);return a&&(delete c[t],d&&d[0])?d[0](2).then((function(){return e.get(t)})):e.get(t)},F=0,D=function(){return++F},N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(void 0,void 0,void 0,(function(){var t,n,r,i,o,s,l,h,p,v,m,g,y,_,b,w,x,k,S,E,A;return a(this,(function(a){switch(a.label){case 0:if(t=e[0],n=e[1],r=e[2],i=e[3],s=!!c((o="boolean"===typeof i?{revalidate:i}:i||{}).populateCache)||o.populateCache,l=!1!==o.revalidate,h=!1!==o.rollbackOnError,p=o.optimisticData,v=L(n),m=v[0],g=v[2],!m)return[2];if(y=M.get(t),_=y[2],e.length<3)return[2,O(t,m,t.get(m),u,u,l,!0)];if(b=r,x=D(),_[m]=[x,0],k=!c(p),S=t.get(m),k&&(E=d(p)?p(S):p,t.set(m,E),O(t,m,E)),d(b))try{b=b(t.get(m))}catch(T){w=T}return b&&d(b.then)?[4,b.catch((function(e){w=e}))]:[3,2];case 1:if(b=a.sent(),x!==_[m][0]){if(w)throw w;return[2,b]}w&&k&&h&&(s=!0,b=S,t.set(m,S)),a.label=2;case 2:return s&&(w||(d(s)&&(b=s(b,S)),t.set(m,b)),t.set(g,f(t.get(g),{error:w}))),_[m][1]=D(),[4,O(t,m,b,w,u,l,!!s)];case 3:if(A=a.sent(),w)throw w;return[2,s?A:b]}}))}))},j=function(e,t){for(var n in e)e[n][0]&&e[n][0](t)},B=function(e,t){if(!M.has(e)){var n=f(A,t),r={},i=N.bind(u,e),a=s;if(M.set(e,[r,{},{},{},i]),!T){var o=n.initFocus(setTimeout.bind(u,j.bind(u,r,0))),l=n.initReconnect(setTimeout.bind(u,j.bind(u,r,1)));a=function(){o&&o(),l&&l(),M.delete(e)}}return[e,i,a]}return[e,M.get(e)[4]]},U=B(new Map),z=U[0],V=U[1],Z=f({onLoadingSlow:s,onSuccess:s,onError:s,onErrorRetry:function(e,t,n,r,i){var a=n.errorRetryCount,o=i.retryCount,s=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!c(a)&&o>a||setTimeout(r,s,i)},onDiscarded:s,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:R?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:R?5e3:3e3,compare:function(e,t){return g(e)==g(t)},isPaused:function(){return!1},cache:z,mutate:V,fallback:{}},E),H=function(e,t){var n=f(e,t);if(t){var r=e.use,i=e.fallback,a=t.use,o=t.fallback;r&&a&&(n.use=r.concat(a)),i&&o&&(n.fallback=f(i,o))}return n},W=(0,r.createContext)({}),G=function(){return f(Z,(0,r.useContext)(W))},q=function(e,t,n){var r=t[e]||(t[e]=[]);return r.push(n),function(){var e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}},K={dedupe:!0},J=l.defineProperty((function(e){var t=e.value,n=H((0,r.useContext)(W),t),i=t&&t.provider,a=(0,r.useState)((function(){return i?B(i(n.cache||z),t):u}))[0];return a&&(n.cache=a[0],n.mutate=a[1]),P((function(){return a?a[2]:u}),[]),(0,r.createElement)(W.Provider,f(e,{value:n}))}),"default",{value:Z}),X=function(e){return L(e)[0]},Y=(o=function(e,t,n){var o=n.cache,s=n.compare,l=n.fallbackData,h=n.suspense,p=n.revalidateOnMount,v=n.refreshInterval,m=n.refreshWhenHidden,g=n.refreshWhenOffline,y=M.get(o),_=y[0],b=y[1],w=y[2],x=y[3],k=L(e),S=k[0],E=k[1],A=k[2],I=(0,r.useRef)(!1),R=(0,r.useRef)(!1),F=(0,r.useRef)(S),j=(0,r.useRef)(t),B=(0,r.useRef)(n),U=function(){return B.current},z=function(){return U().isVisible()&&U().isOnline()},V=function(e){return o.set(A,f(o.get(A),e))},Z=o.get(S),H=c(l)?n.fallback[S]:l,W=c(Z)?H:Z,G=o.get(A)||{},J=G.error,X=!I.current,Y=function(){return X&&!c(p)?p:!U().isPaused()&&(h?!c(W)&&n.revalidateIfStale:c(W)||n.revalidateIfStale)},Q=!(!S||!t)&&(!!G.isValidating||X&&Y()),$=function(e,t){var n=(0,r.useState)({})[1],i=(0,r.useRef)(e),a=(0,r.useRef)({data:!1,error:!1,isValidating:!1}),o=(0,r.useCallback)((function(e){var r=!1,o=i.current;for(var s in e){var u=s;o[u]!==e[u]&&(o[u]=e[u],a.current[u]&&(r=!0))}r&&!t.current&&n({})}),[]);return P((function(){i.current=e})),[i,a.current,o]}({data:W,error:J,isValidating:Q},R),ee=$[0],te=$[1],ne=$[2],re=(0,r.useCallback)((function(e){return i(void 0,void 0,void 0,(function(){var t,r,i,l,f,h,p,v,m,g,y,_,b;return a(this,(function(a){switch(a.label){case 0:if(t=j.current,!S||!t||R.current||U().isPaused())return[2,!1];l=!0,f=e||{},h=!x[S]||!f.dedupe,p=function(){return!R.current&&S===F.current&&I.current},v=function(){var e=x[S];e&&e[1]===i&&delete x[S]},m={isValidating:!1},g=function(){V({isValidating:!1}),p()&&ne(m)},V({isValidating:!0}),ne({isValidating:!0}),a.label=1;case 1:return a.trys.push([1,3,,4]),h&&(O(o,S,ee.current.data,ee.current.error,!0),n.loadingTimeout&&!o.get(S)&&setTimeout((function(){l&&p()&&U().onLoadingSlow(S,n)}),n.loadingTimeout),x[S]=[t.apply(void 0,E),D()]),b=x[S],r=b[0],i=b[1],[4,r];case 2:return r=a.sent(),h&&setTimeout(v,n.dedupingInterval),x[S]&&x[S][1]===i?(V({error:u}),m.error=u,y=w[S],!c(y)&&(i<=y[0]||i<=y[1]||0===y[1])?(g(),h&&p()&&U().onDiscarded(S),[2,!1]):(s(ee.current.data,r)?m.data=ee.current.data:m.data=r,s(o.get(S),r)||o.set(S,r),h&&p()&&U().onSuccess(r,S,n),[3,4])):(h&&p()&&U().onDiscarded(S),[2,!1]);case 3:return _=a.sent(),v(),U().isPaused()||(V({error:_}),m.error=_,h&&p()&&(U().onError(_,S,n),("boolean"===typeof n.shouldRetryOnError&&n.shouldRetryOnError||d(n.shouldRetryOnError)&&n.shouldRetryOnError(_))&&z()&&U().onErrorRetry(_,S,n,re,{retryCount:(f.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return l=!1,g(),p()&&h&&O(o,S,m.data,m.error,!1),[2,!0]}}))}))}),[S]),ie=(0,r.useCallback)(N.bind(u,o,(function(){return F.current})),[]);if(P((function(){j.current=t,B.current=n})),P((function(){if(S){var e=S!==F.current,t=re.bind(u,K),n=0,r=q(S,b,(function(e,t,n){ne(f({error:t,isValidating:n},s(ee.current.data,e)?u:{data:e}))})),i=q(S,_,(function(e){if(0==e){var r=Date.now();U().revalidateOnFocus&&r>n&&z()&&(n=r+U().focusThrottleInterval,t())}else if(1==e)U().revalidateOnReconnect&&z()&&t();else if(2==e)return re()}));return R.current=!1,F.current=S,I.current=!0,e&&ne({data:W,error:J,isValidating:Q}),Y()&&(c(W)||T?t():C(t)),function(){R.current=!0,r(),i()}}}),[S,re]),P((function(){var e;function t(){var t=d(v)?v(W):v;t&&-1!==e&&(e=setTimeout(n,t))}function n(){ee.current.error||!m&&!U().isVisible()||!g&&!U().isOnline()?t():re(K).then(t)}return t(),function(){e&&(clearTimeout(e),e=-1)}}),[v,m,g,re]),(0,r.useDebugValue)(W),h&&c(W)&&S)throw j.current=t,B.current=n,R.current=!1,c(J)?re(K):J;return{mutate:ie,get data(){return te.data=!0,W},get error(){return te.error=!0,J},get isValidating(){return te.isValidating=!0,Q}}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=G(),r=function(e){return d(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}]}(e),i=r[0],a=r[1],s=r[2],u=H(n,s),l=o,c=u.use;if(c)for(var f=c.length;f-- >0;)l=c[f](l);return l(i,a||u.fetcher,u)})},6794:function(e){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},7374:function(e,t,n){"use strict";var r=n(5450),i=n(5718),a=n(8264),o=n(6218);function s(e){return e.call.bind(e)}var u="undefined"!==typeof BigInt,l="undefined"!==typeof Symbol,c=s(Object.prototype.toString),d=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);if(u)var p=s(BigInt.prototype.valueOf);if(l)var v=s(Symbol.prototype.valueOf);function m(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(n){return!1}}function g(e){return"[object Map]"===c(e)}function y(e){return"[object Set]"===c(e)}function _(e){return"[object WeakMap]"===c(e)}function b(e){return"[object WeakSet]"===c(e)}function w(e){return"[object ArrayBuffer]"===c(e)}function x(e){return"undefined"!==typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function k(e){return"[object DataView]"===c(e)}function S(e){return"undefined"!==typeof DataView&&(k.working?k(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||S(e)},t.isUint8Array=function(e){return"Uint8Array"===a(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===a(e)},t.isUint16Array=function(e){return"Uint16Array"===a(e)},t.isUint32Array=function(e){return"Uint32Array"===a(e)},t.isInt8Array=function(e){return"Int8Array"===a(e)},t.isInt16Array=function(e){return"Int16Array"===a(e)},t.isInt32Array=function(e){return"Int32Array"===a(e)},t.isFloat32Array=function(e){return"Float32Array"===a(e)},t.isFloat64Array=function(e){return"Float64Array"===a(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===a(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===a(e)},g.working="undefined"!==typeof Map&&g(new Map),t.isMap=function(e){return"undefined"!==typeof Map&&(g.working?g(e):e instanceof Map)},y.working="undefined"!==typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!==typeof Set&&(y.working?y(e):e instanceof Set)},_.working="undefined"!==typeof WeakMap&&_(new WeakMap),t.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(_.working?_(e):e instanceof WeakMap)},b.working="undefined"!==typeof WeakSet&&b(new WeakSet),t.isWeakSet=function(e){return b(e)},w.working="undefined"!==typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=x,k.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&k(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=S;var E="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function A(e){return"[object SharedArrayBuffer]"===c(e)}function T(e){return"undefined"!==typeof E&&("undefined"===typeof A.working&&(A.working=A(new E)),A.working?A(e):e instanceof E)}function C(e){return m(e,d)}function P(e){return m(e,f)}function I(e){return m(e,h)}function R(e){return u&&m(e,p)}function L(e){return l&&m(e,v)}t.isSharedArrayBuffer=T,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=C,t.isStringObject=P,t.isBooleanObject=I,t.isBigIntObject=R,t.isSymbolObject=L,t.isBoxedPrimitive=function(e){return C(e)||P(e)||I(e)||R(e)||L(e)},t.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(x(e)||T(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9639:function(e,t,n){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),s=r[n];n<a;s=r[++n])m(s)||!w(s)?o+=" "+s:o+=" "+u(s);return o},t.deprecate=function(e,n){if("undefined"!==typeof process&&!0===process.noDeprecation)return e;if("undefined"===typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var a={},o=/^$/;if({NODE_ENV:"production",PUBLIC_URL:"https://uo282944.github.io/lomap_6a_despliegue",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG){var s={NODE_ENV:"production",PUBLIC_URL:"https://uo282944.github.io/lomap_6a_despliegue",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+s+"$","i")}function u(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),d(r,e,r.depth)}function l(e,t){var n=u.styles[t];return n?"\x1b["+u.colors[n][0]+"m"+e+"\x1b["+u.colors[n][1]+"m":e}function c(e,t){return e}function d(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=d(e,i,r)),i}var a=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),k(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(S(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return f(n)}var l,c="",w=!1,E=["{","}"];(p(n)&&(w=!0,E=["[","]"]),S(n))&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(c=" "+RegExp.prototype.toString.call(n)),x(n)&&(c=" "+Date.prototype.toUTCString.call(n)),k(n)&&(c=" "+f(n)),0!==o.length||w&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=w?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)C(t,String(o))?a.push(h(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(h(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return h(e,n,r,s,t,w)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,c,E)):E[0]+c+E[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),C(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?d(e,u.value,null):d(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),_(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function m(e){return null===e}function g(e){return"number"===typeof e}function y(e){return"string"===typeof e}function _(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===E(e)}function w(e){return"object"===typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===E(e)}function k(e){return w(e)&&("[object Error]"===E(e)||e instanceof Error)}function S(e){return"function"===typeof e}function E(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!a[e])if(o.test(e)){var n=process.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(7374),t.isArray=p,t.isBoolean=v,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=_,t.isRegExp=b,t.types.isRegExp=b,t.isObject=w,t.isDate=x,t.types.isDate=x,t.isError=k,t.types.isNativeError=k,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(6794);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),T[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=n(2534),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var P="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!==typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(o){n(o)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=P,t.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!==typeof r)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return r.apply(i,arguments)};e.apply(this,t).then((function(e){process.nextTick(a.bind(null,null,e))}),(function(e){process.nextTick(I.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},8264:function(e,t,n){"use strict";var r=n(5369),i=n(306),a=n(4037),o=n(3347),s=a("Object.prototype.toString"),u=n(4707)(),l="undefined"===typeof globalThis?n.g:globalThis,c=i(),d=a("String.prototype.slice"),f={},h=Object.getPrototypeOf;u&&o&&h&&r(c,(function(e){if("function"===typeof l[e]){var t=new l[e];if(Symbol.toStringTag in t){var n=h(t),r=o(n,Symbol.toStringTag);if(!r){var i=h(n);r=o(i,Symbol.toStringTag)}f[e]=r.get}}}));var p=n(6218);e.exports=function(e){return!!p(e)&&(u&&Symbol.toStringTag in e?function(e){var t=!1;return r(f,(function(n,r){if(!t)try{var i=n.call(e);i===r&&(t=i)}catch(a){}})),t}(e):d(s(e),8,-1))}},4642:function(e,t,n){var r=n(3801);function i(e){var t,n;function i(t,n){try{var o=e[t](n),s=o.value,u=s instanceof r;Promise.resolve(u?s.v:s).then((function(n){if(u){var r="return"===t?"return":"next";if(!s.k||n.done)return i(r,n);n=e[r](n).value}a(o.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(l){a("throw",l)}}function a(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(a,o){var s={key:e,arg:r,resolve:a,reject:o,next:null};n?n=n.next=s:(t=n=s,i(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}i.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)},e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3801:function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8131:function(e,t,n){var r=n(3801);e.exports=function(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise((function(n){n(e[t](i))})),{done:!1,value:new r(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t},e.exports.__esModule=!0,e.exports.default=e.exports},8237:function(e){function t(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return t=function(e){this.s=e,this.n=e.next},t.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new t(e)}e.exports=function(e){var n,r,i,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,i=Symbol.iterator);a--;){if(r&&null!=(n=e[r]))return n.call(e);if(i&&null!=(n=e[i]))return new t(n.call(e));r="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,u,"next",e)}function u(e){t(o,i,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6737:function(e,t,n){var r=n(3801);e.exports=function(e){return new r(e,0)},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),i=n(9617);function a(t,n,o){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),a=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,n){var r=n(8416);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(R){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new C(r||[]);return o(a,"_invoke",{value:S(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}t.wrap=f;var p={};function v(){}function m(){}function g(){}var y={};d(y,u,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(P([])));b&&b!==n&&a.call(b,u)&&(y=b);var w=g.prototype=v.prototype=Object.create(y);function x(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,s,u){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==r(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function S(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=d(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},x(k.prototype),d(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new k(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(w),d(w,c,"Generator"),d(w,u,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),a=n(6116),o=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1589:function(e,t,n){var r=n(5372),i=n(9498),a=n(6116),o=n(2218);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),a=n(6116),o=n(2281);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},8186:function(e,t,n){var r=n(4642);e.exports=function(e){return function(){return new r(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,n){var r=n(3808),i=n(6015),a=n(6035),o=n(3515);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},306:function(e,t,n){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"===typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"===typeof i[r[t]]&&(e[e.length]=r[t]);return e}},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,u,"next",e)}function u(e){r(o,i,a,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},9388:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),i=n(8814),a=n(2963);function o(e){var t=(0,i.Z)();return function(){var n,i=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return(0,a.Z)(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5987:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3366);function i(e,t){if(null==e)return{};var n,i,a=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},2963:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002),i=n(7326);function a(e,t){if(t&&("object"===(0,r.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),s=new T(r||[]);return a(o,"_invoke",{value:k(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=d;var h={};function p(){}function v(){}function m(){}var g={};c(g,s,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(C([])));_&&_!==t&&n.call(_,s)&&(g=_);var b=m.prototype=p.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(a,o,s,u){var l=f(e[a],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,u)}))}u(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=m,a(b,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:v,configurable:!0}),v.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),c(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(d(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),c(b,l,"Generator"),c(b,s,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var i=n(181),a=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(9199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},8737:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(1120),i=n(9611);var a=n(8814);function o(e,t,n){return o=(0,a.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,i.Z)(a,n.prototype),a},o.apply(null,arguments)}function s(e){var t="function"===typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return o(e,arguments,(0,r.Z)(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(a,e)},s(e)}},2167:function(e,t,n){"use strict";n.r(t),n.d(t,{CompactEncrypt:function(){return kn},CompactSign:function(){return Tn},EmbeddedJWK:function(){return Bn},EncryptJWT:function(){return Mn},FlattenedEncrypt:function(){return $t},FlattenedSign:function(){return An},GeneralEncrypt:function(){return tn},GeneralSign:function(){return In},SignJWT:function(){return Ln},UnsecuredJWT:function(){return rr},base64url:function(){return i},calculateJwkThumbprint:function(){return Fn},calculateJwkThumbprintUri:function(){return Nn},compactDecrypt:function(){return Lt},compactVerify:function(){return ln},createLocalJWKSet:function(){return Xn},createRemoteJWKSet:function(){return nr},decodeJwt:function(){return sr},decodeProtectedHeader:function(){return or},errors:function(){return r},exportJWK:function(){return Gt},exportPKCS8:function(){return Ht},exportSPKI:function(){return Vt},flattenedDecrypt:function(){return It},flattenedVerify:function(){return sn},generalDecrypt:function(){return Ot},generalVerify:function(){return dn},generateKeyPair:function(){return hr},generateSecret:function(){return vr},importJWK:function(){return ht},importPKCS8:function(){return dt},importSPKI:function(){return st},importX509:function(){return lt},jwtDecrypt:function(){return wn},jwtVerify:function(){return _n}});var r={};n.r(r),n.d(r,{JOSEAlgNotAllowed:function(){return D},JOSEError:function(){return M},JOSENotSupported:function(){return N},JWEDecryptionFailed:function(){return j},JWEInvalid:function(){return B},JWKInvalid:function(){return V},JWKSInvalid:function(){return Z},JWKSMultipleMatchingKeys:function(){return W},JWKSNoMatchingKey:function(){return H},JWKSTimeout:function(){return G},JWSInvalid:function(){return U},JWSSignatureVerificationFailed:function(){return q},JWTClaimValidationFailed:function(){return O},JWTExpired:function(){return F},JWTInvalid:function(){return z}});var i={};n.r(i),n.d(i,{decode:function(){return ar},encode:function(){return ir}});var a=n(4165),o=n(1413),s=n(5861),u=crypto,l=function(e){return e instanceof CryptoKey},c=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="SHA-".concat(t.slice(-3)),e.t0=Uint8Array,e.next=4,u.subtle.digest(r,n);case 4:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=c,f=new TextEncoder,h=new TextDecoder,p=Math.pow(2,32);function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e+t.length}),0),i=new Uint8Array(r),a=0;return t.forEach((function(e){i.set(e,a),a+=e.length})),i}function m(e,t){return v(f.encode(e),new Uint8Array([0]),t)}function g(e,t,n){if(t<0||t>=p)throw new RangeError("value must be >= 0 and <= ".concat(p-1,". Received ").concat(t));e.set([t>>>24,t>>>16,t>>>8,255&t],n)}function y(e){var t=Math.floor(e/p),n=e%p,r=new Uint8Array(8);return g(r,t,0),g(r,n,4),r}function _(e){var t=new Uint8Array(4);return g(t,e),t}function b(e){return v(_(e.length),e)}function w(e,t,n){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Math.ceil((n>>3)/32),o=new Uint8Array(32*i),s=0;case 3:if(!(s<i)){e.next=17;break}return(u=new Uint8Array(4+t.length+r.length)).set(_(s+1)),u.set(t,4),u.set(r,4+t.length),e.t0=o,e.next=11,d("sha256",u);case 11:e.t1=e.sent,e.t2=32*s,e.t0.set.call(e.t0,e.t1,e.t2);case 14:s++,e.next=3;break;case 17:return e.abrupt("return",o.slice(0,n>>3));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){var t=e;"string"===typeof t&&(t=f.encode(t));for(var n=[],r=0;r<t.length;r+=32768)n.push(String.fromCharCode.apply(null,t.subarray(r,r+32768)));return btoa(n.join(""))},S=function(e){return k(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},E=function(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},A=function(e){var t=e;t instanceof Uint8Array&&(t=h.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return E(t)}catch(n){throw new TypeError("The input to be decoded is not correctly encoded.")}},T=n(3433),C=n(5671),P=n(3144),I=n(7326),R=n(136),L=n(9388),M=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(e){var r,i;return(0,C.Z)(this,n),(r=t.call(this,e)).code="ERR_JOSE_GENERIC",r.name=r.constructor.name,null===(i=Error.captureStackTrace)||void 0===i||i.call(Error,(0,I.Z)(r),r.constructor),r}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JOSE_GENERIC"}}]),n}((0,n(8737).Z)(Error)),O=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";return(0,C.Z)(this,n),(r=t.call(this,e)).code="ERR_JWT_CLAIM_VALIDATION_FAILED",r.claim=i,r.reason=a,r}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}]),n}(M),F=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";return(0,C.Z)(this,n),(r=t.call(this,e)).code="ERR_JWT_EXPIRED",r.claim=i,r.reason=a,r}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWT_EXPIRED"}}]),n}(M),D=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JOSE_ALG_NOT_ALLOWED",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}]),n}(M),N=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JOSE_NOT_SUPPORTED",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JOSE_NOT_SUPPORTED"}}]),n}(M),j=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWE_DECRYPTION_FAILED",e.message="decryption operation failed",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWE_DECRYPTION_FAILED"}}]),n}(M),B=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWE_INVALID",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWE_INVALID"}}]),n}(M),U=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWS_INVALID",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWS_INVALID"}}]),n}(M),z=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWT_INVALID",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWT_INVALID"}}]),n}(M),V=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWK_INVALID",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWK_INVALID"}}]),n}(M),Z=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWKS_INVALID",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWKS_INVALID"}}]),n}(M),H=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWKS_NO_MATCHING_KEY",e.message="no applicable key found in the JSON Web Key Set",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWKS_NO_MATCHING_KEY"}}]),n}(M),W=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",e.message="multiple matching keys found in the JSON Web Key Set",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}]),n}(M);Symbol.asyncIterator;var G=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWKS_TIMEOUT",e.message="request timed out",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWKS_TIMEOUT"}}]),n}(M),q=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",e.message="signature verification failed",e}return(0,P.Z)(n,null,[{key:"code",get:function(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}]),n}(M),K=u.getRandomValues.bind(u);function J(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new N("Unsupported JWE Algorithm: ".concat(e))}}var X=function(e){return K(new Uint8Array(J(e)>>3))},Y=function(e,t){if(t.length<<3!==J(e))throw new B("Invalid Initialization Vector length")},Q=function(e,t){var n=e.byteLength<<3;if(n!==t)throw new B("Invalid Content Encryption Key length. Expected ".concat(t," bits, got ").concat(n," bits"))},$=function(e,t){if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");for(var n=e.length,r=0,i=-1;++i<n;)r|=e[i]^t[i];return 0===r};function ee(){return"undefined"!==typeof WebSocketPair||"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!==typeof EdgeRuntime&&"vercel"===EdgeRuntime}function te(e){return new TypeError("CryptoKey does not support this operation, its ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"algorithm.name"," must be ").concat(e))}function ne(e,t){return e.name===t}function re(e){return parseInt(e.name.slice(4),10)}function ie(e,t){if(t.length&&!t.some((function(t){return e.usages.includes(t)}))){var n="CryptoKey does not support this operation, its usages must include ";if(t.length>2){var r=t.pop();n+="one of ".concat(t.join(", "),", or ").concat(r,".")}else 2===t.length?n+="one of ".concat(t[0]," or ").concat(t[1],"."):n+="".concat(t[0],".");throw new TypeError(n)}}function ae(e,t){switch(t){case"HS256":case"HS384":case"HS512":if(!ne(e.algorithm,"HMAC"))throw te("HMAC");var n=parseInt(t.slice(2),10);if(re(e.algorithm.hash)!==n)throw te("SHA-".concat(n),"algorithm.hash");break;case"RS256":case"RS384":case"RS512":if(!ne(e.algorithm,"RSASSA-PKCS1-v1_5"))throw te("RSASSA-PKCS1-v1_5");var r=parseInt(t.slice(2),10);if(re(e.algorithm.hash)!==r)throw te("SHA-".concat(r),"algorithm.hash");break;case"PS256":case"PS384":case"PS512":if(!ne(e.algorithm,"RSA-PSS"))throw te("RSA-PSS");var i=parseInt(t.slice(2),10);if(re(e.algorithm.hash)!==i)throw te("SHA-".concat(i),"algorithm.hash");break;case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name){if(ee()){if(ne(e.algorithm,"NODE-ED25519"))break;throw te("Ed25519, Ed448, or NODE-ED25519")}throw te("Ed25519 or Ed448")}break;case"ES256":case"ES384":case"ES512":if(!ne(e.algorithm,"ECDSA"))throw te("ECDSA");var a=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==a)throw te(a,"algorithm.namedCurve");break;default:throw new TypeError("CryptoKey does not support this operation")}for(var o=arguments.length,s=new Array(o>2?o-2:0),u=2;u<o;u++)s[u-2]=arguments[u];ie(e,s)}function oe(e,t){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":if(!ne(e.algorithm,"AES-GCM"))throw te("AES-GCM");var n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw te(n,"algorithm.length");break;case"A128KW":case"A192KW":case"A256KW":if(!ne(e.algorithm,"AES-KW"))throw te("AES-KW");var r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw te(r,"algorithm.length");break;case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw te("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!ne(e.algorithm,"PBKDF2"))throw te("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(!ne(e.algorithm,"RSA-OAEP"))throw te("RSA-OAEP");var i=parseInt(t.slice(9),10)||1;if(re(e.algorithm.hash)!==i)throw te("SHA-".concat(i),"algorithm.hash");break;default:throw new TypeError("CryptoKey does not support this operation")}for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];ie(e,o)}function se(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(r.length>2){var a=r.pop();e+="one of type ".concat(r.join(", "),", or ").concat(a,".")}else 2===r.length?e+="one of type ".concat(r[0]," or ").concat(r[1],"."):e+="of type ".concat(r[0],".");return null==t?e+=" Received ".concat(t):"function"===typeof t&&t.name?e+=" Received function ".concat(t.name):"object"===typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=" Received an instance of ".concat(t.constructor.name)),e}var ue=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return se.apply(void 0,["Key must be ",e].concat(n))};function le(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return se.apply(void 0,["Key for the ".concat(e," algorithm must be "),t].concat(r))}var ce=function(e){return l(e)},de=["CryptoKey"];function fe(e,t,n,r,i,a){return he.apply(this,arguments)}function he(){return(he=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o,s){var l,c,d,f,h,p,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n instanceof Uint8Array){e.next=2;break}throw new TypeError(ue(n,"Uint8Array"));case 2:return l=parseInt(t.slice(1,4),10),e.next=5,u.subtle.importKey("raw",n.subarray(l>>3),"AES-CBC",!1,["decrypt"]);case 5:return c=e.sent,e.next=8,u.subtle.importKey("raw",n.subarray(0,l>>3),{hash:"SHA-".concat(l<<1),name:"HMAC"},!1,["sign"]);case 8:return d=e.sent,f=v(s,i,r,y(s.length<<3)),e.t0=Uint8Array,e.next=13,u.subtle.sign("HMAC",d,f);case 13:e.t1=e.sent.slice(0,l>>3),h=new e.t0(e.t1);try{p=$(o,h)}catch(a){}if(p){e.next=18;break}throw new j;case 18:return e.prev=18,e.t2=Uint8Array,e.next=22,u.subtle.decrypt({iv:i,name:"AES-CBC"},c,r);case 22:e.t3=e.sent,m=new e.t2(e.t3),e.next=28;break;case 26:e.prev=26,e.t4=e.catch(18);case 28:if(m){e.next=30;break}throw new j;case 30:return e.abrupt("return",m);case 31:case"end":return e.stop()}}),e,null,[[18,26]])})))).apply(this,arguments)}function pe(e,t,n,r,i,a){return ve.apply(this,arguments)}function ve(){return(ve=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o,s){var l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n instanceof Uint8Array)){e.next=6;break}return e.next=3,u.subtle.importKey("raw",n,"AES-GCM",!1,["decrypt"]);case 3:l=e.sent,e.next=8;break;case 6:oe(n,t,"decrypt"),l=n;case 8:return e.prev=8,e.t0=Uint8Array,e.next=12,u.subtle.decrypt({additionalData:s,iv:i,name:"AES-GCM",tagLength:128},l,v(r,o));case 12:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 16:throw e.prev=16,e.t2=e.catch(8),new j;case 19:case"end":return e.stop()}}),e,null,[[8,16]])})))).apply(this,arguments)}var me=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(n)||n instanceof Uint8Array){e.next=2;break}throw new TypeError(ue.apply(void 0,[n].concat((0,T.Z)(de),["Uint8Array"])));case 2:Y(t,i),e.t0=t,e.next="A128CBC-HS256"===e.t0||"A192CBC-HS384"===e.t0||"A256CBC-HS512"===e.t0?6:"A128GCM"===e.t0||"A192GCM"===e.t0||"A256GCM"===e.t0?8:10;break;case 6:return n instanceof Uint8Array&&Q(n,parseInt(t.slice(-3),10)),e.abrupt("return",fe(t,n,r,i,o,s));case 8:return n instanceof Uint8Array&&Q(n,parseInt(t.slice(1,4),10)),e.abrupt("return",pe(t,n,r,i,o,s));case 10:throw new N("Unsupported JWE Content Encryption Algorithm");case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),ge=me,ye=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new N('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.');case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new N('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.');case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=n(7762),we=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t.filter(Boolean);if(0===i.length||1===i.length)return!0;var a,o=(0,be.Z)(i);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=Object.keys(s);if(r&&0!==r.size)for(var l=0,c=u;l<c.length;l++){var d=c[l];if(r.has(d))return!1;r.add(d)}else r=new Set(u)}}catch(f){o.e(f)}finally{o.f()}return!0};function xe(e){if("object"!==typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}var ke=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function Se(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError("Invalid key size for alg: ".concat(t))}function Ee(e,t,n){if(l(e))return oe(e,t,n),e;if(e instanceof Uint8Array)return u.subtle.importKey("raw",e,"AES-KW",!0,[n]);throw new TypeError(ue.apply(void 0,[e].concat((0,T.Z)(de),["Uint8Array"])))}var Ae=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(n,t,"wrapKey");case 2:return Se(o=e.sent,t),e.next=6,(i=u.subtle).importKey.apply(i,["raw",r].concat((0,T.Z)(ke)));case 6:return s=e.sent,e.t0=Uint8Array,e.next=10,u.subtle.wrapKey("raw",s,o,"AES-KW");case 10:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Te=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(n,t,"unwrapKey");case 2:return Se(o=e.sent,t),e.next=6,(i=u.subtle).unwrapKey.apply(i,["raw",r,o,"AES-KW"].concat((0,T.Z)(ke)));case 6:return s=e.sent,e.t0=Uint8Array,e.next=10,u.subtle.exportKey("raw",s);case 10:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Ce(e,t,n,r){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s,c,d,h,p=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=p.length>4&&void 0!==p[4]?p[4]:new Uint8Array(0),s=p.length>5&&void 0!==p[5]?p[5]:new Uint8Array(0),l(t)){e.next=4;break}throw new TypeError(ue.apply(void 0,[t].concat((0,T.Z)(de))));case 4:if(oe(t,"ECDH"),l(n)){e.next=7;break}throw new TypeError(ue.apply(void 0,[n].concat((0,T.Z)(de))));case 7:return oe(n,"ECDH","deriveBits"),c=v(b(f.encode(r)),b(o),b(s),_(i)),d="X25519"===t.algorithm.name?256:"X448"===t.algorithm.name?448:Math.ceil(parseInt(t.algorithm.namedCurve.substr(-3),10)/8)<<3,e.t0=Uint8Array,e.next=13,u.subtle.deriveBits({name:t.algorithm.name,public:t},n,d);case 13:return e.t1=e.sent,h=new e.t0(e.t1),e.abrupt("return",w(h,i,c));case 16:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function Ie(e){return Re.apply(this,arguments)}function Re(){return(Re=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(t)){e.next=2;break}throw new TypeError(ue.apply(void 0,[t].concat((0,T.Z)(de))));case 2:return e.abrupt("return",u.subtle.generateKey(t.algorithm,!0,["deriveBits"]));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){if(!l(e))throw new TypeError(ue.apply(void 0,[e].concat((0,T.Z)(de))));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||"X25519"===e.algorithm.name||"X448"===e.algorithm.name}function Me(e){if(!(e instanceof Uint8Array)||e.length<8)throw new B("PBES2 Salt Input must be 8 or more octets")}function Oe(e,t){if(e instanceof Uint8Array)return u.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(l(e))return oe(e,t,"deriveBits","deriveKey"),e;throw new TypeError(ue.apply(void 0,[e].concat((0,T.Z)(de),["Uint8Array"])))}function Fe(e,t,n,r){return De.apply(this,arguments)}function De(){return(De=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s,l,c,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Me(t),o=m(n,t),s=parseInt(n.slice(13,16),10),l={hash:"SHA-".concat(n.slice(8,11)),iterations:r,name:"PBKDF2",salt:o},c={length:s,name:"AES-KW"},e.next=7,Oe(i,n);case 7:if(!(d=e.sent).usages.includes("deriveBits")){e.next=14;break}return e.t0=Uint8Array,e.next=12,u.subtle.deriveBits(l,d,s);case 12:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 14:if(!d.usages.includes("deriveKey")){e.next=16;break}return e.abrupt("return",u.subtle.deriveKey(l,d,c,!1,["wrapKey","unwrapKey"]));case 16:throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"');case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s,u,l=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>3&&void 0!==l[3]?l[3]:2048,o=l.length>4&&void 0!==l[4]?l[4]:K(new Uint8Array(16)),e.next=4,Fe(o,t,i,n);case 4:return s=e.sent,e.next=7,Ae(t.slice(-6),s,r);case 7:return u=e.sent,e.abrupt("return",{encryptedKey:u,p2c:i,p2s:S(o)});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),je=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(o,t,i,n);case 2:return s=e.sent,e.abrupt("return",Te(t.slice(-6),s,r));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();function Be(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new N("alg ".concat(e," is not supported either by JOSE or your javascript runtime"))}}var Ue=function(e,t){if(e.startsWith("RS")||e.startsWith("PS")){var n=t.algorithm.modulusLength;if("number"!==typeof n||n<2048)throw new TypeError("".concat(e," requires key modulusLength to be 2048 bits or larger"))}},ze=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(n)){e.next=2;break}throw new TypeError(ue.apply(void 0,[n].concat((0,T.Z)(de))));case 2:if(oe(n,t,"encrypt","wrapKey"),Ue(t,n),!n.usages.includes("encrypt")){e.next=10;break}return e.t0=Uint8Array,e.next=8,u.subtle.encrypt(Be(t),n,r);case 8:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 10:if(!n.usages.includes("wrapKey")){e.next=19;break}return e.next=13,(i=u.subtle).importKey.apply(i,["raw",r].concat((0,T.Z)(ke)));case 13:return o=e.sent,e.t2=Uint8Array,e.next=17,u.subtle.wrapKey("raw",o,n,Be(t));case 17:return e.t3=e.sent,e.abrupt("return",new e.t2(e.t3));case 19:throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation');case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(n)){e.next=2;break}throw new TypeError(ue.apply(void 0,[n].concat((0,T.Z)(de))));case 2:if(oe(n,t,"decrypt","unwrapKey"),Ue(t,n),!n.usages.includes("decrypt")){e.next=10;break}return e.t0=Uint8Array,e.next=8,u.subtle.decrypt(Be(t),n,r);case 8:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 10:if(!n.usages.includes("unwrapKey")){e.next=19;break}return e.next=13,(i=u.subtle).unwrapKey.apply(i,["raw",r,n,Be(t)].concat((0,T.Z)(ke)));case 13:return o=e.sent,e.t2=Uint8Array,e.next=17,u.subtle.exportKey("raw",o);case 17:return e.t3=e.sent,e.abrupt("return",new e.t2(e.t3));case 19:throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation');case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Ze(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new N("Unsupported JWE Algorithm: ".concat(e))}}var He=function(e){return K(new Uint8Array(Ze(e)>>3))},We=function(e,t){var n=(e.match(/.{1,64}/g)||[]).join("\n");return"-----BEGIN ".concat(t,"-----\n").concat(n,"\n-----END ").concat(t,"-----")},Ge=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(r)){e.next=2;break}throw new TypeError(ue.apply(void 0,[r].concat((0,T.Z)(de))));case 2:if(r.extractable){e.next=4;break}throw new TypeError("CryptoKey is not extractable");case 4:if(r.type===t){e.next=6;break}throw new TypeError("key is not a ".concat(t," key"));case 6:return e.t0=We,e.t1=k,e.t2=Uint8Array,e.next=11,u.subtle.exportKey(n,r);case 11:return e.t3=e.sent,e.t4=new e.t2(e.t3),e.t5=(0,e.t1)(e.t4),e.t6="".concat(t.toUpperCase()," KEY"),e.abrupt("return",(0,e.t0)(e.t5,e.t6));case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qe=function(e){return Ge("public","spki",e)},Ke=function(e){return Ge("private","pkcs8",e)},Je=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;0===r&&(n.unshift(n.length),n.unshift(6));var i=t.indexOf(n[0],r);if(-1===i)return!1;var a=t.subarray(i,i+n.length);return a.length===n.length&&(a.every((function(e,t){return e===n[t]}))||e(t,n,i+1))},Xe=function(e){switch(!0){case Je(e,[42,134,72,206,61,3,1,7]):return"P-256";case Je(e,[43,129,4,0,34]):return"P-384";case Je(e,[43,129,4,0,35]):return"P-521";case Je(e,[43,101,110]):return"X25519";case Je(e,[43,101,111]):return"X448";case Je(e,[43,101,112]):return"Ed25519";case Je(e,[43,101,113]):return"Ed448";default:throw new N("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},Ye=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){var s,l,c,d,f,h,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=new Uint8Array(atob(r.replace(t,"")).split("").map((function(e){return e.charCodeAt(0)}))),h="spki"===n,e.t0=i,e.next="PS256"===e.t0||"PS384"===e.t0||"PS512"===e.t0?5:"RS256"===e.t0||"RS384"===e.t0||"RS512"===e.t0?8:"RSA-OAEP"===e.t0||"RSA-OAEP-256"===e.t0||"RSA-OAEP-384"===e.t0||"RSA-OAEP-512"===e.t0?11:"ES256"===e.t0?14:"ES384"===e.t0?17:"ES512"===e.t0?20:"ECDH-ES"===e.t0||"ECDH-ES+A128KW"===e.t0||"ECDH-ES+A192KW"===e.t0||"ECDH-ES+A256KW"===e.t0?23:"EdDSA"===e.t0?27:30;break;case 5:return c={name:"RSA-PSS",hash:"SHA-".concat(i.slice(-3))},d=h?["verify"]:["sign"],e.abrupt("break",31);case 8:return c={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(i.slice(-3))},d=h?["verify"]:["sign"],e.abrupt("break",31);case 11:return c={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(i.slice(-3),10)||1)},d=h?["encrypt","wrapKey"]:["decrypt","unwrapKey"],e.abrupt("break",31);case 14:return c={name:"ECDSA",namedCurve:"P-256"},d=h?["verify"]:["sign"],e.abrupt("break",31);case 17:return c={name:"ECDSA",namedCurve:"P-384"},d=h?["verify"]:["sign"],e.abrupt("break",31);case 20:return c={name:"ECDSA",namedCurve:"P-521"},d=h?["verify"]:["sign"],e.abrupt("break",31);case 23:return p=Xe(f),c=p.startsWith("P-")?{name:"ECDH",namedCurve:p}:{name:p},d=h?[]:["deriveBits"],e.abrupt("break",31);case 27:return c={name:Xe(f)},d=h?["verify"]:["sign"],e.abrupt("break",31);case 30:throw new N('Invalid or unsupported "alg" (Algorithm) value');case 31:return e.prev=31,e.next=34,u.subtle.importKey(n,f,c,null!==(s=null===o||void 0===o?void 0:o.extractable)&&void 0!==s&&s,d);case 34:case 43:return e.abrupt("return",e.sent);case 37:if(e.prev=37,e.t1=e.catch(31),"Ed25519"!==c.name||"NotSupportedError"!==(null===e.t1||void 0===e.t1?void 0:e.t1.name)||!ee()){e.next=44;break}return c={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},e.next=43,u.subtle.importKey(n,f,c,null!==(l=null===o||void 0===o?void 0:o.extractable)&&void 0!==l&&l,d);case 44:throw e.t1;case 45:case"end":return e.stop()}}),e,null,[[31,37]])})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),Qe=function(e,t,n){return Ye(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,n)},$e=function(e,t,n){return Ye(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,n)};function et(e){for(var t=[],n=0;n<e.length;){var r=tt(e.subarray(n));t.push(r),n+=r.byteLength}return t}function tt(e){var t=0,n=31&e[0];if(t++,31===n){for(n=0;e[t]>=128;)n=128*n+e[t]-128,t++;n=128*n+e[t]-128,t++}var r=0;if(e[t]<128)r=e[t],t++;else{if(128===r){for(r=0;0!==e[t+r]||0!==e[t+r+1];){if(r>e.byteLength)throw new TypeError("invalid indefinite form length");r++}var i=t+r+2;return{byteLength:i,contents:e.subarray(t,t+r),raw:e.subarray(0,i)}}var a=127&e[t];t++,r=0;for(var o=0;o<a;o++)r=256*r+e[t],t++}var s=t+r;return{byteLength:s,contents:e.subarray(t,s),raw:e.subarray(0,s)}}function nt(e){var t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),n=E(t);return We(function(e){var t=et(et(tt(e).contents)[0].contents);return k(t[160===t[0].raw[0]?6:5].raw)}(n),"PUBLIC KEY")}var rt=function(e,t,n){var r;try{r=nt(e)}catch(i){throw new TypeError("failed to parse the X.509 certificate",{cause:i})}return $e(r,t,n)};function it(e){var t,n;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:"SHA-".concat(e.alg.slice(-3))},n=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new N("".concat(e.alg," keys cannot be imported as CryptoKey instances"));case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},n=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},n=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},n=["deriveBits"];break;default:throw new N('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:"SHA-".concat(e.alg.slice(-3))},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(e.alg.slice(-3))},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(e.alg.slice(-3),10)||1)},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new N('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new N('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"EdDSA":t={name:e.crv},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new N('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new N('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}var at=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,l,c,d,f,h,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.alg){e.next=2;break}throw new TypeError('"alg" argument is required when "jwk.alg" is not present');case 2:if(i=it(t),s=i.algorithm,l=i.keyUsages,c=[s,null!==(n=t.ext)&&void 0!==n&&n,null!==(r=t.key_ops)&&void 0!==r?r:l],"PBKDF2"!==s.name){e.next=6;break}return e.abrupt("return",(d=u.subtle).importKey.apply(d,["raw",A(t.k)].concat(c)));case 6:return delete(f=(0,o.Z)({},t)).alg,delete f.use,e.prev=9,e.next=12,(h=u.subtle).importKey.apply(h,["jwk",f].concat(c));case 12:case 21:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(9),"Ed25519"!==s.name||"NotSupportedError"!==(null===e.t0||void 0===e.t0?void 0:e.t0.name)||!ee()){e.next=22;break}return c[0]={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},e.next=21,(p=u.subtle).importKey.apply(p,["jwk",f].concat(c));case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),ot=at;function st(e,t,n){return ut.apply(this,arguments)}function ut(){return(ut=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t&&0===t.indexOf("-----BEGIN PUBLIC KEY-----")){e.next=2;break}throw new TypeError('"spki" must be SPKI formatted string');case 2:return e.abrupt("return",$e(t,n,r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t,n){return ct.apply(this,arguments)}function ct(){return(ct=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t&&0===t.indexOf("-----BEGIN CERTIFICATE-----")){e.next=2;break}throw new TypeError('"x509" must be X.509 formatted string');case 2:return e.abrupt("return",rt(t,n,r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e,t,n){return ft.apply(this,arguments)}function ft(){return(ft=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t&&0===t.indexOf("-----BEGIN PRIVATE KEY-----")){e.next=2;break}throw new TypeError('"pkcs8" must be PKCS#8 formatted string');case 2:return e.abrupt("return",Qe(t,n,r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e,t,n){return pt.apply(this,arguments)}function pt(){return(pt=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(t)){e.next=2;break}throw new TypeError("JWK must be an object");case 2:n||(n=t.alg),e.t0=t.kty,e.next="oct"===e.t0?6:"RSA"===e.t0?12:"EC"===e.t0||"OKP"===e.t0?14:15;break;case 6:if("string"===typeof t.k&&t.k){e.next=8;break}throw new TypeError('missing "k" (Key Value) Parameter value');case 8:if(null!==r&&void 0!==r||(r=!0!==t.ext),!r){e.next=11;break}return e.abrupt("return",ot((0,o.Z)((0,o.Z)({},t),{},{alg:n,ext:null!==(i=t.ext)&&void 0!==i&&i})));case 11:return e.abrupt("return",A(t.k));case 12:if(void 0===t.oth){e.next=14;break}throw new N('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case 14:return e.abrupt("return",ot((0,o.Z)((0,o.Z)({},t),{},{alg:n})));case 15:throw new N('Unsupported "kty" (Key Type) Parameter value');case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vt=function(e,t,n){e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?function(e,t){if(!(t instanceof Uint8Array)){if(!ce(t))throw new TypeError(le.apply(void 0,[e,t].concat((0,T.Z)(de),["Uint8Array"])));if("secret"!==t.type)throw new TypeError("".concat(de.join(" or "),' instances for symmetric algorithms must be of type "secret"'))}}(e,t):function(e,t,n){if(!ce(t))throw new TypeError(le.apply(void 0,[e,t].concat((0,T.Z)(de))));if("secret"===t.type)throw new TypeError("".concat(de.join(" or "),' instances for asymmetric algorithms must not be of type "secret"'));if("sign"===n&&"public"===t.type)throw new TypeError("".concat(de.join(" or "),' instances for asymmetric algorithm signing must be of type "private"'));if("decrypt"===n&&"public"===t.type)throw new TypeError("".concat(de.join(" or "),' instances for asymmetric algorithm decryption must be of type "private"'));if(t.algorithm&&"verify"===n&&"private"===t.type)throw new TypeError("".concat(de.join(" or "),' instances for asymmetric algorithm verifying must be of type "public"'));if(t.algorithm&&"encrypt"===n&&"private"===t.type)throw new TypeError("".concat(de.join(" or "),' instances for asymmetric algorithm encryption must be of type "public"'))}(e,t,n)};function mt(e,t,n,r,i){return gt.apply(this,arguments)}function gt(){return(gt=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){var s,l,c,d,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array){e.next=2;break}throw new TypeError(ue(r,"Uint8Array"));case 2:return s=parseInt(t.slice(1,4),10),e.next=5,u.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]);case 5:return l=e.sent,e.next=8,u.subtle.importKey("raw",r.subarray(0,s>>3),{hash:"SHA-".concat(s<<1),name:"HMAC"},!1,["sign"]);case 8:return c=e.sent,e.t0=Uint8Array,e.next=12,u.subtle.encrypt({iv:i,name:"AES-CBC"},l,n);case 12:return e.t1=e.sent,d=new e.t0(e.t1),f=v(o,i,d,y(o.length<<3)),e.t2=Uint8Array,e.next=18,u.subtle.sign("HMAC",c,f);case 18:return e.t3=e.sent.slice(0,s>>3),h=new e.t2(e.t3),e.abrupt("return",{ciphertext:d,tag:h});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(e,t,n,r,i){return _t.apply(this,arguments)}function _t(){return(_t=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){var s,l,c,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r instanceof Uint8Array)){e.next=6;break}return e.next=3,u.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]);case 3:s=e.sent,e.next=8;break;case 6:oe(r,t,"encrypt"),s=r;case 8:return e.t0=Uint8Array,e.next=11,u.subtle.encrypt({additionalData:o,iv:i,name:"AES-GCM",tagLength:128},s,n);case 11:return e.t1=e.sent,l=new e.t0(e.t1),c=l.slice(-16),d=l.slice(0,-16),e.abrupt("return",{ciphertext:d,tag:c});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(r)||r instanceof Uint8Array){e.next=2;break}throw new TypeError(ue.apply(void 0,[r].concat((0,T.Z)(de),["Uint8Array"])));case 2:Y(t,i),e.t0=t,e.next="A128CBC-HS256"===e.t0||"A192CBC-HS384"===e.t0||"A256CBC-HS512"===e.t0?6:"A128GCM"===e.t0||"A192GCM"===e.t0||"A256GCM"===e.t0?8:10;break;case 6:return r instanceof Uint8Array&&Q(r,parseInt(t.slice(-3),10)),e.abrupt("return",mt(t,n,r,i,o));case 8:return r instanceof Uint8Array&&Q(r,parseInt(t.slice(1,4),10)),e.abrupt("return",yt(t,n,r,i,o));case 10:throw new N("Unsupported JWE Content Encryption Algorithm");case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),wt=bt;function xt(e,t,n,r){return kt.apply(this,arguments)}function kt(){return(kt=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.slice(0,7),i||(i=X(o)),e.next=4,wt(o,r,n,i,new Uint8Array(0));case 4:return s=e.sent,u=s.ciphertext,l=s.tag,e.abrupt("return",{encryptedKey:u,iv:S(i),tag:S(l)});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e,t,n,r,i){return Et.apply(this,arguments)}function Et(){return(Et=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.slice(0,7),e.abrupt("return",ge(s,n,r,i,o,new Uint8Array(0)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(){return(At=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){var s,u,l,c,d,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vt(t,n,"decrypt"),e.t0=t,e.next="dir"===e.t0?4:"ECDH-ES"===e.t0?7:"ECDH-ES+A128KW"===e.t0||"ECDH-ES+A192KW"===e.t0||"ECDH-ES+A256KW"===e.t0?9:"RSA1_5"===e.t0||"RSA-OAEP"===e.t0||"RSA-OAEP-256"===e.t0||"RSA-OAEP-384"===e.t0||"RSA-OAEP-512"===e.t0?32:"PBES2-HS256+A128KW"===e.t0||"PBES2-HS384+A192KW"===e.t0||"PBES2-HS512+A256KW"===e.t0?35:"A128KW"===e.t0||"A192KW"===e.t0||"A256KW"===e.t0?45:"A128GCMKW"===e.t0||"A192GCMKW"===e.t0||"A256GCMKW"===e.t0?48:57;break;case 4:if(void 0===r){e.next=6;break}throw new B("Encountered unexpected JWE Encrypted Key");case 6:return e.abrupt("return",n);case 7:if(void 0===r){e.next=9;break}throw new B("Encountered unexpected JWE Encrypted Key");case 9:if(xe(i.epk)){e.next=11;break}throw new B('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');case 11:if(Le(n)){e.next=13;break}throw new N("ECDH with the provided key is not allowed or not supported by your javascript runtime");case 13:return e.next=15,ht(i.epk,t);case 15:if(s=e.sent,void 0===i.apu){e.next=20;break}if("string"===typeof i.apu){e.next=19;break}throw new B('JOSE Header "apu" (Agreement PartyUInfo) invalid');case 19:u=A(i.apu);case 20:if(void 0===i.apv){e.next=24;break}if("string"===typeof i.apv){e.next=23;break}throw new B('JOSE Header "apv" (Agreement PartyVInfo) invalid');case 23:l=A(i.apv);case 24:return e.next=26,Ce(s,n,"ECDH-ES"===t?i.enc:t,"ECDH-ES"===t?Ze(i.enc):parseInt(t.slice(-5,-2),10),u,l);case 26:if(c=e.sent,"ECDH-ES"!==t){e.next=29;break}return e.abrupt("return",c);case 29:if(void 0!==r){e.next=31;break}throw new B("JWE Encrypted Key missing");case 31:return e.abrupt("return",Te(t.slice(-6),c,r));case 32:if(void 0!==r){e.next=34;break}throw new B("JWE Encrypted Key missing");case 34:return e.abrupt("return",Ve(t,n,r));case 35:if(void 0!==r){e.next=37;break}throw new B("JWE Encrypted Key missing");case 37:if("number"===typeof i.p2c){e.next=39;break}throw new B('JOSE Header "p2c" (PBES2 Count) missing or invalid');case 39:if(d=(null===o||void 0===o?void 0:o.maxPBES2Count)||1e4,!(i.p2c>d)){e.next=42;break}throw new B('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');case 42:if("string"===typeof i.p2s){e.next=44;break}throw new B('JOSE Header "p2s" (PBES2 Salt) missing or invalid');case 44:return e.abrupt("return",je(t,n,r,i.p2c,A(i.p2s)));case 45:if(void 0!==r){e.next=47;break}throw new B("JWE Encrypted Key missing");case 47:return e.abrupt("return",Te(t,n,r));case 48:if(void 0!==r){e.next=50;break}throw new B("JWE Encrypted Key missing");case 50:if("string"===typeof i.iv){e.next=52;break}throw new B('JOSE Header "iv" (Initialization Vector) missing or invalid');case 52:if("string"===typeof i.tag){e.next=54;break}throw new B('JOSE Header "tag" (Authentication Tag) missing or invalid');case 54:return f=A(i.iv),h=A(i.tag),e.abrupt("return",St(t,n,r,f,h));case 57:throw new N('Invalid or unsupported "alg" (JWE Algorithm) header value');case 58:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tt=function(e,t,n,r,i){return At.apply(this,arguments)};var Ct=function(e,t,n,r,i){if(void 0!==i.crit&&void 0===r.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r.crit)return new Set;if(!Array.isArray(r.crit)||0===r.crit.length||r.crit.some((function(e){return"string"!==typeof e||0===e.length})))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');var a;a=void 0!==n?new Map([].concat((0,T.Z)(Object.entries(n)),(0,T.Z)(t.entries()))):t;var o,s=(0,be.Z)(r.crit);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!a.has(u))throw new N('Extension Header Parameter "'.concat(u,'" is not recognized'));if(void 0===i[u])throw new e('Extension Header Parameter "'.concat(u,'" is missing'));if(a.get(u)&&void 0===r[u])throw new e('Extension Header Parameter "'.concat(u,'" MUST be integrity protected'))}}catch(l){s.e(l)}finally{s.f()}return new Set(r.crit)},Pt=function(e,t){if(void 0!==t&&(!Array.isArray(t)||t.some((function(e){return"string"!==typeof e}))))throw new TypeError('"'.concat(e,'" option must be an array of strings'));if(t)return new Set(t)};function It(e,t,n){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,s,u,l,c,d,p,m,g,y,_,b,w,x,k,S,E;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(t)){e.next=2;break}throw new B("Flattened JWE must be an object");case 2:if(void 0!==t.protected||void 0!==t.header||void 0!==t.unprotected){e.next=4;break}throw new B("JOSE Header missing");case 4:if("string"===typeof t.iv){e.next=6;break}throw new B("JWE Initialization Vector missing or incorrect type");case 6:if("string"===typeof t.ciphertext){e.next=8;break}throw new B("JWE Ciphertext missing or incorrect type");case 8:if("string"===typeof t.tag){e.next=10;break}throw new B("JWE Authentication Tag missing or incorrect type");case 10:if(void 0===t.protected||"string"===typeof t.protected){e.next=12;break}throw new B("JWE Protected Header incorrect type");case 12:if(void 0===t.encrypted_key||"string"===typeof t.encrypted_key){e.next=14;break}throw new B("JWE Encrypted Key incorrect type");case 14:if(void 0===t.aad||"string"===typeof t.aad){e.next=16;break}throw new B("JWE AAD incorrect type");case 16:if(void 0===t.header||xe(t.header)){e.next=18;break}throw new B("JWE Shared Unprotected Header incorrect type");case 18:if(void 0===t.unprotected||xe(t.unprotected)){e.next=20;break}throw new B("JWE Per-Recipient Unprotected Header incorrect type");case 20:if(!t.protected){e.next=29;break}e.prev=21,u=A(t.protected),s=JSON.parse(h.decode(u)),e.next=29;break;case 26:throw e.prev=26,e.t0=e.catch(21),new B("JWE Protected Header is invalid");case 29:if(we(s,t.header,t.unprotected)){e.next=31;break}throw new B("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");case 31:if(l=(0,o.Z)((0,o.Z)((0,o.Z)({},s),t.header),t.unprotected),Ct(B,new Map,null===r||void 0===r?void 0:r.crit,s,l),void 0===l.zip){e.next=38;break}if(s&&s.zip){e.next=36;break}throw new B('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');case 36:if("DEF"===l.zip){e.next=38;break}throw new N('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value');case 38:if(c=l.alg,d=l.enc,"string"===typeof c&&c){e.next=41;break}throw new B("missing JWE Algorithm (alg) in JWE Header");case 41:if("string"===typeof d&&d){e.next=43;break}throw new B("missing JWE Encryption Algorithm (enc) in JWE Header");case 43:if(p=r&&Pt("keyManagementAlgorithms",r.keyManagementAlgorithms),m=r&&Pt("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms),!p||p.has(c)){e.next=47;break}throw new D('"alg" (Algorithm) Header Parameter not allowed');case 47:if(!m||m.has(d)){e.next=49;break}throw new D('"enc" (Encryption Algorithm) Header Parameter not allowed');case 49:if(void 0!==t.encrypted_key&&(g=A(t.encrypted_key)),y=!1,"function"!==typeof n){e.next=56;break}return e.next=54,n(s,t);case 54:n=e.sent,y=!0;case 56:return e.prev=56,e.next=59,Tt(c,n,g,l,r);case 59:_=e.sent,e.next=67;break;case 62:if(e.prev=62,e.t1=e.catch(56),!(e.t1 instanceof TypeError||e.t1 instanceof B||e.t1 instanceof N)){e.next=66;break}throw e.t1;case 66:_=He(d);case 67:return b=A(t.iv),w=A(t.tag),x=f.encode(null!==(i=t.protected)&&void 0!==i?i:""),k=void 0!==t.aad?v(x,f.encode("."),f.encode(t.aad)):x,e.next=73,ge(d,_,A(t.ciphertext),b,w,k);case 73:if(S=e.sent,"DEF"!==l.zip){e.next=78;break}return e.next=77,((null===r||void 0===r?void 0:r.inflateRaw)||ye)(S);case 77:S=e.sent;case 78:if(E={plaintext:S},void 0!==t.protected&&(E.protectedHeader=s),void 0!==t.aad&&(E.additionalAuthenticatedData=A(t.aad)),void 0!==t.unprotected&&(E.sharedUnprotectedHeader=t.unprotected),void 0!==t.header&&(E.unprotectedHeader=t.header),!y){e.next=85;break}return e.abrupt("return",(0,o.Z)((0,o.Z)({},E),{},{key:n}));case 85:return e.abrupt("return",E);case 86:case"end":return e.stop()}}),e,null,[[21,26],[56,62]])})))).apply(this,arguments)}function Lt(e,t,n){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,s,u,l,c,d,f,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array&&(t=h.decode(t)),"string"===typeof t){e.next=3;break}throw new B("Compact JWE must be a string or Uint8Array");case 3:if(i=t.split("."),s=i[0],u=i[1],l=i[2],c=i[3],d=i[4],5===i.length){e.next=6;break}throw new B("Invalid Compact JWE");case 6:return e.next=8,It({ciphertext:c,iv:l||void 0,protected:s||void 0,tag:d||void 0,encrypted_key:u||void 0},n,r);case 8:if(f=e.sent,p={plaintext:f.plaintext,protectedHeader:f.protectedHeader},"function"!==typeof n){e.next=12;break}return e.abrupt("return",(0,o.Z)((0,o.Z)({},p),{},{key:f.key}));case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t,n){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(t)){e.next=2;break}throw new B("General JWE must be an object");case 2:if(Array.isArray(t.recipients)&&t.recipients.every(xe)){e.next=4;break}throw new B("JWE Recipients missing or incorrect type");case 4:if(t.recipients.length){e.next=6;break}throw new B("JWE Recipients has no members");case 6:i=(0,be.Z)(t.recipients),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=21;break}return s=o.value,e.prev=11,e.next=14,It({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:s.encrypted_key,header:s.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},n,r);case 14:return e.abrupt("return",e.sent);case 17:e.prev=17,e.t0=e.catch(11);case 19:e.next=9;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(7),i.e(e.t1);case 26:return e.prev=26,i.f(),e.finish(26);case 29:throw new j;case 30:case"end":return e.stop()}}),e,null,[[7,23,26,29],[11,17]])})))).apply(this,arguments)}var Dt=n(4942),Nt=n(9439),jt=n(5987),Bt=["ext","key_ops","alg","use"],Ut=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Uint8Array)){e.next=2;break}return e.abrupt("return",{kty:"oct",k:S(t)});case 2:if(l(t)){e.next=4;break}throw new TypeError(ue.apply(void 0,[t].concat((0,T.Z)(de),["Uint8Array"])));case 4:if(t.extractable){e.next=6;break}throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");case 6:return e.next=8,u.subtle.exportKey("jwk",t);case 8:return n=e.sent,n.ext,n.key_ops,n.alg,n.use,r=(0,jt.Z)(n,Bt),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zt=Ut;function Vt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qe(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ke(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e){return qt.apply(this,arguments)}function qt(){return(qt=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zt(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kt=["encryptedKey"],Jt=["encryptedKey"];function Xt(){return Xt=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s,u,l,c,d,f,h,p,v,m,g,y,_,b,w,x,k,E,A=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=A.length>4&&void 0!==A[4]?A[4]:{},vt(t,r,"encrypt"),e.t0=t,e.next="dir"===e.t0?5:"ECDH-ES"===e.t0||"ECDH-ES+A128KW"===e.t0||"ECDH-ES+A192KW"===e.t0||"ECDH-ES+A256KW"===e.t0?7:"RSA1_5"===e.t0||"RSA-OAEP"===e.t0||"RSA-OAEP-256"===e.t0||"RSA-OAEP-384"===e.t0||"RSA-OAEP-512"===e.t0?39:"PBES2-HS256+A128KW"===e.t0||"PBES2-HS384+A192KW"===e.t0||"PBES2-HS512+A256KW"===e.t0?44:"A128KW"===e.t0||"A192KW"===e.t0||"A256KW"===e.t0?53:"A128GCMKW"===e.t0||"A192GCMKW"===e.t0||"A256GCMKW"===e.t0?58:67;break;case 5:return l=r,e.abrupt("break",68);case 7:if(Le(r)){e.next=9;break}throw new N("ECDH with the provided key is not allowed or not supported by your javascript runtime");case 9:if(c=o.apu,d=o.apv,f=o.epk,e.t1=f,e.t1){e.next=16;break}return e.next=15,Ie(r);case 15:f=e.sent.privateKey;case 16:return e.next=18,Gt(f);case 18:return h=e.sent,p=h.x,v=h.y,m=h.crv,g=h.kty,e.next=25,Ce(r,f,"ECDH-ES"===t?n:t,"ECDH-ES"===t?Ze(n):parseInt(t.slice(-5,-2),10),c,d);case 25:if(y=e.sent,u={epk:{x:p,crv:m,kty:g}},"EC"===g&&(u.epk.y=v),c&&(u.apu=S(c)),d&&(u.apv=S(d)),"ECDH-ES"!==t){e.next=33;break}return l=y,e.abrupt("break",68);case 33:return l=i||He(n),_=t.slice(-6),e.next=37,Ae(_,y,l);case 37:return s=e.sent,e.abrupt("break",68);case 39:return l=i||He(n),e.next=42,ze(t,r,l);case 42:return s=e.sent,e.abrupt("break",68);case 44:return l=i||He(n),b=o.p2c,w=o.p2s,e.next=48,Ne(t,r,l,b,w);case 48:return x=e.sent,s=x.encryptedKey,u=(0,jt.Z)(x,Kt),e.abrupt("break",68);case 53:return l=i||He(n),e.next=56,Ae(t,r,l);case 56:return s=e.sent,e.abrupt("break",68);case 58:return l=i||He(n),k=o.iv,e.next=62,xt(t,r,l,k);case 62:return E=e.sent,s=E.encryptedKey,u=(0,jt.Z)(E,Jt),e.abrupt("break",68);case 67:throw new N('Invalid or unsupported "alg" (JWE Algorithm) header value');case 68:return e.abrupt("return",{cek:l,encryptedKey:s,parameters:u});case 69:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}var Yt=function(e,t,n,r){return Xt.apply(this,arguments)},Qt=Symbol(),$t=function(){function e(t){if((0,C.Z)(this,e),!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}return(0,P.Z)(e,[{key:"setKeyManagementParameters",value:function(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}},{key:"setProtectedHeader",value:function(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}},{key:"setSharedUnprotectedHeader",value:function(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}},{key:"setUnprotectedHeader",value:function(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}},{key:"setAdditionalAuthenticatedData",value:function(e){return this._aad=e,this}},{key:"setContentEncryptionKey",value:function(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}},{key:"setInitializationVector",value:function(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}},{key:"encrypt",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,s,u,l,c,d,p,m,g,y,_,b,w,x,k;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._protectedHeader||this._unprotectedHeader||this._sharedUnprotectedHeader){e.next=2;break}throw new B("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");case 2:if(we(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader)){e.next=4;break}throw new B("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");case 4:if(r=(0,o.Z)((0,o.Z)((0,o.Z)({},this._protectedHeader),this._unprotectedHeader),this._sharedUnprotectedHeader),Ct(B,new Map,null===n||void 0===n?void 0:n.crit,this._protectedHeader,r),void 0===r.zip){e.next=11;break}if(this._protectedHeader&&this._protectedHeader.zip){e.next=9;break}throw new B('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');case 9:if("DEF"===r.zip){e.next=11;break}throw new N('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value');case 11:if(i=r.alg,s=r.enc,"string"===typeof i&&i){e.next=14;break}throw new B('JWE "alg" (Algorithm) Header Parameter missing or invalid');case 14:if("string"===typeof s&&s){e.next=16;break}throw new B('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');case 16:if("dir"!==i){e.next=21;break}if(!this._cek){e.next=19;break}throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption");case 19:e.next=24;break;case 21:if("ECDH-ES"!==i){e.next=24;break}if(!this._cek){e.next=24;break}throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");case 24:return e.next=26,Yt(i,s,t,this._cek,this._keyManagementParameters);case 26:if(d=e.sent,l=d.cek,u=d.encryptedKey,(c=d.parameters)&&(n&&Qt in n?this._unprotectedHeader?this._unprotectedHeader=(0,o.Z)((0,o.Z)({},this._unprotectedHeader),c):this.setUnprotectedHeader(c):this._protectedHeader?this._protectedHeader=(0,o.Z)((0,o.Z)({},this._protectedHeader),c):this.setProtectedHeader(c)),this._iv||(this._iv=X(s)),m=this._protectedHeader?f.encode(S(JSON.stringify(this._protectedHeader))):f.encode(""),this._aad?(g=S(this._aad),p=v(m,f.encode("."),f.encode(g))):p=m,"DEF"!==r.zip){e.next=45;break}return e.next=37,((null===n||void 0===n?void 0:n.deflateRaw)||_e)(this._plaintext);case 37:return b=e.sent,e.next=40,wt(s,b,l,this._iv,p);case 40:w=e.sent,y=w.ciphertext,_=w.tag,e.next=51;break;case 45:return e.next=48,wt(s,this._plaintext,l,this._iv,p);case 48:x=e.sent,y=x.ciphertext,_=x.tag;case 51:return k={ciphertext:S(y),iv:S(this._iv),tag:S(_)},u&&(k.encrypted_key=S(u)),g&&(k.aad=g),this._protectedHeader&&(k.protected=h.decode(m)),this._sharedUnprotectedHeader&&(k.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(k.header=this._unprotectedHeader),e.abrupt("return",k);case 58:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),en=function(){function e(t,n,r){(0,C.Z)(this,e),this.parent=t,this.key=n,this.options=r}return(0,P.Z)(e,[{key:"setUnprotectedHeader",value:function(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}},{key:"addRecipient",value:function(){var e;return(e=this.parent).addRecipient.apply(e,arguments)}},{key:"encrypt",value:function(){var e;return(e=this.parent).encrypt.apply(e,arguments)}},{key:"done",value:function(){return this.parent}}]),e}(),tn=function(){function e(t){(0,C.Z)(this,e),this._recipients=[],this._plaintext=t}return(0,P.Z)(e,[{key:"addRecipient",value:function(e,t){var n=new en(this,e,{crit:null===t||void 0===t?void 0:t.crit});return this._recipients.push(n),n}},{key:"setProtectedHeader",value:function(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}},{key:"setSharedUnprotectedHeader",value:function(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}},{key:"setAdditionalAuthenticatedData",value:function(e){return this._aad=e,this}},{key:"encrypt",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,u,l,c,d,f,h,p,v,m,g,y,_,b,w,x,k,E,A,T;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._recipients.length){e.next=2;break}throw new B("at least one recipient must be added");case 2:if(t={deflateRaw:null===t||void 0===t?void 0:t.deflateRaw},1!==this._recipients.length){e.next=15;break}return s=(0,Nt.Z)(this._recipients,1),u=s[0],e.next=7,new $t(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(u.unprotectedHeader).encrypt(u.key,(0,o.Z)((0,o.Z)({},u.options),t));case 7:return l=e.sent,c={ciphertext:l.ciphertext,iv:l.iv,recipients:[{}],tag:l.tag},l.aad&&(c.aad=l.aad),l.protected&&(c.protected=l.protected),l.unprotected&&(c.unprotected=l.unprotected),l.encrypted_key&&(c.recipients[0].encrypted_key=l.encrypted_key),l.header&&(c.recipients[0].header=l.header),e.abrupt("return",c);case 15:f=0;case 16:if(!(f<this._recipients.length)){e.next=41;break}if(h=this._recipients[f],we(this._protectedHeader,this._unprotectedHeader,h.unprotectedHeader)){e.next=20;break}throw new B("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");case 20:if(p=(0,o.Z)((0,o.Z)((0,o.Z)({},this._protectedHeader),this._unprotectedHeader),h.unprotectedHeader),"string"===typeof(v=p.alg)&&v){e.next=24;break}throw new B('JWE "alg" (Algorithm) Header Parameter missing or invalid');case 24:if("dir"!==v&&"ECDH-ES"!==v){e.next=26;break}throw new B('"dir" and "ECDH-ES" alg may only be used with a single recipient');case 26:if("string"===typeof p.enc&&p.enc){e.next=28;break}throw new B('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');case 28:if(d){e.next=32;break}d=p.enc,e.next=34;break;case 32:if(d===p.enc){e.next=34;break}throw new B('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');case 34:if(Ct(B,new Map,h.options.crit,this._protectedHeader,p),void 0===p.zip){e.next=38;break}if(this._protectedHeader&&this._protectedHeader.zip){e.next=38;break}throw new B('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');case 38:f++,e.next=16;break;case 41:m=He(d),g={ciphertext:"",iv:"",recipients:[],tag:""},y=0;case 44:if(!(y<this._recipients.length)){e.next=73;break}if(_=this._recipients[y],b={},g.recipients.push(b),w=(0,o.Z)((0,o.Z)((0,o.Z)({},this._protectedHeader),this._unprotectedHeader),_.unprotectedHeader),x=w.alg.startsWith("PBES2")?2048+y:void 0,0!==y){e.next=63;break}return e.next=53,new $t(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(m).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(_.unprotectedHeader).setKeyManagementParameters({p2c:x}).encrypt(_.key,(0,o.Z)((0,o.Z)((0,o.Z)({},_.options),t),{},(0,Dt.Z)({},Qt,!0)));case 53:return k=e.sent,g.ciphertext=k.ciphertext,g.iv=k.iv,g.tag=k.tag,k.aad&&(g.aad=k.aad),k.protected&&(g.protected=k.protected),k.unprotected&&(g.unprotected=k.unprotected),b.encrypted_key=k.encrypted_key,k.header&&(b.header=k.header),e.abrupt("continue",70);case 63:return e.next=65,Yt((null===(n=_.unprotectedHeader)||void 0===n?void 0:n.alg)||(null===(r=this._protectedHeader)||void 0===r?void 0:r.alg)||(null===(i=this._unprotectedHeader)||void 0===i?void 0:i.alg),d,_.key,m,{p2c:x});case 65:E=e.sent,A=E.encryptedKey,T=E.parameters,b.encrypted_key=S(A),(_.unprotectedHeader||T)&&(b.header=(0,o.Z)((0,o.Z)({},_.unprotectedHeader),T));case 70:y++,e.next=44;break;case 73:return e.abrupt("return",g);case 74:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function nn(e,t){var n="SHA-".concat(e.slice(-3));switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return ee()&&"NODE-ED25519"===t.name?{name:"NODE-ED25519",namedCurve:"NODE-ED25519"}:{name:t.name};default:throw new N("alg ".concat(e," is not supported either by JOSE or your javascript runtime"))}}function rn(e,t,n){if(l(t))return ae(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(ue.apply(void 0,[t].concat((0,T.Z)(de))));return u.subtle.importKey("raw",t,{hash:"SHA-".concat(e.slice(-3)),name:"HMAC"},!1,[n])}throw new TypeError(ue.apply(void 0,[t].concat((0,T.Z)(de),["Uint8Array"])))}var an=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(t,n,"verify");case 2:return o=e.sent,Ue(t,o),s=nn(t,o.algorithm),e.prev=5,e.next=8,u.subtle.verify(s,o,r,i);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),on=an;function sn(e,t,n){return un.apply(this,arguments)}function un(){return(un=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,s,u,l,c,d,p,m,g,y,_,b,w;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(t)){e.next=2;break}throw new U("Flattened JWS must be an object");case 2:if(void 0!==t.protected||void 0!==t.header){e.next=4;break}throw new U('Flattened JWS must have either of the "protected" or "header" members');case 4:if(void 0===t.protected||"string"===typeof t.protected){e.next=6;break}throw new U("JWS Protected Header incorrect type");case 6:if(void 0!==t.payload){e.next=8;break}throw new U("JWS Payload missing");case 8:if("string"===typeof t.signature){e.next=10;break}throw new U("JWS Signature missing or incorrect type");case 10:if(void 0===t.header||xe(t.header)){e.next=12;break}throw new U("JWS Unprotected Header incorrect type");case 12:if(s={},!t.protected){e.next=22;break}e.prev=14,u=A(t.protected),s=JSON.parse(h.decode(u)),e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(14),new U("JWS Protected Header is invalid");case 22:if(we(s,t.header)){e.next=24;break}throw new U("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");case 24:if(l=(0,o.Z)((0,o.Z)({},s),t.header),c=Ct(U,new Map([["b64",!0]]),null===r||void 0===r?void 0:r.crit,s,l),d=!0,!c.has("b64")){e.next=31;break}if("boolean"===typeof(d=s.b64)){e.next=31;break}throw new U('The "b64" (base64url-encode payload) Header Parameter must be a boolean');case 31:if("string"===typeof(p=l.alg)&&p){e.next=34;break}throw new U('JWS "alg" (Algorithm) Header Parameter missing or invalid');case 34:if(!(m=r&&Pt("algorithms",r.algorithms))||m.has(p)){e.next=37;break}throw new D('"alg" (Algorithm) Header Parameter not allowed');case 37:if(!d){e.next=42;break}if("string"===typeof t.payload){e.next=40;break}throw new U("JWS Payload must be a string");case 40:e.next=44;break;case 42:if("string"===typeof t.payload||t.payload instanceof Uint8Array){e.next=44;break}throw new U("JWS Payload must be a string or an Uint8Array instance");case 44:if(g=!1,"function"!==typeof n){e.next=50;break}return e.next=48,n(s,t);case 48:n=e.sent,g=!0;case 50:return vt(p,n,"verify"),y=v(f.encode(null!==(i=t.protected)&&void 0!==i?i:""),f.encode("."),"string"===typeof t.payload?f.encode(t.payload):t.payload),_=A(t.signature),e.next=55,on(p,n,_,y);case 55:if(e.sent){e.next=58;break}throw new q;case 58:if(b=d?A(t.payload):"string"===typeof t.payload?f.encode(t.payload):t.payload,w={payload:b},void 0!==t.protected&&(w.protectedHeader=s),void 0!==t.header&&(w.unprotectedHeader=t.header),!g){e.next=64;break}return e.abrupt("return",(0,o.Z)((0,o.Z)({},w),{},{key:n}));case 64:return e.abrupt("return",w);case 65:case"end":return e.stop()}}),e,null,[[14,19]])})))).apply(this,arguments)}function ln(e,t,n){return cn.apply(this,arguments)}function cn(){return(cn=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,s,u,l,c,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array&&(t=h.decode(t)),"string"===typeof t){e.next=3;break}throw new U("Compact JWS must be a string or Uint8Array");case 3:if(i=t.split("."),s=i[0],u=i[1],l=i[2],3===i.length){e.next=6;break}throw new U("Invalid Compact JWS");case 6:return e.next=8,sn({payload:u,protected:s,signature:l},n,r);case 8:if(c=e.sent,d={payload:c.payload,protectedHeader:c.protectedHeader},"function"!==typeof n){e.next=12;break}return e.abrupt("return",(0,o.Z)((0,o.Z)({},d),{},{key:c.key}));case 12:return e.abrupt("return",d);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dn(e,t,n){return fn.apply(this,arguments)}function fn(){return(fn=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(t)){e.next=2;break}throw new U("General JWS must be an object");case 2:if(Array.isArray(t.signatures)&&t.signatures.every(xe)){e.next=4;break}throw new U("JWS Signatures missing or incorrect type");case 4:i=(0,be.Z)(t.signatures),e.prev=5,i.s();case 7:if((o=i.n()).done){e.next=19;break}return s=o.value,e.prev=9,e.next=12,sn({header:s.header,payload:t.payload,protected:s.protected,signature:s.signature},n,r);case 12:return e.abrupt("return",e.sent);case 15:e.prev=15,e.t0=e.catch(9);case 17:e.next=7;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(5),i.e(e.t1);case 24:return e.prev=24,i.f(),e.finish(24);case 27:throw new q;case 28:case"end":return e.stop()}}),e,null,[[5,21,24,27],[9,15]])})))).apply(this,arguments)}var hn=function(e){return Math.floor(e.getTime()/1e3)},pn=86400,vn=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,mn=function(e){var t=vn.exec(e);if(!t)throw new TypeError("Invalid time period format");var n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*n);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*n);case"day":case"days":case"d":return Math.round(n*pn);case"week":case"weeks":case"w":return Math.round(604800*n);default:return Math.round(31557600*n)}},gn=function(e){return e.toLowerCase().replace(/^application\//,"")},yn=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.typ;if(i&&("string"!==typeof e.typ||gn(e.typ)!==gn(i)))throw new O('unexpected "typ" JWT header value',"typ","check_failed");try{n=JSON.parse(h.decode(t))}catch(v){}if(!xe(n))throw new z("JWT Claims Set must be a top-level JSON object");var a=r.issuer;if(a&&!(Array.isArray(a)?a:[a]).includes(n.iss))throw new O('unexpected "iss" claim value',"iss","check_failed");var o=r.subject;if(o&&n.sub!==o)throw new O('unexpected "sub" claim value',"sub","check_failed");var s,u,l,c=r.audience;if(c&&(s=n.aud,u="string"===typeof c?[c]:c,!("string"===typeof s?u.includes(s):Array.isArray(s)&&u.some(Set.prototype.has.bind(new Set(s))))))throw new O('unexpected "aud" claim value',"aud","check_failed");switch(typeof r.clockTolerance){case"string":l=mn(r.clockTolerance);break;case"number":l=r.clockTolerance;break;case"undefined":l=0;break;default:throw new TypeError("Invalid clockTolerance option type")}var d=r.currentDate,f=hn(d||new Date);if((void 0!==n.iat||r.maxTokenAge)&&"number"!==typeof n.iat)throw new O('"iat" claim must be a number',"iat","invalid");if(void 0!==n.nbf){if("number"!==typeof n.nbf)throw new O('"nbf" claim must be a number',"nbf","invalid");if(n.nbf>f+l)throw new O('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==n.exp){if("number"!==typeof n.exp)throw new O('"exp" claim must be a number',"exp","invalid");if(n.exp<=f-l)throw new F('"exp" claim timestamp check failed',"exp","check_failed")}if(r.maxTokenAge){var p=f-n.iat;if(p-l>("number"===typeof r.maxTokenAge?r.maxTokenAge:mn(r.maxTokenAge)))throw new F('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(p<0-l)throw new O('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return n};function _n(e,t,n){return bn.apply(this,arguments)}function bn(){return(bn=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,s,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(t,n,r);case 2:if(s=e.sent,!(null===(i=s.protectedHeader.crit)||void 0===i?void 0:i.includes("b64"))||!1!==s.protectedHeader.b64){e.next=5;break}throw new z("JWTs MUST NOT use unencoded payload");case 5:if(u=yn(s.protectedHeader,s.payload,r),l={payload:u,protectedHeader:s.protectedHeader},"function"!==typeof n){e.next=9;break}return e.abrupt("return",(0,o.Z)((0,o.Z)({},l),{},{key:s.key}));case 9:return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wn(e,t,n){return xn.apply(this,arguments)}function xn(){return(xn=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,s,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(t,n,r);case 2:if(i=e.sent,s=yn(i.protectedHeader,i.plaintext,r),void 0===(u=i.protectedHeader).iss||u.iss===s.iss){e.next=7;break}throw new O('replicated "iss" claim header parameter mismatch',"iss","mismatch");case 7:if(void 0===u.sub||u.sub===s.sub){e.next=9;break}throw new O('replicated "sub" claim header parameter mismatch',"sub","mismatch");case 9:if(void 0===u.aud||JSON.stringify(u.aud)===JSON.stringify(s.aud)){e.next=11;break}throw new O('replicated "aud" claim header parameter mismatch',"aud","mismatch");case 11:if(l={payload:s,protectedHeader:u},"function"!==typeof n){e.next=14;break}return e.abrupt("return",(0,o.Z)((0,o.Z)({},l),{},{key:i.key}));case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kn=function(){function e(t){(0,C.Z)(this,e),this._flattened=new $t(t)}return(0,P.Z)(e,[{key:"setContentEncryptionKey",value:function(e){return this._flattened.setContentEncryptionKey(e),this}},{key:"setInitializationVector",value:function(e){return this._flattened.setInitializationVector(e),this}},{key:"setProtectedHeader",value:function(e){return this._flattened.setProtectedHeader(e),this}},{key:"setKeyManagementParameters",value:function(e){return this._flattened.setKeyManagementParameters(e),this}},{key:"encrypt",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._flattened.encrypt(t,n);case 2:return r=e.sent,e.abrupt("return",[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join("."));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Sn=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(t,n,"sign");case 2:return i=e.sent,Ue(t,i),e.next=6,u.subtle.sign(nn(t,i.algorithm),i,r);case 6:return o=e.sent,e.abrupt("return",new Uint8Array(o));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),En=Sn,An=function(){function e(t){if((0,C.Z)(this,e),!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}return(0,P.Z)(e,[{key:"setProtectedHeader",value:function(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}},{key:"setUnprotectedHeader",value:function(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}},{key:"sign",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,s,u,l,c,d,p,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._protectedHeader||this._unprotectedHeader){e.next=2;break}throw new U("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");case 2:if(we(this._protectedHeader,this._unprotectedHeader)){e.next=4;break}throw new U("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");case 4:if(r=(0,o.Z)((0,o.Z)({},this._protectedHeader),this._unprotectedHeader),i=Ct(U,new Map([["b64",!0]]),null===n||void 0===n?void 0:n.crit,this._protectedHeader,r),s=!0,!i.has("b64")){e.next=11;break}if("boolean"===typeof(s=this._protectedHeader.b64)){e.next=11;break}throw new U('The "b64" (base64url-encode payload) Header Parameter must be a boolean');case 11:if("string"===typeof(u=r.alg)&&u){e.next=14;break}throw new U('JWS "alg" (Algorithm) Header Parameter missing or invalid');case 14:return vt(u,t,"sign"),l=this._payload,s&&(l=f.encode(S(l))),c=this._protectedHeader?f.encode(S(JSON.stringify(this._protectedHeader))):f.encode(""),d=v(c,f.encode("."),l),e.next=21,En(u,t,d);case 21:return p=e.sent,m={signature:S(p),payload:""},s&&(m.payload=h.decode(l)),this._unprotectedHeader&&(m.header=this._unprotectedHeader),this._protectedHeader&&(m.protected=h.decode(c)),e.abrupt("return",m);case 27:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Tn=function(){function e(t){(0,C.Z)(this,e),this._flattened=new An(t)}return(0,P.Z)(e,[{key:"setProtectedHeader",value:function(e){return this._flattened.setProtectedHeader(e),this}},{key:"sign",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._flattened.sign(t,n);case 2:if(void 0!==(r=e.sent).payload){e.next=5;break}throw new TypeError("use the flattened module for creating JWS with b64: false");case 5:return e.abrupt("return","".concat(r.protected,".").concat(r.payload,".").concat(r.signature));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Cn=["payload"],Pn=function(){function e(t,n,r){(0,C.Z)(this,e),this.parent=t,this.key=n,this.options=r}return(0,P.Z)(e,[{key:"setProtectedHeader",value:function(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}},{key:"setUnprotectedHeader",value:function(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}},{key:"addSignature",value:function(){var e;return(e=this.parent).addSignature.apply(e,arguments)}},{key:"sign",value:function(){var e;return(e=this.parent).sign.apply(e,arguments)}},{key:"done",value:function(){return this.parent}}]),e}(),In=function(){function e(t){(0,C.Z)(this,e),this._signatures=[],this._payload=t}return(0,P.Z)(e,[{key:"addSignature",value:function(e,t){var n=new Pn(this,e,t);return this._signatures.push(n),n}},{key:"sign",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,s,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._signatures.length){e.next=2;break}throw new U("at least one signature must be added");case 2:t={signatures:[],payload:""},n=0;case 4:if(!(n<this._signatures.length)){e.next=24;break}return r=this._signatures[n],(i=new An(this._payload)).setProtectedHeader(r.protectedHeader),i.setUnprotectedHeader(r.unprotectedHeader),e.next=11,i.sign(r.key,r.options);case 11:if(o=e.sent,s=o.payload,u=(0,jt.Z)(o,Cn),0!==n){e.next=18;break}t.payload=s,e.next=20;break;case 18:if(t.payload===s){e.next=20;break}throw new U("inconsistent use of JWS Unencoded Payload Option (RFC7797)");case 20:t.signatures.push(u);case 21:n++,e.next=4;break;case 24:return e.abrupt("return",t);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Rn=function(){function e(t){if((0,C.Z)(this,e),!xe(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}return(0,P.Z)(e,[{key:"setIssuer",value:function(e){return this._payload=(0,o.Z)((0,o.Z)({},this._payload),{},{iss:e}),this}},{key:"setSubject",value:function(e){return this._payload=(0,o.Z)((0,o.Z)({},this._payload),{},{sub:e}),this}},{key:"setAudience",value:function(e){return this._payload=(0,o.Z)((0,o.Z)({},this._payload),{},{aud:e}),this}},{key:"setJti",value:function(e){return this._payload=(0,o.Z)((0,o.Z)({},this._payload),{},{jti:e}),this}},{key:"setNotBefore",value:function(e){return this._payload="number"===typeof e?(0,o.Z)((0,o.Z)({},this._payload),{},{nbf:e}):(0,o.Z)((0,o.Z)({},this._payload),{},{nbf:hn(new Date)+mn(e)}),this}},{key:"setExpirationTime",value:function(e){return this._payload="number"===typeof e?(0,o.Z)((0,o.Z)({},this._payload),{},{exp:e}):(0,o.Z)((0,o.Z)({},this._payload),{},{exp:hn(new Date)+mn(e)}),this}},{key:"setIssuedAt",value:function(e){return this._payload="undefined"===typeof e?(0,o.Z)((0,o.Z)({},this._payload),{},{iat:hn(new Date)}):(0,o.Z)((0,o.Z)({},this._payload),{},{iat:e}),this}}]),e}(),Ln=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,P.Z)(n,[{key:"setProtectedHeader",value:function(e){return this._protectedHeader=e,this}},{key:"sign",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=new Tn(f.encode(JSON.stringify(this._payload)))).setProtectedHeader(this._protectedHeader),!Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)||!this._protectedHeader.crit.includes("b64")||!1!==this._protectedHeader.b64){e.next=4;break}throw new z("JWTs MUST NOT use unencoded payload");case 4:return e.abrupt("return",i.sign(t,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Rn),Mn=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,P.Z)(n,[{key:"setProtectedHeader",value:function(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}},{key:"setKeyManagementParameters",value:function(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}},{key:"setContentEncryptionKey",value:function(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}},{key:"setInitializationVector",value:function(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}},{key:"replicateIssuerAsHeader",value:function(){return this._replicateIssuerAsHeader=!0,this}},{key:"replicateSubjectAsHeader",value:function(){return this._replicateSubjectAsHeader=!0,this}},{key:"replicateAudienceAsHeader",value:function(){return this._replicateAudienceAsHeader=!0,this}},{key:"encrypt",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new kn(f.encode(JSON.stringify(this._payload))),this._replicateIssuerAsHeader&&(this._protectedHeader=(0,o.Z)((0,o.Z)({},this._protectedHeader),{},{iss:this._payload.iss})),this._replicateSubjectAsHeader&&(this._protectedHeader=(0,o.Z)((0,o.Z)({},this._protectedHeader),{},{sub:this._payload.sub})),this._replicateAudienceAsHeader&&(this._protectedHeader=(0,o.Z)((0,o.Z)({},this._protectedHeader),{},{aud:this._payload.aud})),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),e.abrupt("return",r.encrypt(t,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Rn),On=function(e,t){if("string"!==typeof e||!e)throw new V("".concat(t," missing or invalid"))};function Fn(e,t){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(t)){e.next=2;break}throw new TypeError("JWK must be an object");case 2:if(null!==n&&void 0!==n||(n="sha256"),"sha256"===n||"sha384"===n||"sha512"===n){e.next=5;break}throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');case 5:e.t0=t.kty,e.next="EC"===e.t0?8:"OKP"===e.t0?13:"RSA"===e.t0?17:"oct"===e.t0?21:24;break;case 8:return On(t.crv,'"crv" (Curve) Parameter'),On(t.x,'"x" (X Coordinate) Parameter'),On(t.y,'"y" (Y Coordinate) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x,y:t.y},e.abrupt("break",25);case 13:return On(t.crv,'"crv" (Subtype of Key Pair) Parameter'),On(t.x,'"x" (Public Key) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x},e.abrupt("break",25);case 17:return On(t.e,'"e" (Exponent) Parameter'),On(t.n,'"n" (Modulus) Parameter'),r={e:t.e,kty:t.kty,n:t.n},e.abrupt("break",25);case 21:return On(t.k,'"k" (Key Value) Parameter'),r={k:t.k,kty:t.kty},e.abrupt("break",25);case 24:throw new N('"kty" (Key Type) Parameter missing or unsupported');case 25:return i=f.encode(JSON.stringify(r)),e.t1=S,e.next=29,d(n,i);case 29:return e.t2=e.sent,e.abrupt("return",(0,e.t1)(e.t2));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nn(e,t){return jn.apply(this,arguments)}function jn(){return(jn=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==n&&void 0!==n||(n="sha256"),e.next=3,Fn(t,n);case 3:return r=e.sent,e.abrupt("return","urn:ietf:params:oauth:jwk-thumbprint:sha-".concat(n.slice(-3),":").concat(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bn(e,t){return Un.apply(this,arguments)}function Un(){return(Un=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe((r=(0,o.Z)((0,o.Z)({},t),null===n||void 0===n?void 0:n.header)).jwk)){e.next=3;break}throw new U('"jwk" (JSON Web Key) Header Parameter must be a JSON object');case 3:return e.next=5,ht((0,o.Z)((0,o.Z)({},r.jwk),{},{ext:!0}),r.alg,!0);case 5:if(!((i=e.sent)instanceof Uint8Array||"public"!==i.type)){e.next=8;break}throw new U('"jwk" (JSON Web Key) Header Parameter must be a public key');case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zn(e,t){this.v=e,this.k=t}function Vn(e){var t,n;function r(t,n){try{var a=e[t](n),o=a.value,s=o instanceof zn;Promise.resolve(s?o.v:o).then((function(n){if(s){var u="return"===t?"return":"next";if(!o.k||n.done)return r(u,n);n=e[u](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(u){i("throw",u)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,o){var s={key:e,arg:i,resolve:a,reject:o,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function Zn(e){return function(){return new Vn(e.apply(this,arguments))}}function Hn(e){switch("string"===typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new N('Unsupported "alg" value for a JSON Web Key Set')}}function Wn(e){return e&&"object"===typeof e&&Array.isArray(e.keys)&&e.keys.every(Gn)}function Gn(e){return xe(e)}Vn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Vn.prototype.next=function(e){return this._invoke("next",e)},Vn.prototype.throw=function(e){return this._invoke("throw",e)},Vn.prototype.return=function(e){return this._invoke("return",e)};var qn=function(){function e(t){if((0,C.Z)(this,e),this._cached=new WeakMap,!Wn(t))throw new Z("JSON Web Key Set malformed");var n;this._jwks=(n=t,"function"===typeof structuredClone?structuredClone(n):JSON.parse(JSON.stringify(n)))}return(0,P.Z)(e,[{key:"getKey",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,s,u,l,c,d,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,o.Z)((0,o.Z)({},t),null===n||void 0===n?void 0:n.header),i=r.alg,s=r.kid,u=Hn(i),l=this._jwks.keys.filter((function(e){var t=u===e.kty;if(t&&"string"===typeof s&&(t=s===e.kid),t&&"string"===typeof e.alg&&(t=i===e.alg),t&&"string"===typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===i&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(i){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t})),c=l[0],0!==(d=l.length)){e.next=8;break}throw new H;case 8:if(1===d){e.next=13;break}throw f=new W,h=this._cached,f[Symbol.asyncIterator]=Zn((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,be.Z)(l),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=17;break}return r=n.value,e.prev=5,e.next=8,new zn(Kn(h,r,i),0);case 8:return e.next=10,e.sent;case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("continue",15);case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),t.e(e.t1);case 22:return e.prev=22,t.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,19,22,25],[5,12]])}))),f;case 13:return e.abrupt("return",Kn(this._cached,c,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Kn(e,t,n){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(i=t.get(n)||t.set(n,{}).get(n))[r]){e.next=8;break}return e.next=4,ht((0,o.Z)((0,o.Z)({},n),{},{ext:!0}),r);case 4:if(!((s=e.sent)instanceof Uint8Array||"public"!==s.type)){e.next=7;break}throw new Z("JSON Web Key Set members must be public keys");case 7:i[r]=s;case 8:return e.abrupt("return",i[r]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e){var t=new qn(e);return function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getKey(n,r));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}var Yn=n(1120);function Qn(){return Qn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,Yn.Z)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Qn.apply(this,arguments)}var $n=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1,"function"===typeof AbortController&&(i=new AbortController,o=setTimeout((function(){s=!0,i.abort()}),n)),e.next=4,fetch(t.href,{signal:i?i.signal:void 0,redirect:"manual",headers:r.headers}).catch((function(e){if(s)throw new G;throw e}));case 4:if(u=e.sent,void 0!==o&&clearTimeout(o),200===u.status){e.next=8;break}throw new M("Expected 200 OK from the JSON Web Key Set HTTP response");case 8:return e.prev=8,e.next=11,u.json();case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(8),new M("Failed to parse the JSON Web Key Set HTTP response as JSON");case 17:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t,n,r){return e.apply(this,arguments)}}(),er=$n,tr=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(e,r){var i;if((0,C.Z)(this,n),(i=t.call(this,{keys:[]}))._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");return i._url=new URL(e.href),i._options={agent:null===r||void 0===r?void 0:r.agent,headers:null===r||void 0===r?void 0:r.headers},i._timeoutDuration="number"===typeof(null===r||void 0===r?void 0:r.timeoutDuration)?null===r||void 0===r?void 0:r.timeoutDuration:5e3,i._cooldownDuration="number"===typeof(null===r||void 0===r?void 0:r.cooldownDuration)?null===r||void 0===r?void 0:r.cooldownDuration:3e4,i._cacheMaxAge="number"===typeof(null===r||void 0===r?void 0:r.cacheMaxAge)?null===r||void 0===r?void 0:r.cacheMaxAge:6e5,i}return(0,P.Z)(n,[{key:"coolingDown",value:function(){return"number"===typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}},{key:"fresh",value:function(){return"number"===typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}},{key:"getKey",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._jwks&&this.fresh()){e.next=3;break}return e.next=3,this.reload();case 3:return e.prev=3,e.next=6,Qn((0,Yn.Z)(n.prototype),"getKey",this).call(this,t,r);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof H)){e.next=16;break}if(!1!==this.coolingDown()){e.next=16;break}return e.next=15,this.reload();case 15:return e.abrupt("return",Qn((0,Yn.Z)(n.prototype),"getKey",this).call(this,t,r));case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"reload",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._pendingFetch&&ee()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=er(this._url,this._timeoutDuration,this._options).then((function(e){if(!Wn(e))throw new Z("JSON Web Key Set malformed");t._jwks={keys:e.keys},t._jwksTimestamp=Date.now(),t._pendingFetch=void 0})).catch((function(e){throw t._pendingFetch=void 0,e}))),e.next=4,this._pendingFetch;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(qn);function nr(e,t){var n=new tr(e,t);return function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.getKey(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}var rr=function(e){(0,R.Z)(n,e);var t=(0,L.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,P.Z)(n,[{key:"encode",value:function(){var e=S(JSON.stringify({alg:"none"})),t=S(JSON.stringify(this._payload));return"".concat(e,".").concat(t,".")}}],[{key:"decode",value:function(e,t){if("string"!==typeof e)throw new z("Unsecured JWT must be a string");var n,r=e.split("."),i=r[0],a=r[1],o=r[2];if(3!==r.length||""!==o)throw new z("Invalid Unsecured JWT");try{if("none"!==(n=JSON.parse(h.decode(A(i)))).alg)throw new Error}catch(s){throw new z("Invalid Unsecured JWT")}return{payload:yn(n,A(a),t),header:n}}}]),n}(Rn),ir=S,ar=A;function or(e){var t;if("string"===typeof e){var n=e.split(".");if(3===n.length||5===n.length)t=(0,Nt.Z)(n,1)[0]}else if("object"===typeof e&&e){if(!("protected"in e))throw new TypeError("Token does not contain a Protected Header");t=e.protected}try{if("string"!==typeof t||!t)throw new Error;var r=JSON.parse(h.decode(ar(t)));if(!xe(r))throw new Error;return r}catch(i){throw new TypeError("Invalid Token or Protected Header formatting")}}function sr(e){if("string"!==typeof e)throw new z("JWTs must use Compact JWS serialization, JWT must be a string");var t,n,r=e.split("."),i=r[1],a=r.length;if(5===a)throw new z("Only JWTs using Compact JWS serialization can be decoded");if(3!==a)throw new z("Invalid JWT");if(!i)throw new z("JWTs must contain a payload");try{t=ar(i)}catch(o){throw new z("Failed to parse the base64url encoded payload")}try{n=JSON.parse(h.decode(t))}catch(s){throw new z("Failed to parse the decoded payload as JSON")}if(!xe(n))throw new z("Invalid JWT Claims Set");return n}function ur(e,t){return lr.apply(this,arguments)}function lr(){return(lr=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="HS256"===e.t0||"HS384"===e.t0||"HS512"===e.t0?3:"A128CBC-HS256"===e.t0||"A192CBC-HS384"===e.t0||"A256CBC-HS512"===e.t0?7:"A128KW"===e.t0||"A192KW"===e.t0||"A256KW"===e.t0?9:"A128GCMKW"===e.t0||"A192GCMKW"===e.t0||"A256GCMKW"===e.t0||"A128GCM"===e.t0||"A192GCM"===e.t0||"A256GCM"===e.t0?13:17;break;case 3:return i=parseInt(t.slice(-3),10),o={name:"HMAC",hash:"SHA-".concat(i),length:i},s=["sign","verify"],e.abrupt("break",18);case 7:return i=parseInt(t.slice(-3),10),e.abrupt("return",K(new Uint8Array(i>>3)));case 9:return i=parseInt(t.slice(1,4),10),o={name:"AES-KW",length:i},s=["wrapKey","unwrapKey"],e.abrupt("break",18);case 13:return i=parseInt(t.slice(1,4),10),o={name:"AES-GCM",length:i},s=["encrypt","decrypt"],e.abrupt("break",18);case 17:throw new N('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');case 18:return e.abrupt("return",u.subtle.generateKey(o,null!==(r=null===n||void 0===n?void 0:n.extractable)&&void 0!==r&&r,s));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.modulusLength)&&void 0!==t?t:2048;if("number"!==typeof n||n<2048)throw new N("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return n}function dr(e,t){return fr.apply(this,arguments)}function fr(){return(fr=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,l,c,d,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="PS256"===e.t0||"PS384"===e.t0||"PS512"===e.t0?3:"RS256"===e.t0||"RS384"===e.t0||"RS512"===e.t0?6:"RSA-OAEP"===e.t0||"RSA-OAEP-256"===e.t0||"RSA-OAEP-384"===e.t0||"RSA-OAEP-512"===e.t0?9:"ES256"===e.t0?12:"ES384"===e.t0?15:"ES512"===e.t0?18:"EdDSA"===e.t0?21:"ECDH-ES"===e.t0||"ECDH-ES+A128KW"===e.t0||"ECDH-ES+A192KW"===e.t0||"ECDH-ES+A256KW"===e.t0?30:41;break;case 3:return l={name:"RSA-PSS",hash:"SHA-".concat(t.slice(-3)),publicExponent:new Uint8Array([1,0,1]),modulusLength:cr(n)},c=["sign","verify"],e.abrupt("break",42);case 6:return l={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(t.slice(-3)),publicExponent:new Uint8Array([1,0,1]),modulusLength:cr(n)},c=["sign","verify"],e.abrupt("break",42);case 9:return l={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(t.slice(-3),10)||1),publicExponent:new Uint8Array([1,0,1]),modulusLength:cr(n)},c=["decrypt","unwrapKey","encrypt","wrapKey"],e.abrupt("break",42);case 12:return l={name:"ECDSA",namedCurve:"P-256"},c=["sign","verify"],e.abrupt("break",42);case 15:return l={name:"ECDSA",namedCurve:"P-384"},c=["sign","verify"],e.abrupt("break",42);case 18:return l={name:"ECDSA",namedCurve:"P-521"},c=["sign","verify"],e.abrupt("break",42);case 21:c=["sign","verify"],d=null!==(r=null===n||void 0===n?void 0:n.crv)&&void 0!==r?r:"Ed25519",e.t1=d,e.next="Ed25519"===e.t1||"Ed448"===e.t1?26:28;break;case 26:return l={name:d},e.abrupt("break",29);case 28:throw new N("Invalid or unsupported crv option provided");case 29:case 40:return e.abrupt("break",42);case 30:c=["deriveKey","deriveBits"],f=null!==(i=null===n||void 0===n?void 0:n.crv)&&void 0!==i?i:"P-256",e.t2=f,e.next="P-256"===e.t2||"P-384"===e.t2||"P-521"===e.t2?35:"X25519"===e.t2||"X448"===e.t2?37:39;break;case 35:return l={name:"ECDH",namedCurve:f},e.abrupt("break",40);case 37:return l={name:f},e.abrupt("break",40);case 39:throw new N("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448");case 41:throw new N('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');case 42:return e.prev=42,e.next=45,u.subtle.generateKey(l,null!==(o=null===n||void 0===n?void 0:n.extractable)&&void 0!==o&&o,c);case 45:case 54:return e.abrupt("return",e.sent);case 48:if(e.prev=48,e.t3=e.catch(42),"Ed25519"!==l.name||"NotSupportedError"!==(null===e.t3||void 0===e.t3?void 0:e.t3.name)||!ee()){e.next=55;break}return l={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},e.next=54,u.subtle.generateKey(l,null!==(s=null===n||void 0===n?void 0:n.extractable)&&void 0!==s&&s,c);case 55:throw e.t3;case 56:case"end":return e.stop()}}),e,null,[[42,48]])})))).apply(this,arguments)}function hr(e,t){return pr.apply(this,arguments)}function pr(){return(pr=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e,t){return mr.apply(this,arguments)}function mr(){return(mr=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ur(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{180:"ca643dba",670:"c6d4f233",787:"994511a4"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="webapp:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(h);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="https://uo282944.github.io/lomap_6a_despliegue/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkwebapp=self.webpackChunkwebapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(4164),i=n.p+"static/media/fotohome1.52f653a135d80a4a2fa7.png",a=n.p+"static/media/fotohome11.a2b5c1019f1f6b24180d.png",o=n.p+"static/media/fotohome12.ff9299bec2679a938e46.png",s=n.p+"static/media/fotohome14.04cacf15d6b58f3fbf20.png",u=n.p+"static/media/fotohome5.14dba5e983ecb31b0715.png",l=n(9439),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=e.createContext&&e.createContext(c),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function p(t){return t&&t.map((function(t,n){return e.createElement(t.tag,f({key:n},t.attr),p(t.child))}))}function v(t){return function(n){return e.createElement(m,f({attr:f({},t.attr)},n),p(t.child))}}function m(t){var n=function(n){var r,i=t.attr,a=t.size,o=t.title,s=h(t,["attr","size","title"]),u=a||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:f(f({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&e.createElement("title",null,o),t.children)};return void 0!==d?e.createElement(d.Consumer,null,(function(e){return n(e)})):n(c)}function g(e){return v({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function y(e){return v({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}var _=n(184),b=function(t){var n=t.images,r=t.delay,i=(0,e.useState)(0),a=(0,l.Z)(i,2),o=a[0],s=a[1];(0,e.useEffect)((function(){var e=setInterval((function(){s((o+1)%n.length)}),r);return function(){return clearInterval(e)}}),[o,r,n]);return(0,_.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",height:"calc(100vh - 113.6px)",overflow:"hidden"},children:[(0,_.jsx)("img",{src:n[o],alt:"Slider",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"cover"}}),(0,_.jsx)("button",{style:{position:"absolute",top:"50%",left:"10px",transform:"translateY(-50%)",backgroundColor:"transparent",border:"none",fontSize:"2rem",cursor:"pointer"},onClick:function(){var e=0===o?n.length-1:o-1;s(e)},"aria-label":"Previous Image",children:(0,_.jsx)(g,{})}),(0,_.jsx)("button",{style:{position:"absolute",top:"50%",right:"10px",transform:"translateY(-50%)",backgroundColor:"transparent",border:"none",fontSize:"2rem",cursor:"pointer"},onClick:function(){var e=(o+1)%n.length;s(e)},"aria-label":"Next Image",children:(0,_.jsx)(y,{})})]})},w=[s,o,a,i,u];var x=function(){return(0,_.jsx)(b,{images:w,delay:1e4})},k=n(7762),S=n(4165),E=n(5861),A=n(3144),T=n(5671),C=(0,A.Z)((function e(t,n,r,i,a,o,s){(0,T.Z)(this,e),this.id=void 0,this.nombre=void 0,this.descripcion=void 0,this.latitude=void 0,this.longitude=void 0,this.tipo=void 0,this.imagen=void 0,this.id=void 0===t||""===t?Date.now().toString(36)+Math.random().toString(36).substring(2):t,this.nombre=n,this.latitude=i,this.longitude=a,this.tipo=o,this.descripcion=r,this.imagen=s})),P=(0,A.Z)((function e(t,n,r,i){(0,T.Z)(this,e),this.id=void 0,this.texto=void 0,this.idmarker=void 0,this.autor=void 0,this.valoracion=void 0,this.id=Date.now().toString(36)+Math.random().toString(36).substring(2),this.texto=t,this.idmarker=n,this.autor=r,this.valoracion=i})),I=n(1413),R=function(){var e=(0,E.Z)((0,S.Z)().mark((function e(t,r){var i,a,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==typeof window||"function"===typeof require){e.next=2;break}return e.abrupt("return",window.fetch(t,r));case 2:if("function"===typeof require){e.next=8;break}return e.next=5,Promise.resolve().then(n.t.bind(n,4255,19));case 5:return i=e.sent,a=i.default,e.abrupt("return",a(t,r));case 8:return o=require("cross-fetch"),e.abrupt("return",o(t,r));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function L(e){return"string"===typeof e?e:e.value}var M=n(136),O=n(9388),F=n(8737);function D(e){return"object"===typeof e&&"object"===typeof e.internal_resourceInfo}function N(e){var t=e;return"object"===typeof t&&"object"===typeof t.internal_resourceInfo&&"object"===typeof t.internal_resourceInfo.linkedResources}function j(e){var t=e;return"object"===typeof t.internal_changeLog&&Array.isArray(t.internal_changeLog.additions)&&Array.isArray(t.internal_changeLog.deletions)}var B=function(e){(0,M.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}((0,F.Z)(Error)),U=n(3181);function z(e){var t,n,r,i,a,o=null!==(n=null===(t=e.headers.get("Content-Type"))||void 0===t?void 0:t.split(";"))&&void 0!==n?n:[],s=o.length>0&&["text/turtle","application/ld+json"].includes(o[0]),u={sourceIri:e.url,isRawData:!s,contentLocation:null!==(r=e.headers.get("Content-Location"))&&void 0!==r?r:void 0,contentType:null!==(i=e.headers.get("Content-Type"))&&void 0!==i?i:void 0,linkedResources:{},location:null!==(a=e.headers.get("Location"))&&void 0!==a?a:void 0},l=e.headers.get("Link");if(l){var c=U.parse(l),d=c.get("rel","acl");1===d.length&&(u.aclUrl=new URL(d[0].uri,u.sourceIri).href),u.linkedResources=c.refs.reduce((function(e,t){var n,r;return null!==(n=e[r=t.rel])&&void 0!==n||(e[r]=[]),e[t.rel].push(new URL(t.uri,u.sourceIri).href),e}),u.linkedResources)}var f=e.headers.get("WAC-Allow");return f&&(u.permissions=function(e){function t(e){var t=e.split(" ");return t.includes("write")?{read:t.includes("read"),append:!0,write:!0,control:t.includes("control")}:{read:t.includes("read"),append:t.includes("append"),write:!1,control:t.includes("control")}}function n(e,t){var n=e.split(",").map((function(e){return e.split("=")})).filter((function(e){return 2===e.length&&e[0].trim()===t}));if(1!==n.length)return"";var r=n[0][1].trim();return'"'!==r.charAt(0)||'"'!==r.charAt(r.length-1)?"":r.substring(1,r.length-1)}return{user:t(n(e,"user")),public:t(n(e,"public"))}}(f)),u}function V(e){return!e.ok}var Z={fetch:R};function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreAuthenticationErrors:!1};if(V(e)&&(!function(e){return 401===e.status||403===e.status}(e)||!t.ignoreAuthenticationErrors))throw new q("Fetching the metadata of the Resource at [".concat(e.url,"] failed: [").concat(e.status,"] [").concat(e.statusText,"]."),e);return{internal_resourceInfo:z(e)}}function W(e){var t;return null!==(t=e.internal_resourceInfo.contentType)&&void 0!==t?t:null}function G(e){return D(e)?e.internal_resourceInfo.sourceIri:null}var q=function(e){(0,M.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var i;return(0,T.Z)(this,n),(i=t.call(this,e)).response=r,i}return(0,A.Z)(n,[{key:"statusCode",get:function(){return this.response.status}},{key:"statusText",get:function(){return this.response.statusText}}]),n}(B),K={fetch:R},J=["Slug","If-None-Match","Content-Type"];function X(e){return J.some((function(t){return void 0!==e[t]}))}function Y(e){return Q.apply(this,arguments)}function Q(){return Q=(0,E.Z)((0,S.Z)().mark((function e(t){var n,r,i,a,o,s,u,l=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:K,r=(0,I.Z)((0,I.Z)({},K),n),i=L(t),e.next=5,r.fetch(i,r.init);case 5:if(!V(a=e.sent)){e.next=8;break}throw new q("Fetching the File failed: [".concat(a.status,"] [").concat(a.statusText,"]."),a);case 8:return o=z(a),e.next=11,a.blob();case 11:return s=e.sent,u=Object.assign(s,{internal_resourceInfo:o}),e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function $(e,t){return ee.apply(this,arguments)}function ee(){return ee=(0,E.Z)((0,S.Z)().mark((function e(t,n){var r,i,a,o,s,u=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:K,i=L(t),e.next=4,ne(i,n,"PUT",r);case 4:if(!V(a=e.sent)){e.next=7;break}throw new q("Overwriting the file at [".concat(i,"] failed: [").concat(a.status,"] [").concat(a.statusText,"]."),a);case 7:return o="function"===typeof(l=n).slice?Object.assign(l.slice(),(0,I.Z)({},l)):(0,I.Z)({},l),(s=z(a)).sourceIri=i,s.isRawData=!0,e.abrupt("return",Object.assign(o,{internal_resourceInfo:s}));case 12:case"end":return e.stop()}var l}),e)}))),ee.apply(this,arguments)}function te(e){if("undefined"===typeof e)return{};var t,n={};return t=e,Array.isArray(t)?e.forEach((function(e){var t=(0,l.Z)(e,2),r=t[0],i=t[1];n[r]=i})):!function(e){return"function"===typeof e.forEach}(e)?n=e:e.forEach((function(e,t){n[t]=e})),n}function ne(e,t,n,r){return re.apply(this,arguments)}function re(){return re=(0,E.Z)((0,S.Z)().mark((function e(t,n,r,i){var a,o,s,u,l;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,I.Z)((0,I.Z)({},K),i),!X(u=te(null!==(o=null===(a=s.init)||void 0===a?void 0:a.headers)&&void 0!==o?o:{}))){e.next=4;break}throw new Error("No reserved header (".concat(J.join(", "),") should be set in the optional RequestInit."));case 4:return void 0!==s.slug&&(u.Slug=s.slug),u["Content-Type"]=ie(n,i.contentType),l=L(t),e.abrupt("return",s.fetch(l,(0,I.Z)((0,I.Z)({},s.init),{},{headers:u,method:r,body:n})));case 8:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ie(e,t){if("string"===typeof t)return t;var n="object"===typeof e&&null!==e&&"string"===typeof e.type&&e.type.length>0?e.type:void 0;return null!==n&&void 0!==n?n:"application/octet-stream"}var ae=n(4942),oe=n(3433),se=n(7478);n(4533).dataset;var ue="https://inrupt.com/.well-known/sdk-local-node/",le=Object.freeze;function ce(e){return e.substring(0,ue.length)===ue}function de(e){return e.substring(ue.length)}function fe(e){return"string"===typeof e&&"_:"===e.substring(0,2)}function he(e){return e.substring(2)}var pe={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function ve(e){if(e.endsWith("Z"))return[e.substring(0,e.length-1),"Z"];var t=e.split("+"),n=e.split("-");return 1===t.length&&1===n.length?[t[0],void 0]:t.length>n.length?[t[0],"+".concat(t[1])]:[n[0],"-".concat(n[1])]}function me(e){if("Z"===e)return[0,0];var t="+"===e.charAt(0)?1:-1,n=e.substring(1).split(":"),r=(0,l.Z)(n,2),i=r[0],a=r[1];return[Number.parseInt(i,10)*t,Number.parseInt(a,10)*t]}function ge(e){return ye(e)&&"NamedNode"===e.termType}function ye(e){return null!==e&&"object"===typeof e&&"string"===typeof e.termType&&"string"===typeof e.value&&"function"===typeof e.equals}function _e(e){return ge(e)&&ce(e.value)}function be(e){var t=L(e);if("function"!==typeof URL)return!0;try{new URL(t);return!0}catch(n){return!1}}function we(e,t){return ke.namedNode(xe(de(e.value),t))}function xe(e,t){if("function"!==typeof URL)throw new Error("The URL interface is not available, so an IRI cannot be determined.");var n=new URL(t);return n.hash=e,n.href}var ke=se;function Se(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!["NamedNode","DefaultGraph"].includes(t.graph.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(t.graph.termType,"] as their Graph node."));var i="DefaultGraph"===t.graph.termType?"default":t.graph.value,a=null!==(n=e.graphs[i])&&void 0!==n?n:{};return le((0,I.Z)((0,I.Z)({},e),{},{graphs:le((0,I.Z)((0,I.Z)({},e.graphs),{},(0,ae.Z)({},i,Ee(a,t,r))))}))}function Ee(e,t,n){var r;if(!["NamedNode","BlankNode"].includes(t.subject.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(t.subject.termType,"] as their Subject node."));var i="BlankNode"===t.subject.termType?"_:".concat(t.subject.value):t.subject.value,a=null!==(r=e[i])&&void 0!==r?r:{type:"Subject",url:i,predicates:{}};return le((0,I.Z)((0,I.Z)({},e),{},(0,ae.Z)({},i,function(e,t,n){return le((0,I.Z)((0,I.Z)({},e),{},{predicates:Ae(e.predicates,t,n)}))}(a,t,n))))}function Ae(e,t,n){var r;if(!["NamedNode"].includes(t.predicate.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(t.predicate.termType,"] as their Predicate node."));var i=t.predicate.value,a=null!==(r=e[i])&&void 0!==r?r:{};return le((0,I.Z)((0,I.Z)({},e),{},(0,ae.Z)({},i,Te(a,t,n))))}function Te(e,t,n){var r,i,a,o,s,u,l,c;if("NamedNode"===t.object.termType){var d=le([].concat((0,oe.Z)(null!==(r=e.namedNodes)&&void 0!==r?r:[]),[t.object.value]));return le((0,I.Z)((0,I.Z)({},e),{},{namedNodes:d}))}if("Literal"===t.object.termType){if(t.object.datatype.value===pe.langString){var f=t.object.language.toLowerCase(),h=le([].concat((0,oe.Z)(null!==(a=null===(i=e.langStrings)||void 0===i?void 0:i[f])&&void 0!==a?a:[]),[t.object.value])),p=le((0,I.Z)((0,I.Z)({},null!==(o=e.langStrings)&&void 0!==o?o:{}),{},(0,ae.Z)({},f,h)));return le((0,I.Z)((0,I.Z)({},e),{},{langStrings:p}))}var v=le([].concat((0,oe.Z)(null!==(u=null===(s=e.literals)||void 0===s?void 0:s[t.object.datatype.value])&&void 0!==u?u:[]),[t.object.value])),m=le((0,I.Z)((0,I.Z)({},null!==(l=e.literals)&&void 0!==l?l:{}),{},(0,ae.Z)({},t.object.datatype.value,v)));return le((0,I.Z)((0,I.Z)({},e),{},{literals:m}))}if("BlankNode"===t.object.termType){var g=Ce(t.object,n),y=le([].concat((0,oe.Z)(null!==(c=e.blankNodes)&&void 0!==c?c:[]),[g]));return le((0,I.Z)((0,I.Z)({},e),{},{blankNodes:y}))}throw new Error("Objects of type [".concat(t.object.termType,"] are not supported."))}function Ce(e,t){var n,r;if(void 0===(null!==(n=t.chainBlankNodes)&&void 0!==n?n:[]).find((function(t){return t.equals(e)})))return function(e){return"_:".concat(e.value)}(e);var i=(null!==(r=t.otherQuads)&&void 0!==r?r:[]).filter((function(t){return t.subject.equals(e)})),a=i.filter((function(e){return!Me(e.object)})).reduce((function(e,n){var r;if(!["NamedNode"].includes(n.predicate.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(n.predicate.termType,"] as their Predicate node."));var i=null!==(r=e[n.predicate.value])&&void 0!==r?r:{};return le((0,I.Z)((0,I.Z)({},e),{},(0,ae.Z)({},n.predicate.value,Te(i,n,t))))}),{}),o=i.filter((function(e){return Me(e.object)}));return o.reduce((function(e,n){var r,i;if(!["NamedNode"].includes(n.predicate.termType))throw new Error("Cannot parse Quads with nodes of type [".concat(n.predicate.termType,"] as their Predicate node."));var a=null!==(r=e[n.predicate.value])&&void 0!==r?r:{},o=null!==(i=a.blankNodes)&&void 0!==i?i:[];return le((0,I.Z)((0,I.Z)({},e),{},(0,ae.Z)({},n.predicate.value,(0,I.Z)((0,I.Z)({},a),{},{blankNodes:[].concat((0,oe.Z)(o),[Ce(n.object,t)])}))))}),a)}function Pe(e){var t=e.map((function(e){return e.subject})).filter(Me),n=e.map((function(e){return e.object})).filter(Me);var r=[];n.forEach((function(t){r.push.apply(r,(0,oe.Z)(Le(t,e)))}));var i=t.concat(n).filter((function(t){if(r.some((function(e){return e.equals(t)})))return!1;var n,i=e.filter((function(e){return e.object.equals(t)})).map((function(e){return e.subject}));return i.length>0&&(n=i).every((function(e){return n.every((function(t){return e.equals(t)}))}))}));return i}function Ie(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i=null!==(t=n.dataFactory)&&void 0!==t?t:se;return Object.keys(e.graphs).forEach((function(t){var a=e.graphs[t],o="default"===t?i.defaultGraph():i.namedNode(t);Object.keys(a).forEach((function(e){var t=a[e].predicates,s=fe(e)?i.blankNode(he(e)):i.namedNode(e);r.push.apply(r,(0,oe.Z)(Re(t,s,o,n)))}))})),r}function Re(e,t,n){var r,i=[],a=null!==(r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).dataFactory)&&void 0!==r?r:se;return Object.keys(e).forEach((function(r){var o,s,u,l,c=a.namedNode(r),d=null!==(o=e[r].langStrings)&&void 0!==o?o:{},f=null!==(s=e[r].namedNodes)&&void 0!==s?s:[],h=null!==(u=e[r].literals)&&void 0!==u?u:{},p=null!==(l=e[r].blankNodes)&&void 0!==l?l:[];Object.keys(h).forEach((function(e){var r=a.namedNode(e);h[e].forEach((function(e){var o=a.literal(e,r);i.push(a.quad(t,c,o,n))}))})),Object.keys(d).forEach((function(e){d[e].forEach((function(r){var o=a.literal(r,e);i.push(a.quad(t,c,o,n))}))})),f.forEach((function(e){var r=a.namedNode(e);i.push(a.quad(t,c,r,n))})),p.forEach((function(e){if(fe(e)){var r=a.blankNode(he(e));i.push(a.quad(t,c,r,n))}else{var o=a.blankNode(),s=a.quad(t,c,o,n),u=Re(e,o,n);i.push(s),i.push.apply(i,(0,oe.Z)(u))}}))})),i}function Le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(void 0!==n.find((function(t){return t.equals(e)})))return n;var r=t.filter((function(t){return t.subject.equals(e)&&Me(t.object)})).map((function(e){return e.object}));if(0===r.length)return[];var i,a=[].concat((0,oe.Z)(n),[e]),o=r.map((function(e){return Le(e,t,a)})),s=[],u=(0,k.Z)(o);try{for(u.s();!(i=u.n()).done;){var l=i.value;s.push.apply(s,(0,oe.Z)(l))}}catch(c){u.e(c)}finally{u.f()}return s}function Me(e){return"BlankNode"===e.termType}var Oe={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},Fe=n(1543),De=n(5560),Ne=function(){var e=[],t=[],n=[];return{onQuad:function(t){e.push(t)},onError:function(e){n.push(e)},onComplete:function(e){t.push(e)},parse:function(){var r=(0,E.Z)((0,S.Z)().mark((function r(i,a){return(0,S.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,je(G(a));case 2:r.sent.parse(i,(function(r,i){r?n.forEach((function(e){return e(r)})):i?e.forEach((function(e){return e(i)})):t.forEach((function(e){return e()}))}));case 4:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}};function je(e){return Be.apply(this,arguments)}function Be(){return(Be=(0,E.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Fe.Z({format:"text/turtle",baseIRI:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return ze.apply(this,arguments)}function ze(){return ze=(0,E.Z)((0,S.Z)().mark((function e(t){var n,r,i,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"text/turtle",n=new De.Z({format:"text/turtle"}),r=t.map((function(e){return ke.quad(e.subject,e.predicate,e.object,void 0)})),n.addQuads(r),i=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))})),e.next=7,i;case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Ve(e){var t,n,r,i,a,o,s,u;if(ge(e))return"<".concat(e.value,"> (URL)");if(function(e){return ye(e)&&"Literal"===e.termType}(e)){if(!ge(e.datatype))return"[".concat(e.value,"] (RDF/JS Literal of unknown type)");var c;switch(e.datatype.value){case pe.boolean:return c=null!==(n=null===(t=function(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&null}(e.value))||void 0===t?void 0:t.valueOf())&&void 0!==n?n:"Invalid data: `".concat(e.value,"`"),"".concat(c," (boolean)");case pe.dateTime:return c=null!==(i=null===(r=function(e){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;var t=e.split("T"),n=(0,l.Z)(t,2),r=n[0],i=n[1],a="-"===r.charAt(0)?[-1,r.substring(1)]:[1,r],o=(0,l.Z)(a,2),s=o[0],u=o[1].split("-"),c=(0,l.Z)(u,3),d=c[0],f=c[1],h=c[2],p=Number.parseInt(d,10)*s,v=Number.parseInt(f,10)-1,m=Number.parseInt(h,10),g=ve(i),y=(0,l.Z)(g,2),_=y[0],b=y[1],w="string"===typeof b?me(b):[0,0],x=(0,l.Z)(w,2),k=x[0],S=x[1],E=_.split(":"),A=(0,l.Z)(E,3),T=A[0],C=A[1],P=A[2],I=Number.parseInt(T,10)+k,R=Number.parseInt(C,10)+S,L=P.split("."),M=(0,l.Z)(L,2),O=M[0],F=M[1],D=Number.parseInt(O,10),N=F?Number.parseInt(F,10):0,j=new Date(Date.UTC(p,v,m,I,R,D,N));return p>=0&&p<100&&j.setUTCFullYear(j.getUTCFullYear()-1900),j}(e.value))||void 0===r?void 0:r.toUTCString())&&void 0!==i?i:"Invalid data: `".concat(e.value,"`"),"".concat(c," (datetime)");case pe.decimal:return c=null!==(o=null===(a=function(e){var t=Number.parseFloat(e);return Number.isNaN(t)?null:t}(e.value))||void 0===a?void 0:a.toString())&&void 0!==o?o:"Invalid data: `".concat(e.value,"`"),"".concat(c," (decimal)");case pe.integer:return c=null!==(u=null===(s=function(e){var t=Number.parseInt(e,10);return Number.isNaN(t)?null:t}(e.value))||void 0===s?void 0:s.toString())&&void 0!==u?u:"Invalid data: `".concat(e.value,"`"),"".concat(c," (integer)");case pe.langString:return'"'.concat(e.value,'" (').concat(e.language," string)");case pe.string:return'"'.concat(e.value,'" (string)');default:return"[".concat(e.value,"] (RDF/JS Literal of type: `").concat(e.datatype.value,"`)")}}return"BlankNode"===e.termType?"[".concat(e.value,"] (RDF/JS BlankNode)"):"Quad"===e.termType?"??? (nested RDF* Quad)":"Variable"===e.termType?"?".concat(e.value," (RDF/JS Variable)"):e}function Ze(e){if(!$e(e))throw new nt(e)}function He(e){return j(e)?e:le((0,I.Z)((0,I.Z)({},e),{},{internal_changeLog:{additions:[],deletions:[]}}))}function We(e){return"BlankNode"===e.subject.termType||"BlankNode"===e.object.termType}function Ge(e,t){var n,r,i;if(Ze(e),!be(t))throw new rt(t);var a=L(t);return null!==(i=null===(r=null===(n=e.predicates[a])||void 0===n?void 0:n.namedNodes)||void 0===r?void 0:r.map((function(e){return ce(e)?"#".concat(de(e)):e})))&&void 0!==i?i:[]}var qe=Ge;function Ke(e,t){return Ze(e),Xe(e,t,pe.string)}function Je(e,t){var n,r;Ze(e);var i=function(e,t){return qe(e,t).map((function(e){return ke.namedNode(e)}))}(e,t),a=function(e,t){var n,r,i,a;if(Ze(e),!be(t))throw new rt(t);for(var o=L(t),s=[],u=null!==(r=null===(n=e.predicates[o])||void 0===n?void 0:n.langStrings)&&void 0!==r?r:{},l=Object.keys(u),c=function(){var e=f[d],t=u[e].map((function(t){return ke.literal(t,e)}));s=s.concat(t)},d=0,f=l;d<f.length;d++)c();for(var h=null!==(a=null===(i=e.predicates[o])||void 0===i?void 0:i.literals)&&void 0!==a?a:{},p=Object.keys(h),v=function(){var e=g[m],t=h[e],n=ke.namedNode(e),r=t.map((function(e){return ke.literal(e,n)}));s=s.concat(r)},m=0,g=p;m<g.length;m++)v();return s}(e,t),o=L(t),s=(null!==(r=null===(n=e.predicates[o])||void 0===n?void 0:n.blankNodes)&&void 0!==r?r:[]).map((function(e){var t=fe(e)?he(e):void 0;return ke.blankNode(t)}));return i.concat(a).concat(s)}function Xe(e,t,n){var r,i,a,o;if(!be(t))throw new rt(t);var s=L(t);return null!==(o=null===(a=null===(i=null===(r=e.predicates[s])||void 0===r?void 0:r.literals)||void 0===i?void 0:i[n])||void 0===a?void 0:a[0])&&void 0!==o?o:null}function Ye(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!be(t))throw new at(t);var i="undefined"!==typeof r.scope?L(r.scope):"default",a=null!==(n=e.graphs[i])&&void 0!==n?n:{},o=L(t),s=a[ce(o)&&N(e)?xe(de(o),G(e)):o];return"undefined"===typeof s?null:s}function Qe(e,t){var n,r=tt(t)&&N(e)?xe(de(t.url),G(e)):t.url,i=e.graphs.default,a=le((0,I.Z)((0,I.Z)({},i),{},(0,ae.Z)({},r,le((0,I.Z)((0,I.Z)({},t),{},{url:r}))))),o=le((0,I.Z)((0,I.Z)({},e.graphs),{},{default:a})),s=ke.namedNode(r),u=null===(n=e.graphs.default[r])||void 0===n?void 0:n.predicates,c="undefined"!==typeof u?Re(u,s,ke.defaultGraph()):[],d=Re(t.predicates,s,ke.defaultGraph());return function(e,t){var n=j(e)?e.internal_changeLog:{additions:[],deletions:[]},r=t.filter((function(e){return!We(e)})).reduce((function(e,t){var n=(0,l.Z)(e,2),r=n[0],i=n[1];return"undefined"!==typeof i.find((function(e){return e.equals(t)}))?[r,i.filter((function(e){return!e.equals(t)}))]:[r.concat(t),i]}),[n.additions,n.deletions]),i=(0,l.Z)(r,2),a=i[0],o=i[1];return le((0,I.Z)((0,I.Z)({},e),{},{internal_changeLog:{additions:a,deletions:o}}))}(function(e,t){var n=j(e)?e.internal_changeLog:{additions:[],deletions:[]},r=t.filter((function(e){return!We(e)})).reduce((function(e,t){var n=(0,l.Z)(e,2),r=n[0],i=n[1];return"undefined"!==typeof r.find((function(e){return e.equals(t)}))?[r.filter((function(e){return!e.equals(t)})),i]:[r,i.concat(t)]}),[n.additions,n.deletions]),i=(0,l.Z)(r,2),a=i[0],o=i[1];return le((0,I.Z)((0,I.Z)({},e),{},{internal_changeLog:{additions:a,deletions:o}}))}(le((0,I.Z)((0,I.Z)({},e),{},{graphs:o})),c),d)}function $e(e){return"object"===typeof e&&null!==e&&"string"===typeof e.type&&"Subject"===e.type}var et=function(e,t){if(tt(e)){if("undefined"===typeof t)throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return xe(de(e.url),t)}return e.url};function tt(e){return ce(e.url)}var nt=function(e){(0,M.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;(0,T.Z)(this,n);var i="Expected a Thing, but received: [".concat(e,"].");return(r=t.call(this,i)).receivedValue=e,r}return(0,A.Z)(n)}(B),rt=function(e){(0,M.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;(0,T.Z)(this,n);var i=ge(e)?e.value:e,a="Expected a valid URL to identify a property, but received: [".concat(i,"].");return(r=t.call(this,a)).receivedProperty=i,r}return(0,A.Z)(n)}(B),it=function(e){(0,M.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;(0,T.Z)(this,n);var i=ge(e)?e.value:e,a="Expected a valid URL value, but received: [".concat(i,"].");return(r=t.call(this,a)).receivedValue=i,r}return(0,A.Z)(n)}(B),at=function(e){(0,M.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;(0,T.Z)(this,n);var i=ge(e)?e.value:e,a="Expected a valid URL to identify a Thing, but received: [".concat(i,"].");return(r=t.call(this,a)).receivedValue=i,r}return(0,A.Z)(n)}(B);function ot(e){var t=new URL(e);return t.hash="",t.href}function st(e){return ut.apply(this,arguments)}function ut(){return ut=(0,E.Z)((0,S.Z)().mark((function e(t){var n,r,i,a,o,s,u,l,c=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},!V(t)){e.next=3;break}throw new q("Fetching the SolidDataset at [".concat(t.url,"] failed: [").concat(t.status,"] [").concat(t.statusText,"]."),t);case 3:if(r=H(t),i=(0,I.Z)({"text/turtle":Ne()},n.parsers),null!==(a=W(r))){e.next=8;break}throw new Error("Could not determine the content type of the Resource at [".concat(G(r),"]."));case 8:if(o=a.split(";")[0],"undefined"!==typeof(s=i[o])){e.next=12;break}throw new Error("The Resource at [".concat(G(r),"] has a MIME type of [").concat(o,"], but the only parsers available are for the following MIME types: [").concat(Object.keys(i).join(", "),"]."));case 12:return e.next=14,t.text();case 14:return u=e.sent,l=new Promise((function(e,t){var n=le({graphs:le({default:le({})}),type:"Dataset"}),i=[],o=[];s.onError((function(e){t(new Error("Encountered an error parsing the Resource at [".concat(G(r),"] with content type [").concat(a,"]: ").concat(e)))})),s.onQuad((function(e){o.push(e),"BlankNode"===e.subject.termType||"BlankNode"===e.object.termType?i.push(e):n=Se(n,e)})),s.onComplete((0,E.Z)((0,S.Z)().mark((function t(){var a,s,u;return(0,S.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:20,a=i.length<=20?Pe(i):[],s=i.filter((function(e){return a.every((function(t){return!t.equals(e.subject)}))})),n=s.reduce((function(e,t){return Se(e,t,{otherQuads:o,chainBlankNodes:a})}),n),u=le((0,I.Z)((0,I.Z)({},n),r)),e(u);case 6:case"end":return t.stop()}}),t)})))),s.parse(u,r)})),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)}))),ut.apply(this,arguments)}function lt(e){return ct.apply(this,arguments)}function ct(){return ct=(0,E.Z)((0,S.Z)().mark((function e(t){var n,r,i,a,o,s,u,l=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:Z,t=L(t),i=(0,I.Z)((0,I.Z)({},Z),n),a=Object.keys(null!==(r=n.parsers)&&void 0!==r?r:{}),o=a.length>0?a.join(", "):"text/turtle",e.next=7,i.fetch(t,{headers:{Accept:o}});case 7:if(!V(s=e.sent)){e.next=10;break}throw new q("Fetching the Resource at [".concat(t,"] failed: [").concat(s.status,"] [").concat(s.statusText,"]."),s);case 10:return e.next=12,st(s,n);case 12:return u=e.sent,e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),ct.apply(this,arguments)}function dt(e){return ft.apply(this,arguments)}function ft(){return(ft=(0,E.Z)((0,S.Z)().mark((function e(t){var n,r;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.internal_changeLog.deletions.length>0)){e.next=8;break}return e.t1="DELETE DATA {",e.next=4,Ue(t.internal_changeLog.deletions.map(wt));case 4:e.t2=e.sent.trim(),e.t0=e.t1.concat.call(e.t1,e.t2,"};"),e.next=9;break;case 8:e.t0="";case 9:if(n=e.t0,!(t.internal_changeLog.additions.length>0)){e.next=18;break}return e.t4="INSERT DATA {",e.next=14,Ue(t.internal_changeLog.additions.map(wt));case 14:e.t5=e.sent.trim(),e.t3=e.t4.concat.call(e.t4,e.t5,"};"),e.next=19;break;case 18:e.t3="";case 19:return r=e.t3,e.abrupt("return",{method:"PATCH",body:"".concat(n," ").concat(r),headers:{"Content-Type":"application/sparql-update"}});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){return pt.apply(this,arguments)}function pt(){return(pt=(0,E.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(Ie(t).map(wt));case 2:return e.t0=e.sent,e.t1={"Content-Type":"text/turtle","If-None-Match":"*",Link:"<".concat(Oe.Resource,'>; rel="type"')},e.abrupt("return",{method:"PUT",body:e.t0,headers:e.t1});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e,t){return mt.apply(this,arguments)}function mt(){return mt=(0,E.Z)((0,S.Z)().mark((function e(t,n){var r,i,a,o,s,u,l,c,d,f=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>2&&void 0!==f[2]?f[2]:Z,t=L(t),i=(0,I.Z)((0,I.Z)({},Z),r),!gt(a=He(n),t)){e.next=10;break}return e.next=7,dt(a);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,ht(a);case 12:e.t0=e.sent;case 13:return o=e.t0,e.next=16,i.fetch(t,o);case 16:if(!V(s=e.sent)){e.next=20;break}throw u=gt(a,t)?"The changes that were sent to the Pod are listed below.\n\n".concat(bt(a)):"The SolidDataset that was sent to the Pod is listed below.\n\n".concat(_t(a)),new q("Storing the Resource at [".concat(t,"] failed: [").concat(s.status,"] [").concat(s.statusText,"].\n\n").concat(u),s);case 20:return l=(0,I.Z)((0,I.Z)({},z(s)),{},{isRawData:!1}),c=le((0,I.Z)((0,I.Z)({},n),{},{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:l})),d=kt(c),e.abrupt("return",d);case 24:case"end":return e.stop()}}),e)}))),mt.apply(this,arguments)}function gt(e,t){return j(e)&&D(e)&&"string"===typeof e.internal_resourceInfo.sourceIri&&function(e,t){return ot(e.internal_resourceInfo.sourceIri)===ot(t)}(e,t)}function yt(e){var t=Ye(e,G(e));return null!==t?qe(t,Oe.contains):[]}function _t(e){var t="";D(e)?t+="# SolidDataset: ".concat(G(e),"\n"):t+="# SolidDataset (no URL yet)\n";var n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{acceptBlankNodes:!1},r="undefined"!==typeof n.scope?L(n.scope):"default",i=null!==(t=e.graphs[r])&&void 0!==t?t:{};return Object.values(i).filter((function(e){return!fe(e.url)||n.acceptBlankNodes}))}(e);return 0===n.length?t+="\n<empty>\n":n.forEach((function(n){t+="\n".concat(function(e){var t="";tt(e)?t+="## Thing (no URL yet \u2014 identifier: `#".concat(de(e.url),"`)\n"):t+="## Thing: ".concat(e.url,"\n");var n=Object.keys(e.predicates);if(0===n.length)t+="\n<empty>\n";else{var r,i=(0,k.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t+="\nProperty: ".concat(a,"\n"),t+=Je(e,a).reduce((function(e,t){return"".concat(e,"- ").concat(Ve(t),"\n")}),"")}}catch(o){i.e(o)}finally{i.f()}}return t}(n)),j(e)&&(t+="\n".concat(function(e,t){var n=ke.namedNode(t.url),r=e.internal_changeLog.additions.reduce((function(e,t){return t.subject.equals(n)?e+1:e}),0),i=e.internal_changeLog.deletions.reduce((function(e,t){return t.subject.equals(n)?e+1:e}),0),a=1===r?"1 new value added":"".concat(r," new values added"),o=1===i?"1 value removed":"".concat(i," values removed");return"(".concat(a," / ").concat(o,")")}(e,n),"\n"))})),t}function bt(e){if(!D(e))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!j(e)||0===e.internal_changeLog.additions.length&&0===e.internal_changeLog.deletions.length)return"## Changes compared to ".concat(G(e),"\n\n")+"This SolidDataset has not been modified since it was fetched from ".concat(G(e),".\n");var t="## Changes compared to ".concat(G(e),"\n"),n=function(e){var t=Object.create(null);return e.internal_changeLog.deletions.forEach((function(n){var r,i,a,o=_e(n.subject)?we(n.subject,G(e)):n.subject;if(ge(o)&&ge(n.predicate)){var s=L(o),u=L(n.predicate);null!==(r=t[s])&&void 0!==r||(t[s]=Object.create(null)),null!==(i=(a=t[s])[u])&&void 0!==i||(a[u]={added:[],deleted:[]}),t[s][u].deleted.push(n.object)}})),e.internal_changeLog.additions.forEach((function(n){var r,i,a,o=_e(n.subject)?we(n.subject,G(e)):n.subject;if(ge(o)&&ge(n.predicate)){var s=L(o),u=L(n.predicate);null!==(r=t[s])&&void 0!==r||(t[s]=Object.create(null)),null!==(i=(a=t[s])[u])&&void 0!==i||(a[u]={added:[],deleted:[]}),t[s][u].added.push(n.object)}})),t}(e);return Object.keys(n).forEach((function(e){t+="\n### Thing: ".concat(e,"\n");var r=n[e];Object.keys(r).forEach((function(e){t+="\nProperty: ".concat(e,"\n");var n=r[e].deleted,i=r[e].added;n.length>0&&(t+="- Removed:\n",t+=n.reduce((function(e,t){return"".concat(e,"  - ").concat(Ve(t),"\n")}),"")),i.length>0&&(t+="- Added:\n",t+=i.reduce((function(e,t){return"".concat(e,"  - ").concat(Ve(t),"\n")}),""))}))})),t}function wt(e){var t=ge(e.subject)?xt(e.subject):e.subject,n=ge(e.object)?xt(e.object):e.object;return ke.quad(t,e.predicate,n,e.graph)}function xt(e){return ce(e.value)?ke.namedNode("#".concat(de(e.value))):e}function kt(e){var t=G(e),n=e.graphs.default,r=Object.keys(n).reduce((function(e,n){var r=function(e,t){var n=Object.keys(e.predicates).reduce((function(e,n){var r,i=null!==(r=e[n].namedNodes)&&void 0!==r?r:[];if(i.every((function(e){return!ce(e)})))return e;var a=le(i.map((function(e){return ce(e)?"".concat(t,"#").concat(de(e)):e}))),o=le((0,I.Z)((0,I.Z)({},e[n]),{},{namedNodes:a}));return le((0,I.Z)((0,I.Z)({},e),{},(0,ae.Z)({},n,o)))}),e.predicates);return le((0,I.Z)((0,I.Z)({},e),{},{predicates:n,url:ce(e.url)?"".concat(t,"#").concat(de(e.url)):e.url}))}(e[n],t),i=ce(n)?"".concat(t,"#").concat(de(n)):n,a=(0,I.Z)({},e);return delete a[n],a[i]=r,le(a)}),n),i=le((0,I.Z)((0,I.Z)({},e.graphs),{},{default:r}));return le((0,I.Z)((0,I.Z)({},e),{},{graphs:i}))}var St=n(2464);function Et(e,t){return At.apply(this,arguments)}function At(){return(At=(0,E.Z)((0,S.Z)().mark((function e(t,n){var r,i,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.split("/"),i=r[r.length-1],e.prev=2,e.next=5,Y(n,{fetch:St.fetch});case 5:return a=e.sent,e.abrupt("return",new File([a],i,{type:a.type}));case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Tt(e,t,n){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,E.Z)((0,S.Z)().mark((function e(t,n,r){var i;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!0,e.prev=1,e.next=4,$(n,r,{contentType:r.type,fetch:St.fetch});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),i=!1;case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function Pt(e,t){return It.apply(this,arguments)}function It(){return It=(0,E.Z)((0,S.Z)().mark((function e(t,n){var r,i,a,o,s;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt(n,{fetch:St.fetch});case 3:r=e.sent,i=yt(r),a=[],o=0;case 7:if(!(o<i.length)){e.next=15;break}return e.next=10,Et(t,i[o]);case 10:null!=(s=e.sent)&&a.push(s);case 12:o++,e.next=7;break;case 15:return e.abrupt("return",a);case 18:return e.prev=18,e.t0=e.catch(0),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),It.apply(this,arguments)}var Rt=function(e,t,n){var r,i;if(Ze(e),!be(t))throw new rt(t);if(!$e(n)&&!be(n))throw new it(n);var a,o=L(t),s=null!==(r=e.predicates[o])&&void 0!==r?r:{},u=null!==(i=s.namedNodes)&&void 0!==i?i:[];a=ge(n)?n.value:"string"===typeof n?n:tt(n)?n.url:et(n);var l=le(u.concat(L(a))),c=le((0,I.Z)((0,I.Z)({},s),{},{namedNodes:l})),d=le((0,I.Z)((0,I.Z)({},e.predicates),{},(0,ae.Z)({},o,c)));return le((0,I.Z)((0,I.Z)({},e),{},{predicates:d}))},Lt=Rt;var Mt=function(e,t,n){var r,i,a;if(Ze(e),!be(t))throw new rt(t);var o=L(t);if(!$e(n)&&!be(n))throw new it(n);var s=$e(n)?et(n):L(n),u=le(null!==(a=null===(i=null===(r=e.predicates[o])||void 0===r?void 0:r.namedNodes)||void 0===i?void 0:i.filter((function(e){return e.toLowerCase()!==s.toLowerCase()})))&&void 0!==a?a:[]),l=le((0,I.Z)((0,I.Z)({},e.predicates[o]),{},{namedNodes:u})),c=le((0,I.Z)((0,I.Z)({},e.predicates),{},(0,ae.Z)({},o,l)));return le((0,I.Z)((0,I.Z)({},e),{},{predicates:c}))},Ot=Mt;var Ft="http://www.w3.org/ns/auth/acl#";function Dt(e){return Ft+e}Dt("Access"),Dt("Append"),Dt("Write"),Dt("AuthenticatedAgent"),Dt("Authorization"),Dt("Control"),Dt("Origin"),Dt("Read"),Dt("accessControl"),Dt("accessTo"),Dt("accessToClass"),Dt("agent"),Dt("agentClass"),Dt("agentGroup"),Dt("default"),Dt("defaultForNew"),Dt("delegates"),Dt("mode"),Dt("origin"),Dt("owner");var Nt="http://www.w3.org/ns/dx/conneg/altr#";function jt(e){return Nt+e}jt("Representation"),jt("hasRepresentation"),jt("hasDefaultRepresentation");var Bt="https://www.w3.org/ns/activitystreams#";function Ut(e){return Bt+e}Ut("Activity"),Ut("Object"),Ut("Link"),Ut("OrderedItems"),Ut("Collection"),Ut("CollectionPage"),Ut("Image"),Ut("Document"),Ut("Relationship"),Ut("Question"),Ut("IntransitiveActivity"),Ut("Profile"),Ut("Tombstone"),Ut("Place"),Ut("OrderedCollectionPage"),Ut("OrderedCollection"),Ut("Accept"),Ut("Block"),Ut("Ignore"),Ut("Add"),Ut("Announce"),Ut("Application"),Ut("Arrive"),Ut("Article"),Ut("Audio"),Ut("Create"),Ut("Delete"),Ut("Dislike"),Ut("Event"),Ut("Flag"),Ut("Follow"),Ut("Group"),Ut("Invite"),Ut("Offer"),Ut("Join"),Ut("Leave"),Ut("Like"),Ut("View"),Ut("Listen"),Ut("Read"),Ut("Move"),Ut("Travel"),Ut("Mention"),Ut("Note"),Ut("Page"),Ut("Person"),Ut("Organization"),Ut("Reject"),Ut("Remove"),Ut("Service"),Ut("TentativeAccept"),Ut("TentativeReject"),Ut("Undo"),Ut("Update"),Ut("Video"),Ut("actor"),Ut("attributedTo"),Ut("attachment"),Ut("attachments"),Ut("author"),Ut("bcc"),Ut("bto"),Ut("cc"),Ut("context"),Ut("current"),Ut("first"),Ut("generator"),Ut("icon"),Ut("image"),Ut("inReplyTo"),Ut("items"),Ut("last"),Ut("location"),Ut("next"),Ut("object"),Ut("oneOf"),Ut("anyOf"),Ut("prev"),Ut("preview"),Ut("provider"),Ut("replies"),Ut("result"),Ut("audience"),Ut("partOf"),Ut("tag"),Ut("tags"),Ut("target"),Ut("origin"),Ut("instrument"),Ut("to"),Ut("url"),Ut("subject"),Ut("relationship"),Ut("describes"),Ut("formerType"),Ut("accuracy"),Ut("altitude"),Ut("content"),Ut("name"),Ut("downstreamDuplicates"),Ut("duration"),Ut("endTime"),Ut("height"),Ut("href"),Ut("hreflang"),Ut("id"),Ut("latitude"),Ut("longitude"),Ut("mediaType"),Ut("objectType"),Ut("published"),Ut("radius"),Ut("rating"),Ut("rel"),Ut("startIndex"),Ut("startTime"),Ut("summary"),Ut("totalItems"),Ut("units"),Ut("updated"),Ut("upstreamDuplicates"),Ut("verb"),Ut("width"),Ut("deleted");var zt="http://www.w3.org/2002/01/bookmark#";function Vt(e){return zt+e}Vt("Topic"),Vt("Shortcut"),Vt("Bookmark"),Vt("hasTopic"),Vt("leadsTo"),Vt("bookmarks"),Vt("recalls"),Vt("subTopicOf");var Zt="https://www.w3.org/2018/credentials#";function Ht(e){return Zt+e}Ht("VerifiableCredential"),Ht("JsonSchemaValidator2018"),Ht("ManualRefreshService2018"),Ht("VerifiablePresentation"),Ht("verifiableCredential"),Ht("credentialSchema"),Ht("credentialStatus"),Ht("credentialSubject"),Ht("evidence"),Ht("expirationDate"),Ht("holder"),Ht("issued"),Ht("issuer"),Ht("issuanceDate"),Ht("refreshService"),Ht("termsOfUse"),Ht("validFrom"),Ht("validUntil");var Wt="http://www.w3.org/ns/dcat#";function Gt(e){return Wt+e}Gt("Catalog"),Gt("Dataset"),Gt("Resource"),Gt("CatalogRecord"),Gt("DataService"),Gt("Distribution"),Gt("Relationship"),Gt("Role"),Gt("hadRole"),Gt("accessService"),Gt("accessURL"),Gt("endpointURL"),Gt("bbox"),Gt("byteSize"),Gt("catalog"),Gt("centroid"),Gt("compressFormat"),Gt("contactPoint"),Gt("dataset"),Gt("distribution"),Gt("downloadURL"),Gt("endDate"),Gt("endpointDescription"),Gt("keyword"),Gt("landingPage"),Gt("mediaType"),Gt("packageFormat"),Gt("qualifiedRelation"),Gt("record"),Gt("servesDataset"),Gt("service"),Gt("spatialResolutionInMeters"),Gt("startDate"),Gt("temporalResolution"),Gt("theme"),Gt("themeTaxonomy");var qt="http://purl.org/dc/terms/";function Kt(e){return qt+e}Kt("Agent"),Kt("AgentClass"),Kt("BibliographicResource"),Kt("FileFormat"),Kt("MediaType"),Kt("MediaTypeOrExtent"),Kt("Frequency"),Kt("Jurisdiction"),Kt("LocationPeriodOrJurisdiction"),Kt("LicenseDocument"),Kt("RightsStatement"),Kt("LinguisticSystem"),Kt("Location"),Kt("MethodOfAccrual"),Kt("MethodOfInstruction"),Kt("PeriodOfTime"),Kt("PhysicalMedium"),Kt("PhysicalResource"),Kt("Policy"),Kt("ProvenanceStatement"),Kt("SizeOrDuration"),Kt("Standard"),Kt("modified"),Kt("publisher"),Kt("title"),Kt("hasVersion"),Kt("issued"),Kt("date"),Kt("description"),Kt("relation"),Kt("Box"),Kt("ISO3166"),Kt("ISO639-2"),Kt("ISO639-3"),Kt("Period"),Kt("Point"),Kt("RFC1766"),Kt("RFC3066"),Kt("RFC4646"),Kt("RFC5646"),Kt("URI"),Kt("W3CDTF"),Kt("abstract"),Kt("accessRights"),Kt("rights"),Kt("accrualMethod"),Kt("accrualPeriodicity"),Kt("accrualPolicy"),Kt("alternative"),Kt("audience"),Kt("available"),Kt("bibliographicCitation"),Kt("identifier"),Kt("conformsTo"),Kt("contributor"),Kt("coverage"),Kt("created"),Kt("creator"),Kt("dateAccepted"),Kt("dateCopyrighted"),Kt("dateSubmitted"),Kt("educationLevel"),Kt("extent"),Kt("format"),Kt("hasFormat"),Kt("hasPart"),Kt("instructionalMethod"),Kt("isFormatOf"),Kt("isPartOf"),Kt("isReferencedBy"),Kt("isReplacedBy"),Kt("isRequiredBy"),Kt("isVersionOf"),Kt("language"),Kt("license"),Kt("mediator"),Kt("medium"),Kt("provenance"),Kt("references"),Kt("replaces"),Kt("requires"),Kt("rightsHolder"),Kt("source"),Kt("spatial"),Kt("subject"),Kt("tableOfContents"),Kt("temporal"),Kt("type"),Kt("valid");var Jt="http://usefulinc.com/ns/doap#";function Xt(e){return Jt+e}Xt("Project"),Xt("Version"),Xt("Specification"),Xt("Repository"),Xt("SVNRepository"),Xt("GitRepository"),Xt("BKRepository"),Xt("CVSRepository"),Xt("ArchRepository"),Xt("BazaarBranch"),Xt("GitBranch"),Xt("HgRepository"),Xt("DarcsRepository"),Xt("name"),Xt("homepage"),Xt("old-homepage"),Xt("created"),Xt("shortdesc"),Xt("description"),Xt("release"),Xt("mailing-list"),Xt("support-forum"),Xt("developer-forum"),Xt("category"),Xt("license"),Xt("repository"),Xt("repositoryOf"),Xt("anon-root"),Xt("browse"),Xt("module"),Xt("location"),Xt("download-page"),Xt("download-mirror"),Xt("revision"),Xt("file-release"),Xt("wiki"),Xt("bug-database"),Xt("screenshots"),Xt("maintainer"),Xt("developer"),Xt("documenter"),Xt("translator"),Xt("tester"),Xt("helper"),Xt("programming-language"),Xt("os"),Xt("implements"),Xt("service-endpoint"),Xt("language"),Xt("vendor"),Xt("platform"),Xt("audience"),Xt("blog");var Yt="http://www.w3.org/ns/earl#";function Qt(e){return Yt+e}Qt("Assertion"),Qt("Assertor"),Qt("TestSubject"),Qt("TestCriterion"),Qt("TestRequirement"),Qt("TestCase"),Qt("TestResult"),Qt("TestMode"),Qt("OutcomeValue"),Qt("Pass"),Qt("Fail"),Qt("CannotTell"),Qt("NotApplicable"),Qt("NotTested"),Qt("Software"),Qt("assertedBy"),Qt("subject"),Qt("test"),Qt("result"),Qt("mode"),Qt("mainAssertor"),Qt("outcome"),Qt("pointer"),Qt("info");var $t="http://xmlns.com/foaf/0.1/";function en(e){return $t+e}var tn={PREFIX:"foaf",NAMESPACE:$t,PREFIX_AND_NAMESPACE:{foaf:"http://xmlns.com/foaf/0.1/"},NS:en,Agent:en("Agent"),Document:en("Document"),Organization:en("Organization"),Project:en("Project"),Person:en("Person"),Group:en("Group"),Image:en("Image"),LabelProperty:en("LabelProperty"),OnlineAccount:en("OnlineAccount"),OnlineChatAccount:en("OnlineChatAccount"),OnlineEcommerceAccount:en("OnlineEcommerceAccount"),OnlineGamingAccount:en("OnlineGamingAccount"),PersonalProfileDocument:en("PersonalProfileDocument"),account:en("account"),accountName:en("accountName"),accountServiceHomepage:en("accountServiceHomepage"),age:en("age"),aimChatID:en("aimChatID"),nick:en("nick"),based_near:en("based_near"),birthday:en("birthday"),currentProject:en("currentProject"),depiction:en("depiction"),depicts:en("depicts"),dnaChecksum:en("dnaChecksum"),familyName:en("familyName"),family_name:en("family_name"),firstName:en("firstName"),focus:en("focus"),fundedBy:en("fundedBy"),geekcode:en("geekcode"),gender:en("gender"),givenName:en("givenName"),givenname:en("givenname"),holdsAccount:en("holdsAccount"),homepage:en("homepage"),page:en("page"),isPrimaryTopicOf:en("isPrimaryTopicOf"),topic:en("topic"),primaryTopic:en("primaryTopic"),icqChatID:en("icqChatID"),img:en("img"),interest:en("interest"),jabberID:en("jabberID"),knows:en("knows"),lastName:en("lastName"),logo:en("logo"),made:en("made"),maker:en("maker"),mbox:en("mbox"),mbox_sha1sum:en("mbox_sha1sum"),member:en("member"),membershipClass:en("membershipClass"),msnChatID:en("msnChatID"),myersBriggs:en("myersBriggs"),name:en("name"),openid:en("openid"),pastProject:en("pastProject"),phone:en("phone"),plan:en("plan"),publications:en("publications"),schoolHomepage:en("schoolHomepage"),sha1:en("sha1"),skypeID:en("skypeID"),status:en("status"),surname:en("surname"),theme:en("theme"),thumbnail:en("thumbnail"),tipjar:en("tipjar"),title:en("title"),topic_interest:en("topic_interest"),weblog:en("weblog"),workInfoHomepage:en("workInfoHomepage"),workplaceHomepage:en("workplaceHomepage"),yahooChatID:en("yahooChatID")},nn="http://www.w3.org/2011/http#";function rn(e){return nn+e}rn("Connection"),rn("EntityHeader"),rn("MessageHeader"),rn("GeneralHeader"),rn("HeaderElement"),rn("HeaderName"),rn("Message"),rn("Method"),rn("Parameter"),rn("Request"),rn("RequestHeader"),rn("Response"),rn("ResponseHeader"),rn("StatusCode"),rn("absoluteURI"),rn("requestURI"),rn("absolutePath"),rn("authority"),rn("body"),rn("connectionAuthority"),rn("elementName"),rn("elementValue"),rn("fieldName"),rn("fieldValue"),rn("headerElements"),rn("hdrName"),rn("headers"),rn("httpVersion"),rn("mthd"),rn("methodName"),rn("paramName"),rn("params"),rn("paramValue"),rn("reasonPhrase"),rn("requests"),rn("resp"),rn("sc"),rn("statusCodeNumber"),rn("statusCodeValue");var an="http://www.w3.org/2007/ont/httph#";function on(e){return an+e}on("content-type"),on("accept"),on("accept-language");var sn="http://www.w3.org/ns/hydra/core#";function un(e){return sn+e}un("Class"),un("Link"),un("ApiDocumentation"),un("TemplatedLink"),un("Error"),un("Collection"),un("PartialCollectionView"),un("BaseUriSource"),un("HeaderSpecification"),un("property"),un("required"),un("readable"),un("writable"),un("writeable"),un("method"),un("statusCode"),un("title"),un("description"),un("manages"),un("totalItems"),un("freetextQuery"),un("template"),un("Rfc6570Template"),un("variableRepresentation"),un("mapping"),un("variable"),un("resolveRelativeUsing"),un("offset"),un("limit"),un("pageIndex"),un("pageReference"),un("returnsHeader"),un("expectsHeader"),un("headerName"),un("possibleValue"),un("closedSet"),un("extension");var ln="https://www.w3.org/2002/12/cal/ical#";function cn(e){return ln+e}cn("Valarm"),cn("Value_DURATION"),cn("Value_CAL-ADDRESS"),cn("Value_DATE"),cn("Value_DATE-TIME"),cn("Value_PERIOD"),cn("Value_RECUR"),cn("Vevent"),cn("Vfreebusy"),cn("Vjournal"),cn("Vtimezone"),cn("Vtodo"),cn("attach"),cn("description"),cn("summary"),cn("duration"),cn("attendee"),cn("action"),cn("repeat"),cn("trigger"),cn("categories"),cn("class"),cn("comment"),cn("geo"),cn("location"),cn("priority"),cn("resources"),cn("status"),cn("dtend"),cn("dtstart"),cn("transp"),cn("contact"),cn("organizer"),cn("relatedTo"),cn("url"),cn("uid"),cn("exrule"),cn("rdate"),cn("rrule"),cn("created"),cn("dtstamp"),cn("lastModified"),cn("sequence"),cn("requestStatus"),cn("freebusy"),cn("tzid"),cn("tzname"),cn("tzoffsetfrom"),cn("tzoffsetto"),cn("tzurl"),cn("percentComplete"),cn("completed"),cn("due"),cn("X-"),cn("calscale"),cn("exdate"),cn("method"),cn("prodid"),cn("recurrenceId"),cn("version");var dn="http://www.w3.org/ns/json-ld#";function fn(e){return dn+e}fn("Context"),fn("PrefixDefinition"),fn("TermDefinition"),fn("base"),fn("container"),fn("context"),fn("definition"),fn("direction"),fn("id"),fn("import"),fn("language"),fn("nest"),fn("prefix"),fn("propagate"),fn("protected"),fn("reverse"),fn("term"),fn("type"),fn("version"),fn("vocab"),fn("compacted"),fn("expanded"),fn("flattened"),fn("frame"),fn("framed"),fn("streaming");var hn="http://www.w3.org/ns/ldp#";function pn(e){return hn+e}pn("Resource"),pn("RDFSource"),pn("NonRDFSource"),pn("Container"),pn("BasicContainer"),pn("DirectContainer"),pn("IndirectContainer"),pn("Page"),pn("PageSortCriterion"),pn("hasMemberRelation"),pn("isMemberOfRelation"),pn("membershipResource"),pn("insertedContentRelation"),pn("member"),pn("contains"),pn("constrainedBy"),pn("pageSortCriteria"),pn("pageSortPredicate"),pn("pageSortOrder"),pn("pageSortCollation"),pn("pageSequence"),pn("inbox");var vn="http://www.w3.org/ns/odrl/2/";function mn(e){return vn+e}mn("Policy"),mn("uid"),mn("profile"),mn("inheritFrom"),mn("Rule"),mn("relation"),mn("function"),mn("failure"),mn("Asset"),mn("Party"),mn("ConflictTerm"),mn("conflict"),mn("perm"),mn("prohibit"),mn("invalid"),mn("Agreement"),mn("Offer"),mn("Set"),mn("Assertion"),mn("Privacy"),mn("Request"),mn("Ticket"),mn("AssetCollection"),mn("target"),mn("hasPolicy"),mn("output"),mn("PartyCollection"),mn("assignee"),mn("assigner"),mn("assigneeOf"),mn("assignerOf"),mn("attributedParty"),mn("attributingParty"),mn("compensatedParty"),mn("compensatingParty"),mn("consentingParty"),mn("consentedParty"),mn("contractingParty"),mn("contractedParty"),mn("informedParty"),mn("informingParty"),mn("trackingParty"),mn("trackedParty"),mn("partOf"),mn("source"),mn("Action"),mn("action"),mn("includedIn"),mn("implies"),mn("Permission"),mn("permission"),mn("Prohibition"),mn("Duty"),mn("prohibition"),mn("use"),mn("transfer"),mn("acceptTracking"),mn("aggregate"),mn("annotate"),mn("anonymize"),mn("archive"),mn("attribute"),mn("compensate"),mn("concurrentUse"),mn("delete"),mn("derive"),mn("digitize"),mn("display"),mn("distribute"),mn("ensureExclusivity"),mn("execute"),mn("extract"),mn("give"),mn("grantUse"),mn("include"),mn("index"),mn("inform"),mn("install"),mn("modify"),mn("move"),mn("nextPolicy"),mn("obtainConsent"),mn("play"),mn("present"),mn("print"),mn("read"),mn("reproduce"),mn("reviewPolicy"),mn("sell"),mn("stream"),mn("synchronize"),mn("textToSpeech"),mn("transform"),mn("translate"),mn("uninstall"),mn("watermark"),mn("obligation"),mn("duty"),mn("consequence"),mn("remedy"),mn("Constraint"),mn("constraint"),mn("refinement"),mn("Operator"),mn("operator"),mn("RightOperand"),mn("rightOperand"),mn("rightOperandReference"),mn("LeftOperand"),mn("leftOperand"),mn("dataType"),mn("status"),mn("LogicalConstraint"),mn("operand"),mn("absolutePosition"),mn("absoluteSpatialPosition"),mn("absoluteTemporalPosition"),mn("absoluteSize"),mn("count"),mn("dateTime"),mn("delayPeriod"),mn("deliveryChannel"),mn("elapsedTime"),mn("event"),mn("fileFormat"),mn("industry"),mn("language"),mn("media"),mn("meteredTime"),mn("payAmount"),mn("percentage"),mn("product"),mn("purpose"),mn("recipient"),mn("relativePosition"),mn("relativeSpatialPosition"),mn("relativeTemporalPosition"),mn("relativeSize"),mn("resolution"),mn("spatial"),mn("spatialCoordinates"),mn("systemDevice"),mn("timeInterval"),mn("unitOfCount"),mn("version"),mn("virtualLocation"),mn("device"),mn("system"),mn("or"),mn("xone"),mn("and"),mn("andSequence"),mn("eq"),mn("gt"),mn("gteq"),mn("lt"),mn("lteq"),mn("neq"),mn("isA"),mn("hasPart"),mn("isPartOf"),mn("isAllOf"),mn("isAnyOf"),mn("isNoneOf"),mn("policyUsage"),mn("proximity"),mn("append"),mn("appendTo"),mn("copy"),mn("export"),mn("lease"),mn("license"),mn("lend"),mn("pay"),mn("payeeParty"),mn("preview"),mn("secondaryUse"),mn("write"),mn("writeTo"),mn("adHocShare"),mn("extractChar"),mn("extractPage"),mn("extractWord"),mn("timedCount"),mn("inheritRelation"),mn("inheritAllowed"),mn("UndefinedTerm"),mn("undefined"),mn("ignore"),mn("support"),mn("AssetScope"),mn("PartyScope"),mn("scope"),mn("Group"),mn("Individual"),mn("All"),mn("AllConnections"),mn("All2ndConnections"),mn("AllGroups"),mn("attachPolicy"),mn("attachSource"),mn("shareAlike"),mn("commercialize"),mn("share"),mn("core"),mn("unit");var gn="http://purl.org/ontology/olo/core#";function yn(e){return gn+e}yn("OrderedList"),yn("Slot"),yn("length"),yn("next"),yn("index"),yn("ordered_list"),yn("previous"),yn("slot"),yn("item");var _n="http://www.w3.org/2002/07/owl#";function bn(e){return _n+e}bn("Ontology"),bn("OntologyProperty"),bn("AnnotationProperty"),bn("AllDifferent"),bn("AllDisjointClasses"),bn("AllDisjointProperties"),bn("Annotation"),bn("AsymmetricProperty"),bn("ObjectProperty"),bn("Axiom"),bn("Class"),bn("DataRange"),bn("DatatypeProperty"),bn("DeprecatedClass"),bn("DeprecatedProperty"),bn("FunctionalProperty"),bn("InverseFunctionalProperty"),bn("IrreflexiveProperty"),bn("NamedIndividual"),bn("Thing"),bn("NegativePropertyAssertion"),bn("Nothing"),bn("ReflexiveProperty"),bn("Restriction"),bn("SymmetricProperty"),bn("TransitiveProperty"),bn("versionInfo"),bn("allValuesFrom"),bn("annotatedProperty"),bn("annotatedSource"),bn("annotatedTarget"),bn("assertionProperty"),bn("backwardCompatibleWith"),bn("bottomDataProperty"),bn("bottomObjectProperty"),bn("cardinality"),bn("complementOf"),bn("datatypeComplementOf"),bn("deprecated"),bn("differentFrom"),bn("disjointUnionOf"),bn("disjointWith"),bn("distinctMembers"),bn("equivalentClass"),bn("equivalentProperty"),bn("hasKey"),bn("hasSelf"),bn("hasValue"),bn("incompatibleWith"),bn("intersectionOf"),bn("inverseOf"),bn("maxCardinality"),bn("maxQualifiedCardinality"),bn("members"),bn("minCardinality"),bn("minQualifiedCardinality"),bn("onClass"),bn("onDataRange"),bn("onDatatype"),bn("oneOf"),bn("onProperties"),bn("onProperty"),bn("priorVersion"),bn("propertyChainAxiom"),bn("propertyDisjointWith"),bn("qualifiedCardinality"),bn("sameAs"),bn("someValuesFrom"),bn("sourceIndividual"),bn("targetIndividual"),bn("targetValue"),bn("topDataProperty"),bn("topObjectProperty"),bn("unionOf"),bn("withRestrictions");var wn="http://www.w3.org/ns/posix/stat#";function xn(e){return wn+e}xn("atime"),xn("blksize"),xn("blocks"),xn("ctime"),xn("dev"),xn("gid"),xn("ino"),xn("mode"),xn("mtime"),xn("nlink"),xn("rdev"),xn("size"),xn("uid");var kn="http://www.w3.org/ns/prov#";function Sn(e){return kn+e}Sn("Entity"),Sn("Revision"),Sn("Activity"),Sn("InstantaneousEvent"),Sn("ActivityInfluence"),Sn("EntityInfluence"),Sn("Influence"),Sn("Agent"),Sn("AgentInfluence"),Sn("Association"),Sn("Attribution"),Sn("Bundle"),Sn("Collection"),Sn("Communication"),Sn("Delegation"),Sn("Derivation"),Sn("EmptyCollection"),Sn("End"),Sn("Generation"),Sn("Invalidation"),Sn("Location"),Sn("Organization"),Sn("Person"),Sn("Plan"),Sn("PrimarySource"),Sn("Quotation"),Sn("Role"),Sn("SoftwareAgent"),Sn("Start"),Sn("Usage"),Sn("wasRevisionOf"),Sn("specializationOf"),Sn("category"),Sn("component"),Sn("wasDerivedFrom"),Sn("inverse"),Sn("qualifiedForm"),Sn("qualifiedRevision"),Sn("alternateOf"),Sn("constraints"),Sn("definition"),Sn("dm"),Sn("n"),Sn("activity"),Sn("editorsDefinition"),Sn("influencer"),Sn("editorialNote"),Sn("entity"),Sn("unqualifiedForm"),Sn("wasInfluencedBy"),Sn("hadActivity"),Sn("sharesDefinitionWith"),Sn("qualifiedInfluence"),Sn("agent"),Sn("wasAssociatedWith"),Sn("qualifiedAssociation"),Sn("wasAttributedTo"),Sn("qualifiedAttribution"),Sn("wasInformedBy"),Sn("qualifiedCommunication"),Sn("actedOnBehalfOf"),Sn("qualifiedDelegation"),Sn("qualifiedDerivation"),Sn("wasEndedBy"),Sn("qualifiedEnd"),Sn("wasGeneratedBy"),Sn("qualifiedGeneration"),Sn("wasInvalidatedBy"),Sn("qualifiedInvalidation"),Sn("atLocation"),Sn("hadPrimarySource"),Sn("qualifiedPrimarySource"),Sn("wasQuotedFrom"),Sn("qualifiedQuotation"),Sn("hadRole"),Sn("wasStartedBy"),Sn("qualifiedStart"),Sn("used"),Sn("qualifiedUsage"),Sn("aq"),Sn("atTime"),Sn("endedAtTime"),Sn("generatedAtTime"),Sn("invalidatedAtTime"),Sn("startedAtTime"),Sn("generated"),Sn("influenced"),Sn("hadGeneration"),Sn("hadMember"),Sn("hadPlan"),Sn("hadUsage"),Sn("invalidated"),Sn("order"),Sn("todo"),Sn("value");var En="http://purl.org/linked-data/cube#";function An(e){return En+e}An("DataSet"),An("Attachable"),An("Observation"),An("ObservationGroup"),An("Slice"),An("ComponentProperty"),An("DimensionProperty"),An("CodedProperty"),An("MeasureProperty"),An("AttributeProperty"),An("DataStructureDefinition"),An("ComponentSet"),An("ComponentSpecification"),An("SliceKey"),An("HierarchicalCodeList"),An("dataSet"),An("observation"),An("observationGroup"),An("slice"),An("measureType"),An("structure"),An("component"),An("componentProperty"),An("order"),An("componentRequired"),An("componentAttachment"),An("dimension"),An("measure"),An("attribute"),An("measureDimension"),An("sliceStructure"),An("sliceKey"),An("concept"),An("codeList"),An("hierarchyRoot"),An("parentChildProperty");var Tn="http://www.w3.org/1999/02/22-rdf-syntax-ns#";function Cn(e){return Tn+e}Cn("Property"),Cn("HTML"),Cn("langString"),Cn("PlainLiteral"),Cn("Statement"),Cn("Bag"),Cn("Seq"),Cn("Alt"),Cn("List"),Cn("XMLLiteral"),Cn("JSON"),Cn("CompoundLiteral"),Cn("type"),Cn("subject"),Cn("predicate"),Cn("object"),Cn("value"),Cn("nil"),Cn("first"),Cn("rest"),Cn("language"),Cn("direction");var Pn="http://www.w3.org/2000/01/rdf-schema#";function In(e){return Pn+e}In("Resource"),In("Class"),In("Literal"),In("Container"),In("ContainerMembershipProperty"),In("Datatype"),In("seeAlso"),In("isDefinedBy"),In("label"),In("comment"),In("range"),In("domain"),In("subClassOf"),In("subPropertyOf"),In("member");var Rn="http://persistence.uni-leipzig.org/nlp2rdf/ontologies/rlog#";function Ln(e){return Rn+e}Ln("Level"),Ln("Entry"),Ln("StatusCode"),Ln("ALL"),Ln("priority"),Ln("DEBUG"),Ln("ERROR"),Ln("FATAL"),Ln("INFO"),Ln("OFF"),Ln("TRACE"),Ln("WARN"),Ln("className"),Ln("codeId"),Ln("date"),Ln("hasCode"),Ln("level"),Ln("message"),Ln("resource");var Mn="http://schema.org/";function On(e){return Mn+e}On("Organization"),On("Person"),On("ImageObject"),On("URL"),On("MedicalTherapy"),On("EducationalOccupationalCredential"),On("PostalAddress"),On("Product"),On("Event"),On("alternateName"),On("givenName"),On("familyName"),On("additionalName"),On("license"),On("name"),On("text"),On("identifier"),On("description"),On("image"),On("url"),On("startTime"),On("endTime"),On("startDate"),On("endDate"),On("email"),On("primaryPrevention"),On("qualifications"),On("attendee"),On("address"),On("streetAddress"),On("addressLocality"),On("addressRegion"),On("postalCode"),On("addressCountry"),On("accessCode"),On("accountId"),On("serialNumber"),On("productID"),On("brand"),On("model"),On("value"),On("distance"),On("latitude"),On("longitude"),On("dateModified");var Fn="http://www.w3.org/ns/sparql-service-description#";function Dn(e){return Fn+e}Dn("Service"),Dn("Feature"),Dn("EntailmentRegime"),Dn("NamedGraph"),Dn("EntailmentProfile"),Dn("Function"),Dn("Aggregate"),Dn("Language"),Dn("Dataset"),Dn("GraphCollection"),Dn("Graph"),Dn("endpoint"),Dn("feature"),Dn("defaultEntailmentRegime"),Dn("entailmentRegime"),Dn("defaultSupportedEntailmentProfile"),Dn("supportedEntailmentProfile"),Dn("extensionFunction"),Dn("extensionAggregate"),Dn("languageExtension"),Dn("supportedLanguage"),Dn("propertyFeature"),Dn("defaultDataset"),Dn("availableGraphs"),Dn("resultFormat"),Dn("inputFormat"),Dn("defaultGraph"),Dn("namedGraph"),Dn("name"),Dn("graph");var Nn="http://purl.org/linked-data/sdmx/2009/dimension#";function jn(e){return Nn+e}jn("age"),jn("civilStatus"),jn("currency"),jn("educationLev"),jn("freq"),jn("occupation"),jn("refArea"),jn("refPeriod"),jn("sex"),jn("timePeriod");var Bn="https://w3id.org/security#";function Un(e){return Bn+e}Un("EcdsaSecp256k1Signature2019"),Un("EcdsaSecp256k1RecoverySignature2020"),Un("EcdsaSecp256k1VerificationKey2019"),Un("EcdsaSecp256k1RecoveryMethod2020"),Un("RsaSignature2018"),Un("RsaVerificationKey2018"),Un("SchnorrSecp256k1Signature2019"),Un("SchnorrSecp256k1VerificationKey2019"),Un("ServiceEndpointProxyService"),Un("Digest"),Un("EncryptedMessage"),Un("Signature"),Un("LinkedDataSignature2015"),Un("X25519KeyAgreementKey2019"),Un("Ed25519VerificationKey2018"),Un("BbsBlsSignature2020"),Un("BbsBlsSignatureProof2020"),Un("Bls12381G1Key2020"),Un("Bls12381G2Key2020"),Un("Key"),Un("cipherAlgorithm"),Un("cipherData"),Un("digestAlgorithm"),Un("digestValue"),Un("cipherKey"),Un("blockchainAccountId"),Un("ethereumAddress"),Un("expires"),Un("initializationVector"),Un("nonce"),Un("canonicalizationAlgorithm"),Un("owner"),Un("password"),Un("privateKeyPem"),Un("verificationMethod"),Un("publicKey"),Un("assertionMethod"),Un("authenticationMethod"),Un("capabilityDelegationMethod"),Un("capabilityInvocationMethod"),Un("keyAgreementMethod"),Un("publicKeyBase58"),Un("publicKeyJwk"),Un("publicKeyPem"),Un("publicKeyHex"),Un("publicKeyMultibase"),Un("publicKeyService"),Un("revoked"),Un("proof"),Un("jws"),Un("proofPurpose"),Un("challenge"),Un("domain"),Un("expiration"),Un("proofValue"),Un("signature"),Un("signatureValue"),Un("signatureAlgorithm"),Un("service"),Un("serviceEndpoint"),Un("x509CertificateChain"),Un("x509CertificateFingerprint"),Un("allowedAction"),Un("capability"),Un("capabilityAction"),Un("capabilityChain"),Un("caveat"),Un("delegator"),Un("invocationTarget"),Un("invoker");var zn="http://www.w3.org/ns/shex#";function Vn(e){return zn+e}Vn("Annotation"),Vn("EachOf"),Vn("TripleExpression"),Vn("IriStem"),Vn("Stem"),Vn("IriStemRange"),Vn("StemRange"),Vn("Language"),Vn("LanguageStem"),Vn("LanguageStemRange"),Vn("LiteralStem"),Vn("LiteralStemRange"),Vn("NodeConstraint"),Vn("ShapeExpression"),Vn("NodeKind"),Vn("OneOf"),Vn("Schema"),Vn("SemAct"),Vn("Shape"),Vn("ShapeAnd"),Vn("ShapeExternal"),Vn("ShapeNot"),Vn("ShapeOr"),Vn("TripleConstraint"),Vn("Wildcard"),Vn("annotation"),Vn("closed"),Vn("code"),Vn("datatype"),Vn("exclusion"),Vn("expression"),Vn("expressions"),Vn("extra"),Vn("flags"),Vn("fractiondigits"),Vn("numericFacet"),Vn("xsFacet"),Vn("inverse"),Vn("languageTag"),Vn("length"),Vn("stringFacet"),Vn("max"),Vn("maxexclusive"),Vn("maxinclusive"),Vn("maxlength"),Vn("min"),Vn("minexclusive"),Vn("mininclusive"),Vn("minlength"),Vn("name"),Vn("nodeKind"),Vn("object"),Vn("pattern"),Vn("predicate"),Vn("semActs"),Vn("shapeExpr"),Vn("shapeExprs"),Vn("shapes"),Vn("start"),Vn("startActs"),Vn("stem"),Vn("totaldigits"),Vn("valueExpr"),Vn("values");var Zn="http://rdfs.org/sioc/ns#";function Hn(e){return Zn+e}Hn("Community"),Hn("Item"),Hn("Role"),Hn("UserAccount"),Hn("Container"),Hn("Usergroup"),Hn("Space"),Hn("Forum"),Hn("Post"),Hn("Site"),Hn("Thread"),Hn("User"),Hn("about"),Hn("account_of"),Hn("addressed_to"),Hn("administrator_of"),Hn("has_administrator"),Hn("attachment"),Hn("avatar"),Hn("container_of"),Hn("has_container"),Hn("content"),Hn("creator_of"),Hn("has_creator"),Hn("delivered_at"),Hn("discussion_of"),Hn("has_discussion"),Hn("email"),Hn("email_sha1"),Hn("embeds_knowledge"),Hn("feed"),Hn("follows"),Hn("function_of"),Hn("has_function"),Hn("generator"),Hn("has_host"),Hn("host_of"),Hn("has_space"),Hn("space_of"),Hn("has_member"),Hn("member_of"),Hn("has_moderator"),Hn("moderator_of"),Hn("has_modifier"),Hn("modifier_of"),Hn("has_owner"),Hn("owner_of"),Hn("has_parent"),Hn("parent_of"),Hn("has_reply"),Hn("reply_of"),Hn("related_to"),Hn("has_scope"),Hn("scope_of"),Hn("has_subscriber"),Hn("subscriber_of"),Hn("has_usergroup"),Hn("usergroup_of"),Hn("id"),Hn("ip_address"),Hn("last_activity_date"),Hn("last_item_date"),Hn("last_reply_date"),Hn("latest_version"),Hn("likes"),Hn("link"),Hn("links_to"),Hn("mentions"),Hn("name"),Hn("next_by_date"),Hn("previous_by_date"),Hn("next_version"),Hn("previous_version"),Hn("note"),Hn("num_authors"),Hn("num_items"),Hn("num_replies"),Hn("num_threads"),Hn("num_views"),Hn("read_at"),Hn("respond_to"),Hn("shared_by"),Hn("topic"),Hn("title"),Hn("content_encoded"),Hn("created_at"),Hn("description"),Hn("first_name"),Hn("group_of"),Hn("has_group"),Hn("has_part"),Hn("part_of"),Hn("last_name"),Hn("modified_at"),Hn("reference"),Hn("subject");var Wn="http://www.w3.org/2004/02/skos/core#";function Gn(e){return Wn+e}Gn("Concept"),Gn("ConceptScheme"),Gn("Collection"),Gn("OrderedCollection"),Gn("definition"),Gn("note"),Gn("scopeNote"),Gn("example"),Gn("inScheme"),Gn("hasTopConcept"),Gn("topConceptOf"),Gn("prefLabel"),Gn("altLabel"),Gn("hiddenLabel"),Gn("notation"),Gn("changeNote"),Gn("editorialNote"),Gn("historyNote"),Gn("semanticRelation"),Gn("broader"),Gn("broaderTransitive"),Gn("narrower"),Gn("narrowerTransitive"),Gn("related"),Gn("member"),Gn("memberList"),Gn("mappingRelation"),Gn("broadMatch"),Gn("narrowMatch"),Gn("relatedMatch"),Gn("exactMatch"),Gn("closeMatch");var qn="http://www.w3.org/2008/05/skos-xl#";function Kn(e){return qn+e}Kn("Label"),Kn("literalForm"),Kn("prefLabel"),Kn("altLabel"),Kn("hiddenLabel"),Kn("labelRelation");var Jn="http://www.w3.org/ns/ui#";function Xn(e){return Jn+e}Xn("BooleanField"),Xn("NumericField"),Xn("ValueField"),Xn("Form"),Xn("Single"),Xn("Group"),Xn("Choice"),Xn("Classifier"),Xn("ColorField"),Xn("TextField"),Xn("Comment"),Xn("DateField"),Xn("DateTimeField"),Xn("DecimalField"),Xn("EmailField"),Xn("Heading"),Xn("SingleLineTextField"),Xn("Options"),Xn("IntegerField"),Xn("FloatField"),Xn("PhoneField"),Xn("Multiple"),Xn("MultiLineTextField"),Xn("NamedNodeURIField"),Xn("TriStateField"),Xn("parts"),Xn("creationForm"),Xn("from"),Xn("label"),Xn("property"),Xn("for"),Xn("prompt"),Xn("use"),Xn("Color"),Xn("contents"),Xn("size"),Xn("style"),Xn("category"),Xn("dependingOn"),Xn("maxLength"),Xn("part"),Xn("TimeField"),Xn("annotationForm"),Xn("backgroundColor"),Xn("backgroundImage"),Xn("base"),Xn("color"),Xn("defaultError"),Xn("initialProperties"),Xn("maxDateOffset"),Xn("maxDatetimeOffset"),Xn("maxValue"),Xn("minDateOffset"),Xn("minDatetimeOffset"),Xn("minLength"),Xn("minValue"),Xn("name"),Xn("oldValue"),Xn("parentProperty"),Xn("partsClone"),Xn("pattern"),Xn("reference"),Xn("required"),Xn("requiredError"),Xn("seqeunce"),Xn("sortBy"),Xn("sortPriority"),Xn("tableProperties"),Xn("valid"),Xn("validationError"),Xn("value"),Xn("values");var Yn="http://www.w3.org/ns/ui#";function Qn(e){return Yn+e}Qn("BooleanField"),Qn("NumericField"),Qn("ValueField"),Qn("Form"),Qn("Single"),Qn("TextField"),Qn("TriStateField"),Qn("Group"),Qn("Choice"),Qn("Classifier"),Qn("ColorField"),Qn("Comment"),Qn("DateField"),Qn("DateTimeField"),Qn("DecimalField"),Qn("EmailField"),Qn("Heading"),Qn("SingleLineTextField"),Qn("Options"),Qn("IntegerField"),Qn("FloatField"),Qn("PhoneField"),Qn("Multiple"),Qn("MultiLineTextField"),Qn("NamedNodeURIField"),Qn("creationForm"),Qn("parts"),Qn("from"),Qn("label"),Qn("property"),Qn("for"),Qn("prompt"),Qn("use"),Qn("category"),Qn("Color"),Qn("contents"),Qn("size"),Qn("style"),Qn("dependingOn"),Qn("part"),Qn("maxLength"),Qn("TimeField"),Qn("annotationForm"),Qn("backgroundColor"),Qn("backgroundImage"),Qn("base"),Qn("color"),Qn("defaultError"),Qn("initialProperties"),Qn("maxDateOffset"),Qn("maxDatetimeOffset"),Qn("maxValue"),Qn("minDateOffset"),Qn("minDatetimeOffset"),Qn("minLength"),Qn("minValue"),Qn("name"),Qn("oldValue"),Qn("parentProperty"),Qn("partsClone"),Qn("pattern"),Qn("reference"),Qn("required"),Qn("requiredError"),Qn("seqeunce"),Qn("sortBy"),Qn("sortPriority"),Qn("tableProperties"),Qn("valid"),Qn("validationError"),Qn("value"),Qn("values");var $n="http://purl.org/vocab/vann/";function er(e){return $n+e}er("preferredNamespacePrefix"),er("preferredNamespaceUri"),er("changes"),er("example"),er("termGroup"),er("usageNote");var tr="http://www.w3.org/2006/vcard/ns#";function nr(e){return tr+e}nr("Acquaintance"),nr("RelatedType"),nr("Agent"),nr("BBS"),nr("TelephoneType"),nr("Car"),nr("Cell"),nr("Child"),nr("Colleague"),nr("Contact"),nr("Coresident"),nr("Coworker"),nr("Crush"),nr("Date"),nr("Dom"),nr("Type"),nr("Emergency"),nr("Fax"),nr("Female"),nr("Gender"),nr("Friend"),nr("Home"),nr("ISDN"),nr("Internet"),nr("Intl"),nr("Kin"),nr("Label"),nr("Male"),nr("Me"),nr("Met"),nr("Modem"),nr("Msg"),nr("Muse"),nr("Neighbor"),nr("None"),nr("Other"),nr("PCS"),nr("Pager"),nr("Parcel"),nr("Parent"),nr("Postal"),nr("Pref"),nr("Sibling"),nr("Spouse"),nr("Sweetheart"),nr("Tel"),nr("Text"),nr("TextPhone"),nr("Unknown"),nr("Video"),nr("Voice"),nr("Work"),nr("X400"),nr("Address"),nr("Email"),nr("Group"),nr("Kind"),nr("Individual"),nr("Location"),nr("Organization"),nr("VCard"),nr("Name"),nr("adr"),nr("hasAddress"),nr("agent"),nr("anniversary"),nr("bday"),nr("category"),nr("class"),nr("email"),nr("hasEmail"),nr("extended-address"),nr("geo"),nr("hasGeo"),nr("hasAdditionalName"),nr("hasCalendarBusy"),nr("hasCalendarLink"),nr("hasCalendarRequest"),nr("hasCategory"),nr("hasCountryName"),nr("hasFN"),nr("hasFamilyName"),nr("hasGender"),nr("hasGivenName"),nr("hasHonorificPrefix"),nr("hasHonorificSuffix"),nr("hasInstantMessage"),nr("hasLanguage"),nr("hasLocality"),nr("hasNickname"),nr("nickname"),nr("hasNote"),nr("hasOrganizationName"),nr("hasOrganizationUnit"),nr("hasPostalCode"),nr("hasRegion"),nr("hasRelated"),nr("hasRole"),nr("hasSource"),nr("hasStreetAddress"),nr("hasTitle"),nr("hasUID"),nr("hasValue"),nr("label"),nr("language"),nr("latitude"),nr("longitude"),nr("mailer"),nr("note"),nr("org"),nr("organization-name"),nr("organization-unit"),nr("post-office-box"),nr("prodid"),nr("rev"),nr("role"),nr("sort-string"),nr("title"),nr("tz"),nr("value"),nr("country-name"),nr("locality"),nr("postal-code"),nr("region"),nr("street-address"),nr("fn"),nr("hasMember"),nr("additional-name"),nr("family-name"),nr("given-name"),nr("honorific-prefix"),nr("honorific-suffix"),nr("hasKey"),nr("key"),nr("hasLogo"),nr("logo"),nr("hasName"),nr("n"),nr("hasPhoto"),nr("photo"),nr("hasSound"),nr("sound"),nr("hasTelephone"),nr("tel"),nr("hasURL"),nr("url");var rr="http://rdfs.org/ns/void#";function ir(e){return rr+e}ir("Dataset"),ir("Linkset"),ir("TechnicalFeature"),ir("DatasetDescription"),ir("feature"),ir("subset"),ir("target"),ir("sparqlEndpoint"),ir("linkPredicate"),ir("exampleResource"),ir("vocabulary"),ir("subjectsTarget"),ir("objectsTarget"),ir("dataDump"),ir("uriLookupEndpoint"),ir("uriRegexPattern"),ir("class"),ir("classes"),ir("classPartition"),ir("distinctObjects"),ir("distinctSubjects"),ir("documents"),ir("entities"),ir("inDataset"),ir("openSearchDescription"),ir("properties"),ir("property"),ir("propertyPartition"),ir("rootResource"),ir("triples"),ir("uriSpace");var ar="http://www.w3.org/2003/06/sw-vocab-status/ns#";function or(e){return ar+e}or("term_status"),or("moreinfo"),or("userdocs");var sr="http://www.w3.org/2001/XMLSchema#";function ur(e){return sr+e}ur("changes"),ur("string"),ur("boolean"),ur("float"),ur("double"),ur("decimal"),ur("dateTime"),ur("duration"),ur("hexBinary"),ur("base64Binary"),ur("anyURI"),ur("ID"),ur("IDREF"),ur("ENTITY"),ur("NOTATION"),ur("normalizedString"),ur("token"),ur("language"),ur("IDREFS"),ur("ENTITIES"),ur("NMTOKEN"),ur("NMTOKENS"),ur("Name"),ur("QName"),ur("NCName"),ur("integer"),ur("nonNegativeInteger"),ur("positiveInteger"),ur("nonPositiveInteger"),ur("negativeInteger"),ur("byte"),ur("int"),ur("long"),ur("short"),ur("unsignedByte"),ur("unsignedInt"),ur("unsignedLong"),ur("unsignedShort"),ur("date"),ur("time"),ur("gYearMonth"),ur("gYear"),ur("gMonthDay"),ur("gDay"),ur("gMonth");function lr(){return(lr=(0,E.Z)((0,S.Z)().mark((function e(t,n){var r,i,a,o,s,u,l,c,d,f,h,p,v;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.info.webId){e.next=2;break}return e.abrupt("return",null);case 2:return r="",""!==n?(o=null===(i=t.info.webId)||void 0===i?void 0:i.split("/").slice(0,2).join("/"),s=null===(a=t.info.webId)||void 0===a?void 0:a.split("/").slice(2,3).join().split(".").slice(1,3).join("."),r=o.concat("/",n,".",s,"/public","/markers/"),console.log(r)):(c=null===(u=t.info.webId)||void 0===u?void 0:u.split("/").slice(0,3).join("/"),console.log(n.concat("."+(null===(l=t.info.webId)||void 0===l?void 0:l.split("/").slice(2,3).join("/").split(".").slice(1,3).join(".").concat("/public","/markers/")))),r=c.concat("/public","/markers/"),console.log(r)),d=[],e.next=7,Pt(t,r);case 7:if(null==(f=e.sent)){e.next=19;break}p=0;case 10:if(!(p<f.length)){e.next=19;break}return h=f[p],e.next=14,h.text();case 14:v=e.sent,d.push(JSON.parse(v));case 16:p++,e.next=10;break;case 19:return e.abrupt("return",d);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t,n){return dr.apply(this,arguments)}function dr(){return(dr=(0,E.Z)((0,S.Z)().mark((function e(t,n,r){var i,a,o,s,u,l,c,d,f,h,p,v;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.info.webId){e.next=2;break}return e.abrupt("return",null);case 2:return i="",""!==r?(s=null===(a=t.info.webId)||void 0===a?void 0:a.split("/").slice(0,2).join("/"),u=null===(o=t.info.webId)||void 0===o?void 0:o.split("/").slice(2,3).join().split(".").slice(1,3).join("."),i=s.concat("/",r,".",u,"/public","/comentarios","/"+n+"/"),console.log(i)):(c=null===(l=t.info.webId)||void 0===l?void 0:l.split("/").slice(0,3).join("/"),i=c.concat("/public","/comentarios","/"+n+"/")),d=[],e.next=7,Pt(t,i);case 7:if(null==(f=e.sent)){e.next=19;break}p=0;case 10:if(!(p<f.length)){e.next=19;break}return h=f[p],e.next=14,h.text();case 14:v=e.sent,d.push(JSON.parse(v));case 16:p++,e.next=10;break;case 19:return e.abrupt("return",d);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fr(e,t){return hr.apply(this,arguments)}function hr(){return(hr=(0,E.Z)((0,S.Z)().mark((function e(t,n){var r,i,a,o,s,u;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.session,i=r.info.webId){e.next=4;break}throw new Error("Nombre de usuario no especificado");case 4:return e.next=6,lt(i);case 6:if(a=e.sent){e.next=9;break}throw new Error("Perfil no encontrado");case 9:if(o=Ye(a,i)){e.next=12;break}throw new Error("Cosa de usuario no encontrada");case 12:return s=Lt(o,tn.knows,n),u=Qe(a,s),e.next=16,vt(i,u,{fetch:r.fetch});case 16:return e.abrupt("return",Ge(s,tn.knows));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e){return vr.apply(this,arguments)}function vr(){return vr=(0,E.Z)((0,S.Z)().mark((function e(t){var n;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,Promise.all(t.map(function(){var e=(0,E.Z)((0,S.Z)().mark((function e(t){var r,i,a,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(t);case 2:if(i=e.sent,a=Ye(i,t)){e.next=6;break}throw new Error("No se pudo encontrar la cosa del amigo en ".concat(t));case 6:o=null!==(r=Ke(a,tn.name))&&void 0!==r?r:t,n.push(o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),vr.apply(this,arguments)}function mr(e,t){return gr.apply(this,arguments)}function gr(){return(gr=(0,E.Z)((0,S.Z)().mark((function e(t,n){var r,i,a,o,s,u,l,c,d,f,h,p,v;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.session,i=r.info.webId){e.next=4;break}throw new Error("Nombre de usuario no especificado");case 4:return e.next=6,lt(i);case 6:if(a=e.sent){e.next=9;break}throw new Error("Perfil no encontrado");case 9:if(o=Ye(a,i)){e.next=12;break}throw new Error("Perfil no encontrado");case 12:s=Ge(o,tn.knows),l=(0,k.Z)(s),e.prev=14,l.s();case 16:if((c=l.n()).done){e.next=32;break}return d=c.value,e.next=20,lt(d);case 20:if(f=e.sent){e.next=23;break}throw new Error("No se pudo cargar el perfil del amigo en ".concat(d));case 23:if(h=Ye(f,d)){e.next=26;break}throw new Error("No se pudo encontrar la cosa del amigo en ".concat(d));case 26:if(Ke(h,tn.name)!==n){e.next=30;break}return u=d,e.abrupt("break",32);case 30:e.next=16;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(14),l.e(e.t0);case 37:return e.prev=37,l.f(),e.finish(37);case 40:if(u){e.next=42;break}throw new Error("No se pudo encontrar el amigo con el nombre ".concat(n));case 42:return p=Ot(o,tn.knows,u),v=Qe(a,p),e.next=46,vt(i,v,{fetch:r.fetch});case 46:return e.abrupt("return",Ge(p,tn.knows));case 47:case"end":return e.stop()}}),e,null,[[14,34,37,40]])})))).apply(this,arguments)}function yr(e,t){return _r.apply(this,arguments)}function _r(){return(_r=(0,E.Z)((0,S.Z)().mark((function e(t,n){var r,i,a,o,s,u,l,c,d,f,h;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.session,i=r.info.webId){e.next=4;break}throw new Error("Nombre de usuario no especificado");case 4:return e.next=6,lt(i);case 6:if(a=e.sent){e.next=9;break}throw new Error("Perfil no encontrado");case 9:if(o=Ye(a,i)){e.next=12;break}throw new Error("Perfil no encontrado");case 12:s=Ge(o,tn.knows),u="",l=(0,k.Z)(s),e.prev=15,l.s();case 17:if((c=l.n()).done){e.next=33;break}return d=c.value,e.next=21,lt(d);case 21:if(f=e.sent){e.next=24;break}throw new Error("No se pudo cargar el perfil del amigo en ".concat(d));case 24:if(h=Ye(f,d)){e.next=27;break}throw new Error("No se pudo encontrar la cosa del amigo en ".concat(d));case 27:if(Ke(h,tn.name)!==n){e.next=31;break}return u=d.split("/").slice(2,3).join().split(".").slice(0,1).join(),e.abrupt("break",33);case 31:e.next=17;break;case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(15),l.e(e.t0);case 38:return e.prev=38,l.f(),e.finish(38);case 41:return e.abrupt("return",u);case 42:case"end":return e.stop()}}),e,null,[[15,35,38,41]])})))).apply(this,arguments)}var br=n.p+"static/media/bar.496899a504eb680aaf8b.png",wr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAhpklEQVR42u2dCXRc1XmA/9k12izLsoQ3sNlM7WCzL8FgjoNJE5LaSRPak4RCW5omIRRDlrKlOKnL0pBTaMCYFJ8QwBxDYhuClxYSE1piwwGMgRBDjNktW7b2XTPSTN8v6Vqj0ZuZ+96797173/u/cwYZad4yI91v7v3v/98bAiKQrHryC/85ua78m22HekO93akHbr1syze8vifCfUJe3wDhLv+6afmVk6Yk/6O8Ml6J/9+8v3v4+6nUYE9f9+D3b7t8y2qv75FwDxJAQLht8xcXJCviT1dOSjTkfp8JgDHQP9icTg19etVXN+/y+p4J+ZAAfM4Duy6f3dna93h1bfJMs5/nC4DR35vePXVG1V9etWjdu16/BkIeJACfYjT8ms62/rvKq+KXRaPhcKHnFRIAkslkM+mBocerJievum7p+lavXxMhHhKAD7nr2b/+brIidlskGo6Wem4xAYyRHUoPZFb+4EtPrPL6tRFiIQH4iHue/8pXjUZ/XyweqeI9hk8AI2Sz2Z5QKHT19Z/f8HOvXyshBhKADzC6+xf296XXlCVjc60ea0UAjHR6aF/NlPJvXL340d94/doJZ5AANAYDfH096TVGd//Tds9hRwCMwXTmd5Pry/+eAoX6QgLQEAzwGZ/4K41P/GucnsuJAJCQ8Rc0OJi5P1mRuJEChfpBAtCMNS9edns4HFoRjoQSIs7nVACMbCabiiWiq7/7549f6+kbRFiCBKAJxqf+FcYn7Z3RaHiKyPOKEgAjk822lVfEr1/xqfU/c/UNImxBAlAcDPClB4buiiUiC2WcX7QAGJnB7B+TVfEV1160/hmpbxDhCBKAomCAz+hWPxIKh86TeR1ZAmAYPZaXstnQV7732cffkXohwhYkAMXAAJ/x5S7jcbkb15MtAAQDhdF4ZH0oFKaMQsUgASjCaMNfYXzqf8/41C9367puCOAI2Wxfojx+d1Vt4o4rT/tFu3sXJgpBAlAADPBlMtlbw+HQNLev7aoARskCHEqWx35AgULvIQF4CAb4sll4yOgiz/LqHrwQACMcDTfGYpErKFDoHSQADzAa/ikwMs5f7PW9eCkARjQW2RmNhf/J6BG87PW9BA0SgItgZN/4shJcCvDxoIIAGLFEZH1ZeewmSi12DxKAC7AAn/G4xet7yUclASA4YxCJRu6oqU/eToFC+ZAAJGM0fmz4PzQe1V7fixmqCYARDoe6Y4noqmsvWn+H1/fiZ0gAkjAa/nIYGecf4/W9FENVATAi0fD+SCT8nesufuwxr+/Fj5AABIORfRgZ53se4ONBdQEwMFCYSEb/hdYgEAsJQBCjAT78xF/m9b1YQRcBMOJl0W2GCL5NgUIxkAAcMhrgW2k8HNfme4FuAkBGU4vXTKpL3kCBQmeQAGySE9nHxySv78cuOgqAEQ6HuozewD0VNYl/JxHYgwRgA0zdhZFPfaUDfDzoLAAGBgpj8ciPKLXYOiQAC4wG+HCcL6U23wv8IABGNBb+YyIZu4YChfyQADgYDfA9CJpE9q3gJwEw4mXRHcbQ4DIKFJaGBFAEFVN3ReNHASBsDYLRQOH7Xt+PqpAATPBLgI8HvwqAgYHCWCJ6L61BYA4JII/RAB+O833d8Bl+FwAjGgt3RWOR71KgcDwkgFF0Sd0VTVAEwIjFIx+XVcRWXLVo3Qav70UFAi8A3VJ3RRM0ATAwUFheFb/5G+c8/KzX9+IlgRVAEAJ8PARVAAgFCgMoAJVr870gyAJgRCIhQwTR24MYKAyUAIzGvxICENm3AglgDAwUJpKxn169+NGbvL4XtwiEAPyUuisaEsBEMLW4ojp+y7fOW7fW63uRja8FEPQAHw8kgMLgGgSVNYmb/Bwo9KUA/Jy6KxoSQHEwUIgzBsbDl6nFvhKA29tq+QESAB8YKDQk8GhFTeIqPwUKfSGAIKXuioYEYI1INNRVVh7/abIq9mM/iEB7AVCAzxkkAHv4JVCorQBGA3wPAjV8R5AAnBEvi3xcXpX4G10DhdoJQKVttfwACcA5LFBYVhG7+pvnPrLL6/uxdO9e3wAvlLorBxKAOHIChTfpklqsvAAodVcuJADxoAjKKuK36hAoVFoAo9tqrYSAR/bnr2+GNy6dgotbCD+3VQF8ZsC9nbwPpqrgpeRZEI2GXbumSDC1uKwy/qNvL1p3p9f3UgglBRDU2nwzkm2DsOQnB2HrVyZBdl6V8PNbFcCi1AtQle1y5bXv6pwOr/fNgqkzq6TIzy0wUJhIqrkGgVLvKqXuTuSoPX1w+roW2HZBHPovqMUxptDzWxXA2emXoTbT5sprRwHs6piOJbvQcLSSe6tywwKFyUq11iBQQgC6bqvlBidu74QTjMdLJ0fhjXPKoeEYsQ1BBwEg5VVxmNxQ4cp1ZYIiMCSwpbw6/m0VAoWeCkD3bbWsEOkdgnRZ2HJX9gzj07/B6AW8flIUnj89BlOmV0LlpATXscf9qhn2famu6HN0EQBSUZOAmrpyV64tm+FAYWX83mRl7GYvA4WeCCBoqbux/gyc/bNDsO1rNVBVW2bp2HPWHoYp7w1AY30YnliaGBbIjBMmc4nkkps/hv+7rBY65xZuNFYFsGDwDzBj6IAr79uWQ3PhwMD4uAf2ArA34BcwUGj0CO5OlEd/4oUIXBdAEFN3WSO+/4oKmHn8ZEvHYiNGmAAQlEgtR3cYj+2uDMGOFdOGex9mWBXACUP74PhBd4rizASA1E6rgGSFfySAYKCwrDy20u3UYtcE4MdttXiYs6Mb5m0dEfvqryYtdeERJoBULAQPXDrWe5g2Z1LJgCA79o2zk/Dh56eYPkdHAWDvp25GJcQSYgOiXoPxgUR57E1DBFe7FSiULoAg1+Zj13/JnQchanxFUACxRASmH1vDdTz2GrD3wMDjGcYfScmAYK48fnNdA2SrJjYYHQWAoASmHl2tbY5AMVAExu/39xU1ia/JDhRKEwCl7o5F8BmsAeOUVllFrOTx+QJY++UyGIiP/cpK9SaYAJBXT0tA4xenTniOVQHMHvoA/mzwT668fw/tPxVSmUjBn+P0oO45AsXAQGGiIrYOly+XJQLh71zQAnyFyP/0R5gAMIiFf7ilyB0+IE9elID9DWOfeKUCgrkCwF7A5q/XQmJactxzrAqgNtMKZ6dfceU9fOCjM0o+J5GMGsMB8QlSKsEWK5WRWixUAEHbVqsYM3f1wMKN46fLcrvwM46fjL/YoufI70HkCwCpMHoAdUZPwIxcASDPfjIOnUvrxl1XdwEgfskRKIUhu07jcZ3IQKEQAVDq7kTOv6cJqg+mx30vVwDFGi5j4YZWmPlq75H/335uHN46dmKXuNCQIl8AzZPD8OsvVY6LHfhBAAjOjFTXJrmfrzPJythHxu/7mn886+FNTs8lSgBZr98UlWD5+/nkCoBnPp9NHzIwG/ClBRMbeqHAYr4AkMc/m4DMSVVH8hFUFUBrOgkbD863dIzfcgSKgYHCf/7cBsftlwQggfyxOyNXAMikuiTUTC2cpMMrAATzAvKTjMwEgBmFO86MwzRDGDgUsFMO7EZF4MGBKth8aK7l43B60BgvS78/Fbj+8yQAJTHr/iP5AogYDbBYYlB+A2bpwGaY9SjMBNBVEYKHl5cdmUb0mwD8miNgBglAQTD6f/GqRtOf5QsAKTaVl9+Ac7MBzciPK5gJAMFhAMYDsNcw0Ddo+TWqLAAEJdAwe5JvpwcZJAAFYeW7ZpgJoFAvwCyOUEoASG5AsJAAfm/0Il4zehPYQGJlUcvJNG4I4M3uetjZdrTt4/2eI4CQABRk3pZ2mLPTvFttJgDELIqfnwSE8AggNyBYSAC55+nrSlmeR78w9Twks31S38f8SkA7+D1HgASgIIXG/0ghAZil9ZoJoNg5cmHBxUICQFhWYfuhXsvRczdKgkUIAPFzjgAJQEGKNbpijTc/MSg/CYjnHAzs9mKUf9kPGws+hyUVoQCsjpl1EgCCawjgWgJ+gwSgGIU+tRnFGm9+AM+JABD85LtiTUfBn7MpRRQAkqyMQe1RlVzndkMAzzQfDx/08RVN8eDHHAESgGIUarSMUo131tzaI5/ChWIJLILPw7fWFR6nszgAEwDCW2d/Wno3NGQOl3yeE4pVAtqlflaVr6YHSQCKkZ+6m08pAeQmBuUnATHM6gEKUUwA7H5yBcA7FHCjJFiGAPyWI0ACUIxiAUCklADwDxR7AYgbAsDexDvp/nHf4xkK6CoABKdd62dV+2J6kASgGMUCgAjP+J0lBhWSCS4P/t6sSMnzIKUEgMVFL1ROlEypoYAbAlh/4GToHpQTuPNLjgAJQCEKFQDlwiMAlhhUSCbF6gHyKSUATC3ePGuiZEoNBdwQgJVKQDtYCXqqCglAIUrNACC8EXz8dPryHYdMfyZSABgIfHDhkOnPijUQNyoCZQsA0T1HgASgEKVmABBeAdQNReDS9ebZhCIFgKsE3XlhpuDPCw0F/CIAROccARKAQogUwIymDCz7zYDpz94+NgK/PZdvPruUABAUAIrAjEJDAdkC6B6Kw/rGBdLOn4+uOQIkAIUoFLXPRYQAeOoBGDwCWHvqEDTVFZ5VMNuNR7YAnFQC2kXHHAESgEKIFMBJ7w7Bkp0p05+JFsBjJw3CvhKzCvmLbJRn+2Bx6nmh718uXghAxxwBEoBClJoCRHgFcObraTjzDfM6fdECwFkAnA0ohtncucySYC8EgOg2PUgCUAi3BJC/Q1AxeASwY1IKfndW6aBi/lBApgD29k6B51rmSDt/MXSSAAlAEaoPpOH8e5tKPo9XAIteScOCtwYdn4dHAC8nB+DpRXwBsNyhgEwBiKwEtIMu04MkAEXgyQFAeBvu8mcGYPqhjOPz8AhgX7ofHvss35AidyiwdOBZiIL15cR48FoAiA4SIAEoQrFlwHJRUQAf9vbBI8v4tyxnQwGZJcEqCABRfXqQBKAIPDkACG/DvXTrANS1FRYAb0kwrwDwfIVyAczAocAF0dekCeCF9lnwh64GKee2isoSIAEogmgBlGq4vBWBvAJ45rx40VyAfHAosGzan6A2K3SbuiPIqgS0g8rTgyQARSi2EGgufhEA8hfT90J9pMPSMbyoJABEVQmQABSBJwkIUVUAr5wcgz3H8pUYM06b1AinVTdaOoYX1QSAqDg9SAJQBJECKJYGzGDr+peCVwCvz42WTAbKR6YANjXNh5aUeht9qiYBEoAiuC0A3opAXQXgViWgHVSaHiQBKMKSOw9Asn2o5PNUFcC7R0dgx6nWNtQMqgAQswIpLyABKAJPGjDCI4CFbw3Cea+kiz5HtAAOTQlzZwMyjkm2w9K6d5y8bQVRXQCICtODJABFECmAYnUADN41AWQKYFqiCy6pf9vJ22ZKKhOBh/afKvy8MuBdRl0WJABFcFsAvBWBOgrAq0pAO3g9PUgCUASRAihVCISQANQBJTD16GrLOyyLgASgCCIFUKoOABEtAMRKPQAyJd4HX2h40/Z7VgjdBIB4NT1IAlAA3kpARJQAsA7gcY4KPpkCQK6c9bKt96wYuB8g7guoGygB3ObdTUgACuCFAHjPpaMAVKkEtIPbOQIkAAUQLQCeRivyXCQAsbiZI0ACUAASgFh0FwDiVo4ACUABgiyAz9W/DUcluiwfVww/CADJX0lZBiQABRApgKqeLFz2RD/XuXgqAnUUgIqVgHZwI0eABKAAIgXAUwfAIAGoT6lNVp1CAlCAWH8GLl7FVxSjqgDSsRD3wqC5kABKIzNHgASgCLyJQKUa7ZyPhuAz/5viOte2C+LwXpEdfXhlYjcTEDl38ocwv/KQ5eOK4TcBIIlk1BgOiH9NJABF4F0PoNRCHp/amYK575YuK0ZKFQTxVBUiKIC3jovCy5+wPlbFakCsChSJDpWAdpCRI0ACUATeNQFx5d2HlydgID7xbcdVgHE1YCsUWh04kcJg4gDE06V/LSiAnafFSu4PaIaMIYBfBYBU1ZZBda24lY5IAIrAuy8Agg0WewK5QwHs+n9qZ5qrweaCQtm2OD7uXNj1x41FcUaBBxTAposT0JO0/qcgYwjgZwEgInMESACKYCUQyOiqCA0/sKHyNlYZ53otNgBbLrT3ByljVSC/CwARlSNAAlCIhRtaYearvV7fhmU2HTdoeUVghmgB6FgJaAdROQIkAIWwkg+gEncvytjq/iMkAPuIyBEgASjGJ+86AJOb+aL4KoAzCRuOs7/BJwnAGU5zBEgAilG1pwcuWCdnvzwZPLy8DD7q4as9MIME4JxkZQxqj6q0dSwJQEFOX30QjmqUs222SNjKwu2H7MctRAvgze562Nl2tNdvjevYzREgAShI/HAaFq8+ZHlKz01wxgBzCDAfgQSgBriGAK4lYAUSgKLUPtcG5z7T4/VtFCQ3gUglASB+KQe2g9UcARKAomQyWZj7UBOc+I56Q4Ht58bhrZxpP9UEgOztnQLPtczx5P3xmvpZVdzTgyQAhentSsGCX7Zw5/a7gVn9gIoCQIIqASs5AiQAxWnb2wHn/bYX5nzsvQQKFQ+pKgAkqBKIxMJGT6C65PQgCUBxUv2DcOC9DktVfjIotpegygJAgioBnhwBEoAGtDb1QFdrP3d5rkiwWOi358aKrhugugCQ51pnw96eOunXUY1SOQIkAA3AgOD+vW3DX7Hkd8nO9PBX2bw3MwLbjcZvVnqciw4CwA1DNzbNg+5B66sW6U6xHAESgCZ0dwxAS+PYegEnGcMB3ATUaRWgGTjHj5H+UsuFMXQQABLELEFGoRwBEoBGNL7bDumB8XEAFMGil62vA2CG1YbP0EUASFCHAohZjgAJQCP6e9LQ9GHnhO/zbgVWCt79AvPRSQDdQ3FY37jAteuphNn0IAlAM5qNYUBPx/hlv0QJAOHZLCQfnQSABLkXkC8BEoBm5AYEGSQAawS5F4DkTg+SADSk/XAvdDSPleDybgXGQxAEgGxqmg8tKXGLa+oGk8CNyzaSAHTk43faYCg98qlPArBOkKsGGRgQvOPK/yYB6EhuQFCkAHCBD5wNsIKOAgj6MIDx02u3kwB0pemDTujvTQsVAM92YfnoKABk/YGTA5kYlAsJQGMGjSFA52ut3LsB8xAkAQR5NoBBAtCcxKsdcNEGcTvrBEkAFAcgAWjP5H398MmfNws7X5AEEOTUYAYJQHNE7yVQavNRM0gA+kIC0BwrewryUKzuvxC6CgAJwjZixSABaM6J2zvhhO2dzk80CgkgWJAANIcE4AwSAAlAa0gAziABkAC0RrQAGuvD8MRSa8kxJAB9IQFozhnrWqBhj7hMQBJAsCABaA5OAeJUoCjcFsAxyXZYWveOtPenFCQAEoDW6C6AaYkuuKT+bWnvTzGoIIgEoD0kAPtQIhAJQHuW3HkAku1iNwyxuiYACUBfSACac8nNHws/JwkgOJAANIcEYB8SAAlAe0gA9qFyYBKA9sgQwNovl5XcDiwXXQWwq3M67OqY7sm1VYEEoDGiS4EZVtcEIAHoCwlAY0gAzqAlwUgAWkMCcMaWQ3PhwECVJ9dWBRKAxpAAnEECIAFozZwd3TBva7vw8+IOwW8dG+F+vq4CeGj/qZDK8L9OP0IC0BjRpcAMq2sC6CqAoBcCISQAjSEB2Ac/+bEHEHRIABpDArAPZQGOQALQmHlb2mHOzm7h5w2CAD7oq4Fnmo93/bqqQQLQGNGlwIz3ZkZg2+I49/N1FAAlAY1AAtAYWQKwuiaAjgJ4oX0W/KGrwfXrqgYJQGNIAPahHIARSAAaQwKwD20NPgIJQGNkVAIiQRAA5QCMQALQGFkCQKysCaCbAGgKcAwSgMaQAOxBU4BjkAA0hgRgD5oCHIMEoCnVB9Jw/r1N0s7vZwHQDMAYJABNkVUKzLCyLJhuAqAZgDFIAJoiWwBW1gTQSQBUBDQeEoCmkADsQTMA4yEBaMpRe/rg9HUt0s7vVwFQAHA8JABNkVUKzPCrAHD6D6cBiRFIAJoiWwBWlgXTSQC0DNh4SACaIlsAVtYE0EUArekkbDw435Vr6QIJQFNIANahrcAmQgLQFFmVgAy3BIBcOetlaa8jFxr/T4QEoCkkAOvQ+H8iJABNkS0AK8uC6SAAGv+bQwLQFNkCsLImgA4CoPl/c0gAmrLkzgOQbB+Sdn6/CWBT03xoSfEXOAUFEoCmyCwFRvwkgO6hOKxvXCD1GrpCAtAUEgA/e3unwHMtc6ReQ1eUEcCPNi7LTp9NUzS8yBYAwrsmgOoCoPp/c3p7UrD25ufVEMBf3XBmtqqmDOaechRMnlru9XujNLH+DFy8qlH6dfwgAOr+TyQ1MAQth7uhvzcNm+97XR0BsH9PnloBnzhrOpSV829PFSRklwIz/CAAyv4bY2goA81NPdDbPTZ7pKQAGDgkOG7+VBJBHiQAfmj1n5GG39HWDx2tE39PSgsAicYicMyJtXD0CVOMf/OVp/odtwTAuyyYqgII+uIfmWwWejr7obWlDzKDGdPnKC8ABopg7ikNQIFC9wTAuyaAqgJ4rnU27O2pk3Ju1cEA3+Gm7oINn6GNABjJithwoHDq9OBGdefs6IZ5W9ulX0dnAQQ1+NffPwgtRsNPDQxyPV87ATAwUIjxgSDOGMguBWboLICg7f6Lkf22lt5xAT4etBUAI4iBQhJAcbDib/2BBYGo/CsW4ONBJQFcYXy5y3hMsnM8SiAogUK3BMC7LJhqAghC4Q8L8OG0nk26IBu+cfOa3fc4vRchAkAMCWCEb6XxuMbO8WzG4Nh5U0XdkpIs3NAKM1911uh44F0TQCUBBGHs39XRVzSyX4oQhP4rGo9cv+nuXa0i7keYABiGCGYbXx40HovtHI+BQpSAX2cMZJcCM3QUgJ8j/xjZb2vu5Q7w5RMKhV6ATOjyp9bs/pPI+xIuAIYhggthRATH2Dner4FCEoA5fp33txvgYxgNf392KPT1zffv3irj/qQJgGGIYAWMDA1sxQf8llp8zgOGAN4nAeSCAb+NTfN8lfVnlrprka5wKHzHm1vab9v3wfv2xgscSBcAMhofwCDh5XbPgUMCzCHQPVB41s8OwdQPU9Kvw7ssmAoC8NO0Hwb42o0xvt3IPmJ86v9yaACu2rr2NekZY64IgGGI4BQYEYGt+IAfUovdKAVGeNcE8FoAuNIvrvirOzypu6UJvRjKhlYY4/wX3LpvVwXAMESwHEZEYCs+oHNqMQlgDIz642Kfus/586buFmG/0d3//q9X737U7Xv3RAAMQwQrjS8YI7AVH8AZg/lnztAqUEgCGAEb/ZbDJ2m91h8G+A4f7LId2c8a4/xIJHzfm0+13yBznF8MTwWAjE4brgQH8QEMFGKPABclUR0SgP6NP50egtbD9iP7w2RDv4pEIzc8ec+ud7x8LZ4LgDE6bbgSbMYHENVTi6sPpOH8e5tcux7PmgBuC0Dnxu80dXeYLLxoNPxbnrzn1f/x+vUgygiAMZpWvBJsxgcQVVOL3SoFZqgmANzg47nWY7Vr/AJSd5H9IQjf9tR9u+/1+vXkopwAkNFpQ4wN3GL3HBgoHBFBrdcv5whBFgAu7/VKxwztAn49XQPQfLjHSYAPQqHwj40Po9tFpe+KREkBMEbjAzhbsMzuOVRKLa7Z2wfn/aLFteupIACM9OOy3rqt7Os0dXeE0NOhbOhq0em7IlFaAIzR+ACKYKHdc6iQWtywsxPO2CK/EpDBsyyYLAFgd/+Nrgbtcvudpu6OENoTCoW+89Tq3du8fj0l79TrG7CC07RipH5G1XBGoReBwtlbW2H+DvmVgAyeNQFECgDz+RuNxwd9k7Ub52OADxt+V3u/k9MMp+/+evXuf/P69fCilQAQp2XHDIwNHDe/3tVAYap/EJo+6IRMRp2NlJwKYFqiC1rS5dqN7RkY4Ots6ze6+44CfMNlukMpuMmN9F2RaCcAhtOyY8SL1GKUQHNjN6QH5G0OagWnAtAVMam7I2W6gwPwd9vWvrbH69dk6/69vgGnOC07RtwOFGIP4OD7HUpIIIgCEBHgk12m6xbaC4DhNK0YcXN7M1UkECQB5G6rZRcV0ndF4hsBICLKjhG3UotVkEAQBCAkdRfcLdN1C18JgOG07JjhRmqx1xLwswCEpO4O436Zrlv4UgAMp2XHiBuBQi8l4EcBiArwgYdlum7hawEgOWnFjuIDstcg8EoCfhOAgNr84XG+0fDXqJq+KxLfC4AhouwYkbm9mRcS8IsArG6rVRBFynTdIjACYIhIK0ZkpRa7LQHdBSAmdRcJ7YlEwteqUqbrFoETAMPpbkYMGYFClEBLYzf0dslfPFRXAYgL8InbZUdHAisARETZMUNGajFmDPZ0yF1CXDcBiErdHSYb+kksEbnV7+P8YgRaAAwRZceIjO3NZEtAJwE43VZrDPXLdN2CBJCDiLRiRHRqsUwJ6CAAMbX5I+m7xn//QYcyXbcgAZggouwYERkolCUBlQUgLsDnzi47OkICKICosmNE1PZmMiSgogAEbKt1BF3LdN2CBFACEWXHDBHbm4mWgEoCELGt1hihF42G/7e6lum6BQmAExFpxYiI1GKRElBBAAJTdxHfp++KhARgERFlx4jT1GJREvBaACJSdxG/lem6BQnABqLKjhEn25u1GuPkrlZHa9h5JgCn22rl4scyXbcgAThAVNkxYncNgm6jF4BZg3ZxWwCiavOHycKLIQj7skzXLUgAAhCxmxHDTmqxEwm4JQCBqbuIkrvs6AgJQBCiyo4ZVrc3sysB2QIQtK3WMEEq03ULEoBgRKUVI1a3N7MjAZkCELGt1hihpyORyFVBKdN1CxKAJESVHSNWUoutSkCGAESl7o6gzy47OkICkIyosmOEN7XYigRECkBg6i4S6DJdtyABuIDIsmOEZ3szXgmIEICgbbXGoDJd1yABuIjItGKk1BoEPBJwIgChtfmg/y47OkIC8ABRZcdIqdRilEDbwZ6C+xHaEYDg1F3f7LKjIyQADxFVdowUCxQW25TUqgDEBvioTNdrSAAeI7LsGCm0vVkhCfAKQMS2WuPIhh7IpOFGSt/1FhKAIohMK0bMUovNJFBKAEJTd4fx7y47OkICUAxRZceM/NTifAkUEoDg1F2EynQVhASgKKLKjpH8QGGuBPIFIDrAR2W6akMCUBiRZcdI7hoETAKtB8em8ETV5h8hG/qVMc7/Fo3z1YUEoAGj04YrQVB8gG1vNqk2CW+/dBB6e9NittViZOHFSDRyS9B22dEREoBGiCw7RjBQ2Gl09Ttb+0TdIpXpagYJQDNEpxX3tAuK7lP6rpaQADRFVNmxcwHQLjs6QwLQHKdlx/YFQGW6foAE4BPslh3bEACV6foIEoCPsJNWbEUAtMuO/yAB+BArZcc8AqAyXf9CAvAxPGXHJQSwHzJhKtP1MSSAAFCs7NhMAMPpu1SmGwhIAAGhUFpxvgBol51gQQIIGPllx2MCoDLdIEICCCis7NgQQBQyoes33//aI17fE+E+/w82xWk8NKCsxAAAAABJRU5ErkJggg==",xr=n.p+"static/media/gasolinera.acfd27002488d24977b1.png",kr=n.p+"static/media/interrogacion.8423696c61519106a08c.png",Sr=n.p+"static/media/tienda.31ee7aba5532286798c2.png",Er=n.p+"static/media/paisaje.68d598cffef8d9d728ef.png",Ar=n.p+"static/media/monumento.f505f99d0176c9d181ee.png",Tr=n(5483),Cr=n.n(Tr),Pr=n.p+"static/media/marcador.50be8d17e5f9d8e7f287.png",Ir=function(e){var t=document.createElement("img");return t.src=e,t.width=30,t.height=30,t};function Rr(e,t){return 0!==e.length&&Number(t)>=0&&Number(t)<=10&&null!==Number(t)&&0!==t.length}function Lr(e,t,n,r,i){if(r.info.isLoggedIn){var a=r.info.webId,o="";a&&(o=a.split("//")[1].split(".")[0]),function(e,t,n,r,i,a){var o=new P(t,n,r,i);if(null==e.info.webId)return null;var s="";if(""!==a){var u,l,c=null===(u=e.info.webId)||void 0===u?void 0:u.split("/").slice(0,2).join("/"),d=null===(l=e.info.webId)||void 0===l?void 0:l.split("/").slice(2,3).join().split(".").slice(1,3).join(".");s=c.concat("/",a,".",d,"/public","/comentarios","/"+n+"/"+o.id+".jsonld"),console.log(s)}else{var f,h=null===(f=e.info.webId)||void 0===f?void 0:f.split("/").slice(0,3).join("/");s=h.concat("/public","/comentarios","/"+n,"/"+o.id+".jsonld")}var p=JSON.parse(JSON.stringify(o));p["@context"]="https://schema.org/",p["@type"]="Comentario";var v=new Blob([JSON.stringify(p)],{type:"application/ld+json"}),m=new File([v],o.id+".jsonld",{type:"application/ld+json"});Tt(e,s,m).then((function(e){e?console.log("Comentario "+o.id+" saved correctly in "+s):console.log("Comentario "+o.id+" could not be saved correctly")}))}({session:r}.session,e,t.id,o,n,i)}}var Mr=function(){var e=(0,E.Z)((0,S.Z)().mark((function e(t,n,r,i,a){var o,s,u,l,c=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>5&&void 0!==c[5]?c[5]:"",s=function(e){e&&e.preventDefault()},u=function(e){if(e){e.preventDefault();var t=document.getElementById("comentario"),o=document.getElementById("valoracion"),s=t.value,u=o.value;Rr(s,u)&&(Lr(s,a,u,r,i),t.value="",o.value="",n.remove())}},[],l="<div class='table-container'><table class='table'><tr><th>Usuario</th><th>Comentario</th><th>Valoraci\xf3n</th></tr>",e.next=7,cr({session:r}.session,a.id,i).then((function(e){null!=e&&e.forEach((function(e){l+="<tr><td>"+e.autor+"</td><td>"+e.texto+"</td><td>"+e.valoracion+"</td></tr>"})),l+="</table></div><style>.table-container { max-height: 200px; overflow-y: auto; } .table { width: 100%; border-collapse: collapse; } .table th, .table td { border: 1px solid #ccc; padding: 10px; text-align: left; } .table th { background-color: #f2f2f2; font-weight: bold; } .table tr:nth-child(even) { background-color: #f9f9f9; } .table tr:hover { background-color: #e6e6e6; } .table td.actions { text-align: center; } .table td.actions a { color: #007bff; text-decoration: none; } .table td.actions a:hover { color: #0056b3; } th { font-weight: bold; } </style>";var r=a.imagen;o='<img style="width: 250px; height: 150px;"src ='+r+"><h1>"+a.nombre+"</h1><p>"+a.descripcion+'</p><form id="comment-form" aria-label="marcadorForm"><input type="text" id="comentario" name="comentario" placeholder="Escribe un comentario" required><input type="number" id="valoracion" min="0" max="10" step="1" placeholder="Valora del 1 al 10" required><button type="submit" id="btnenviar" >Enviar</button></form><h2>Comentarios</h2>'+l,n=t.getPopup().setHTML(o);var i=document.getElementById("btnenviar");return null!=e&&(i.addEventListener("click",u),n.getElement().addEventListener("click",s)),o})).catch((function(e){throw new Error(e)}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();function Or(e,t,n,r,i,a,o){e.forEach((function(e){var s,u;console.log(e),u=e.tipo,s=Ir("Bar"===u?br:"Restaurante"===u?wr:"Gasolinera"===u?xr:"Tienda"===u?Sr:"Paisaje"===u?Er:"Monumento"===u?Ar:kr);var l=new(Cr().Marker)({element:s}).setLngLat([e.latitude,e.longitude]).setPopup(new Tr.Popup({closeButton:!1,anchor:"left",maxWidth:"400px"}).setHTML('<div class="popup">Chincheta a\xf1adida aqu\xed: <br/>['.concat(e.longitude,", ").concat(e.latitude,"]</div>"))).addTo(t);n.push(l),r.push(e),l.getElement().addEventListener("click",(function(){Mr(l,i,a,o,e)}))}))}var Fr=function(e,t,n){var r=t.session,i=[],a=[],o=new Tr.Map({container:e,style:"mapbox://styles/mapbox/streets-v12",pitchWithRotate:!1,zoom:15,accessToken:"pk.eyJ1IjoidW8yODI4MzQiLCJhIjoiY2xlcHp5Z2syMGRteTQ5cDJ2dXltMm5uYSJ9.kTLZTl2_YvQiN79m2kPQ1g",doubleClickZoom:!1});return navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,r=t.longitude;o.setCenter([r,n]);var i=document.createElement("img");i.src=Pr,i.width=30,i.height=30,new(Cr().Marker)({element:i}).setLngLat([r,n]).setPopup(new Tr.Popup({closeButton:!1,anchor:"left"}).setHTML('<div class="popup">Mi ubicaci\xf3n inicial: <br/>['.concat(r,", ").concat(n,"]</div>"))).addTo(o)})),function(e,t){return lr.apply(this,arguments)}(r,n).then((function(e){null!=e&&Or(e,o,i,a,undefined,r,n)})).catch((function(e){throw new Error(e)})),[o,i,a]};var Dr,Nr=function(t){var n=t.marcadores,r=t.marcadoresObjeto,i=n,a=r,o=(0,e.useState)(6),s=(0,l.Z)(o,2),u=s[0],c=s[1],d=(0,e.useState)(!0),f=(0,l.Z)(d,2),h=f[0],p=f[1],v=(0,e.useState)(!0),m=(0,l.Z)(v,2),g=m[0],y=m[1],b=(0,e.useState)(!0),w=(0,l.Z)(b,2),x=w[0],k=w[1],S=(0,e.useState)(!0),E=(0,l.Z)(S,2),A=E[0],T=E[1],C=(0,e.useState)(!0),P=(0,l.Z)(C,2),I=P[0],R=P[1],L=(0,e.useState)(!0),M=(0,l.Z)(L,2),O=M[0],F=M[1],D=(0,e.useState)(!0),N=(0,l.Z)(D,2),j=N[0],B=N[1];function U(e,t,n,r){var o=u;n(!t);var s=0;B(!1),t?(c(u-1),o--,i.forEach((function(t){a[s].tipo===e&&(t.getElement().style.display="none"),s++}))):(c(u+1),o++,i.forEach((function(t){a[s].tipo===e&&(t.getElement().style.display="block"),s++}))),B(6===o)}return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"filtro",children:[(0,_.jsx)("span",{className:"prueba_contador_filtro",style:{display:"none"},children:u}),(0,_.jsxs)("div",{className:"pareja",children:[(0,_.jsx)("label",{htmlFor:"Todos",children:"Todos  "}),(0,_.jsx)("input",{id:"Todos",className:"checks",type:"checkbox",checked:j,onChange:function(){return B(!j),void(j?(i.forEach((function(e){e.getElement().style.display="none"})),c(0),p(!1),y(!1),k(!1),T(!1),R(!1),F(!1)):(i.forEach((function(e){e.getElement().style.display="block"})),c(6),p(!0),y(!0),k(!0),T(!0),R(!0),F(!0)))}})]}),(0,_.jsxs)("div",{className:"pareja",children:[(0,_.jsx)("label",{htmlFor:"Bar",children:"Bar  "}),(0,_.jsx)("input",{id:"Bar",type:"checkbox",checked:h,onChange:function(e){return U("Bar",h,p)}})]}),(0,_.jsxs)("div",{className:"pareja",children:[(0,_.jsx)("label",{htmlFor:"Tienda",children:"Tienda  "}),(0,_.jsx)("input",{id:"Tienda",type:"checkbox",checked:A,onChange:function(e){return U("Tienda",A,T)}})]}),(0,_.jsxs)("div",{className:"pareja",children:[(0,_.jsx)("label",{htmlFor:"Gasolinera",children:"Gasolinera "}),(0,_.jsx)("input",{id:"Gasolinera",type:"checkbox",checked:x,onChange:function(e){return U("Gasolinera",x,k)}})]}),(0,_.jsxs)("div",{className:"pareja",children:[(0,_.jsx)("label",{htmlFor:"Paisaje",children:"Paisaje"}),(0,_.jsx)("input",{id:"Paisaje",type:"checkbox",checked:g,onChange:function(e){return U("Paisaje",g,y)}})]}),(0,_.jsxs)("div",{className:"pareja",children:[(0,_.jsx)("label",{htmlFor:"Monumento",children:"Monumento"}),(0,_.jsx)("input",{id:"Monumento",type:"checkbox",checked:I,onChange:function(e){return U("Monumento",I,R)}})]}),(0,_.jsxs)("div",{className:"pareja",children:[(0,_.jsx)("label",{htmlFor:"Restaurante",children:"Restaurante"}),(0,_.jsx)("input",{id:"Restaurante",type:"checkbox",checked:O,onChange:function(e){return U("Restaurante",O,F)}})]})]})})},jr=n(3878),Br=n(9199),Ur=n(181),zr=n(5267);function Vr(){return Vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Dr||(Dr={}));var Zr,Hr="popstate";function Wr(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Gr(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function qr(e,t){return{usr:e.state,key:e.key,idx:t}}function Kr(e,t,n,r){return void 0===n&&(n=null),Vr({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Xr(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Jr(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Xr(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Yr(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,l=o.history,c=Dr.Pop,d=null,f=h();function h(){return(l.state||{idx:null}).idx}function p(){c=Dr.Pop;var e=h(),t=null==e?null:e-f;f=e,d&&d({action:c,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:Jr(e);return Wr(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,l.replaceState(Vr({},l.state,{idx:f}),""));var m={get action(){return c},get location(){return e(o,l)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(Hr,p),d=e,function(){o.removeEventListener(Hr,p),d=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=Dr.Push;var r=Kr(m.location,e,t);n&&n(r,e);var i=qr(r,f=h()+1),a=m.createHref(r);try{l.pushState(i,"",a)}catch(s){o.location.assign(a)}u&&d&&d({action:c,location:m.location,delta:1})},replace:function(e,t){c=Dr.Replace;var r=Kr(m.location,e,t);n&&n(r,e);var i=qr(r,f=h()),a=m.createHref(r);l.replaceState(i,"",a),u&&d&&d({action:c,location:m.location,delta:0})},go:function(e){return l.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Zr||(Zr={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Qr(e,t,n){void 0===n&&(n="/");var r=fi(("string"===typeof t?Xr(t):t).pathname||"/",n);if(null==r)return null;var i=$r(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=li(i[o],di(r));return a}function $r(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Wr(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=mi([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(Wr(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),$r(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:ui(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=(0,k.Z)(ei(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function ei(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,jr.Z)(n)||(0,Br.Z)(n)||(0,Ur.Z)(n)||(0,zr.Z)()),i=r[0],a=r.slice(1),o=i.endsWith("?"),s=i.replace(/\?$/,"");if(0===a.length)return o?[s,""]:[s];var u=ei(a.join("/")),l=[];return l.push.apply(l,(0,oe.Z)(u.map((function(e){return""===e?s:[s,e].join("/")})))),o&&l.push.apply(l,(0,oe.Z)(u)),l.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var ti=/^:\w+$/,ni=3,ri=2,ii=1,ai=10,oi=-2,si=function(e){return"*"===e};function ui(e,t){var n=e.split("/"),r=n.length;return n.some(si)&&(r+=oi),t&&(r+=ri),n.filter((function(e){return!si(e)})).reduce((function(e,t){return e+(ti.test(t)?ni:""===t?ii:ai)}),r)}function li(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=ci({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var d=s.route;a.push({params:r,pathname:mi([i,c.pathname]),pathnameBase:gi(mi([i,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(i=mi([i,c.pathnameBase]))}return a}function ci(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Gr("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,l.Z)(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),d=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Gr(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{});return{params:d,pathname:s,pathnameBase:u,pattern:e}}function di(e){try{return decodeURI(e)}catch(t){return Gr(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function fi(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function hi(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function pi(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function vi(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=Xr(e):(Wr(!(i=Vr({},e)).pathname||!i.pathname.includes("?"),hi("?","pathname","search",i)),Wr(!i.pathname||!i.pathname.includes("#"),hi("#","pathname","hash",i)),Wr(!i.search||!i.search.includes("#"),hi("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}a=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Xr(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:yi(a),hash:_i(s)}}(i,a),d=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!f||(c.pathname+="/"),c}var mi=function(e){return e.join("/").replace(/\/\/+/g,"/")},gi=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},yi=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},_i=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},bi=function(e){(0,M.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}((0,F.Z)(Error));function wi(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var xi=["post","put","patch","delete"],ki=(new Set(xi),["get"].concat(xi));new Set(ki),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var Si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Ei=e.useState,Ai=e.useEffect,Ti=e.useLayoutEffect,Ci=e.useDebugValue;function Pi(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Si(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var Ii=e.createContext(null);var Ri=e.createContext(null);var Li=e.createContext(null);var Mi=e.createContext(null);var Oi=e.createContext(null);var Fi=e.createContext({outlet:null,matches:[]});var Di=e.createContext(null);function Ni(){return Ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ni.apply(this,arguments)}function ji(){return null!=e.useContext(Oi)}function Bi(){return ji()||Wr(!1),e.useContext(Oi).location}function Ui(){ji()||Wr(!1);var t=e.useContext(Mi),n=t.basename,r=t.navigator,i=e.useContext(Fi).matches,a=Bi().pathname,o=JSON.stringify(pi(i).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);return e.useEffect((function(){s.current=!0})),e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=vi(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:mi([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a])}function zi(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(Fi).matches,a=Bi().pathname,o=JSON.stringify(pi(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return vi(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function Vi(){var t=function(){var t,n=e.useContext(Di),r=Ki(Hi.UseRouteError),i=Ji(Hi.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=wi(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var Zi,Hi,Wi=function(t){(0,M.Z)(r,t);var n=(0,O.Z)(r);function r(e){var t;return(0,T.Z)(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return(0,A.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(Fi.Provider,{value:this.props.routeContext},e.createElement(Di.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function Gi(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(Ii);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(Fi.Provider,{value:n},i)}function qi(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var i=t,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||Wr(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(t,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,l=null;r&&(l=o.route.ErrorBoundary?e.createElement(o.route.ErrorBoundary,null):o.route.errorElement?o.route.errorElement:e.createElement(Vi,null));var c=n.concat(i.slice(0,s+1)),d=function(){var n=t;return u?n=l:o.route.Component?n=e.createElement(o.route.Component,null):o.route.element&&(n=o.route.element),e.createElement(Gi,{match:o,routeContext:{outlet:t,matches:c},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===s)?e.createElement(Wi,{location:r.location,component:l,error:u,children:d(),routeContext:{outlet:null,matches:c}}):d()}),null)}function Ki(t){var n=e.useContext(Ri);return n||Wr(!1),n}function Ji(t){var n=function(t){var n=e.useContext(Fi);return n||Wr(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||Wr(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Zi||(Zi={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Hi||(Hi={}));var Xi;function Yi(t){var n=t.to,r=t.replace,i=t.state,a=t.relative;ji()||Wr(!1);var o=e.useContext(Ri),s=Ui();return e.useEffect((function(){o&&"idle"!==o.navigation.state||s(n,{replace:r,state:i,relative:a})})),null}function Qi(e){Wr(!1)}function $i(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,u=void 0===s?Dr.Pop:s,l=t.navigator,c=t.static,d=void 0!==c&&c;ji()&&Wr(!1);var f=r.replace(/^\/*/,"/"),h=e.useMemo((function(){return{basename:f,navigator:l,static:d}}),[f,l,d]);"string"===typeof o&&(o=Xr(o));var p=o,v=p.pathname,m=void 0===v?"/":v,g=p.search,y=void 0===g?"":g,_=p.hash,b=void 0===_?"":_,w=p.state,x=void 0===w?null:w,k=p.key,S=void 0===k?"default":k,E=e.useMemo((function(){var e=fi(m,f);return null==e?null:{location:{pathname:e,search:y,hash:b,state:x,key:S},navigationType:u}}),[f,m,y,b,x,S,u]);return null==E?null:e.createElement(Mi.Provider,{value:h},e.createElement(Oi.Provider,{children:a,value:E}))}function ea(t){var n=t.children,r=t.location,i=e.useContext(Ii);return function(t,n){ji()||Wr(!1);var r,i=e.useContext(Mi).navigator,a=e.useContext(Ri),o=e.useContext(Fi).matches,s=o[o.length-1],u=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),c=(s&&s.route,Bi());if(n){var d,f="string"===typeof n?Xr(n):n;"/"===l||(null==(d=f.pathname)?void 0:d.startsWith(l))||Wr(!1),r=f}else r=c;var h=r.pathname||"/",p=Qr(t,{pathname:"/"===l?h:h.slice(l.length)||"/"}),v=qi(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:mi([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:mi([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?e.createElement(Oi.Provider,{value:{location:Ni({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:Dr.Pop}},v):v}(i&&!n?i.router.routes:na(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Xi||(Xi={}));var ta=new Promise((function(){}));e.Component;function na(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t)){var a=[].concat((0,oe.Z)(n),[i]);if(t.type!==e.Fragment){t.type!==Qi&&Wr(!1),t.props.index&&t.props.children&&Wr(!1);var o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=na(t.props.children,a)),r.push(o)}else r.push.apply(r,na(t.props.children,a))}})),r}var ra=function(t){var n=t.session,r=t.modo,i=(0,e.useState)(0),a=(0,l.Z)(i,2),o=a[0],s=a[1],u=(0,e.useState)(""),c=(0,l.Z)(u,2),d=c[0],f=c[1],h=(0,e.useState)(""),p=(0,l.Z)(h,2),v=p[0],m=p[1],g=(0,e.useState)(""),y=(0,l.Z)(g,2),b=y[0],w=y[1],x=(0,e.useState)(""),k=(0,l.Z)(x,2),S=k[0],E=k[1],A=(0,e.useState)(""),T=(0,l.Z)(A,2),P=T[0],I=T[1],R=(0,e.useState)(""),L=(0,l.Z)(R,2),M=L[0],O=L[1],F=(0,e.useState)({nombre:null,descripcion:null,longitud:null,latitud:null,tipo:null}),D=(0,l.Z)(F,2),N=D[0],j=D[1],B=document.createElement("img");B.src=br,B.width=30,B.height=30;var U=document.createElement("img");U.src=wr,U.width=30,U.height=30;var z=document.createElement("img");z.src=xr,z.width=30,z.height=30;var V=document.createElement("img");V.src=kr,V.width=30,V.height=30;var Z=document.createElement("img");Z.src=Sr,Z.width=30,Z.height=30;var H=document.createElement("img");H.src=Er,H.width=30,H.height=30;var W=document.createElement("img");W.src=Ar,W.width=30,W.height=30;var G,q=(0,e.useRef)(null),K=(0,e.useState)(Array),J=(0,l.Z)(K,2),X=J[0],Y=J[1],Q=(0,e.useState)(Array),$=(0,l.Z)(Q,2),ee=$[0],te=$[1],ne="";if(n.info.isLoggedIn){var re=n.info.webId;re&&(ne=re.split("//")[1].split(".")[0])}return(0,e.useEffect)((function(){var e;r&&(q.current&&(e=Fr(q.current,{session:n},ne),G=e[0],Y(e[1]),te(e[2]),G.on("dblclick",(function(e){E(e.lngLat.lat+""),w(e.lngLat.lng+"")}))))}),[o]),n.info.isLoggedIn?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"mapc",children:[(0,_.jsx)(Nr,{marcadores:X,marcadoresObjeto:ee}),(0,_.jsxs)("div",{className:"panel",children:[(0,_.jsx)("div",{ref:q,className:"map"}),(0,_.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t,i,a={nombre:null,descripcion:null,longitud:null,latitud:null,tipo:null};(d||(a.nombre="El campo Nombre es obligatorio"),d.trim().length>20&&(a.nombre="Nombre no debe ser superior a 20"),v||(a.descripcion="El campo Descripci\xf3n es obligatorio"),v.trim().length>100&&(a.descripcion="Descripci\xf3n no debe ser superior a 100"),(Number(S)<-180||Number(S)>180||0===S.trim().length)&&(a.longitud="Longitud debe estar entre -180 y 180"),0===S.trim().length&&(a.longitud="Longitud es obligatoria"),(Number(b)<-90||Number(b)>90)&&(a.latitud="Latitud debe estar entre -90 y 90"),0===b.trim().length&&(a.latitud="Latitud es obligatoria"),t=P.trim(),P&&"Elija un tipo"!==P&&!(t in["Bar","Restaurante","Gasolinera","Tienda","Paisaje","Monumento"])||(a.tipo="Debe elegir un Tipo de marcador"),Object.values(a).some((function(e){return null!==e})))?j(a):(j({nombre:null,descripcion:null,longitud:null,latitud:null,tipo:null}),M.length>0?function(e,t,n,r,i,a,o){var s,u=new C("",t,n,r,i,a,o);if(null==e.info.webId)return null;var l=(null===(s=e.info.webId)||void 0===s?void 0:s.split("/").slice(0,3).join("/")).concat("/public","/markers","/"+u.id+".jsonld"),c=JSON.parse(JSON.stringify(u));c["@context"]="https://schema.org/",c["@type"]="Place";var d=new Blob([JSON.stringify(c)],{type:"application/ld+json"}),f=new File([d],u.id+".jsonld",{type:"application/ld+json"});Tt(e,l,f).then((function(e){e?console.log("Marker "+u.id+" saved correctly in "+l):console.log("Marker "+u.id+" could not be saved correctly")}))}(n,d,v,Number(b),Number(S),P,M):function(e,t,n,r,i,a){var o,s=new C("",t,n,r,i,a);if(null==e.info.webId)return null;var u=(null===(o=e.info.webId)||void 0===o?void 0:o.split("/").slice(0,3).join("/")).concat("/public","/markers","/"+s.id+".jsonld"),l=JSON.parse(JSON.stringify(s));l["@context"]="https://schema.org/",l["@type"]="Place";var c=new Blob([JSON.stringify(l)],{type:"application/ld+json"}),d=new File([c],s.id+".jsonld",{type:"application/ld+json"});Tt(e,u,d).then((function(e){e?console.log("Marker "+s.id+" saved correctly in "+u):console.log("Marker "+s.id+" could not be saved correctly")}))}(n,d,v,Number(b),Number(S),P),f(""),w(""),E(""),I(""),m(""),i="Bar"===P?B:"Restaurante"===P?U:"Gasolinera"===P?z:"Tienda"===P?Z:"Paisaje"===P?H:"Monumento"===P?W:V,r&&new(Cr().Marker)({element:i}).setLngLat([Number(b),Number(S)]).setPopup(new Tr.Popup({closeButton:!1,anchor:"left"}).setHTML('<div class="popup">Chincheta a\xf1adida aqu\xed: <br/>['.concat(b,", ").concat(S,"]</div>"))).addTo(G),console.log("Nombre: ".concat(d,", Latitud: ").concat(b,", Longitud: ").concat(S,", Tipo: ").concat(P)),s(o+1))},className:"formulario",children:[(0,_.jsx)("h2",{children:"A\xf1adir Marcador"}),(0,_.jsxs)("label",{children:["Nombre:",(0,_.jsx)("input",{"aria-label":"form-nombre",type:"text",value:d,placeholder:"Escribe el nombre del lugar",onChange:function(e){f(e.target.value)}}),N.nombre&&(0,_.jsx)("div",{className:"error",children:N.nombre})]}),(0,_.jsx)("br",{}),(0,_.jsxs)("label",{children:["Descripcion:",(0,_.jsx)("textarea",{"aria-label":"form-descripcion",style:{resize:"none"},value:v,placeholder:"Escribe la descripci\xf3n del lugar",onChange:function(e){m(e.target.value)}}),N.descripcion&&(0,_.jsx)("div",{className:"error",children:N.descripcion})]}),(0,_.jsx)("br",{}),(0,_.jsxs)("label",{children:["Longitud:",(0,_.jsx)("input",{"aria-label":"form-longitud",type:"number",name:"longitud",step:"0.000000000000001",value:S,placeholder:"Doble click en el mapa",onChange:function(e){E(e.target.value)}}),N.longitud&&(0,_.jsx)("div",{className:"error",children:N.longitud})]}),(0,_.jsx)("br",{}),(0,_.jsxs)("label",{children:["Latitud:",(0,_.jsx)("input",{"aria-label":"form-latitud",type:"number",name:"latitud",step:"0.000000000000001",value:b,placeholder:"Doble click en el mapa",onChange:function(e){w(e.target.value)}}),N.latitud&&(0,_.jsx)("div",{className:"error",children:N.latitud})]}),(0,_.jsx)("br",{}),(0,_.jsxs)("label",{children:["Tipo:",(0,_.jsxs)("select",{value:P,onChange:function(e){I(e.target.value)},"aria-label":"form-tipo",children:[(0,_.jsx)("option",{value:"",children:"Elija un tipo"}),(0,_.jsx)("option",{"aria-label":"tipo-Gasolinera",value:"Gasolinera",children:"Gasolinera"}),(0,_.jsx)("option",{"aria-label":"tipo-Restaurante",value:"Restaurante",children:"Restaurante"}),(0,_.jsx)("option",{"aria-label":"tipo-Bar",value:"Bar",children:"Bar"}),(0,_.jsx)("option",{"aria-label":"tipo-Tienda",value:"Tienda",children:"Tienda"}),(0,_.jsx)("option",{"aria-label":"tipo-Paisaje",value:"Paisaje",children:"Paisaje"}),(0,_.jsx)("option",{"aria-label":"tipo-Monumento",value:"Monumento",children:"Monumento"})]}),N.tipo&&(0,_.jsx)("div",{className:"error",children:N.tipo})]}),(0,_.jsxs)("label",{children:["A\xf1ade una imagen",(0,_.jsx)("input",{id:"imageUploader",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files;if(t&&t.length>0){var n=t[0],r=new FileReader;r.readAsDataURL(n),r.onload=function(){var e=r.result;"string"===typeof e&&O(e)}}},"aria-label":"form-imagen"})]}),(0,_.jsx)("br",{}),(0,_.jsx)("button",{type:"submit",children:"A\xf1adir"})]})]})]})}):(0,_.jsx)(Yi,{to:"/login",replace:!0})};var ia=function(t){var n=t.session,r=(0,e.useState)(Array),i=(0,l.Z)(r,2),a=i[0],o=i[1],s=(0,e.useState)(Array),u=(0,l.Z)(s,2),c=u[0],d=u[1],f=function(){var t=e.useContext(Fi).matches,n=t[t.length-1];return n?n.params:{}}().user,h=(0,e.useRef)(null);return(0,e.useEffect)((function(){var e;h.current&&(f?(e=Fr(h.current,{session:n},f),o(e[1]),d(e[2])):(e=Fr(h.current,{session:n},""),o(e[1]),d(e[2])))}),[]),n.info.isLoggedIn?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"mapc",children:[(0,_.jsx)(Nr,{marcadores:a,marcadoresObjeto:c}),(0,_.jsx)("div",{ref:h,className:"mapaAmigos"})]})}):(0,_.jsx)(Yi,{to:"/login",replace:!0})};function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aa.apply(this,arguments)}function oa(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var sa=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function ua(t){var n,r=t.basename,i=t.children,a=t.window,o=e.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),Yr((function(e,t){var n=e.location;return Kr("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Jr(t)}),null,n)));var s=o.current,u=e.useState({action:s.action,location:s.location}),c=(0,l.Z)(u,2),d=c[0],f=c[1];return e.useLayoutEffect((function(){return s.listen(f)}),[s]),e.createElement($i,{basename:r,children:i,location:d.location,navigationType:d.action,navigator:s})}var la="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ca=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,da=e.forwardRef((function(t,n){var r,i=t.onClick,a=t.relative,o=t.reloadDocument,s=t.replace,u=t.state,l=t.target,c=t.to,d=t.preventScrollReset,f=oa(t,sa),h=e.useContext(Mi).basename,p=!1;if("string"===typeof c&&ca.test(c)&&(r=c,la)){var v=new URL(window.location.href),m=c.startsWith("//")?new URL(v.protocol+c):new URL(c),g=fi(m.pathname,h);m.origin===v.origin&&null!=g?c=g+m.search+m.hash:p=!0}var y=function(t,n){var r=(void 0===n?{}:n).relative;ji()||Wr(!1);var i=e.useContext(Mi),a=i.basename,o=i.navigator,s=zi(t,{relative:r}),u=s.hash,l=s.pathname,c=s.search,d=l;return"/"!==a&&(d="/"===l?a:mi([a,l])),o.createHref({pathname:d,search:c,hash:u})}(c,{relative:a}),_=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,l=Ui(),c=Bi(),d=zi(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:Jr(c)===Jr(d);l(t,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[c,l,d,a,o,i,t,s,u])}(c,{replace:s,state:u,target:l,preventScrollReset:d,relative:a});return e.createElement("a",aa({},f,{href:r||y,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:n,target:l}))}));var fa,ha;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(fa||(fa={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ha||(ha={}));var pa=function(t){var n=t.session,r=(0,e.useState)(""),i=(0,l.Z)(r,2),a=i[0],o=i[1],s=(0,e.useState)(null),u=(0,l.Z)(s,2),c=u[0],d=u[1],f=(0,e.useState)(!1),h=(0,l.Z)(f,2),p=h[0],v=h[1],m=(0,e.useState)([]),g=(0,l.Z)(m,2),y=g[0],b=g[1],w=(0,e.useState)(""),x=(0,l.Z)(w,2),k=x[0],A=x[1],T=(0,e.useState)(""),C=(0,l.Z)(T,2),P=C[0],I=C[1],R="https://"+k+".inrupt.net/profile/card#me";function L(){return L=(0,E.Z)((0,S.Z)().mark((function e(){var t,n,r;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v(!0),o(""),k){e.next=5;break}throw new Error("Nombre de usuario no especificado");case 5:return e.next=7,lt(R);case 7:if(n=e.sent,r=Ye(n,R)){e.next=11;break}throw new Error("Perfil no encontrado");case 11:o(null!==(t=Ke(r,tn.name))&&void 0!==t?t:""),d(null),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0 instanceof Error&&d(e.t0.message);case 18:return e.prev=18,v(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])}))),L.apply(this,arguments)}function M(e){return O.apply(this,arguments)}function O(){return(O=(0,E.Z)((0,S.Z)().mark((function e(t){var r;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yr({session:n},t);case 2:return r=e.sent,e.abrupt("return",r||"");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=(0,E.Z)((0,S.Z)().mark((function e(){var t,r,i,a,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.next=3,fr({session:n},R);case 3:if((r=e.sent)===t){e.next=9;break}return e.next=7,pr(r);case 7:(i=e.sent)!==t&&Array.isArray(i)&&(a=i.filter((function(e){return!y.includes(e)}))).length>0&&(o=[].concat((0,oe.Z)(y),(0,oe.Z)(a)),b(o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=(0,E.Z)((0,S.Z)().mark((function e(t){var r,i;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr({session:n},t);case 2:if(void 0===(r=e.sent)){e.next=8;break}return e.next=6,pr(r);case 6:void 0!==(i=e.sent)&&b(i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,e.useEffect)((function(){function e(){return e=(0,E.Z)((0,S.Z)().mark((function e(){var t,r,i,a,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.info.isLoggedIn){e.next=2;break}return e.abrupt("return");case 2:if(t=n.info.webId){e.next=5;break}throw new Error("Nombre de usuario no especificado");case 5:return e.next=7,lt(t);case 7:if(r=e.sent,i=Ye(r,t)){e.next=11;break}throw new Error("Perfil no encontrado");case 11:return a=Ge(i,tn.knows),e.next=14,Promise.all(a.map(function(){var e=(0,E.Z)((0,S.Z)().mark((function e(t){var n,r,i;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(t);case 2:if(r=e.sent,i=Ye(r,t)){e.next=6;break}throw new Error("Perfil de amigo no encontrado");case 6:return e.abrupt("return",null!==(n=Ke(i,tn.name))&&void 0!==n?n:t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:o=e.sent,b(o);case 16:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){throw new Error(e)}))}),[n]),(0,_.jsxs)("div",{className:"contenedor-amigos",children:[(0,_.jsxs)("div",{className:"buscar-amigo",children:[(0,_.jsx)("h2",{className:"titulos",children:"Buscar Perfil"}),(0,_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){return L.apply(this,arguments)}().catch((function(e){throw new Error(e)}))},children:[(0,_.jsxs)("label",{className:"titulos",children:["Nombre de usuario:",(0,_.jsx)("input",{"aria-label":"username",type:"text",value:k,onChange:function(e){return A(e.target.value)}})]}),(0,_.jsx)("button",{type:"submit","aria-label":"searchButton",children:"Buscar "})]}),p&&(0,_.jsx)("p",{style:{color:"white"},children:"Cargando..."}),c&&(0,_.jsx)("p",{className:"titulos",children:c}),a&&(0,_.jsxs)("p",{className:"pcona\xf1adir",children:["Nombre: ",a," ",(0,_.jsx)("button",{type:"submit","aria-label":"addButton",onClick:function(){return F.apply(this,arguments)},children:"A\xf1adir"})]})]}),(0,_.jsxs)("div",{className:"mis-amigos",children:[(0,_.jsx)("h2",{className:"titulos",children:"Mis Amigos:"}),(0,_.jsx)("div",{className:"amigos",children:y.length>0?(0,_.jsx)("div",{children:y.map((function(e){return(0,_.jsxs)("div",{className:"amigo",children:[(0,_.jsx)("p",{children:e}),(0,_.jsx)(da,{"aria-label":"mapaLink",to:P,onClick:function(){var t=(0,E.Z)((0,S.Z)().mark((function t(n){var r;return(0,S.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:r=t.sent,I("/mapaAmigo/"+r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Mapa"}),(0,_.jsx)("button",{type:"submit","aria-label":"deleteButton",onClick:function(){return function(e){return D.apply(this,arguments)}(e)},children:"Eliminar"})]},e)}))}):(0,_.jsx)("p",{style:{color:"white"},children:"No tienes amigos a\xfan."})})]})]})};var va=function(e){var t=e.session;return t.info.isLoggedIn?(0,_.jsxs)("div",{className:"contenedor_amigos_principal",children:[(0,_.jsx)("h1",{className:"titulos",children:"Bienvenido a Amigos"}),(0,_.jsx)(pa,{session:t})]}):(0,_.jsx)(Yi,{to:"/login",replace:!0})},ma=n.p+"static/media/icono.09c0a0411923c3de503a.png",ga=n(8398);var ya=function(e){var t=e.session,n=void 0===t?(0,St.getDefaultSession)():t,r=(0,ga.useSession)().session;return n||(n=r),(0,_.jsxs)("nav",{className:"navbar",children:[(0,_.jsx)(da,{to:"/",children:(0,_.jsx)("img",{className:"imagen",src:ma,alt:"logo"})}),(0,_.jsx)("ul",{className:"list",children:n.info.isLoggedIn?(0,_.jsxs)("div",{className:"nav_con_login",children:[(0,_.jsx)("li",{className:"item","aria-label":"nav-Home",children:(0,_.jsx)(da,{to:"/",children:"Home"})}),(0,_.jsx)("li",{className:"item","aria-label":"nav-Mapa",children:(0,_.jsx)(da,{to:"/mapa",children:"Mapa"})}),(0,_.jsx)("li",{className:"item","aria-label":"nav-Amigos",children:(0,_.jsx)(da,{to:"/amigos",children:"Amigos"})}),(0,_.jsx)("li",{className:"item","aria-label":"nav-AboutUs",children:(0,_.jsx)(da,{to:"/aboutus",children:"About us"})}),(0,_.jsx)("li",{className:"item","aria-label":"nav-Login",children:(0,_.jsx)(da,{to:"/Login",children:"Login"})})]}):(0,_.jsxs)("div",{className:"nav_sin_login",children:[(0,_.jsx)("li",{className:"item","aria-label":"nav-Home",children:(0,_.jsx)(da,{to:"/",children:"Home"})}),(0,_.jsx)("li",{className:"item","aria-label":"nav-Login",children:(0,_.jsx)(da,{to:"/Login",children:"Login"})})]})})]})};function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_a.apply(this,arguments)}var ba=n(3366);function wa(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=wa(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var xa=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=wa(e))&&(r&&(r+=" "),r+=t);return r};function ka(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}var Sa=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},Ea=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Aa=Sa((function(e){return Ea.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var Ta=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Ca=Math.abs,Pa=String.fromCharCode,Ia=Object.assign;function Ra(e){return e.trim()}function La(e,t,n){return e.replace(t,n)}function Ma(e,t){return e.indexOf(t)}function Oa(e,t){return 0|e.charCodeAt(t)}function Fa(e,t,n){return e.slice(t,n)}function Da(e){return e.length}function Na(e){return e.length}function ja(e,t){return t.push(e),e}var Ba=1,Ua=1,za=0,Va=0,Za=0,Ha="";function Wa(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:Ba,column:Ua,length:o,return:""}}function Ga(e,t){return Ia(Wa("",null,null,"",null,null,0),e,{length:-e.length},t)}function qa(){return Za=Va>0?Oa(Ha,--Va):0,Ua--,10===Za&&(Ua=1,Ba--),Za}function Ka(){return Za=Va<za?Oa(Ha,Va++):0,Ua++,10===Za&&(Ua=1,Ba++),Za}function Ja(){return Oa(Ha,Va)}function Xa(){return Va}function Ya(e,t){return Fa(Ha,e,t)}function Qa(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $a(e){return Ba=Ua=1,za=Da(Ha=e),Va=0,[]}function eo(e){return Ha="",e}function to(e){return Ra(Ya(Va-1,io(91===e?e+2:40===e?e+1:e)))}function no(e){for(;(Za=Ja())&&Za<33;)Ka();return Qa(e)>2||Qa(Za)>3?"":" "}function ro(e,t){for(;--t&&Ka()&&!(Za<48||Za>102||Za>57&&Za<65||Za>70&&Za<97););return Ya(e,Xa()+(t<6&&32==Ja()&&32==Ka()))}function io(e){for(;Ka();)switch(Za){case e:return Va;case 34:case 39:34!==e&&39!==e&&io(Za);break;case 40:41===e&&io(e);break;case 92:Ka()}return Va}function ao(e,t){for(;Ka()&&e+Za!==57&&(e+Za!==84||47!==Ja()););return"/*"+Ya(t,Va-1)+"*"+Pa(47===e?e:Ka())}function oo(e){for(;!Qa(Ja());)Ka();return Ya(e,Va)}var so="-ms-",uo="-moz-",lo="-webkit-",co="comm",fo="rule",ho="decl",po="@keyframes";function vo(e,t){for(var n="",r=Na(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function mo(e,t,n,r){switch(e.type){case"@import":case ho:return e.return=e.return||e.value;case co:return"";case po:return e.return=e.value+"{"+vo(e.children,r)+"}";case fo:e.value=e.props.join(",")}return Da(n=vo(e.children,r))?e.return=e.value+"{"+n+"}":""}function go(e){return eo(yo("",null,null,null,[""],e=$a(e),0,[0],e))}function yo(e,t,n,r,i,a,o,s,u){for(var l=0,c=0,d=o,f=0,h=0,p=0,v=1,m=1,g=1,y=0,_="",b=i,w=a,x=r,k=_;m;)switch(p=y,y=Ka()){case 40:if(108!=p&&58==Oa(k,d-1)){-1!=Ma(k+=La(to(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:k+=to(y);break;case 9:case 10:case 13:case 32:k+=no(p);break;case 92:k+=ro(Xa()-1,7);continue;case 47:switch(Ja()){case 42:case 47:ja(bo(ao(Ka(),Xa()),t,n),u);break;default:k+="/"}break;case 123*v:s[l++]=Da(k)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:h>0&&Da(k)-d&&ja(h>32?wo(k+";",r,n,d-1):wo(La(k," ","")+";",r,n,d-2),u);break;case 59:k+=";";default:if(ja(x=_o(k,t,n,l,c,i,s,_,b=[],w=[],d),a),123===y)if(0===c)yo(k,t,x,x,b,a,d,s,w);else switch(99===f&&110===Oa(k,3)?100:f){case 100:case 109:case 115:yo(e,x,x,r&&ja(_o(e,x,x,0,0,i,s,_,i,b=[],d),w),i,w,d,s,r?b:w);break;default:yo(k,x,x,x,[""],w,0,s,w)}}l=c=h=0,v=g=1,_=k="",d=o;break;case 58:d=1+Da(k),h=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==qa())continue;switch(k+=Pa(y),y*v){case 38:g=c>0?1:(k+="\f",-1);break;case 44:s[l++]=(Da(k)-1)*g,g=1;break;case 64:45===Ja()&&(k+=to(Ka())),f=Ja(),c=d=Da(_=k+=oo(Xa())),y++;break;case 45:45===p&&2==Da(k)&&(v=0)}}return a}function _o(e,t,n,r,i,a,o,s,u,l,c){for(var d=i-1,f=0===i?a:[""],h=Na(f),p=0,v=0,m=0;p<r;++p)for(var g=0,y=Fa(e,d+1,d=Ca(v=o[p])),_=e;g<h;++g)(_=Ra(v>0?f[g]+" "+y:La(y,/&\f/g,f[g])))&&(u[m++]=_);return Wa(e,t,n,0===i?fo:s,u,l,c)}function bo(e,t,n){return Wa(e,t,n,co,Pa(Za),Fa(e,2,-2),0)}function wo(e,t,n,r){return Wa(e,t,n,ho,Fa(e,0,r),Fa(e,r+1,-1),r)}var xo=function(e,t,n){for(var r=0,i=0;r=i,i=Ja(),38===r&&12===i&&(t[n]=1),!Qa(i);)Ka();return Ya(e,Va)},ko=function(e,t){return eo(function(e,t){var n=-1,r=44;do{switch(Qa(r)){case 0:38===r&&12===Ja()&&(t[n]=1),e[n]+=xo(Va-1,t,n);break;case 2:e[n]+=to(r);break;case 4:if(44===r){e[++n]=58===Ja()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Pa(r)}}while(r=Ka());return e}($a(e),t))},So=new WeakMap,Eo=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||So.get(n))&&!r){So.set(e,!0);for(var i=[],a=ko(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var l=0;l<o.length;l++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[l]):o[l]+" "+a[s]}}},Ao=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function To(e,t){switch(function(e,t){return 45^Oa(e,0)?(((t<<2^Oa(e,0))<<2^Oa(e,1))<<2^Oa(e,2))<<2^Oa(e,3):0}(e,t)){case 5103:return lo+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return lo+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return lo+e+uo+e+so+e+e;case 6828:case 4268:return lo+e+so+e+e;case 6165:return lo+e+so+"flex-"+e+e;case 5187:return lo+e+La(e,/(\w+).+(:[^]+)/,lo+"box-$1$2"+so+"flex-$1$2")+e;case 5443:return lo+e+so+"flex-item-"+La(e,/flex-|-self/,"")+e;case 4675:return lo+e+so+"flex-line-pack"+La(e,/align-content|flex-|-self/,"")+e;case 5548:return lo+e+so+La(e,"shrink","negative")+e;case 5292:return lo+e+so+La(e,"basis","preferred-size")+e;case 6060:return lo+"box-"+La(e,"-grow","")+lo+e+so+La(e,"grow","positive")+e;case 4554:return lo+La(e,/([^-])(transform)/g,"$1"+lo+"$2")+e;case 6187:return La(La(La(e,/(zoom-|grab)/,lo+"$1"),/(image-set)/,lo+"$1"),e,"")+e;case 5495:case 3959:return La(e,/(image-set\([^]*)/,lo+"$1$`$1");case 4968:return La(La(e,/(.+:)(flex-)?(.*)/,lo+"box-pack:$3"+so+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+lo+e+e;case 4095:case 3583:case 4068:case 2532:return La(e,/(.+)-inline(.+)/,lo+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Da(e)-1-t>6)switch(Oa(e,t+1)){case 109:if(45!==Oa(e,t+4))break;case 102:return La(e,/(.+:)(.+)-([^]+)/,"$1"+lo+"$2-$3$1"+uo+(108==Oa(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ma(e,"stretch")?To(La(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Oa(e,t+1))break;case 6444:switch(Oa(e,Da(e)-3-(~Ma(e,"!important")&&10))){case 107:return La(e,":",":"+lo)+e;case 101:return La(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+lo+(45===Oa(e,14)?"inline-":"")+"box$3$1"+lo+"$2$3$1"+so+"$2box$3")+e}break;case 5936:switch(Oa(e,t+11)){case 114:return lo+e+so+La(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return lo+e+so+La(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return lo+e+so+La(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return lo+e+so+e+e}return e}var Co=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ho:e.return=To(e.value,e.length);break;case po:return vo([Ga(e,{value:La(e.value,"@","@"+lo)})],r);case fo:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return vo([Ga(e,{props:[La(t,/:(read-\w+)/,":"+uo+"$1")]})],r);case"::placeholder":return vo([Ga(e,{props:[La(t,/:(plac\w+)/,":"+lo+"input-$1")]}),Ga(e,{props:[La(t,/:(plac\w+)/,":"+uo+"$1")]}),Ga(e,{props:[La(t,/:(plac\w+)/,so+"input-$1")]})],r)}return""}))}}],Po=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Co;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u,l,c=[mo,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],d=function(e){var t=Na(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}([Eo,Ao].concat(r,c));a=function(e,t,n,r){u=n,function(e){vo(go(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new Ta({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return f.sheet.hydrate(s),f};var Io=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Ro={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Lo=/[A-Z]|^ms/g,Mo=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Oo=function(e){return 45===e.charCodeAt(1)},Fo=function(e){return null!=e&&"boolean"!==typeof e},Do=Sa((function(e){return Oo(e)?e:e.replace(Lo,"-$&").toLowerCase()})),No=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Mo,(function(e,t,n){return Bo={name:t,styles:n,next:Bo},t}))}return 1===Ro[e]||Oo(e)||"number"!==typeof t||0===t?t:t+"px"};function jo(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Bo={name:n.name,styles:n.styles,next:Bo},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Bo={name:r.name,styles:r.styles,next:Bo},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=jo(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":Fo(o)&&(r+=Do(a)+":"+No(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=jo(e,t,o);switch(a){case"animation":case"animationName":r+=Do(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)Fo(o[u])&&(r+=Do(a)+":"+No(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Bo,a=n(e);return Bo=i,jo(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Bo,Uo=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var zo=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Bo=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=jo(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=jo(n,t,e[o]),r&&(i+=a[o]);Uo.lastIndex=0;for(var s,u="";null!==(s=Uo.exec(i));)u+="-"+s[1];return{name:Io(i)+u,styles:i,next:Bo}},Vo=!!t.useInsertionEffect&&t.useInsertionEffect,Zo=Vo||function(e){return e()},Ho=Vo||e.useLayoutEffect,Wo=(0,e.createContext)("undefined"!==typeof HTMLElement?Po({key:"css"}):null);Wo.Provider;var Go=function(t){return(0,e.forwardRef)((function(n,r){var i=(0,e.useContext)(Wo);return t(n,i,r)}))},qo=(0,e.createContext)({});var Ko=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Jo=function(e,t,n){Ko(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0);i=i.next}while(void 0!==i)}},Xo=Aa,Yo=function(e){return"theme"!==e},Qo=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Xo:Yo},$o=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},es=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;Ko(t,n,r);Zo((function(){return Jo(t,n,r)}));return null},ts=function t(n,r){var i,a,o=n.__emotion_real===n,s=o&&n.__emotion_base||n;void 0!==r&&(i=r.label,a=r.target);var u=$o(n,r,o),l=u||Qo(s),c=!l("as");return function(){var d=arguments,f=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&f.push("label:"+i+";"),null==d[0]||void 0===d[0].raw)f.push.apply(f,d);else{0,f.push(d[0][0]);for(var h=d.length,p=1;p<h;p++)f.push(d[p],d[0][p])}var v=Go((function(t,n,r){var i=c&&t.as||s,o="",d=[],h=t;if(null==t.theme){for(var p in h={},t)h[p]=t[p];h.theme=(0,e.useContext)(qo)}"string"===typeof t.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(n.registered,d,t.className):null!=t.className&&(o=t.className+" ");var v=zo(f.concat(d),n.registered,h);o+=n.key+"-"+v.name,void 0!==a&&(o+=" "+a);var m=c&&void 0===u?Qo(i):l,g={};for(var y in t)c&&"as"===y||m(y)&&(g[y]=t[y]);return g.className=o,g.ref=r,(0,e.createElement)(e.Fragment,null,(0,e.createElement)(es,{cache:n,serialized:v,isStringTag:"string"===typeof i}),(0,e.createElement)(i,g))}));return v.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=f,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(e,n){return t(e,_a({},r,n,{shouldForwardProp:$o(v,n,!0)})).apply(void 0,f)},v}},ns=ts.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){ns[e]=ns(e)}));var rs=ns;function is(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function as(e){if(!is(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=as(e[n])})),t}function os(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?_a({},e):e;return is(e)&&is(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(is(t[i])&&i in e&&is(e[i])?r[i]=os(e[i],t[i],n):n.clone?r[i]=is(t[i])?as(t[i]):t[i]:r[i]=t[i])})),r}var ss=["values","unit","step"],us=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return _a({},e,(0,ae.Z)({},t.key,t.val))}),{})};var ls={borderRadius:4},cs={xs:0,sm:600,md:900,lg:1200,xl:1536},ds={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(cs[e],"px)")}};function fs(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||ds;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||ds;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||cs).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function hs(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function ps(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function vs(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function ms(e){if("string"!==typeof e)throw new Error(vs(7));return e.charAt(0).toUpperCase()+e.slice(1)}function gs(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function ys(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:gs(e,n)||i,t&&(r=t(r,i,e)),r}var _s=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=gs(e.theme,i)||{};return fs(e,n,(function(e){var n=ys(o,a,e);return e===n&&"string"===typeof e&&(n=ys(o,a,"".concat(t).concat("default"===e?"":ms(e)),e)),!1===r?n:(0,ae.Z)({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var bs=function(e,t){return t?os(e,t,{clone:!1}):e};var ws={m:"margin",p:"padding"},xs={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ks={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ss=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!ks[e])return[e];e=ks[e]}var t=e.split(""),n=(0,l.Z)(t,2),r=n[0],i=n[1],a=ws[r],o=xs[i]||"";return Array.isArray(o)?o.map((function(e){return a+e})):[a+o]})),Es=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],As=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Ts=[].concat(Es,As);function Cs(e,t,n,r){var i,a=null!=(i=gs(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function Ps(e){return Cs(e,"spacing",8)}function Is(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function Rs(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=Is(t,n),e}),{})}}(Ss(n),r);return fs(e,e[n],i)}function Ls(e,t){var n=Ps(e.theme);return Object.keys(e).map((function(r){return Rs(e,t,r,n)})).reduce(bs,{})}function Ms(e){return Ls(e,Es)}function Os(e){return Ls(e,As)}function Fs(e){return Ls(e,Ts)}Ms.propTypes={},Ms.filterProps=Es,Os.propTypes={},Os.filterProps=As,Fs.propTypes={},Fs.filterProps=Ts;var Ds=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?bs(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function Ns(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var js=_s({prop:"border",themeKey:"borders",transform:Ns}),Bs=_s({prop:"borderTop",themeKey:"borders",transform:Ns}),Us=_s({prop:"borderRight",themeKey:"borders",transform:Ns}),zs=_s({prop:"borderBottom",themeKey:"borders",transform:Ns}),Vs=_s({prop:"borderLeft",themeKey:"borders",transform:Ns}),Zs=_s({prop:"borderColor",themeKey:"palette"}),Hs=_s({prop:"borderTopColor",themeKey:"palette"}),Ws=_s({prop:"borderRightColor",themeKey:"palette"}),Gs=_s({prop:"borderBottomColor",themeKey:"palette"}),qs=_s({prop:"borderLeftColor",themeKey:"palette"}),Ks=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=Cs(e.theme,"shape.borderRadius",4);return fs(e,e.borderRadius,(function(e){return{borderRadius:Is(t,e)}}))}return null};Ks.propTypes={},Ks.filterProps=["borderRadius"];Ds(js,Bs,Us,zs,Vs,Zs,Hs,Ws,Gs,qs,Ks);var Js=function(e){if(void 0!==e.gap&&null!==e.gap){var t=Cs(e.theme,"spacing",8);return fs(e,e.gap,(function(e){return{gap:Is(t,e)}}))}return null};Js.propTypes={},Js.filterProps=["gap"];var Xs=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=Cs(e.theme,"spacing",8);return fs(e,e.columnGap,(function(e){return{columnGap:Is(t,e)}}))}return null};Xs.propTypes={},Xs.filterProps=["columnGap"];var Ys=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=Cs(e.theme,"spacing",8);return fs(e,e.rowGap,(function(e){return{rowGap:Is(t,e)}}))}return null};Ys.propTypes={},Ys.filterProps=["rowGap"];Ds(Js,Xs,Ys,_s({prop:"gridColumn"}),_s({prop:"gridRow"}),_s({prop:"gridAutoFlow"}),_s({prop:"gridAutoColumns"}),_s({prop:"gridAutoRows"}),_s({prop:"gridTemplateColumns"}),_s({prop:"gridTemplateRows"}),_s({prop:"gridTemplateAreas"}),_s({prop:"gridArea"}));function Qs(e,t){return"grey"===t?t:e}Ds(_s({prop:"color",themeKey:"palette",transform:Qs}),_s({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Qs}),_s({prop:"backgroundColor",themeKey:"palette",transform:Qs}));function $s(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var eu=_s({prop:"width",transform:$s}),tu=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return fs(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||cs[t]||$s(t)}}))}return null};tu.filterProps=["maxWidth"];var nu=_s({prop:"minWidth",transform:$s}),ru=_s({prop:"height",transform:$s}),iu=_s({prop:"maxHeight",transform:$s}),au=_s({prop:"minHeight",transform:$s}),ou=(_s({prop:"size",cssProperty:"width",transform:$s}),_s({prop:"size",cssProperty:"height",transform:$s}),Ds(eu,tu,nu,ru,iu,au,_s({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Ns},borderTop:{themeKey:"borders",transform:Ns},borderRight:{themeKey:"borders",transform:Ns},borderBottom:{themeKey:"borders",transform:Ns},borderLeft:{themeKey:"borders",transform:Ns},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ks},color:{themeKey:"palette",transform:Qs},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Qs},backgroundColor:{themeKey:"palette",transform:Qs},p:{style:Os},pt:{style:Os},pr:{style:Os},pb:{style:Os},pl:{style:Os},px:{style:Os},py:{style:Os},padding:{style:Os},paddingTop:{style:Os},paddingRight:{style:Os},paddingBottom:{style:Os},paddingLeft:{style:Os},paddingX:{style:Os},paddingY:{style:Os},paddingInline:{style:Os},paddingInlineStart:{style:Os},paddingInlineEnd:{style:Os},paddingBlock:{style:Os},paddingBlockStart:{style:Os},paddingBlockEnd:{style:Os},m:{style:Ms},mt:{style:Ms},mr:{style:Ms},mb:{style:Ms},ml:{style:Ms},mx:{style:Ms},my:{style:Ms},margin:{style:Ms},marginTop:{style:Ms},marginRight:{style:Ms},marginBottom:{style:Ms},marginLeft:{style:Ms},marginX:{style:Ms},marginY:{style:Ms},marginInline:{style:Ms},marginInlineStart:{style:Ms},marginInlineEnd:{style:Ms},marginBlock:{style:Ms},marginBlockStart:{style:Ms},marginBlockEnd:{style:Ms},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Js},rowGap:{style:Ys},columnGap:{style:Xs},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:$s},maxWidth:{style:tu},minWidth:{transform:$s},height:{transform:$s},maxHeight:{transform:$s},minHeight:{transform:$s},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});var su=function(){function e(e,t,n,r){var i,a=(i={},(0,ae.Z)(i,e,t),(0,ae.Z)(i,"theme",n),i),o=r[e];if(!o)return(0,ae.Z)({},e,t);var s=o.cssProperty,u=void 0===s?e:s,l=o.themeKey,c=o.transform,d=o.style;if(null==t)return null;var f=gs(n,l)||{};if(d)return d(a);return fs(a,t,(function(t){var n=ys(f,c,t);return t===n&&"string"===typeof t&&(n=ys(f,c,"".concat(e).concat("default"===t?"":ms(t)),t)),!1===u?n:(0,ae.Z)({},u,n)}))}return function t(n){var r,i=n||{},a=i.sx,o=i.theme,s=void 0===o?{}:o;if(!a)return null;var u=null!=(r=s.unstable_sxConfig)?r:ou;function l(n){var r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;var i=hs(s.breakpoints),a=Object.keys(i),o=i;return Object.keys(r).forEach((function(n){var i,a,l=(i=r[n],a=s,"function"===typeof i?i(a):i);if(null!==l&&void 0!==l)if("object"===typeof l)if(u[n])o=bs(o,e(n,l,s,u));else{var c=fs({theme:s},l,(function(e){return(0,ae.Z)({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(c,l)?o=bs(o,c):o[n]=t({sx:l,theme:s})}else o=bs(o,e(n,l,s,u))})),ps(a,o)}return Array.isArray(a)?a.map(l):l(a)}}();su.filterProps=["sx"];var uu=su,lu=["breakpoints","palette","spacing","shape"];var cu=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,s=void 0===o?{}:o,u=(0,ba.Z)(e,lu),l=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,s=(0,ba.Z)(e,ss),u=us(n),l=Object.keys(u);function c(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function f(e,t){var r=l.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[l[r]]?n[l[r]]:t)-o/100).concat(i,")")}return _a({keys:l,values:u,up:c,down:d,between:f,only:function(e){return l.indexOf(e)+1<l.length?f(e,l[l.indexOf(e)+1]):c(e)},not:function(e){var t=l.indexOf(e);return 0===t?c(l[1]):t===l.length-1?d(l[t]):f(e,l[l.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}(n),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Ps({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(a),d=os({breakpoints:l,direction:"ltr",components:{},palette:_a({mode:"light"},i),spacing:c,shape:_a({},ls,s)},u),f=arguments.length,h=new Array(f>1?f-1:0),p=1;p<f;p++)h[p-1]=arguments[p];return(d=h.reduce((function(e,t){return os(e,t)}),d)).unstable_sxConfig=_a({},ou,null==u?void 0:u.unstable_sxConfig),d.unstable_sx=function(e){return uu({sx:e,theme:this})},d},du=["variant"];function fu(e){return 0===e.length}function hu(e){var t=e.variant,n=(0,ba.Z)(e,du),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?fu(r)?e[t]:ms(e[t]):"".concat(fu(r)?t:ms(t)).concat(ms(e[t].toString()))})),r}var pu=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],vu=["theme"],mu=["theme"];function gu(e){return 0===Object.keys(e).length}function yu(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var _u=cu();function bu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?_u:t,r=e.rootShouldForwardProp,i=void 0===r?yu:r,a=e.slotShouldForwardProp,o=void 0===a?yu:a,s=function(e){var t=gu(e.theme)?n:e.theme;return uu(_a({},e,{theme:t}))};return s.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var r=t.name,a=t.slot,u=t.skipVariantsResolver,c=t.skipSx,d=t.overridesResolver,f=(0,ba.Z)(t,pu),h=void 0!==u?u:a&&"Root"!==a||!1,p=c||!1;var v=yu;"Root"===a?v=i:a?v=o:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(v=void 0);var m=function(e,t){return rs(e,t)}(e,_a({shouldForwardProp:v,label:undefined},f)),g=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var o=i?i.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=(0,ba.Z)(t,vu);return e(_a({theme:gu(r)?n:r},i))}:e})):[],u=e;r&&d&&o.push((function(e){var t=gu(e.theme)?n:e.theme,i=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null}(r,t);if(i){var a={};return Object.entries(i).forEach((function(n){var r=(0,l.Z)(n,2),i=r[0],o=r[1];a[i]="function"===typeof o?o(_a({},e,{theme:t})):o})),d(e,a)}return null})),r&&!h&&o.push((function(e){var t=gu(e.theme)?n:e.theme;return function(e,t,n,r){var i,a,o=e.ownerState,s=void 0===o?{}:o,u=[],l=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return l&&l.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[hu(n.props)])})),u}(e,function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=hu(e.props);r[t]=e.style})),r}(r,t),t,r)})),p||o.push(s);var c=o.length-i.length;if(Array.isArray(e)&&c>0){var f=new Array(c).fill("");(u=[].concat((0,oe.Z)(e),(0,oe.Z)(f))).raw=[].concat((0,oe.Z)(e.raw),(0,oe.Z)(f))}else"function"===typeof e&&e.__emotion_real!==e&&(u=function(t){var r=t.theme,i=(0,ba.Z)(t,mu);return e(_a({theme:gu(r)?n:r},i))});return m.apply(void 0,[u].concat((0,oe.Z)(o)))};return m.withConfig&&(g.withConfig=m.withConfig),g}}function wu(e,t){var n;return _a({toolbar:(n={minHeight:56},(0,ae.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,ae.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}function xu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function ku(e){if(e.type)return e;if("#"===e.charAt(0))return ku(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(vs(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(vs(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function Su(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Eu(e){var t="hsl"===(e=ku(e)).type||"hsla"===e.type?ku(function(e){var t=(e=ku(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),Su({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Au(e,t){return e=ku(e),t=xu(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Su(e)}function Tu(e,t){if(e=ku(e),t=xu(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Su(e)}function Cu(e,t){if(e=ku(e),t=xu(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Su(e)}var Pu={black:"#000",white:"#fff"},Iu={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Ru={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Lu={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Mu={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ou={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Fu={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Du={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Nu=["mode","contrastThreshold","tonalOffset"],ju={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Pu.white,default:Pu.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Bu={text:{primary:Pu.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Pu.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Uu(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Cu(e.main,i):"dark"===t&&(e.dark=Tu(e.main,a)))}function zu(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,o=void 0===a?.2:a,s=(0,ba.Z)(e,Nu),u=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ou[200],light:Ou[50],dark:Ou[400]}:{main:Ou[700],light:Ou[400],dark:Ou[800]}}(n),l=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ru[200],light:Ru[50],dark:Ru[400]}:{main:Ru[500],light:Ru[300],dark:Ru[700]}}(n),c=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Lu[500],light:Lu[300],dark:Lu[700]}:{main:Lu[700],light:Lu[400],dark:Lu[800]}}(n),d=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Fu[400],light:Fu[300],dark:Fu[700]}:{main:Fu[700],light:Fu[500],dark:Fu[900]}}(n),f=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Du[400],light:Du[300],dark:Du[700]}:{main:Du[800],light:Du[500],dark:Du[900]}}(n),h=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Mu[400],light:Mu[300],dark:Mu[700]}:{main:"#ed6c02",light:Mu[500],dark:Mu[900]}}(n);function p(e){var t=function(e,t){var n=Eu(e),r=Eu(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Bu.text.primary)>=i?Bu.text.primary:ju.text.primary;return t}var v=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,s=void 0===a?300:a,u=e.darkShade,l=void 0===u?700:u;if(!(t=_a({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(vs(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(vs(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return Uu(t,"light",s,o),Uu(t,"dark",l,o),t.contrastText||(t.contrastText=p(t.main)),t},m={dark:Bu,light:ju};return os(_a({common:_a({},Pu),mode:n,primary:v({color:u,name:"primary"}),secondary:v({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:c,name:"error"}),warning:v({color:h,name:"warning"}),info:v({color:d,name:"info"}),success:v({color:f,name:"success"}),grey:Iu,contrastThreshold:i,getContrastText:p,augmentColor:v,tonalOffset:o},m[n]),s)}var Vu=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var Zu={textTransform:"uppercase"},Hu='"Roboto", "Helvetica", "Arial", sans-serif';function Wu(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?Hu:r,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,u=void 0===s?300:s,l=n.fontWeightRegular,c=void 0===l?400:l,d=n.fontWeightMedium,f=void 0===d?500:d,h=n.fontWeightBold,p=void 0===h?700:h,v=n.htmlFontSize,m=void 0===v?16:v,g=n.allVariants,y=n.pxToRem,_=(0,ba.Z)(n,Vu);var b=o/14,w=y||function(e){return"".concat(e/m*b,"rem")},x=function(e,t,n,r,a){return _a({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===Hu?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},a,g);var o},k={h1:x(u,96,1.167,-1.5),h2:x(u,60,1.2,-.5),h3:x(c,48,1.167,0),h4:x(c,34,1.235,.25),h5:x(c,24,1.334,0),h6:x(f,20,1.6,.15),subtitle1:x(c,16,1.75,.15),subtitle2:x(f,14,1.57,.1),body1:x(c,16,1.5,.15),body2:x(c,14,1.43,.15),button:x(f,14,1.75,.4,Zu),caption:x(c,12,1.66,.4),overline:x(c,12,2.66,1,Zu)};return os(_a({htmlFontSize:m,pxToRem:w,fontFamily:i,fontSize:o,fontWeightLight:u,fontWeightRegular:c,fontWeightMedium:f,fontWeightBold:p},k),_,{clone:!1})}function Gu(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var qu=["none",Gu(0,2,1,-1,0,1,1,0,0,1,3,0),Gu(0,3,1,-2,0,2,2,0,0,1,5,0),Gu(0,3,3,-2,0,3,4,0,0,1,8,0),Gu(0,2,4,-1,0,4,5,0,0,1,10,0),Gu(0,3,5,-1,0,5,8,0,0,1,14,0),Gu(0,3,5,-1,0,6,10,0,0,1,18,0),Gu(0,4,5,-2,0,7,10,1,0,2,16,1),Gu(0,5,5,-3,0,8,10,1,0,3,14,2),Gu(0,5,6,-3,0,9,12,1,0,3,16,2),Gu(0,6,6,-3,0,10,14,1,0,4,18,3),Gu(0,6,7,-4,0,11,15,1,0,4,20,3),Gu(0,7,8,-4,0,12,17,2,0,5,22,4),Gu(0,7,8,-4,0,13,19,2,0,5,24,4),Gu(0,7,9,-4,0,14,21,2,0,5,26,4),Gu(0,8,9,-5,0,15,22,2,0,6,28,5),Gu(0,8,10,-5,0,16,24,2,0,6,30,5),Gu(0,8,11,-5,0,17,26,2,0,6,32,5),Gu(0,9,11,-5,0,18,28,2,0,7,34,6),Gu(0,9,12,-6,0,19,29,2,0,7,36,6),Gu(0,10,13,-6,0,20,31,3,0,8,38,7),Gu(0,10,13,-6,0,21,33,3,0,8,40,7),Gu(0,10,14,-6,0,22,35,3,0,8,42,7),Gu(0,11,14,-7,0,23,36,3,0,9,44,8),Gu(0,11,15,-7,0,24,38,3,0,9,46,8)],Ku=["duration","easing","delay"],Ju={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Xu={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Yu(e){return"".concat(Math.round(e),"ms")}function Qu(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function $u(e){var t=_a({},Ju,e.easing),n=_a({},Xu,e.duration);return _a({getAutoHeightDuration:Qu,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,s=void 0===o?t.easeInOut:o,u=r.delay,l=void 0===u?0:u;(0,ba.Z)(r,Ku);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:Yu(a)," ").concat(s," ").concat("string"===typeof l?l:Yu(l))})).join(",")}},e,{easing:t,duration:n})}var el={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},tl=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function nl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,s=e.typography,u=void 0===s?{}:s,l=(0,ba.Z)(e,tl);if(e.vars)throw new Error(vs(18));var c=zu(i),d=cu(e),f=os(d,{mixins:wu(d.breakpoints,n),palette:c,shadows:qu.slice(),typography:Wu(c,u),transitions:$u(o),zIndex:_a({},el)});f=os(f,l);for(var h=arguments.length,p=new Array(h>1?h-1:0),v=1;v<h;v++)p[v-1]=arguments[v];return(f=p.reduce((function(e,t){return os(e,t)}),f)).unstable_sxConfig=_a({},ou,null==l?void 0:l.unstable_sxConfig),f.unstable_sx=function(e){return uu({sx:e,theme:this})},f}var rl=nl(),il=function(e){return yu(e)&&"classes"!==e},al=yu,ol=bu({defaultTheme:rl,rootShouldForwardProp:il});function sl(e,t){var n=_a({},t);return Object.keys(e).forEach((function(r){if(r.toString().match(/^(components|slots)$/))n[r]=_a({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){var i=e[r]||{},a=t[r];n[r]={},a&&Object.keys(a)?i&&Object.keys(i)?(n[r]=_a({},a),Object.keys(i).forEach((function(e){n[r][e]=sl(i[e],a[e])}))):n[r]=a:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}var ul=e.createContext(null);var ll=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=e.useContext(ul);return r&&(t=r,0!==Object.keys(t).length)?r:n},cl=cu();var dl=function(){return ll(arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl)};function fl(e){var t=e.props,n=e.name,r=e.defaultTheme,i=function(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?sl(t.components[n].defaultProps,r):r}({theme:dl(r),name:n,props:t});return i}function hl(e){return fl({props:e.props,name:e.name,defaultTheme:rl})}var pl=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},vl=function(e){return e},ml=function(){var e=vl;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=vl}}}(),gl={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function yl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=gl[t];return r?"".concat(n,"-").concat(r):"".concat(ml.generate(e),"-").concat(t)}function _l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=yl(e,t,n)})),r}function bl(e){return yl("MuiPaper",e)}_l("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var wl=["className","component","elevation","square","variant"],xl=ol("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return _a({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&_a({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat(Au("#fff",pl(r.elevation)),", ").concat(Au("#fff",pl(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),kl=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiPaper"}),r=n.className,i=n.component,a=void 0===i?"div":i,o=n.elevation,s=void 0===o?1:o,u=n.square,l=void 0!==u&&u,c=n.variant,d=void 0===c?"elevation":c,f=(0,ba.Z)(n,wl),h=_a({},n,{component:a,elevation:s,square:l,variant:d}),p=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes;return ka({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},bl,i)}(h);return(0,_.jsx)(xl,_a({as:a,ownerState:h,className:xa(p.root,r),ref:t},f))}));function Sl(e){return yl("MuiCard",e)}_l("MuiCard",["root"]);var El=["className","raised"],Al=ol(kl,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),Tl=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiCard"}),r=n.className,i=n.raised,a=void 0!==i&&i,o=(0,ba.Z)(n,El),s=_a({},n,{raised:a}),u=function(e){return ka({root:["root"]},Sl,e.classes)}(s);return(0,_.jsx)(Al,_a({className:xa(u.root,r),elevation:a?8:void 0,ref:t,ownerState:s},o))})),Cl=["sx"];function Pl(e){var t,n=e.sx,r=function(e){var t,n,r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:ou;return Object.keys(e).forEach((function(t){i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r}((0,ba.Z)(e,Cl)),i=r.systemProps,a=r.otherProps;return t=Array.isArray(n)?[i].concat((0,oe.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return is(e)?_a({},i,e):i}:_a({},i,n),_a({},a,{sx:t})}var Il=ms;function Rl(e){return yl("MuiTypography",e)}_l("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var Ll=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Ml=ol("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(Il(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return _a({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Ol={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Fl={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Dl=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiTypography"}),r=function(e){return Fl[e]||e}(n.color),i=Pl(_a({},n,{color:r})),a=i.align,o=void 0===a?"inherit":a,s=i.className,u=i.component,l=i.gutterBottom,c=void 0!==l&&l,d=i.noWrap,f=void 0!==d&&d,h=i.paragraph,p=void 0!==h&&h,v=i.variant,m=void 0===v?"body1":v,g=i.variantMapping,y=void 0===g?Ol:g,b=(0,ba.Z)(i,Ll),w=_a({},i,{align:o,color:r,className:s,component:u,gutterBottom:c,noWrap:f,paragraph:p,variant:m,variantMapping:y}),x=u||(p?"p":y[m]||Ol[m])||"span",k=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,i=e.paragraph,a=e.variant,o=e.classes;return ka({root:["root",a,"inherit"!==e.align&&"align".concat(Il(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},Rl,o)}(w);return(0,_.jsx)(Ml,_a({as:x,ref:t,ownerState:w,className:xa(k.root,s)},b))})),Nl=Dl;function jl(e){return yl("MuiCardHeader",e)}var Bl=_l("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Ul=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],zl=ol("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:function(e,t){var n;return _a((n={},(0,ae.Z)(n,"& .".concat(Bl.title),t.title),(0,ae.Z)(n,"& .".concat(Bl.subheader),t.subheader),n),t.root)}})({display:"flex",alignItems:"center",padding:16}),Vl=ol("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:function(e,t){return t.avatar}})({display:"flex",flex:"0 0 auto",marginRight:16}),Zl=ol("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:function(e,t){return t.action}})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Hl=ol("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:function(e,t){return t.content}})({flex:"1 1 auto"}),Wl=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiCardHeader"}),r=n.action,i=n.avatar,a=n.className,o=n.component,s=void 0===o?"div":o,u=n.disableTypography,l=void 0!==u&&u,c=n.subheader,d=n.subheaderTypographyProps,f=n.title,h=n.titleTypographyProps,p=(0,ba.Z)(n,Ul),v=_a({},n,{component:s,disableTypography:l}),m=function(e){return ka({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},jl,e.classes)}(v),g=f;null==g||g.type===Nl||l||(g=(0,_.jsx)(Nl,_a({variant:i?"body2":"h5",className:m.title,component:"span",display:"block"},h,{children:g})));var y=c;return null==y||y.type===Nl||l||(y=(0,_.jsx)(Nl,_a({variant:i?"body2":"body1",className:m.subheader,color:"text.secondary",component:"span",display:"block"},d,{children:y}))),(0,_.jsxs)(zl,_a({className:xa(m.root,a),as:s,ref:t,ownerState:v},p,{children:[i&&(0,_.jsx)(Vl,{className:m.avatar,ownerState:v,children:i}),(0,_.jsxs)(Hl,{className:m.content,ownerState:v,children:[g,y]}),r&&(0,_.jsx)(Zl,{className:m.action,ownerState:v,children:r})]}))}));function Gl(e){return yl("MuiCardContent",e)}_l("MuiCardContent",["root"]);var ql=["className","component"],Kl=ol("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),Jl=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiCardContent"}),r=n.className,i=n.component,a=void 0===i?"div":i,o=(0,ba.Z)(n,ql),s=_a({},n,{component:a}),u=function(e){return ka({root:["root"]},Gl,e.classes)}(s);return(0,_.jsx)(Kl,_a({as:a,className:xa(u.root,r),ownerState:s,ref:t},o))})),Xl=bu(),Yl=["className","component","disableGutters","fixed","maxWidth","classes"],Ql=cu(),$l=Xl("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat(ms(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),ec=function(e){return fl({props:e,name:"MuiContainer",defaultTheme:Ql})};var tc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.createStyledComponent,r=void 0===n?$l:n,i=t.useThemeProps,a=void 0===i?ec:i,o=t.componentName,s=void 0===o?"MuiContainer":o,u=r((function(e){var t=e.theme;return _a({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!e.ownerState.disableGutters&&(0,ae.Z)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}))}),(function(e){var t=e.theme;return e.ownerState.fixed&&Object.keys(t.breakpoints.values).reduce((function(e,n){var r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(i).concat(t.breakpoints.unit)}),e}),{})}),(function(e){var t=e.theme,n=e.ownerState;return _a({},"xs"===n.maxWidth&&(0,ae.Z)({},t.breakpoints.up("xs"),{maxWidth:Math.max(t.breakpoints.values.xs,444)}),n.maxWidth&&"xs"!==n.maxWidth&&(0,ae.Z)({},t.breakpoints.up(n.maxWidth),{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}))})),l=e.forwardRef((function(e,t){var n=a(e),r=n.className,i=n.component,o=void 0===i?"div":i,l=n.disableGutters,c=void 0!==l&&l,d=n.fixed,f=void 0!==d&&d,h=n.maxWidth,p=void 0===h?"lg":h,v=(0,ba.Z)(n,Yl),m=_a({},n,{component:o,disableGutters:c,fixed:f,maxWidth:p}),g=function(e,t){var n=e.classes,r=e.fixed,i=e.disableGutters,a=e.maxWidth;return ka({root:["root",a&&"maxWidth".concat(ms(String(a))),r&&"fixed",i&&"disableGutters"]},(function(e){return yl(t,e)}),n)}(m,s);return(0,_.jsx)(u,_a({as:o,ownerState:m,className:xa(g.root,r),ref:t},v))}));return l}({createStyledComponent:ol("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat(Il(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:function(e){return hl({props:e,name:"MuiContainer"})}}),nc=tc;function rc(e){return yl("MuiFormGroup",e)}_l("MuiFormGroup",["root","row","error"]);var ic=e.createContext(void 0);function ac(){return e.useContext(ic)}function oc(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var sc=["className","row"],uc=ol("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.row&&t.row]}})((function(e){return _a({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.ownerState.row&&{flexDirection:"row"})})),lc=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiFormGroup"}),r=n.className,i=n.row,a=void 0!==i&&i,o=(0,ba.Z)(n,sc),s=_a({},n,{row:a,error:oc({props:n,muiFormControl:ac(),states:["error"]}).error}),u=function(e){var t=e.classes;return ka({root:["root",e.row&&"row",e.error&&"error"]},rc,t)}(s);return(0,_.jsx)(uc,_a({className:xa(u.root,r),ownerState:s,ref:t},o))})),cc=0;var dc=t.useId;function fc(t){if(void 0!==dc){var n=dc();return null!=t?t:n}return function(t){var n=e.useState(t),r=(0,l.Z)(n,2),i=r[0],a=r[1],o=t||i;return e.useEffect((function(){null==i&&a("mui-".concat(cc+=1))}),[i]),o}(t)}function hc(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function pc(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useMemo((function(){return n.every((function(e){return null==e}))?null:function(e){n.forEach((function(t){hc(t,e)}))}}),n)}function vc(e){return e&&e.ownerDocument||document}function mc(e){return vc(e).defaultView||window}function gc(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(t),t=setTimeout((function(){e.apply(r,a)}),n)}return r.clear=function(){clearTimeout(t)},r}var yc="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,_c=["onChange","maxRows","minRows","style","value"];function bc(e,t){return parseInt(e[t],10)||0}var wc={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function xc(e){return void 0===e||null===e||0===Object.keys(e).length}var kc=e.forwardRef((function(t,n){var i=t.onChange,a=t.maxRows,o=t.minRows,s=void 0===o?1:o,u=t.style,c=t.value,d=(0,ba.Z)(t,_c),f=e.useRef(null!=c).current,h=e.useRef(null),p=pc(n,h),v=e.useRef(null),m=e.useRef(0),g=e.useState({}),y=(0,l.Z)(g,2),b=y[0],w=y[1],x=e.useCallback((function(){var e=h.current,n=mc(e).getComputedStyle(e);if("0px"===n.width)return{};var r=v.current;r.style.width=n.width,r.value=e.value||t.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],o=bc(n,"padding-bottom")+bc(n,"padding-top"),u=bc(n,"border-bottom-width")+bc(n,"border-top-width"),l=r.scrollHeight;r.value="x";var c=r.scrollHeight,d=l;return s&&(d=Math.max(Number(s)*c,d)),a&&(d=Math.min(Number(a)*c,d)),{outerHeightStyle:(d=Math.max(d,c))+("border-box"===i?o+u:0),overflow:Math.abs(d-l)<=1}}),[a,s,t.placeholder]),k=function(e,t){var n=t.outerHeightStyle,r=t.overflow;return m.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==r)?(m.current+=1,{overflow:r,outerHeightStyle:n}):e},S=e.useCallback((function(){var e=x();xc(e)||w((function(t){return k(t,e)}))}),[x]);e.useEffect((function(){var e,t=gc((function(){m.current=0,h.current&&function(){var e=x();xc(e)||(0,r.flushSync)((function(){w((function(t){return k(t,e)}))}))}()})),n=mc(h.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(h.current),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}})),yc((function(){S()})),e.useEffect((function(){m.current=0}),[c]);return(0,_.jsxs)(e.Fragment,{children:[(0,_.jsx)("textarea",_a({value:c,onChange:function(e){m.current=0,f||S(),i&&i(e)},ref:p,rows:s,style:_a({height:b.outerHeightStyle,overflow:b.overflow?"hidden":null},u)},d)),(0,_.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:v,tabIndex:-1,style:_a({},wc,u,{padding:0})})]})})),Sc=kc;var Ec=function(e){return"string"===typeof e},Ac=pc,Tc=yc,Cc=n(2110),Pc=n.n(Cc),Ic=Go((function(t,n){var r=t.styles,i=zo([r],void 0,(0,e.useContext)(qo)),a=(0,e.useRef)();return Ho((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,o=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==o&&(r=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),a.current=[t,r],function(){t.flush()}}),[n]),Ho((function(){var e=a.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&Jo(n,i.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",i,t,!1)}}),[n,i.name]),null}));function Rc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zo(t)}var Lc=function(){var e=Rc.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Mc(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,i="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,_.jsx)(Ic,{styles:i})}var Oc=function(e){return(0,_.jsx)(Mc,_a({},e,{defaultTheme:rl}))};function Fc(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Dc(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Fc(e.value)&&""!==e.value||t&&Fc(e.defaultValue)&&""!==e.defaultValue)}function Nc(e){return yl("MuiInputBase",e)}var jc=_l("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Bc=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Uc=function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(Il(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},zc=function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Vc=ol("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Uc})((function(e){var t=e.theme,n=e.ownerState;return _a({},t.typography.body1,(0,ae.Z)({color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(jc.disabled),{color:(t.vars||t).palette.text.disabled,cursor:"default"}),n.multiline&&_a({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Zc=ol("input",{name:"MuiInputBase",slot:"Input",overridesResolver:zc})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode,a=_a({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),o={opacity:"0 !important"},s=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return _a((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,ae.Z)(t,"label[data-shrink=false] + .".concat(jc.formControl," &"),{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s}),(0,ae.Z)(t,"&.".concat(jc.disabled),{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled}),(0,ae.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),Hc=(0,_.jsx)(Oc,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Wc=e.forwardRef((function(t,n){var r,i=hl({props:t,name:"MuiInputBase"}),a=i["aria-describedby"],o=i.autoComplete,s=i.autoFocus,u=i.className,c=i.components,d=void 0===c?{}:c,f=i.componentsProps,h=void 0===f?{}:f,p=i.defaultValue,v=i.disabled,m=i.disableInjectingGlobalStyles,g=i.endAdornment,y=i.fullWidth,b=void 0!==y&&y,w=i.id,x=i.inputComponent,k=void 0===x?"input":x,S=i.inputProps,E=void 0===S?{}:S,A=i.inputRef,T=i.maxRows,C=i.minRows,P=i.multiline,I=void 0!==P&&P,R=i.name,L=i.onBlur,M=i.onChange,O=i.onClick,F=i.onFocus,D=i.onKeyDown,N=i.onKeyUp,j=i.placeholder,B=i.readOnly,U=i.renderSuffix,z=i.rows,V=i.slotProps,Z=void 0===V?{}:V,H=i.slots,W=void 0===H?{}:H,G=i.startAdornment,q=i.type,K=void 0===q?"text":q,J=i.value,X=(0,ba.Z)(i,Bc),Y=null!=E.value?E.value:J,Q=e.useRef(null!=Y).current,$=e.useRef(),ee=e.useCallback((function(e){0}),[]),te=Ac($,A,E.ref,ee),ne=e.useState(!1),re=(0,l.Z)(ne,2),ie=re[0],ae=re[1],oe=ac();var se=oc({props:i,muiFormControl:oe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});se.focused=oe?oe.focused:ie,e.useEffect((function(){!oe&&v&&ie&&(ae(!1),L&&L())}),[oe,v,ie,L]);var ue=oe&&oe.onFilled,le=oe&&oe.onEmpty,ce=e.useCallback((function(e){Dc(e)?ue&&ue():le&&le()}),[ue,le]);Tc((function(){Q&&ce({value:Y})}),[Y,ce,Q]);e.useEffect((function(){ce($.current)}),[]);var de=k,fe=E;I&&"input"===de&&(fe=_a(z?{type:void 0,minRows:z,maxRows:z}:{type:void 0,maxRows:T,minRows:C},fe),de=Sc);e.useEffect((function(){oe&&oe.setAdornedStart(Boolean(G))}),[oe,G]);var he=_a({},i,{color:se.color||"primary",disabled:se.disabled,endAdornment:g,error:se.error,focused:se.focused,formControl:oe,fullWidth:b,hiddenLabel:se.hiddenLabel,multiline:I,size:se.size,startAdornment:G,type:K}),pe=function(e){var t=e.classes,n=e.color,r=e.disabled,i=e.error,a=e.endAdornment,o=e.focused,s=e.formControl,u=e.fullWidth,l=e.hiddenLabel,c=e.multiline,d=e.readOnly,f=e.size,h=e.startAdornment,p=e.type;return ka({root:["root","color".concat(Il(n)),r&&"disabled",i&&"error",u&&"fullWidth",o&&"focused",s&&"formControl","small"===f&&"sizeSmall",c&&"multiline",h&&"adornedStart",a&&"adornedEnd",l&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",c&&"inputMultiline","small"===f&&"inputSizeSmall",l&&"inputHiddenLabel",h&&"inputAdornedStart",a&&"inputAdornedEnd",d&&"readOnly"]},Nc,t)}(he),ve=W.root||d.Root||Vc,me=Z.root||h.root||{},ge=W.input||d.Input||Zc;return fe=_a({},fe,null!=(r=Z.input)?r:h.input),(0,_.jsxs)(e.Fragment,{children:[!m&&Hc,(0,_.jsxs)(ve,_a({},me,!Ec(ve)&&{ownerState:_a({},he,me.ownerState)},{ref:n,onClick:function(e){$.current&&e.currentTarget===e.target&&$.current.focus(),O&&O(e)}},X,{className:xa(pe.root,me.className,u),children:[G,(0,_.jsx)(ic.Provider,{value:null,children:(0,_.jsx)(ge,_a({ownerState:he,"aria-invalid":se.error,"aria-describedby":a,autoComplete:o,autoFocus:s,defaultValue:p,disabled:se.disabled,id:w,onAnimationStart:function(e){ce("mui-auto-fill-cancel"===e.animationName?$.current:{value:"x"})},name:R,placeholder:j,readOnly:B,required:se.required,rows:z,value:Y,onKeyDown:D,onKeyUp:N,type:K},fe,!Ec(ge)&&{as:de,ownerState:_a({},he,fe.ownerState)},{ref:te,className:xa(pe.input,fe.className),onBlur:function(e){L&&L(e),E.onBlur&&E.onBlur(e),oe&&oe.onBlur?oe.onBlur(e):ae(!1)},onChange:function(e){if(!Q){var t=e.target||$.current;if(null==t)throw new Error(vs(1));ce({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];E.onChange&&E.onChange.apply(E,[e].concat(r)),M&&M.apply(void 0,[e].concat(r))},onFocus:function(e){se.disabled?e.stopPropagation():(F&&F(e),E.onFocus&&E.onFocus(e),oe&&oe.onFocus?oe.onFocus(e):ae(!0))}}))}),g,U?U(_a({},se,{startAdornment:G})):null]}))]})})),Gc=Wc;function qc(e){return yl("MuiInput",e)}var Kc=_a({},jc,_l("MuiInput",["root","underline","input"])),Jc=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Xc=ol(Vc,{shouldForwardProp:function(e){return il(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,oe.Z)(Uc(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i="rgba(".concat(n.vars.palette.common.onBackgroundChannel," / ").concat(n.vars.opacity.inputUnderline,")")),_a({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat((n.vars||n).palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,ae.Z)(t,"&.".concat(Kc.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,ae.Z)(t,"&.".concat(Kc.error),{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}}),(0,ae.Z)(t,"&:before",{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,ae.Z)(t,"&:hover:not(.".concat(Kc.disabled,", .").concat(Kc.error,"):before"),{borderBottom:"2px solid ".concat((n.vars||n).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}}),(0,ae.Z)(t,"&.".concat(Kc.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),Yc=ol(Zc,{name:"MuiInput",slot:"Input",overridesResolver:zc})({}),Qc=e.forwardRef((function(e,t){var n,r,i,a,o=hl({props:e,name:"MuiInput"}),s=o.disableUnderline,u=o.components,l=void 0===u?{}:u,c=o.componentsProps,d=o.fullWidth,f=void 0!==d&&d,h=o.inputComponent,p=void 0===h?"input":h,v=o.multiline,m=void 0!==v&&v,g=o.slotProps,y=o.slots,b=void 0===y?{}:y,w=o.type,x=void 0===w?"text":w,k=(0,ba.Z)(o,Jc),S=function(e){var t=e.classes;return _a({},t,ka({root:["root",!e.disableUnderline&&"underline"],input:["input"]},qc,t))}(o),E={root:{ownerState:{disableUnderline:s}}},A=(null!=g?g:c)?os(null!=g?g:c,E):E,T=null!=(n=null!=(r=b.root)?r:l.Root)?n:Xc,C=null!=(i=null!=(a=b.input)?a:l.Input)?i:Yc;return(0,_.jsx)(Gc,_a({slots:{root:T,input:C},slotProps:A,fullWidth:f,inputComponent:p,multiline:m,ref:t,type:x},k,{classes:S}))}));Qc.muiName="Input";var $c=Qc;function ed(e){return yl("MuiFilledInput",e)}var td=_a({},jc,_l("MuiFilledInput",["root","underline","input"])),nd=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],rd=ol(Vc,{shouldForwardProp:function(e){return il(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,oe.Z)(Uc(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n,r,i=e.theme,a=e.ownerState,o="light"===i.palette.mode,s=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return _a((t={position:"relative",backgroundColor:i.vars?i.vars.palette.FilledInput.bg:u,borderTopLeftRadius:(i.vars||i).shape.borderRadius,borderTopRightRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),"&:hover":{backgroundColor:i.vars?i.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:u}}},(0,ae.Z)(t,"&.".concat(td.focused),{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:u}),(0,ae.Z)(t,"&.".concat(td.disabled),{backgroundColor:i.vars?i.vars.palette.FilledInput.disabledBg:c}),t),!a.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(null==(r=(i.vars||i).palette[a.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"}},(0,ae.Z)(n,"&.".concat(td.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,ae.Z)(n,"&.".concat(td.error),{"&:before, &:after":{borderBottomColor:(i.vars||i).palette.error.main}}),(0,ae.Z)(n,"&:before",{borderBottom:"1px solid ".concat(i.vars?"rgba(".concat(i.vars.palette.common.onBackgroundChannel," / ").concat(i.vars.opacity.inputUnderline,")"):s),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"}),(0,ae.Z)(n,"&:hover:not(.".concat(td.disabled,", .").concat(td.error,"):before"),{borderBottom:"1px solid ".concat((i.vars||i).palette.text.primary)}),(0,ae.Z)(n,"&.".concat(td.disabled,":before"),{borderBottomStyle:"dotted"}),n),a.startAdornment&&{paddingLeft:12},a.endAdornment&&{paddingRight:12},a.multiline&&_a({padding:"25px 12px 8px"},"small"===a.size&&{paddingTop:21,paddingBottom:4},a.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),id=ol(Zc,{name:"MuiFilledInput",slot:"Input",overridesResolver:zc})((function(e){var t=e.theme,n=e.ownerState;return _a({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&(0,ae.Z)({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),ad=e.forwardRef((function(e,t){var n,r,i,a,o=hl({props:e,name:"MuiFilledInput"}),s=o.components,u=void 0===s?{}:s,l=o.componentsProps,c=o.fullWidth,d=void 0!==c&&c,f=o.inputComponent,h=void 0===f?"input":f,p=o.multiline,v=void 0!==p&&p,m=o.slotProps,g=o.slots,y=void 0===g?{}:g,b=o.type,w=void 0===b?"text":b,x=(0,ba.Z)(o,nd),k=_a({},o,{fullWidth:d,inputComponent:h,multiline:v,type:w}),S=function(e){var t=e.classes;return _a({},t,ka({root:["root",!e.disableUnderline&&"underline"],input:["input"]},ed,t))}(o),E={root:{ownerState:k},input:{ownerState:k}},A=(null!=m?m:l)?os(null!=m?m:l,E):E,T=null!=(n=null!=(r=y.root)?r:u.Root)?n:rd,C=null!=(i=null!=(a=y.input)?a:u.Input)?i:id;return(0,_.jsx)(Gc,_a({slots:{root:T,input:C},componentsProps:A,fullWidth:d,inputComponent:h,multiline:v,ref:t,type:w},x,{classes:S}))}));ad.muiName="Input";var od,sd=ad,ud=["children","classes","className","label","notched"],ld=ol("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),cd=ol("legend")((function(e){var t=e.ownerState,n=e.theme;return _a({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&_a({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function dd(e){return yl("MuiOutlinedInput",e)}var fd=_a({},jc,_l("MuiOutlinedInput",["root","notchedOutline","input"])),hd=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],pd=ol(Vc,{shouldForwardProp:function(e){return il(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Uc})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return _a((t={position:"relative",borderRadius:(n.vars||n).shape.borderRadius},(0,ae.Z)(t,"&:hover .".concat(fd.notchedOutline),{borderColor:(n.vars||n).palette.text.primary}),(0,ae.Z)(t,"@media (hover: none)",(0,ae.Z)({},"&:hover .".concat(fd.notchedOutline),{borderColor:n.vars?"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.23)"):i})),(0,ae.Z)(t,"&.".concat(fd.focused," .").concat(fd.notchedOutline),{borderColor:(n.vars||n).palette[r.color].main,borderWidth:2}),(0,ae.Z)(t,"&.".concat(fd.error," .").concat(fd.notchedOutline),{borderColor:(n.vars||n).palette.error.main}),(0,ae.Z)(t,"&.".concat(fd.disabled," .").concat(fd.notchedOutline),{borderColor:(n.vars||n).palette.action.disabled}),t),r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&_a({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),vd=ol((function(e){var t=e.className,n=e.label,r=e.notched,i=(0,ba.Z)(e,ud),a=null!=n&&""!==n,o=_a({},e,{notched:r,withLabel:a});return(0,_.jsx)(ld,_a({"aria-hidden":!0,className:t,ownerState:o},i,{children:(0,_.jsx)(cd,{ownerState:o,children:a?(0,_.jsx)("span",{children:n}):od||(od=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){var t=e.theme,n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),md=ol(Zc,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:zc})((function(e){var t=e.theme,n=e.ownerState;return _a({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&(0,ae.Z)({"&:-webkit-autofill":{borderRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),gd=e.forwardRef((function(t,n){var r,i,a,o,s,u=hl({props:t,name:"MuiOutlinedInput"}),l=u.components,c=void 0===l?{}:l,d=u.fullWidth,f=void 0!==d&&d,h=u.inputComponent,p=void 0===h?"input":h,v=u.label,m=u.multiline,g=void 0!==m&&m,y=u.notched,b=u.slots,w=void 0===b?{}:b,x=u.type,k=void 0===x?"text":x,S=(0,ba.Z)(u,hd),E=function(e){var t=e.classes;return _a({},t,ka({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},dd,t))}(u),A=ac(),T=oc({props:u,muiFormControl:A,states:["required"]}),C=_a({},u,{color:T.color||"primary",disabled:T.disabled,error:T.error,focused:T.focused,formControl:A,fullWidth:f,hiddenLabel:T.hiddenLabel,multiline:g,size:T.size,type:k}),P=null!=(r=null!=(i=w.root)?i:c.Root)?r:pd,I=null!=(a=null!=(o=w.input)?o:c.Input)?a:md;return(0,_.jsx)(Gc,_a({slots:{root:P,input:I},renderSuffix:function(t){return(0,_.jsx)(vd,{ownerState:C,className:E.notchedOutline,label:null!=v&&""!==v&&T.required?s||(s=(0,_.jsxs)(e.Fragment,{children:[v,"\xa0","*"]})):v,notched:"undefined"!==typeof y?y:Boolean(t.startAdornment||t.filled||t.focused)})},fullWidth:f,inputComponent:p,multiline:g,ref:n,type:k},S,{classes:_a({},E,{notchedOutline:null})}))}));gd.muiName="Input";var yd=gd;function _d(e){return yl("MuiFormLabel",e)}var bd=_l("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),wd=["children","className","color","component","disabled","error","filled","focused","required"],xd=ol("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return _a({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((function(e){var t,n=e.theme,r=e.ownerState;return _a({color:(n.vars||n).palette.text.secondary},n.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},(0,ae.Z)(t,"&.".concat(bd.focused),{color:(n.vars||n).palette[r.color].main}),(0,ae.Z)(t,"&.".concat(bd.disabled),{color:(n.vars||n).palette.text.disabled}),(0,ae.Z)(t,"&.".concat(bd.error),{color:(n.vars||n).palette.error.main}),t))})),kd=ol("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,ae.Z)({},"&.".concat(bd.error),{color:(t.vars||t).palette.error.main})})),Sd=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiFormLabel"}),r=n.children,i=n.className,a=n.component,o=void 0===a?"label":a,s=(0,ba.Z)(n,wd),u=oc({props:n,muiFormControl:ac(),states:["color","required","focused","disabled","error","filled"]}),l=_a({},n,{color:u.color||"primary",component:o,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),c=function(e){var t=e.classes,n=e.color,r=e.focused,i=e.disabled,a=e.error,o=e.filled,s=e.required;return ka({root:["root","color".concat(Il(n)),i&&"disabled",a&&"error",o&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",a&&"error"]},_d,t)}(l);return(0,_.jsxs)(xd,_a({as:o,ownerState:l,className:xa(c.root,i),ref:t},s,{children:[r,u.required&&(0,_.jsxs)(kd,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),Ed=Sd;function Ad(e){return yl("MuiInputLabel",e)}_l("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var Td=["disableAnimation","margin","shrink","variant","className"],Cd=ol(Ed,{shouldForwardProp:function(e){return il(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,ae.Z)({},"& .".concat(bd.asterisk),t.asterisk),t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return _a({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&_a({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&_a({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&_a({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Pd=e.forwardRef((function(e,t){var n=hl({name:"MuiInputLabel",props:e}),r=n.disableAnimation,i=void 0!==r&&r,a=n.shrink,o=n.className,s=(0,ba.Z)(n,Td),u=ac(),l=a;"undefined"===typeof l&&u&&(l=u.filled||u.focused||u.adornedStart);var c=oc({props:n,muiFormControl:u,states:["size","variant","required"]}),d=_a({},n,{disableAnimation:i,formControl:u,shrink:l,size:c.size,variant:c.variant,required:c.required}),f=function(e){var t=e.classes,n=e.formControl,r=e.size,i=e.shrink;return _a({},t,ka({root:["root",n&&"formControl",!e.disableAnimation&&"animated",i&&"shrink","small"===r&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},Ad,t))}(d);return(0,_.jsx)(Cd,_a({"data-shrink":l,ownerState:d,ref:t,className:xa(f.root,o)},s,{classes:f}))}));var Id=function(t,n){return e.isValidElement(t)&&-1!==n.indexOf(t.type.muiName)};function Rd(e){return yl("MuiFormControl",e)}_l("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var Ld=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Md=ol("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return _a({},t.root,t["margin".concat(Il(n.margin))],n.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return _a({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Od=e.forwardRef((function(t,n){var r=hl({props:t,name:"MuiFormControl"}),i=r.children,a=r.className,o=r.color,s=void 0===o?"primary":o,u=r.component,c=void 0===u?"div":u,d=r.disabled,f=void 0!==d&&d,h=r.error,p=void 0!==h&&h,v=r.focused,m=r.fullWidth,g=void 0!==m&&m,y=r.hiddenLabel,b=void 0!==y&&y,w=r.margin,x=void 0===w?"none":w,k=r.required,S=void 0!==k&&k,E=r.size,A=void 0===E?"medium":E,T=r.variant,C=void 0===T?"outlined":T,P=(0,ba.Z)(r,Ld),I=_a({},r,{color:s,component:c,disabled:f,error:p,fullWidth:g,hiddenLabel:b,margin:x,required:S,size:A,variant:C}),R=function(e){var t=e.classes,n=e.margin,r=e.fullWidth;return ka({root:["root","none"!==n&&"margin".concat(Il(n)),r&&"fullWidth"]},Rd,t)}(I),L=e.useState((function(){var t=!1;return i&&e.Children.forEach(i,(function(e){if(Id(e,["Input","Select"])){var n=Id(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)}})),t})),M=(0,l.Z)(L,2),O=M[0],F=M[1],D=e.useState((function(){var t=!1;return i&&e.Children.forEach(i,(function(e){Id(e,["Input","Select"])&&Dc(e.props,!0)&&(t=!0)})),t})),N=(0,l.Z)(D,2),j=N[0],B=N[1],U=e.useState(!1),z=(0,l.Z)(U,2),V=z[0],Z=z[1];f&&V&&Z(!1);var H,W=void 0===v||f?V:v,G=e.useMemo((function(){return{adornedStart:O,setAdornedStart:F,color:s,disabled:f,error:p,filled:j,focused:W,fullWidth:g,hiddenLabel:b,size:A,onBlur:function(){Z(!1)},onEmpty:function(){B(!1)},onFilled:function(){B(!0)},onFocus:function(){Z(!0)},registerEffect:H,required:S,variant:C}}),[O,s,f,p,j,W,g,b,H,S,A,C]);return(0,_.jsx)(ic.Provider,{value:G,children:(0,_.jsx)(Md,_a({as:c,ownerState:I,className:xa(R.root,a),ref:n},P,{children:i}))})})),Fd=Od;function Dd(e){return yl("MuiFormHelperText",e)}var Nd,jd=_l("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Bd=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Ud=ol("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.size&&t["size".concat(Il(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((function(e){var t,n=e.theme,r=e.ownerState;return _a({color:(n.vars||n).palette.text.secondary},n.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,ae.Z)(t,"&.".concat(jd.disabled),{color:(n.vars||n).palette.text.disabled}),(0,ae.Z)(t,"&.".concat(jd.error),{color:(n.vars||n).palette.error.main}),t),"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})})),zd=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiFormHelperText"}),r=n.children,i=n.className,a=n.component,o=void 0===a?"p":a,s=(0,ba.Z)(n,Bd),u=oc({props:n,muiFormControl:ac(),states:["variant","size","disabled","error","filled","focused","required"]}),l=_a({},n,{component:o,contained:"filled"===u.variant||"outlined"===u.variant,variant:u.variant,size:u.size,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),c=function(e){var t=e.classes,n=e.contained,r=e.size,i=e.disabled,a=e.error,o=e.filled,s=e.focused,u=e.required;return ka({root:["root",i&&"disabled",a&&"error",r&&"size".concat(Il(r)),n&&"contained",s&&"focused",o&&"filled",u&&"required"]},Dd,t)}(l);return(0,_.jsx)(Ud,_a({as:o,ownerState:l,className:xa(c.root,i),ref:t},s,{children:" "===r?Nd||(Nd=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),Vd=(n(7441),vc);var Zd=e.createContext({});function Hd(e){return yl("MuiList",e)}_l("MuiList",["root","padding","dense","subheader"]);var Wd=["children","className","component","dense","disablePadding","subheader"],Gd=ol("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return _a({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),qd=e.forwardRef((function(t,n){var r=hl({props:t,name:"MuiList"}),i=r.children,a=r.className,o=r.component,s=void 0===o?"ul":o,u=r.dense,l=void 0!==u&&u,c=r.disablePadding,d=void 0!==c&&c,f=r.subheader,h=(0,ba.Z)(r,Wd),p=e.useMemo((function(){return{dense:l}}),[l]),v=_a({},r,{component:s,dense:l,disablePadding:d}),m=function(e){var t=e.classes;return ka({root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]},Hd,t)}(v);return(0,_.jsx)(Zd.Provider,{value:p,children:(0,_.jsxs)(Gd,_a({as:s,className:xa(m.root,a),ref:n,ownerState:v},h,{children:[f,i]}))})}));function Kd(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var Jd=Kd,Xd=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Yd(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Qd(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function $d(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function ef(e,t,n,r,i,a){for(var o=!1,s=i(e,t,!!t&&n);s;){if(s===e.firstChild){if(o)return!1;o=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&$d(s,a)&&!u)return s.focus(),!0;s=i(e,s,n)}return!1}var tf=e.forwardRef((function(t,n){var r=t.actions,i=t.autoFocus,a=void 0!==i&&i,o=t.autoFocusItem,s=void 0!==o&&o,u=t.children,l=t.className,c=t.disabledItemsFocusable,d=void 0!==c&&c,f=t.disableListWrap,h=void 0!==f&&f,p=t.onKeyDown,v=t.variant,m=void 0===v?"selectedMenu":v,g=(0,ba.Z)(t,Xd),y=e.useRef(null),b=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Tc((function(){a&&y.current.focus()}),[a]),e.useImperativeHandle(r,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!y.current.style.width;if(e.clientHeight<y.current.clientHeight&&n){var r="".concat(Jd(Vd(e)),"px");y.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,y.current.style.width="calc(100% + ".concat(r,")")}return y.current}}}),[]);var w=Ac(y,n),x=-1;e.Children.forEach(u,(function(t,n){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===m&&t.props.selected||-1===x)&&(x=n))}));var k=e.Children.map(u,(function(t,n){if(n===x){var r={};return s&&(r.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===m&&(r.tabIndex=0),e.cloneElement(t,r)}return t}));return(0,_.jsx)(qd,_a({role:"menu",ref:w,className:l,onKeyDown:function(e){var t=y.current,n=e.key,r=Vd(t).activeElement;if("ArrowDown"===n)e.preventDefault(),ef(t,r,h,d,Yd);else if("ArrowUp"===n)e.preventDefault(),ef(t,r,h,d,Qd);else if("Home"===n)e.preventDefault(),ef(t,null,h,d,Yd);else if("End"===n)e.preventDefault(),ef(t,null,h,d,Qd);else if(1===n.length){var i=b.current,a=n.toLowerCase(),o=performance.now();i.keys.length>0&&(o-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=o,i.keys.push(a);var s=r&&!i.repeating&&$d(r,i);i.previousKeyMatched&&(s||ef(t,r,!1,d,Yd,i))?e.preventDefault():i.previousKeyMatched=!1}p&&p(e)},tabIndex:a?0:-1},g,{children:k}))})),nf=tf,rf=gc,af=mc,of=n(9611);function sf(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,of.Z)(e,t)}var uf=!1,lf=e.createContext(null),cf="unmounted",df="exited",ff="entering",hf="entered",pf="exiting",vf=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var i,a=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?a?(i=df,r.appearStatus=ff):i=hf:i=e.unmountOnExit||e.mountOnEnter?cf:df,r.state={status:i},r.nextCallback=null,r}sf(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===cf?{status:df}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==ff&&n!==hf&&(t=ff):n!==ff&&n!==hf||(t=pf)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===ff){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===df&&this.setState({status:cf})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,a=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=a[0],s=a[1],u=this.getTimeouts(),l=i?u.appear:u.enter;!e&&!n||uf?this.safeSetState({status:hf},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:ff},(function(){t.props.onEntering(o,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:hf},(function(){t.props.onEntered(o,s)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!uf?(this.props.onExit(i),this.safeSetState({status:pf},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:df},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:df},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],s=a[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var t=this.state.status;if(t===cf)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,ba.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(lf.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},n}(e.Component);function mf(){}vf.contextType=lf,vf.propTypes={},vf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mf,onEntering:mf,onEntered:mf,onExit:mf,onExiting:mf,onExited:mf},vf.UNMOUNTED=cf,vf.EXITED=df,vf.ENTERING=ff,vf.ENTERED=hf,vf.EXITING=pf;var gf=vf;function yf(){return dl(rl)}var _f=function(e){return e.scrollTop};function bf(e,t){var n,r,i=e.timeout,a=e.easing,o=e.style,s=void 0===o?{}:o;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof a?a[t.mode]:a,delay:s.transitionDelay}}var wf=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function xf(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var kf={entering:{opacity:1,transform:xf(1)},entered:{opacity:1,transform:"none"}},Sf="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ef=e.forwardRef((function(t,n){var r=t.addEndListener,i=t.appear,a=void 0===i||i,o=t.children,s=t.easing,u=t.in,l=t.onEnter,c=t.onEntered,d=t.onEntering,f=t.onExit,h=t.onExited,p=t.onExiting,v=t.style,m=t.timeout,g=void 0===m?"auto":m,y=t.TransitionComponent,b=void 0===y?gf:y,w=(0,ba.Z)(t,wf),x=e.useRef(),k=e.useRef(),S=yf(),E=e.useRef(null),A=Ac(E,o.ref,n),T=function(e){return function(t){if(e){var n=E.current;void 0===t?e(n):e(n,t)}}},C=T(d),P=T((function(e,t){_f(e);var n,r=bf({style:v,timeout:g,easing:s},{mode:"enter"}),i=r.duration,a=r.delay,o=r.easing;"auto"===g?(n=S.transitions.getAutoHeightDuration(e.clientHeight),k.current=n):n=i,e.style.transition=[S.transitions.create("opacity",{duration:n,delay:a}),S.transitions.create("transform",{duration:Sf?n:.666*n,delay:a,easing:o})].join(","),l&&l(e,t)})),I=T(c),R=T(p),L=T((function(e){var t,n=bf({style:v,timeout:g,easing:s},{mode:"exit"}),r=n.duration,i=n.delay,a=n.easing;"auto"===g?(t=S.transitions.getAutoHeightDuration(e.clientHeight),k.current=t):t=r,e.style.transition=[S.transitions.create("opacity",{duration:t,delay:i}),S.transitions.create("transform",{duration:Sf?t:.666*t,delay:Sf?i:i||.333*t,easing:a})].join(","),e.style.opacity=0,e.style.transform=xf(.75),f&&f(e)})),M=T(h);return e.useEffect((function(){return function(){clearTimeout(x.current)}}),[]),(0,_.jsx)(b,_a({appear:a,in:u,nodeRef:E,onEnter:P,onEntered:I,onEntering:C,onExit:L,onExited:M,onExiting:R,addEndListener:function(e){"auto"===g&&(x.current=setTimeout(e,k.current||0)),r&&r(E.current,e)},timeout:"auto"===g?null:g},w,{children:function(t,n){return e.cloneElement(o,_a({style:_a({opacity:0,transform:xf(.75),visibility:"exited"!==t||u?void 0:"hidden"},kf[t],v,o.props.style),ref:A},n))}}))}));Ef.muiSupportAuto=!0;var Af=Ef;function Tf(t){var n=e.useRef(t);return yc((function(){n.current=t})),e.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}function Cf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var Pf=e.forwardRef((function(t,n){var i=t.children,a=t.container,o=t.disablePortal,s=void 0!==o&&o,u=e.useState(null),c=(0,l.Z)(u,2),d=c[0],f=c[1],h=pc(e.isValidElement(i)?i.ref:null,n);if(yc((function(){s||f(function(e){return"function"===typeof e?e():e}(a)||document.body)}),[a,s]),yc((function(){if(d&&!s)return hc(n,d),function(){hc(n,null)}}),[n,d,s]),s){if(e.isValidElement(i)){var p={ref:h};return e.cloneElement(i,p)}return(0,_.jsx)(e.Fragment,{children:i})}return(0,_.jsx)(e.Fragment,{children:d?r.createPortal(i,d):d})}));function If(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Rf(e){return parseInt(mc(e).getComputedStyle(e).paddingRight,10)||0}function Lf(e,t,n,r,i){var a=[t,n].concat((0,oe.Z)(r));[].forEach.call(e.children,(function(e){var t=-1===a.indexOf(e),n=!function(e){var t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&If(e,i)}))}function Mf(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Of(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=vc(e);return t.body===e?mc(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var i=Kd(vc(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Rf(r)+i,"px");var a=vc(r).querySelectorAll(".mui-fixed");[].forEach.call(a,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(Rf(e)+i,"px")}))}var o;if(r.parentNode instanceof DocumentFragment)o=vc(r).body;else{var s=r.parentElement,u=mc(r);o="HTML"===(null==s?void 0:s.nodeName)&&"scroll"===u.getComputedStyle(s).overflowY?s:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var Ff=function(){function e(){(0,T.Z)(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return(0,A.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&If(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Lf(t,e.mount,e.modalRef,r,!0);var i=Mf(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=Mf(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Of(r,t))}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.modals.indexOf(e);if(-1===n)return n;var r=Mf(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&If(e.modalRef,t),Lf(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{var a=i.modals[i.modals.length-1];a.modalRef&&If(a.modalRef,!1)}return n}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),Df=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Nf(e){var t=[],n=[];return Array.from(e.querySelectorAll(Df)).forEach((function(e,r){var i=function(e){var t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function jf(){return!0}var Bf=function(t){var n=t.children,r=t.disableAutoFocus,i=void 0!==r&&r,a=t.disableEnforceFocus,o=void 0!==a&&a,s=t.disableRestoreFocus,u=void 0!==s&&s,l=t.getTabbable,c=void 0===l?Nf:l,d=t.isEnabled,f=void 0===d?jf:d,h=t.open,p=e.useRef(!1),v=e.useRef(null),m=e.useRef(null),g=e.useRef(null),y=e.useRef(null),b=e.useRef(!1),w=e.useRef(null),x=pc(n.ref,w),k=e.useRef(null);e.useEffect((function(){h&&w.current&&(b.current=!i)}),[i,h]),e.useEffect((function(){if(h&&w.current){var e=vc(w.current);return w.current.contains(e.activeElement)||(w.current.hasAttribute("tabIndex")||w.current.setAttribute("tabIndex","-1"),b.current&&w.current.focus()),function(){u||(g.current&&g.current.focus&&(p.current=!0,g.current.focus()),g.current=null)}}}),[h]),e.useEffect((function(){if(h&&w.current){var e=vc(w.current),t=function(t){var n=w.current;if(null!==n)if(e.hasFocus()&&!o&&f()&&!p.current){if(!n.contains(e.activeElement)){if(t&&y.current!==t.target||e.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!b.current)return;var r=[];if(e.activeElement!==v.current&&e.activeElement!==m.current||(r=c(w.current)),r.length>0){var i,a,s=Boolean((null==(i=k.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=k.current)?void 0:a.key)),u=r[0],l=r[r.length-1];"string"!==typeof u&&"string"!==typeof l&&(s?l.focus():u.focus())}else n.focus()}}else p.current=!1},n=function(t){k.current=t,!o&&f()&&"Tab"===t.key&&e.activeElement===w.current&&t.shiftKey&&(p.current=!0,m.current&&m.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){e.activeElement&&"BODY"===e.activeElement.tagName&&t(null)}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[i,o,u,f,h,c]);var S=function(e){null===g.current&&(g.current=e.relatedTarget),b.current=!0};return(0,_.jsxs)(e.Fragment,{children:[(0,_.jsx)("div",{tabIndex:h?0:-1,onFocus:S,ref:v,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:x,onFocus:function(e){null===g.current&&(g.current=e.relatedTarget),b.current=!0,y.current=e.target;var t=n.props.onFocus;t&&t(e)}}),(0,_.jsx)("div",{tabIndex:h?0:-1,onFocus:S,ref:m,"data-testid":"sentinelEnd"})]})};function Uf(e){return yl("MuiModal",e)}_l("MuiModal",["root","hidden"]);function zf(e){if(void 0===e)return{};var t={};return Object.keys(e).filter((function(t){return!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])})).forEach((function(n){t[n]=e[n]})),t}function Vf(e){var t=e.getSlotProps,n=e.additionalProps,r=e.externalSlotProps,i=e.externalForwardedProps,a=e.className;if(!t){var o=xa(null==i?void 0:i.className,null==r?void 0:r.className,a,null==n?void 0:n.className),s=_a({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),u=_a({},n,i,r);return o.length>0&&(u.className=o),Object.keys(s).length>0&&(u.style=s),{props:u,internalRef:void 0}}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var n={};return Object.keys(e).filter((function(n){return n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n)})).forEach((function(t){n[t]=e[t]})),n}(_a({},i,r)),c=zf(r),d=zf(i),f=t(l),h=xa(null==f?void 0:f.className,null==n?void 0:n.className,a,null==i?void 0:i.className,null==r?void 0:r.className),p=_a({},null==f?void 0:f.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),v=_a({},f,n,d,c);return h.length>0&&(v.className=h),Object.keys(p).length>0&&(v.style=p),{props:v,internalRef:f.ref}}function Zf(e,t){return"function"===typeof e?e(t):e}var Hf=["elementType","externalSlotProps","ownerState"];function Wf(e){var t,n=e.elementType,r=e.externalSlotProps,i=e.ownerState,a=(0,ba.Z)(e,Hf),o=Zf(r,i),s=Vf(_a({},a,{externalSlotProps:o})),u=function(e,t,n){return void 0===e||Ec(e)?t:_a({},t,{ownerState:_a({},t.ownerState,n)})}(n,_a({},s.props,{ref:pc(s.internalRef,null==o?void 0:o.ref,null==(t=e.additionalProps)?void 0:t.ref)}),i);return u}var Gf=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"];var qf=new Ff,Kf=e.forwardRef((function(t,n){var r,i,a=t.children,o=t.classes,s=t.closeAfterTransition,u=void 0!==s&&s,c=t.component,d=t.container,f=t.disableAutoFocus,h=void 0!==f&&f,p=t.disableEnforceFocus,v=void 0!==p&&p,m=t.disableEscapeKeyDown,g=void 0!==m&&m,y=t.disablePortal,b=void 0!==y&&y,w=t.disableRestoreFocus,x=void 0!==w&&w,k=t.disableScrollLock,S=void 0!==k&&k,E=t.hideBackdrop,A=void 0!==E&&E,T=t.keepMounted,C=void 0!==T&&T,P=t.manager,I=void 0===P?qf:P,R=t.onBackdropClick,L=t.onClose,M=t.onKeyDown,O=t.open,F=t.onTransitionEnter,D=t.onTransitionExited,N=t.slotProps,j=void 0===N?{}:N,B=t.slots,U=void 0===B?{}:B,z=(0,ba.Z)(t,Gf),V=e.useState(!O),Z=(0,l.Z)(V,2),H=Z[0],W=Z[1],G=e.useRef({}),q=e.useRef(null),K=e.useRef(null),J=pc(K,n),X=function(e){return!!e&&e.props.hasOwnProperty("in")}(a),Y=null==(r=t["aria-hidden"])||r,Q=function(){return G.current.modalRef=K.current,G.current.mountNode=q.current,G.current},$=function(){I.mount(Q(),{disableScrollLock:S}),K.current&&(K.current.scrollTop=0)},ee=Tf((function(){var e=function(e){return"function"===typeof e?e():e}(d)||vc(q.current).body;I.add(Q(),e),K.current&&$()})),te=e.useCallback((function(){return I.isTopModal(Q())}),[I]),ne=Tf((function(e){q.current=e,e&&K.current&&(O&&te()?$():If(K.current,Y))})),re=e.useCallback((function(){I.remove(Q(),Y)}),[I,Y]);e.useEffect((function(){return function(){re()}}),[re]),e.useEffect((function(){O?ee():X&&u||re()}),[O,re,X,u,ee]);var ie=_a({},t,{classes:o,closeAfterTransition:u,disableAutoFocus:h,disableEnforceFocus:v,disableEscapeKeyDown:g,disablePortal:b,disableRestoreFocus:x,disableScrollLock:S,exited:H,hideBackdrop:A,keepMounted:C}),ae=function(e){var t=e.open,n=e.exited;return ka({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},Uf,e.classes)}(ie),oe={};void 0===a.props.tabIndex&&(oe.tabIndex="-1"),X&&(oe.onEnter=Cf((function(){W(!1),F&&F()}),a.props.onEnter),oe.onExited=Cf((function(){W(!0),D&&D(),u&&re()}),a.props.onExited));var se=null!=(i=null!=c?c:U.root)?i:"div",ue=Wf({elementType:se,externalSlotProps:j.root,externalForwardedProps:z,additionalProps:{ref:J,role:"presentation",onKeyDown:function(e){M&&M(e),"Escape"===e.key&&te()&&(g||(e.stopPropagation(),L&&L(e,"escapeKeyDown")))}},className:ae.root,ownerState:ie}),le=U.backdrop,ce=Wf({elementType:le,externalSlotProps:j.backdrop,additionalProps:{"aria-hidden":!0,onClick:function(e){e.target===e.currentTarget&&(R&&R(e),L&&L(e,"backdropClick"))},open:O},className:ae.backdrop,ownerState:ie});return C||O||X&&!H?(0,_.jsx)(Pf,{ref:ne,container:d,disablePortal:b,children:(0,_.jsxs)(se,_a({},ue,{children:[!A&&le?(0,_.jsx)(le,_a({},ce)):null,(0,_.jsx)(Bf,{disableEnforceFocus:v,disableAutoFocus:h,disableRestoreFocus:x,isEnabled:te,open:O,children:e.cloneElement(a,oe)})]}))}):null})),Jf=Kf,Xf=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Yf={entering:{opacity:1},entered:{opacity:1}},Qf=e.forwardRef((function(t,n){var r=yf(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},a=t.addEndListener,o=t.appear,s=void 0===o||o,u=t.children,l=t.easing,c=t.in,d=t.onEnter,f=t.onEntered,h=t.onEntering,p=t.onExit,v=t.onExited,m=t.onExiting,g=t.style,y=t.timeout,b=void 0===y?i:y,w=t.TransitionComponent,x=void 0===w?gf:w,k=(0,ba.Z)(t,Xf),S=e.useRef(null),E=Ac(S,u.ref,n),A=function(e){return function(t){if(e){var n=S.current;void 0===t?e(n):e(n,t)}}},T=A(h),C=A((function(e,t){_f(e);var n=bf({style:g,timeout:b,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),d&&d(e,t)})),P=A(f),I=A(m),R=A((function(e){var t=bf({style:g,timeout:b,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),p&&p(e)})),L=A(v);return(0,_.jsx)(x,_a({appear:s,in:c,nodeRef:S,onEnter:C,onEntered:P,onEntering:T,onExit:R,onExited:L,onExiting:I,addEndListener:function(e){a&&a(S.current,e)},timeout:b},k,{children:function(t,n){return e.cloneElement(u,_a({style:_a({opacity:0,visibility:"exited"!==t||c?void 0:"hidden"},Yf[t],g,u.props.style),ref:E},n))}}))})),$f=Qf;function eh(e){return yl("MuiBackdrop",e)}_l("MuiBackdrop",["root","invisible"]);var th=["children","component","components","componentsProps","className","invisible","open","slotProps","slots","transitionDuration","TransitionComponent"],nh=ol("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){return _a({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.ownerState.invisible&&{backgroundColor:"transparent"})})),rh=e.forwardRef((function(e,t){var n,r,i,a=hl({props:e,name:"MuiBackdrop"}),o=a.children,s=a.component,u=void 0===s?"div":s,l=a.components,c=void 0===l?{}:l,d=a.componentsProps,f=void 0===d?{}:d,h=a.className,p=a.invisible,v=void 0!==p&&p,m=a.open,g=a.slotProps,y=void 0===g?{}:g,b=a.slots,w=void 0===b?{}:b,x=a.transitionDuration,k=a.TransitionComponent,S=void 0===k?$f:k,E=(0,ba.Z)(a,th),A=_a({},a,{component:u,invisible:v}),T=function(e){var t=e.classes;return ka({root:["root",e.invisible&&"invisible"]},eh,t)}(A),C=null!=(n=y.root)?n:f.root;return(0,_.jsx)(S,_a({in:m,timeout:x},E,{children:(0,_.jsx)(nh,_a({"aria-hidden":!0},C,{as:null!=(r=null!=(i=w.root)?i:c.Root)?r:u,className:xa(T.root,h,null==C?void 0:C.className),ownerState:_a({},A,null==C?void 0:C.ownerState),classes:T,ref:t,children:o}))}))})),ih=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],ah=ol("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return _a({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),oh=ol(rh,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),sh=e.forwardRef((function(t,n){var r,i,a,o,s,u,c=hl({name:"MuiModal",props:t}),d=c.BackdropComponent,f=void 0===d?oh:d,h=c.BackdropProps,p=c.closeAfterTransition,v=void 0!==p&&p,m=c.children,g=c.component,y=c.components,b=void 0===y?{}:y,w=c.componentsProps,x=void 0===w?{}:w,k=c.disableAutoFocus,S=void 0!==k&&k,E=c.disableEnforceFocus,A=void 0!==E&&E,T=c.disableEscapeKeyDown,C=void 0!==T&&T,P=c.disablePortal,I=void 0!==P&&P,R=c.disableRestoreFocus,L=void 0!==R&&R,M=c.disableScrollLock,O=void 0!==M&&M,F=c.hideBackdrop,D=void 0!==F&&F,N=c.keepMounted,j=void 0!==N&&N,B=c.slotProps,U=c.slots,z=c.theme,V=(0,ba.Z)(c,ih),Z=e.useState(!0),H=(0,l.Z)(Z,2),W=H[0],G=H[1],q={closeAfterTransition:v,disableAutoFocus:S,disableEnforceFocus:A,disableEscapeKeyDown:C,disablePortal:I,disableRestoreFocus:L,disableScrollLock:O,hideBackdrop:D,keepMounted:j},K=_a({},c,q,{exited:W}),J=function(e){return e.classes}(K),X=null!=(r=null!=(i=null==U?void 0:U.root)?i:b.Root)?r:ah,Y=null!=(a=null!=(o=null==U?void 0:U.backdrop)?o:b.Backdrop)?a:f,Q=null!=(s=null==B?void 0:B.root)?s:x.root,$=null!=(u=null==B?void 0:B.backdrop)?u:x.backdrop;return(0,_.jsx)(Jf,_a({slots:{root:X,backdrop:Y},slotProps:{root:function(){return _a({},Zf(Q,K),!Ec(X)&&{as:g,theme:z})},backdrop:function(){return _a({},h,Zf($,K))}},onTransitionEnter:function(){return G(!1)},onTransitionExited:function(){return G(!0)},ref:n},V,{classes:J},q,{children:m}))}));function uh(e){return yl("MuiPopover",e)}_l("MuiPopover",["root","paper"]);var lh=["onEntering"],ch=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function dh(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function fh(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function hh(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function ph(e){return"function"===typeof e?e():e}var vh=ol(sh,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),mh=ol(kl,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),gh=e.forwardRef((function(t,n){var r=hl({props:t,name:"MuiPopover"}),i=r.action,a=r.anchorEl,o=r.anchorOrigin,s=void 0===o?{vertical:"top",horizontal:"left"}:o,u=r.anchorPosition,c=r.anchorReference,d=void 0===c?"anchorEl":c,f=r.children,h=r.className,p=r.container,v=r.elevation,m=void 0===v?8:v,g=r.marginThreshold,y=void 0===g?16:g,b=r.open,w=r.PaperProps,x=void 0===w?{}:w,k=r.transformOrigin,S=void 0===k?{vertical:"top",horizontal:"left"}:k,E=r.TransitionComponent,A=void 0===E?Af:E,T=r.transitionDuration,C=void 0===T?"auto":T,P=r.TransitionProps,I=(void 0===P?{}:P).onEntering,R=(0,ba.Z)(r.TransitionProps,lh),L=(0,ba.Z)(r,ch),M=e.useRef(),O=Ac(M,x.ref),F=_a({},r,{anchorOrigin:s,anchorReference:d,elevation:m,marginThreshold:y,PaperProps:x,transformOrigin:S,TransitionComponent:A,transitionDuration:C,TransitionProps:R}),D=function(e){return ka({root:["root"],paper:["paper"]},uh,e.classes)}(F),N=e.useCallback((function(){if("anchorPosition"===d)return u;var e=ph(a),t=(e&&1===e.nodeType?e:Vd(M.current).body).getBoundingClientRect();return{top:t.top+dh(t,s.vertical),left:t.left+fh(t,s.horizontal)}}),[a,s.horizontal,s.vertical,u,d]),j=e.useCallback((function(e){return{vertical:dh(e,S.vertical),horizontal:fh(e,S.horizontal)}}),[S.horizontal,S.vertical]),B=e.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=j(t);if("none"===d)return{top:null,left:null,transformOrigin:hh(n)};var r=N(),i=r.top-n.vertical,o=r.left-n.horizontal,s=i+t.height,u=o+t.width,l=af(ph(a)),c=l.innerHeight-y,f=l.innerWidth-y;if(i<y){var h=i-y;i-=h,n.vertical+=h}else if(s>c){var p=s-c;i-=p,n.vertical+=p}if(o<y){var v=o-y;o-=v,n.horizontal+=v}else if(u>f){var m=u-f;o-=m,n.horizontal+=m}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:hh(n)}}),[a,d,N,j,y]),U=e.useState(b),z=(0,l.Z)(U,2),V=z[0],Z=z[1],H=e.useCallback((function(){var e=M.current;if(e){var t=B(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,Z(!0)}}),[B]);e.useEffect((function(){b&&H()})),e.useImperativeHandle(i,(function(){return b?{updatePosition:function(){H()}}:null}),[b,H]),e.useEffect((function(){if(b){var e=rf((function(){H()})),t=af(a);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[a,b,H]);var W=C;"auto"!==C||A.muiSupportAuto||(W=void 0);var G=p||(a?Vd(ph(a)).body:void 0);return(0,_.jsx)(vh,_a({BackdropProps:{invisible:!0},className:xa(D.root,h),container:G,open:b,ref:n,ownerState:F},L,{children:(0,_.jsx)(A,_a({appear:!0,in:b,onEntering:function(e,t){I&&I(e,t),H()},onExited:function(){Z(!1)},timeout:W},R,{children:(0,_.jsx)(mh,_a({elevation:m},x,{ref:O,className:xa(D.paper,x.className)},V?void 0:{style:_a({},x.style,{opacity:0})},{ownerState:F,children:f}))}))}))}));function yh(e){return yl("MuiMenu",e)}_l("MuiMenu",["root","paper","list"]);var _h=["onEntering"],bh=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],wh={vertical:"top",horizontal:"right"},xh={vertical:"top",horizontal:"left"},kh=ol(gh,{shouldForwardProp:function(e){return il(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Sh=ol(kl,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Eh=ol(nf,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),Ah=e.forwardRef((function(t,n){var r=hl({props:t,name:"MuiMenu"}),i=r.autoFocus,a=void 0===i||i,o=r.children,s=r.disableAutoFocusItem,u=void 0!==s&&s,l=r.MenuListProps,c=void 0===l?{}:l,d=r.onClose,f=r.open,h=r.PaperProps,p=void 0===h?{}:h,v=r.PopoverClasses,m=r.transitionDuration,g=void 0===m?"auto":m,y=r.TransitionProps,b=(void 0===y?{}:y).onEntering,w=r.variant,x=void 0===w?"selectedMenu":w,k=(0,ba.Z)(r.TransitionProps,_h),S=(0,ba.Z)(r,bh),E=yf(),A="rtl"===E.direction,T=_a({},r,{autoFocus:a,disableAutoFocusItem:u,MenuListProps:c,onEntering:b,PaperProps:p,transitionDuration:g,TransitionProps:k,variant:x}),C=function(e){return ka({root:["root"],paper:["paper"],list:["list"]},yh,e.classes)}(T),P=a&&!u&&f,I=e.useRef(null),R=-1;return e.Children.map(o,(function(t,n){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===x&&t.props.selected||-1===R)&&(R=n))})),(0,_.jsx)(kh,_a({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:A?"right":"left"},transformOrigin:A?wh:xh,PaperProps:_a({component:Sh},p,{classes:_a({},p.classes,{root:C.paper})}),className:C.root,open:f,ref:n,transitionDuration:g,TransitionProps:_a({onEntering:function(e,t){I.current&&I.current.adjustStyleForScrollbar(e,E),b&&b(e,t)}},k),ownerState:T},S,{classes:v,children:(0,_.jsx)(Eh,_a({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:I,autoFocus:a&&(-1===R||u),autoFocusItem:P,variant:x},c,{className:xa(C.list,c.className),children:o}))}))})),Th=Ah;function Ch(e){return yl("MuiNativeSelect",e)}var Ph=_l("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Ih=["className","disabled","IconComponent","inputRef","variant"],Rh=function(e){var t,n=e.ownerState,r=e.theme;return _a((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":_a({},r.vars?{backgroundColor:"rgba(".concat(r.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"}},(0,ae.Z)(t,"&.".concat(Ph.disabled),{cursor:"default"}),(0,ae.Z)(t,"&[multiple]",{height:"auto"}),(0,ae.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:(r.vars||r).palette.background.paper}),(0,ae.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:(r.vars||r).shape.borderRadius,"&:focus":{borderRadius:(r.vars||r).shape.borderRadius},"&&&":{paddingRight:32}})},Lh=ol("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:il,overridesResolver:function(e,t){var n=e.ownerState;return[t.select,t[n.variant],(0,ae.Z)({},"&.".concat(Ph.multiple),t.multiple)]}})(Rh),Mh=function(e){var t=e.ownerState,n=e.theme;return _a((0,ae.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active},"&.".concat(Ph.disabled),{color:(n.vars||n).palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},Oh=ol("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat(Il(n.variant))],n.open&&t.iconOpen]}})(Mh),Fh=e.forwardRef((function(t,n){var r=t.className,i=t.disabled,a=t.IconComponent,o=t.inputRef,s=t.variant,u=void 0===s?"standard":s,l=(0,ba.Z)(t,Ih),c=_a({},t,{disabled:i,variant:u}),d=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,a=e.open;return ka({select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat(Il(n)),a&&"iconOpen",r&&"disabled"]},Ch,t)}(c);return(0,_.jsxs)(e.Fragment,{children:[(0,_.jsx)(Lh,_a({ownerState:c,className:xa(d.select,r),disabled:i,ref:o||n},l)),t.multiple?null:(0,_.jsx)(Oh,{as:a,ownerState:c,className:d.icon})]})}));var Dh=function(t){var n=t.controlled,r=t.default,i=(t.name,t.state,e.useRef(void 0!==n).current),a=e.useState(r),o=(0,l.Z)(a,2),s=o[0],u=o[1];return[i?n:s,e.useCallback((function(e){i||u(e)}),[])]};function Nh(e){return yl("MuiSelect",e)}var jh,Bh=_l("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Uh=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],zh=ol("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var n=e.ownerState;return[(0,ae.Z)({},"&.".concat(Bh.select),t.select),(0,ae.Z)({},"&.".concat(Bh.select),t[n.variant]),(0,ae.Z)({},"&.".concat(Bh.multiple),t.multiple)]}})(Rh,(0,ae.Z)({},"&.".concat(Bh.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),Vh=ol("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat(Il(n.variant))],n.open&&t.iconOpen]}})(Mh),Zh=ol("input",{shouldForwardProp:function(e){return al(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Hh(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Wh(e){return null==e||"string"===typeof e&&!e.trim()}var Gh=e.forwardRef((function(t,n){var r=t["aria-describedby"],i=t["aria-label"],a=t.autoFocus,o=t.autoWidth,s=t.children,u=t.className,c=t.defaultOpen,d=t.defaultValue,f=t.disabled,h=t.displayEmpty,p=t.IconComponent,v=t.inputRef,m=t.labelId,g=t.MenuProps,y=void 0===g?{}:g,b=t.multiple,w=t.name,x=t.onBlur,k=t.onChange,S=t.onClose,E=t.onFocus,A=t.onOpen,T=t.open,C=t.readOnly,P=t.renderValue,I=t.SelectDisplayProps,R=void 0===I?{}:I,L=t.tabIndex,M=t.value,O=t.variant,F=void 0===O?"standard":O,D=(0,ba.Z)(t,Uh),N=Dh({controlled:M,default:d,name:"Select"}),j=(0,l.Z)(N,2),B=j[0],U=j[1],z=Dh({controlled:T,default:c,name:"Select"}),V=(0,l.Z)(z,2),Z=V[0],H=V[1],W=e.useRef(null),G=e.useRef(null),q=e.useState(null),K=(0,l.Z)(q,2),J=K[0],X=K[1],Y=e.useRef(null!=T).current,Q=e.useState(),$=(0,l.Z)(Q,2),ee=$[0],te=$[1],ne=Ac(n,v),re=e.useCallback((function(e){G.current=e,e&&X(e)}),[]),ie=null==J?void 0:J.parentNode;e.useImperativeHandle(ne,(function(){return{focus:function(){G.current.focus()},node:W.current,value:B}}),[B]),e.useEffect((function(){c&&Z&&J&&!Y&&(te(o?null:ie.clientWidth),G.current.focus())}),[J,o]),e.useEffect((function(){a&&G.current.focus()}),[a]),e.useEffect((function(){if(m){var e=Vd(G.current).getElementById(m);if(e){var t=function(){getSelection().isCollapsed&&G.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[m]);var ae,oe,se=function(e,t){e?A&&A(t):S&&S(t),Y||(te(o?null:ie.clientWidth),H(e))},ue=e.Children.toArray(s),le=function(e){return function(t){var n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(B)?B.slice():[];var r=B.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),B!==n&&(U(n),k)){var i=t.nativeEvent||t,a=new i.constructor(i.type,i);Object.defineProperty(a,"target",{writable:!0,value:{value:n,name:w}}),k(a,e)}b||se(!1,t)}}},ce=null!==J&&Z;delete D["aria-invalid"];var de=[],fe=!1;(Dc({value:B})||h)&&(P?ae=P(B):fe=!0);var he=ue.map((function(t,n,r){var i,a,o,s,u;if(!e.isValidElement(t))return null;if(b){if(!Array.isArray(B))throw new Error(vs(2));(u=B.some((function(e){return Hh(e,t.props.value)})))&&fe&&de.push(t.props.children)}else(u=Hh(B,t.props.value))&&fe&&(oe=t.props.children);if(u&&!0,void 0===t.props.value)return e.cloneElement(t,{"aria-readonly":!0,role:"option"});return e.cloneElement(t,{"aria-selected":u?"true":"false",onClick:le(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:void 0===(null==(i=r[0])||null==(a=i.props)?void 0:a.value)||!0===(null==(o=r[0])||null==(s=o.props)?void 0:s.disabled)?function(){if(B)return u;var e=r.find((function(e){var t;return void 0!==(null==e||null==(t=e.props)?void 0:t.value)&&!0!==e.props.disabled}));return t===e||u}():u,value:void 0,"data-value":t.props.value})}));fe&&(ae=b?0===de.length?null:de.reduce((function(e,t,n){return e.push(t),n<de.length-1&&e.push(", "),e}),[]):oe);var pe,ve=ee;!o&&Y&&J&&(ve=ie.clientWidth),pe="undefined"!==typeof L?L:f?null:0;var me=R.id||(w?"mui-component-select-".concat(w):void 0),ge=_a({},t,{variant:F,value:B,open:ce}),ye=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,a=e.open;return ka({select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat(Il(n)),a&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},Nh,t)}(ge);return(0,_.jsxs)(e.Fragment,{children:[(0,_.jsx)(zh,_a({ref:re,tabIndex:pe,role:"button","aria-disabled":f?"true":void 0,"aria-expanded":ce?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[m,me].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:function(e){if(!C){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),se(!0,e))}},onMouseDown:f||C?null:function(e){0===e.button&&(e.preventDefault(),G.current.focus(),se(!0,e))},onBlur:function(e){!ce&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:B,name:w}}),x(e))},onFocus:E},R,{ownerState:ge,className:xa(R.className,ye.select,u),id:me,children:Wh(ae)?jh||(jh=(0,_.jsx)("span",{className:"notranslate",children:"\u200b"})):ae})),(0,_.jsx)(Zh,_a({value:Array.isArray(B)?B.join(","):B,name:w,ref:W,"aria-hidden":!0,onChange:function(e){var t=ue.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=ue[t];U(n.props.value),k&&k(e,n)}},tabIndex:-1,disabled:f,className:ye.nativeInput,autoFocus:a,ownerState:ge},D)),(0,_.jsx)(Vh,{as:p,className:ye.icon,ownerState:ge}),(0,_.jsx)(Th,_a({id:"menu-".concat(w||""),anchorEl:ie,open:ce,onClose:function(e){se(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:_a({"aria-labelledby":m,role:"listbox",disableListWrap:!0},y.MenuListProps),PaperProps:_a({},y.PaperProps,{style:_a({minWidth:ve},null!=y.PaperProps?y.PaperProps.style:null)}),children:he}))]})})),qh=Gh;function Kh(e){return yl("MuiSvgIcon",e)}_l("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var Jh=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Xh=ol("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(Il(n.color))],t["fontSize".concat(Il(n.fontSize))]]}})((function(e){var t,n,r,i,a,o,s,u,l,c,d,f,h,p,v,m,g,y=e.theme,_=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=y.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(l=y.typography)||null==(c=l.pxToRem)?void 0:c.call(l,35))||"2.1875rem"}[_.fontSize],color:null!=(d=null==(f=(y.vars||y).palette)||null==(h=f[_.color])?void 0:h.main)?d:{action:null==(p=(y.vars||y).palette)||null==(v=p.action)?void 0:v.active,disabled:null==(m=(y.vars||y).palette)||null==(g=m.action)?void 0:g.disabled,inherit:void 0}[_.color]}})),Yh=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiSvgIcon"}),r=n.children,i=n.className,a=n.color,o=void 0===a?"inherit":a,s=n.component,u=void 0===s?"svg":s,l=n.fontSize,c=void 0===l?"medium":l,d=n.htmlColor,f=n.inheritViewBox,h=void 0!==f&&f,p=n.titleAccess,v=n.viewBox,m=void 0===v?"0 0 24 24":v,g=(0,ba.Z)(n,Jh),y=_a({},n,{color:o,component:u,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:m}),b={};h||(b.viewBox=m);var w=function(e){var t=e.color,n=e.fontSize,r=e.classes;return ka({root:["root","inherit"!==t&&"color".concat(Il(t)),"fontSize".concat(Il(n))]},Kh,r)}(y);return(0,_.jsxs)(Xh,_a({as:u,className:xa(w.root,i),focusable:"false",color:d,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:t},b,g,{ownerState:y,children:[r,p?(0,_.jsx)("title",{children:p}):null]}))}));Yh.muiName="SvgIcon";var Qh=Yh;var $h,ep,tp=function(t,n){function r(e,r){return(0,_.jsx)(Qh,_a({"data-testid":"".concat(n,"Icon"),ref:r},e,{children:t}))}return r.muiName=Qh.muiName,e.memo(e.forwardRef(r))}((0,_.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),np=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],rp={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return il(e)&&"variant"!==e},slot:"Root"},ip=ol($c,rp)(""),ap=ol(yd,rp)(""),op=ol(sd,rp)(""),sp=e.forwardRef((function(t,n){var r=hl({name:"MuiSelect",props:t}),i=r.autoWidth,a=void 0!==i&&i,o=r.children,s=r.classes,u=void 0===s?{}:s,l=r.className,c=r.defaultOpen,d=void 0!==c&&c,f=r.displayEmpty,h=void 0!==f&&f,p=r.IconComponent,v=void 0===p?tp:p,m=r.id,g=r.input,y=r.inputProps,b=r.label,w=r.labelId,x=r.MenuProps,k=r.multiple,S=void 0!==k&&k,E=r.native,A=void 0!==E&&E,T=r.onClose,C=r.onOpen,P=r.open,I=r.renderValue,R=r.SelectDisplayProps,L=r.variant,M=void 0===L?"outlined":L,O=(0,ba.Z)(r,np),F=A?Fh:qh,D=oc({props:r,muiFormControl:ac(),states:["variant"]}).variant||M,N=g||{standard:$h||($h=(0,_.jsx)(ip,{})),outlined:(0,_.jsx)(ap,{label:b}),filled:ep||(ep=(0,_.jsx)(op,{}))}[D],j=function(e){return e.classes}(_a({},r,{variant:D,classes:u})),B=Ac(n,N.ref);return(0,_.jsx)(e.Fragment,{children:e.cloneElement(N,_a({inputComponent:F,inputProps:_a({children:o,IconComponent:v,variant:D,type:void 0,multiple:S},A?{id:m}:{autoWidth:a,defaultOpen:d,displayEmpty:h,labelId:w,MenuProps:x,onClose:T,onOpen:C,open:P,renderValue:I,SelectDisplayProps:_a({id:m},R)},y,{classes:y?os(j,y.classes):j},g?g.props.inputProps:{})},S&&A&&"outlined"===D?{notched:!0}:{},{ref:B,className:xa(N.props.className,l)},!g&&{variant:D},O))})}));sp.muiName="Select";var up=sp;function lp(e){return yl("MuiTextField",e)}_l("MuiTextField",["root"]);var cp,dp=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],fp={standard:$c,filled:sd,outlined:yd},hp=ol(Fd,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),pp=e.forwardRef((function(e,t){var n=hl({props:e,name:"MuiTextField"}),r=n.autoComplete,i=n.autoFocus,a=void 0!==i&&i,o=n.children,s=n.className,u=n.color,l=void 0===u?"primary":u,c=n.defaultValue,d=n.disabled,f=void 0!==d&&d,h=n.error,p=void 0!==h&&h,v=n.FormHelperTextProps,m=n.fullWidth,g=void 0!==m&&m,y=n.helperText,b=n.id,w=n.InputLabelProps,x=n.inputProps,k=n.InputProps,S=n.inputRef,E=n.label,A=n.maxRows,T=n.minRows,C=n.multiline,P=void 0!==C&&C,I=n.name,R=n.onBlur,L=n.onChange,M=n.onFocus,O=n.placeholder,F=n.required,D=void 0!==F&&F,N=n.rows,j=n.select,B=void 0!==j&&j,U=n.SelectProps,z=n.type,V=n.value,Z=n.variant,H=void 0===Z?"outlined":Z,W=(0,ba.Z)(n,dp),G=_a({},n,{autoFocus:a,color:l,disabled:f,error:p,fullWidth:g,multiline:P,required:D,select:B,variant:H}),q=function(e){return ka({root:["root"]},lp,e.classes)}(G);var K={};"outlined"===H&&(w&&"undefined"!==typeof w.shrink&&(K.notched=w.shrink),K.label=E),B&&(U&&U.native||(K.id=void 0),K["aria-describedby"]=void 0);var J=fc(b),X=y&&J?"".concat(J,"-helper-text"):void 0,Y=E&&J?"".concat(J,"-label"):void 0,Q=fp[H],$=(0,_.jsx)(Q,_a({"aria-describedby":X,autoComplete:r,autoFocus:a,defaultValue:c,fullWidth:g,multiline:P,name:I,rows:N,maxRows:A,minRows:T,type:z,value:V,id:J,inputRef:S,onBlur:R,onChange:L,onFocus:M,placeholder:O,inputProps:x},K,k));return(0,_.jsxs)(hp,_a({className:xa(q.root,s),disabled:f,error:p,fullWidth:g,ref:t,required:D,color:l,variant:H,ownerState:G},W,{children:[null!=E&&""!==E&&(0,_.jsx)(Pd,_a({htmlFor:J,id:Y},w,{children:E})),B?(0,_.jsx)(up,_a({"aria-describedby":X,id:J,labelId:Y,value:V,input:$},U,{children:o})):$,y&&(0,_.jsx)(zd,_a({id:X},v,{children:y}))]}))})),vp=pp,mp=Tf,gp=!0,yp=!1,_p={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function bp(e){e.metaKey||e.altKey||e.ctrlKey||(gp=!0)}function wp(){gp=!1}function xp(){"hidden"===this.visibilityState&&yp&&(gp=!0)}function kp(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return gp||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!_p[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var Sp=function(){var t=e.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",bp,!0),t.addEventListener("mousedown",wp,!0),t.addEventListener("pointerdown",wp,!0),t.addEventListener("touchstart",wp,!0),t.addEventListener("visibilitychange",xp,!0))}),[]),n=e.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(e){return!!kp(e)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(yp=!0,window.clearTimeout(cp),cp=window.setTimeout((function(){yp=!1}),100),n.current=!1,!0)},ref:t}};function Ep(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ap=n(7326);function Tp(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function Cp(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Pp(t,n,r){var i=Tp(t.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];s[i[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,e.isValidElement)(s)){var u=o in n,l=o in i,c=n[o],d=(0,e.isValidElement)(c)&&!c.props.in;!l||u&&!d?l||!u||d?l&&u&&(0,e.isValidElement)(c)&&(a[o]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:Cp(s,"exit",t),enter:Cp(s,"enter",t)})):a[o]=(0,e.cloneElement)(s,{in:!1}):a[o]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:Cp(s,"exit",t),enter:Cp(s,"enter",t)})}})),a}var Ip=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Rp=function(t){function n(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind((0,Ap.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}sf(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=t,i=o,Tp(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:Cp(t,"appear",r),enter:Cp(t,"enter",r),exit:Cp(t,"exit",r)})}))):Pp(t,a,o),firstRender:!1}},r.handleExited=function(e,t){var n=Tp(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=_a({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,i=(0,ba.Z)(t,["component","childFactory"]),a=this.state.contextValue,o=Ip(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?e.createElement(lf.Provider,{value:a},o):e.createElement(lf.Provider,{value:a},e.createElement(n,i,o))},n}(e.Component);Rp.propTypes={},Rp.defaultProps={component:"div",childFactory:function(e){return e}};var Lp=Rp;var Mp=function(t){var n=t.className,r=t.classes,i=t.pulsate,a=void 0!==i&&i,o=t.rippleX,s=t.rippleY,u=t.rippleSize,c=t.in,d=t.onExited,f=t.timeout,h=e.useState(!1),p=(0,l.Z)(h,2),v=p[0],m=p[1],g=xa(n,r.ripple,r.rippleVisible,a&&r.ripplePulsate),y={width:u,height:u,top:-u/2+s,left:-u/2+o},b=xa(r.child,v&&r.childLeaving,a&&r.childPulsate);return c||v||m(!0),e.useEffect((function(){if(!c&&null!=d){var e=setTimeout(d,f);return function(){clearTimeout(e)}}}),[d,c,f]),(0,_.jsx)("span",{className:g,style:y,children:(0,_.jsx)("span",{className:b})})};var Op,Fp,Dp,Np,jp,Bp,Up,zp,Vp=_l("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Zp=["center","classes","className"],Hp=Lc(jp||(jp=Op||(Op=Ep(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Wp=Lc(Bp||(Bp=Fp||(Fp=Ep(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Gp=Lc(Up||(Up=Dp||(Dp=Ep(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),qp=ol("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Kp=ol(Mp,{name:"MuiTouchRipple",slot:"Ripple"})(zp||(zp=Np||(Np=Ep(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Vp.rippleVisible,Hp,550,(function(e){return e.theme.transitions.easing.easeInOut}),Vp.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Vp.child,Vp.childLeaving,Wp,550,(function(e){return e.theme.transitions.easing.easeInOut}),Vp.childPulsate,Gp,(function(e){return e.theme.transitions.easing.easeInOut})),Jp=e.forwardRef((function(t,n){var r=hl({props:t,name:"MuiTouchRipple"}),i=r.center,a=void 0!==i&&i,o=r.classes,s=void 0===o?{}:o,u=r.className,c=(0,ba.Z)(r,Zp),d=e.useState([]),f=(0,l.Z)(d,2),h=f[0],p=f[1],v=e.useRef(0),m=e.useRef(null);e.useEffect((function(){m.current&&(m.current(),m.current=null)}),[h]);var g=e.useRef(!1),y=e.useRef(null),b=e.useRef(null),w=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var x=e.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,a=e.cb;p((function(e){return[].concat((0,oe.Z)(e),[(0,_.jsx)(Kp,{classes:{ripple:xa(s.ripple,Vp.ripple),rippleVisible:xa(s.rippleVisible,Vp.rippleVisible),ripplePulsate:xa(s.ripplePulsate,Vp.ripplePulsate),child:xa(s.child,Vp.child),childLeaving:xa(s.childLeaving,Vp.childLeaving),childPulsate:xa(s.childPulsate,Vp.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},v.current)])})),v.current+=1,m.current=a}),[s]),k=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===(null==e?void 0:e.type)&&g.current)g.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(g.current=!0);var c,d,f,h=l?null:w.current,p=h?h.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(p.width/2),d=Math.round(p.height/2);else{var v=e.touches&&e.touches.length>0?e.touches[0]:e,m=v.clientX,_=v.clientY;c=Math.round(m-p.left),d=Math.round(_-p.top)}if(s)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(f+=1);else{var k=2*Math.max(Math.abs((h?h.clientWidth:0)-c),c)+2,S=2*Math.max(Math.abs((h?h.clientHeight:0)-d),d)+2;f=Math.sqrt(Math.pow(k,2)+Math.pow(S,2))}null!=e&&e.touches?null===b.current&&(b.current=function(){x({pulsate:i,rippleX:c,rippleY:d,rippleSize:f,cb:n})},y.current=setTimeout((function(){b.current&&(b.current(),b.current=null)}),80)):x({pulsate:i,rippleX:c,rippleY:d,rippleSize:f,cb:n})}}),[a,x]),S=e.useCallback((function(){k({},{pulsate:!0})}),[k]),E=e.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===(null==e?void 0:e.type)&&b.current)return b.current(),b.current=null,void(y.current=setTimeout((function(){E(e,t)})));b.current=null,p((function(e){return e.length>0?e.slice(1):e})),m.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:S,start:k,stop:E}}),[S,k,E]),(0,_.jsx)(qp,_a({className:xa(Vp.root,s.root,u),ref:w},c,{children:(0,_.jsx)(Lp,{component:null,exit:!0,children:h})}))})),Xp=Jp;function Yp(e){return yl("MuiButtonBase",e)}var Qp,$p=_l("MuiButtonBase",["root","disabled","focusVisible"]),ev=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],tv=ol("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Qp={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,ae.Z)(Qp,"&.".concat($p.disabled),{pointerEvents:"none",cursor:"default"}),(0,ae.Z)(Qp,"@media print",{colorAdjust:"exact"}),Qp)),nv=e.forwardRef((function(t,n){var r=hl({props:t,name:"MuiButtonBase"}),i=r.action,a=r.centerRipple,o=void 0!==a&&a,s=r.children,u=r.className,c=r.component,d=void 0===c?"button":c,f=r.disabled,h=void 0!==f&&f,p=r.disableRipple,v=void 0!==p&&p,m=r.disableTouchRipple,g=void 0!==m&&m,y=r.focusRipple,b=void 0!==y&&y,w=r.LinkComponent,x=void 0===w?"a":w,k=r.onBlur,S=r.onClick,E=r.onContextMenu,A=r.onDragLeave,T=r.onFocus,C=r.onFocusVisible,P=r.onKeyDown,I=r.onKeyUp,R=r.onMouseDown,L=r.onMouseLeave,M=r.onMouseUp,O=r.onTouchEnd,F=r.onTouchMove,D=r.onTouchStart,N=r.tabIndex,j=void 0===N?0:N,B=r.TouchRippleProps,U=r.touchRippleRef,z=r.type,V=(0,ba.Z)(r,ev),Z=e.useRef(null),H=e.useRef(null),W=Ac(H,U),G=Sp(),q=G.isFocusVisibleRef,K=G.onFocus,J=G.onBlur,X=G.ref,Y=e.useState(!1),Q=(0,l.Z)(Y,2),$=Q[0],ee=Q[1];h&&$&&ee(!1),e.useImperativeHandle(i,(function(){return{focusVisible:function(){ee(!0),Z.current.focus()}}}),[]);var te=e.useState(!1),ne=(0,l.Z)(te,2),re=ne[0],ie=ne[1];e.useEffect((function(){ie(!0)}),[]);var ae=re&&!v&&!h;function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return mp((function(r){return t&&t(r),!n&&H.current&&H.current[e](r),!0}))}e.useEffect((function(){$&&b&&!v&&re&&H.current.pulsate()}),[v,b,$,re]);var se=oe("start",R),ue=oe("stop",E),le=oe("stop",A),ce=oe("stop",M),de=oe("stop",(function(e){$&&e.preventDefault(),L&&L(e)})),fe=oe("start",D),he=oe("stop",O),pe=oe("stop",F),ve=oe("stop",(function(e){J(e),!1===q.current&&ee(!1),k&&k(e)}),!1),me=mp((function(e){Z.current||(Z.current=e.currentTarget),K(e),!0===q.current&&(ee(!0),C&&C(e)),T&&T(e)})),ge=function(){var e=Z.current;return d&&"button"!==d&&!("A"===e.tagName&&e.href)},ye=e.useRef(!1),_e=mp((function(e){b&&!ye.current&&$&&H.current&&" "===e.key&&(ye.current=!0,H.current.stop(e,(function(){H.current.start(e)}))),e.target===e.currentTarget&&ge()&&" "===e.key&&e.preventDefault(),P&&P(e),e.target===e.currentTarget&&ge()&&"Enter"===e.key&&!h&&(e.preventDefault(),S&&S(e))})),be=mp((function(e){b&&" "===e.key&&H.current&&$&&!e.defaultPrevented&&(ye.current=!1,H.current.stop(e,(function(){H.current.pulsate(e)}))),I&&I(e),S&&e.target===e.currentTarget&&ge()&&" "===e.key&&!e.defaultPrevented&&S(e)})),we=d;"button"===we&&(V.href||V.to)&&(we=x);var xe={};"button"===we?(xe.type=void 0===z?"button":z,xe.disabled=h):(V.href||V.to||(xe.role="button"),h&&(xe["aria-disabled"]=h));var ke=Ac(n,X,Z);var Se=_a({},r,{centerRipple:o,component:d,disabled:h,disableRipple:v,disableTouchRipple:g,focusRipple:b,tabIndex:j,focusVisible:$}),Ee=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=ka({root:["root",t&&"disabled",n&&"focusVisible"]},Yp,e.classes);return n&&r&&(i.root+=" ".concat(r)),i}(Se);return(0,_.jsxs)(tv,_a({as:we,className:xa(Ee.root,u),ownerState:Se,onBlur:ve,onClick:S,onContextMenu:ue,onFocus:me,onKeyDown:_e,onKeyUp:be,onMouseDown:se,onMouseLeave:de,onMouseUp:ce,onDragLeave:le,onTouchEnd:he,onTouchMove:pe,onTouchStart:fe,ref:ke,tabIndex:h?-1:j,type:z},xe,V,{children:[s,ae?(0,_.jsx)(Xp,_a({ref:W,center:o},B)):null]}))})),rv=nv;function iv(e){return yl("MuiButton",e)}var av=_l("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var ov=e.createContext({}),sv=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],uv=function(e){return _a({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},lv=ol(rv,{shouldForwardProp:function(e){return il(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat(Il(n.color))],t["size".concat(Il(n.size))],t["".concat(n.variant,"Size").concat(Il(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,i=e.theme,a=e.ownerState;return _a({},i.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":_a({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Au(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===a.variant&&"inherit"!==a.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Au(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===a.variant&&"inherit"!==a.color&&{border:"1px solid ".concat((i.vars||i).palette[a.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):Au(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===a.variant&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===a.variant&&"inherit"!==a.color&&{backgroundColor:(i.vars||i).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[a.color].main}}),"&:active":_a({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[8]})},(0,ae.Z)(t,"&.".concat(av.focusVisible),_a({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[6]})),(0,ae.Z)(t,"&.".concat(av.disabled),_a({color:(i.vars||i).palette.action.disabled},"outlined"===a.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"outlined"===a.variant&&"secondary"===a.color&&{border:"1px solid ".concat((i.vars||i).palette.action.disabled)},"contained"===a.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),t),"text"===a.variant&&{padding:"6px 8px"},"text"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main},"outlined"===a.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[a.color].mainChannel," / 0.5)"):"1px solid ".concat(Au(i.palette[a.color].main,.5))},"contained"===a.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},"contained"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].contrastText,backgroundColor:(i.vars||i).palette[a.color].main},"inherit"===a.color&&{color:"inherit",borderColor:"currentColor"},"small"===a.size&&"text"===a.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"text"===a.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"outlined"===a.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"outlined"===a.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"contained"===a.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"contained"===a.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},a.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,ae.Z)(t,"&.".concat(av.focusVisible),{boxShadow:"none"}),(0,ae.Z)(t,"&:active",{boxShadow:"none"}),(0,ae.Z)(t,"&.".concat(av.disabled),{boxShadow:"none"}),t)})),cv=ol("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat(Il(n.size))]]}})((function(e){var t=e.ownerState;return _a({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},uv(t))})),dv=ol("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat(Il(n.size))]]}})((function(e){var t=e.ownerState;return _a({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},uv(t))})),fv=e.forwardRef((function(t,n){var r=e.useContext(ov),i=hl({props:sl(r,t),name:"MuiButton"}),a=i.children,o=i.color,s=void 0===o?"primary":o,u=i.component,l=void 0===u?"button":u,c=i.className,d=i.disabled,f=void 0!==d&&d,h=i.disableElevation,p=void 0!==h&&h,v=i.disableFocusRipple,m=void 0!==v&&v,g=i.endIcon,y=i.focusVisibleClassName,b=i.fullWidth,w=void 0!==b&&b,x=i.size,k=void 0===x?"medium":x,S=i.startIcon,E=i.type,A=i.variant,T=void 0===A?"text":A,C=(0,ba.Z)(i,sv),P=_a({},i,{color:s,component:l,disabled:f,disableElevation:p,disableFocusRipple:m,fullWidth:w,size:k,type:E,variant:T}),I=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,a=e.variant,o=e.classes;return _a({},o,ka({root:["root",a,"".concat(a).concat(Il(t)),"size".concat(Il(i)),"".concat(a,"Size").concat(Il(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(Il(i))],endIcon:["endIcon","iconSize".concat(Il(i))]},iv,o))}(P),R=S&&(0,_.jsx)(cv,{className:I.startIcon,ownerState:P,children:S}),L=g&&(0,_.jsx)(dv,{className:I.endIcon,ownerState:P,children:g});return(0,_.jsxs)(lv,_a({ownerState:P,className:xa(r.className,I.root,c),component:l,disabled:f,focusRipple:!m,focusVisibleClassName:xa(I.focusVisible,y),ref:n,type:E},C,{classes:I,children:[R,a,L]}))})),hv=fv;function pv(e){return yl("MuiLink",e)}var vv=_l("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),mv={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},gv=function(e){var t=e.theme,n=e.ownerState,r=function(e){return mv[e]||e}(n.color),i=gs(t,"palette.".concat(r),!1)||n.color,a=gs(t,"palette.".concat(r,"Channel"));return"vars"in t&&a?"rgba(".concat(a," / 0.4)"):Au(i,.4)},yv=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],_v=ol(Nl,{name:"MuiLink",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["underline".concat(Il(n.underline))],"button"===n.component&&t.button]}})((function(e){var t=e.theme,n=e.ownerState;return _a({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&_a({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:gv({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&(0,ae.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(vv.focusVisible),{outline:"auto"}))})),bv=e.forwardRef((function(t,n){var r=hl({props:t,name:"MuiLink"}),i=r.className,a=r.color,o=void 0===a?"primary":a,s=r.component,u=void 0===s?"a":s,c=r.onBlur,d=r.onFocus,f=r.TypographyClasses,h=r.underline,p=void 0===h?"always":h,v=r.variant,m=void 0===v?"inherit":v,g=r.sx,y=(0,ba.Z)(r,yv),b=Sp(),w=b.isFocusVisibleRef,x=b.onBlur,k=b.onFocus,S=b.ref,E=e.useState(!1),A=(0,l.Z)(E,2),T=A[0],C=A[1],P=Ac(n,S),I=_a({},r,{color:o,component:u,focusVisible:T,underline:p,variant:m}),R=function(e){var t=e.classes,n=e.component,r=e.focusVisible,i=e.underline;return ka({root:["root","underline".concat(Il(i)),"button"===n&&"button",r&&"focusVisible"]},pv,t)}(I);return(0,_.jsx)(_v,_a({color:o,className:xa(R.root,i),classes:f,component:u,onBlur:function(e){x(e),!1===w.current&&C(!1),c&&c(e)},onFocus:function(e){k(e),!0===w.current&&C(!0),d&&d(e)},ref:P,ownerState:I,variant:m,sx:[].concat((0,oe.Z)(Object.keys(mv).includes(o)?[]:[{color:o}]),(0,oe.Z)(Array.isArray(g)?g:[g]))},y))})),wv=bv,xv=n(5987),kv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv="object"===("undefined"===typeof window?"undefined":kv(window))&&"object"===("undefined"===typeof document?"undefined":kv(document))&&9===document.nodeType,Ev={}.constructor;function Av(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(Av);if(e.constructor!==Ev)return e;var t={};for(var n in e)t[n]=Av(e[n]);return t}function Tv(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=Av(t),a=r.plugins.onCreateRule(e,i,n);return a||(e[0],null)}var Cv=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},Pv=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=Cv(e[n]," ");else t=Cv(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function Iv(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function Rv(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function Lv(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,a=void 0===i?0:i,o=t.fallbacks;!1===n.format&&(a=-1/0);var s=Iv(n),u=s.linebreak,l=s.space;if(e&&a++,o)if(Array.isArray(o))for(var c=0;c<o.length;c++){var d=o[c];for(var f in d){var h=d[f];null!=h&&(r&&(r+=u),r+=Rv(f+":"+l+Pv(h)+";",a))}}else for(var p in o){var v=o[p];null!=v&&(r&&(r+=u),r+=Rv(p+":"+l+Pv(v)+";",a))}for(var m in t){var g=t[m];null!=g&&"fallbacks"!==m&&(r&&(r+=u),r+=Rv(m+":"+l+Pv(g)+";",a))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),Rv(""+e+l+"{"+r,--a)+Rv("}",a)):r}var Mv=/([[\].#*$><+~=|^:(),"'`\s])/g,Ov="undefined"!==typeof CSS&&CSS.escape,Fv=function(e){return Ov?Ov(e):e.replace(Mv,"\\$1")},Dv=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,o=e in this.style;if(a&&!o&&!r)return this;var s=a&&o;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var u=this.options.sheet;return u&&u.attached,this},e}(),Nv=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=r.selector,o=r.scoped,s=r.sheet,u=r.generateId;return a?i.selectorText=a:!1!==o&&(i.id=u((0,Ap.Z)((0,Ap.Z)(i)),s),i.selectorText="."+Fv(i.id)),i}sf(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=Pv(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?_a({},e,{allowEmpty:!0}):e;return Lv(this.selectorText,this.style,n)},(0,A.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(Dv),jv={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new Nv(e,t,n)}},Bv={indent:1,children:!0},Uv=/@([\w-]+)/,zv=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(Uv);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new dm(_a({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=Bv);var t=Iv(e).linebreak;if(null==e.indent&&(e.indent=Bv.indent),null==e.children&&(e.children=Bv.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),Vv=/@container|@media|@supports\s+/,Zv={onCreateRule:function(e,t,n){return Vv.test(e)?new zv(e,t,n):null}},Hv={indent:1,children:!0},Wv=/@keyframes\s+([\w-]+)/,Gv=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(Wv);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,a=n.sheet,o=n.generateId;for(var s in this.id=!1===i?this.name:Fv(o(this,a)),this.rules=new dm(_a({},n,{parent:this})),t)this.rules.add(s,t[s],_a({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=Hv);var t=Iv(e).linebreak;if(null==e.indent&&(e.indent=Hv.indent),null==e.children&&(e.children=Hv.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),qv=/@keyframes\s+/,Kv=/\$([\w-]+)/g,Jv=function(e,t){return"string"===typeof e?e.replace(Kv,(function(e,n){return n in t?t[n]:e})):e},Xv=function(e,t,n){var r=e[t],i=Jv(r,n);i!==r&&(e[t]=i)},Yv={onCreateRule:function(e,t,n){return"string"===typeof e&&qv.test(e)?new Gv(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&Xv(e,"animation-name",n.keyframes),"animation"in e&&Xv(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return Jv(e,r.keyframes);default:return e}}},Qv=function(e){function t(){return e.apply(this,arguments)||this}return sf(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?_a({},e,{allowEmpty:!0}):e;return Lv(this.key,this.style,n)},t}(Dv),$v={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new Qv(e,t,n):null}},em=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=Iv(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=Lv(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return Lv(this.at,this.style,e)},e}(),tm=/@font-face/,nm={onCreateRule:function(e,t,n){return tm.test(e)?new em(e,t,n):null}},rm=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Lv(this.key,this.style,e)},e}(),im={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new rm(e,t,n):null}},am=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),om={"@charset":!0,"@import":!0,"@namespace":!0},sm={onCreateRule:function(e,t,n){return e in om?new am(e,t,n):null}},um=[jv,Zv,Yv,$v,nm,im,sm],lm={process:!0},cm={force:!0,process:!0},dm=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,a=r.sheet,o=r.jss,s=r.Renderer,u=r.generateId,l=r.scoped,c=_a({classes:this.classes,parent:i,sheet:a,jss:o,Renderer:s,generateId:u,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(c.selector="."+Fv(this.classes[d]));var f=Tv(d,t,c);if(!f)return null;this.register(f);var h=void 0===c.index?this.index.length:c.index;return this.index.splice(h,0,f),f},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var a=n;return-1!==i&&(a=_a({},n,{index:i})),this.add(e,t,a)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Nv?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Gv&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Nv?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Gv&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=lm);var i=this.options,a=i.jss.plugins,o=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(a.onUpdate(n,t,o,r),r.process&&s&&s!==t.style){for(var u in a.onProcessStyle(t.style,t,o),t.style){var l=t.style[u];l!==s[u]&&t.prop(u,l,cm)}for(var c in s){var d=t.style[c],f=s[c];null==d&&d!==f&&t.prop(c,null,cm)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=Iv(e).linebreak,a=0;a<this.index.length;a++){var o=this.index[a].toString(e);(o||r)&&(t&&(t+=i),t+=o)}return t},e}(),fm=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=_a({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new dm(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),hm=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),pm=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,ba.Z)(t,["attached"]),i=Iv(r).linebreak,a="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(a&&(a+=i),a+=s.toString(r))}return a},(0,A.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),vm=new pm,mm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),gm="2f1acc6c3a606b082e5eef5e54414ffb";null==mm[gm]&&(mm[gm]=0);var ym=mm[gm]++,_m=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",a="";return r&&(r.options.classNamePrefix&&(a=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(a||"c")+ym+i+t:a+n.key+"-"+ym+(i?"-"+i:"")+"-"+t}},bm=function(e){var t;return function(){return t||(t=e()),t}},wm=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},xm=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=Pv(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var i=r?r.indexOf("!important"):-1,a=i>-1?r.substr(0,i-1):r;e.style.setProperty(t,a,i>-1?"important":"")}}catch(o){return!1}return!0},km=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Sm=function(e,t){return e.selectorText=t,e.selectorText===t},Em=bm((function(){return document.querySelector("head")}));function Am(e){var t=vm.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=Em(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var Tm=bm((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Cm=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},Pm=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Im=function(){function e(e){this.getPropertyValue=wm,this.setProperty=xm,this.removeProperty=km,this.setSelector=Sm,this.hasInsertedRules=!1,this.cssRules=[],e&&vm.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var a=Tm();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Am(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else Em().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var a=Pm(n,t);if(!1===(i=Cm(n,r.toString({children:!1}),a)))return!1;this.refCssRule(e,a,i)}return this.insertRules(r.rules,i),i}var o=e.toString();if(!o)return!1;var s=Pm(n,t),u=Cm(n,o,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof fm&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Rm=0,Lm=function(){function e(e){this.id=Rm++,this.version="10.10.0",this.plugins=new hm,this.options={id:{minify:!1},createGenerateId:_m,Renderer:Sv?Im:null,plugins:[]},this.generateId=_m({minify:!1});for(var t=0;t<um.length;t++)this.plugins.use(um[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=_a({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===vm.index?0:vm.index+1);var r=new fm(e,_a({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),vm.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=_a({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=Tv(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Mm=function(e){return new Lm(e)},Om="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Fm(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var a=Fm(r);a&&(t||(t={}),t[n]=a)}}return t}Mm();function Dm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=_a({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var Nm={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},jm=Nm;var Bm=e.createContext(null);function Um(){return e.useContext(Bm)}var zm="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",Vm=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Zm=Date.now(),Hm="fnValues"+Zm,Wm="fnStyle"+ ++Zm,Gm=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=Tv(e,{},n);return r[Wm]=t,r},onProcessStyle:function(e,t){if(Hm in t||Wm in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Hm]=n,e},onUpdate:function(e,t,n,r){var i=t,a=i[Wm];a&&(i.style=a(e)||{});var o=i[Hm];if(o)for(var s in o)i.prop(s,o[s](e),r)}}},qm="@global",Km="@global ",Jm=function(){function e(e,t,n){for(var r in this.type="global",this.at=qm,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new dm(_a({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Xm=function(){function e(e,t,n){this.type="global",this.at=qm,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(8);this.rule=n.jss.createRule(r,t,_a({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Ym=/\s*,\s*/g;function Qm(e,t){for(var n=e.split(Ym),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var $m=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===qm)return new Jm(e,t,n);if("@"===e[0]&&e.substr(0,8)===Km)return new Xm(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[qm]:null;if(i){for(var a in i)t.addRule(a,i[a],_a({},n,{selector:Qm(a,e.selector)}));delete r[qm]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,qm.length)===qm){var a=Qm(i.substr(qm.length),e.selector);t.addRule(a,r[i],_a({},n,{selector:a})),delete r[i]}}(e,t))}}},eg=/\s*,\s*/g,tg=/&/g,ng=/\$([\w-]+)/g;var rg=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(eg),r=e.split(eg),i="",a=0;a<n.length;a++)for(var o=n[a],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(tg,o):o+" "+u}return i}function n(e,t,n){if(n)return _a({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=_a({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,a){if("style"!==i.type)return r;var o,s,u=i,l=u.options.parent;for(var c in r){var d=-1!==c.indexOf("&"),f="@"===c[0];if(d||f){if(o=n(u,l,o),d){var h=t(c,u.selector);s||(s=e(l,a)),h=h.replace(ng,s);var p=u.key+"-"+c;"replaceRule"in l?l.replaceRule(p,r[c],_a({},o,{selector:h})):l.addRule(p,r[c],_a({},o,{selector:h}))}else f&&l.addRule(c,{},o).addRule(u.key,r[c],{selector:u.selector});delete r[c]}}return r}}},ig=/[A-Z]/g,ag=/^ms-/,og={};function sg(e){return"-"+e.toLowerCase()}var ug=function(e){if(og.hasOwnProperty(e))return og[e];var t=e.replace(ig,sg);return og[e]=ag.test(t)?"-"+t:t};function lg(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:ug(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(lg):t.fallbacks=lg(e.fallbacks)),t}var cg=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=lg(e[t]);return e}return lg(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=ug(t);return t===r?e:(n.prop(r,e),null)}}},dg=Om&&CSS?CSS.px:"px",fg=Om&&CSS?CSS.ms:"ms",hg=Om&&CSS?CSS.percent:"%";function pg(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var vg=pg({"animation-delay":fg,"animation-duration":fg,"background-position":dg,"background-position-x":dg,"background-position-y":dg,"background-size":dg,border:dg,"border-bottom":dg,"border-bottom-left-radius":dg,"border-bottom-right-radius":dg,"border-bottom-width":dg,"border-left":dg,"border-left-width":dg,"border-radius":dg,"border-right":dg,"border-right-width":dg,"border-top":dg,"border-top-left-radius":dg,"border-top-right-radius":dg,"border-top-width":dg,"border-width":dg,"border-block":dg,"border-block-end":dg,"border-block-end-width":dg,"border-block-start":dg,"border-block-start-width":dg,"border-block-width":dg,"border-inline":dg,"border-inline-end":dg,"border-inline-end-width":dg,"border-inline-start":dg,"border-inline-start-width":dg,"border-inline-width":dg,"border-start-start-radius":dg,"border-start-end-radius":dg,"border-end-start-radius":dg,"border-end-end-radius":dg,margin:dg,"margin-bottom":dg,"margin-left":dg,"margin-right":dg,"margin-top":dg,"margin-block":dg,"margin-block-end":dg,"margin-block-start":dg,"margin-inline":dg,"margin-inline-end":dg,"margin-inline-start":dg,padding:dg,"padding-bottom":dg,"padding-left":dg,"padding-right":dg,"padding-top":dg,"padding-block":dg,"padding-block-end":dg,"padding-block-start":dg,"padding-inline":dg,"padding-inline-end":dg,"padding-inline-start":dg,"mask-position-x":dg,"mask-position-y":dg,"mask-size":dg,height:dg,width:dg,"min-height":dg,"max-height":dg,"min-width":dg,"max-width":dg,bottom:dg,left:dg,top:dg,right:dg,inset:dg,"inset-block":dg,"inset-block-end":dg,"inset-block-start":dg,"inset-inline":dg,"inset-inline-end":dg,"inset-inline-start":dg,"box-shadow":dg,"text-shadow":dg,"column-gap":dg,"column-rule":dg,"column-rule-width":dg,"column-width":dg,"font-size":dg,"font-size-delta":dg,"letter-spacing":dg,"text-decoration-thickness":dg,"text-indent":dg,"text-stroke":dg,"text-stroke-width":dg,"word-spacing":dg,motion:dg,"motion-offset":dg,outline:dg,"outline-offset":dg,"outline-width":dg,perspective:dg,"perspective-origin-x":hg,"perspective-origin-y":hg,"transform-origin":hg,"transform-origin-x":hg,"transform-origin-y":hg,"transform-origin-z":hg,"transition-delay":fg,"transition-duration":fg,"vertical-align":dg,"flex-basis":dg,"shape-margin":dg,size:dg,gap:dg,grid:dg,"grid-gap":dg,"row-gap":dg,"grid-row-gap":dg,"grid-column-gap":dg,"grid-template-rows":dg,"grid-template-columns":dg,"grid-auto-rows":dg,"grid-auto-columns":dg,"box-shadow-x":dg,"box-shadow-y":dg,"box-shadow-blur":dg,"box-shadow-spread":dg,"font-line-height":dg,"text-shadow-x":dg,"text-shadow-y":dg,"text-shadow-blur":dg});function mg(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=mg(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=mg(i,t[i],n);else for(var a in t)t[a]=mg(e+"-"+a,t[a],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||vg[e];return!o||0===t&&o===dg?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var gg=function(e){void 0===e&&(e={});var t=pg(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=mg(r,e[r],t);return e},onChangeValue:function(e,n){return mg(n,e,t)}}},yg="",_g="",bg="",wg="",xg=Sv&&"ontouchstart"in document.documentElement;if(Sv){var kg={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Sg=document.createElement("p").style;for(var Eg in kg)if(Eg+"Transform"in Sg){yg=Eg,_g=kg[Eg];break}"Webkit"===yg&&"msHyphens"in Sg&&(yg="ms",_g=kg.ms,wg="edge"),"Webkit"===yg&&"-apple-trailing-word"in Sg&&(bg="apple")}var Ag={js:yg,css:_g,vendor:bg,browser:wg,isTouch:xg};var Tg={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Ag.js?"-webkit-"+e:Ag.css+e)}},Cg={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Ag.js?Ag.css+"print-"+e:e)}},Pg=/[-\s]+(.)?/g;function Ig(e,t){return t?t.toUpperCase():""}function Rg(e){return e.replace(Pg,Ig)}function Lg(e){return Rg("-"+e)}var Mg,Og={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Ag.js){var n="mask-image";if(Rg(n)in t)return e;if(Ag.js+Lg(n)in t)return Ag.css+e}return e}},Fg={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Ag.vendor||Ag.isTouch?e:Ag.css+e)}},Dg={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Ag.css+e)}},Ng={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Ag.css+e)}},jg={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Ag.js||"ms"===Ag.js&&"edge"!==Ag.browser?Ag.css+e:e)}},Bg={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Ag.js||"ms"===Ag.js||"apple"===Ag.vendor?Ag.css+e:e)}},Ug={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Ag.js?"WebkitColumn"+Lg(e)in t&&Ag.css+"column-"+e:"Moz"===Ag.js&&("page"+Lg(e)in t&&"page-"+e))}},zg={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Ag.js)return e;var n=e.replace("-inline","");return Ag.js+Lg(n)in t&&Ag.css+n}},Vg={supportedProperty:function(e,t){return Rg(e)in t&&e}},Zg={supportedProperty:function(e,t){var n=Lg(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Ag.js+n in t?Ag.css+e:"Webkit"!==Ag.js&&"Webkit"+n in t&&"-webkit-"+e}},Hg={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Ag.js?""+Ag.css+e:e)}},Wg={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Ag.js?Ag.css+"scroll-chaining":e)}},Gg={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},qg={supportedProperty:function(e,t){var n=Gg[e];return!!n&&(Ag.js+Lg(n)in t&&Ag.css+n)}},Kg={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Jg=Object.keys(Kg),Xg=function(e){return Ag.css+e},Yg={supportedProperty:function(e,t,n){var r=n.multiple;if(Jg.indexOf(e)>-1){var i=Kg[e];if(!Array.isArray(i))return Ag.js+Lg(i)in t&&Ag.css+i;if(!r)return!1;for(var a=0;a<i.length;a++)if(!(Ag.js+Lg(i[0])in t))return!1;return i.map(Xg)}return!1}},Qg=[Tg,Cg,Og,Fg,Dg,Ng,jg,Bg,Ug,zg,Vg,Zg,Hg,Wg,qg,Yg],$g=Qg.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),ey=Qg.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,oe.Z)(t.noPrefill)),e}),[]),ty={};if(Sv){Mg=document.createElement("p");var ny=window.getComputedStyle(document.documentElement,"");for(var ry in ny)isNaN(ry)||(ty[ny[ry]]=ny[ry]);ey.forEach((function(e){return delete ty[e]}))}function iy(e,t){if(void 0===t&&(t={}),!Mg)return e;if(null!=ty[e])return ty[e];"transition"!==e&&"transform"!==e||(t[e]=e in Mg.style);for(var n=0;n<$g.length&&(ty[e]=$g[n](e,Mg.style,t),!ty[e]);n++);try{Mg.style[e]=""}catch(r){return!1}return ty[e]}var ay,oy={},sy={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},uy=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function ly(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?iy(t):", "+iy(n);return r||(t||n)}function cy(e,t){var n=t;if(!ay||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=oy[r])return oy[r];try{ay.style[e]=n}catch(i){return oy[r]=!1,!1}if(sy[e])n=n.replace(uy,ly);else if(""===ay.style[e]&&("-ms-flex"===(n=Ag.css+n)&&(ay.style[e]="-ms-flexbox"),ay.style[e]=n,""===ay.style[e]))return oy[r]=!1,!1;return ay.style[e]="",oy[r]=n,oy[r]}Sv&&(ay=document.createElement("p"));var dy=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,a=iy(n);a&&a!==n&&(i=!0);var o=!1,s=cy(a,Pv(r));s&&s!==r&&(o=!0),(i||o)&&(i&&delete t[n],t[a||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Ag.js?e:"@"+Ag.css+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return cy(t,Pv(e))||e}}};var fy=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),a=0;a<i.length;a++)r[i[a]]=t[i[a]];return r}}};var hy=Mm({plugins:[Gm(),$m(),rg(),cg(),gg(),"undefined"===typeof window?null:dy(),fy()]}),py=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,a=e.seed,o=void 0===a?"":a,s=""===o?"":"".concat(o,"-"),u=0,l=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Vm.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[zm]&&""===o?"".concat(a,"-").concat(l()):a}return"".concat(s).concat(i).concat(l())}}(),vy={disableGeneration:!1,generateClassName:py,jss:hy,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},my=e.createContext(vy);var gy=-1e9;var yy=n(1002);function _y(e){return e&&"object"===(0,yy.Z)(e)&&e.constructor===Object}function by(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?_a({},e):e;return _y(e)&&_y(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(_y(t[i])&&i in e?r[i]=by(e[i],t[i],n):r[i]=t[i])})),r}var wy={};function xy(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,a=e.stylesCreator,o=e.name;if(!i.disableGeneration){var s=jm.get(i.sheetsManager,a,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},jm.set(i.sheetsManager,a,r,s));var u=_a({},a.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var l=i.sheetsRegistry;if(0===s.refs){var c;i.sheetsCache&&(c=jm.get(i.sheetsCache,a,r));var d=a.create(r,o);c||((c=i.jss.createStyleSheet(d,_a({link:!1},u))).attach(),i.sheetsCache&&jm.set(i.sheetsCache,a,r,c)),l&&l.add(c),s.staticSheet=c,s.dynamicStyles=Fm(d)}if(s.dynamicStyles){var f=i.jss.createStyleSheet(s.dynamicStyles,_a({link:!0},u));f.update(t),f.attach(),n.dynamicSheet=f,n.classes=Dm({baseClasses:s.staticSheet.classes,newClasses:f.classes}),l&&l.add(f)}else n.classes=s.staticSheet.classes;s.refs+=1}}function ky(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,i=n.classNamePrefix,a=n.Component,o=n.defaultTheme,s=void 0===o?wy:o,u=(0,xv.Z)(n,["name","classNamePrefix","Component","defaultTheme"]),l=function(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return i;var a=n.overrides[r],o=_a({},i);return Object.keys(a).forEach((function(e){o[e]=by(o[e],a[e])})),o},options:{}}}(t),c=r||i||"makeStyles";l.options={index:gy+=1,name:r,meta:c,classNamePrefix:c};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Um()||s,i=_a({},e.useContext(my),u),o=e.useRef(),c=e.useRef();!function(t,n){var r,i=e.useRef([]),a=e.useMemo((function(){return{}}),n);i.current!==a&&(i.current=a,r=t()),e.useEffect((function(){return function(){r&&r()}}),[a])}((function(){var e={name:r,state:{},stylesCreator:l,stylesOptions:i,theme:n};return xy(e,t),c.current=!1,o.current=e,function(){!function(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var a=jm.get(r.sheetsManager,i,n);a.refs-=1;var o=r.sheetsRegistry;0===a.refs&&(jm.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}(e)}}),[n,l]),e.useEffect((function(){c.current&&function(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}(o.current,t),c.current=!0}));var d=function(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Dm({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}(o.current,t.classes,a);return d}}var Sy=["xs","sm","md","lg","xl"];function Ey(e,t,n){var r;return _a({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),_a({paddingLeft:t(2),paddingRight:t(2)},n,(0,ae.Z)({},e.up("sm"),_a({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,ae.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,ae.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}function Ay(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var Ty={black:"#000",white:"#fff"},Cy={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},Py={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Iy={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Ry={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ly={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},My={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Oy={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Fy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Dy(e){if(e.type)return e;if("#"===e.charAt(0))return Dy(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Ay(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function Ny(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function jy(e){var t="hsl"===(e=Dy(e)).type?Dy(function(e){var t=(e=Dy(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),Ny({type:s,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function By(e,t){return e=Dy(e),t=Fy(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,Ny(e)}function Uy(e,t){if(e=Dy(e),t=Fy(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Ny(e)}function zy(e,t){if(e=Dy(e),t=Fy(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return Ny(e)}var Vy={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ty.white,default:Cy[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Zy={text:{primary:Ty.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:Cy[800],default:"#303030"},action:{active:Ty.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Hy(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=zy(e.main,i):"dark"===t&&(e.dark=Uy(e.main,a)))}function Wy(e){var t=e.primary,n=void 0===t?{light:Py[300],main:Py[500],dark:Py[700]}:t,r=e.secondary,i=void 0===r?{light:Iy.A200,main:Iy.A400,dark:Iy.A700}:r,a=e.error,o=void 0===a?{light:Ry[300],main:Ry[500],dark:Ry[700]}:a,s=e.warning,u=void 0===s?{light:Ly[300],main:Ly[500],dark:Ly[700]}:s,l=e.info,c=void 0===l?{light:My[300],main:My[500],dark:My[700]}:l,d=e.success,f=void 0===d?{light:Oy[300],main:Oy[500],dark:Oy[700]}:d,h=e.type,p=void 0===h?"light":h,v=e.contrastThreshold,m=void 0===v?3:v,g=e.tonalOffset,y=void 0===g?.2:g,_=(0,xv.Z)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function b(e){var t=function(e,t){var n=jy(e),r=jy(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Zy.text.primary)>=m?Zy.text.primary:Vy.text.primary;return t}var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=_a({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Ay(4,t));if("string"!==typeof e.main)throw new Error(Ay(5,JSON.stringify(e.main)));return Hy(e,"light",n,y),Hy(e,"dark",r,y),e.contrastText||(e.contrastText=b(e.main)),e},x={dark:Zy,light:Vy};return by(_a({common:Ty,type:p,primary:w(n),secondary:w(i,"A400","A200","A700"),error:w(o),warning:w(u),info:w(c),success:w(f),grey:Cy,contrastThreshold:m,getContrastText:b,augmentColor:w,tonalOffset:y},x[p]),_)}function Gy(e){return Math.round(1e5*e)/1e5}function qy(e){return Gy(e)}var Ky={textTransform:"uppercase"},Jy='"Roboto", "Helvetica", "Arial", sans-serif';function Xy(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?Jy:r,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,u=void 0===s?300:s,l=n.fontWeightRegular,c=void 0===l?400:l,d=n.fontWeightMedium,f=void 0===d?500:d,h=n.fontWeightBold,p=void 0===h?700:h,v=n.htmlFontSize,m=void 0===v?16:v,g=n.allVariants,y=n.pxToRem,_=(0,xv.Z)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var b=o/14,w=y||function(e){return"".concat(e/m*b,"rem")},x=function(e,t,n,r,a){return _a({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===Jy?{letterSpacing:"".concat(Gy(r/t),"em")}:{},a,g)},k={h1:x(u,96,1.167,-1.5),h2:x(u,60,1.2,-.5),h3:x(c,48,1.167,0),h4:x(c,34,1.235,.25),h5:x(c,24,1.334,0),h6:x(f,20,1.6,.15),subtitle1:x(c,16,1.75,.15),subtitle2:x(f,14,1.57,.1),body1:x(c,16,1.5,.15),body2:x(c,14,1.43,.15),button:x(f,14,1.75,.4,Ky),caption:x(c,12,1.66,.4),overline:x(c,12,2.66,1,Ky)};return by(_a({htmlFontSize:m,pxToRem:w,round:qy,fontFamily:i,fontSize:o,fontWeightLight:u,fontWeightRegular:c,fontWeightMedium:f,fontWeightBold:p},k),_,{clone:!1})}function Yy(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Qy=["none",Yy(0,2,1,-1,0,1,1,0,0,1,3,0),Yy(0,3,1,-2,0,2,2,0,0,1,5,0),Yy(0,3,3,-2,0,3,4,0,0,1,8,0),Yy(0,2,4,-1,0,4,5,0,0,1,10,0),Yy(0,3,5,-1,0,5,8,0,0,1,14,0),Yy(0,3,5,-1,0,6,10,0,0,1,18,0),Yy(0,4,5,-2,0,7,10,1,0,2,16,1),Yy(0,5,5,-3,0,8,10,1,0,3,14,2),Yy(0,5,6,-3,0,9,12,1,0,3,16,2),Yy(0,6,6,-3,0,10,14,1,0,4,18,3),Yy(0,6,7,-4,0,11,15,1,0,4,20,3),Yy(0,7,8,-4,0,12,17,2,0,5,22,4),Yy(0,7,8,-4,0,13,19,2,0,5,24,4),Yy(0,7,9,-4,0,14,21,2,0,5,26,4),Yy(0,8,9,-5,0,15,22,2,0,6,28,5),Yy(0,8,10,-5,0,16,24,2,0,6,30,5),Yy(0,8,11,-5,0,17,26,2,0,6,32,5),Yy(0,9,11,-5,0,18,28,2,0,7,34,6),Yy(0,9,12,-6,0,19,29,2,0,7,36,6),Yy(0,10,13,-6,0,20,31,3,0,8,38,7),Yy(0,10,13,-6,0,21,33,3,0,8,40,7),Yy(0,10,14,-6,0,22,35,3,0,8,42,7),Yy(0,11,14,-7,0,23,36,3,0,9,44,8),Yy(0,11,15,-7,0,24,38,3,0,9,46,8)],$y={borderRadius:4},e_={xs:0,sm:600,md:960,lg:1280,xl:1920},t_={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(e_[e],"px)")}};var n_=function(e,t){return t?by(e,t,{clone:!1}):e};var r_={m:"margin",p:"padding"},i_={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},a_={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},o_=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!a_[e])return[e];e=a_[e]}var t=e.split(""),n=(0,l.Z)(t,2),r=n[0],i=n[1],a=r_[r],o=i_[i]||"";return Array.isArray(o)?o.map((function(e){return a+e})):[a+o]})),s_=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function u_(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function l_(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function c_(e){var t=u_(e.theme);return Object.keys(e).map((function(n){if(-1===s_.indexOf(n))return null;var r=l_(o_(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||t_;return t.reduce((function(e,i,a){return e[r.up(r.keys[a])]=n(t[a]),e}),{})}if("object"===(0,yy.Z)(t)){var i=e.theme.breakpoints||t_;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(n_,{})}c_.propTypes={},c_.filterProps=s_;var d_={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},f_={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function h_(e){return"".concat(Math.round(e),"ms")}var p_={easing:d_,duration:f_,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?f_.standard:n,i=t.easing,a=void 0===i?d_.easeInOut:i,o=t.delay,s=void 0===o?0:o;(0,xv.Z)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:h_(r)," ").concat(a," ").concat("string"===typeof s?s:h_(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},v_={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function m_(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,a=e.palette,o=void 0===a?{}:a,s=e.spacing,u=e.typography,l=void 0===u?{}:u,c=(0,xv.Z)(e,["breakpoints","mixins","palette","spacing","typography"]),d=Wy(o),f=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,s=(0,xv.Z)(e,["values","unit","step"]);function u(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function l(e,t){var r=Sy.indexOf(t);return r===Sy.length-1?u(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[Sy[r+1]]?n[Sy[r+1]]:t)-o/100).concat(i,")")}return _a({keys:Sy,values:n,up:u,down:function(e){var t=Sy.indexOf(e)+1,r=n[Sy[t]];return t===Sy.length?u("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-o/100).concat(i,")")},between:l,only:function(e){return l(e,e)},width:function(e){return n[e]}},s)}(n),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=u_({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}(s),p=by({breakpoints:f,direction:"ltr",mixins:Ey(f,h,i),overrides:{},palette:d,props:{},shadows:Qy,typography:Xy(d,l),spacing:h,shape:$y,transitions:p_,zIndex:v_},c),v=arguments.length,m=new Array(v>1?v-1:0),g=1;g<v;g++)m[g-1]=arguments[g];return p=m.reduce((function(e,t){return by(e,t)}),p)}var g_=m_();var y_=function(e){return ky(e,_a({defaultTheme:g_},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))};var __=n(9639);Object.assign(n.g,{TextDecoder:__.TextDecoder,TextEncoder:__.TextEncoder});var b_=y_((function(e){return{container:{display:"flex",flexWrap:"wrap",width:"60%",height:"30%",marginLeft:"30%",marginBottom:"20%",margin:"".concat(e.spacing(0)," auto")},loginBtn:{marginTop:e.spacing(2),flexGrow:1},header:{textAlign:"center",background:"#212121",color:"#fff"},card:{marginTop:e.spacing(10),width:"70%",height:""}}})),w_=function(){var t=b_(),n=(0,e.useState)("https://inrupt.net"),r=(0,l.Z)(n,1)[0],i=(0,e.useState)(window.location.protocol+"//"+window.location.host+"/"),a=(0,l.Z)(i,2),o=a[0],s=a[1];return(0,e.useEffect)((function(){s(window.location.href)}),[o]),(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("form",{className:t.container,noValidate:!0,autoComplete:"on",children:(0,_.jsxs)(Tl,{className:t.card,children:[(0,_.jsx)(Wl,{className:t.header,title:"Identificate"}),(0,_.jsx)(Jl,{children:(0,_.jsxs)(nc,{fixed:!0,children:[(0,_.jsx)(lc,{children:(0,_.jsx)(vp,{label:"Identity Provider",placeholder:"Identity Provider",type:"url",value:r,InputProps:{endAdornment:(0,_.jsx)(ga.LoginButton,{oidcIssuer:r,redirectUrl:window.location.protocol+"//"+window.location.host+"/ProfileViewer",children:(0,_.jsx)(hv,{variant:"contained",color:"primary","aria-label":"loginButton",children:"Login"})})}})}),(0,_.jsx)(Nl,{variant:"body1",component:"p",id:"help",children:(0,_.jsx)(wv,{href:"https://inrupt.net/register",margin:"20%",children:" \xbfNo tienes una cuenta? Reg\xedstrate aqui"})})]})})]})})})};var x_=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var i=n.defaultTheme,a=n.withTheme,o=void 0!==a&&a,s=n.name,u=(0,xv.Z)(n,["defaultTheme","withTheme","name"]);var l=s,c=ky(t,_a({defaultTheme:i,Component:r,name:s||r.displayName,classNamePrefix:l},u)),d=e.forwardRef((function(t,n){t.classes;var a,u=t.innerRef,l=(0,xv.Z)(t,["classes","innerRef"]),d=c(_a({},r.defaultProps,t)),f=l;return("string"===typeof s||o)&&(a=Um()||i,s&&(f=function(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,a=t.props[n];for(i in a)void 0===r[i]&&(r[i]=a[i]);return r}({theme:a,name:s,props:l})),o&&!f.theme&&(f.theme=a)),e.createElement(r,_a({ref:u||n,classes:d},f))}));return Pc()(d,r),d}};var k_=function(e,t){return x_(e,_a({defaultTheme:g_},t))};function S_(e){if("string"!==typeof e)throw new Error(Ay(7));return e.charAt(0).toUpperCase()+e.slice(1)}var E_=e.forwardRef((function(t,n){var r=t.classes,i=t.className,a=t.component,o=void 0===a?"div":a,s=t.disableGutters,u=void 0!==s&&s,l=t.fixed,c=void 0!==l&&l,d=t.maxWidth,f=void 0===d?"lg":d,h=(0,xv.Z)(t,["classes","className","component","disableGutters","fixed","maxWidth"]);return e.createElement(o,_a({className:xa(r.root,i,c&&r.fixed,u&&r.disableGutters,!1!==f&&r["maxWidth".concat(S_(String(f)))]),ref:n},h))})),A_=k_((function(e){return{root:(0,ae.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:r}),t}),{}),maxWidthXs:(0,ae.Z)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:(0,ae.Z)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:(0,ae.Z)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:(0,ae.Z)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:(0,ae.Z)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(E_),T_=e.forwardRef((function(t,n){var r=t.classes,i=t.className,a=t.component,o=void 0===a?"div":a,s=t.square,u=void 0!==s&&s,l=t.elevation,c=void 0===l?1:l,d=t.variant,f=void 0===d?"elevation":d,h=(0,xv.Z)(t,["classes","className","component","square","elevation","variant"]);return e.createElement(o,_a({className:xa(r.root,i,"outlined"===f?r.outlined:r["elevation".concat(c)],!u&&r.rounded),ref:n},h))})),C_=k_((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),_a({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(T_),P_=e.forwardRef((function(t,n){var r=t.classes,i=t.className,a=t.raised,o=void 0!==a&&a,s=(0,xv.Z)(t,["classes","className","raised"]);return e.createElement(C_,_a({className:xa(r.root,i),elevation:o?8:1,ref:n},s))})),I_=k_({root:{overflow:"hidden"}},{name:"MuiCard"})(P_),R_={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},L_=e.forwardRef((function(t,n){var r=t.align,i=void 0===r?"inherit":r,a=t.classes,o=t.className,s=t.color,u=void 0===s?"initial":s,l=t.component,c=t.display,d=void 0===c?"initial":c,f=t.gutterBottom,h=void 0!==f&&f,p=t.noWrap,v=void 0!==p&&p,m=t.paragraph,g=void 0!==m&&m,y=t.variant,_=void 0===y?"body1":y,b=t.variantMapping,w=void 0===b?R_:b,x=(0,xv.Z)(t,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),k=l||(g?"p":w[_]||R_[_])||"span";return e.createElement(k,_a({className:xa(a.root,o,"inherit"!==_&&a[_],"initial"!==u&&a["color".concat(S_(u))],v&&a.noWrap,h&&a.gutterBottom,g&&a.paragraph,"inherit"!==i&&a["align".concat(S_(i))],"initial"!==d&&a["display".concat(S_(d))]),ref:n},x))})),M_=k_((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(L_),O_=e.forwardRef((function(t,n){var r=t.action,i=t.avatar,a=t.classes,o=t.className,s=t.component,u=void 0===s?"div":s,l=t.disableTypography,c=void 0!==l&&l,d=t.subheader,f=t.subheaderTypographyProps,h=t.title,p=t.titleTypographyProps,v=(0,xv.Z)(t,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),m=h;null==m||m.type===M_||c||(m=e.createElement(M_,_a({variant:i?"body2":"h5",className:a.title,component:"span",display:"block"},p),m));var g=d;return null==g||g.type===M_||c||(g=e.createElement(M_,_a({variant:i?"body2":"body1",className:a.subheader,color:"textSecondary",component:"span",display:"block"},f),g)),e.createElement(u,_a({className:xa(a.root,o),ref:n},v),i&&e.createElement("div",{className:a.avatar},i),e.createElement("div",{className:a.content},m,g),r&&e.createElement("div",{className:a.action},r))})),F_=k_({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(O_),D_=e.forwardRef((function(t,n){var r=t.classes,i=t.className,a=t.component,o=void 0===a?"div":a,s=(0,xv.Z)(t,["classes","className","component"]);return e.createElement(o,_a({className:xa(r.root,i),ref:n},s))})),N_=k_({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(D_);function j_(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function B_(t,n){return e.useMemo((function(){return null==t&&null==n?null:function(e){j_(t,e),j_(n,e)}}),[t,n])}var U_="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;function z_(t){var n=e.useRef(t);return U_((function(){n.current=t})),e.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}var V_=!0,Z_=!1,H_=null,W_={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function G_(e){e.metaKey||e.altKey||e.ctrlKey||(V_=!0)}function q_(){V_=!1}function K_(){"hidden"===this.visibilityState&&Z_&&(V_=!0)}function J_(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return V_||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!W_[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function X_(){Z_=!0,window.clearTimeout(H_),H_=window.setTimeout((function(){Z_=!1}),100)}function Y_(){var t=e.useCallback((function(e){var t,n=r.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",G_,!0),t.addEventListener("mousedown",q_,!0),t.addEventListener("pointerdown",q_,!0),t.addEventListener("touchstart",q_,!0),t.addEventListener("visibilitychange",K_,!0))}),[]);return{isFocusVisible:J_,onBlurVisible:X_,ref:t}}var Q_="undefined"===typeof window?e.useEffect:e.useLayoutEffect;var $_=function(t){var n=t.classes,r=t.pulsate,i=void 0!==r&&r,a=t.rippleX,o=t.rippleY,s=t.rippleSize,u=t.in,l=t.onExited,c=void 0===l?function(){}:l,d=t.timeout,f=e.useState(!1),h=f[0],p=f[1],v=xa(n.ripple,n.rippleVisible,i&&n.ripplePulsate),m={width:s,height:s,top:-s/2+o,left:-s/2+a},g=xa(n.child,h&&n.childLeaving,i&&n.childPulsate),y=z_(c);return Q_((function(){if(!u){p(!0);var e=setTimeout(y,d);return function(){clearTimeout(e)}}}),[y,u,d]),e.createElement("span",{className:v,style:m},e.createElement("span",{className:g}))},eb=e.forwardRef((function(t,n){var r=t.center,i=void 0!==r&&r,a=t.classes,o=t.className,s=(0,xv.Z)(t,["center","classes","className"]),u=e.useState([]),l=u[0],c=u[1],d=e.useRef(0),f=e.useRef(null);e.useEffect((function(){f.current&&(f.current(),f.current=null)}),[l]);var h=e.useRef(!1),p=e.useRef(null),v=e.useRef(null),m=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(p.current)}}),[]);var g=e.useCallback((function(t){var n=t.pulsate,r=t.rippleX,i=t.rippleY,o=t.rippleSize,s=t.cb;c((function(t){return[].concat((0,oe.Z)(t),[e.createElement($_,{key:d.current,classes:a,timeout:550,pulsate:n,rippleX:r,rippleY:i,rippleSize:o})])})),d.current+=1,f.current=s}),[a]),y=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,a=void 0!==r&&r,o=t.center,s=void 0===o?i||t.pulsate:o,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===e.type&&h.current)h.current=!1;else{"touchstart"===e.type&&(h.current=!0);var c,d,f,y=l?null:m.current,_=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(_.width/2),d=Math.round(_.height/2);else{var b=e.touches?e.touches[0]:e,w=b.clientX,x=b.clientY;c=Math.round(w-_.left),d=Math.round(x-_.top)}if(s)(f=Math.sqrt((2*Math.pow(_.width,2)+Math.pow(_.height,2))/3))%2===0&&(f+=1);else{var k=2*Math.max(Math.abs((y?y.clientWidth:0)-c),c)+2,S=2*Math.max(Math.abs((y?y.clientHeight:0)-d),d)+2;f=Math.sqrt(Math.pow(k,2)+Math.pow(S,2))}e.touches?null===v.current&&(v.current=function(){g({pulsate:a,rippleX:c,rippleY:d,rippleSize:f,cb:n})},p.current=setTimeout((function(){v.current&&(v.current(),v.current=null)}),80)):g({pulsate:a,rippleX:c,rippleY:d,rippleSize:f,cb:n})}}),[i,g]),_=e.useCallback((function(){y({},{pulsate:!0})}),[y]),b=e.useCallback((function(e,t){if(clearTimeout(p.current),"touchend"===e.type&&v.current)return e.persist(),v.current(),v.current=null,void(p.current=setTimeout((function(){b(e,t)})));v.current=null,c((function(e){return e.length>0?e.slice(1):e})),f.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:_,start:y,stop:b}}),[_,y,b]),e.createElement("span",_a({className:xa(a.root,o),ref:m},s),e.createElement(Lp,{component:null,exit:!0},l))})),tb=k_((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(e.memo(eb)),nb=e.forwardRef((function(t,n){var i=t.action,a=t.buttonRef,o=t.centerRipple,s=void 0!==o&&o,u=t.children,l=t.classes,c=t.className,d=t.component,f=void 0===d?"button":d,h=t.disabled,p=void 0!==h&&h,v=t.disableRipple,m=void 0!==v&&v,g=t.disableTouchRipple,y=void 0!==g&&g,_=t.focusRipple,b=void 0!==_&&_,w=t.focusVisibleClassName,x=t.onBlur,k=t.onClick,S=t.onFocus,E=t.onFocusVisible,A=t.onKeyDown,T=t.onKeyUp,C=t.onMouseDown,P=t.onMouseLeave,I=t.onMouseUp,R=t.onTouchEnd,L=t.onTouchMove,M=t.onTouchStart,O=t.onDragLeave,F=t.tabIndex,D=void 0===F?0:F,N=t.TouchRippleProps,j=t.type,B=void 0===j?"button":j,U=(0,xv.Z)(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),z=e.useRef(null);var V=e.useRef(null),Z=e.useState(!1),H=Z[0],W=Z[1];p&&H&&W(!1);var G=Y_(),q=G.isFocusVisible,K=G.onBlurVisible,J=G.ref;function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;return z_((function(r){return t&&t(r),!n&&V.current&&V.current[e](r),!0}))}e.useImperativeHandle(i,(function(){return{focusVisible:function(){W(!0),z.current.focus()}}}),[]),e.useEffect((function(){H&&b&&!m&&V.current.pulsate()}),[m,b,H]);var Y=X("start",C),Q=X("stop",O),$=X("stop",I),ee=X("stop",(function(e){H&&e.preventDefault(),P&&P(e)})),te=X("start",M),ne=X("stop",R),re=X("stop",L),ie=X("stop",(function(e){H&&(K(e),W(!1)),x&&x(e)}),!1),ae=z_((function(e){z.current||(z.current=e.currentTarget),q(e)&&(W(!0),E&&E(e)),S&&S(e)})),oe=function(){var e=r.findDOMNode(z.current);return f&&"button"!==f&&!("A"===e.tagName&&e.href)},se=e.useRef(!1),ue=z_((function(e){b&&!se.current&&H&&V.current&&" "===e.key&&(se.current=!0,e.persist(),V.current.stop(e,(function(){V.current.start(e)}))),e.target===e.currentTarget&&oe()&&" "===e.key&&e.preventDefault(),A&&A(e),e.target===e.currentTarget&&oe()&&"Enter"===e.key&&!p&&(e.preventDefault(),k&&k(e))})),le=z_((function(e){b&&" "===e.key&&V.current&&H&&!e.defaultPrevented&&(se.current=!1,e.persist(),V.current.stop(e,(function(){V.current.pulsate(e)}))),T&&T(e),k&&e.target===e.currentTarget&&oe()&&" "===e.key&&!e.defaultPrevented&&k(e)})),ce=f;"button"===ce&&U.href&&(ce="a");var de={};"button"===ce?(de.type=B,de.disabled=p):("a"===ce&&U.href||(de.role="button"),de["aria-disabled"]=p);var fe=B_(a,n),he=B_(J,z),pe=B_(fe,he),ve=e.useState(!1),me=ve[0],ge=ve[1];e.useEffect((function(){ge(!0)}),[]);var ye=me&&!m&&!p;return e.createElement(ce,_a({className:xa(l.root,c,H&&[l.focusVisible,w],p&&l.disabled),onBlur:ie,onClick:k,onFocus:ae,onKeyDown:ue,onKeyUp:le,onMouseDown:Y,onMouseLeave:ee,onMouseUp:$,onDragLeave:Q,onTouchEnd:ne,onTouchMove:re,onTouchStart:te,ref:pe,tabIndex:p?-1:D},de,U),u,ye?e.createElement(tb,_a({ref:V,center:s},N)):null)})),rb=k_({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(nb),ib=e.forwardRef((function(t,n){var r=t.children,i=t.classes,a=t.className,o=t.focusVisibleClassName,s=(0,xv.Z)(t,["children","classes","className","focusVisibleClassName"]);return e.createElement(rb,_a({className:xa(i.root,a),focusVisibleClassName:xa(o,i.focusVisible),ref:n},s),r,e.createElement("span",{className:i.focusHighlight}))})),ab=k_((function(e){return{root:{display:"block",textAlign:"inherit",width:"100%","&:hover $focusHighlight":{opacity:e.palette.action.hoverOpacity},"&$focusVisible $focusHighlight":{opacity:.12}},focusVisible:{},focusHighlight:{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}}),{name:"MuiCardActionArea"})(ib),ob=e.forwardRef((function(t,n){var r=t.children,i=t.classes,a=t.className,o=t.color,s=void 0===o?"default":o,u=t.component,l=void 0===u?"button":u,c=t.disabled,d=void 0!==c&&c,f=t.disableElevation,h=void 0!==f&&f,p=t.disableFocusRipple,v=void 0!==p&&p,m=t.endIcon,g=t.focusVisibleClassName,y=t.fullWidth,_=void 0!==y&&y,b=t.size,w=void 0===b?"medium":b,x=t.startIcon,k=t.type,S=void 0===k?"button":k,E=t.variant,A=void 0===E?"text":E,T=(0,xv.Z)(t,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),C=x&&e.createElement("span",{className:xa(i.startIcon,i["iconSize".concat(S_(w))])},x),P=m&&e.createElement("span",{className:xa(i.endIcon,i["iconSize".concat(S_(w))])},m);return e.createElement(rb,_a({className:xa(i.root,i[A],a,"inherit"===s?i.colorInherit:"default"!==s&&i["".concat(A).concat(S_(s))],"medium"!==w&&[i["".concat(A,"Size").concat(S_(w))],i["size".concat(S_(w))]],h&&i.disableElevation,d&&i.disabled,_&&i.fullWidth),component:l,disabled:d,focusRipple:!v,focusVisibleClassName:xa(i.focusVisible,g),ref:n,type:S},T),e.createElement("span",{className:i.label},C,r,P))})),sb=k_((function(e){return{root:_a({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:By(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:By(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:By(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(By(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:By(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(By(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:By(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(ob);function ub(){return"undefined"!==typeof window&&"undefined"!==typeof window.localStorage?window.localStorage:function(){var e=new Map;return{setItem:function(t,n){e.set(t,n)},getItem:function(t){return e.get(t)||null},removeItem:function(t){e.delete(t)},get length(){return e.size},clear:function(){return e.clear()},key:function(t){for(var n=e.entries(),r=n.next(),i=0;i<t;i++)r=n.next();return r&&r.value?r.value[0]:null}}}()}var lb="i18nextLng",cb=function(){function e(e,t){if(!e)throw new Error("A new context *MUST* be provided a locale, but none was provided.");if(!t)throw new Error("A new context *MUST* be provided storage (we expect 'localStorage').");this._initialLocale=e,this._storage=t,this._storage.setItem(lb,e),this._createdAt=Date.now()}return e.prototype.getLocale=function(){var e;return null!==(e=this._storage.getItem(lb))&&void 0!==e?e:this._initialLocale},e.prototype.setLocale=function(e){return this._storage.setItem(lb,e),this},e.prototype.getInitialLocale=function(){return this._initialLocale},e.prototype.getCreatedAt=function(){return this._createdAt},e}(),db=function(e,t){return db=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},db(e,t)};!function(e){function t(n,r,i){var a=e.call(this,r)||this;if(i)if(i instanceof t)a._wrappedException=i,a.message=a.message+"\nContains context error: "+i.message;else{if(!(i instanceof Error))throw new Error("Context error can only wrap ContextErrors or Errors, but got ["+i+"] (message was ["+r+"]).");a._wrappedException=i,a.message=a.message+"\nContains error: "+i.message}return a._context=n,a._createdAt=Date.now(),Object.setPrototypeOf(a,t.prototype),a}(function(e,t){function n(){this.constructor=e}db(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.report=function(e,t,n){var r,i=n.message,a=n.stack?n.stack.toString():"";return"production"!==(null===(r=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"https://uo282944.github.io/lomap_6a_despliegue",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===r?void 0:r.NODE_ENV)&&(i+="\nLevel "+e+" of "+t+":\n"+a),i},t.prototype.countLevels=function(){for(var e=1,n=this;n&&n._wrappedException;)n._wrappedException instanceof t?(n=n._wrappedException,e++):(n=void 0,e++);return e},t.prototype.unwrapException=function(){for(var e=this.countLevels(),n=1,r="",i=this;void 0!==i;)r+="\n\n"+this.report(n++,e,i),i._wrappedException instanceof t||!i._wrappedException?i=i._wrappedException:(r+="\n\n"+this.report(n++,e,i._wrappedException),i=void 0);return r},t.prototype.toString=function(){return this.unwrapException()},t.prototype.contains=function(e){if(!e)return!0;var t=this.unwrapException();return e.map((function(e){return t.includes(e)})).reduce((function(e,t){return e&&t}),!0)}}(Error);var fb="<No Language>";var hb=function(){function e(e,t,n,r){this.termType="Literal",this._rdfFactory=e,this._iri=t,this._values=n||new Map,this._contextMessage=r||"<None provided>",this._language=void 0,this._expandedMessage=void 0}return Object.defineProperty(e.prototype,"setToEnglish",{get:function(){return this.asLanguage("en"),this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var e,t;return null!==(t=null===(e=this.lookup(!1))||void 0===e?void 0:e.value)&&void 0!==t?t:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this._language&&this._language!==fb?this._language:""},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return void 0!==e.language&&this._values.get(e.language||fb)===e.value},Object.defineProperty(e.prototype,"datatype",{get:function(){return this.language&&this.language!=fb?this._rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"):this._rdfFactory.namedNode("http://www.w3.org/2001/XMLSchema#string")},enumerable:!0,configurable:!0}),e.prototype.getIri=function(){return this._iri},e.prototype.asLanguage=function(e){return this._language=e,this},e.prototype.addValue=function(e,t){return this._language||(this._language=t),this._values.set(t,e),this},e.prototype.lookupEnglish=function(e){return this.asLanguage("en").lookup(e)},e.prototype.lookup=function(e){var t=this.lookupButDefaultToEnglishOrNoLanguage(e);if(void 0!==t)return this._expandedMessage=t,this._rdfFactory.literal(t,this.handleNoLanguageTag())},e.prototype.lookupButDefaultToEnglishOrNoLanguage=function(e){if(this._language){var t=this._values.get(this._language);if(t)return t;if(e)throw new Error("MultiLingualLiteral message with IRI ["+this._iri.value+"] required value in language ["+this._language+"], but none found (Context: ["+this._contextMessage+"]).");return(t=this._values.get("en"))?this._language="en":(t=this._values.get(fb),this._language=fb),t}if(e)throw new Error("No value has been added to the literal")},e.prototype.params=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.lookupButDefaultToEnglishOrNoLanguage(e);if(void 0!==r){var i=r.split("{{").length-1;if(i!==t.length)throw new Error("Setting parameters on LitMultiLingualLiteral with IRI ["+this._iri.value+"] and value ["+r+"] in language ["+this._language+"], but it requires ["+i+"] params and we received ["+t.length+"] (Context: ["+this._contextMessage+"]).");for(var a=0;a<t.length;a++){var o="{{"+a+"}}";r=r.replace(o,t[a])}return this._expandedMessage=r,this._rdfFactory.literal(r,this.handleNoLanguageTag())}},e.prototype.handleNoLanguageTag=function(){return this._language===fb?"":this._language},e}(),pb=function(){function e(e){this.store=e}return e.prototype.lookupLabel=function(e,t){return this.lookupItem(e,t,"label")},e.prototype.updateLabel=function(e,t,n){this.updateItem(e,t,n,"label")},e.prototype.lookupComment=function(e,t){return this.lookupItem(e,t,"comment")},e.prototype.updateComment=function(e,t,n){this.updateItem(e,t,n,"comment")},e.prototype.lookupMessage=function(e,t){return this.lookupItem(e,t,"message")},e.prototype.updateMessage=function(e,t,n){this.updateItem(e,t,n,"message")},e.prototype.updateItem=function(e,t,n,r){this.store.setItem(e+"-"+r+"-"+t,n)},e.prototype.lookupItem=function(e,t,n){return this.lookupFullTerm(e+"-"+n+"-",t)},e.prototype.lookupFullTerm=function(e,t){var n,r=null!==(n=this.store.getItem("lang_preferred_fallback"))&&void 0!==n?n:"en";return this.lookupFullTermFallback(e,t,[r,"en",fb])},e.prototype.lookupFullTermFallback=function(e,t,n){var r=this.store.getItem(""+e+t);return r||(n.length>0?this.lookupFullTermFallback(e,n[0],n.slice(1)):void 0)},e}(),vb=function(){function e(t,n,r,i){this.termType="NamedNode",this.iri="string"===typeof t?n.namedNode(t):t,this.rdfFactory=n,this.strict=void 0!==i&&i,this._litSessionContext=new cb("en",r),this._registry=new pb(r),this._label=new hb(n,this.iri,void 0,"rdfs:label"),this._comment=new hb(n,this.iri,void 0,"rdfs:comment"),this._message=new hb(n,this.iri,void 0,"message (should be defined in RDF vocab using: skos:definition)"),i||this._label.addValue(e.extractIriLocalName(t),fb),this._mandatory=!0,this._languageOverride=void 0,this.resetState()}return Object.defineProperty(e.prototype,"value",{get:function(){return this.iri.value},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.iri.equals(e)},Object.defineProperty(e.prototype,"mandatory",{get:function(){return this._mandatory=!0,this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asEnglish",{get:function(){return this.asLanguage("en")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iriAsString",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelLiteral",{get:function(){try{var e=this.useLanguageOverrideOrGetFromContext();return this._label.asLanguage(e).lookup(this._mandatory)}finally{this.resetState()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var e=this.labelLiteral;return e&&e.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commentLiteral",{get:function(){try{var e=this.useLanguageOverrideOrGetFromContext();return this._comment.asLanguage(e).lookup(this._mandatory)}finally{this.resetState()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"comment",{get:function(){var e=this.commentLiteral;return e&&e.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"messageLiteral",{get:function(){try{var e=this.useLanguageOverrideOrGetFromContext();return this._message.asLanguage(e).lookup(this._mandatory)}finally{this.resetState()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){var e=this.messageLiteral;return e&&e.value},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.value},e.prototype.messageParamsLiteral=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.useLanguageOverrideOrGetFromContext();try{return(e=this._message.asLanguage(r)).params.apply(e,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}([this._mandatory],t))}finally{this.resetState()}},e.prototype.messageParams=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.messageParamsLiteral.apply(this,e);return n&&n.value},e.prototype.resetState=function(){this._languageOverride=void 0,this._mandatory=!1},e.prototype.addLabelNoLanguage=function(e){return this.addLabel(e,fb)},e.prototype.addLabel=function(e,t){return this.validateAddParams(e,t,"label"),this._label.addValue(e,t),this._registry.updateLabel(this.value,t,e),this},e.prototype.addCommentNoLanguage=function(e){return this.addComment(e,fb)},e.prototype.addComment=function(e,t){return this.validateAddParams(e,t,"comment"),this._comment.addValue(e,t),this._registry.updateComment(this.value,t,e),this},e.prototype.addMessageNoLanguage=function(e){return this.addMessage(e,fb)},e.prototype.addMessage=function(e,t){return this.validateAddParams(e,t,"message"),this._message.addValue(e,t),this._registry.updateMessage(this.value,t,e),this},e.prototype.validateAddParams=function(e,t,n){if(void 0===e||null===e)throw new Error("Attempted to add a non-existent ["+n+"] value to vocab term");if(!t)throw new Error("Attempted to add the ["+n+"] value ["+e+"], but without specifying a language");return this},e.prototype.useLanguageOverrideOrGetFromContext=function(){return void 0===this._languageOverride?this._litSessionContext.getLocale():this._languageOverride},e.prototype.asLanguage=function(e){return this._languageOverride=e||fb,this},e.extractIriLocalName=function(e){var t=this.isString(e)?e:e.value,n=t.lastIndexOf("#");if(n>-1)return t.substring(n+1);var r=t.lastIndexOf("/");if(-1===r||t.toLowerCase().startsWith("http")&&r<(t.toLowerCase().startsWith("https")?8:7))throw Error("Expected hash fragment ('#') or slash ('/') (other than 'https://...') in IRI ["+t+"]");return t.substring(r+1)},e.isString=function(e){return"string"===typeof e||e instanceof String},e.isStringIri=function(e){if(!this.isString(e))return!1;var t=e.toLowerCase();return t.startsWith("http://")||t.startsWith("https://")},e}();function mb(e){this.value=e||"b"+ ++mb.nextId}mb.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},mb.prototype.termType="BlankNode",mb.nextId=0;var gb=mb;function yb(){this.value=""}yb.prototype.equals=function(e){return!!e&&e.termType===this.termType},yb.prototype.termType="DefaultGraph";var _b=yb;function bb(e){this.value=e}bb.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},bb.prototype.termType="NamedNode";var wb=bb;function xb(e,t,n){this.value=e,this.datatype=xb.stringDatatype,this.language="",t?(this.language=t,this.datatype=xb.langStringDatatype):n&&(this.datatype=n)}xb.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)},xb.prototype.termType="Literal",xb.langStringDatatype=new wb("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),xb.stringDatatype=new wb("http://www.w3.org/2001/XMLSchema#string");var kb=xb;function Sb(e,t,n,r){this.subject=e,this.predicate=t,this.object=n,this.graph=r||new _b}Sb.prototype.equals=function(e){return!!e&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)};var Eb=Sb;function Ab(e){this.value=e}Ab.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},Ab.prototype.termType="Variable";var Tb=Ab;function Cb(){}Cb.namedNode=function(e){return new wb(e)},Cb.blankNode=function(e){return new gb(e)},Cb.literal=function(e,t){return"string"===typeof t?-1===t.indexOf(":")?new kb(e,t):new kb(e,null,Cb.namedNode(t)):new kb(e,null,t)},Cb.defaultGraph=function(){return Cb.defaultGraphInstance},Cb.variable=function(e){return new Tb(e)},Cb.triple=function(e,t,n){return Cb.quad(e,t,n)},Cb.quad=function(e,t,n,r){return new Eb(e,t,n,r||Cb.defaultGraphInstance)},Cb.defaultGraphInstance=new _b;var Pb=Cb,Ib=Pb.namedNode;function Rb(e){return Ib("http://schema.org/"+e)}new vb(Rb("Person"),Pb,ub(),!1).addLabel("Person","en").addLabel("La personne","fr").addLabel("Person","de").addLabel("Persona","es").addLabel("Persona","it").addLabelNoLanguage("Person").addComment("Une personne (vivante, morte, mort-vivant ou fictive).","fr").addComment("Eine Person (lebendig, tot, untot oder fiktiv).","de").addComment("Una persona (viva, muerta, no muerta o ficticia).","es").addComment("Una persona (viva, morta, non morta o immaginaria).","it").addCommentNoLanguage("A person (alive, dead, undead, or fictional)."),new vb(Rb("alternateName"),Pb,ub(),!1).addLabel("Alternate Name","en").addLabel("Nom alternatif","fr").addLabel("Anderer Name","de").addLabel("Nombre alternativo","es").addLabel("Nome alternativo","it").addLabelNoLanguage("alternateName").addComment("Un alias pour l'article.","fr").addComment("Ein Alias \u200b\u200bf\xfcr den Artikel.","de").addComment("Un alias para el elemento.","es").addComment("Un alias per l'elemento.","it").addCommentNoLanguage("An alias for the item."),new vb(Rb("givenName"),Pb,ub(),!1).addLabel("Given Name","en").addLabel("Pr\xe9nom","fr").addLabel("Vorname","de").addLabel("Nombre de pila","es").addLabel("Nome di battesimo","it").addLabelNoLanguage("givenName").addComment("Pr\xe9nom. Aux \xc9tats-Unis, le pr\xe9nom d\u2019une personne. Ceci peut \xeatre utilis\xe9 avec familyName au lieu de la propri\xe9t\xe9 name.","fr").addComment("Vorname. In den USA der Vorname einer Person. Dies kann zusammen mit familyName anstelle der Eigenschaft name verwendet werden.","de").addComment("Nombre de pila. En los EE. UU., El primer nombre de una persona. Esto se puede usar junto con familyName en lugar de la propiedad name.","es").addComment("Nome di battesimo. Negli Stati Uniti, il primo nome di una persona. Questo pu\xf2 essere usato insieme a familyName al posto della propriet\xe0 name.","it").addCommentNoLanguage("Given name. In the U.S., the first name of a Person. This can be used along with familyName instead of the name property."),new vb(Rb("familyName"),Pb,ub(),!1).addLabel("Family Name","en").addLabel("Nom de famille","fr").addLabel("Nachname","de").addLabel("Apellido","es").addLabel("Cognome","it").addLabelNoLanguage("familyName").addComment("Nom de famille. Aux \xc9tats-Unis, le nom de famille d\u2019une personne. Ceci peut \xeatre utilis\xe9 avec GivenName au lieu de la propri\xe9t\xe9 name.","fr").addComment("Nachname. In den USA der Nachname einer Person. Dies kann zusammen mit givenName anstelle der Eigenschaft name verwendet werden.","de").addComment("Apellido. En los EE.UU., el apellido de una persona. Esto se puede usar junto con givenName en lugar de la propiedad name.","es").addComment("Cognome. Negli Stati Uniti, il cognome di una persona. Questo pu\xf2 essere usato insieme a givenName al posto della propriet\xe0 name.","it").addCommentNoLanguage("Family name. In the U.S., the last name of an Person. This can be used along with givenName instead of the name property."),new vb(Rb("additionalName"),Pb,ub(),!1).addLabel("Additional Name","en").addLabel("Nom additionnel","fr").addLabel("Zus\xe4tzlicher Name","de").addLabel("Nombre adicional","es").addLabel("Nome aggiuntivo","it").addLabelNoLanguage("additionalName").addComment("Un nom suppl\xe9mentaire pour une personne peut \xeatre utilis\xe9 pour un deuxi\xe8me pr\xe9nom.","fr").addComment("Ein zus\xe4tzlicher Name f\xfcr eine Person kann f\xfcr einen zweiten Vornamen verwendet werden.","de").addComment("Un nombre adicional para una persona, se puede utilizar para un segundo nombre.","es").addComment("Un nome aggiuntivo per una persona pu\xf2 essere usato per un secondo nome.","it").addCommentNoLanguage("An additional name for a Person, can be used for a middle name."),new vb(Rb("license"),Pb,ub(),!1).addLabel("License","en").addLabel("License","fr").addLabel("Lizenz","de").addLabel("Licencia","es").addLabel("Licenza","it").addLabelNoLanguage("license").addComment("Un document de licence qui s'applique \xe0 ce contenu, g\xe9n\xe9ralement indiqu\xe9 par une URL.","fr").addComment("Ein Lizenzdokument, das f\xfcr diesen Inhalt gilt und in der Regel durch eine URL angegeben wird.","de").addComment("Un documento de licencia que se aplica a este contenido, normalmente indicado por URL.","es").addComment("Un documento di licenza che si applica a questo contenuto, generalmente indicato dall'URL.","it").addCommentNoLanguage("A license document that applies to this content, typically indicated by URL."),new vb(Rb("newTerm"),Pb,ub(),!1).addLabelNoLanguage("newTerm").addComment("Must have comment too!","en"),new vb(Rb("name"),Pb,ub(),!1).addLabel("Name","en").addLabel("Nom","fr").addLabel("Name","de").addLabel("Nombre","es").addLabel("Nome","it").addLabelNoLanguage("name").addComment("Le nom de l'objet.","fr").addComment("Der Name des Artikels.","de").addComment("El nombre del art\xedculo.","es").addComment("Il nome dell'articolo.","it").addCommentNoLanguage("The name of the item.");var Lb=Pb.namedNode;function Mb(e){return Lb("http://www.w3.org/2006/vcard/ns#"+e)}new vb(Mb("Acquaintance"),Pb,ub(),!1).addLabel("Acquaintance","en"),new vb(Mb("RelatedType"),Pb,ub(),!1).addLabel("Relation Type","en").addComment("Used for relation type codes. The URI of the relation type code must be used as the value for the Relation Type.","en"),new vb(Mb("Agent"),Pb,ub(),!1).addLabel("Agent","en"),new vb(Mb("BBS"),Pb,ub(),!1).addLabel("BBS","en").addComment("This class is deprecated","en"),new vb(Mb("TelephoneType"),Pb,ub(),!1).addLabel("Phone","en").addComment("Used for telephone type codes. The URI of the telephone type code must be used as the value for the Telephone Type.","en"),new vb(Mb("Car"),Pb,ub(),!1).addLabel("Car","en").addComment("This class is deprecated","en"),new vb(Mb("Cell"),Pb,ub(),!1).addLabel("Cell","en").addComment("Also called mobile telephone","en"),new vb(Mb("Child"),Pb,ub(),!1).addLabel("Child","en"),new vb(Mb("Colleague"),Pb,ub(),!1).addLabel("Colleague","en"),new vb(Mb("Contact"),Pb,ub(),!1).addLabel("Contact","en"),new vb(Mb("Coresident"),Pb,ub(),!1).addLabel("Coresident","en"),new vb(Mb("Coworker"),Pb,ub(),!1).addLabel("Coworker","en"),new vb(Mb("Crush"),Pb,ub(),!1).addLabel("Crush","en"),new vb(Mb("Date"),Pb,ub(),!1).addLabel("Date","en"),new vb(Mb("Dom"),Pb,ub(),!1).addLabel("Dom","en").addComment("This class is deprecated","en"),new vb(Mb("Type"),Pb,ub(),!1).addLabel("Type","en").addComment("Used for type codes. The URI of the type code must be used as the value for Type.","en"),new vb(Mb("Emergency"),Pb,ub(),!1).addLabel("Emergency","en"),new vb(Mb("Fax"),Pb,ub(),!1).addLabel("Fax","en"),new vb(Mb("Female"),Pb,ub(),!1).addLabel("Female","en"),new vb(Mb("Gender"),Pb,ub(),!1).addLabel("Gender","en").addComment("Used for gender codes. The URI of the gender code must be used as the value for Gender.","en"),new vb(Mb("Friend"),Pb,ub(),!1).addLabel("Friend","en"),new vb(Mb("Home"),Pb,ub(),!1).addLabel("Home","en").addComment("This implies that the property is related to an individual's personal life","en"),new vb(Mb("ISDN"),Pb,ub(),!1).addLabel("ISDN","en").addComment("This class is deprecated","en"),new vb(Mb("Internet"),Pb,ub(),!1).addLabel("Internet","en").addComment("This class is deprecated","en"),new vb(Mb("Intl"),Pb,ub(),!1).addLabel("Intl","en").addComment("This class is deprecated","en"),new vb(Mb("Kin"),Pb,ub(),!1).addLabel("Kin","en"),new vb(Mb("Label"),Pb,ub(),!1).addLabel("Label","en").addComment("This class is deprecated","en"),new vb(Mb("Male"),Pb,ub(),!1).addLabel("Male","en"),new vb(Mb("Me"),Pb,ub(),!1).addLabel("Me","en"),new vb(Mb("Met"),Pb,ub(),!1).addLabel("Met","en"),new vb(Mb("Modem"),Pb,ub(),!1).addLabel("Modem","en").addComment("This class is deprecated","en"),new vb(Mb("Msg"),Pb,ub(),!1).addLabel("Msg","en").addComment("This class is deprecated","en"),new vb(Mb("Muse"),Pb,ub(),!1).addLabel("Muse","en"),new vb(Mb("Neighbor"),Pb,ub(),!1).addLabel("Neighbor","en"),new vb(Mb("None"),Pb,ub(),!1).addLabel("None","en"),new vb(Mb("Other"),Pb,ub(),!1).addLabel("Other","en"),new vb(Mb("PCS"),Pb,ub(),!1).addLabel("PCS","en").addComment("This class is deprecated","en"),new vb(Mb("Pager"),Pb,ub(),!1).addLabel("Pager","en"),new vb(Mb("Parcel"),Pb,ub(),!1).addLabel("Parcel","en").addComment("This class is deprecated","en"),new vb(Mb("Parent"),Pb,ub(),!1).addLabel("Parent","en"),new vb(Mb("Postal"),Pb,ub(),!1).addLabel("Postal","en").addComment("This class is deprecated","en"),new vb(Mb("Pref"),Pb,ub(),!1).addLabel("Pref","en").addComment("This class is deprecated","en"),new vb(Mb("Sibling"),Pb,ub(),!1).addLabel("Sibling","en"),new vb(Mb("Spouse"),Pb,ub(),!1).addLabel("Spouse","en"),new vb(Mb("Sweetheart"),Pb,ub(),!1).addLabel("Sweetheart","en"),new vb(Mb("Tel"),Pb,ub(),!1).addLabel("Tel","en").addComment("This class is deprecated. Use the hasTelephone object property.","en"),new vb(Mb("Text"),Pb,ub(),!1).addLabel("Text","en").addComment("Also called sms telephone","en"),new vb(Mb("TextPhone"),Pb,ub(),!1).addLabel("Text phone","en"),new vb(Mb("Unknown"),Pb,ub(),!1).addLabel("Unknown","en"),new vb(Mb("Video"),Pb,ub(),!1).addLabel("Video","en"),new vb(Mb("Voice"),Pb,ub(),!1).addLabel("Voice","en"),new vb(Mb("Work"),Pb,ub(),!1).addLabel("Work","en").addComment("This implies that the property is related to an individual's work place","en"),new vb(Mb("X400"),Pb,ub(),!1).addLabel("X400","en").addComment("This class is deprecated","en"),new vb(Mb("Address"),Pb,ub(),!1).addLabel("Address","en").addComment("To specify the components of the delivery address for the  object","en"),new vb(Mb("Email"),Pb,ub(),!1).addLabel("Email","en").addComment("To specify the electronic mail address for communication with the object the vCard represents. Use the hasEmail object property.","en"),new vb(Mb("Group"),Pb,ub(),!1).addLabel("Group","en").addComment("Object representing a group of persons or entities.  A group object will usually contain hasMember properties to specify the members of the group.","en"),new vb(Mb("Kind"),Pb,ub(),!1).addLabel("Kind","en").addComment("The parent class for all objects","en"),new vb(Mb("Individual"),Pb,ub(),!1).addLabel("Individual","en").addComment("An object representing a single person or entity","en"),new vb(Mb("Location"),Pb,ub(),!1).addLabel("Location","en").addComment("An object representing a named geographical place","en"),new vb(Mb("Organization"),Pb,ub(),!1).addLabel("Organization","en").addComment("An object representing an organization.  An organization is a single entity, and might represent a business or government, a department or division within a business or government, a club, an association, or the like.\n","en"),new vb(Mb("Name"),Pb,ub(),!1).addLabel("Name","en").addComment("To specify the components of the name of the object","en"),new vb(Mb("VCard"),Pb,ub(),!1).addLabel("VCard","en").addComment("The vCard class is  equivalent to the new Kind class, which is the parent for the four explicit types of vCards (Individual, Organization, Location, Group)","en"),new vb(Mb("adr"),Pb,ub(),!1).addLabel("address","en").addComment("This object property has been mapped","en"),new vb(Mb("hasAddress"),Pb,ub(),!1).addLabel("has address","en").addComment("To specify the components of the delivery address for the object","en"),new vb(Mb("agent"),Pb,ub(),!1).addLabel("agent","en").addComment("This object property has been deprecated","en"),new vb(Mb("anniversary"),Pb,ub(),!1).addLabel("anniversary","en").addComment("The date of marriage, or equivalent, of the object","en"),new vb(Mb("bday"),Pb,ub(),!1).addLabel("birth date","en").addComment("To specify the birth date of the object","en"),new vb(Mb("category"),Pb,ub(),!1).addLabel("category","en").addComment("The category information about the object, also known as tags","en"),new vb(Mb("class"),Pb,ub(),!1).addLabel("class","en").addComment("This data property has been deprecated","en"),new vb(Mb("email"),Pb,ub(),!1).addLabel("email","en").addComment("This object property has been mapped","en"),new vb(Mb("hasEmail"),Pb,ub(),!1).addLabel("has email","en").addComment("To specify the electronic mail address for communication with the object","en"),new vb(Mb("extended-address"),Pb,ub(),!1).addLabel("extended address","en").addComment("This data property has been deprecated","en"),new vb(Mb("geo"),Pb,ub(),!1).addLabel("geo","en").addComment("This object property has been mapped","en"),new vb(Mb("hasGeo"),Pb,ub(),!1).addLabel("has geo","en").addComment("To specify information related to the global positioning of the object. May also be used as a property parameter.","en"),new vb(Mb("hasAdditionalName"),Pb,ub(),!1).addLabel("has additional name","en").addComment("Used to support property parameters for the additional name data property","en"),new vb(Mb("hasCalendarBusy"),Pb,ub(),!1).addLabel("has calendar busy","en").addComment("To specify the busy time associated with the object. (Was called FBURL in RFC6350)","en"),new vb(Mb("hasCalendarLink"),Pb,ub(),!1).addLabel("has calendar link","en").addComment("To specify the calendar associated with the object. (Was called CALURI in RFC6350)","en"),new vb(Mb("hasCalendarRequest"),Pb,ub(),!1).addLabel("has calendar request","en").addComment("To specify the calendar user address to which a scheduling request be sent for the object. (Was called CALADRURI in RFC6350)","en"),new vb(Mb("hasCategory"),Pb,ub(),!1).addLabel("has category","en").addComment("Used to support property parameters for the category data property","en"),new vb(Mb("hasCountryName"),Pb,ub(),!1).addLabel("has country name","en").addComment("Used to support property parameters for the country name data property","en"),new vb(Mb("hasFN"),Pb,ub(),!1).addLabel("has formatted name","en").addComment("Used to support property parameters for the formatted name data property","en"),new vb(Mb("hasFamilyName"),Pb,ub(),!1).addLabel("has family name","en").addComment("Used to support property parameters for the family name data property","en"),new vb(Mb("hasGender"),Pb,ub(),!1).addLabel("has gender","en").addComment("To specify  the sex or gender identity of the object. URIs are recommended to enable interoperable sex and gender codes to be used.","en"),new vb(Mb("hasGivenName"),Pb,ub(),!1).addLabel("has given name","en").addComment("Used to support property parameters for the given name data property","en"),new vb(Mb("hasHonorificPrefix"),Pb,ub(),!1).addLabel("has honorific prefix","en").addComment("Used to support property parameters for the honorific prefix data property","en"),new vb(Mb("hasHonorificSuffix"),Pb,ub(),!1).addLabel("has honorific suffix","en").addComment("Used to support property parameters for the honorific suffix data property","en"),new vb(Mb("hasInstantMessage"),Pb,ub(),!1).addLabel("has messaging","en").addComment("To specify the instant messaging and presence protocol communications with the object. (Was called IMPP in RFC6350)","en"),new vb(Mb("hasLanguage"),Pb,ub(),!1).addLabel("has language","en").addComment("Used to support property parameters for the language data property","en"),new vb(Mb("hasLocality"),Pb,ub(),!1).addLabel("has locality","en").addComment("Used to support property parameters for the locality data property","en"),new vb(Mb("hasNickname"),Pb,ub(),!1).addLabel("has nickname","en").addComment("Used to support property parameters for the nickname data property","en"),new vb(Mb("nickname"),Pb,ub(),!1).addLabel("nickname","en").addComment("The nick name associated with the object","en"),new vb(Mb("hasNote"),Pb,ub(),!1).addLabel("has note","en").addComment("Used to support property parameters for the note data property","en"),new vb(Mb("hasOrganizationName"),Pb,ub(),!1).addLabel("has organization name","en").addComment("Used to support property parameters for the organization name data property","en"),new vb(Mb("hasOrganizationUnit"),Pb,ub(),!1).addLabel("has organization unit name","en").addComment("Used to support property parameters for the organization unit name data property","en"),new vb(Mb("hasPostalCode"),Pb,ub(),!1).addLabel("has postal code","en").addComment("Used to support property parameters for the postal code data property","en"),new vb(Mb("hasRegion"),Pb,ub(),!1).addLabel("has region","en").addComment("Used to support property parameters for the region data property","en"),new vb(Mb("hasRelated"),Pb,ub(),!1).addLabel("has related","en").addComment("To specify a relationship between another entity and the entity represented by this object","en"),new vb(Mb("hasRole"),Pb,ub(),!1).addLabel("has role","en").addComment("Used to support property parameters for the role data property","en"),new vb(Mb("hasSource"),Pb,ub(),!1).addLabel("has source","en").addComment("To identify the source of directory information of the object","en"),new vb(Mb("hasStreetAddress"),Pb,ub(),!1).addLabel("has street address","en").addComment("Used to support property parameters for the street address data property","en"),new vb(Mb("hasTitle"),Pb,ub(),!1).addLabel("has title","en").addComment("Used to support property parameters for the title data property","en"),new vb(Mb("hasUID"),Pb,ub(),!1).addLabel("has uid","en").addComment("To specify a value that represents a globally unique identifier corresponding to the object","en"),new vb(Mb("hasValue"),Pb,ub(),!1).addLabel("has value","en").addComment("Used to indicate the resource value of an object property that requires property parameters","en"),new vb(Mb("label"),Pb,ub(),!1).addLabel("label","en").addComment("This data property has been deprecated","en"),new vb(Mb("language"),Pb,ub(),!1).addLabel("language","en").addComment("To specify the language that may be used for contacting the object. May also be used as a property parameter.","en"),new vb(Mb("latitude"),Pb,ub(),!1).addLabel("latitude","en").addComment("This data property has been deprecated. See hasGeo","en"),new vb(Mb("longitude"),Pb,ub(),!1).addLabel("longitude","en").addComment("This data property has been deprecated. See hasGeo","en"),new vb(Mb("mailer"),Pb,ub(),!1).addLabel("mailer","en").addComment("This data property has been deprecated","en"),new vb(Mb("note"),Pb,ub(),!1).addLabel("note","en").addComment("A note associated with the object","en"),new vb(Mb("org"),Pb,ub(),!1).addLabel("organization","en").addComment("This object property has been mapped. Use the organization-name data property.","en"),new vb(Mb("organization-name"),Pb,ub(),!1).addLabel("organization name","en").addComment("To specify the organizational name associated with the object","en"),new vb(Mb("organization-unit"),Pb,ub(),!1).addLabel("organizational unit name","en").addComment("To specify the organizational unit name associated with the object","en"),new vb(Mb("post-office-box"),Pb,ub(),!1).addLabel("post office box","en").addComment("This data property has been deprecated","en"),new vb(Mb("prodid"),Pb,ub(),!1).addLabel("product id","en").addComment("To specify the identifier for the product that created the object","en"),new vb(Mb("rev"),Pb,ub(),!1).addLabel("revision","en").addComment("To specify revision information about the object","en"),new vb(Mb("role"),Pb,ub(),!1).addLabel("role","en").addComment("To specify the function or part played in a particular situation by the object","en"),new vb(Mb("sort-string"),Pb,ub(),!1).addLabel("sort as","en").addComment("To specify the string to be used for national-language-specific sorting. Used as a property parameter only.","en"),new vb(Mb("title"),Pb,ub(),!1).addLabel("title","en").addComment("To specify the position or job of the object","en"),new vb(Mb("tz"),Pb,ub(),!1).addLabel("time zone","en").addComment("To indicate time zone information that is specific to the object. May also be used as a property parameter.","en"),new vb(Mb("value"),Pb,ub(),!1).addLabel("value","en").addComment("Used to indicate the literal value of a data property that requires property parameters","en"),new vb(Mb("country-name"),Pb,ub(),!1).addLabel("country name","en").addComment("The country name associated with the address of the object","en"),new vb(Mb("locality"),Pb,ub(),!1).addLabel("locality","en").addComment("The locality (e.g. city or town) associated with the address of the object","en"),new vb(Mb("postal-code"),Pb,ub(),!1).addLabel("postal code","en").addComment("The postal code associated with the address of the object","en"),new vb(Mb("region"),Pb,ub(),!1).addLabel("region","en").addComment("The region (e.g. state or province) associated with the address of the object","en"),new vb(Mb("street-address"),Pb,ub(),!1).addLabel("street address","en").addComment("The street address associated with the address of the object","en"),new vb(Mb("hasMember"),Pb,ub(),!1).addLabel("has member","en").addComment("To include a member in the group this object represents. (This property can only be used by Group individuals)","en"),new vb(Mb("additional-name"),Pb,ub(),!1).addLabel("additional name","en").addComment("The additional name associated with the object","en"),new vb(Mb("family-name"),Pb,ub(),!1).addLabel("family name","en").addComment("The family name associated with the object","en"),new vb(Mb("given-name"),Pb,ub(),!1).addLabel("given name","en").addComment("The given name associated with the object","en"),new vb(Mb("honorific-prefix"),Pb,ub(),!1).addLabel("honorific prefix","en").addComment("The honorific prefix of the name associated with the object","en"),new vb(Mb("honorific-suffix"),Pb,ub(),!1).addLabel("honorific suffix","en").addComment("The honorific suffix of the name associated with the object","en"),new vb(Mb("fn"),Pb,ub(),!1).addLabel("formatted name","en").addComment("The formatted text corresponding to the name of the object","en"),new vb(Mb("hasKey"),Pb,ub(),!1).addLabel("has key","en").addComment("To specify a public key or authentication certificate associated with the object","en"),new vb(Mb("key"),Pb,ub(),!1).addLabel("key","en").addComment("This object property has been mapped","en"),new vb(Mb("hasLogo"),Pb,ub(),!1).addLabel("has logo","en").addComment("To specify a graphic image of a logo associated with the object ","en"),new vb(Mb("logo"),Pb,ub(),!1).addLabel("logo","en").addComment("This object property has been mapped","en"),new vb(Mb("hasName"),Pb,ub(),!1).addLabel("has name","en").addComment("To specify the components of the name of the object","en"),new vb(Mb("n"),Pb,ub(),!1).addLabel("name","en").addComment("This object property has been mapped","en"),new vb(Mb("hasPhoto"),Pb,ub(),!1).addLabel("has photo","en").addComment("To specify an image or photograph information that annotates some aspect of the object","en"),new vb(Mb("photo"),Pb,ub(),!1).addLabel("photo","en").addComment("This object property has been mapped","en"),new vb(Mb("hasSound"),Pb,ub(),!1).addLabel("has sound","en").addComment("To specify a digital sound content information that annotates some aspect of the object","en"),new vb(Mb("sound"),Pb,ub(),!1).addLabel("sound","en").addComment("This object property has been mapped","en"),new vb(Mb("hasTelephone"),Pb,ub(),!1).addLabel("has telephone","en").addComment("To specify the telephone number for telephony communication with the object","en"),new vb(Mb("tel"),Pb,ub(),!1).addLabel("telephone","en").addComment("This object property has been mapped","en"),new vb(Mb("hasURL"),Pb,ub(),!1).addLabel("has url","en").addComment("To specify a uniform resource locator associated with the object","en"),new vb(Mb("url"),Pb,ub(),!1).addLabel("url","en").addComment("This object property has been mapped","en");var Ob=Pb.namedNode;function Fb(e){return Ob("http://www.w3.org/2006/vcard/ns#"+e)}new vb(Fb("hasAddress"),Pb,ub(),!1).addLabel("Address","en").addLabel("Direcci\xf3n","es").addComment("To specify the components of the delivery address for the object","en"),new vb(Fb("hasEmail"),Pb,ub(),!1).addLabel("EMail","en").addLabel("Correo electr\xf3nico","es").addComment("To specify the electronic mail address for communication with the object","en"),new vb(Fb("hasTelephone"),Pb,ub(),!1).addLabel("Telephone","en").addLabel("Tel\xe9fono","es").addComment("To specify the telephone number for telephony communication with the object","en"),new vb(Fb("fn"),Pb,ub(),!1).addLabel("Name","en").addLabel("Nombre","es").addComment("The formatted text corresponding to the name of the object","en"),new vb(Fb("role"),Pb,ub(),!1).addLabel("Role","en").addLabel("Rol","es").addComment("To specify the function or part played in a particular situation by the object","en"),new vb(Fb("organization-name"),Pb,ub(),!1).addLabel("Company","en").addLabel("Compa\xf1\xeda","es").addComment("To specify the organizational name associated with the object","en"),new vb(Fb("street-address"),Pb,ub(),!1).addLabel("Direcci\xf3n","es").addLabel("Street Address","en").addComment("The street address associated with the address of the object","en"),new vb(Fb("locality"),Pb,ub(),!1).addLabel("Locality","en").addLabel("Localidad","es").addComment("The locality (e.g. city or town) associated with the address of the object","en"),new vb(Fb("postal-code"),Pb,ub(),!1).addLabel("Postal Code","en").addLabel("C\xf3digo Postal","es").addComment("The postal code associated with the address of the object","en"),new vb(Fb("region"),Pb,ub(),!1).addLabel("Region","en").addLabel("Regi\xf3n","es").addComment("The region (e.g. state or province) associated with the address of the object","en"),new vb(Fb("country-name"),Pb,ub(),!1).addLabel("Country","en").addLabel("Pais","es").addComment("The country name associated with the address of the object","en");var Db=Pb.namedNode;function Nb(e){return Db("http://www.w3.org/1999/02/22-rdf-syntax-ns#"+e)}new vb(Nb("HTML"),Pb,ub(),!1).addLabelNoLanguage("HTML").addCommentNoLanguage("The datatype of RDF literals storing fragments of HTML content"),new vb(Nb("langString"),Pb,ub(),!1).addLabelNoLanguage("langString").addCommentNoLanguage("The datatype of language-tagged string values"),new vb(Nb("PlainLiteral"),Pb,ub(),!1).addLabelNoLanguage("PlainLiteral").addCommentNoLanguage("The class of plain (i.e. untyped) literal values, as used in RIF and OWL 2"),new vb(Nb("Property"),Pb,ub(),!1).addLabelNoLanguage("Property").addCommentNoLanguage("The class of RDF properties."),new vb(Nb("Statement"),Pb,ub(),!1).addLabelNoLanguage("Statement").addCommentNoLanguage("The class of RDF statements."),new vb(Nb("Bag"),Pb,ub(),!1).addLabelNoLanguage("Bag").addCommentNoLanguage("The class of unordered containers."),new vb(Nb("Seq"),Pb,ub(),!1).addLabelNoLanguage("Seq").addCommentNoLanguage("The class of ordered containers."),new vb(Nb("Alt"),Pb,ub(),!1).addLabelNoLanguage("Alt").addCommentNoLanguage("The class of containers of alternatives."),new vb(Nb("List"),Pb,ub(),!1).addLabelNoLanguage("List").addCommentNoLanguage("The class of RDF Lists."),new vb(Nb("XMLLiteral"),Pb,ub(),!1).addLabelNoLanguage("XMLLiteral").addCommentNoLanguage("The datatype of XML literal values."),new vb(Nb("JSON"),Pb,ub(),!1).addLabelNoLanguage("JSON").addCommentNoLanguage("The datatype of RDF literals storing JSON content."),new vb(Nb("CompoundLiteral"),Pb,ub(),!1).addLabelNoLanguage("CompoundLiteral").addCommentNoLanguage("A class representing a compound literal."),new vb(Nb("type"),Pb,ub(),!1).addLabelNoLanguage("type").addCommentNoLanguage("The subject is an instance of a class."),new vb(Nb("subject"),Pb,ub(),!1).addLabelNoLanguage("subject").addCommentNoLanguage("The subject of the subject RDF statement."),new vb(Nb("predicate"),Pb,ub(),!1).addLabelNoLanguage("predicate").addCommentNoLanguage("The predicate of the subject RDF statement."),new vb(Nb("object"),Pb,ub(),!1).addLabelNoLanguage("object").addCommentNoLanguage("The object of the subject RDF statement."),new vb(Nb("value"),Pb,ub(),!1).addLabelNoLanguage("value").addCommentNoLanguage("Idiomatic property used for structured values."),new vb(Nb("first"),Pb,ub(),!1).addLabelNoLanguage("first").addCommentNoLanguage("The first item in the subject RDF list."),new vb(Nb("rest"),Pb,ub(),!1).addLabelNoLanguage("rest").addCommentNoLanguage("The rest of the subject RDF list after the first item."),new vb(Nb("language"),Pb,ub(),!1).addLabelNoLanguage("language").addCommentNoLanguage("The language component of a CompoundLiteral."),new vb(Nb("direction"),Pb,ub(),!1).addLabelNoLanguage("direction").addCommentNoLanguage("The base direction component of a CompoundLiteral.");var jb=Pb.namedNode;function Bb(e){return jb("http://www.w3.org/1999/02/22-rdf-syntax-ns#"+e)}new vb(Bb("type"),Pb,ub(),!1).addLabel("Tipo","es").addLabelNoLanguage("type").addCommentNoLanguage("The subject is an instance of a class.");var Ub=Pb.namedNode;function zb(e){return Ub("http://www.w3.org/2000/01/rdf-schema#"+e)}new vb(zb("Resource"),Pb,ub(),!1).addLabelNoLanguage("Resource").addCommentNoLanguage("The class resource, everything."),new vb(zb("Class"),Pb,ub(),!1).addLabelNoLanguage("Class").addCommentNoLanguage("The class of classes."),new vb(zb("Literal"),Pb,ub(),!1).addLabelNoLanguage("Literal").addCommentNoLanguage("The class of literal values, eg. textual strings and integers."),new vb(zb("Container"),Pb,ub(),!1).addLabelNoLanguage("Container").addCommentNoLanguage("The class of RDF containers."),new vb(zb("ContainerMembershipProperty"),Pb,ub(),!1).addLabelNoLanguage("ContainerMembershipProperty").addCommentNoLanguage("The class of container membership properties, rdf:_1, rdf:_2, ...,\n                    all of which are sub-properties of 'member'."),new vb(zb("Datatype"),Pb,ub(),!1).addLabelNoLanguage("Datatype").addCommentNoLanguage("The class of RDF datatypes."),new vb(zb("isDefinedBy"),Pb,ub(),!1).addLabelNoLanguage("isDefinedBy").addCommentNoLanguage("The defininition of the subject resource."),new vb(zb("label"),Pb,ub(),!1).addLabelNoLanguage("label").addCommentNoLanguage("A human-readable name for the subject."),new vb(zb("comment"),Pb,ub(),!1).addLabelNoLanguage("comment").addCommentNoLanguage("A description of the subject resource."),new vb(zb("subClassOf"),Pb,ub(),!1).addLabelNoLanguage("subClassOf").addCommentNoLanguage("The subject is a subclass of a class."),new vb(zb("range"),Pb,ub(),!1).addLabelNoLanguage("range").addCommentNoLanguage("A range of the subject property."),new vb(zb("domain"),Pb,ub(),!1).addLabelNoLanguage("domain").addCommentNoLanguage("A domain of the subject property."),new vb(zb("subPropertyOf"),Pb,ub(),!1).addLabelNoLanguage("subPropertyOf").addCommentNoLanguage("The subject is a subproperty of a property."),new vb(zb("seeAlso"),Pb,ub(),!1).addLabelNoLanguage("seeAlso").addCommentNoLanguage("Further information about the subject resource."),new vb(zb("member"),Pb,ub(),!1).addLabelNoLanguage("member").addCommentNoLanguage("A member of the subject resource.");var Vb=Pb.namedNode;function Zb(e){return Vb("http://www.w3.org/2001/XMLSchema#"+e)}new vb(Zb("changes"),Pb,ub(),!1).addLabel("Changes","en").addComment(".","en"),new vb(Zb("string"),Pb,ub(),!1).addLabel("String","en").addComment(".","en"),new vb(Zb("boolean"),Pb,ub(),!1).addLabel("Boolean","en").addComment(".","en"),new vb(Zb("float"),Pb,ub(),!1).addLabel("Float","en").addComment(".","en"),new vb(Zb("double"),Pb,ub(),!1).addLabel("Double","en").addComment(".","en"),new vb(Zb("decimal"),Pb,ub(),!1).addLabel("Decimal","en").addComment(".","en"),new vb(Zb("dateTime"),Pb,ub(),!1).addLabel("Date and time","en").addComment(".","en"),new vb(Zb("duration"),Pb,ub(),!1).addLabel("Duration","en").addComment(".","en"),new vb(Zb("hexBinary"),Pb,ub(),!1).addLabel("Hexadecimal binary","en").addComment(".","en"),new vb(Zb("base64Binary"),Pb,ub(),!1).addLabel("Base64 binary","en").addComment(".","en"),new vb(Zb("anyURI"),Pb,ub(),!1).addLabel("URI","en").addComment(".","en"),new vb(Zb("ID"),Pb,ub(),!1).addLabel("ID","en").addComment(".","en"),new vb(Zb("IDREF"),Pb,ub(),!1).addLabel("ID reference","en").addComment(".","en"),new vb(Zb("ENTITY"),Pb,ub(),!1).addLabel("ENTITY","en").addComment(".","en"),new vb(Zb("NOTATION"),Pb,ub(),!1).addLabel("NOTATION","en").addComment(".","en"),new vb(Zb("normalizedString"),Pb,ub(),!1).addLabel("Normalized string","en").addComment(".","en"),new vb(Zb("token"),Pb,ub(),!1).addLabel("Token","en").addComment(".","en"),new vb(Zb("language"),Pb,ub(),!1).addLabel("Language","en").addComment(".","en"),new vb(Zb("IDREFS"),Pb,ub(),!1).addLabel("IDREFS","en").addComment(".","en"),new vb(Zb("ENTITIES"),Pb,ub(),!1).addLabel("ENTITIES","en").addComment(".","en"),new vb(Zb("NMTOKEN"),Pb,ub(),!1).addLabel("NMTOKEN","en").addComment(".","en"),new vb(Zb("NMTOKENS"),Pb,ub(),!1).addLabel("NMTOKENS","en").addComment(".","en"),new vb(Zb("Name"),Pb,ub(),!1).addLabel("Name","en").addComment(".","en"),new vb(Zb("QName"),Pb,ub(),!1).addLabel("QName","en").addComment(".","en"),new vb(Zb("NCName"),Pb,ub(),!1).addLabel("NCName","en").addComment(".","en"),new vb(Zb("integer"),Pb,ub(),!1).addLabel("Integer","en").addComment(".","en"),new vb(Zb("nonNegativeInteger"),Pb,ub(),!1).addLabel("Non-negative integer","en").addComment(".","en"),new vb(Zb("positiveInteger"),Pb,ub(),!1).addLabel("Positive integer","en").addComment(".","en"),new vb(Zb("nonPositiveInteger"),Pb,ub(),!1).addLabel("Non-positive integer","en").addComment(".","en"),new vb(Zb("negativeInteger"),Pb,ub(),!1).addLabel("Negative integer","en").addComment(".","en"),new vb(Zb("byte"),Pb,ub(),!1).addLabel("Byte","en").addComment(".","en"),new vb(Zb("int"),Pb,ub(),!1).addLabel("Int","en").addComment(".","en"),new vb(Zb("long"),Pb,ub(),!1).addLabel("Long","en").addComment(".","en"),new vb(Zb("short"),Pb,ub(),!1).addLabel("Short","en").addComment(".","en"),new vb(Zb("unsignedByte"),Pb,ub(),!1).addLabel("Unsigned byte","en").addComment(".","en"),new vb(Zb("unsignedInt"),Pb,ub(),!1).addLabel("Unsigned int","en").addComment(".","en"),new vb(Zb("unsignedLong"),Pb,ub(),!1).addLabel("Unsigned long","en").addComment(".","en"),new vb(Zb("unsignedShort"),Pb,ub(),!1).addLabel("Unsigned short","en").addComment(".","en"),new vb(Zb("date"),Pb,ub(),!1).addLabel("Date","en").addComment(".","en"),new vb(Zb("time"),Pb,ub(),!1).addLabel("Time","en").addComment(".","en"),new vb(Zb("gYearMonth"),Pb,ub(),!1).addLabel("Year month","en").addComment(".","en"),new vb(Zb("gYear"),Pb,ub(),!1).addLabel("Year","en").addComment(".","en"),new vb(Zb("gMonthDay"),Pb,ub(),!1).addLabel("Month day","en").addComment(".","en"),new vb(Zb("gDay"),Pb,ub(),!1).addLabel("Day","en").addComment(".","en"),new vb(Zb("gMonth"),Pb,ub(),!1).addLabel("Month","en").addComment(".","en");var Hb=Pb.namedNode;function Wb(e){return Hb("http://www.w3.org/2002/07/owl#"+e)}new vb(Wb("Ontology"),Pb,ub(),!1).addLabelNoLanguage("Ontology").addCommentNoLanguage("The class of ontologies."),new vb(Wb("AllDifferent"),Pb,ub(),!1).addLabelNoLanguage("AllDifferent").addCommentNoLanguage("The class of collections of pairwise different individuals."),new vb(Wb("AllDisjointClasses"),Pb,ub(),!1).addLabelNoLanguage("AllDisjointClasses").addCommentNoLanguage("The class of collections of pairwise disjoint classes."),new vb(Wb("AllDisjointProperties"),Pb,ub(),!1).addLabelNoLanguage("AllDisjointProperties").addCommentNoLanguage("The class of collections of pairwise disjoint properties."),new vb(Wb("Annotation"),Pb,ub(),!1).addLabelNoLanguage("Annotation").addCommentNoLanguage("The class of annotated annotations for which the RDF serialization consists of an annotated subject, predicate and object."),new vb(Wb("AnnotationProperty"),Pb,ub(),!1).addLabelNoLanguage("AnnotationProperty").addCommentNoLanguage("The class of annotation properties."),new vb(Wb("AsymmetricProperty"),Pb,ub(),!1).addLabelNoLanguage("AsymmetricProperty").addCommentNoLanguage("The class of asymmetric properties."),new vb(Wb("ObjectProperty"),Pb,ub(),!1).addLabelNoLanguage("ObjectProperty").addCommentNoLanguage("The class of object properties."),new vb(Wb("Axiom"),Pb,ub(),!1).addLabelNoLanguage("Axiom").addCommentNoLanguage("The class of annotated axioms for which the RDF serialization consists of an annotated subject, predicate and object."),new vb(Wb("Class"),Pb,ub(),!1).addLabelNoLanguage("Class").addCommentNoLanguage("The class of OWL classes."),new vb(Wb("DataRange"),Pb,ub(),!1).addLabelNoLanguage("DataRange").addCommentNoLanguage("The class of OWL data ranges, which are special kinds of datatypes. Note: The use of the IRI owl:DataRange has been deprecated as of OWL 2. The IRI rdfs:Datatype SHOULD be used instead."),new vb(Wb("DatatypeProperty"),Pb,ub(),!1).addLabelNoLanguage("DatatypeProperty").addCommentNoLanguage("The class of data properties."),new vb(Wb("DeprecatedClass"),Pb,ub(),!1).addLabelNoLanguage("DeprecatedClass").addCommentNoLanguage("The class of deprecated classes."),new vb(Wb("DeprecatedProperty"),Pb,ub(),!1).addLabelNoLanguage("DeprecatedProperty").addCommentNoLanguage("The class of deprecated properties."),new vb(Wb("FunctionalProperty"),Pb,ub(),!1).addLabelNoLanguage("FunctionalProperty").addCommentNoLanguage("The class of functional properties."),new vb(Wb("InverseFunctionalProperty"),Pb,ub(),!1).addLabelNoLanguage("InverseFunctionalProperty").addCommentNoLanguage("The class of inverse-functional properties."),new vb(Wb("IrreflexiveProperty"),Pb,ub(),!1).addLabelNoLanguage("IrreflexiveProperty").addCommentNoLanguage("The class of irreflexive properties."),new vb(Wb("NamedIndividual"),Pb,ub(),!1).addLabelNoLanguage("NamedIndividual").addCommentNoLanguage("The class of named individuals."),new vb(Wb("Thing"),Pb,ub(),!1).addLabelNoLanguage("Thing").addCommentNoLanguage("The class of OWL individuals."),new vb(Wb("NegativePropertyAssertion"),Pb,ub(),!1).addLabelNoLanguage("NegativePropertyAssertion").addCommentNoLanguage("The class of negative property assertions."),new vb(Wb("Nothing"),Pb,ub(),!1).addLabelNoLanguage("Nothing").addCommentNoLanguage("This is the empty class."),new vb(Wb("OntologyProperty"),Pb,ub(),!1).addLabelNoLanguage("OntologyProperty").addCommentNoLanguage("The class of ontology properties."),new vb(Wb("ReflexiveProperty"),Pb,ub(),!1).addLabelNoLanguage("ReflexiveProperty").addCommentNoLanguage("The class of reflexive properties."),new vb(Wb("Restriction"),Pb,ub(),!1).addLabelNoLanguage("Restriction").addCommentNoLanguage("The class of property restrictions."),new vb(Wb("SymmetricProperty"),Pb,ub(),!1).addLabelNoLanguage("SymmetricProperty").addCommentNoLanguage("The class of symmetric properties."),new vb(Wb("TransitiveProperty"),Pb,ub(),!1).addLabelNoLanguage("TransitiveProperty").addCommentNoLanguage("The class of transitive properties."),new vb(Wb("versionInfo"),Pb,ub(),!1).addLabelNoLanguage("versionInfo").addCommentNoLanguage("The annotation property that provides version information for an ontology or another OWL construct."),new vb(Wb("allValuesFrom"),Pb,ub(),!1).addLabelNoLanguage("allValuesFrom").addCommentNoLanguage("The property that determines the class that a universal property restriction refers to."),new vb(Wb("annotatedProperty"),Pb,ub(),!1).addLabelNoLanguage("annotatedProperty").addCommentNoLanguage("The property that determines the predicate of an annotated axiom or annotated annotation."),new vb(Wb("annotatedSource"),Pb,ub(),!1).addLabelNoLanguage("annotatedSource").addCommentNoLanguage("The property that determines the subject of an annotated axiom or annotated annotation."),new vb(Wb("annotatedTarget"),Pb,ub(),!1).addLabelNoLanguage("annotatedTarget").addCommentNoLanguage("The property that determines the object of an annotated axiom or annotated annotation."),new vb(Wb("assertionProperty"),Pb,ub(),!1).addLabelNoLanguage("assertionProperty").addCommentNoLanguage("The property that determines the predicate of a negative property assertion."),new vb(Wb("backwardCompatibleWith"),Pb,ub(),!1).addLabelNoLanguage("backwardCompatibleWith").addCommentNoLanguage("The annotation property that indicates that a given ontology is backward compatible with another ontology."),new vb(Wb("bottomDataProperty"),Pb,ub(),!1).addLabelNoLanguage("bottomDataProperty").addCommentNoLanguage("The data property that does not relate any individual to any data value."),new vb(Wb("bottomObjectProperty"),Pb,ub(),!1).addLabelNoLanguage("bottomObjectProperty").addCommentNoLanguage("The object property that does not relate any two individuals."),new vb(Wb("cardinality"),Pb,ub(),!1).addLabelNoLanguage("cardinality").addCommentNoLanguage("The property that determines the cardinality of an exact cardinality restriction."),new vb(Wb("complementOf"),Pb,ub(),!1).addLabelNoLanguage("complementOf").addCommentNoLanguage("The property that determines that a given class is the complement of another class."),new vb(Wb("datatypeComplementOf"),Pb,ub(),!1).addLabelNoLanguage("datatypeComplementOf").addCommentNoLanguage("The property that determines that a given data range is the complement of another data range with respect to the data domain."),new vb(Wb("deprecated"),Pb,ub(),!1).addLabelNoLanguage("deprecated").addCommentNoLanguage("The annotation property that indicates that a given entity has been deprecated."),new vb(Wb("differentFrom"),Pb,ub(),!1).addLabelNoLanguage("differentFrom").addCommentNoLanguage("The property that determines that two given individuals are different."),new vb(Wb("disjointUnionOf"),Pb,ub(),!1).addLabelNoLanguage("disjointUnionOf").addCommentNoLanguage("The property that determines that a given class is equivalent to the disjoint union of a collection of other classes."),new vb(Wb("disjointWith"),Pb,ub(),!1).addLabelNoLanguage("disjointWith").addCommentNoLanguage("The property that determines that two given classes are disjoint."),new vb(Wb("distinctMembers"),Pb,ub(),!1).addLabelNoLanguage("distinctMembers").addCommentNoLanguage("The property that determines the collection of pairwise different individuals in a owl:AllDifferent axiom."),new vb(Wb("equivalentClass"),Pb,ub(),!1).addLabelNoLanguage("equivalentClass").addCommentNoLanguage("The property that determines that two given classes are equivalent, and that is used to specify datatype definitions."),new vb(Wb("equivalentProperty"),Pb,ub(),!1).addLabelNoLanguage("equivalentProperty").addCommentNoLanguage("The property that determines that two given properties are equivalent."),new vb(Wb("hasKey"),Pb,ub(),!1).addLabelNoLanguage("hasKey").addCommentNoLanguage("The property that determines the collection of properties that jointly build a key."),new vb(Wb("hasSelf"),Pb,ub(),!1).addLabelNoLanguage("hasSelf").addCommentNoLanguage("The property that determines the property that a self restriction refers to."),new vb(Wb("hasValue"),Pb,ub(),!1).addLabelNoLanguage("hasValue").addCommentNoLanguage("The property that determines the individual that a has-value restriction refers to."),new vb(Wb("incompatibleWith"),Pb,ub(),!1).addLabelNoLanguage("incompatibleWith").addCommentNoLanguage("The annotation property that indicates that a given ontology is incompatible with another ontology."),new vb(Wb("intersectionOf"),Pb,ub(),!1).addLabelNoLanguage("intersectionOf").addCommentNoLanguage("The property that determines the collection of classes or data ranges that build an intersection."),new vb(Wb("inverseOf"),Pb,ub(),!1).addLabelNoLanguage("inverseOf").addCommentNoLanguage("The property that determines that two given properties are inverse."),new vb(Wb("maxCardinality"),Pb,ub(),!1).addLabelNoLanguage("maxCardinality").addCommentNoLanguage("The property that determines the cardinality of a maximum cardinality restriction."),new vb(Wb("maxQualifiedCardinality"),Pb,ub(),!1).addLabelNoLanguage("maxQualifiedCardinality").addCommentNoLanguage("The property that determines the cardinality of a maximum qualified cardinality restriction."),new vb(Wb("members"),Pb,ub(),!1).addLabelNoLanguage("members").addCommentNoLanguage("The property that determines the collection of members in either a owl:AllDifferent, owl:AllDisjointClasses or owl:AllDisjointProperties axiom."),new vb(Wb("minCardinality"),Pb,ub(),!1).addLabelNoLanguage("minCardinality").addCommentNoLanguage("The property that determines the cardinality of a minimum cardinality restriction."),new vb(Wb("minQualifiedCardinality"),Pb,ub(),!1).addLabelNoLanguage("minQualifiedCardinality").addCommentNoLanguage("The property that determines the cardinality of a minimum qualified cardinality restriction."),new vb(Wb("onClass"),Pb,ub(),!1).addLabelNoLanguage("onClass").addCommentNoLanguage("The property that determines the class that a qualified object cardinality restriction refers to."),new vb(Wb("onDataRange"),Pb,ub(),!1).addLabelNoLanguage("onDataRange").addCommentNoLanguage("The property that determines the data range that a qualified data cardinality restriction refers to."),new vb(Wb("onDatatype"),Pb,ub(),!1).addLabelNoLanguage("onDatatype").addCommentNoLanguage("The property that determines the datatype that a datatype restriction refers to."),new vb(Wb("oneOf"),Pb,ub(),!1).addLabelNoLanguage("oneOf").addCommentNoLanguage("The property that determines the collection of individuals or data values that build an enumeration."),new vb(Wb("onProperties"),Pb,ub(),!1).addLabelNoLanguage("onProperties").addCommentNoLanguage("The property that determines the n-tuple of properties that a property restriction on an n-ary data range refers to."),new vb(Wb("onProperty"),Pb,ub(),!1).addLabelNoLanguage("onProperty").addCommentNoLanguage("The property that determines the property that a property restriction refers to."),new vb(Wb("priorVersion"),Pb,ub(),!1).addLabelNoLanguage("priorVersion").addCommentNoLanguage("The annotation property that indicates the predecessor ontology of a given ontology."),new vb(Wb("propertyChainAxiom"),Pb,ub(),!1).addLabelNoLanguage("propertyChainAxiom").addCommentNoLanguage("The property that determines the n-tuple of properties that build a sub property chain of a given property."),new vb(Wb("propertyDisjointWith"),Pb,ub(),!1).addLabelNoLanguage("propertyDisjointWith").addCommentNoLanguage("The property that determines that two given properties are disjoint."),new vb(Wb("qualifiedCardinality"),Pb,ub(),!1).addLabelNoLanguage("qualifiedCardinality").addCommentNoLanguage("The property that determines the cardinality of an exact qualified cardinality restriction."),new vb(Wb("sameAs"),Pb,ub(),!1).addLabelNoLanguage("sameAs").addCommentNoLanguage("The property that determines that two given individuals are equal."),new vb(Wb("someValuesFrom"),Pb,ub(),!1).addLabelNoLanguage("someValuesFrom").addCommentNoLanguage("The property that determines the class that an existential property restriction refers to."),new vb(Wb("sourceIndividual"),Pb,ub(),!1).addLabelNoLanguage("sourceIndividual").addCommentNoLanguage("The property that determines the subject of a negative property assertion."),new vb(Wb("targetIndividual"),Pb,ub(),!1).addLabelNoLanguage("targetIndividual").addCommentNoLanguage("The property that determines the object of a negative object property assertion."),new vb(Wb("targetValue"),Pb,ub(),!1).addLabelNoLanguage("targetValue").addCommentNoLanguage("The property that determines the value of a negative data property assertion."),new vb(Wb("topDataProperty"),Pb,ub(),!1).addLabelNoLanguage("topDataProperty").addCommentNoLanguage("The data property that relates every individual to every data value."),new vb(Wb("topObjectProperty"),Pb,ub(),!1).addLabelNoLanguage("topObjectProperty").addCommentNoLanguage("The object property that relates every two individuals."),new vb(Wb("unionOf"),Pb,ub(),!1).addLabelNoLanguage("unionOf").addCommentNoLanguage("The property that determines the collection of classes or data ranges that build a union."),new vb(Wb("withRestrictions"),Pb,ub(),!1).addLabelNoLanguage("withRestrictions").addCommentNoLanguage("The property that determines the collection of facet-value pairs that define a datatype restriction.");var Gb=Pb.namedNode;function qb(e){return Gb("http://www.w3.org/ns/ldp#"+e)}new vb(qb("Resource"),Pb,ub(),!1).addLabelNoLanguage("Resource").addCommentNoLanguage("A HTTP-addressable resource whose lifecycle is managed by a LDP server."),new vb(qb("RDFSource"),Pb,ub(),!1).addLabelNoLanguage("RDFSource").addCommentNoLanguage("A Linked Data Platform Resource (LDPR) whose state is represented as RDF."),new vb(qb("NonRDFSource"),Pb,ub(),!1).addLabelNoLanguage("NonRDFSource").addCommentNoLanguage("A Linked Data Platform Resource (LDPR) whose state is NOT represented as RDF."),new vb(qb("Container"),Pb,ub(),!1).addLabelNoLanguage("Container").addCommentNoLanguage("A Linked Data Platform RDF Source (LDP-RS) that also conforms to additional patterns and conventions for managing membership. Readers should refer to the specification defining this ontology for the list of behaviors associated with it."),new vb(qb("BasicContainer"),Pb,ub(),!1).addLabelNoLanguage("BasicContainer").addCommentNoLanguage("An LDPC that uses a predefined predicate to simply link to its contained resources."),new vb(qb("DirectContainer"),Pb,ub(),!1).addLabelNoLanguage("DirectContainer").addCommentNoLanguage("An LDPC that is similar to a LDP-DC but it allows an indirection with the ability to list as member a resource, such as a URI representing a real-world object, that is different from the resource that is created."),new vb(qb("IndirectContainer"),Pb,ub(),!1).addLabelNoLanguage("IndirectContainer").addCommentNoLanguage("An LDPC that has the flexibility of choosing what form the membership triples take."),new vb(qb("Page"),Pb,ub(),!1).addLabelNoLanguage("Page").addCommentNoLanguage("URI signifying that the resource is an in-sequence page resource, as defined by LDP Paging.  Typically used on Link rel='type' response headers."),new vb(qb("PageSortCriterion"),Pb,ub(),!1).addLabelNoLanguage("PageSortCriterion").addCommentNoLanguage("Element in the list of sorting criteria used by the server to assign container members to pages."),new vb(qb("hasMemberRelation"),Pb,ub(),!1).addLabelNoLanguage("hasMemberRelation").addCommentNoLanguage("Indicates which predicate is used in membership triples, and that the membership triple pattern is < membership-constant-URI , object-of-hasMemberRelation, member-URI >."),new vb(qb("isMemberOfRelation"),Pb,ub(),!1).addLabelNoLanguage("isMemmberOfRelation").addCommentNoLanguage("Indicates which predicate is used in membership triples, and that the membership triple pattern is < member-URI , object-of-isMemberOfRelation, membership-constant-URI >."),new vb(qb("membershipResource"),Pb,ub(),!1).addLabelNoLanguage("membershipResource").addCommentNoLanguage("Indicates the membership-constant-URI in a membership triple.  Depending upon the membership triple pattern a container uses, as indicated by the presence of ldp:hasMemberRelation or ldp:isMemberOfRelation, the membership-constant-URI might occupy either the subject or object position in membership triples."),new vb(qb("insertedContentRelation"),Pb,ub(),!1).addLabelNoLanguage("insertedContentRelation").addCommentNoLanguage("Indicates which triple in a creation request should be used as the member-URI value in the membership triple added when the creation request is successful."),new vb(qb("member"),Pb,ub(),!1).addLabelNoLanguage("member").addCommentNoLanguage("LDP servers should use this predicate as the membership predicate if there is no obvious predicate from an application vocabulary to use."),new vb(qb("contains"),Pb,ub(),!1).addLabelNoLanguage("contains").addCommentNoLanguage("Links a container with resources created through the container."),new vb(qb("constrainedBy"),Pb,ub(),!1).addLabelNoLanguage("constrainedBy").addCommentNoLanguage("Links a resource with constraints that the server requires requests like creation and update to conform to."),new vb(qb("pageSortCriteria"),Pb,ub(),!1).addLabelNoLanguage("pageSortCriteria").addCommentNoLanguage("Link to the list of sorting criteria used by the server in a representation.  Typically used on Link response headers as an extension link relation URI in the rel= parameter."),new vb(qb("pageSortPredicate"),Pb,ub(),!1).addLabelNoLanguage("pageSortPredicate").addCommentNoLanguage("Predicate used to specify the order of the members across a page sequence's in-sequence page resources; it asserts nothing about the order of members in the representation of a single page."),new vb(qb("pageSortOrder"),Pb,ub(),!1).addLabelNoLanguage("pageSortOrder").addCommentNoLanguage("The ascending/descending/etc order used to order the members across pages in a page sequence."),new vb(qb("pageSortCollation"),Pb,ub(),!1).addLabelNoLanguage("pageSortCollation").addCommentNoLanguage("The collation used to order the members across pages in a page sequence when comparing strings."),new vb(qb("pageSequence"),Pb,ub(),!1).addLabelNoLanguage("Page").addCommentNoLanguage("Link to a page sequence resource, as defined by LDP Paging.  Typically used to communicate the sorting criteria used to allocate LDPC members to pages."),new vb(qb("inbox"),Pb,ub(),!1).addLabelNoLanguage("inbox").addCommentNoLanguage("Links a resource to a container where notifications for the resource can be created and discovered.");var Kb=Pb.namedNode;function Jb(e){return Kb("http://www.w3.org/2011/http#"+e)}new vb(Jb("Connection"),Pb,ub(),!1).addLabel("Connection","en").addComment("A connection used for HTTP transfer.","en"),new vb(Jb("EntityHeader"),Pb,ub(),!1).addLabel("Entity Header","en").addComment("An entity header in an HTTP message.","en"),new vb(Jb("MessageHeader"),Pb,ub(),!1).addLabel("Message Header","en").addComment("A header in an HTTP message.","en"),new vb(Jb("GeneralHeader"),Pb,ub(),!1).addLabel("General Header","en").addComment("A general header in an HTTP message.","en"),new vb(Jb("HeaderElement"),Pb,ub(),!1).addLabel("Header Element","en").addComment("A part of a deconstructed header value.","en"),new vb(Jb("HeaderName"),Pb,ub(),!1).addLabel("Header Name","en").addComment("A header name.","en"),new vb(Jb("Message"),Pb,ub(),!1).addLabel("Message","en").addComment("An HTTP message.","en"),new vb(Jb("Method"),Pb,ub(),!1).addLabel("Method","en").addComment("The HTTP method used for the request.","en"),new vb(Jb("Parameter"),Pb,ub(),!1).addLabel("Parameter","en").addComment("A parameter for a part of a header value.","en"),new vb(Jb("Request"),Pb,ub(),!1).addLabel("Request","en").addComment("An HTTP request.","en"),new vb(Jb("RequestHeader"),Pb,ub(),!1).addLabel("Request Header","en").addComment("A header in an HTTP request message.","en"),new vb(Jb("Response"),Pb,ub(),!1).addLabel("Response","en").addComment("An HTTP response.","en"),new vb(Jb("ResponseHeader"),Pb,ub(),!1).addLabel("Response Header","en").addComment("A header in an HTTP response message.","en"),new vb(Jb("StatusCode"),Pb,ub(),!1).addLabel("Status code","en").addComment("The status code of an HTTP response.","en"),new vb(Jb("absoluteURI"),Pb,ub(),!1).addLabel("Absolute URI","en").addComment("The absolute request URI.","en"),new vb(Jb("requestURI"),Pb,ub(),!1).addLabel("Request URI","en").addComment("The request URI of an HTTP request.","en"),new vb(Jb("absolutePath"),Pb,ub(),!1).addLabel("Absolute path","en").addComment("The absolute path sort of request URI.","en"),new vb(Jb("authority"),Pb,ub(),!1).addLabel("Authority","en").addComment("The authority sort of request URI.","en"),new vb(Jb("body"),Pb,ub(),!1).addLabel("Entity Body","en").addComment("The entity body of an HTTP message.","en"),new vb(Jb("connectionAuthority"),Pb,ub(),!1).addLabel("Connection authority","en").addComment("The authority of a connection used for the HTTP transfer.","en"),new vb(Jb("elementName"),Pb,ub(),!1).addLabel("Header element name","en").addComment("The name of a header element.","en"),new vb(Jb("elementValue"),Pb,ub(),!1).addLabel("Header element value","en").addComment("The value of a header element.","en"),new vb(Jb("fieldName"),Pb,ub(),!1).addLabel("Field name","en").addComment("The name of an HTTP header field.","en"),new vb(Jb("fieldValue"),Pb,ub(),!1).addLabel("Field value","en").addComment("The value of an HTTP header field.","en"),new vb(Jb("headerElements"),Pb,ub(),!1).addLabel("Header elements","en").addComment("The deconstructed parts of an HTTP header value.","en"),new vb(Jb("hdrName"),Pb,ub(),!1).addLabel("Header name","en").addComment("The name of an HTTP header.","en"),new vb(Jb("headers"),Pb,ub(),!1).addLabel("Headers","en").addComment("The headers in an HTTP message.","en"),new vb(Jb("httpVersion"),Pb,ub(),!1).addLabel("HTTP version","en").addComment("The HTTP version of an HTTP message.","en"),new vb(Jb("mthd"),Pb,ub(),!1).addLabel("Method","en").addComment("The HTTP method used for the HTTP request.","en"),new vb(Jb("methodName"),Pb,ub(),!1).addLabel("Method name","en").addComment("The HTTP method name used for the HTTP request.","en"),new vb(Jb("paramName"),Pb,ub(),!1).addLabel("Parameter name","en").addComment("The name of a parameter in a part of a deconstructed HTTP header value.","en"),new vb(Jb("params"),Pb,ub(),!1).addLabel("Header parameters","en").addComment("The parameters in a part of a deconstructed HTTP header value.","en"),new vb(Jb("paramValue"),Pb,ub(),!1).addLabel("Parameter value","en").addComment("The value of a parameter in a part of a deconstructed HTTP header value.","en"),new vb(Jb("reasonPhrase"),Pb,ub(),!1).addLabel("Reason phrase","en").addComment("The reason phrase (status text) of an HTTP response.","en"),new vb(Jb("requests"),Pb,ub(),!1).addLabel("Requests","en").addComment("The HTTP requests made via a connection.","en"),new vb(Jb("resp"),Pb,ub(),!1).addLabel("Response","en").addComment("The HTTP response sent in answer to an HTTP request.","en"),new vb(Jb("sc"),Pb,ub(),!1).addLabel("Status code","en").addComment("The status code of an HTTP response.","en"),new vb(Jb("statusCodeNumber"),Pb,ub(),!1).addLabel("Status code","en").addComment("The status code number.","en"),new vb(Jb("statusCodeValue"),Pb,ub(),!1).addLabel("Status code","en").addComment("The status code value of an HTTP response.","en");var Xb=Pb.namedNode;function Yb(e){return Xb("http://www.w3.org/2007/ont/httph#"+e)}new vb(Yb("content-type"),Pb,ub(),!1).addLabelNoLanguage("content type").addCommentNoLanguage("See the HTTP specification"),new vb(Yb("accept"),Pb,ub(),!1).addLabel("Accept","en").addComment("See the HTTP specification","en"),new vb(Yb("accept-language"),Pb,ub(),!1).addLabel("Accept-Language","en").addComment("See the HTTP specification","en");var Qb=Pb.namedNode;function $b(e){return Qb("http://purl.org/ontology/olo/core#"+e)}new vb($b("OrderedList"),Pb,ub(),!1).addLabel("Ordered List","en").addComment("An ordered list with a given length an indexed items.","en"),new vb($b("Slot"),Pb,ub(),!1).addLabel("Slot","en").addComment("A slot in an ordered list with a fixed index.","en"),new vb($b("length"),Pb,ub(),!1).addLabel("has length","en").addComment("The length of an ordered list.","en"),new vb($b("next"),Pb,ub(),!1).addLabel("has next","en").addComment("Associates the next slot in an ordered list.","en"),new vb($b("index"),Pb,ub(),!1).addLabel("has index","en").addComment("An index of a slot in an ordered list.","en"),new vb($b("ordered_list"),Pb,ub(),!1).addLabel("has ordered list","en").addComment("An ordered list of an slot.","en"),new vb($b("previous"),Pb,ub(),!1).addLabel("has previous","en").addComment("Associates the previous slot in an ordered list","en"),new vb($b("item"),Pb,ub(),!1).addLabel("has item","en").addComment("An item of a slot in an ordered list.","en"),new vb($b("slot"),Pb,ub(),!1).addLabel("has slot","en").addComment("A slot in an ordered list.","en");var ew=Pb.namedNode;function tw(e){return ew("http://www.w3.org/2004/02/skos/core#"+e)}new vb(tw("Concept"),Pb,ub(),!1).addLabel("Concept","en"),new vb(tw("ConceptScheme"),Pb,ub(),!1).addLabel("Concept Scheme","en"),new vb(tw("Collection"),Pb,ub(),!1).addLabel("Collection","en"),new vb(tw("OrderedCollection"),Pb,ub(),!1).addLabel("Ordered Collection","en"),new vb(tw("definition"),Pb,ub(),!1).addLabel("definition","en"),new vb(tw("scopeNote"),Pb,ub(),!1).addLabel("scope note","en"),new vb(tw("example"),Pb,ub(),!1).addLabel("example","en"),new vb(tw("inScheme"),Pb,ub(),!1).addLabel("is in scheme","en"),new vb(tw("hasTopConcept"),Pb,ub(),!1).addLabel("has top concept","en"),new vb(tw("topConceptOf"),Pb,ub(),!1).addLabel("is top concept in scheme","en"),new vb(tw("prefLabel"),Pb,ub(),!1).addLabel("preferred label","en").addComment("A resource has no more than one value of skos:prefLabel per language tag, and no more than one value of skos:prefLabel without language tag.","en"),new vb(tw("altLabel"),Pb,ub(),!1).addLabel("alternative label","en").addComment("The range of skos:altLabel is the class of RDF plain literals.","en"),new vb(tw("hiddenLabel"),Pb,ub(),!1).addLabel("hidden label","en").addComment("skos:prefLabel, skos:altLabel and skos:hiddenLabel are pairwise disjoint properties.","en"),new vb(tw("notation"),Pb,ub(),!1).addLabel("notation","en"),new vb(tw("note"),Pb,ub(),!1).addLabel("note","en"),new vb(tw("changeNote"),Pb,ub(),!1).addLabel("change note","en"),new vb(tw("editorialNote"),Pb,ub(),!1).addLabel("editorial note","en"),new vb(tw("historyNote"),Pb,ub(),!1).addLabel("history note","en"),new vb(tw("semanticRelation"),Pb,ub(),!1).addLabel("is in semantic relation with","en"),new vb(tw("broader"),Pb,ub(),!1).addLabel("has broader","en").addComment("Broader concepts are typically rendered as parents in a concept hierarchy (tree).","en"),new vb(tw("broaderTransitive"),Pb,ub(),!1).addLabel("has broader transitive","en"),new vb(tw("narrower"),Pb,ub(),!1).addLabel("has narrower","en").addComment("Narrower concepts are typically rendered as children in a concept hierarchy (tree).","en"),new vb(tw("narrowerTransitive"),Pb,ub(),!1).addLabel("has narrower transitive","en"),new vb(tw("related"),Pb,ub(),!1).addLabel("has related","en").addComment("skos:related is disjoint with skos:broaderTransitive","en"),new vb(tw("member"),Pb,ub(),!1).addLabel("has member","en"),new vb(tw("memberList"),Pb,ub(),!1).addLabel("has member list","en").addComment("For any resource, every item in the list given as the value of the\n      skos:memberList property is also a value of the skos:member property.","en"),new vb(tw("mappingRelation"),Pb,ub(),!1).addLabel("is in mapping relation with","en").addComment("These concept mapping relations mirror semantic relations, and the data model defined below is similar (with the exception of skos:exactMatch) to the data model defined for semantic relations. A distinct vocabulary is provided for concept mapping relations, to provide a convenient way to differentiate links within a concept scheme from links between concept schemes. However, this pattern of usage is not a formal requirement of the SKOS data model, and relies on informal definitions of best practice.","en"),new vb(tw("broadMatch"),Pb,ub(),!1).addLabel("has broader match","en"),new vb(tw("narrowMatch"),Pb,ub(),!1).addLabel("has narrower match","en"),new vb(tw("relatedMatch"),Pb,ub(),!1).addLabel("has related match","en"),new vb(tw("exactMatch"),Pb,ub(),!1).addLabel("has exact match","en").addComment("skos:exactMatch is disjoint with each of the properties skos:broadMatch and skos:relatedMatch.","en"),new vb(tw("closeMatch"),Pb,ub(),!1).addLabel("has close match","en");var nw=Pb.namedNode;function rw(e){return nw("http://www.w3.org/ns/ui#"+e)}new vb(rw("BooleanField"),Pb,ub(),!1),new vb(rw("NumericField"),Pb,ub(),!1),new vb(rw("ValueField"),Pb,ub(),!1),new vb(rw("Group"),Pb,ub(),!1),new vb(rw("Form"),Pb,ub(),!1).addCommentNoLanguage("A form can be any type of single field, or typically a Group of several fields,\n    including interspersed headings and comments.  "),new vb(rw("Single"),Pb,ub(),!1),new vb(rw("Choice"),Pb,ub(),!1),new vb(rw("Classifier"),Pb,ub(),!1).addLabelNoLanguage("classifier").addCommentNoLanguage("A classifier allows the user to select the type of an object.\n    The possible types must be subclasses of some overall class, the \"category\".\n    (Ideally, the superclass is also set up as the disjoint union of the subclasses,\n    if they are disjoint.)\n\n    The form normally stores the resulting classes using an rdf:type triple,\n    but a different predicate can be used if required, so the classifier field\n    needs is 'property' defined too.\n\n    If the subclass selected itself is has subclasses defined, the user can\n    recursively select from them in turn, as many levels as needed."),new vb(rw("ColorField"),Pb,ub(),!1),new vb(rw("Comment"),Pb,ub(),!1),new vb(rw("DateField"),Pb,ub(),!1),new vb(rw("DateTimeField"),Pb,ub(),!1),new vb(rw("DecimalField"),Pb,ub(),!1),new vb(rw("EmailField"),Pb,ub(),!1),new vb(rw("Heading"),Pb,ub(),!1),new vb(rw("SingleLineTextField"),Pb,ub(),!1),new vb(rw("TextField"),Pb,ub(),!1),new vb(rw("Options"),Pb,ub(),!1),new vb(rw("IntegerField"),Pb,ub(),!1),new vb(rw("FloatField"),Pb,ub(),!1),new vb(rw("PhoneField"),Pb,ub(),!1),new vb(rw("Multiple"),Pb,ub(),!1),new vb(rw("MultiLineTextField"),Pb,ub(),!1),new vb(rw("TriStateField"),Pb,ub(),!1),new vb(rw("parts"),Pb,ub(),!1).addLabel("parts","en"),new vb(rw("from"),Pb,ub(),!1).addLabelNoLanguage("from"),new vb(rw("label"),Pb,ub(),!1).addLabel("Label","en").addLabel("Etiqueta","es"),new vb(rw("property"),Pb,ub(),!1).addLabel("property to be stored","en").addCommentNoLanguage("Many fields prompt for information about a given property of the subject.\n    When field is filled in, this gives which property is written into the data."),new vb(rw("for"),Pb,ub(),!1).addLabel("for","en").addCommentNoLanguage("The value for which this case is selected."),new vb(rw("prompt"),Pb,ub(),!1).addLabelNoLanguage("user prompt").addCommentNoLanguage("A string for the UI to use if the user needs a longer\n        prompts than just a field name, the rdfs:label. "),new vb(rw("use"),Pb,ub(),!1),new vb(rw("creationForm"),Pb,ub(),!1).addLabelNoLanguage("creation form").addCommentNoLanguage("A form which may be used to collect information about a\n    hitherto locally undocumented instance instance of this class."),new vb(rw("contents"),Pb,ub(),!1).addLabel("Contents","en").addLabel("Contenido","es"),new vb(rw("size"),Pb,ub(),!1).addLabelNoLanguage("size of field"),new vb(rw("style"),Pb,ub(),!1).addLabelNoLanguage("style").addCommentNoLanguage("Must be a valid CSS style string such as one could put in\n        an HTML style attribute.  Depending on the user interface system, this can\n        by given to individuals, classes or properties. It is up to a user interface\n        which wants to draw on them to pick how it uses styles from which parts\n        of the data it has.  For example, the style of a class may be picked\n        to distinguish information about things in that class."),new vb(rw("category"),Pb,ub(),!1).addLabel("overall superclass","en").addCommentNoLanguage("The superclass subclasses of which will be selected."),new vb(rw("dependingOn"),Pb,ub(),!1).addLabel("depending on","en").addCommentNoLanguage("Many fields prompt for information about a given property of the subject"),new vb(rw("maxLength"),Pb,ub(),!1).addLabelNoLanguage("max length of value"),new vb(rw("part"),Pb,ub(),!1).addLabel("part","en"),new vb(rw("annotationForm"),Pb,ub(),!1).addLabelNoLanguage("annotation form").addCommentNoLanguage("A form which may be used to add more infromation to an\ninstance of this class which we know something about.  Anything from\nadding just add one more fact, to adding a whole lot of information about a specific\nfacet of the thing.\n"),new vb(rw("backgroundColor"),Pb,ub(),!1).addLabel("background color","en").addCommentNoLanguage("Must be a valid CSS color string such as one could put in\n        an HTML style attribute.  This should be in the #xxxxxx form,\n        (with 6 digits of hex)  so that it\n        can work with Graphviz."),new vb(rw("backgroundImage"),Pb,ub(),!1).addLabel("background image","en").addCommentNoLanguage("URI or base64 representation of an image"),new vb(rw("color"),Pb,ub(),!1).addLabel("color","en").addCommentNoLanguage("Must be a valid CSS color string such as one could put in\n        an HTML style attribute.  This should be in the #xxxxxx form,\n        (with 6 digits of hex)  so that it\n        can work with Graphviz."),new vb(rw("initialProperties"),Pb,ub(),!1).addLabelNoLanguage("initial properties").addCommentNoLanguage('A really simple way of enabling user interfaces to\n            create new information about a class of things is to make a define of properties\n            to be specified when a information about a new item\n            ("New item" here means an item which the system\n            does not have prvious information about yet,\n            not an items which has just been created,\n            like new friend as opposed to new baby)'),new vb(rw("maxValue"),Pb,ub(),!1).addLabelNoLanguage("max"),new vb(rw("minValue"),Pb,ub(),!1).addLabelNoLanguage("min"),new vb(rw("seqeunce"),Pb,ub(),!1).addLabelNoLanguage("sequence number").addCommentNoLanguage("The sequence in which this item is arranged with repect to other parts."),new vb(rw("sortBy"),Pb,ub(),!1).addLabelNoLanguage("sort by").addCommentNoLanguage("A property which typically is used to sort\n        members of a given class."),new vb(rw("sortPriority"),Pb,ub(),!1).addLabelNoLanguage("sort priority").addCommentNoLanguage("When individuals or classes must be sorted, then\n        if they are given different values of sortPriority a user agent can\n        use this as a hint to how to present information."),new vb(rw("tableProperties"),Pb,ub(),!1).addLabelNoLanguage("table properties").addCommentNoLanguage("This  is a crude way of specifying a table-based\n            view for objects of this class."),new vb(rw("pattern"),Pb,ub(),!1).addLabel("Pattern","en").addLabel("Modelo","es"),new vb(rw("value"),Pb,ub(),!1).addLabel("Value","en").addLabel("Valor","es"),new vb(rw("values"),Pb,ub(),!1).addLabel("Values","en").addLabel("Valores","es"),new vb(rw("minDateOffset"),Pb,ub(),!1).addLabel("Minimum date offset","en").addLabel("Fecha m\xednima compensada","es"),new vb(rw("maxDateOffset"),Pb,ub(),!1).addLabel("Maximum date offset","en").addLabel("Fecha m\xe1xima de desplazamiento","es"),new vb(rw("minDatetimeOffset"),Pb,ub(),!1).addLabel("Minimum datetime offset","en").addLabel("Desplazamiento m\xednimo de fecha y hora","es"),new vb(rw("maxDatetimeOffset"),Pb,ub(),!1).addLabel("Maximum datetime offset","en").addLabel("Desplazamiento m\xe1ximo de fecha y hora","es"),new vb(rw("name"),Pb,ub(),!1).addLabel("Name","en").addLabel("Nombre","es"),new vb(rw("TimeField"),Pb,ub(),!1).addLabel("Time field","en").addLabel("Campo de tiempo","es");var iw=Pb.namedNode;function aw(e){return iw("http://purl.org/vocab/vann/"+e)}new vb(aw("preferredNamespacePrefix"),Pb,ub(),!1).addLabel("Preferred namespace prefix","en").addComment("The preferred namespace prefix to ue when using terms from this vocabulary in an XML document.","en"),new vb(aw("preferredNamespaceUri"),Pb,ub(),!1).addLabel("Preferred namespace URI","en").addComment("The preferred namespace URI to use when using terms from this vocabulary in an XML document.","en"),new vb(aw("changes"),Pb,ub(),!1).addLabel("changes","en").addComment("A reference to a resource that describes changes between this version of a vocabulary and the previous.","en"),new vb(aw("example"),Pb,ub(),!1).addLabel("Example","en").addComment("A reference to a resource that provides an example of how this resource can be used.","en"),new vb(aw("termGroup"),Pb,ub(),!1).addLabel("Term group","en").addComment("A group of related terms in a vocabulary.","en"),new vb(aw("usageNote"),Pb,ub(),!1).addLabel("Usage note","en").addComment("A reference to a resource that provides information on how this resource is to be used.","en");var ow=Pb.namedNode;function sw(e){return ow("http://purl.org/dc/terms/"+e)}new vb(sw("Agent"),Pb,ub(),!1).addLabel("Agent","en").addComment("A resource that acts or has the power to act.","en"),new vb(sw("AgentClass"),Pb,ub(),!1).addLabel("Agent Class","en").addComment("A group of agents.","en"),new vb(sw("BibliographicResource"),Pb,ub(),!1).addLabel("Bibliographic Resource","en").addComment("A book, article, or other documentary resource.","en"),new vb(sw("FileFormat"),Pb,ub(),!1).addLabel("File Format","en").addComment("A digital resource format.","en"),new vb(sw("MediaType"),Pb,ub(),!1).addLabel("Media Type","en").addComment("A file format or physical medium.","en"),new vb(sw("Frequency"),Pb,ub(),!1).addLabel("Frequency","en").addComment("A rate at which something recurs.","en"),new vb(sw("Jurisdiction"),Pb,ub(),!1).addLabel("Jurisdiction","en").addComment("The extent or range of judicial, law enforcement, or other authority.","en"),new vb(sw("LocationPeriodOrJurisdiction"),Pb,ub(),!1).addLabel("Location, Period, or Jurisdiction","en").addComment("A location, period of time, or jurisdiction.","en"),new vb(sw("LicenseDocument"),Pb,ub(),!1).addLabel("License Document","en").addComment("A legal document giving official permission to do something with a resource.","en"),new vb(sw("RightsStatement"),Pb,ub(),!1).addLabel("Rights Statement","en").addComment("A statement about the intellectual property rights (IPR) held in or over a resource, a legal document giving official permission to do something with a resource, or a statement about access rights.","en"),new vb(sw("LinguisticSystem"),Pb,ub(),!1).addLabel("Linguistic System","en").addComment("A system of signs, symbols, sounds, gestures, or rules used in communication.","en"),new vb(sw("Location"),Pb,ub(),!1).addLabel("Location","en").addComment("A spatial region or named place.","en"),new vb(sw("MediaTypeOrExtent"),Pb,ub(),!1).addLabel("Media Type or Extent","en").addComment("A media type or extent.","en"),new vb(sw("MethodOfAccrual"),Pb,ub(),!1).addLabel("Method of Accrual","en").addComment("A method by which resources are added to a collection.","en"),new vb(sw("MethodOfInstruction"),Pb,ub(),!1).addLabel("Method of Instruction","en").addComment("A process that is used to engender knowledge, attitudes, and skills.","en"),new vb(sw("PeriodOfTime"),Pb,ub(),!1).addLabel("Period of Time","en").addComment("An interval of time that is named or defined by its start and end dates.","en"),new vb(sw("PhysicalMedium"),Pb,ub(),!1).addLabel("Physical Medium","en").addComment("A physical material or carrier.","en"),new vb(sw("PhysicalResource"),Pb,ub(),!1).addLabel("Physical Resource","en").addComment("A material thing.","en"),new vb(sw("Policy"),Pb,ub(),!1).addLabel("Policy","en").addComment("A plan or course of action by an authority, intended to influence and determine decisions, actions, and other matters.","en"),new vb(sw("ProvenanceStatement"),Pb,ub(),!1).addLabel("Provenance Statement","en").addComment("Any changes in ownership and custody of a resource since its creation that are significant for its authenticity, integrity, and interpretation.","en"),new vb(sw("SizeOrDuration"),Pb,ub(),!1).addLabel("Size or Duration","en").addComment("A dimension or extent, or a time taken to play or execute.","en"),new vb(sw("Standard"),Pb,ub(),!1).addLabel("Standard","en").addComment("A reference point against which other things can be evaluated or compared.","en"),new vb(sw("modified"),Pb,ub(),!1).addLabel("Date Modified","en").addComment("Date on which the resource was changed.","en"),new vb(sw("publisher"),Pb,ub(),!1).addLabel("Publisher","en").addComment("An entity responsible for making the resource available.","en"),new vb(sw("title"),Pb,ub(),!1).addLabel("Title","en").addComment("A name given to the resource.","en"),new vb(sw("issued"),Pb,ub(),!1).addLabel("Date Issued","en").addComment("Date of formal issuance of the resource.","en"),new vb(sw("Box"),Pb,ub(),!1).addLabel("DCMI Box","en").addComment("The set of regions in space defined by their geographic coordinates according to the DCMI Box Encoding Scheme.","en"),new vb(sw("ISO3166"),Pb,ub(),!1).addLabel("ISO 3166","en").addComment("The set of codes listed in ISO 3166-1 for the representation of names of countries.","en"),new vb(sw("ISO639-2"),Pb,ub(),!1).addLabel("ISO 639-2","en").addComment("The three-letter alphabetic codes listed in ISO639-2 for the representation of names of languages.","en"),new vb(sw("ISO639-3"),Pb,ub(),!1).addLabel("ISO 639-3","en").addComment("The set of three-letter codes listed in ISO 639-3 for the representation of names of languages.","en"),new vb(sw("description"),Pb,ub(),!1).addLabel("Description","en").addComment("An account of the resource.","en"),new vb(sw("Period"),Pb,ub(),!1).addLabel("DCMI Period","en").addComment("The set of time intervals defined by their limits according to the DCMI Period Encoding Scheme.","en"),new vb(sw("Point"),Pb,ub(),!1).addLabel("DCMI Point","en").addComment("The set of points in space defined by their geographic coordinates according to the DCMI Point Encoding Scheme.","en"),new vb(sw("RFC1766"),Pb,ub(),!1).addLabel("RFC 1766","en").addComment("The set of tags, constructed according to RFC 1766, for the identification of languages.","en"),new vb(sw("RFC3066"),Pb,ub(),!1).addLabel("RFC 3066","en").addComment("The set of tags constructed according to RFC 3066 for the identification of languages.","en"),new vb(sw("RFC4646"),Pb,ub(),!1).addLabel("RFC 4646","en").addComment("The set of tags constructed according to RFC 4646 for the identification of languages.","en"),new vb(sw("RFC5646"),Pb,ub(),!1).addLabel("RFC 5646","en").addComment("The set of tags constructed according to RFC 5646 for the identification of languages.","en"),new vb(sw("URI"),Pb,ub(),!1).addLabel("URI","en").addComment("The set of identifiers constructed according to the generic syntax for Uniform Resource Identifiers as specified by the Internet Engineering Task Force.","en"),new vb(sw("W3CDTF"),Pb,ub(),!1).addLabel("W3C-DTF","en").addComment("The set of dates and times constructed according to the W3C Date and Time Formats Specification.","en"),new vb(sw("abstract"),Pb,ub(),!1).addLabel("Abstract","en").addComment("A summary of the resource.","en"),new vb(sw("accessRights"),Pb,ub(),!1).addLabel("Access Rights","en").addComment("Information about who access the resource or an indication of its security status.","en"),new vb(sw("accrualMethod"),Pb,ub(),!1).addLabel("Accrual Method","en").addComment("The method by which items are added to a collection.","en"),new vb(sw("accrualPeriodicity"),Pb,ub(),!1).addLabel("Accrual Periodicity","en").addComment("The frequency with which items are added to a collection.","en"),new vb(sw("accrualPolicy"),Pb,ub(),!1).addLabel("Accrual Policy","en").addComment("The policy governing the addition of items to a collection.","en"),new vb(sw("alternative"),Pb,ub(),!1).addLabel("Alternative Title","en").addComment("An alternative name for the resource.","en"),new vb(sw("audience"),Pb,ub(),!1).addLabel("Audience","en").addComment("A class of agents for whom the resource is intended or useful.","en"),new vb(sw("available"),Pb,ub(),!1).addLabel("Date Available","en").addComment("Date that the resource became or will become available.","en"),new vb(sw("bibliographicCitation"),Pb,ub(),!1).addLabel("Bibliographic Citation","en").addComment("A bibliographic reference for the resource.","en"),new vb(sw("conformsTo"),Pb,ub(),!1).addLabel("Conforms To","en").addComment("An established standard to which the described resource conforms.","en"),new vb(sw("contributor"),Pb,ub(),!1).addLabel("Contributor","en").addComment("An entity responsible for making contributions to the resource.","en"),new vb(sw("coverage"),Pb,ub(),!1).addLabel("Coverage","en").addComment("The spatial or temporal topic of the resource, spatial applicability of the resource, or jurisdiction under which the resource is relevant.","en"),new vb(sw("created"),Pb,ub(),!1).addLabel("Date Created","en").addComment("Date of creation of the resource.","en"),new vb(sw("creator"),Pb,ub(),!1).addLabel("Creator","en").addComment("An entity responsible for making the resource.","en"),new vb(sw("date"),Pb,ub(),!1).addLabel("Date","en").addComment("A point or period of time associated with an event in the lifecycle of the resource.","en"),new vb(sw("dateAccepted"),Pb,ub(),!1).addLabel("Date Accepted","en").addComment("Date of acceptance of the resource.","en"),new vb(sw("dateCopyrighted"),Pb,ub(),!1).addLabel("Date Copyrighted","en").addComment("Date of copyright of the resource.","en"),new vb(sw("dateSubmitted"),Pb,ub(),!1).addLabel("Date Submitted","en").addComment("Date of submission of the resource.","en"),new vb(sw("educationLevel"),Pb,ub(),!1).addLabel("Audience Education Level","en").addComment("A class of agents, defined in terms of progression through an educational or training context, for which the described resource is intended.","en"),new vb(sw("extent"),Pb,ub(),!1).addLabel("Extent","en").addComment("The size or duration of the resource.","en"),new vb(sw("format"),Pb,ub(),!1).addLabel("Format","en").addComment("The file format, physical medium, or dimensions of the resource.","en"),new vb(sw("hasFormat"),Pb,ub(),!1).addLabel("Has Format","en").addComment("A related resource that is substantially the same as the pre-existing described resource, but in another format.","en"),new vb(sw("hasPart"),Pb,ub(),!1).addLabel("Has Part","en").addComment("A related resource that is included either physically or logically in the described resource.","en"),new vb(sw("hasVersion"),Pb,ub(),!1).addLabel("Has Version","en").addComment("A related resource that is a version, edition, or adaptation of the described resource.","en"),new vb(sw("identifier"),Pb,ub(),!1).addLabel("Identifier","en").addComment("An unambiguous reference to the resource within a given context.","en"),new vb(sw("instructionalMethod"),Pb,ub(),!1).addLabel("Instructional Method","en").addComment("A process, used to engender knowledge, attitudes and skills, that the described resource is designed to support.","en"),new vb(sw("isFormatOf"),Pb,ub(),!1).addLabel("Is Format Of","en").addComment("A pre-existing related resource that is substantially the same as the described resource, but in another format.","en"),new vb(sw("isPartOf"),Pb,ub(),!1).addLabel("Is Part Of","en").addComment("A related resource in which the described resource is physically or logically included.","en"),new vb(sw("isReferencedBy"),Pb,ub(),!1).addLabel("Is Referenced By","en").addComment("A related resource that references, cites, or otherwise points to the described resource.","en"),new vb(sw("isReplacedBy"),Pb,ub(),!1).addLabel("Is Replaced By","en").addComment("A related resource that supplants, displaces, or supersedes the described resource.","en"),new vb(sw("isRequiredBy"),Pb,ub(),!1).addLabel("Is Required By","en").addComment("A related resource that requires the described resource to support its function, delivery, or coherence.","en"),new vb(sw("isVersionOf"),Pb,ub(),!1).addLabel("Is Version Of","en").addComment("A related resource of which the described resource is a version, edition, or adaptation.","en"),new vb(sw("language"),Pb,ub(),!1).addLabel("Language","en").addComment("A language of the resource.","en"),new vb(sw("license"),Pb,ub(),!1).addLabel("License","en").addComment("A legal document giving official permission to do something with the resource.","en"),new vb(sw("mediator"),Pb,ub(),!1).addLabel("Mediator","en").addComment("An entity that mediates access to the resource.","en"),new vb(sw("medium"),Pb,ub(),!1).addLabel("Medium","en").addComment("The material or physical carrier of the resource.","en"),new vb(sw("provenance"),Pb,ub(),!1).addLabel("Provenance","en").addComment("A statement of any changes in ownership and custody of the resource since its creation that are significant for its authenticity, integrity, and interpretation.","en"),new vb(sw("references"),Pb,ub(),!1).addLabel("References","en").addComment("A related resource that is referenced, cited, or otherwise pointed to by the described resource.","en"),new vb(sw("relation"),Pb,ub(),!1).addLabel("Relation","en").addComment("A related resource.","en"),new vb(sw("replaces"),Pb,ub(),!1).addLabel("Replaces","en").addComment("A related resource that is supplanted, displaced, or superseded by the described resource.","en"),new vb(sw("requires"),Pb,ub(),!1).addLabel("Requires","en").addComment("A related resource that is required by the described resource to support its function, delivery, or coherence.","en"),new vb(sw("rights"),Pb,ub(),!1).addLabel("Rights","en").addComment("Information about rights held in and over the resource.","en"),new vb(sw("rightsHolder"),Pb,ub(),!1).addLabel("Rights Holder","en").addComment("A person or organization owning or managing rights over the resource.","en"),new vb(sw("source"),Pb,ub(),!1).addLabel("Source","en").addComment("A related resource from which the described resource is derived.","en"),new vb(sw("spatial"),Pb,ub(),!1).addLabel("Spatial Coverage","en").addComment("Spatial characteristics of the resource.","en"),new vb(sw("subject"),Pb,ub(),!1).addLabel("Subject","en").addComment("A topic of the resource.","en"),new vb(sw("tableOfContents"),Pb,ub(),!1).addLabel("Table Of Contents","en").addComment("A list of subunits of the resource.","en"),new vb(sw("temporal"),Pb,ub(),!1).addLabel("Temporal Coverage","en").addComment("Temporal characteristics of the resource.","en"),new vb(sw("type"),Pb,ub(),!1).addLabel("Type","en").addComment("The nature or genre of the resource.","en"),new vb(sw("valid"),Pb,ub(),!1).addLabel("Date Valid","en").addComment("Date (often a range) of validity of a resource.","en");var uw=Pb.namedNode;function lw(e){return uw("https://www.w3.org/ns/activitystreams#"+e)}new vb(lw("Activity"),Pb,ub(),!1).addLabel("Activity","en").addComment("An Object representing some form of Action that has been taken","en"),new vb(lw("Object"),Pb,ub(),!1).addLabel("Object","en"),new vb(lw("Link"),Pb,ub(),!1).addLabel("Link","en").addComment("Represents a qualified reference to another resource. Patterned after the RFC5988 Web Linking Model","en"),new vb(lw("Collection"),Pb,ub(),!1).addLabel("Collection","en").addComment("An ordered or unordered collection of Objects or Links","en"),new vb(lw("CollectionPage"),Pb,ub(),!1).addLabel("CollectionPage","en").addComment("A subset of items from a Collection","en"),new vb(lw("Image"),Pb,ub(),!1).addLabel("Image","en").addComment("An Image file","en"),new vb(lw("OrderedItems"),Pb,ub(),!1).addLabel("OrderedItems","en").addComment("A rdf:List variant for Objects and Links","en"),new vb(lw("Relationship"),Pb,ub(),!1).addLabel("Relationship","en").addComment("Represents a Social Graph relationship between two Individuals (indicated by the 'a' and 'b' properties)","en"),new vb(lw("Question"),Pb,ub(),!1).addLabel("Question","en").addComment("A question of any sort.","en"),new vb(lw("Profile"),Pb,ub(),!1).addLabel("Profile","en").addComment("A Profile Document","en"),new vb(lw("Tombstone"),Pb,ub(),!1).addLabel("Tombstone","en").addComment("A placeholder for a deleted object","en"),new vb(lw("Place"),Pb,ub(),!1).addLabel("Place","en").addComment("A physical or logical location","en"),new vb(lw("OrderedCollectionPage"),Pb,ub(),!1).addLabel("OrderedCollectionPage","en").addComment("An ordered subset of items from an OrderedCollection","en"),new vb(lw("Accept"),Pb,ub(),!1).addLabel("Accept","en").addComment("Actor accepts the Object","en"),new vb(lw("Block"),Pb,ub(),!1).addLabel("Block","en"),new vb(lw("Ignore"),Pb,ub(),!1).addLabel("Ignore","en").addComment("Actor is ignoring the Object","en"),new vb(lw("IntransitiveActivity"),Pb,ub(),!1).addLabel("IntransitiveActivity","en").addComment("An Activity that has no direct object","en"),new vb(lw("Add"),Pb,ub(),!1).addLabel("Add","en").addComment("To Add an Object or Link to Something","en"),new vb(lw("Announce"),Pb,ub(),!1).addLabel("Announce","en").addComment("Actor announces the object to the target","en"),new vb(lw("Application"),Pb,ub(),!1).addLabel("Application","en").addComment("Represents a software application of any sort","en"),new vb(lw("Arrive"),Pb,ub(),!1).addLabel("Arrive","en").addComment('To Arrive Somewhere (can be used, for instance, to indicate that a particular entity is currently located somewhere, e.g. a "check-in")',"en"),new vb(lw("Article"),Pb,ub(),!1).addLabel("Article","en").addComment("A written work. Typically several paragraphs long. For example, a blog post or a news article.","en"),new vb(lw("Audio"),Pb,ub(),!1).addLabel("Audio","en").addComment("An audio file","en"),new vb(lw("Document"),Pb,ub(),!1).addLabel("Document","en").addComment("Represents a digital document/file of any sort","en"),new vb(lw("OrderedCollection"),Pb,ub(),!1).addLabel("OrderedCollection","en").addComment("A variation of Collection in which items are strictly ordered","en"),new vb(lw("Create"),Pb,ub(),!1).addLabel("Create","en").addComment("To Create Something","en"),new vb(lw("Delete"),Pb,ub(),!1).addLabel("Delete","en").addComment("To Delete Something","en"),new vb(lw("Dislike"),Pb,ub(),!1).addLabel("Dislike","en").addComment("The actor dislikes the object","en"),new vb(lw("Event"),Pb,ub(),!1).addLabel("Event","en").addComment("An Event of any kind","en"),new vb(lw("Flag"),Pb,ub(),!1).addLabel("Flag","en").addComment("To flag something (e.g. flag as inappropriate, flag as spam, etc)","en"),new vb(lw("Follow"),Pb,ub(),!1).addLabel("Follow","en").addComment("To Express Interest in Something","en"),new vb(lw("Group"),Pb,ub(),!1).addLabel("Group","en").addComment("A Group of any kind.","en"),new vb(lw("Invite"),Pb,ub(),!1).addLabel("Invite","en").addComment("To invite someone or something to something","en"),new vb(lw("Offer"),Pb,ub(),!1).addLabel("Offer","en").addComment("To Offer something to someone or something","en"),new vb(lw("Join"),Pb,ub(),!1).addLabel("Join","en").addComment("To Join Something","en"),new vb(lw("Leave"),Pb,ub(),!1).addLabel("Leave","en").addComment("To Leave Something","en"),new vb(lw("Like"),Pb,ub(),!1).addLabel("Like","en").addComment("To Like Something","en"),new vb(lw("View"),Pb,ub(),!1).addLabel("View","en").addComment("The actor viewed the object","en"),new vb(lw("Listen"),Pb,ub(),!1).addLabel("Listen","en").addComment("The actor listened to the object","en"),new vb(lw("Read"),Pb,ub(),!1).addLabel("Read","en").addComment("The actor read the object","en"),new vb(lw("Move"),Pb,ub(),!1).addLabel("Move","en").addCommentNoLanguage("The actor is moving the object. The target specifies where the object is moving to. The origin specifies where the object is moving from."),new vb(lw("Travel"),Pb,ub(),!1).addLabel("Travel","en").addCommentNoLanguage("The actor is traveling to the target. The origin specifies where the actor is traveling from."),new vb(lw("Mention"),Pb,ub(),!1).addLabel("Mention","en").addComment("A specialized Link that represents an @mention","en"),new vb(lw("Note"),Pb,ub(),!1).addLabel("Note","en").addComment('A Short note, typically less than a single paragraph. A "tweet" is an example, or a "status update"',"en"),new vb(lw("Page"),Pb,ub(),!1).addLabel("Page","en").addComment("A Web Page","en"),new vb(lw("Person"),Pb,ub(),!1).addLabel("Person","en").addComment("A Person","en"),new vb(lw("Organization"),Pb,ub(),!1).addLabel("Organization","en").addComment("An Organization","en"),new vb(lw("Reject"),Pb,ub(),!1).addLabel("Reject","en").addComment("Actor rejects the Object","en"),new vb(lw("Remove"),Pb,ub(),!1).addLabel("Remove","en").addComment("To Remove Something","en"),new vb(lw("Service"),Pb,ub(),!1).addLabel("Service","en").addComment("A service provided by some entity","en"),new vb(lw("TentativeAccept"),Pb,ub(),!1).addLabel("TentativeAccept","en").addComment("Actor tentatively accepts the Object","en"),new vb(lw("TentativeReject"),Pb,ub(),!1).addLabel("TentativeReject","en").addComment("Actor tentatively rejects the object","en"),new vb(lw("Undo"),Pb,ub(),!1).addLabel("Undo","en").addComment("To Undo Something. This would typically be used to indicate that a previous Activity has been undone.","en"),new vb(lw("Update"),Pb,ub(),!1).addLabel("Update","en").addComment("To Update/Modify Something","en"),new vb(lw("Video"),Pb,ub(),!1).addLabel("Video","en").addComment("A Video document of any kind.","en"),new vb(lw("actor"),Pb,ub(),!1).addLabel("actor","en").addComment("Subproperty of as:attributedTo that identifies the primary actor","en"),new vb(lw("attributedTo"),Pb,ub(),!1).addLabel("attributedTo","en").addComment("Identifies an entity to which an object is attributed","en"),new vb(lw("attachment"),Pb,ub(),!1).addLabel("attachment","en"),new vb(lw("attachments"),Pb,ub(),!1).addLabel("attachments","en"),new vb(lw("author"),Pb,ub(),!1).addLabel("author","en").addComment("Identifies the author of an object. Deprecated. Use as:attributedTo instead","en"),new vb(lw("bcc"),Pb,ub(),!1).addLabel("bcc","en"),new vb(lw("bto"),Pb,ub(),!1).addLabel("bto","en"),new vb(lw("cc"),Pb,ub(),!1).addLabel("cc","en"),new vb(lw("context"),Pb,ub(),!1).addLabel("context","en").addComment("Specifies the context within which an object exists or an activity was performed","en"),new vb(lw("current"),Pb,ub(),!1).addLabel("current","en"),new vb(lw("first"),Pb,ub(),!1).addLabel("first","en"),new vb(lw("generator"),Pb,ub(),!1).addLabel("generator","en"),new vb(lw("icon"),Pb,ub(),!1).addLabel("icon","en"),new vb(lw("image"),Pb,ub(),!1).addLabel("image","en"),new vb(lw("inReplyTo"),Pb,ub(),!1).addLabel("inReplyTo","en"),new vb(lw("items"),Pb,ub(),!1).addLabel("items","en"),new vb(lw("last"),Pb,ub(),!1).addLabel("last","en"),new vb(lw("location"),Pb,ub(),!1).addLabel("location","en"),new vb(lw("next"),Pb,ub(),!1).addLabel("next","en"),new vb(lw("object"),Pb,ub(),!1).addLabel("object","en"),new vb(lw("oneOf"),Pb,ub(),!1).addLabel("oneOf","en").addComment("Describes a possible exclusive answer or option for a question.","en"),new vb(lw("anyOf"),Pb,ub(),!1).addLabel("oneOf","en").addComment("Describes a possible inclusive answer or option for a question.","en"),new vb(lw("prev"),Pb,ub(),!1).addLabel("prev","en"),new vb(lw("preview"),Pb,ub(),!1).addLabel("preview","en"),new vb(lw("provider"),Pb,ub(),!1).addLabel("provider","en"),new vb(lw("replies"),Pb,ub(),!1).addLabel("replies","en"),new vb(lw("result"),Pb,ub(),!1).addLabel("result","en"),new vb(lw("audience"),Pb,ub(),!1).addLabel("audience","en"),new vb(lw("partOf"),Pb,ub(),!1).addLabel("partOf","en"),new vb(lw("tag"),Pb,ub(),!1).addLabel("tag","en"),new vb(lw("tags"),Pb,ub(),!1).addLabel("tags","en"),new vb(lw("target"),Pb,ub(),!1).addLabel("target","en"),new vb(lw("origin"),Pb,ub(),!1).addLabel("origin","en").addComment("For certain activities, specifies the entity from which the action is directed.","en"),new vb(lw("instrument"),Pb,ub(),!1).addLabel("instrument","en").addComment("Indentifies an object used (or to be used) to complete an activity","en"),new vb(lw("to"),Pb,ub(),!1).addLabel("to","en"),new vb(lw("url"),Pb,ub(),!1).addLabel("url","en").addComment("Specifies a link to a specific representation of the Object","en"),new vb(lw("subject"),Pb,ub(),!1).addLabel("a","en").addComment("On a Relationship object, identifies the subject. e.g. when saying \"John is connected to Sally\", 'subject' refers to 'John'","en"),new vb(lw("relationship"),Pb,ub(),!1).addLabel("relationship","en").addComment("On a Relationship object, describes the type of relationship","en"),new vb(lw("describes"),Pb,ub(),!1).addLabel("describes","en").addComment("On a Profile object, describes the object described by the profile","en"),new vb(lw("formerType"),Pb,ub(),!1).addLabel("formerType","en").addComment("On a Tombstone object, describes the former type of the deleted object","en"),new vb(lw("accuracy"),Pb,ub(),!1).addLabel("accuracy","en").addComment("Specifies the accuracy around the point established by the longitude and latitude","en"),new vb(lw("altitude"),Pb,ub(),!1).addLabel("altitude","en").addComment("The altitude of a place","en"),new vb(lw("content"),Pb,ub(),!1).addLabel("content","en").addComment("The content of the object.","en"),new vb(lw("name"),Pb,ub(),!1).addLabel("name","en"),new vb(lw("downstreamDuplicates"),Pb,ub(),!1).addLabel("downstreamDuplicates","en"),new vb(lw("duration"),Pb,ub(),!1).addLabel("duration","en").addComment("The duration of the object","en"),new vb(lw("endTime"),Pb,ub(),!1).addLabel("endTime","en").addComment("The ending time of the object","en"),new vb(lw("height"),Pb,ub(),!1).addLabel("height","en").addComment("The display height expressed as device independent pixels","en"),new vb(lw("href"),Pb,ub(),!1).addLabel("href","en").addComment("The target URI of the Link","en"),new vb(lw("hreflang"),Pb,ub(),!1).addLabel("hreflang","en").addComment("A hint about the language of the referenced resource","en"),new vb(lw("id"),Pb,ub(),!1).addLabel("id","en"),new vb(lw("latitude"),Pb,ub(),!1).addLabel("latitude","en").addComment("The latitude","en"),new vb(lw("longitude"),Pb,ub(),!1).addLabel("longitude","en").addComment("The longitude","en"),new vb(lw("mediaType"),Pb,ub(),!1).addLabel("mediaType","en").addComment("The MIME Media Type","en"),new vb(lw("objectType"),Pb,ub(),!1).addLabel("objectType","en"),new vb(lw("published"),Pb,ub(),!1).addLabel("published","en").addComment("Specifies the date and time the object was published","en"),new vb(lw("radius"),Pb,ub(),!1).addLabel("radius","en").addComment("Specifies a radius around the point established by the longitude and latitude","en"),new vb(lw("rating"),Pb,ub(),!1).addLabel("rating","en").addComment("A numeric rating (>= 0.0, <= 5.0) for the object","en"),new vb(lw("rel"),Pb,ub(),!1).addLabel("rel","en").addComment("The RFC 5988 or HTML5 Link Relation associated with the Link","en"),new vb(lw("startIndex"),Pb,ub(),!1).addLabel("startIndex","en").addComment("In a strictly ordered logical collection, specifies the index position of the first item in the items list","en"),new vb(lw("startTime"),Pb,ub(),!1).addLabel("startTime","en").addComment("The starting time of the object","en"),new vb(lw("summary"),Pb,ub(),!1).addLabel("summary","en").addComment("A short summary of the object","en"),new vb(lw("totalItems"),Pb,ub(),!1).addLabel("totalItems","en").addComment("The total number of items in a logical collection","en"),new vb(lw("units"),Pb,ub(),!1).addLabel("units","en").addComment("Identifies the unit of measurement used by the radius, altitude and accuracy properties. The value can be expressed either as one of a set of predefined units or as a well-known common URI that identifies units.","en"),new vb(lw("updated"),Pb,ub(),!1).addLabel("updated","en").addComment("Specifies when the object was last updated","en"),new vb(lw("upstreamDuplicates"),Pb,ub(),!1).addLabel("upstreamDuplicates","en"),new vb(lw("verb"),Pb,ub(),!1).addLabel("verb","en"),new vb(lw("width"),Pb,ub(),!1).addLabel("width","en").addComment("Specifies the preferred display width of the content, expressed in terms of device independent pixels.","en"),new vb(lw("deleted"),Pb,ub(),!1).addLabel("deleted","en").addComment("Specifies the date and time the object was deleted","en");var cw=Pb.namedNode;function dw(e){return cw("http://persistence.uni-leipzig.org/nlp2rdf/ontologies/rlog#"+e)}new vb(dw("Level"),Pb,ub(),!1).addLabel("Log Level","en").addComment("look here: http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Level.html ","en"),new vb(dw("Entry"),Pb,ub(),!1).addLabel("Log Entry","en").addComment("An entry in a log.","en"),new vb(dw("StatusCode"),Pb,ub(),!1).addLabel("Status Code","en").addComment("A status code which can occur in an application. Instances of this class must put the name of the status as rdfs:label and describe it with rdfs:comment.","en"),new vb(dw("ALL"),Pb,ub(),!1).addLabel("ALL","en").addComment("The ALL has the lowest possible rank and is intended to turn on all logging.","en"),new vb(dw("priority"),Pb,ub(),!1).addLabel("logLevel","en").addComment("Attention: the ids here can change, they are just used to define an order over the levels!","en"),new vb(dw("DEBUG"),Pb,ub(),!1).addLabel("DEBUG","en").addComment("The DEBUG Level designates fine-grained informational events that are most useful to debug an application.","en"),new vb(dw("ERROR"),Pb,ub(),!1).addLabel("ERROR","en").addComment("The ERROR level designates error events that might still allow the application to continue running.","en"),new vb(dw("FATAL"),Pb,ub(),!1).addLabel("FATAL","en").addComment("The FATAL level designates very severe error events that will presumably lead the application to abort.","en"),new vb(dw("INFO"),Pb,ub(),!1).addLabel("INFO","en").addComment("The INFO level designates informational messages that highlight the progress of the application at coarse-grained level.","en"),new vb(dw("OFF"),Pb,ub(),!1).addLabel("OFF","en").addComment("The OFF has the highest possible rank and is intended to turn off logging.","en"),new vb(dw("TRACE"),Pb,ub(),!1).addLabel("TRACE","en").addComment("The TRACE Level designates finer-grained informational events than the DEBUG.","en"),new vb(dw("WARN"),Pb,ub(),!1).addLabel("WARN","en").addComment("The WARN level designates potentially harmful situations.","en"),new vb(dw("className"),Pb,ub(),!1).addLabel("class name","en").addComment("Outputs the fully qualified class name of the caller issuing the logging request.","en"),new vb(dw("codeId"),Pb,ub(),!1).addLabel("code id","en").addComment("The numerical value of the code, e.g. 200, 404 or 42.","en"),new vb(dw("date"),Pb,ub(),!1).addLabel("Logging datetime (or just date)","en"),new vb(dw("hasCode"),Pb,ub(),!1).addLabel("has code","en").addComment("Links a log message to a status code.","en"),new vb(dw("level"),Pb,ub(),!1).addLabel("logLevel","en"),new vb(dw("message"),Pb,ub(),!1).addLabel("Logging message","en"),new vb(dw("resource"),Pb,ub(),!1).addLabel("an associated resource","en").addComment("If we mix normal and log output, this can be used to refer to the resource in the RDF the error is connected to. ","en");var fw=Pb.namedNode;function hw(e){return fw("http://xmlns.com/foaf/0.1/"+e)}var pw={PREFIX:"foaf",NAMESPACE:"http://xmlns.com/foaf/0.1/",PREFIX_AND_NAMESPACE:{foaf:"http://xmlns.com/foaf/0.1/"},NS:hw,Agent:new vb(hw("Agent"),Pb,ub(),!1).addLabelNoLanguage("Agent").addCommentNoLanguage("An agent (eg. person, group, software or physical artifact)."),Document:new vb(hw("Document"),Pb,ub(),!1).addLabelNoLanguage("Document").addCommentNoLanguage("A document."),Organization:new vb(hw("Organization"),Pb,ub(),!1).addLabelNoLanguage("Organization").addCommentNoLanguage("An organization."),Project:new vb(hw("Project"),Pb,ub(),!1).addLabelNoLanguage("Project").addCommentNoLanguage("A project (a collective endeavour of some kind)."),Group:new vb(hw("Group"),Pb,ub(),!1).addLabelNoLanguage("Group").addCommentNoLanguage("A class of Agents."),Image:new vb(hw("Image"),Pb,ub(),!1).addLabelNoLanguage("Image").addCommentNoLanguage("An image."),LabelProperty:new vb(hw("LabelProperty"),Pb,ub(),!1).addLabelNoLanguage("Label Property").addCommentNoLanguage("A foaf:LabelProperty is any RDF property with texual values that serve as labels."),OnlineAccount:new vb(hw("OnlineAccount"),Pb,ub(),!1).addLabelNoLanguage("Online Account").addCommentNoLanguage("An online account."),OnlineChatAccount:new vb(hw("OnlineChatAccount"),Pb,ub(),!1).addLabelNoLanguage("Online Chat Account").addCommentNoLanguage("An online chat account."),OnlineEcommerceAccount:new vb(hw("OnlineEcommerceAccount"),Pb,ub(),!1).addLabelNoLanguage("Online E-commerce Account").addCommentNoLanguage("An online e-commerce account."),OnlineGamingAccount:new vb(hw("OnlineGamingAccount"),Pb,ub(),!1).addLabelNoLanguage("Online Gaming Account").addCommentNoLanguage("An online gaming account."),Person:new vb(hw("Person"),Pb,ub(),!1).addLabelNoLanguage("Person").addCommentNoLanguage("A person."),PersonalProfileDocument:new vb(hw("PersonalProfileDocument"),Pb,ub(),!1).addLabelNoLanguage("PersonalProfileDocument").addCommentNoLanguage("A personal profile RDF document."),account:new vb(hw("account"),Pb,ub(),!1).addLabelNoLanguage("account").addCommentNoLanguage("Indicates an account held by this agent."),accountName:new vb(hw("accountName"),Pb,ub(),!1).addLabelNoLanguage("account name").addCommentNoLanguage("Indicates the name (identifier) associated with this online account."),accountServiceHomepage:new vb(hw("accountServiceHomepage"),Pb,ub(),!1).addLabelNoLanguage("account service homepage").addCommentNoLanguage("Indicates a homepage of the service provide for this online account."),age:new vb(hw("age"),Pb,ub(),!1).addLabelNoLanguage("age").addCommentNoLanguage("The age in years of some agent."),aimChatID:new vb(hw("aimChatID"),Pb,ub(),!1).addLabelNoLanguage("AIM chat ID").addCommentNoLanguage("An AIM chat ID"),nick:new vb(hw("nick"),Pb,ub(),!1).addLabelNoLanguage("nickname").addCommentNoLanguage("A short informal nickname characterising an agent (includes login identifiers, IRC and other chat nicknames)."),based_near:new vb(hw("based_near"),Pb,ub(),!1).addLabelNoLanguage("based near").addCommentNoLanguage("A location that something is based near, for some broadly human notion of near."),birthday:new vb(hw("birthday"),Pb,ub(),!1).addLabelNoLanguage("birthday").addCommentNoLanguage("The birthday of this Agent, represented in mm-dd string form, eg. '12-31'."),currentProject:new vb(hw("currentProject"),Pb,ub(),!1).addLabelNoLanguage("current project").addCommentNoLanguage("A current project this person works on."),depiction:new vb(hw("depiction"),Pb,ub(),!1).addLabelNoLanguage("depiction").addCommentNoLanguage("A depiction of some thing."),depicts:new vb(hw("depicts"),Pb,ub(),!1).addLabelNoLanguage("depicts").addCommentNoLanguage("A thing depicted in this representation."),dnaChecksum:new vb(hw("dnaChecksum"),Pb,ub(),!1).addLabelNoLanguage("DNA checksum").addCommentNoLanguage("A checksum for the DNA of some thing. Joke."),familyName:new vb(hw("familyName"),Pb,ub(),!1).addLabelNoLanguage("familyName").addCommentNoLanguage("The family name of some person."),family_name:new vb(hw("family_name"),Pb,ub(),!1).addLabelNoLanguage("family_name").addCommentNoLanguage("The family name of some person."),firstName:new vb(hw("firstName"),Pb,ub(),!1).addLabelNoLanguage("firstName").addCommentNoLanguage("The first name of a person."),focus:new vb(hw("focus"),Pb,ub(),!1).addLabelNoLanguage("focus").addCommentNoLanguage("The underlying or 'focal' entity associated with some SKOS-described concept."),fundedBy:new vb(hw("fundedBy"),Pb,ub(),!1).addLabelNoLanguage("funded by").addCommentNoLanguage("An organization funding a project or person."),geekcode:new vb(hw("geekcode"),Pb,ub(),!1).addLabelNoLanguage("geekcode").addCommentNoLanguage("A textual geekcode for this person, see http://www.geekcode.com/geek.html"),gender:new vb(hw("gender"),Pb,ub(),!1).addLabelNoLanguage("gender").addCommentNoLanguage("The gender of this Agent (typically but not necessarily 'male' or 'female')."),givenName:new vb(hw("givenName"),Pb,ub(),!1).addLabelNoLanguage("Given name").addCommentNoLanguage("The given name of some person."),givenname:new vb(hw("givenname"),Pb,ub(),!1).addLabelNoLanguage("Given name").addCommentNoLanguage("The given name of some person."),holdsAccount:new vb(hw("holdsAccount"),Pb,ub(),!1).addLabelNoLanguage("account").addCommentNoLanguage("Indicates an account held by this agent."),homepage:new vb(hw("homepage"),Pb,ub(),!1).addLabelNoLanguage("homepage").addCommentNoLanguage("A homepage for some thing."),page:new vb(hw("page"),Pb,ub(),!1).addLabelNoLanguage("page").addCommentNoLanguage("A page or document about this thing."),isPrimaryTopicOf:new vb(hw("isPrimaryTopicOf"),Pb,ub(),!1).addLabelNoLanguage("is primary topic of").addCommentNoLanguage("A document that this thing is the primary topic of."),icqChatID:new vb(hw("icqChatID"),Pb,ub(),!1).addLabelNoLanguage("ICQ chat ID").addCommentNoLanguage("An ICQ chat ID"),img:new vb(hw("img"),Pb,ub(),!1).addLabelNoLanguage("image").addCommentNoLanguage("An image that can be used to represent some thing (ie. those depictions which are particularly representative of something, eg. one's photo on a homepage)."),interest:new vb(hw("interest"),Pb,ub(),!1).addLabelNoLanguage("interest").addCommentNoLanguage("A page about a topic of interest to this person."),primaryTopic:new vb(hw("primaryTopic"),Pb,ub(),!1).addLabelNoLanguage("primary topic").addCommentNoLanguage("The primary topic of some page or document."),jabberID:new vb(hw("jabberID"),Pb,ub(),!1).addLabelNoLanguage("jabber ID").addCommentNoLanguage("A jabber ID for something."),knows:new vb(hw("knows"),Pb,ub(),!1).addLabelNoLanguage("knows").addCommentNoLanguage("A person known by this person (indicating some level of reciprocated interaction between the parties)."),lastName:new vb(hw("lastName"),Pb,ub(),!1).addLabelNoLanguage("lastName").addCommentNoLanguage("The last name of a person."),logo:new vb(hw("logo"),Pb,ub(),!1).addLabelNoLanguage("logo").addCommentNoLanguage("A logo representing some thing."),made:new vb(hw("made"),Pb,ub(),!1).addLabelNoLanguage("made").addCommentNoLanguage("Something that was made by this agent."),maker:new vb(hw("maker"),Pb,ub(),!1).addLabelNoLanguage("maker").addCommentNoLanguage("An agent that made this thing."),mbox:new vb(hw("mbox"),Pb,ub(),!1).addLabelNoLanguage("personal mailbox").addCommentNoLanguage("A personal mailbox, ie. an Internet mailbox associated with exactly one owner, the first owner of this mailbox. This is a 'static inverse functional property', in that there is (across time and change) at most one individual that ever has any particular value for foaf:mbox."),mbox_sha1sum:new vb(hw("mbox_sha1sum"),Pb,ub(),!1).addLabelNoLanguage("sha1sum of a personal mailbox URI name").addCommentNoLanguage("The sha1sum of the URI of an Internet mailbox associated with exactly one owner, the first owner of the mailbox."),member:new vb(hw("member"),Pb,ub(),!1).addLabelNoLanguage("member").addCommentNoLanguage("Indicates a member of a Group"),membershipClass:new vb(hw("membershipClass"),Pb,ub(),!1).addLabelNoLanguage("membershipClass").addCommentNoLanguage("Indicates the class of individuals that are a member of a Group"),msnChatID:new vb(hw("msnChatID"),Pb,ub(),!1).addLabelNoLanguage("MSN chat ID").addCommentNoLanguage("An MSN chat ID"),myersBriggs:new vb(hw("myersBriggs"),Pb,ub(),!1).addLabelNoLanguage("myersBriggs").addCommentNoLanguage("A Myers Briggs (MBTI) personality classification."),name:new vb(hw("name"),Pb,ub(),!1).addLabelNoLanguage("name").addCommentNoLanguage("A name for some thing."),openid:new vb(hw("openid"),Pb,ub(),!1).addLabelNoLanguage("openid").addCommentNoLanguage("An OpenID for an Agent."),topic:new vb(hw("topic"),Pb,ub(),!1).addLabelNoLanguage("topic").addCommentNoLanguage("A topic of some page or document."),pastProject:new vb(hw("pastProject"),Pb,ub(),!1).addLabelNoLanguage("past project").addCommentNoLanguage("A project this person has previously worked on."),phone:new vb(hw("phone"),Pb,ub(),!1).addLabelNoLanguage("phone").addCommentNoLanguage("A phone, specified using fully qualified tel: URI scheme (refs: http://www.w3.org/Addressing/schemes.html#tel)."),plan:new vb(hw("plan"),Pb,ub(),!1).addLabelNoLanguage("plan").addCommentNoLanguage("A .plan comment, in the tradition of finger and '.plan' files."),publications:new vb(hw("publications"),Pb,ub(),!1).addLabelNoLanguage("publications").addCommentNoLanguage("A link to the publications of this person."),schoolHomepage:new vb(hw("schoolHomepage"),Pb,ub(),!1).addLabelNoLanguage("schoolHomepage").addCommentNoLanguage("A homepage of a school attended by the person."),sha1:new vb(hw("sha1"),Pb,ub(),!1).addLabelNoLanguage("sha1sum (hex)").addCommentNoLanguage("A sha1sum hash, in hex."),skypeID:new vb(hw("skypeID"),Pb,ub(),!1).addLabelNoLanguage("Skype ID").addCommentNoLanguage("A Skype ID"),status:new vb(hw("status"),Pb,ub(),!1).addLabelNoLanguage("status").addCommentNoLanguage("A string expressing what the user is happy for the general public (normally) to know about their current activity."),surname:new vb(hw("surname"),Pb,ub(),!1).addLabelNoLanguage("Surname").addCommentNoLanguage("The surname of some person."),theme:new vb(hw("theme"),Pb,ub(),!1).addLabelNoLanguage("theme").addCommentNoLanguage("A theme."),thumbnail:new vb(hw("thumbnail"),Pb,ub(),!1).addLabelNoLanguage("thumbnail").addCommentNoLanguage("A derived thumbnail image."),tipjar:new vb(hw("tipjar"),Pb,ub(),!1).addLabelNoLanguage("tipjar").addCommentNoLanguage("A tipjar document for this agent, describing means for payment and reward."),title:new vb(hw("title"),Pb,ub(),!1).addLabelNoLanguage("title").addCommentNoLanguage("Title (Mr, Mrs, Ms, Dr. etc)"),topic_interest:new vb(hw("topic_interest"),Pb,ub(),!1).addLabelNoLanguage("topic_interest").addCommentNoLanguage("A thing of interest to this person."),weblog:new vb(hw("weblog"),Pb,ub(),!1).addLabelNoLanguage("weblog").addCommentNoLanguage("A weblog of some thing (whether person, group, company etc.)."),workInfoHomepage:new vb(hw("workInfoHomepage"),Pb,ub(),!1).addLabelNoLanguage("work info homepage").addCommentNoLanguage("A work info homepage of some person; a page about their work for some organization."),workplaceHomepage:new vb(hw("workplaceHomepage"),Pb,ub(),!1).addLabelNoLanguage("workplace homepage").addCommentNoLanguage("A workplace homepage of some person; the homepage of an organization they work for."),yahooChatID:new vb(hw("yahooChatID"),Pb,ub(),!1).addLabelNoLanguage("Yahoo chat ID").addCommentNoLanguage("A Yahoo chat ID")},vw=Pb.namedNode;function mw(e){return vw("http://purl.org/linked-data/cube#"+e)}new vb(mw("DataSet"),Pb,ub(),!1).addLabel("Data set","en").addComment("Represents a collection of observations, possibly organized into various slices, conforming to some common dimensional structure.","en"),new vb(mw("Attachable"),Pb,ub(),!1).addLabel("Attachable (abstract)","en").addComment("Abstract superclass for everything that can have attributes and dimensions","en"),new vb(mw("Observation"),Pb,ub(),!1).addLabel("Observation","en").addComment("A single observation in the cube, may have one or more associated measured values","en"),new vb(mw("ObservationGroup"),Pb,ub(),!1).addLabel("Observation Group","en").addComment("A, possibly arbitrary, group of observations.","en"),new vb(mw("Slice"),Pb,ub(),!1).addLabel("Slice","en").addComment("Denotes a subset of a DataSet defined by fixing a subset of the dimensional values, component properties on the Slice","en"),new vb(mw("ComponentProperty"),Pb,ub(),!1).addLabel("Component property (abstract)","en").addComment("Abstract super-property of all properties representing dimensions, attributes or measures","en"),new vb(mw("DimensionProperty"),Pb,ub(),!1).addLabel("Dimension property","en").addComment("The class of components which represent the dimensions of the cube","en"),new vb(mw("CodedProperty"),Pb,ub(),!1).addLabel("Coded property","en").addComment("Superclass of all coded ComponentProperties","en"),new vb(mw("MeasureProperty"),Pb,ub(),!1).addLabel("Measure property","en").addComment("The class of components which represent the measured value of the phenomenon being observed","en"),new vb(mw("AttributeProperty"),Pb,ub(),!1).addLabel("Attribute property","en").addComment("The class of components which represent attributes of observations in the cube, e.g. unit of measurement","en"),new vb(mw("DataStructureDefinition"),Pb,ub(),!1).addLabel("Data structure definition","en").addComment("Defines the structure of a DataSet or slice","en"),new vb(mw("ComponentSet"),Pb,ub(),!1).addLabel("Component set","en").addComment("Abstract class of things which reference one or more ComponentProperties","en"),new vb(mw("ComponentSpecification"),Pb,ub(),!1).addLabel("Component specification","en").addComment("Used to define properties of a component (attribute, dimension etc) which are specific to its usage in a DSD.","en"),new vb(mw("SliceKey"),Pb,ub(),!1).addLabel("Slice key","en").addComment("Denotes a subset of the component properties of a DataSet which are fixed in the corresponding slices","en"),new vb(mw("HierarchicalCodeList"),Pb,ub(),!1).addLabel("Hierarchical Code List","en").addComment("Represents a generalized hierarchy of concepts which can be used for coding. The hierarchy is defined by one or more roots together with a property which relates concepts in the hierarchy to thier child concept .  The same concepts may be members of multiple hierarchies provided that different qb:parentChildProperty values are used for each hierarchy.","en"),new vb(mw("dataSet"),Pb,ub(),!1).addLabel("data set","en").addComment("indicates the data set of which this observation is a part","en"),new vb(mw("observation"),Pb,ub(),!1).addLabel("observation","en").addComment("indicates a observation contained within this slice of the data set","en"),new vb(mw("observationGroup"),Pb,ub(),!1).addLabel("observation group","en").addComment("Indicates a group of observations. The domain of this property is left open so that a group may be attached to different resources and need not be restricted to a single DataSet","en"),new vb(mw("slice"),Pb,ub(),!1).addLabel("slice","en").addComment("Indicates a subset of a DataSet defined by fixing a subset of the dimensional values","en"),new vb(mw("measureType"),Pb,ub(),!1).addLabel("measure type","en").addComment("Generic measure dimension, the value of this dimension indicates which measure (from the set of measures in the DSD) is being given by the obsValue (or other primary measure)","en"),new vb(mw("structure"),Pb,ub(),!1).addLabel("structure","en").addComment("indicates the structure to which this data set conforms","en"),new vb(mw("component"),Pb,ub(),!1).addLabel("component specification","en").addComment("indicates a component specification which is included in the structure of the dataset","en"),new vb(mw("componentProperty"),Pb,ub(),!1).addLabel("component","en").addComment("indicates a ComponentProperty (i.e. attribute/dimension) expected on a DataSet, or a dimension fixed in a SliceKey","en"),new vb(mw("order"),Pb,ub(),!1).addLabel("order","en").addComment("indicates a priority order for the components of sets with this structure, used to guide presentations - lower order numbers come before higher numbers, un-numbered components come last","en"),new vb(mw("componentRequired"),Pb,ub(),!1).addLabel("component required","en").addComment("Indicates whether a component property is required (true) or optional (false) in the context of a DSD. Only applicable\n    to components correspond to an attribute. Defaults to false (optional).","en"),new vb(mw("componentAttachment"),Pb,ub(),!1).addLabel("component attachment","en").addComment("Indicates the level at which the component property should be attached, this might an qb:DataSet, qb:Slice or qb:Observation, or a qb:MeasureProperty.","en"),new vb(mw("dimension"),Pb,ub(),!1).addLabel("dimension","en").addComment("An alternative to qb:componentProperty which makes explicit that the component is a dimension","en"),new vb(mw("measure"),Pb,ub(),!1).addLabel("measure","en").addComment("An alternative to qb:componentProperty which makes explicit that the component is a measure","en"),new vb(mw("attribute"),Pb,ub(),!1).addLabel("attribute","en").addComment("An alternative to qb:componentProperty which makes explicit that the component is a attribute","en"),new vb(mw("measureDimension"),Pb,ub(),!1).addLabel("measure dimension","en").addComment("An alternative to qb:componentProperty which makes explicit that the component is a measure dimension","en"),new vb(mw("sliceStructure"),Pb,ub(),!1).addLabel("slice structure","en").addComment("indicates the sub-key corresponding to this slice","en"),new vb(mw("sliceKey"),Pb,ub(),!1).addLabel("slice key","en").addComment("indicates a slice key which is used for slices in this dataset","en"),new vb(mw("concept"),Pb,ub(),!1).addLabel("concept","en").addComment("gives the concept which is being measured or indicated by a ComponentProperty","en"),new vb(mw("codeList"),Pb,ub(),!1).addLabel("code list","en").addComment("gives the code list associated with a CodedProperty","en"),new vb(mw("hierarchyRoot"),Pb,ub(),!1).addComment("Specifies a root of the hierarchy. A hierarchy may have multiple roots but must have at least one.","en"),new vb(mw("parentChildProperty"),Pb,ub(),!1).addLabel("parent-child property","en").addComment("Specifies a property which relates a parent concept in the hierarchy to a child concept.","en");var gw=Pb.namedNode;function yw(e){return gw("http://purl.org/linked-data/sdmx/2009/dimension#"+e)}new vb(yw("age"),Pb,ub(),!1).addLabel("Age","en").addComment("The length of time that a person has lived or a thing has existed.","en"),new vb(yw("civilStatus"),Pb,ub(),!1).addLabel("Civil Status","en").addComment("Legal, conjugal status of each individual in relation to the marriage laws or customs of the country.","en"),new vb(yw("currency"),Pb,ub(),!1).addLabel("Currency","en").addComment("Monetary denomination of the object being measured.","en"),new vb(yw("educationLev"),Pb,ub(),!1).addLabel("Education Level","en").addComment("The highest level of an educational programme the person has successfully completed.","en"),new vb(yw("freq"),Pb,ub(),!1).addLabel("Frequency","en").addComment("The time interval at which observations occur over a given time period.","en"),new vb(yw("occupation"),Pb,ub(),!1).addLabel("Occupation","en").addComment("Job or position held by an individual who performs a set of tasks and duties.","en"),new vb(yw("refArea"),Pb,ub(),!1).addLabel("Reference Area","en").addComment("The country or geographic area to which the measured statistical phenomenon relates.","en"),new vb(yw("refPeriod"),Pb,ub(),!1).addLabel("Reference Period","en").addComment("The period of time or point in time to which the measured observation is intended to refer.","en"),new vb(yw("sex"),Pb,ub(),!1).addLabel("Sex","en").addComment("The state of being male or female.","en"),new vb(yw("timePeriod"),Pb,ub(),!1).addLabel("Time Period","en").addComment("The period of time or point in time to which the measured observation refers.","en");var _w=y_((function(e){return{container:{display:"flex",flexWrap:"wrap",width:"60%",height:"60%",marginTop:"10%",marginLeft:"30%",margin:"".concat(e.spacing(0)," auto")},loginBtn:{marginTop:e.spacing(2),flexGrow:1},margen:{margin:"-25px 0 0 -25px",marginRight:"30%",marginTop:e.spacing(20),display:"flex",justifyContent:"center",position:"absolute",top:"50%",left:"50%"},header:{textAlign:"center",background:"#212121",color:"#fff"},card:{marginTop:e.spacing(10),width:"70%",height:""}}})),bw=function(){var e=_w(),t=(0,ga.useSession)().session;return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("form",{className:e.container,noValidate:!0,autoComplete:"on",children:(0,_.jsxs)(A_,{fixed:!0,children:[t.info.webId?(0,_.jsx)(ga.CombinedDataProvider,{datasetUrl:t.info.webId,thingUrl:t.info.webId,children:(0,_.jsxs)(I_,{className:e.card,children:[(0,_.jsx)(F_,{className:e.header,title:"User"}),(0,_.jsx)(N_,{children:(0,_.jsx)(M_,{gutterBottom:!0,variant:"h5",component:"h2",children:(0,_.jsx)(ga.Text,{property:pw.name.iri.value})})}),(0,_.jsx)(ab,{style:{justifyContent:"center",display:"flex"}})]})}):null,(0,_.jsx)(ga.LogoutButton,{children:(0,_.jsx)(sb,{style:{marginTop:20},variant:"contained",color:"primary",href:"/LoginForm",children:"Logout"})})]})})})};var ww=function(e){var t=e.session;return(0,_.jsx)(ga.SessionProvider,{sessionId:"",children:t.info.isLoggedIn?(0,_.jsx)(bw,{}):(0,_.jsx)(w_,{})})},xw=n.p+"static/media/fotopjavi.8fcd29bebfe0c8111699.png",kw=n.p+"static/media/fotopruben.410af2045ea2193d0158.png",Sw=n.p+"static/media/fotopalonso.685d26c12c1cc52dd3e9.png",Ew=n.p+"static/media/fotoppablo.4d8462c7818b862947d6.png",Aw=n.p+"static/media/fotopsergio.5420b8a4450feebfb186.png";var Tw=function(e){if(!e.session.info.isLoggedIn)return(0,_.jsx)(Yi,{to:"/login",replace:!0});var t=[{name:"Javier Novella",role:"Developer",description:"Desarrollador junior de la Universidad de Oviedo, estudiante del grado de Informatica de Software y saxofonista profesional del conservatorio de Oviedo",photo:xw},{name:"Rub\xe9n D\xedaz",role:"Developer",description:"Desarrollador junior de la Universidad de Oviedo, estudiante del grado de Informatica de Software y estudiante prodigio en la computaci\xf3n cu\xe1ntica",photo:kw},{name:"Alonso Antu\xf1a",role:"Developer",description:"Desarrollador junior de la Universidad de Oviedo, estudiante del grado de Informatica de Software y estudiante prodigio en la computaci\xf3n cu\xe1ntica",photo:Sw},{name:"Pablo Fern\xe1ndez",role:"Developer",description:"Desarrollador junior de la Universidad de Oviedo, estudiante del grado de Informatica de Software y estudiante prodigio en la computaci\xf3n cu\xe1ntica",photo:Ew},{name:"Sergio Moro",role:"Developer",description:"Desarrollador junior de la Universidad de Oviedo, estudiante del grado de Informatica de Software y estudiante prodigio en la computaci\xf3n cu\xe1ntica",photo:Aw}];return(0,_.jsxs)("div",{className:"about-us",children:[(0,_.jsx)("h2",{style:{color:"white"},children:"About Us"}),(0,_.jsx)("div",{className:"team-members",children:t.map((function(e){return(0,_.jsxs)("div",{className:"member",children:[(0,_.jsx)("img",{src:e.photo,alt:e.name}),(0,_.jsx)("h3",{children:e.name}),(0,_.jsx)("p",{children:e.role}),(0,_.jsx)("p",{children:e.description})]},e.name)}))})]})};var Cw=function(){var e=(0,ga.useSession)().session;return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(ga.SessionProvider,{sessionId:"logIn",children:(0,_.jsxs)(ua,{children:[(0,_.jsx)("div",{className:"contenedor-navegacion",children:(0,_.jsx)(ya,{})}),(0,_.jsx)("div",{className:"contenedor-rutas",children:(0,_.jsxs)(ea,{children:[(0,_.jsx)(Qi,{path:"/",element:(0,_.jsx)(x,{})}),(0,_.jsx)(Qi,{path:"/Mapa",element:(0,_.jsx)(ra,{session:e,modo:!0})}),(0,_.jsx)(Qi,{path:"/MapaAmigo/:user",element:(0,_.jsx)(ia,{session:e})}),(0,_.jsx)(Qi,{path:"/Amigos",element:(0,_.jsx)(va,{session:e})}),(0,_.jsx)(Qi,{path:"/Aboutus",element:(0,_.jsx)(Tw,{session:e})}),(0,_.jsx)(Qi,{path:"/Login",element:(0,_.jsx)(ww,{session:e})}),(0,_.jsx)(Qi,{path:"/LoginForm",element:(0,_.jsx)(w_,{})}),(0,_.jsx)(Qi,{path:"/ProfileViewer",element:(0,_.jsx)(bw,{})})]})})]})})})},Pw=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,_.jsx)(e.StrictMode,{children:(0,_.jsx)(Cw,{})}),document.getElementById("root")),Pw()}()}();
//# sourceMappingURL=main.0a781e22.js.map